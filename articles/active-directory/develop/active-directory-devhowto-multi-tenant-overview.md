---
title: aaaHow toobuild een app waarvoor Azure AD-gebruiker kunt aanmelden | Microsoft Docs
description: Stapsgewijze instructies voor het ontwikkelen van een toepassing die kunnen Meld u aan een gebruiker van een Azure Active Directory-tenant, ook wel bekend als een multitenant-toepassing.
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 123ea8125fa3c308ce0f124cc58e85ec28d476d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-toosign-in-any-azure-active-directory-ad-user-using-hello-multi-tenant-application-pattern"></a><span data-ttu-id="28f21-103">Hoe toosign aan alle Azure Active Directory (AD) gebruiker met Hallo patroon toepassing met meerdere tenants</span><span class="sxs-lookup"><span data-stu-id="28f21-103">How toosign in any Azure Active Directory (AD) user using hello multi-tenant application pattern</span></span>
<span data-ttu-id="28f21-104">Als u een Software als een Service-toepassing toomany organisaties bieden, kunt u uw toepassing tooaccept aanmeldingen vanaf elke Azure AD-tenant kunt configureren.</span><span class="sxs-lookup"><span data-stu-id="28f21-104">If you offer a Software as a Service application toomany organizations, you can configure your application tooaccept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="28f21-105">Dit heet in Azure AD maken van uw toepassing meerdere tenants.</span><span class="sxs-lookup"><span data-stu-id="28f21-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="28f21-106">Gebruikers in een Azure AD-tenant zich kunnen toosign in tooyour toepassing na ermee akkoord dat toouse voor hun rekening met uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="28f21-106">Users in any Azure AD tenant will be able toosign in tooyour application after consenting toouse their account with your application.</span></span>  

<span data-ttu-id="28f21-107">Als er een bestaande toepassing die heeft een eigen accountsysteem of andere vormen van de aanmeldingspagina van andere cloudproviders ondersteunt, is toe te voegen Azure AD aanmelden van een tenant eenvoudig.</span><span class="sxs-lookup"><span data-stu-id="28f21-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="28f21-108">Uw app registreren, aanmelden code via OAuth2, OpenID Connect of SAML toevoegen en een knop 'Aanmelding In met Microsoft' zijn ingesteld voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="28f21-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="28f21-109">Klik op volgende knop toolearn meer over de huisstijl van uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="28f21-109">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="28f21-110">[! [Knop aanmelden] [AAD-aanmeldingspagina]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="28f21-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="28f21-111">In dit artikel wordt ervan uitgegaan dat u al bekend bent met het bouwen van een toepassing voor één tenant voor Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28f21-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="28f21-112">Als u niet bent, head back-up toohello [developer guide startpagina] [ AAD-Dev-Guide] en probeer een van onze snel aan de slag!</span><span class="sxs-lookup"><span data-stu-id="28f21-112">If you’re not, head back up toohello [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="28f21-113">Er zijn vier eenvoudige stappen tooconvert van uw toepassing in een Azure AD-multitenant-app:</span><span class="sxs-lookup"><span data-stu-id="28f21-113">There are four simple steps tooconvert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="28f21-114">Bijwerken van uw toepassing registratie toobe meerdere tenants</span><span class="sxs-lookup"><span data-stu-id="28f21-114">Update your application registration toobe multi-tenant</span></span>
2. <span data-ttu-id="28f21-115">Werk uw code toosend aanvragen toohello/Common eindpunt</span><span class="sxs-lookup"><span data-stu-id="28f21-115">Update your code toosend requests toohello /common endpoint</span></span> 
3. <span data-ttu-id="28f21-116">Werk uw code toohandle meerdere verlener waarden</span><span class="sxs-lookup"><span data-stu-id="28f21-116">Update your code toohandle multiple issuer values</span></span>
4. <span data-ttu-id="28f21-117">Gebruikers- en -beheerder toestemming begrijpen en geschikte codewijzigingen aanbrengen</span><span class="sxs-lookup"><span data-stu-id="28f21-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="28f21-118">Bekijk elke stap in detail.</span><span class="sxs-lookup"><span data-stu-id="28f21-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="28f21-119">U kunt ook direct door te gaan[deze lijst met voorbeelden van meerdere tenants][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="28f21-119">You can also jump straight too[this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-toobe-multi-tenant"></a><span data-ttu-id="28f21-120">Registratie toobe multitenant bijwerken</span><span class="sxs-lookup"><span data-stu-id="28f21-120">Update registration toobe multi-tenant</span></span>
<span data-ttu-id="28f21-121">Web-app/API registraties in Azure AD zijn standaard één tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="28f21-122">U kunt uw inschrijving multitenant maken door het zoeken Hallo 'meerdere verpachte' overschakelen op de eigenschappenpagina Hallo van uw toepassing registreren in Hallo [Azure-portal] [ AZURE-portal] en te 'Ja' instellen.</span><span class="sxs-lookup"><span data-stu-id="28f21-122">You can make your registration multi-tenant by finding hello “Multi-Tenanted” switch on hello properties page of your application registration in hello [Azure portal][AZURE-portal] and setting it too“Yes”.</span></span>

<span data-ttu-id="28f21-123">Vergeet niet, voordat een toepassing kan worden gemaakt op meerdere tenants Azure AD vereist Hallo App ID URI van Hallo toepassing toobe globaal uniek zijn.</span><span class="sxs-lookup"><span data-stu-id="28f21-123">Also note, before an application can be made multi-tenant, Azure AD requires hello App ID URI of hello application toobe globally unique.</span></span> <span data-ttu-id="28f21-124">Hallo App ID URI is Hallo manieren die een toepassing in protocolberichten wordt geïdentificeerd.</span><span class="sxs-lookup"><span data-stu-id="28f21-124">hello App ID URI is one of hello ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="28f21-125">Voor een toepassing voor één tenant is het voldoende voor Hallo App ID URI toobe uniek zijn binnen deze tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-125">For a single tenant application, it is sufficient for hello App ID URI toobe unique within that tenant.</span></span>  <span data-ttu-id="28f21-126">Voor een toepassing met meerdere tenants moet het wereldwijd uniek zodat Azure AD-toepassing hello over alle huurders kan vinden.</span><span class="sxs-lookup"><span data-stu-id="28f21-126">For a multi-tenant application, it must be globally unique so Azure AD can find hello application across all tenants.</span></span>  <span data-ttu-id="28f21-127">Globale uniekheid wordt afgedwongen door te vereisen Hallo App ID URI toohave een host-naam die overeenkomt met een geverifieerde domein voor hello Azure AD-tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-127">Global uniqueness is enforced by requiring hello App ID URI toohave a host name that matches a verified domain of hello Azure AD tenant.</span></span>  <span data-ttu-id="28f21-128">Bijvoorbeeld, als Hallo-naam van uw tenant contoso.onmicrosoft.com en vervolgens een geldig is App-ID-URI zou zijn `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="28f21-128">For example, if hello name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="28f21-129">Als uw tenant had een geverifieerde domein voor `contoso.com`, moet een geldige App ID URI zou ook `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="28f21-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="28f21-130">Instellen van een toepassing als multitenant mislukt als Hallo App ID URI niet dit patroon volgen.</span><span class="sxs-lookup"><span data-stu-id="28f21-130">Setting an application as multi-tenant will fail if hello App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="28f21-131">Native clientregistraties zijn multitenant standaard.</span><span class="sxs-lookup"><span data-stu-id="28f21-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="28f21-132">U hoeft niet tootake elke actie toomake een native client application registration meerdere tenants.</span><span class="sxs-lookup"><span data-stu-id="28f21-132">You don’t need tootake any action toomake a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-toosend-requests-toocommon"></a><span data-ttu-id="28f21-133">Uw code toosend aanvragen te gemeenschappelijke bijwerken</span><span class="sxs-lookup"><span data-stu-id="28f21-133">Update your code toosend requests too/common</span></span>
<span data-ttu-id="28f21-134">In een toepassing één tenant aanmeldingsaanvragen toohello-tenant aanmelden eindpunt verzonden.</span><span class="sxs-lookup"><span data-stu-id="28f21-134">In a single tenant application, sign-in requests are sent toohello tenant’s sign-in endpoint.</span></span> <span data-ttu-id="28f21-135">Voor contoso.onmicrosoft.com kan Hallo eindpunt zou zijn:</span><span class="sxs-lookup"><span data-stu-id="28f21-135">For example, for contoso.onmicrosoft.com hello endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="28f21-136">Aanvragen verzonden tooa-tenant-eindpunt kunt aanmelden gebruikers (of gasten) in die tooapplications tenant in deze tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-136">Requests sent tooa tenant’s endpoint can sign in users (or guests) in that tenant tooapplications in that tenant.</span></span>  <span data-ttu-id="28f21-137">Met een multitenant-toepassing hello toepassing niet weet wat tenant Hallo-gebruiker is, zodat u kunt geen verzenden aanvragen vooraf tooa-tenant-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="28f21-137">With a multi-tenant application, hello application doesn’t know up front what tenant hello user is from, so you can’t send requests tooa tenant’s endpoint.</span></span>  <span data-ttu-id="28f21-138">Aanvragen verzonden in plaats daarvan tooan-eindpunt dat multiplexes over alle Azure AD-tenants:</span><span class="sxs-lookup"><span data-stu-id="28f21-138">Instead, requests are sent tooan endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="28f21-139">Azure AD ontvangt wanneer een aanvraag op Hallo/gemeenschappelijk eindpunt het Hallo-gebruiker zich aanmeldt en als gevolg welke tenant Hallo gebruiker detecteert uit.</span><span class="sxs-lookup"><span data-stu-id="28f21-139">When Azure AD receives a request on hello /common endpoint, it signs hello user in and as a consequence discovers which tenant hello user is from.</span></span>  <span data-ttu-id="28f21-140">Hallo/gemeenschappelijk eindpunt werkt met alle Hallo verificatieprotocollen ondersteund door Azure AD: OpenID Connect, OAuth 2.0 SAML 2.0 en WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="28f21-140">hello /common endpoint works with all of hello authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="28f21-141">Hallo aanmelden antwoord toohello toepassing vervolgens bevat een token dat Hallo gebruiker voorstelt.</span><span class="sxs-lookup"><span data-stu-id="28f21-141">hello sign-in response toohello application then contains a token representing hello user.</span></span>  <span data-ttu-id="28f21-142">Hallo verlener waarde in Hallo token Hiermee geeft u een toepassing wat Hallo huurder gebruiker afkomstig is van.</span><span class="sxs-lookup"><span data-stu-id="28f21-142">hello issuer value in hello token tells an application what tenant hello user is from.</span></span>  <span data-ttu-id="28f21-143">Wanneer een antwoord geretourneerd van Hallo-gemeenschappelijk eindpunt, Hallo verlener waarde in Hallo-token van de gebruiker toohello tenant overeen.</span><span class="sxs-lookup"><span data-stu-id="28f21-143">When a response returns from hello /common endpoint, hello issuer value in hello token will correspond toohello user’s tenant.</span></span>  <span data-ttu-id="28f21-144">Het is belangrijk toonote Hallo/gemeenschappelijk eindpunt is niet een tenant en is niet een verlener en is alleen een multiplexer.</span><span class="sxs-lookup"><span data-stu-id="28f21-144">It’s important toonote hello /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="28f21-145">Wanneer u/Common, moet Hallo logica in uw toepassing toovalidate tokens toobe bijgewerkt tootake dit in aanmerking.</span><span class="sxs-lookup"><span data-stu-id="28f21-145">When using /common, hello logic in your application toovalidate tokens needs toobe updated tootake this into account.</span></span> 

<span data-ttu-id="28f21-146">Zoals eerder vermeld, multitenant-toepassingen ook een consistente ervaring voor aanmelding voor gebruikers bieden moeten, Hallo volgende huisstijl richtlijnen voor Azure AD-toepassing.</span><span class="sxs-lookup"><span data-stu-id="28f21-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following hello Azure AD application branding guidelines.</span></span> <span data-ttu-id="28f21-147">Klik op volgende knop toolearn meer over de huisstijl van uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="28f21-147">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="28f21-148">[! [Knop aanmelden] [AAD-aanmeldingspagina]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="28f21-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="28f21-149">Laten we bij het gebruik van Hallo/Common Hallo eindpunt en de implementatie van uw code in meer detail.</span><span class="sxs-lookup"><span data-stu-id="28f21-149">Let’s take a look at hello use of hello /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-toohandle-multiple-issuer-values"></a><span data-ttu-id="28f21-150">Werk uw code toohandle meerdere verlener waarden</span><span class="sxs-lookup"><span data-stu-id="28f21-150">Update your code toohandle multiple issuer values</span></span>
<span data-ttu-id="28f21-151">Webtoepassingen en web-API's ontvangen en valideren van tokens van Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28f21-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="28f21-152">Hoewel systeemeigen clienttoepassingen aanvragen en tokens van Azure AD ontvangen, ze in dat geval toosend doen ze tooAPIs, waar ze worden gevalideerd.</span><span class="sxs-lookup"><span data-stu-id="28f21-152">While native client applications request and receive tokens from Azure AD, they do so toosend them tooAPIs, where they are validated.</span></span>  <span data-ttu-id="28f21-153">Systeemeigen toepassingen tokens wordt niet gevalideerd en moeten ze behandelen als ondoorzichtige.</span><span class="sxs-lookup"><span data-stu-id="28f21-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="28f21-154">We bekijken op hoe een toepassing tokens valideert het ontvangt van Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28f21-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="28f21-155">Een toepassing voor één tenant duurt normaal gesproken een endpoint-waarde, zoals:</span><span class="sxs-lookup"><span data-stu-id="28f21-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="28f21-156">en gebruik deze tooconstruct, zoals een metagegevens-URL (in dit geval OpenID Connect):</span><span class="sxs-lookup"><span data-stu-id="28f21-156">and use it tooconstruct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="28f21-157">toodownload twee kritieke stukjes informatie die gebruikt toovalidate tokens zijn: Hallo tenant het ondertekenen van sleutels en waarde van de verlener.</span><span class="sxs-lookup"><span data-stu-id="28f21-157">toodownload two critical pieces of information that are used toovalidate tokens:  hello tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="28f21-158">Elke Azure AD-tenant heeft de waarde van een unieke verlener Hallo vorm:</span><span class="sxs-lookup"><span data-stu-id="28f21-158">Each Azure AD tenant has a unique issuer value of hello form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="28f21-159">Hallo GUID-waarde is waar Hallo rename-safe versie van de tenant-ID van de tenant Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="28f21-159">where hello GUID value is hello rename-safe version of hello tenant ID of hello tenant.</span></span>  <span data-ttu-id="28f21-160">Als je op Hallo voorafgaand aan de metagegevens van de koppeling voor `contoso.onmicrosoft.com`, kunt u deze waarde van de verlener in Hallo document bekijken.</span><span class="sxs-lookup"><span data-stu-id="28f21-160">If you click on hello preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in hello document.</span></span>

<span data-ttu-id="28f21-161">Als een toepassing voor één tenant een token valideert, controleert deze Hallo handtekening van Hallo token tegen Hallo ondertekeningssleutels uit Hallo metagegevensdocument.</span><span class="sxs-lookup"><span data-stu-id="28f21-161">When a single tenant application validates a token, it checks hello signature of hello token against hello signing keys from hello metadata document.</span></span> <span data-ttu-id="28f21-162">Hierdoor kunnen deze toomake ervoor Hallo verlener waarde in Hallo token komt overeen met Hallo een die is gevonden in het document Hallo-metagegevens.</span><span class="sxs-lookup"><span data-stu-id="28f21-162">This allows it toomake sure hello issuer value in hello token matches hello one that was found in hello metadata document.</span></span>

<span data-ttu-id="28f21-163">Sinds Hallo/algemene wordt eindpunt tooa tenant komt niet overeen en een verlener niet wanneer u bekijkt hello verlener waarde in Hallo-metagegevens voor/algemene hieraan een sjablonen URL in plaats van een werkelijke waarde:</span><span class="sxs-lookup"><span data-stu-id="28f21-163">Since hello /common endpoint doesn’t correspond tooa tenant and isn’t an issuer, when you examine hello issuer value in hello metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="28f21-164">Daarom een multitenant-toepassing kan niet worden gevalideerd tokens door die overeenkomt met de Hallo verlener waarde in de metagegevens Hallo Hello `issuer` waarde in het Hallo-token.</span><span class="sxs-lookup"><span data-stu-id="28f21-164">Therefore, a multi-tenant application can’t validate tokens just by matching hello issuer value in hello metadata with hello `issuer` value in hello token.</span></span>  <span data-ttu-id="28f21-165">Een toepassing met meerdere tenants logica toodecide welke verlener waarden geldig zijn en zijn niet nodig, op basis van Hallo tenant-id-gedeelte van Hallo verlener waarde.</span><span class="sxs-lookup"><span data-stu-id="28f21-165">A multi-tenant application needs logic toodecide which issuer values are valid and which are not, based on hello tenant ID portion of hello issuer value.</span></span>  

<span data-ttu-id="28f21-166">Bijvoorbeeld, als een multitenant-toepassing alleen kunt aanmelden van specifieke tenants die zich hebben geregistreerd voor de service, vervolgens deze moet controleren Hallo verlener waarde of Hallo `tid` claimwaarde in Hallo token toomake ervoor dat de tenant is in de lijst met abonnees.</span><span class="sxs-lookup"><span data-stu-id="28f21-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either hello issuer value or hello `tid` claim value in hello token toomake sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="28f21-167">Als een multitenant-toepassing alleen omgaat met personen niet beslissingen eventuele toegang op basis van tenants, vervolgens kan worden genegeerd Hallo verlener waarde kan worden overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="28f21-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore hello issuer value altogether.</span></span>

<span data-ttu-id="28f21-168">In de voorbeelden van meerdere tenants Hallo in Hallo [verwante inhoud](#related-content) sectie aan Hallo einde van dit artikel wordt de verlener validatie is uitgeschakeld tooenable elke Azure AD-tenant toosign in.</span><span class="sxs-lookup"><span data-stu-id="28f21-168">In hello multi-tenant samples in hello [Related Content](#related-content) section at hello end of this article, issuer validation is disabled tooenable any Azure AD tenant toosign in.</span></span>

<span data-ttu-id="28f21-169">Nu we bekijken Hallo gebruikerservaring voor gebruikers die in toepassingen met toomulti-tenant aanmeldt zich.</span><span class="sxs-lookup"><span data-stu-id="28f21-169">Now let’s look at hello user experience for users that are signing in toomulti-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="28f21-170">Wat gebruikers- en toestemming van de beheerder</span><span class="sxs-lookup"><span data-stu-id="28f21-170">Understanding user and admin consent</span></span>
<span data-ttu-id="28f21-171">Voor een gebruiker toosign in tooan toepassing in Azure AD, moet de toepassing hello worden weergegeven in van de gebruiker van het Hallo-tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-171">For a user toosign in tooan application in Azure AD, hello application must be represented in hello user’s tenant.</span></span>  <span data-ttu-id="28f21-172">Hierdoor kunnen toodo zoiets als unieke beleidsregels toepassen wanneer gebruikers vanaf hun tenant zich toohello toepassing hello organisatie.</span><span class="sxs-lookup"><span data-stu-id="28f21-172">This allows hello organization toodo things like apply unique policies when users from their tenant sign in toohello application.</span></span>  <span data-ttu-id="28f21-173">Voor een toepassing voor één tenant is deze registratie eenvoudig; Dit is een die optreedt wanneer u Hallo toepassing in Hallo registreren Hallo [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="28f21-173">For a single tenant application, this registration is simple; it’s hello one that happens when you register hello application in hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="28f21-174">Voor een multitenant-toepassing woont hello initiële registratie voor de toepassing hello in hello Azure AD-tenant die wordt gebruikt door de ontwikkelaar Hallo.</span><span class="sxs-lookup"><span data-stu-id="28f21-174">For a multi-tenant application, hello initial registration for hello application lives in hello Azure AD tenant used by hello developer.</span></span>  <span data-ttu-id="28f21-175">Wanneer een gebruiker van een andere tenant zich aanmeldt toohello-toepassing voor Hallo eerst, Azure AD wordt gevraagd deze tooconsent toohello machtigingen door de toepassing hello is aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="28f21-175">When a user from a different tenant signs in toohello application for hello first time, Azure AD asks them tooconsent toohello permissions requested by hello application.</span></span>  <span data-ttu-id="28f21-176">Als ze toestemming geeft, wordt een weergave van de toepassing hello aangeroepen een *service-principal* in wordt gemaakt van gebruiker tenant Hallo en aanmelden kan worden voortgezet.</span><span class="sxs-lookup"><span data-stu-id="28f21-176">If they consent, then a representation of hello application called a *service principal* is created in hello user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="28f21-177">Een overdracht wordt ook in Hallo-map die u Hallo van de gebruiker toestemming toohello toepassing registreert gemaakt.</span><span class="sxs-lookup"><span data-stu-id="28f21-177">A delegation is also created in hello directory that records hello user’s consent toohello application.</span></span> <span data-ttu-id="28f21-178">Zie [toepassingsobjecten en Service-Principal objecten] [ AAD-App-SP-Objects] voor meer informatie over van de toepassing hello toepassings- en ServicePrincipal objecten en hun relatie tooeach andere.</span><span class="sxs-lookup"><span data-stu-id="28f21-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on hello application's Application and ServicePrincipal objects, and how they relate tooeach other.</span></span>

![Toestemming toosingle laag app][Consent-Single-Tier] 

<span data-ttu-id="28f21-180">Deze ervaring toestemming wordt beïnvloed door het Hallo-machtigingen die zijn aangevraagd door toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="28f21-180">This consent experience is affected by hello permissions requested by hello application.</span></span>  <span data-ttu-id="28f21-181">Azure AD ondersteunt twee soorten app alleen-lezen en gedelegeerde machtigingen:</span><span class="sxs-lookup"><span data-stu-id="28f21-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="28f21-182">Een gedelegeerde machtigingen verleent een toepassing hello mogelijkheid tooact als een aangemelde gebruiker voor een subset van Hallo dingen Hallo gebruiker kunt doen.</span><span class="sxs-lookup"><span data-stu-id="28f21-182">A delegated permission grants an application hello ability tooact as a signed in user for a subset of hello things hello user can do.</span></span>  <span data-ttu-id="28f21-183">U kunt bijvoorbeeld een toepassing hello gedelegeerde machtigingen tooread Hallo ondertekend in de agenda gebruiker verlenen.</span><span class="sxs-lookup"><span data-stu-id="28f21-183">For example, you can grant an application hello delegated permission tooread hello signed in user’s calendar.</span></span>
* <span data-ttu-id="28f21-184">Een app alleen-lezen-machtiging verleend rechtstreeks toohello identiteit van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="28f21-184">An app-only permission is granted directly toohello identity of hello application.</span></span>  <span data-ttu-id="28f21-185">U kunt bijvoorbeeld een toepassing hello app alleen-lezen tooread Hallo lijst met machtigingen van gebruikers in een tenant, ongeacht wie is ondertekend in toohello toepassing verlenen.</span><span class="sxs-lookup"><span data-stu-id="28f21-185">For example, you can grant an application hello app-only permission tooread hello list of users in a tenant, regardless of who is signed in toohello application.</span></span>

<span data-ttu-id="28f21-186">Sommige machtigingen mag instemming tooby een gewone gebruiker, terwijl andere gebruikers toestemming van de tenantbeheerder vereisen.</span><span class="sxs-lookup"><span data-stu-id="28f21-186">Some permissions can be consented tooby a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="28f21-187">Beheerder toestemming</span><span class="sxs-lookup"><span data-stu-id="28f21-187">Admin consent</span></span>
<span data-ttu-id="28f21-188">Machtigingen voor alleen-App moeten altijd toestemming van de tenantbeheerder.</span><span class="sxs-lookup"><span data-stu-id="28f21-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="28f21-189">Als uw toepassing een machtiging app alleen worden aangevraagd en een gebruiker toosign in toohello toepassing probeert, wordt een foutbericht weergegeven Hallo gebruiker kunnen tooconsent wordt niet weergegeven.</span><span class="sxs-lookup"><span data-stu-id="28f21-189">If your application requests an app-only permission and a user tries toosign in toohello application, an error message will be displayed saying hello user isn’t able tooconsent.</span></span>

<span data-ttu-id="28f21-190">Bepaalde gedelegeerde machtigingen, ook verplichten toestemming van de tenantbeheerder.</span><span class="sxs-lookup"><span data-stu-id="28f21-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="28f21-191">Bijvoorbeeld, nodig Hallo mogelijkheid toowrite back tooAzure AD als een gebruiker aangemeld Hallo toestemming om een tenantbeheerder.</span><span class="sxs-lookup"><span data-stu-id="28f21-191">For example, hello ability toowrite back tooAzure AD as hello signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="28f21-192">Net als de app alleen-lezen-machtigingen als een gewone gebruiker probeert toosign in tooan-toepassing waarin een gedelegeerde machtiging die beheerder-toestemming nodig om wordt uw toepassing een foutbericht.</span><span class="sxs-lookup"><span data-stu-id="28f21-192">Like app-only permissions, if an ordinary user tries toosign in tooan application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="28f21-193">Een machtiging vereist of admin toestemming wordt bepaald door Hallo-ontwikkelaar die Hallo resource gepubliceerd en kan worden gevonden in het Hallo-documentatie voor Hallo resource.</span><span class="sxs-lookup"><span data-stu-id="28f21-193">Whether or not a permission requires admin consent is determined by hello developer that published hello resource, and can be found in hello documentation for hello resource.</span></span>  <span data-ttu-id="28f21-194">Koppelingen beschrijven Hallo beschikbare machtigingen voor hello Azure AD Graph API en Microsoft Graph API in Hallo zijn tootopics [verwante inhoud](#related-content) sectie van dit artikel.</span><span class="sxs-lookup"><span data-stu-id="28f21-194">Links tootopics describing hello available permissions for hello Azure AD Graph API and Microsoft Graph API are in hello [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="28f21-195">Als uw toepassing machtigingen waarvoor u toestemming van de beheerder worden gebruikt, moet u toohave een gebaar zoals een knop of de koppeling waar Hallo beheerder Hallo actie kan initiëren.</span><span class="sxs-lookup"><span data-stu-id="28f21-195">If your application uses permissions that require admin consent, you need toohave a gesture such as a button or link where hello admin can initiate hello action.</span></span>  <span data-ttu-id="28f21-196">uw toepassing verzonden voor deze actie is een gebruikelijke OAuth2/OpenID Connect autorisatieaanvraag, maar die omvat ook Hallo Hallo-aanvraag `prompt=admin_consent` querytekenreeksparameter.</span><span class="sxs-lookup"><span data-stu-id="28f21-196">hello request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes hello `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="28f21-197">Zodra de Hallo beheerder heeft ingestemd en Hallo service-principal in van de klant Hallo tenant wordt gemaakt, volgende aanmelden aanvragen hoeft geen Hallo `prompt=admin_consent` parameter.</span><span class="sxs-lookup"><span data-stu-id="28f21-197">Once hello admin has consented and hello service principal is created in hello customer’s tenant, subsequent sign-in requests do not need hello `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="28f21-198">Aangezien Hallo beheerder heeft besloten Hallo aangevraagd machtigingen worden geaccepteerd, wordt er geen andere gebruikers in uw tenant Hallo gevraagd toestemming vanaf dat moment.</span><span class="sxs-lookup"><span data-stu-id="28f21-198">Since hello administrator has decided hello requested permissions are acceptable, no other users in hello tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="28f21-199">Hallo `prompt=admin_consent` parameter kan ook worden gebruikt door toepassingen die machtigingen die niet te worden admin toestemming hoeven te vragen.</span><span class="sxs-lookup"><span data-stu-id="28f21-199">hello `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="28f21-200">Dit gebeurt wanneer de toepassing hello vereist een ervaring waar tenantbeheerder Hallo 'aanmeldt' een tijdstip en wordt geen enkele andere gebruikers om toestemming wordt gevraagd vanaf dat moment op.</span><span class="sxs-lookup"><span data-stu-id="28f21-200">This is done when hello applicaton requires an experience where hello tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="28f21-201">Als beheerder toestemming nodig om een toepassing en een beheerder zich bij, maar hello aanmeldt `prompt=admin_consent` parameter niet is verzonden, Hallo beheerder wordt met succes toohello toepassing toestemming **alleen voor hun gebruikersaccount**.</span><span class="sxs-lookup"><span data-stu-id="28f21-201">If an application requires admin consent, and an admin signs in but hello `prompt=admin_consent` parameter is not sent, hello admin will successfully consent toohello application **only for their user account**.</span></span>  <span data-ttu-id="28f21-202">Gewone gebruikers zich nog steeds niet kan toosign in en toestemming toohello toepassing.</span><span class="sxs-lookup"><span data-stu-id="28f21-202">Regular users will still not be able toosign in and consent toohello application.</span></span>  <span data-ttu-id="28f21-203">Dit is handig als u wilt toogive hello tenant administrator Hallo mogelijkheid tooexplore van uw toepassing voordat u andere gebruikers toegang toestaat.</span><span class="sxs-lookup"><span data-stu-id="28f21-203">This is useful if you want toogive hello tenant administrator hello ability tooexplore your application before allowing other users access.</span></span>

<span data-ttu-id="28f21-204">Een tenantbeheerder kan Hallo mogelijkheid voor reguliere gebruikers tooconsent tooapplications uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="28f21-204">A tenant administrator can disable hello ability for regular users tooconsent tooapplications.</span></span>  <span data-ttu-id="28f21-205">Als deze mogelijkheid is uitgeschakeld, is altijd admin toestemming vereist voor Hallo toepassing toobe is ingesteld in het Hallo-tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-205">If this capability is disabled, admin consent is always required for hello application toobe set up in hello tenant.</span></span>  <span data-ttu-id="28f21-206">Als u wilt dat uw toepassing met toestemming van de normale gebruiker uitgeschakeld tootest, kunt u vinden Hallo configuratieswitch in hello Azure AD-tenant configuratiesectie Hallo [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="28f21-206">If you want tootest your application with regular user consent disabled, you can find hello configuration switch in hello Azure AD tenant configuration section of hello [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="28f21-207">Sommige toepassingen kunnen een ervaring waar reguliere gebruikers kunnen tooconsent in eerste instantie en hoger Hallo-toepassing kan betrekking hebben op Hallo beheerder en machtigingen voor aanvragen die toestemming van de beheerder vereisen.</span><span class="sxs-lookup"><span data-stu-id="28f21-207">Some applications want an experience where regular users are able tooconsent initially, and later hello application can involve hello administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="28f21-208">Er is geen toodo manier dit met een enkele toepassing registreren in Azure AD vandaag.</span><span class="sxs-lookup"><span data-stu-id="28f21-208">There is no way toodo this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="28f21-209">Hallo toekomstige Azure AD-v2-eindpunt kunt toepassingen toorequest machtigingen tijdens runtime, in plaats van tijdens registratie, waarmee u dit scenario.</span><span class="sxs-lookup"><span data-stu-id="28f21-209">hello upcoming Azure AD v2 endpoint will allow applications toorequest permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="28f21-210">Zie voor meer informatie, Hallo [Ontwikkelaarshandleiding voor Azure AD App Model v2][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="28f21-210">For more information, see hello [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="28f21-211">Toepassingen toestemming en meerdere lagen</span><span class="sxs-lookup"><span data-stu-id="28f21-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="28f21-212">Uw toepassing heeft mogelijk meerdere lagen, elk vertegenwoordigd door een eigen registratie in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28f21-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="28f21-213">Bijvoorbeeld: een systeemeigen toepassing die een web-API aanroept of een webtoepassing die een web-API aanroept.</span><span class="sxs-lookup"><span data-stu-id="28f21-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="28f21-214">In beide gevallen vraagt Hallo-client (systeemeigen app of web-app) machtigingen toocall Hallo resource (web-API).</span><span class="sxs-lookup"><span data-stu-id="28f21-214">In both of these cases, hello client (native app or web app) requests permissions toocall hello resource (web API).</span></span>  <span data-ttu-id="28f21-215">Voor Hallo client toobe ingestemd is in een klant tenant, worden alle resources toowhich vraagt deze machtigingen moet al bestaan in van de klant Hallo-tenant.</span><span class="sxs-lookup"><span data-stu-id="28f21-215">For hello client toobe successfully consented into a customer’s tenant, all resources toowhich it requests permissions must already exist in hello customer’s tenant.</span></span>  <span data-ttu-id="28f21-216">Als dit probleem niet wordt voldaan, retourneert Azure AD een fout die resource Hallo moet eerst worden toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="28f21-216">If this condition isn’t met, Azure AD will return an error that hello resource must be added first.</span></span>

<span data-ttu-id="28f21-217">**Meerdere lagen in een enkel tenant**</span><span class="sxs-lookup"><span data-stu-id="28f21-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="28f21-218">Dit kan een probleem zijn als uw logische toepassing uit twee of meer toepassing registraties, bijvoorbeeld een afzonderlijke client en een resource bestaat.</span><span class="sxs-lookup"><span data-stu-id="28f21-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="28f21-219">Hoe krijg u Hallo resource in Hallo klant tenant eerste?</span><span class="sxs-lookup"><span data-stu-id="28f21-219">How do you get hello resource into hello customer tenant first?</span></span>  <span data-ttu-id="28f21-220">In dit geval doordat de client heeft betrekking op Azure AD en resource toobe ingestemd in één stap.</span><span class="sxs-lookup"><span data-stu-id="28f21-220">Azure AD covers this case by enabling client and resource toobe consented in a single step.</span></span> <span data-ttu-id="28f21-221">Hallo gebruiker ziet totaal Hallo Hallo machtigingen die zijn aangevraagd door zowel de Hallo client als de resource op Hallo toestemming pagina.</span><span class="sxs-lookup"><span data-stu-id="28f21-221">hello user sees hello sum total of hello permissions requested by both hello client and resource on hello consent page.</span></span>  <span data-ttu-id="28f21-222">tooenable dit gedrag van de bron van het Hallo-toepassing registreren vergezeld van Hallo client App-ID als een `knownClientApplications` in het toepassingsmanifest.</span><span class="sxs-lookup"><span data-stu-id="28f21-222">tooenable this behavior, hello resource’s application registration must include hello client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="28f21-223">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="28f21-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="28f21-224">Deze eigenschap kan worden bijgewerkt via de Hallo resource [van toepassingsmanifest][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="28f21-224">This property can be updated via hello resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="28f21-225">Dit wordt geïllustreerd in een meerlaagse native client voorbeeld-web-API aanroepen in Hallo [verwante inhoud](#related-content) sectie op Hallo einde van dit artikel.</span><span class="sxs-lookup"><span data-stu-id="28f21-225">This is demonstrated in a multi-tier native client calling web API sample in hello [Related Content](#related-content) section at hello end of this article.</span></span> <span data-ttu-id="28f21-226">Hallo biedt volgende diagram een overzicht van toestemming voor een app met meerdere lagen geregistreerd in een enkel tenant:</span><span class="sxs-lookup"><span data-stu-id="28f21-226">hello following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Toestemming geven toomulti laag bekende client-app][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="28f21-228">**Meerdere lagen in meerdere tenants**</span><span class="sxs-lookup"><span data-stu-id="28f21-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="28f21-229">Een vergelijkbaar aanvraag gebeurt er als Hallo verschillende lagen van een toepassing in verschillende tenants zijn geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="28f21-229">A similar case happens if hello different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="28f21-230">Denk bijvoorbeeld Hallo-aanvraag van het bouwen van een systeemeigen clienttoepassing die Hallo Office 365 Exchange Online-API aanroept.</span><span class="sxs-lookup"><span data-stu-id="28f21-230">For example, consider hello case of building a native client application that calls hello Office 365 Exchange Online API.</span></span>  <span data-ttu-id="28f21-231">toodevelop hello native toepassing en hoger voor Hallo systeemeigen toepassing toorun in een klant-tenant, Hallo Exchange Online service-principal moet aanwezig zijn.</span><span class="sxs-lookup"><span data-stu-id="28f21-231">toodevelop hello native application, and later for hello native application toorun in a customer’s tenant, hello Exchange Online service principal must be present.</span></span>  <span data-ttu-id="28f21-232">In dit geval moeten hello ontwikkelaar en de klant aanschaffen Exchange Online voor Hallo service principal toobe gemaakt in hun tenants.</span><span class="sxs-lookup"><span data-stu-id="28f21-232">In this case, hello developer and customer must purchase Exchange Online for hello service principal toobe created in their tenants.</span></span>  

<span data-ttu-id="28f21-233">In geval van een API gebouwd door een organisatie dan Microsoft hello moet Hallo developer Hallo API tooprovide een manier voor hun klanten tooconsent Hallo-toepassing in hun klanten tenants.</span><span class="sxs-lookup"><span data-stu-id="28f21-233">In hello case of an API built by an organization other than Microsoft, hello developer of hello API needs tooprovide a way for their customers tooconsent hello application into their customers' tenants.</span></span> <span data-ttu-id="28f21-234">Hallo aanbevolen ontwerp voor Hallo 3e partij developer toobuild Hallo API zodanig is dat ook als een registratie web client tooimplement fungeren kan:</span><span class="sxs-lookup"><span data-stu-id="28f21-234">hello recommended design is for hello 3rd party developer toobuild hello API such that it can also function as a web client tooimplement sign-up :</span></span>

1. <span data-ttu-id="28f21-235">Ga als volgt Hallo eerdere secties tooensure Hallo API implementeert Hallo multitenant toepassingsvereisten registratiecode /</span><span class="sxs-lookup"><span data-stu-id="28f21-235">Follow hello earlier sections tooensure hello API implements hello multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="28f21-236">Bovendien tooexposing Hallo van API-scopes en-rollen, Controleer Hallo registratie bevat Hallo ' aanmelden en gebruikersprofiel lezen ' Azure AD-machtiging (die standaard)</span><span class="sxs-lookup"><span data-stu-id="28f21-236">In addition tooexposing hello API's scopes/roles, ensure hello registration includes hello "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="28f21-237">Een sign-in/sign-up-to-date pagina implementeren in Hallo webclient, Hallo na [admin toestemming](#admin-consent) richtlijnen besproken.</span><span class="sxs-lookup"><span data-stu-id="28f21-237">Implement a sign-in/sign-up page in hello web client, following hello [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="28f21-238">Zodra het Hallo-gebruiker akkoord gaat toohello toepassing, hello service principal en toestemming delegering koppelingen worden gemaakt in de tenant en systeemeigen toepassing hello tokens voor Hallo API kan ophalen</span><span class="sxs-lookup"><span data-stu-id="28f21-238">Once hello user consents toohello application, hello service principal and consent delegation links are created in their tenant, and hello native application can get tokens for hello API</span></span>

<span data-ttu-id="28f21-239">Hallo volgende diagram biedt een overzicht van toestemming voor een app met meerdere lagen geregistreerd in verschillende tenants:</span><span class="sxs-lookup"><span data-stu-id="28f21-239">hello following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Toestemming toomulti lagen met meerdere partijen app][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="28f21-241">Toestemming intrekken</span><span class="sxs-lookup"><span data-stu-id="28f21-241">Revoking Consent</span></span>
<span data-ttu-id="28f21-242">Gebruikers en beheerders kunnen toestemming tooyour toepassing op elk gewenst moment intrekken:</span><span class="sxs-lookup"><span data-stu-id="28f21-242">Users and administrators can revoke consent tooyour application at any time:</span></span>

* <span data-ttu-id="28f21-243">Gebruikers in te trekken toegang tooindividual toepassingen door het verwijderen van hun [toegang Configuratiescherm toepassingen] [ AAD-Access-Panel] lijst.</span><span class="sxs-lookup"><span data-stu-id="28f21-243">Users revoke access tooindividual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="28f21-244">Beheerders tooapplications toegang intrekken door deze te verwijderen van Azure AD dat gebruikmaakt van hello Azure AD-sectie in management Hallo [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="28f21-244">Administrators revoke access tooapplications by removing them from Azure AD using hello Azure AD management section of hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="28f21-245">Als een beheerder tooan-toepassing voor alle gebruikers in een tenant instemt, intrekken niet gebruikers afzonderlijk toegang.</span><span class="sxs-lookup"><span data-stu-id="28f21-245">If an administrator consents tooan application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="28f21-246">Alleen Hallo beheerder toegang kan intrekken en alleen voor de hele toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="28f21-246">Only hello administrator can revoke access, and only for hello whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="28f21-247">Toestemming en protocolondersteuning</span><span class="sxs-lookup"><span data-stu-id="28f21-247">Consent and Protocol Support</span></span>
<span data-ttu-id="28f21-248">Toestemming wordt ondersteund in Azure AD via Hallo OAuth, OpenID Connect, WS-Federation en SAML-protocollen.</span><span class="sxs-lookup"><span data-stu-id="28f21-248">Consent is supported in Azure AD via hello OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="28f21-249">Hallo SAML- en WS-Federation-protocollen ondersteunen geen Hallo `prompt=admin_consent` parameter, zodat de beheerder toestemming is alleen mogelijk via OAuth en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="28f21-249">hello SAML and WS-Federation protocols do not support hello `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="28f21-250">Multitenant-toepassingen en toegangstokens-Caching</span><span class="sxs-lookup"><span data-stu-id="28f21-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="28f21-251">Multitenant-toepassingen kunnen ook toegang tokens toocall API's die zijn beveiligd door Azure AD ophalen.</span><span class="sxs-lookup"><span data-stu-id="28f21-251">Multi-tenant applications can also get access tokens toocall APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="28f21-252">Een veelvoorkomende fout bij het gebruik van Hallo Active Directory Authentication Library (ADAL) met een multitenant-toepassing is tooinitially aanvraag een token voor een gebruiker die met/Common, reactie ontvangen en vervolgens een daaropvolgende token voor de gebruiker ook met/Common aanvragen.</span><span class="sxs-lookup"><span data-stu-id="28f21-252">A common error when using hello Active Directory Authentication Library (ADAL) with a multi-tenant application, is tooinitially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="28f21-253">Omdat het antwoord van Azure AD Hallo afkomstig is van een tenant niet-algemene, ADAL Hallo token afkomstig is van Hallo tenant in de cache opslaat.</span><span class="sxs-lookup"><span data-stu-id="28f21-253">Since hello response from Azure AD comes from a tenant, not /common, ADAL caches hello token as being from hello tenant.</span></span> <span data-ttu-id="28f21-254">Hallo volgende aanroepen te gemeenschappelijke tooget een toegangstoken voor Hallo gebruiker missers Hallo-cachevermelding en Hallo gebruiker is na vragen aan gebruiker toosign in het opnieuw.</span><span class="sxs-lookup"><span data-stu-id="28f21-254">hello subsequent call too/common tooget an access token for hello user misses hello cache entry, and hello user is prompted toosign in again.</span></span>  <span data-ttu-id="28f21-255">Zorg ervoor dat volgende aanroepen voor een gebruiker al aangemeld bestaan tooavoid ontbrekende Hallo cache, toohello-tenant-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="28f21-255">tooavoid missing hello cache, make sure subsequent calls for an already signed in user are made toohello tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="28f21-256">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="28f21-256">Next steps</span></span>
<span data-ttu-id="28f21-257">In dit artikel hebt u geleerd hoe toobuild een toepassing die een gebruiker van een Azure Active Directory-tenant kunt aanmelden.</span><span class="sxs-lookup"><span data-stu-id="28f21-257">In this article, you learned how toobuild an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="28f21-258">Na het inschakelen van eenmalige aanmelding tussen uw app en Azure Active Directory, kunt u ook uw toepassing tooaccess API's die worden weergegeven door de Microsoft-bronnen, zoals Office 365 bijwerken.</span><span class="sxs-lookup"><span data-stu-id="28f21-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application tooaccess APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="28f21-259">U kunt een persoonlijke ervaring dus aanbieden in uw toepassing bijvoorbeeld contextuele informatie toohello gebruikers, zoals hun profielfoto of hun volgende afspraak voor de kalender weergegeven.</span><span class="sxs-lookup"><span data-stu-id="28f21-259">So you can offer a personalized experience in your application, for example showing contextual information toohello users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="28f21-260">toolearn meer informatie over het maken van API-aanroepen tooAzure Active Directory en Office 365-services zoals Exchange, SharePoint, OneDrive, OneNote, planning, aan Excel en meer, gaat u naar: [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="28f21-260">toolearn more about making API calls tooAzure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="28f21-261">Gerelateerde inhoud</span><span class="sxs-lookup"><span data-stu-id="28f21-261">Related content</span></span>
* <span data-ttu-id="28f21-262">[Voorbeelden van multitenant-toepassing][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="28f21-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="28f21-263">[Huisstijlrichtlijnen voor toepassingen][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="28f21-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="28f21-264">[Handleiding voor Azure AD-ontwikkelaars][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="28f21-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="28f21-265">[Toepassingsobjecten en Service-Principal-objecten][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="28f21-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="28f21-266">[Toepassingen integreren met Azure Active Directory][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="28f21-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="28f21-267">[Overzicht van Hallo Framework toestemming geven][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="28f21-267">[Overview of hello Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="28f21-268">[Microsoft Graph API-Machtigingsbereiken][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="28f21-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="28f21-269">[Azure AD Graph API-Machtigingsbereiken][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="28f21-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="28f21-270">Gebruik Hallo opmerkingen sectie tooprovide feedback te volgen en help ons verfijnen en onze content vorm.</span><span class="sxs-lookup"><span data-stu-id="28f21-270">Please use hello following comments section tooprovide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














