---
title: Het bouwen van een app waarvoor Azure AD-gebruiker kunt aanmelden | Microsoft Docs
description: Stapsgewijze instructies voor het ontwikkelen van een toepassing die kunnen Meld u aan een gebruiker van een Azure Active Directory-tenant, ook wel bekend als een multitenant-toepassing.
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: f1c79fa7e3b0e160487b5941741f6a6c677c6b81
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-sign-in-any-azure-active-directory-ad-user-using-the-multi-tenant-application-pattern"></a><span data-ttu-id="10b35-103">Aanmelden met een Azure Active Directory (AD) gebruiker met behulp van het patroon toepassing met meerdere tenants</span><span class="sxs-lookup"><span data-stu-id="10b35-103">How to sign in any Azure Active Directory (AD) user using the multi-tenant application pattern</span></span>
<span data-ttu-id="10b35-104">Als u een Software als een servicetoepassing voor veel organisaties te bieden, kunt u uw toepassing te accepteren, aanmeldingen vanaf elke Azure AD-tenant kunt configureren.</span><span class="sxs-lookup"><span data-stu-id="10b35-104">If you offer a Software as a Service application to many organizations, you can configure your application to accept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="10b35-105">Dit heet in Azure AD maken van uw toepassing meerdere tenants.</span><span class="sxs-lookup"><span data-stu-id="10b35-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="10b35-106">Gebruikers in een Azure AD-tenant zich aan te melden bij uw toepassing na ermee akkoord dat hun account gebruiken met uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-106">Users in any Azure AD tenant will be able to sign in to your application after consenting to use their account with your application.</span></span>  

<span data-ttu-id="10b35-107">Als er een bestaande toepassing die heeft een eigen accountsysteem of andere vormen van de aanmeldingspagina van andere cloudproviders ondersteunt, is toe te voegen Azure AD aanmelden van een tenant eenvoudig.</span><span class="sxs-lookup"><span data-stu-id="10b35-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="10b35-108">Uw app registreren, aanmelden code via OAuth2, OpenID Connect of SAML toevoegen en een knop 'Aanmelding In met Microsoft' zijn ingesteld voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="10b35-109">Klik op de knop volgende voor meer informatie over de huisstijl van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-109">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="10b35-110">[! [Knop aanmelden] [AAD-aanmeldingspagina]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="10b35-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="10b35-111">In dit artikel wordt ervan uitgegaan dat u al bekend bent met het bouwen van een toepassing voor één tenant voor Azure AD.</span><span class="sxs-lookup"><span data-stu-id="10b35-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="10b35-112">Als u niet bent, head back-up op de [developer guide startpagina] [ AAD-Dev-Guide] en probeer een van onze snel aan de slag!</span><span class="sxs-lookup"><span data-stu-id="10b35-112">If you’re not, head back up to the [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="10b35-113">Er zijn vier eenvoudige stappen om te converteren van uw toepassing naar een Azure AD-multitenant-app:</span><span class="sxs-lookup"><span data-stu-id="10b35-113">There are four simple steps to convert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="10b35-114">De toepassingsregistratie van uw om multitenant bijwerken</span><span class="sxs-lookup"><span data-stu-id="10b35-114">Update your application registration to be multi-tenant</span></span>
2. <span data-ttu-id="10b35-115">Werk uw code voor het verzenden van aanvragen naar de/Common eindpunt</span><span class="sxs-lookup"><span data-stu-id="10b35-115">Update your code to send requests to the /common endpoint</span></span> 
3. <span data-ttu-id="10b35-116">Werk uw code voor het afhandelen van meerdere waarden van de certificaatverlener</span><span class="sxs-lookup"><span data-stu-id="10b35-116">Update your code to handle multiple issuer values</span></span>
4. <span data-ttu-id="10b35-117">Gebruikers- en -beheerder toestemming begrijpen en geschikte codewijzigingen aanbrengen</span><span class="sxs-lookup"><span data-stu-id="10b35-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="10b35-118">Bekijk elke stap in detail.</span><span class="sxs-lookup"><span data-stu-id="10b35-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="10b35-119">U kunt ook meteen naar gaan [deze lijst met voorbeelden van meerdere tenants][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="10b35-119">You can also jump straight to [this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-to-be-multi-tenant"></a><span data-ttu-id="10b35-120">Registratie voor multitenant bijwerken</span><span class="sxs-lookup"><span data-stu-id="10b35-120">Update registration to be multi-tenant</span></span>
<span data-ttu-id="10b35-121">Web-app/API registraties in Azure AD zijn standaard één tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="10b35-122">U kunt uw inschrijving multitenant maken met de schakeloptie 'Meerdere verpachte' zoeken op de eigenschappenpagina van de registratie van uw toepassing in de [Azure-portal] [ AZURE-portal] en instellen op "Ja".</span><span class="sxs-lookup"><span data-stu-id="10b35-122">You can make your registration multi-tenant by finding the “Multi-Tenanted” switch on the properties page of your application registration in the [Azure portal][AZURE-portal] and setting it to “Yes”.</span></span>

<span data-ttu-id="10b35-123">Vergeet niet, voordat een toepassing kan worden gemaakt op meerdere tenants Azure AD is vereist voor de App ID URI van de toepassing globaal uniek zijn.</span><span class="sxs-lookup"><span data-stu-id="10b35-123">Also note, before an application can be made multi-tenant, Azure AD requires the App ID URI of the application to be globally unique.</span></span> <span data-ttu-id="10b35-124">De App ID URI is een van de manieren waarop die een toepassing in protocolberichten wordt geïdentificeerd.</span><span class="sxs-lookup"><span data-stu-id="10b35-124">The App ID URI is one of the ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="10b35-125">Voor een toepassing voor één tenant is het voldoende voor de URI van de App-ID moet uniek zijn binnen deze tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-125">For a single tenant application, it is sufficient for the App ID URI to be unique within that tenant.</span></span>  <span data-ttu-id="10b35-126">Voor een toepassing met meerdere tenants moet het wereldwijd uniek zodat Azure AD de toepassing op alle huurders kan vinden.</span><span class="sxs-lookup"><span data-stu-id="10b35-126">For a multi-tenant application, it must be globally unique so Azure AD can find the application across all tenants.</span></span>  <span data-ttu-id="10b35-127">Globale uniekheid wordt afgedwongen door de App ID URI in een hostnaam die overeenkomt met een geverifieerde domein voor de Azure AD-tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-127">Global uniqueness is enforced by requiring the App ID URI to have a host name that matches a verified domain of the Azure AD tenant.</span></span>  <span data-ttu-id="10b35-128">Bijvoorbeeld, als de naam van uw tenant contoso.onmicrosoft.com een geldige App ID URI zou worden `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="10b35-128">For example, if the name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="10b35-129">Als uw tenant had een geverifieerde domein voor `contoso.com`, moet een geldige App ID URI zou ook `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="10b35-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="10b35-130">Instellen van een toepassing als multitenant mislukt als de App ID URI niet dit patroon volgen.</span><span class="sxs-lookup"><span data-stu-id="10b35-130">Setting an application as multi-tenant will fail if the App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="10b35-131">Native clientregistraties zijn multitenant standaard.</span><span class="sxs-lookup"><span data-stu-id="10b35-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="10b35-132">U hoeft niet te doen om u te maken van een systeemeigen client registratie multitenant-toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-132">You don’t need to take any action to make a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-to-send-requests-to-common"></a><span data-ttu-id="10b35-133">Werk uw code voor het verzenden van aanvragen naar/Common</span><span class="sxs-lookup"><span data-stu-id="10b35-133">Update your code to send requests to /common</span></span>
<span data-ttu-id="10b35-134">In een toepassing één tenant worden aanmeldingsaanvragen verzonden naar de tenant-aanmelden-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="10b35-134">In a single tenant application, sign-in requests are sent to the tenant’s sign-in endpoint.</span></span> <span data-ttu-id="10b35-135">Voor contoso.onmicrosoft.com kan het eindpunt zou zijn:</span><span class="sxs-lookup"><span data-stu-id="10b35-135">For example, for contoso.onmicrosoft.com the endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="10b35-136">Aanvragen die worden verzonden naar een tenant-eindpunt kunnen aanmelden gebruikers (of gasten) in deze tenant naar toepassingen in deze tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-136">Requests sent to a tenant’s endpoint can sign in users (or guests) in that tenant to applications in that tenant.</span></span>  <span data-ttu-id="10b35-137">Met een multitenant-toepassing weet de toepassing niet vooraf welke tenant de gebruiker is, zodat u aanvragen naar een tenant-eindpunt kan niet verzenden.</span><span class="sxs-lookup"><span data-stu-id="10b35-137">With a multi-tenant application, the application doesn’t know up front what tenant the user is from, so you can’t send requests to a tenant’s endpoint.</span></span>  <span data-ttu-id="10b35-138">In plaats daarvan worden aanvragen verzonden naar een eindpunt dat multiplexes over alle Azure AD-tenants:</span><span class="sxs-lookup"><span data-stu-id="10b35-138">Instead, requests are sent to an endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="10b35-139">Azure AD ontvangt wanneer een aanvraag op de/Common eindpunt, op het de gebruiker zich aanmeldt en als gevolg hiervan detecteert welke tenant afkomstig van de gebruiker is.</span><span class="sxs-lookup"><span data-stu-id="10b35-139">When Azure AD receives a request on the /common endpoint, it signs the user in and as a consequence discovers which tenant the user is from.</span></span>  <span data-ttu-id="10b35-140">De/gemeenschappelijk eindpunt werkt met alle van de verificatieprotocollen die wordt ondersteund door Azure AD: OpenID Connect, OAuth 2.0 SAML 2.0 en WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="10b35-140">The /common endpoint works with all of the authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="10b35-141">Het antwoord aanmelden op de toepassing wordt vervolgens bevat een token dat de gebruiker voorstelt.</span><span class="sxs-lookup"><span data-stu-id="10b35-141">The sign-in response to the application then contains a token representing the user.</span></span>  <span data-ttu-id="10b35-142">De waarde van de verlener in het token geeft een toepassing aan welke tenant afkomstig van de gebruiker is.</span><span class="sxs-lookup"><span data-stu-id="10b35-142">The issuer value in the token tells an application what tenant the user is from.</span></span>  <span data-ttu-id="10b35-143">Wanneer een antwoord geretourneerd van de/Common eindpunt, de waarde van de verlener in het token overeen met tenant van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="10b35-143">When a response returns from the /common endpoint, the issuer value in the token will correspond to the user’s tenant.</span></span>  <span data-ttu-id="10b35-144">Het is belangrijk te weten de/Common eindpunt is niet een tenant en is niet een verlener, is alleen een multiplexer.</span><span class="sxs-lookup"><span data-stu-id="10b35-144">It’s important to note the /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="10b35-145">Wanneer u/Common gebruikt, wordt de logica in uw toepassing om tokens te valideren moet worden bijgewerkt om rekening.</span><span class="sxs-lookup"><span data-stu-id="10b35-145">When using /common, the logic in your application to validate tokens needs to be updated to take this into account.</span></span> 

<span data-ttu-id="10b35-146">Zoals eerder gezegd, moeten multitenant-toepassingen bieden ook een consistente ervaring voor aanmelding voor gebruikers, de Azure AD-toepassing huisstijl richtlijnen te volgen.</span><span class="sxs-lookup"><span data-stu-id="10b35-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following the Azure AD application branding guidelines.</span></span> <span data-ttu-id="10b35-147">Klik op de knop volgende voor meer informatie over de huisstijl van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-147">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="10b35-148">[! [Knop aanmelden] [AAD-aanmeldingspagina]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="10b35-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="10b35-149">Laten we het gebruik van de/Common eindpunt en de implementatie van uw code in meer detail.</span><span class="sxs-lookup"><span data-stu-id="10b35-149">Let’s take a look at the use of the /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-to-handle-multiple-issuer-values"></a><span data-ttu-id="10b35-150">Werk uw code voor het afhandelen van meerdere waarden van de certificaatverlener</span><span class="sxs-lookup"><span data-stu-id="10b35-150">Update your code to handle multiple issuer values</span></span>
<span data-ttu-id="10b35-151">Webtoepassingen en web-API's ontvangen en valideren van tokens van Azure AD.</span><span class="sxs-lookup"><span data-stu-id="10b35-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="10b35-152">Terwijl systeemeigen clienttoepassingen aanvragen en ontvangen van tokens van Azure AD, ze dit doen voor het verzenden van deze API's, waar ze worden gevalideerd.</span><span class="sxs-lookup"><span data-stu-id="10b35-152">While native client applications request and receive tokens from Azure AD, they do so to send them to APIs, where they are validated.</span></span>  <span data-ttu-id="10b35-153">Systeemeigen toepassingen tokens wordt niet gevalideerd en moeten ze behandelen als ondoorzichtige.</span><span class="sxs-lookup"><span data-stu-id="10b35-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="10b35-154">We bekijken op hoe een toepassing tokens valideert het ontvangt van Azure AD.</span><span class="sxs-lookup"><span data-stu-id="10b35-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="10b35-155">Een toepassing voor één tenant duurt normaal gesproken een endpoint-waarde, zoals:</span><span class="sxs-lookup"><span data-stu-id="10b35-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="10b35-156">en gebruik ze zoals bouwen van een metagegevens-URL (in dit geval OpenID Connect):</span><span class="sxs-lookup"><span data-stu-id="10b35-156">and use it to construct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="10b35-157">voor het downloaden van twee kritieke stukjes informatie die worden gebruikt om tokens te valideren: de tenant het ondertekenen van sleutels en waarde van de verlener.</span><span class="sxs-lookup"><span data-stu-id="10b35-157">to download two critical pieces of information that are used to validate tokens:  the tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="10b35-158">Elke Azure AD-tenant heeft de waarde van een unieke verlener van het formulier:</span><span class="sxs-lookup"><span data-stu-id="10b35-158">Each Azure AD tenant has a unique issuer value of the form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="10b35-159">de GUID-waarde is waar de rename-safe versie van de tenant-ID van de tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-159">where the GUID value is the rename-safe version of the tenant ID of the tenant.</span></span>  <span data-ttu-id="10b35-160">Als u op in de voorgaande link in de metagegevens voor `contoso.onmicrosoft.com`, ziet u deze waarde van de verlener in het document.</span><span class="sxs-lookup"><span data-stu-id="10b35-160">If you click on the preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in the document.</span></span>

<span data-ttu-id="10b35-161">Als een toepassing voor één tenant een token valideert, controleert deze de handtekening van het token tegen de ondertekeningssleutels uit het metagegevensdocument.</span><span class="sxs-lookup"><span data-stu-id="10b35-161">When a single tenant application validates a token, it checks the signature of the token against the signing keys from the metadata document.</span></span> <span data-ttu-id="10b35-162">Hiermee om te controleren of de waarde van de verlener in het token overeenkomt met de versie die is gevonden in het metagegevensdocument.</span><span class="sxs-lookup"><span data-stu-id="10b35-162">This allows it to make sure the issuer value in the token matches the one that was found in the metadata document.</span></span>

<span data-ttu-id="10b35-163">Sinds de/Common eindpunt komt niet overeen met een tenant en is een verlener niet wanneer u de waarde van de verlener in de metagegevens voor onderzoeken/algemene hieraan een sjablonen URL in plaats van een werkelijke waarde:</span><span class="sxs-lookup"><span data-stu-id="10b35-163">Since the /common endpoint doesn’t correspond to a tenant and isn’t an issuer, when you examine the issuer value in the metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="10b35-164">Daarom een multitenant-toepassing kan niet worden gevalideerd tokens door die overeenkomt met de waarde van de verlener in de metagegevens met de `issuer` waarde in het token.</span><span class="sxs-lookup"><span data-stu-id="10b35-164">Therefore, a multi-tenant application can’t validate tokens just by matching the issuer value in the metadata with the `issuer` value in the token.</span></span>  <span data-ttu-id="10b35-165">Een toepassing met meerdere tenants logica om te bepalen welke verlener waarden geldig zijn en zijn niet nodig, op basis van de tenant-id-gedeelte van de waarde van de verlener.</span><span class="sxs-lookup"><span data-stu-id="10b35-165">A multi-tenant application needs logic to decide which issuer values are valid and which are not, based on the tenant ID portion of the issuer value.</span></span>  

<span data-ttu-id="10b35-166">Bijvoorbeeld als een multitenant-toepassing alleen kunt aanmelden van specifieke tenants die zich hebben geregistreerd voor de service, deze moet controleert de verlener waarde of de `tid` claimwaarde in het token om ervoor te zorgen dat de tenant is in de lijst van abonnees.</span><span class="sxs-lookup"><span data-stu-id="10b35-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either the issuer value or the `tid` claim value in the token to make sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="10b35-167">Als een multitenant-toepassing alleen omgaat met personen niet beslissingen eventuele toegang op basis van tenants, vervolgens kan worden genegeerd de verlener-waarde kan worden overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="10b35-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore the issuer value altogether.</span></span>

<span data-ttu-id="10b35-168">In de voorbeelden van meerdere tenants in de [verwante inhoud](#related-content) sectie aan het einde van dit artikel, verlener validatie is uitgeschakeld, zodat elke Azure AD-tenant aan te melden.</span><span class="sxs-lookup"><span data-stu-id="10b35-168">In the multi-tenant samples in the [Related Content](#related-content) section at the end of this article, issuer validation is disabled to enable any Azure AD tenant to sign in.</span></span>

<span data-ttu-id="10b35-169">Nu bekijken we de ervaring van de gebruiker voor gebruikers die multitenant-toepassingen aanmeldt zich.</span><span class="sxs-lookup"><span data-stu-id="10b35-169">Now let’s look at the user experience for users that are signing in to multi-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="10b35-170">Wat gebruikers- en toestemming van de beheerder</span><span class="sxs-lookup"><span data-stu-id="10b35-170">Understanding user and admin consent</span></span>
<span data-ttu-id="10b35-171">Voor een gebruiker zich aanmeldt bij een toepassing in Azure AD, moet de toepassing worden weergegeven in de tenant van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="10b35-171">For a user to sign in to an application in Azure AD, the application must be represented in the user’s tenant.</span></span>  <span data-ttu-id="10b35-172">Hierdoor kan de organisatie voor handelingen zoals uniek beleid toepassen wanneer gebruikers van de tenant zich aanmeldt bij de toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-172">This allows the organization to do things like apply unique policies when users from their tenant sign in to the application.</span></span>  <span data-ttu-id="10b35-173">Voor een toepassing voor één tenant is deze registratie eenvoudig; Dit is de die plaatsvindt tijdens de registratie van de toepassing in de [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="10b35-173">For a single tenant application, this registration is simple; it’s the one that happens when you register the application in the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="10b35-174">Voor een toepassing met meerdere tenants woont de initiële registratie voor de toepassing in de Azure AD-tenant die wordt gebruikt door de ontwikkelaar.</span><span class="sxs-lookup"><span data-stu-id="10b35-174">For a multi-tenant application, the initial registration for the application lives in the Azure AD tenant used by the developer.</span></span>  <span data-ttu-id="10b35-175">Wanneer een gebruiker van een andere tenant zich aanmeldt bij de toepassing voor de eerste keer Azure AD wordt gevraagd om de machtigingen die zijn aangevraagd door de toepassing toestemming.</span><span class="sxs-lookup"><span data-stu-id="10b35-175">When a user from a different tenant signs in to the application for the first time, Azure AD asks them to consent to the permissions requested by the application.</span></span>  <span data-ttu-id="10b35-176">Als ze toestemming geeft, wordt aangeroepen voor een weergave van de toepassing een *service-principal* in van de gebruiker-tenant is gemaakt en aanmelden kan worden voortgezet.</span><span class="sxs-lookup"><span data-stu-id="10b35-176">If they consent, then a representation of the application called a *service principal* is created in the user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="10b35-177">In de map die de gebruiker toestemming voor de toepassing registreert, wordt ook een overdracht gemaakt.</span><span class="sxs-lookup"><span data-stu-id="10b35-177">A delegation is also created in the directory that records the user’s consent to the application.</span></span> <span data-ttu-id="10b35-178">Zie [toepassingsobjecten en Service-Principal objecten] [ AAD-App-SP-Objects] voor meer informatie over de toepassing toepassings- en ServicePrincipal objecten en hun relatie met elkaar.</span><span class="sxs-lookup"><span data-stu-id="10b35-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on the application's Application and ServicePrincipal objects, and how they relate to each other.</span></span>

![Instemmen met één laag app][Consent-Single-Tier] 

<span data-ttu-id="10b35-180">Deze ervaring toestemming wordt beïnvloed door de machtigingen die zijn aangevraagd door de toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-180">This consent experience is affected by the permissions requested by the application.</span></span>  <span data-ttu-id="10b35-181">Azure AD ondersteunt twee soorten app alleen-lezen en gedelegeerde machtigingen:</span><span class="sxs-lookup"><span data-stu-id="10b35-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="10b35-182">Een gedelegeerde machtigingen verleent een toepassing die de mogelijkheid om te fungeren als een aangemelde gebruiker voor een subset van de bewerkingen van de gebruiker kunt doen.</span><span class="sxs-lookup"><span data-stu-id="10b35-182">A delegated permission grants an application the ability to act as a signed in user for a subset of the things the user can do.</span></span>  <span data-ttu-id="10b35-183">Bijvoorbeeld, kunt u verlenen een toepassing gedelegeerde machtigingen voor het lezen van de aangemelde gebruiker kalender.</span><span class="sxs-lookup"><span data-stu-id="10b35-183">For example, you can grant an application the delegated permission to read the signed in user’s calendar.</span></span>
* <span data-ttu-id="10b35-184">Een app alleen-lezen-machtiging is verleend rechtstreeks aan de identiteit van de toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-184">An app-only permission is granted directly to the identity of the application.</span></span>  <span data-ttu-id="10b35-185">Bijvoorbeeld, kunt u een toepassing app alleen-lezen toestemming geven om te lezen van de lijst met gebruikers in een tenant, ongeacht wie is aangemeld bij de toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-185">For example, you can grant an application the app-only permission to read the list of users in a tenant, regardless of who is signed in to the application.</span></span>

<span data-ttu-id="10b35-186">Sommige machtigingen kunnen door een gewone gebruiker wil terwijl anderen toestemming van de tenantbeheerder vereisen.</span><span class="sxs-lookup"><span data-stu-id="10b35-186">Some permissions can be consented to by a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="10b35-187">Beheerder toestemming</span><span class="sxs-lookup"><span data-stu-id="10b35-187">Admin consent</span></span>
<span data-ttu-id="10b35-188">Machtigingen voor alleen-App moeten altijd toestemming van de tenantbeheerder.</span><span class="sxs-lookup"><span data-stu-id="10b35-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="10b35-189">Als uw toepassing een machtiging app alleen worden aangevraagd en een gebruiker probeert aan te melden bij de toepassing, wordt een foutbericht weergegeven dat de gebruiker is niet kunnen toestemming geven.</span><span class="sxs-lookup"><span data-stu-id="10b35-189">If your application requests an app-only permission and a user tries to sign in to the application, an error message will be displayed saying the user isn’t able to consent.</span></span>

<span data-ttu-id="10b35-190">Bepaalde gedelegeerde machtigingen, ook verplichten toestemming van de tenantbeheerder.</span><span class="sxs-lookup"><span data-stu-id="10b35-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="10b35-191">De mogelijkheid om terug te schrijven naar Azure AD als een van de tenantbeheerder toestemming nodig om de aangemelde gebruiker.</span><span class="sxs-lookup"><span data-stu-id="10b35-191">For example, the ability to write back to Azure AD as the signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="10b35-192">Als de app alleen-lezen-machtigingen als een gewone gebruiker probeert aan te melden bij een toepassing die aanvragen van een gedelegeerd machtiging die beheerder-toestemming nodig om wordt uw toepassing een foutbericht.</span><span class="sxs-lookup"><span data-stu-id="10b35-192">Like app-only permissions, if an ordinary user tries to sign in to an application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="10b35-193">Een machtiging vereist of admin toestemming wordt bepaald door de ontwikkelaar die de resource gepubliceerd en kan worden gevonden in de documentatie voor de resource.</span><span class="sxs-lookup"><span data-stu-id="10b35-193">Whether or not a permission requires admin consent is determined by the developer that published the resource, and can be found in the documentation for the resource.</span></span>  <span data-ttu-id="10b35-194">Koppelingen naar informatie over de beschikbare machtigingen voor de Azure AD Graph API en Microsoft Graph API zijn de [verwante inhoud](#related-content) sectie van dit artikel.</span><span class="sxs-lookup"><span data-stu-id="10b35-194">Links to topics describing the available permissions for the Azure AD Graph API and Microsoft Graph API are in the [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="10b35-195">Als uw toepassing gebruikmaakt van machtigingen die toestemming van de beheerder vereisen, moet u een gebaar zoals een knop of koppeling hebben waar de beheerder de actie kan initiëren.</span><span class="sxs-lookup"><span data-stu-id="10b35-195">If your application uses permissions that require admin consent, you need to have a gesture such as a button or link where the admin can initiate the action.</span></span>  <span data-ttu-id="10b35-196">De aanvraag de toepassing verzendt voor deze actie is een gebruikelijke OAuth2/OpenID Connect autorisatieaanvraag, maar bevat die ook de `prompt=admin_consent` querytekenreeksparameter.</span><span class="sxs-lookup"><span data-stu-id="10b35-196">The request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes the `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="10b35-197">Als de beheerder heeft ingestemd en de service-principal in de tenant van de klant gemaakt, volgende aanmelden aanvragen hoeft niet de `prompt=admin_consent` parameter.</span><span class="sxs-lookup"><span data-stu-id="10b35-197">Once the admin has consented and the service principal is created in the customer’s tenant, subsequent sign-in requests do not need the `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="10b35-198">Omdat de beheerder heeft besloten dat de machtigingen die zijn aangevraagd, worden geaccepteerd, wordt er geen andere gebruikers in de tenant wordt gevraagd om toestemming vanaf dat moment.</span><span class="sxs-lookup"><span data-stu-id="10b35-198">Since the administrator has decided the requested permissions are acceptable, no other users in the tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="10b35-199">De `prompt=admin_consent` parameter kan ook worden gebruikt door toepassingen die machtigingen die niet te worden admin toestemming hoeven te vragen.</span><span class="sxs-lookup"><span data-stu-id="10b35-199">The `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="10b35-200">Dit gebeurt wanneer de toepassing een ervaring waar de tenant admin vereist 'aanmeldt' tijdstip en wordt geen enkele andere gebruikers om toestemming wordt gevraagd vanaf dat moment op.</span><span class="sxs-lookup"><span data-stu-id="10b35-200">This is done when the applicaton requires an experience where the tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="10b35-201">Als beheerder toestemming nodig om een toepassing en een beheerder zich aanmeldt, maar de `prompt=admin_consent` parameter niet is verzonden, moet de beheerder heeft tot de toepassing wordt toestemming **alleen voor hun gebruikersaccount**.</span><span class="sxs-lookup"><span data-stu-id="10b35-201">If an application requires admin consent, and an admin signs in but the `prompt=admin_consent` parameter is not sent, the admin will successfully consent to the application **only for their user account**.</span></span>  <span data-ttu-id="10b35-202">Gewone gebruikers nog steeds zich niet aanmelden en toestemming geven tot de toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-202">Regular users will still not be able to sign in and consent to the application.</span></span>  <span data-ttu-id="10b35-203">Dit is handig als u de tenantbeheerder bieden de mogelijkheid om te verkennen van uw toepassing wilt voordat u andere gebruikers toegang toestaat.</span><span class="sxs-lookup"><span data-stu-id="10b35-203">This is useful if you want to give the tenant administrator the ability to explore your application before allowing other users access.</span></span>

<span data-ttu-id="10b35-204">Een tenantbeheerder kan de mogelijkheid voor reguliere gebruikers om toestemming voor toepassingen kunt uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="10b35-204">A tenant administrator can disable the ability for regular users to consent to applications.</span></span>  <span data-ttu-id="10b35-205">Als deze mogelijkheid is uitgeschakeld, is altijd admin toestemming vereist voor de toepassing worden ingesteld in de tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-205">If this capability is disabled, admin consent is always required for the application to be set up in the tenant.</span></span>  <span data-ttu-id="10b35-206">Als u wilt uw toepassing te testen met toestemming van de normale gebruiker uitgeschakeld, vindt u de configuratieswitch in de Azure AD-tenant configuratiesectie van de [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="10b35-206">If you want to test your application with regular user consent disabled, you can find the configuration switch in the Azure AD tenant configuration section of the [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="10b35-207">Sommige toepassingen kunnen een ervaring waarbij reguliere gebruikers zich in eerste instantie toestemming te geven en later de toepassing kan betrekking hebben op de beheerder en vraag machtigingen waarvoor u toestemming van de beheerder.</span><span class="sxs-lookup"><span data-stu-id="10b35-207">Some applications want an experience where regular users are able to consent initially, and later the application can involve the administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="10b35-208">Er is geen manier om dit te doen met de registratie van een enkele toepassing in Azure AD vandaag.</span><span class="sxs-lookup"><span data-stu-id="10b35-208">There is no way to do this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="10b35-209">De komende Azure AD-v2-eindpunt wordt kunnen toepassingen worden machtigingen voor aanvragen tijdens runtime, in plaats van tijdens registratie, waarmee u dit scenario.</span><span class="sxs-lookup"><span data-stu-id="10b35-209">The upcoming Azure AD v2 endpoint will allow applications to request permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="10b35-210">Zie voor meer informatie de [Ontwikkelaarshandleiding voor Azure AD App Model v2][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="10b35-210">For more information, see the [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="10b35-211">Toepassingen toestemming en meerdere lagen</span><span class="sxs-lookup"><span data-stu-id="10b35-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="10b35-212">Uw toepassing heeft mogelijk meerdere lagen, elk vertegenwoordigd door een eigen registratie in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="10b35-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="10b35-213">Bijvoorbeeld: een systeemeigen toepassing die een web-API aanroept of een webtoepassing die een web-API aanroept.</span><span class="sxs-lookup"><span data-stu-id="10b35-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="10b35-214">In beide gevallen vraagt de client (systeemeigen app of web-app) machtigingen voor het aanroepen van de resource (web-API).</span><span class="sxs-lookup"><span data-stu-id="10b35-214">In both of these cases, the client (native app or web app) requests permissions to call the resource (web API).</span></span>  <span data-ttu-id="10b35-215">Voor de client om te worden in de tenant van de klant heeft ingestemd, worden alle bronnen waarvoor deze machtigingen aanvragen moeten al bestaan in de tenant van de klant.</span><span class="sxs-lookup"><span data-stu-id="10b35-215">For the client to be successfully consented into a customer’s tenant, all resources to which it requests permissions must already exist in the customer’s tenant.</span></span>  <span data-ttu-id="10b35-216">Als dit probleem niet wordt voldaan, wordt Azure AD een plaatsingsfout dat de resource eerst moet worden toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="10b35-216">If this condition isn’t met, Azure AD will return an error that the resource must be added first.</span></span>

<span data-ttu-id="10b35-217">**Meerdere lagen in een enkel tenant**</span><span class="sxs-lookup"><span data-stu-id="10b35-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="10b35-218">Dit kan een probleem zijn als uw logische toepassing uit twee of meer toepassing registraties, bijvoorbeeld een afzonderlijke client en een resource bestaat.</span><span class="sxs-lookup"><span data-stu-id="10b35-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="10b35-219">Hoe krijgt u de resource in de tenant klant eerste?</span><span class="sxs-lookup"><span data-stu-id="10b35-219">How do you get the resource into the customer tenant first?</span></span>  <span data-ttu-id="10b35-220">Azure AD bevat informatie over deze aanvraag doordat de client als bron om te worden ingestemd in één stap.</span><span class="sxs-lookup"><span data-stu-id="10b35-220">Azure AD covers this case by enabling client and resource to be consented in a single step.</span></span> <span data-ttu-id="10b35-221">De totale som van de machtigingen die zijn aangevraagd door de client en de resource op de pagina toestemming, ziet de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="10b35-221">The user sees the sum total of the permissions requested by both the client and resource on the consent page.</span></span>  <span data-ttu-id="10b35-222">Om dit gedrag, registratie van de toepassing van de resource vergezeld gaan van de App-ID van de client als een `knownClientApplications` in het toepassingsmanifest.</span><span class="sxs-lookup"><span data-stu-id="10b35-222">To enable this behavior, the resource’s application registration must include the client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="10b35-223">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="10b35-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="10b35-224">Deze eigenschap kan worden bijgewerkt via de resource [van toepassingsmanifest][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="10b35-224">This property can be updated via the resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="10b35-225">Dit wordt geïllustreerd in een meerlaagse systeemeigen client voorbeeld-web-API aanroepen in de [verwante inhoud](#related-content) sectie aan het einde van dit artikel.</span><span class="sxs-lookup"><span data-stu-id="10b35-225">This is demonstrated in a multi-tier native client calling web API sample in the [Related Content](#related-content) section at the end of this article.</span></span> <span data-ttu-id="10b35-226">Het volgende diagram biedt een overzicht van toestemming voor een app met meerdere lagen geregistreerd in een enkel tenant:</span><span class="sxs-lookup"><span data-stu-id="10b35-226">The following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Instemmen met meerdere lagen bekende client-app][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="10b35-228">**Meerdere lagen in meerdere tenants**</span><span class="sxs-lookup"><span data-stu-id="10b35-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="10b35-229">Een vergelijkbaar aanvraag gebeurt er als de verschillende lagen van een toepassing in verschillende tenants zijn geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="10b35-229">A similar case happens if the different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="10b35-230">Neem bijvoorbeeld het geval van het bouwen van een systeemeigen clienttoepassing die de Office 365 Exchange Online-API aanroept.</span><span class="sxs-lookup"><span data-stu-id="10b35-230">For example, consider the case of building a native client application that calls the Office 365 Exchange Online API.</span></span>  <span data-ttu-id="10b35-231">Het ontwikkelen van de systeemeigen toepassing en hoger voor de systeemeigen toepassing voor uitvoering in een klant-tenant en moet de Exchange Online service-principal aanwezig zijn.</span><span class="sxs-lookup"><span data-stu-id="10b35-231">To develop the native application, and later for the native application to run in a customer’s tenant, the Exchange Online service principal must be present.</span></span>  <span data-ttu-id="10b35-232">In dit geval moeten de ontwikkelaar en de klant aanschaffen Exchange Online voor de service-principal gemaakt in hun tenants.</span><span class="sxs-lookup"><span data-stu-id="10b35-232">In this case, the developer and customer must purchase Exchange Online for the service principal to be created in their tenants.</span></span>  

<span data-ttu-id="10b35-233">In het geval van een API gebouwd door een organisatie dan Microsoft, moet de ontwikkelaar van de API bieden een manier voor klanten om toestemming van de toepassing in hun klanten tenants.</span><span class="sxs-lookup"><span data-stu-id="10b35-233">In the case of an API built by an organization other than Microsoft, the developer of the API needs to provide a way for their customers to consent the application into their customers' tenants.</span></span> <span data-ttu-id="10b35-234">Er is het aanbevolen ontwerp voor de 3e ontwikkelaars aan het bouwen van de API zodat deze kan ook worden gebruikt als een webclient voor het implementeren van aanmelding:</span><span class="sxs-lookup"><span data-stu-id="10b35-234">The recommended design is for the 3rd party developer to build the API such that it can also function as a web client to implement sign-up :</span></span>

1. <span data-ttu-id="10b35-235">Volg de vorige secties om te controleren of dat de API implementeert de registratiecode/multitenant-toepassingsvereisten</span><span class="sxs-lookup"><span data-stu-id="10b35-235">Follow the earlier sections to ensure the API implements the multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="10b35-236">Naast het blootstellen van de API-scopes en-rollen, zorg ervoor dat de registratie bevat de ' aanmelden en gebruikersprofiel lezen ' Azure AD-machtiging (die standaard)</span><span class="sxs-lookup"><span data-stu-id="10b35-236">In addition to exposing the API's scopes/roles, ensure the registration includes the "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="10b35-237">Een sign-in/sign-up-to-date pagina implementeren in de webclient na de [admin toestemming](#admin-consent) richtlijnen besproken.</span><span class="sxs-lookup"><span data-stu-id="10b35-237">Implement a sign-in/sign-up page in the web client, following the [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="10b35-238">Zodra de gebruiker akkoord naar de toepassing gaat, de service principal en toestemming delegering koppelingen worden gemaakt in de tenant en de oorspronkelijke toepassing kan tokens ophalen voor de API</span><span class="sxs-lookup"><span data-stu-id="10b35-238">Once the user consents to the application, the service principal and consent delegation links are created in their tenant, and the native application can get tokens for the API</span></span>

<span data-ttu-id="10b35-239">Het volgende diagram biedt een overzicht van toestemming voor een app met meerdere lagen geregistreerd in verschillende tenants:</span><span class="sxs-lookup"><span data-stu-id="10b35-239">The following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Instemmen met meerdere partijen app met meerdere lagen][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="10b35-241">Toestemming intrekken</span><span class="sxs-lookup"><span data-stu-id="10b35-241">Revoking Consent</span></span>
<span data-ttu-id="10b35-242">Gebruikers en beheerders kunnen toestemming aan uw toepassing op elk gewenst moment intrekken:</span><span class="sxs-lookup"><span data-stu-id="10b35-242">Users and administrators can revoke consent to your application at any time:</span></span>

* <span data-ttu-id="10b35-243">Gebruikers toegang tot afzonderlijke toepassingen intrekken door het verwijderen van hun [toegang Configuratiescherm toepassingen] [ AAD-Access-Panel] lijst.</span><span class="sxs-lookup"><span data-stu-id="10b35-243">Users revoke access to individual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="10b35-244">Beheerders toegang tot toepassingen intrekken door deze te verwijderen van Azure AD via de Azure AD-management-sectie van de [Azure-portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="10b35-244">Administrators revoke access to applications by removing them from Azure AD using the Azure AD management section of the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="10b35-245">Als een beheerder met een toepassing voor alle gebruikers in een tenant instemt, intrekken niet gebruikers afzonderlijk toegang.</span><span class="sxs-lookup"><span data-stu-id="10b35-245">If an administrator consents to an application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="10b35-246">Alleen de beheerder kan toegang intrekken en alleen voor de gehele toepassing.</span><span class="sxs-lookup"><span data-stu-id="10b35-246">Only the administrator can revoke access, and only for the whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="10b35-247">Toestemming en protocolondersteuning</span><span class="sxs-lookup"><span data-stu-id="10b35-247">Consent and Protocol Support</span></span>
<span data-ttu-id="10b35-248">Toestemming wordt ondersteund in Azure AD via de OAuth, OpenID Connect, WS-Federation en SAML-protocollen.</span><span class="sxs-lookup"><span data-stu-id="10b35-248">Consent is supported in Azure AD via the OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="10b35-249">De SAML- en WS-Federation-protocollen bieden geen ondersteuning voor de `prompt=admin_consent` parameter, zodat de beheerder toestemming is alleen mogelijk via OAuth en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="10b35-249">The SAML and WS-Federation protocols do not support the `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="10b35-250">Multitenant-toepassingen en toegangstokens-Caching</span><span class="sxs-lookup"><span data-stu-id="10b35-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="10b35-251">Multitenant-toepassingen kunnen ook om aan te roepen API's die zijn beveiligd door Azure AD-toegangstokens ophalen.</span><span class="sxs-lookup"><span data-stu-id="10b35-251">Multi-tenant applications can also get access tokens to call APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="10b35-252">Een veelvoorkomende fout bij het gebruik van de Active Directory Authentication Library (ADAL) met een multitenant-toepassing is in eerste instantie te vragen van een token voor een gebruiker die met/Common reactie ontvangen en vervolgens een daaropvolgende token voor de gebruiker ook met/Common aanvragen.</span><span class="sxs-lookup"><span data-stu-id="10b35-252">A common error when using the Active Directory Authentication Library (ADAL) with a multi-tenant application, is to initially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="10b35-253">Omdat het antwoord van Azure AD afkomstig is van een tenant niet-algemene, ADAL plaatst het token afkomstig is van de tenant.</span><span class="sxs-lookup"><span data-stu-id="10b35-253">Since the response from Azure AD comes from a tenant, not /common, ADAL caches the token as being from the tenant.</span></span> <span data-ttu-id="10b35-254">De volgende aanroep/Common ophalen van een toegangstoken voor de gebruiker de cachevermelding Cachemissers en de gebruiker wordt gevraagd opnieuw aanmelden.</span><span class="sxs-lookup"><span data-stu-id="10b35-254">The subsequent call to /common to get an access token for the user misses the cache entry, and the user is prompted to sign in again.</span></span>  <span data-ttu-id="10b35-255">Om te voorkomen dat de cache ontbreekt, zorg volgende aanroepen voor een gebruiker al aangemeld zijn aangebracht aan de tenant-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="10b35-255">To avoid missing the cache, make sure subsequent calls for an already signed in user are made to the tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="10b35-256">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="10b35-256">Next steps</span></span>
<span data-ttu-id="10b35-257">In dit artikel hebt u geleerd hoe een toepassing bouwt die een gebruiker van een Azure Active Directory-tenant kunt aanmelden.</span><span class="sxs-lookup"><span data-stu-id="10b35-257">In this article, you learned how to build an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="10b35-258">Na het inschakelen van eenmalige aanmelding tussen uw app en Azure Active Directory, kunt u ook uw toepassing voor toegang tot API's die worden weergegeven door de Microsoft-bronnen, zoals Office 365 bijwerken.</span><span class="sxs-lookup"><span data-stu-id="10b35-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application to access APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="10b35-259">U kunt een persoonlijke ervaring dus aanbieden in uw toepassing bijvoorbeeld contextuele informatie weergegeven voor de gebruikers, zoals hun profielfoto of hun volgende afspraak voor de kalender.</span><span class="sxs-lookup"><span data-stu-id="10b35-259">So you can offer a personalized experience in your application, for example showing contextual information to the users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="10b35-260">Voor meer informatie over het maken van API-aanroepen naar Azure Active Directory en Office 365-services zoals Exchange, SharePoint, OneDrive, OneNote, planning, Excel en meer, gaat u naar: [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="10b35-260">To learn more about making API calls to Azure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="10b35-261">Gerelateerde inhoud</span><span class="sxs-lookup"><span data-stu-id="10b35-261">Related content</span></span>
* <span data-ttu-id="10b35-262">[Voorbeelden van multitenant-toepassing][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="10b35-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="10b35-263">[Huisstijlrichtlijnen voor toepassingen][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="10b35-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="10b35-264">[Handleiding voor Azure AD-ontwikkelaars][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="10b35-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="10b35-265">[Toepassingsobjecten en Service-Principal-objecten][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="10b35-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="10b35-266">[Toepassingen integreren met Azure Active Directory][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="10b35-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="10b35-267">[Overzicht van het Framework toestemming][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="10b35-267">[Overview of the Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="10b35-268">[Microsoft Graph API-Machtigingsbereiken][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="10b35-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="10b35-269">[Azure AD Graph API-Machtigingsbereiken][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="10b35-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="10b35-270">Gebruik de volgende sectie met opmerkingen om uw feedback en help ons verfijnen en onze content vorm.</span><span class="sxs-lookup"><span data-stu-id="10b35-270">Please use the following comments section to provide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














