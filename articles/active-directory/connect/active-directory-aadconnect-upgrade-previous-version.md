---
title: 'Azure AD Connect: Upgraden van een vorige versie | Microsoft Docs'
description: Verklaart de verschillende methoden om te upgraden naar de nieuwste versie van Azure Active Directory Connect, met inbegrip van een in-place upgrade en een swing-migratie.
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 52fd9375c71c42feaf87f4a0f4220e1cb3889e63
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-to-the-latest"></a><span data-ttu-id="0087a-103">Azure AD Connect: Upgraden van een eerdere versie naar de nieuwste versie</span><span class="sxs-lookup"><span data-stu-id="0087a-103">Azure AD Connect: Upgrade from a previous version to the latest</span></span>
<span data-ttu-id="0087a-104">Dit onderwerp beschrijft de verschillende methoden waarmee u kunt de Azure Active Directory (Azure AD) Connect-installatie bijwerken naar de meest recente versie.</span><span class="sxs-lookup"><span data-stu-id="0087a-104">This topic describes the different methods that you can use to upgrade your Azure Active Directory (Azure AD) Connect installation to the latest release.</span></span> <span data-ttu-id="0087a-105">We adviseren dat u zelf de meest recente de releases van Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0087a-105">We recommend that you keep yourself current with the releases of Azure AD Connect.</span></span> <span data-ttu-id="0087a-106">U ook de stappen in de [migratie bewegen](#swing-migration) sectie wanneer u een aanzienlijke configuratie wijzigen.</span><span class="sxs-lookup"><span data-stu-id="0087a-106">You also use the steps in the [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="0087a-107">Als u upgraden van DirSync wilt, Zie [een upgrade uitvoert van Azure AD-synchronisatiehulpprogramma (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) in plaats daarvan.</span><span class="sxs-lookup"><span data-stu-id="0087a-107">If you want to upgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="0087a-108">Er zijn enkele verschillende strategieën die u gebruiken kunt voor het upgraden van Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0087a-108">There are a few different strategies that you can use to upgrade Azure AD Connect.</span></span>

| <span data-ttu-id="0087a-109">Methode</span><span class="sxs-lookup"><span data-stu-id="0087a-109">Method</span></span> | <span data-ttu-id="0087a-110">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="0087a-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="0087a-111">Automatische upgrade</span><span class="sxs-lookup"><span data-stu-id="0087a-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="0087a-112">Dit is de eenvoudigste methode voor klanten met een snelle installatie.</span><span class="sxs-lookup"><span data-stu-id="0087a-112">This is the easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="0087a-113">In-place upgrade</span><span class="sxs-lookup"><span data-stu-id="0087a-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="0087a-114">Als u één server hebt, kunt u de installatie van ter plekke op dezelfde server bijwerken.</span><span class="sxs-lookup"><span data-stu-id="0087a-114">If you have a single server, you can upgrade the installation in-place on the same server.</span></span> |
| [<span data-ttu-id="0087a-115">Migratie bewegen</span><span class="sxs-lookup"><span data-stu-id="0087a-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="0087a-116">U kunt met twee servers voorbereiden op een van de servers met de nieuwe release of de configuratie en de actieve server wijzigen wanneer u klaar bent.</span><span class="sxs-lookup"><span data-stu-id="0087a-116">With two servers, you can prepare one of the servers with the new release or configuration, and change the active server when you're ready.</span></span> |

<span data-ttu-id="0087a-117">Zie voor informatie machtigingen de [machtigingen die vereist zijn voor een upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="0087a-117">For permissions information, see the [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="0087a-118">Nadat u uw nieuwe Azure AD Connect-server om te beginnen met het synchroniseren van wijzigingen naar Azure AD hebt ingeschakeld, moet u niet terugdraaien met behulp van DirSync of Azure AD Sync.</span><span class="sxs-lookup"><span data-stu-id="0087a-118">After you've enabled your new Azure AD Connect server to start synchronizing changes to Azure AD, you must not roll back to using DirSync or Azure AD Sync.</span></span> <span data-ttu-id="0087a-119">Downgraden van Azure AD Connect op oudere clients, waaronder DirSync en Azure AD Sync, wordt niet ondersteund en kan leiden tot problemen zoals verlies van gegevens in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0087a-119">Downgrading from Azure AD Connect to legacy clients, including DirSync and Azure AD Sync, isn't supported and can lead to issues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="0087a-120">In-place upgrade</span><span class="sxs-lookup"><span data-stu-id="0087a-120">In-place upgrade</span></span>
<span data-ttu-id="0087a-121">Een in-place upgrade werkt voor het verplaatsen van Azure AD Sync of Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="0087a-121">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="0087a-122">Werkt niet voor het verplaatsen van DirSync of voor een oplossing met Forefront Identity Manager (FIM) + Azure AD-Connector.</span><span class="sxs-lookup"><span data-stu-id="0087a-122">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="0087a-123">Deze methode verdient de voorkeur wanneer u één server en minder dan ongeveer 100.000 objecten.</span><span class="sxs-lookup"><span data-stu-id="0087a-123">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="0087a-124">Er zijn wijzigingen in de out-of-box-sync-regels, een volledige import en een volledige synchronisatie uitgevoerd als na de upgrade.</span><span class="sxs-lookup"><span data-stu-id="0087a-124">If there are any changes to the out-of-box sync rules, a full import and full synchronization occur after the upgrade.</span></span> <span data-ttu-id="0087a-125">Deze methode ervoor zorgt dat de nieuwe configuratie is toegepast op alle bestaande objecten in het systeem.</span><span class="sxs-lookup"><span data-stu-id="0087a-125">This method ensures that the new configuration is applied to all existing objects in the system.</span></span> <span data-ttu-id="0087a-126">Dit duurt enkele uren, afhankelijk van het aantal objecten die in het bereik van de synchronisatie-engine.</span><span class="sxs-lookup"><span data-stu-id="0087a-126">This run might take a few hours, depending on the number of objects that are in scope of the sync engine.</span></span> <span data-ttu-id="0087a-127">De normale delta synchronisatie scheduler (die wordt standaard gesynchroniseerd elke 30 minuten) is onderbroken, maar Wachtwoordsynchronisatie blijft.</span><span class="sxs-lookup"><span data-stu-id="0087a-127">The normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="0087a-128">U kunt overwegen de in-place upgrade tijdens een weekend.</span><span class="sxs-lookup"><span data-stu-id="0087a-128">You might consider doing the in-place upgrade during a weekend.</span></span> <span data-ttu-id="0087a-129">Als er dat geen wijzigingen aangebracht in de out-of-box-configuratie met de nieuwe Azure AD Connect release, vervolgens een normale delta-import/synchronisatie wordt gestart in plaats daarvan.</span><span class="sxs-lookup"><span data-stu-id="0087a-129">If there are no changes to the out-of-box configuration with the new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![In-place upgrade](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="0087a-131">Als u wijzigingen aan de out-of-box-synchronisatieregels aangebracht hebt, worden de deze regels weer ingesteld op de standaardconfiguratie bij een upgrade.</span><span class="sxs-lookup"><span data-stu-id="0087a-131">If you've made changes to the out-of-box synchronization rules, then these rules are set back to the default configuration on upgrade.</span></span> <span data-ttu-id="0087a-132">Om ervoor te zorgen dat uw configuratie wordt gehouden tussen upgrades, zorg ervoor dat u wijzigingen aanbrengt, zoals ze zijn beschreven in [aanbevolen procedures voor het wijzigen van de standaardconfiguratie](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="0087a-132">To make sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing the default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="0087a-133">Tijdens een upgrade ter plekke, kunnen er wijzigingen die zijn geïntroduceerd waarvoor specifieke synchronisatiebewerkingen (met inbegrip van de stap van de volledige Import en volledige synchronisatie) moet worden uitgevoerd nadat de upgrade is voltooid.</span><span class="sxs-lookup"><span data-stu-id="0087a-133">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed after upgrade completes.</span></span> <span data-ttu-id="0087a-134">Om uit te stellen dergelijke activiteiten, Raadpleeg het gedeelte [het uitstellen van de volledige synchronisatie na de upgrade](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="0087a-134">To defer such activities, refer to section [How to defer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="0087a-135">Swingmigratie</span><span class="sxs-lookup"><span data-stu-id="0087a-135">Swing migration</span></span>
<span data-ttu-id="0087a-136">Als u de implementatie van een complexe of veel objecten hebt, is dit mogelijk niet praktisch een in-place upgrade op het systeem live doen.</span><span class="sxs-lookup"><span data-stu-id="0087a-136">If you have a complex deployment or many objects, it might be impractical to do an in-place upgrade on the live system.</span></span> <span data-ttu-id="0087a-137">Voor sommige klanten dit proces kan meerdere dagen--duren en gedurende deze tijd geen wijzigingen zijn verwerkt.</span><span class="sxs-lookup"><span data-stu-id="0087a-137">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="0087a-138">U kunt deze methode ook gebruiken wanneer u grote wijzigingen aanbrengen in uw configuratie wilt maken en wilt ze om uit te proberen voordat ze naar de cloud bent gepusht.</span><span class="sxs-lookup"><span data-stu-id="0087a-138">You can also use this method when you plan to make substantial changes to your configuration and you want to try them out before they're pushed to the cloud.</span></span>

<span data-ttu-id="0087a-139">De aanbevolen methode voor deze scenario's is het gebruik van een migratie swing.</span><span class="sxs-lookup"><span data-stu-id="0087a-139">The recommended method for these scenarios is to use a swing migration.</span></span> <span data-ttu-id="0087a-140">U moet (ten minste) twee servers--één actieve server en één server met tijdelijke bestanden.</span><span class="sxs-lookup"><span data-stu-id="0087a-140">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="0087a-141">De actieve server (weergegeven met ononderbroken blauwe lijnen in de volgende afbeelding) is verantwoordelijk voor de productie-active-belasting.</span><span class="sxs-lookup"><span data-stu-id="0087a-141">The active server (shown with solid blue lines in the following picture) is responsible for the active production load.</span></span> <span data-ttu-id="0087a-142">De staging-server (weergegeven met onderbroken paarse lijnen) is voorbereid met de nieuwe release of de configuratie.</span><span class="sxs-lookup"><span data-stu-id="0087a-142">The staging server (shown with dashed purple lines) is prepared with the new release or configuration.</span></span> <span data-ttu-id="0087a-143">Wanneer deze volledig klaar is, wordt deze server actief gemaakt.</span><span class="sxs-lookup"><span data-stu-id="0087a-143">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="0087a-144">De vorige active server, waarop nu de oude versie of de configuratie die zijn geïnstalleerd, in de staging-server wordt uitgevoerd en wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="0087a-144">The previous active server, which now has the old version or configuration installed, is made into the staging server and is upgraded.</span></span>

<span data-ttu-id="0087a-145">De twee servers kunnen verschillende versies gebruiken.</span><span class="sxs-lookup"><span data-stu-id="0087a-145">The two servers can use different versions.</span></span> <span data-ttu-id="0087a-146">Bijvoorbeeld, de active server die u wilt stellen Azure AD Sync kunt gebruiken en de nieuwe testserver Azure AD Connect kunt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="0087a-146">For example, the active server that you plan to decommission can use Azure AD Sync, and the new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="0087a-147">Als u swing migratie gebruikt voor het ontwikkelen van een nieuwe configuratie, is het een goed idee om dezelfde versies voor de twee servers.</span><span class="sxs-lookup"><span data-stu-id="0087a-147">If you use swing migration to develop a new configuration, it's a good idea to have the same versions on the two servers.</span></span>  
![Tijdelijke server](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="0087a-149">Bepaalde klanten graag voor drie of vier servers voor dit scenario.</span><span class="sxs-lookup"><span data-stu-id="0087a-149">Some customers prefer to have three or four servers for this scenario.</span></span> <span data-ttu-id="0087a-150">Wanneer de staging-server is geüpgraded, hebt u niet een back-upserver voor [herstel na noodgevallen](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="0087a-150">When the staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="0087a-151">Met drie of vier servers, kunt u één set van primaire/stand-by-servers met de nieuwe versie, die zorgt ervoor dat er altijd een testserver die gereed is om over te nemen voorbereiden.</span><span class="sxs-lookup"><span data-stu-id="0087a-151">With three or four servers, you can prepare one set of primary/standby servers with the new version, which ensures that there is always a staging server that's ready to take over.</span></span>

<span data-ttu-id="0087a-152">Deze stappen werken ook van Azure AD Sync of een oplossing met FIM + Azure AD-Connector te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="0087a-152">These steps also work to move from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="0087a-153">Deze stappen werken niet voor DirSync, maar de dezelfde swing migratiemethode (ook wel parallelle implementatie) met de stappen voor DirSync is in [Upgrade Azure Active Directory-synchronisatie (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="0087a-153">These steps don't work for DirSync, but the same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-to-upgrade"></a><span data-ttu-id="0087a-154">Een swing migratie gebruiken om te werken</span><span class="sxs-lookup"><span data-stu-id="0087a-154">Use a swing migration to upgrade</span></span>
1. <span data-ttu-id="0087a-155">Als u Azure AD Connect op beide servers gebruiken en alleen een configuratie wijzigt maken, zorg ervoor dat zijn uw actieve server- en staging-server beide gebruikmaken van dezelfde versie.</span><span class="sxs-lookup"><span data-stu-id="0087a-155">If you use Azure AD Connect on both servers and plan to only make a configuration change, make sure that your active server and staging server are both using the same version.</span></span> <span data-ttu-id="0087a-156">Dat kunt gemakkelijker verschillen later te vergelijken.</span><span class="sxs-lookup"><span data-stu-id="0087a-156">That makes it easier to compare differences later.</span></span> <span data-ttu-id="0087a-157">Als u een van Azure AD Sync upgrade uitvoert, hebben deze servers verschillende versies.</span><span class="sxs-lookup"><span data-stu-id="0087a-157">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="0087a-158">Als u een van een oudere versie van Azure AD Connect upgrade uitvoert, is het een goed idee om te beginnen met de twee servers die gebruikmaken van dezelfde versie, maar dit is niet vereist.</span><span class="sxs-lookup"><span data-stu-id="0087a-158">If you're upgrading from an older version of Azure AD Connect, it's a good idea to start with the two servers that are using the same version, but it's not required.</span></span>
2. <span data-ttu-id="0087a-159">Als u een aangepaste configuratie hebt aangebracht en staging-server heeft het geen, volgt u de stappen onder [een aangepaste configuratie van de active server verplaatsen naar de testserver](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="0087a-159">If you've made a custom configuration and your staging server doesn't have it, follow the steps under [Move a custom configuration from the active server to the staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="0087a-160">Als u een van een oudere versie van Azure AD Connect upgrade uitvoert, moet u de tijdelijke server upgraden naar de nieuwste versie.</span><span class="sxs-lookup"><span data-stu-id="0087a-160">If you're upgrading from an earlier release of Azure AD Connect, upgrade the staging server to the latest version.</span></span> <span data-ttu-id="0087a-161">Als u, Azure AD Sync verplaatsen wilt, installeert u Azure AD Connect op uw server met tijdelijke bestanden.</span><span class="sxs-lookup"><span data-stu-id="0087a-161">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="0087a-162">Laat de synchronisatie-engine volledige import en volledige synchronisatie uitvoeren op uw server met tijdelijke bestanden.</span><span class="sxs-lookup"><span data-stu-id="0087a-162">Let the sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="0087a-163">Controleer of de nieuwe configuratie niet dat onverwachte wijzigingen met behulp van de stappen onder 'Verifiëren' [Controleer de configuratie van een server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="0087a-163">Verify that the new configuration didn't cause any unexpected changes by using the steps under "Verify" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="0087a-164">Als er iets niet zoals verwacht, corrigeren, voert u het importeren en synchroniseren en controleer of de gegevens pas goed uitziet, door de stappen te volgen.</span><span class="sxs-lookup"><span data-stu-id="0087a-164">If something isn't as expected, correct it, run the import and sync, and verify the data until it looks good, by following the steps.</span></span>
6. <span data-ttu-id="0087a-165">Overschakelen van de staging-server als de actieve server.</span><span class="sxs-lookup"><span data-stu-id="0087a-165">Switch the staging server to be the active server.</span></span> <span data-ttu-id="0087a-166">Dit is de laatste stap 'Switch active server' [Controleer de configuratie van een server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="0087a-166">This is the final step "Switch active server" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="0087a-167">Als u een Azure AD Connect upgrade uitvoert, moet u de server die nu in de faseringsmodus om de meest recente versie te upgraden.</span><span class="sxs-lookup"><span data-stu-id="0087a-167">If you're upgrading Azure AD Connect, upgrade the server that's now in staging mode to the latest release.</span></span> <span data-ttu-id="0087a-168">Volg dezelfde stappen als voordat u gegevens en configuratie is bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="0087a-168">Follow the same steps as before to get the data and configuration upgraded.</span></span> <span data-ttu-id="0087a-169">Als u Azure AD Sync bijgewerkt, kunt u nu uitschakelen en de oude server buiten gebruik stellen.</span><span class="sxs-lookup"><span data-stu-id="0087a-169">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-the-active-server-to-the-staging-server"></a><span data-ttu-id="0087a-170">Een aangepaste configuratie van de active server verplaatsen naar de staging-server</span><span class="sxs-lookup"><span data-stu-id="0087a-170">Move a custom configuration from the active server to the staging server</span></span>
<span data-ttu-id="0087a-171">Als u wijzigingen in de configuratie hebt aangebracht in de actieve server, moet u ervoor zorgen dat de dezelfde wijzigingen worden toegepast op de staging-server.</span><span class="sxs-lookup"><span data-stu-id="0087a-171">If you've made configuration changes to the active server, you need to make sure that the same changes are applied to the staging server.</span></span> <span data-ttu-id="0087a-172">Om te helpen met deze verplaatsen, kunt u de [documentatie voor Azure AD Connect-configuratie](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="0087a-172">To help with this move, you can use the [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="0087a-173">U kunt verplaatsen om dat de synchronisatie van de aangepaste regels die u hebt gemaakt met behulp van PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0087a-173">You can move the custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="0087a-174">U moet andere wijzigingen dezelfde manier toepassen op beide systemen en de wijzigingen kunnen niet worden gemigreerd.</span><span class="sxs-lookup"><span data-stu-id="0087a-174">You must apply other changes the same way on both systems, and you can't migrate the changes.</span></span> <span data-ttu-id="0087a-175">De [configuratie documentatie](https://github.com/Microsoft/AADConnectConfigDocumenter) kunt u het vergelijken van de twee systemen om ervoor te zorgen dat ze identiek zijn.</span><span class="sxs-lookup"><span data-stu-id="0087a-175">The [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing the two systems to make sure they are identical.</span></span> <span data-ttu-id="0087a-176">Het hulpprogramma kan ook helpen bij de automatisering van de stappen in deze sectie worden gevonden.</span><span class="sxs-lookup"><span data-stu-id="0087a-176">The tool can also help in automating the steps found in this section.</span></span>

<span data-ttu-id="0087a-177">U moet de volgende zaken dezelfde manier configureren op beide servers:</span><span class="sxs-lookup"><span data-stu-id="0087a-177">You need to configure the following things the same way on both servers:</span></span>

* <span data-ttu-id="0087a-178">Verbinding met de dezelfde forests</span><span class="sxs-lookup"><span data-stu-id="0087a-178">Connection to the same forests</span></span>
* <span data-ttu-id="0087a-179">Elk domein en OE filteren</span><span class="sxs-lookup"><span data-stu-id="0087a-179">Any domain and OU filtering</span></span>
* <span data-ttu-id="0087a-180">De dezelfde optionele functies, zoals Wachtwoordsynchronisatie en wachtwoord terugschrijven</span><span class="sxs-lookup"><span data-stu-id="0087a-180">The same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="0087a-181">**Aangepaste synchronisatieregels verplaatsen**</span><span class="sxs-lookup"><span data-stu-id="0087a-181">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="0087a-182">Als u wilt verplaatsen aangepaste synchronisatieregels, het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="0087a-182">To move custom synchronization rules, do the following:</span></span>

1. <span data-ttu-id="0087a-183">Open **synchronisatie regeleditor** op uw actieve server.</span><span class="sxs-lookup"><span data-stu-id="0087a-183">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="0087a-184">Selecteer een aangepaste regel.</span><span class="sxs-lookup"><span data-stu-id="0087a-184">Select a custom rule.</span></span> <span data-ttu-id="0087a-185">Klik op **exporteren**.</span><span class="sxs-lookup"><span data-stu-id="0087a-185">Click **Export**.</span></span> <span data-ttu-id="0087a-186">Hiermee wordt een Kladblok-venster.</span><span class="sxs-lookup"><span data-stu-id="0087a-186">This brings up a Notepad window.</span></span> <span data-ttu-id="0087a-187">Het tijdelijke bestand opslaan met een PS1-uitbreiding.</span><span class="sxs-lookup"><span data-stu-id="0087a-187">Save the temporary file with a PS1 extension.</span></span> <span data-ttu-id="0087a-188">Hierdoor kunt u een PowerShell-script.</span><span class="sxs-lookup"><span data-stu-id="0087a-188">This makes it a PowerShell script.</span></span> <span data-ttu-id="0087a-189">Kopieer het PS1-bestand naar de staging-server.</span><span class="sxs-lookup"><span data-stu-id="0087a-189">Copy the PS1 file to the staging server.</span></span>  
   <span data-ttu-id="0087a-190">![Exporteren van de synchronisatie-regel](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="0087a-190">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="0087a-191">De Connector-GUID is anders zijn op de testserver en deze moeten wijzigen.</span><span class="sxs-lookup"><span data-stu-id="0087a-191">The Connector GUID is different on the staging server, and you must change it.</span></span> <span data-ttu-id="0087a-192">Als u de GUID, start **synchronisatie regeleditor**, selecteer een van de out-of-box-regels die hetzelfde verbonden systeem vertegenwoordigen en klikt u op **exporteren**.</span><span class="sxs-lookup"><span data-stu-id="0087a-192">To get the GUID, start **Synchronization Rules Editor**, select one of the out-of-box rules that represent the same connected system, and click **Export**.</span></span> <span data-ttu-id="0087a-193">De GUID in uw PS1-bestand vervangen door de GUID van de staging-server.</span><span class="sxs-lookup"><span data-stu-id="0087a-193">Replace the GUID in your PS1 file with the GUID from the staging server.</span></span>
4. <span data-ttu-id="0087a-194">Voer het PS1-bestand in een PowerShell-prompt.</span><span class="sxs-lookup"><span data-stu-id="0087a-194">In a PowerShell prompt, run the PS1 file.</span></span> <span data-ttu-id="0087a-195">Hiermee maakt u de regel voor het aangepaste synchroniseren op de testserver.</span><span class="sxs-lookup"><span data-stu-id="0087a-195">This creates the custom synchronization rule on the staging server.</span></span>
5. <span data-ttu-id="0087a-196">Herhaal dit voor alle aangepaste regels.</span><span class="sxs-lookup"><span data-stu-id="0087a-196">Repeat this for all your custom rules.</span></span>

## <a name="how-to-defer-full-synchronization-after-upgrade"></a><span data-ttu-id="0087a-197">Het uitstellen van de volledige synchronisatie na de upgrade</span><span class="sxs-lookup"><span data-stu-id="0087a-197">How to defer full synchronization after upgrade</span></span>
<span data-ttu-id="0087a-198">Tijdens een upgrade ter plekke, kunnen er wijzigingen die zijn geïntroduceerd waarvoor specifieke synchronisatiebewerkingen (met inbegrip van de stap van de volledige Import en volledige synchronisatie) wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="0087a-198">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed.</span></span> <span data-ttu-id="0087a-199">Bijvoorbeeld connector schemawijzigingen vereisen **volledige import** stap en out-of-box synchronisatie regel wordt gewijzigd, moeten **volledige synchronisatie** stap worden uitgevoerd op de betrokken connectors.</span><span class="sxs-lookup"><span data-stu-id="0087a-199">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step to be executed on affected connectors.</span></span> <span data-ttu-id="0087a-200">Tijdens de upgrade, Azure AD Connect bepaalt welke synchronisatiebewerkingen zijn vereist en registreert deze als *overschrijft*.</span><span class="sxs-lookup"><span data-stu-id="0087a-200">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="0087a-201">In de volgende synchronisatiecyclus wordt de synchronisatie-planner deze overschrijvingen wordt opgehaald en deze worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="0087a-201">In the following synchronization cycle, the synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="0087a-202">Zodra een onderdrukking met succes wordt uitgevoerd, wordt deze verwijderd.</span><span class="sxs-lookup"><span data-stu-id="0087a-202">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="0087a-203">Mogelijk zijn er situaties waarin u niet dat deze overschrijvingen wilt te kunnen uitvoeren onmiddellijk na de upgrade.</span><span class="sxs-lookup"><span data-stu-id="0087a-203">There may be situations where you do not want these overrides to take place immediately after upgrade.</span></span> <span data-ttu-id="0087a-204">Bijvoorbeeld, u talrijke gesynchroniseerde objecten hebt en u wilt dat deze synchronisatie stappen na de kantooruren.</span><span class="sxs-lookup"><span data-stu-id="0087a-204">For example, you have numerous synchronized objects and you would like these synchronization steps to occur after business hours.</span></span> <span data-ttu-id="0087a-205">Deze overschrijvingen verwijderen:</span><span class="sxs-lookup"><span data-stu-id="0087a-205">To remove these overrides:</span></span>

1. <span data-ttu-id="0087a-206">Tijdens de upgrade, **schakelt** de optie **Start het synchronisatieproces wanneer configuratie is voltooid**.</span><span class="sxs-lookup"><span data-stu-id="0087a-206">During upgrade, **uncheck** the option **Start the synchronization process when configuration completes**.</span></span> <span data-ttu-id="0087a-207">Hiermee schakelt de synchronisatie-planner en voorkomt dat synchronisatiecyclus die hebben plaatsgevonden automatisch voordat de onderdrukkingen worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="0087a-207">This disables the synchronization scheduler and prevents synchronization cycle from taking place automatically before the overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="0087a-209">Nadat de upgrade is voltooid, voert u de volgende cmdlet om erachter te komen welke onderdrukkingen zijn toegevoegd:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="0087a-209">After upgrade completes, run the following cmdlet to find out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="0087a-210">De onderdrukkingen zijn specifiek voor een connector.</span><span class="sxs-lookup"><span data-stu-id="0087a-210">The overrides are connector-specific.</span></span> <span data-ttu-id="0087a-211">In het volgende voorbeeld zijn stap van de volledige Import en volledige synchronisatie toegevoegd aan zowel de on-premises AD-Connector en Azure AD-Connector.</span><span class="sxs-lookup"><span data-stu-id="0087a-211">In the following example, Full Import step and Full Synchronization step have been added to both the on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="0087a-213">Noteer de bestaande onderdrukkingen die zijn toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="0087a-213">Note down the existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="0087a-214">Als u wilt de onderdrukkingen voor zowel volledige import en een volledige synchronisatie op een willekeurige connector verwijderen, moet u de volgende cmdlet uitvoeren:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="0087a-214">To remove the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="0087a-215">Voor het verwijderen van de onderdrukkingen op alle connectors kunt u het volgende PowerShell-script uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="0087a-215">To remove the overrides on all connectors, execute the following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="0087a-216">Als u wilt doorgaan met de scheduler, voer de volgende cmdlet:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="0087a-216">To resume the scheduler, run the following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="0087a-217">Vergeet niet de vereiste synchronisatie stappen zo snel mogelijk uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="0087a-217">Remember to execute the required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="0087a-218">U kunt handmatig uitvoeren van deze stappen Synchronization Service Manager of de onderdrukkingen back-met de cmdlet Set-ADSyncSchedulerConnectorOverride toevoegen.</span><span class="sxs-lookup"><span data-stu-id="0087a-218">You can either manually execute these steps using the Synchronization Service Manager or add the overrides back using the Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="0087a-219">Als u wilt de onderdrukkingen voor zowel volledige import en een volledige synchronisatie op een willekeurige connector toevoegt, moet u de volgende cmdlet uitvoeren:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="0087a-219">To add the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="0087a-220">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="0087a-220">Next steps</span></span>
<span data-ttu-id="0087a-221">Meer informatie over [uw on-premises identiteiten integreren met Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="0087a-221">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
