---
title: 'Azure AD Connect: Ontwerpen concepten | Microsoft Docs'
description: In dit onderwerp beschrijft bepaalde gebieden van implementatie ontwerpen
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="ff01c-103">Azure AD Connect: Ontwerpconcepten</span><span class="sxs-lookup"><span data-stu-id="ff01c-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="ff01c-104">Het doel van dit onderwerp is om gebieden die moeten worden beschouwd door bij het implementatieontwerp van Azure AD Connect te beschrijven.</span><span class="sxs-lookup"><span data-stu-id="ff01c-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="ff01c-105">In dit onderwerp is een deep dive op bepaalde gebieden en deze concepten worden kort beschreven in andere onderwerpen ook.</span><span class="sxs-lookup"><span data-stu-id="ff01c-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="ff01c-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="ff01c-106">sourceAnchor</span></span>
<span data-ttu-id="ff01c-107">Het kenmerk sourceAnchor is gedefinieerd als *een kenmerk onveranderbaar tijdens de levensduur van een object*.</span><span class="sxs-lookup"><span data-stu-id="ff01c-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="ff01c-108">Dit is de unieke identificatie van een object dat de dezelfde object on-premises en in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ff01c-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="ff01c-109">Het kenmerk is een afkorting **onveranderbare id genoemd** en de twee namen uitwisselbaar worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ff01c-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="ff01c-110">De niet-wijzigbaar, word die 'kan niet worden gewijzigd', is belangrijk dat u dit onderwerp.</span><span class="sxs-lookup"><span data-stu-id="ff01c-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="ff01c-111">Omdat de waarde van dit kenmerk kan niet worden gewijzigd nadat deze is ingesteld, is het belangrijk dat u een ontwerp die ondersteuning biedt voor uw scenario selecteren.</span><span class="sxs-lookup"><span data-stu-id="ff01c-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="ff01c-112">Het kenmerk wordt gebruikt voor de volgende scenario's:</span><span class="sxs-lookup"><span data-stu-id="ff01c-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="ff01c-113">Wanneer een nieuwe server van de synchronisatie-engine is gemaakt of opnieuw worden opgebouwd na een noodherstelscenario, koppelt u dit kenmerk bestaande objecten in Azure AD met objecten on-premises.</span><span class="sxs-lookup"><span data-stu-id="ff01c-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="ff01c-114">Als u van een identiteit alleen in de cloud naar een identiteitsmodel gesynchroniseerde verplaatst, kan dit kenmerk objecten 'harde match' bestaande objecten in Azure AD met lokale objecten.</span><span class="sxs-lookup"><span data-stu-id="ff01c-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="ff01c-115">Als u gebruikmaakt van Federatie en vervolgens dit kenmerk samen met de **userPrincipalName** in de claim wordt gebruikt als unieke identificatie van een gebruiker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="ff01c-116">In dit onderwerp alleen wordt gesproken over sourceAnchor met betrekking tot de gebruikers.</span><span class="sxs-lookup"><span data-stu-id="ff01c-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="ff01c-117">De dezelfde regels gelden voor alle objecttypen, maar dit is alleen bestemd voor gebruikers dat dit probleem is meestal een belangrijk.</span><span class="sxs-lookup"><span data-stu-id="ff01c-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="ff01c-118">Een goede sourceAnchor kenmerk selecteren</span><span class="sxs-lookup"><span data-stu-id="ff01c-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="ff01c-119">De kenmerkwaarde moet de volgende regels volgen:</span><span class="sxs-lookup"><span data-stu-id="ff01c-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="ff01c-120">Minder dan 60 tekens bestaan</span><span class="sxs-lookup"><span data-stu-id="ff01c-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="ff01c-121">Tekens die niet wordt a-z, A-Z en 0-9 zijn gecodeerd en geteld als 3 tekens</span><span class="sxs-lookup"><span data-stu-id="ff01c-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="ff01c-122">Speciale tekens niet bevatten: &#92;!</span><span class="sxs-lookup"><span data-stu-id="ff01c-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="ff01c-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="ff01c-123"># $ % & * + / = ?</span></span> <span data-ttu-id="ff01c-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="ff01c-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="ff01c-125">Globaal uniek zijn</span><span class="sxs-lookup"><span data-stu-id="ff01c-125">Must be globally unique</span></span>
* <span data-ttu-id="ff01c-126">Moet een tekenreeks, geheel getal of binair</span><span class="sxs-lookup"><span data-stu-id="ff01c-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="ff01c-127">Moet niet zijn gebaseerd op de naam van gebruiker deze wijzigingen</span><span class="sxs-lookup"><span data-stu-id="ff01c-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="ff01c-128">Niet mogen worden hoofdlettergevoelig en te voorkomen dat de waarden die per aanvraag verschillen kunnen</span><span class="sxs-lookup"><span data-stu-id="ff01c-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="ff01c-129">Moet worden toegewezen als het object is gemaakt</span><span class="sxs-lookup"><span data-stu-id="ff01c-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="ff01c-130">Als de geselecteerde sourceAnchor is niet van het type string, vervolgens Azure AD Connect Base64Encode de waarde van het kenmerk om te controleren of er geen speciale tekens worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="ff01c-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="ff01c-131">Als u een andere federatieserver dan de AD FS gebruikt, controleert u of de server kan ook Base64Encode het kenmerk.</span><span class="sxs-lookup"><span data-stu-id="ff01c-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="ff01c-132">Het kenmerk sourceAnchor is hoofdlettergevoelig.</span><span class="sxs-lookup"><span data-stu-id="ff01c-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="ff01c-133">Een waarde van 'Jandevries' is niet hetzelfde als 'jandevries'.</span><span class="sxs-lookup"><span data-stu-id="ff01c-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="ff01c-134">Maar u mag geen twee verschillende objecten met alleen een verschil in geval.</span><span class="sxs-lookup"><span data-stu-id="ff01c-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="ff01c-135">Als u één forest op locatie, klikt u vervolgens het kenmerk moet u is **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="ff01c-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="ff01c-136">Dit is ook het kenmerk wordt gebruikt wanneer u snelle instellingen in Azure AD Connect gebruiken en ook het kenmerk wordt gebruikt door DirSync.</span><span class="sxs-lookup"><span data-stu-id="ff01c-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="ff01c-137">Als u meerdere forests hebt en niet gebruikers tussen forests en domeinen, klikt u vervolgens verplaatsen **objectGUID** een goed kenmerk kiezen zelfs in dit geval is.</span><span class="sxs-lookup"><span data-stu-id="ff01c-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="ff01c-138">Als u gebruikers tussen forests en domeinen verplaatst, moet vervolgens u een kenmerk dat niet verandert of kan worden verplaatst met de gebruikers tijdens het verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="ff01c-139">Een aanbevolen aanpak is te integreren van een synthetische kenmerk.</span><span class="sxs-lookup"><span data-stu-id="ff01c-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="ff01c-140">Een kenmerk kan waarin iets dat op een GUID lijkt zijn geschikt is.</span><span class="sxs-lookup"><span data-stu-id="ff01c-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="ff01c-141">Tijdens het maken van het object is een nieuwe GUID gemaakt en geautoriseerd op de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="ff01c-142">Een aangepaste synchronisatieregel kan worden gemaakt in de synchronisatie-engine-server voor het maken van deze waarde op basis van de **objectGUID** en het geselecteerde kenmerk in ADDS bijwerken.</span><span class="sxs-lookup"><span data-stu-id="ff01c-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="ff01c-143">Wanneer u het object verplaatst, zorg ervoor dat de inhoud van deze waarde ook gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="ff01c-144">Er is een andere oplossing kiest u een bestaand kenmerk weet u niet gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="ff01c-145">Gangbare kenmerken zijn **werknemer-id**.</span><span class="sxs-lookup"><span data-stu-id="ff01c-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="ff01c-146">Als u een kenmerk dat letters bevat overweegt, zorg ervoor dat er zonder dat het geval (hoofdletters en kleine letters) voor de waarde van het kenmerk kunt wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="ff01c-147">Ongeldige kenmerken die mag niet worden gebruikt, zijn deze kenmerken met de naam van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="ff01c-148">In een huwelijk of echtscheiding, wordt de naam wilt wijzigen, verwacht dat niet is toegestaan voor dit kenmerk.</span><span class="sxs-lookup"><span data-stu-id="ff01c-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="ff01c-149">Dit is ook een reden waarom kenmerken zoals **userPrincipalName**, **mail**, en **targetAddress** zijn niet ook mogelijk om in de Azure AD Connect-installatiewizard te selecteren.</span><span class="sxs-lookup"><span data-stu-id="ff01c-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="ff01c-150">Deze kenmerken bevatten ook de ' @ ' is niet toegestaan in de sourceAnchor teken.</span><span class="sxs-lookup"><span data-stu-id="ff01c-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="ff01c-151">Het kenmerk sourceAnchor wijzigen</span><span class="sxs-lookup"><span data-stu-id="ff01c-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="ff01c-152">De waarde van het kenmerk sourceAnchor kan niet worden gewijzigd nadat het object is gemaakt in Azure AD en de identiteit is gesynchroniseerd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="ff01c-153">Daarom gelden de volgende beperkingen naar Azure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="ff01c-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="ff01c-154">Het kenmerk sourceAnchor kan alleen worden ingesteld tijdens de eerste installatie.</span><span class="sxs-lookup"><span data-stu-id="ff01c-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="ff01c-155">Als u de installatiewizard opnieuw, wordt deze optie is alleen-lezen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="ff01c-156">Als u moet deze instelling te wijzigen, moet u verwijderen en opnieuw installeren.</span><span class="sxs-lookup"><span data-stu-id="ff01c-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="ff01c-157">Als u een andere Azure AD Connect-server installeert, moet u hetzelfde sourceAnchor kenmerk zoals eerder gebruikt selecteren.</span><span class="sxs-lookup"><span data-stu-id="ff01c-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="ff01c-158">Als u eerder hebt gebruikt als DirSync en verplaatsen naar Azure AD Connect, dan moet u **objectGUID** omdat dat het kenmerk wordt gebruikt door DirSync.</span><span class="sxs-lookup"><span data-stu-id="ff01c-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="ff01c-159">Als de waarde voor sourceAnchor is gewijzigd na werd het object geëxporteerd naar Azure AD, vervolgens Azure AD Connect sync een fout genereert en niet in staat geen wijzigingen meer op dat object voordat u het probleem is opgelost en de sourceAnchor terug in de bronmap is gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="ff01c-160">Met behulp van msDS-ConsistencyGuid als sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="ff01c-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="ff01c-161">Standaard wordt in Azure AD Connect (versie 1.1.486.0 en ouder) objectGUID gebruikt als het kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="ff01c-162">ObjectGUID is door het systeem gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="ff01c-163">U kunt de waarde bij het maken van lokale AD-objecten niet opgeven.</span><span class="sxs-lookup"><span data-stu-id="ff01c-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="ff01c-164">Zoals wordt beschreven in de sectie [sourceAnchor](#sourceanchor), zijn er scenario's waarbij u moet de waarde sourceAnchor op te geven.</span><span class="sxs-lookup"><span data-stu-id="ff01c-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="ff01c-165">Als de scenario's van toepassing op u zijn, moet u een configureerbare AD-kenmerk (bijvoorbeeld msDS-ConsistencyGuid) gebruiken als het kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="ff01c-166">Azure AD Connect (versie 1.1.524.0 en na) nu vereenvoudigt het gebruik van msDS-ConsistencyGuid als kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="ff01c-167">Wanneer u deze functie gebruikt, configureert Azure AD Connect automatisch de synchronisatieregels naar:</span><span class="sxs-lookup"><span data-stu-id="ff01c-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="ff01c-168">Gebruik msDS-ConsistencyGuid als het kenmerk sourceAnchor voor gebruikersobjecten.</span><span class="sxs-lookup"><span data-stu-id="ff01c-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="ff01c-169">ObjectGUID wordt gebruikt voor andere objecttypen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="ff01c-170">Voor een gegeven on-premises AD-gebruiker object waarvan het kenmerk msDS-ConsistencyGuid niet is ingevuld, Azure AD Connect schrijfbewerkingen back-de object-GUID-waarde met het kenmerk msDS-ConsistencyGuid in de lokale Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ff01c-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="ff01c-171">Nadat het kenmerk msDS-ConsistencyGuid is ingevuld, wordt in Azure AD Connect daarna het object naar Azure AD exporteert.</span><span class="sxs-lookup"><span data-stu-id="ff01c-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="ff01c-172">Eenmaal een on-premises AD-object is geïmporteerd in Azure AD Connect (die is geïmporteerd in de ruimte van AD-Connector en de geschatte naar de Metaverse), u kunt de waarde sourceAnchor niet meer wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="ff01c-173">Om op te geven van de waarde sourceAnchor voor een opgegeven lokale AD object, het configureren van het kenmerk msDS-ConsistencyGuid voordat deze wordt geïmporteerd in Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ff01c-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="ff01c-174">Vereiste machtiging</span><span class="sxs-lookup"><span data-stu-id="ff01c-174">Permission required</span></span>
<span data-ttu-id="ff01c-175">Voor deze functie te gebruiken, moet de AD DS-account gebruikt om te synchroniseren met Active Directory lokale schrijfmachtiging voor het kenmerk msDS-ConsistencyGuid in de lokale Active Directory worden verleend.</span><span class="sxs-lookup"><span data-stu-id="ff01c-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="ff01c-176">Het inschakelen van de functie ConsistencyGuid - nieuwe installatie</span><span class="sxs-lookup"><span data-stu-id="ff01c-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="ff01c-177">U kunt het gebruik van ConsistencyGuid als sourceAnchor inschakelen tijdens de installatie van nieuwe.</span><span class="sxs-lookup"><span data-stu-id="ff01c-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="ff01c-178">Deze sectie worden zowel Express en aangepaste installatie meer informatie.</span><span class="sxs-lookup"><span data-stu-id="ff01c-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="ff01c-179">Alleen nieuwere versies van Azure AD Connect (1.1.524.0 en na) ondersteunt het gebruik van ConsistencyGuid als sourceAnchor tijdens de installatie van nieuwe.</span><span class="sxs-lookup"><span data-stu-id="ff01c-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="ff01c-180">Het inschakelen van de functie ConsistencyGuid</span><span class="sxs-lookup"><span data-stu-id="ff01c-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="ff01c-181">Op dit moment wordt kan de functie alleen worden ingeschakeld tijdens alleen nieuwe Azure AD Connect-installatie.</span><span class="sxs-lookup"><span data-stu-id="ff01c-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="ff01c-182">Snelle installatie</span><span class="sxs-lookup"><span data-stu-id="ff01c-182">Express Installation</span></span>
<span data-ttu-id="ff01c-183">Als u Azure AD Connect installeert met de snelle modus, wordt het meest geschikte AD-kenmerk moet worden gebruikt als het kenmerk sourceAnchor met behulp van de volgende logica automatisch bepaald door de Azure AD Connect-wizard:</span><span class="sxs-lookup"><span data-stu-id="ff01c-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="ff01c-184">De Azure AD Connect-wizard query eerst uw Azure AD-tenant voor het ophalen van de AD-kenmerk dat wordt gebruikt als het kenmerk sourceAnchor in de vorige Azure AD Connect-installatie (indien aanwezig).</span><span class="sxs-lookup"><span data-stu-id="ff01c-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="ff01c-185">Als deze informatie beschikbaar is, wordt in Azure AD Connect maakt gebruik van hetzelfde kenmerk voor AD.</span><span class="sxs-lookup"><span data-stu-id="ff01c-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="ff01c-186">Alleen nieuwere versies van Azure AD Connect (1.1.524.0 en na) slaat informatie over het kenmerk sourceAnchor in uw Azure AD-tenant die wordt gebruikt tijdens de installatie.</span><span class="sxs-lookup"><span data-stu-id="ff01c-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="ff01c-187">Oudere versies van Azure AD Connect niet.</span><span class="sxs-lookup"><span data-stu-id="ff01c-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="ff01c-188">Als u informatie over het kenmerk sourceAnchor gebruikt niet beschikbaar is, controleert de wizard de status van het kenmerk msDS-ConsistencyGuid in uw lokale Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ff01c-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="ff01c-189">Als het kenmerk van een object in de directory niet is geconfigureerd, gebruikt de wizard de msDS-ConsistencyGuid als het kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="ff01c-190">Als het kenmerk is geconfigureerd op een of meer objecten in Active directory, concludeert de wizard het kenmerk wordt gebruikt door andere toepassingen en is niet geschikt is als het kenmerk sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="ff01c-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="ff01c-191">De wizard valt in dat geval terug voor het gebruik van object-GUID als het kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="ff01c-192">Als het kenmerk sourceAnchor is besloten, slaat de wizard de informatie in uw Azure AD-tenant.</span><span class="sxs-lookup"><span data-stu-id="ff01c-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="ff01c-193">De informatie wordt gebruikt door toekomstige installatie van Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ff01c-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="ff01c-194">Wanneer de Express-installatie is voltooid, wordt de wizard informeert welk kenmerk is opgenomen als het kenmerk Bronanker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![Wizard informeert AD-kenmerk voor sourceAnchor verzameld](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="ff01c-196">Aangepaste installatie</span><span class="sxs-lookup"><span data-stu-id="ff01c-196">Custom installation</span></span>
<span data-ttu-id="ff01c-197">Als u Azure AD Connect installeert met de aangepaste modus, biedt de Azure AD Connect-wizard twee opties bij het kenmerk sourceAnchor configureren:</span><span class="sxs-lookup"><span data-stu-id="ff01c-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Aangepaste installatie - sourceAnchor configuratie](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="ff01c-199">Instelling</span><span class="sxs-lookup"><span data-stu-id="ff01c-199">Setting</span></span> | <span data-ttu-id="ff01c-200">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="ff01c-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="ff01c-201">Azure het bronanker voor mij laten beheren</span><span class="sxs-lookup"><span data-stu-id="ff01c-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="ff01c-202">Selecteer deze optie als u wilt dat Azure AD het kenmerk voor u selecteert.</span><span class="sxs-lookup"><span data-stu-id="ff01c-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="ff01c-203">Als u deze optie selecteert, Azure AD Connect-wizard past dezelfde [sourceAnchor kenmerk selectie logica wordt gebruikt tijdens de snelle installatie](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="ff01c-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="ff01c-204">Net als bij normale installatie, de wizard informeert u welk kenmerk is opgenomen als het kenmerk Bronanker nadat aangepaste installatie is voltooid.</span><span class="sxs-lookup"><span data-stu-id="ff01c-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="ff01c-205">Een specifiek kenmerk</span><span class="sxs-lookup"><span data-stu-id="ff01c-205">A specific attribute</span></span> | <span data-ttu-id="ff01c-206">Selecteer deze optie als u een bestaand AD-kenmerk opgeeft als het kenmerk sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="ff01c-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="ff01c-207">Het inschakelen van de functie ConsistencyGuid - bestaande implementatie</span><span class="sxs-lookup"><span data-stu-id="ff01c-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="ff01c-208">Als u een bestaande implementatie van Azure AD Connect dit objectGUID wordt gebruikt als het kenmerk Bronanker hebt, kunt u deze kunt overschakelen naar ConsistencyGuid te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ff01c-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="ff01c-209">Alleen nieuwere versies van Azure AD Connect (1.1.552.0 en na) ondersteunt overschakelen van ObjectGuid naar ConsistencyGuid als het kenmerk Bronanker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="ff01c-210">Overschakelen van objectGUID naar ConsistencyGuid als het kenmerk Bronanker:</span><span class="sxs-lookup"><span data-stu-id="ff01c-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="ff01c-211">De Azure AD Connect-wizard starten en klik op **configureren** naar het scherm taken.</span><span class="sxs-lookup"><span data-stu-id="ff01c-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="ff01c-212">Selecteer de **Bronanker configureren** taak optie en klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ff01c-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![ConsistencyGuid inschakelen voor bestaande implementatie - stap 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="ff01c-214">Voer uw referenties in Azure AD-beheerder en klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ff01c-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="ff01c-215">Azure AD Connect-wizard analyseert de status van het kenmerk msDS-ConsistencyGuid in uw lokale Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ff01c-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="ff01c-216">Als het kenmerk is niet geconfigureerd op een object in de directory, Azure AD Connect dat er geen andere toepassing momenteel wordt gebruikt door het kenmerk en is veilig om te gebruiken als het kenmerk Bronanker wordt afgesloten.</span><span class="sxs-lookup"><span data-stu-id="ff01c-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="ff01c-217">Klik op **volgende** om door te gaan.</span><span class="sxs-lookup"><span data-stu-id="ff01c-217">Click **Next** to continue.</span></span>

   ![ConsistencyGuid inschakelen voor bestaande implementatie - stap 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="ff01c-219">In de **gereed om te configureren** scherm, klikt u op **configureren** waarmee de configuratie wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![ConsistencyGuid inschakelen voor bestaande implementatie - stap 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="ff01c-221">Zodra de configuratie is voltooid, wordt de wizard geeft aan dat msDS-ConsistencyGuid nu als het kenmerk Bronanker wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ff01c-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![ConsistencyGuid inschakelen voor bestaande implementatie - stap 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="ff01c-223">Tijdens de analyse (stap 4) als het kenmerk is geconfigureerd op een of meer objecten in de map en de wizard concludeert de domeincontroller het kenmerk wordt gebruikt door een andere toepassing en een foutmelding zoals geïllustreerd in het onderstaande diagram.</span><span class="sxs-lookup"><span data-stu-id="ff01c-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="ff01c-224">Als u er zeker van bent dat het kenmerk wordt niet door bestaande toepassingen gebruikt, moet u contact op met ondersteuning voor meer informatie over het onderdrukken van de fout.</span><span class="sxs-lookup"><span data-stu-id="ff01c-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![ConsistencyGuid inschakelen voor bestaande implementatie - fout](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="ff01c-226">Gevolgen voor de AD FS of van derden federation-configuratie</span><span class="sxs-lookup"><span data-stu-id="ff01c-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="ff01c-227">Als u gebruikmaakt van Azure AD Connect beheren on-premises AD FS-implementatie, de Azure AD Connect de claimregels voor het gebruik van hetzelfde kenmerk voor AD als sourceAnchor automatisch bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="ff01c-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="ff01c-228">Dit zorgt ervoor dat de claim onveranderbare id genoemd is gegenereerd door AD FS consistent met de waarden sourceAnchor is geëxporteerd naar Azure AD is.</span><span class="sxs-lookup"><span data-stu-id="ff01c-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="ff01c-229">Als u AD FS buiten Azure AD Connect beheert, of u federatieservers van derden voor verificatie gebruikt, moet u handmatig de claimregels voor onveranderbare id genoemd claim consistent zijn met de waarden sourceAnchor is geëxporteerd naar Azure AD, zoals beschreven in artikel sectie bijwerken [wijzigen AD FS claimregels](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="ff01c-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="ff01c-230">Nadat de installatie voltooid is, retourneert de wizard de volgende waarschuwing:</span><span class="sxs-lookup"><span data-stu-id="ff01c-230">The wizard returns the following warning after installation completes:</span></span>

![Federatieconfiguratie van derden](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="ff01c-232">Nieuwe mappen toevoegen aan bestaande implementatie</span><span class="sxs-lookup"><span data-stu-id="ff01c-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="ff01c-233">Stel dat u Azure AD Connect hebt geïmplementeerd met de functie ConsistencyGuid is ingeschakeld en u wilt nu een andere directory toevoegen aan de implementatie.</span><span class="sxs-lookup"><span data-stu-id="ff01c-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="ff01c-234">Wanneer u de map toevoegen, controleert met Azure AD Connect-wizard de status van het kenmerk mSDS-ConsistencyGuid in de map.</span><span class="sxs-lookup"><span data-stu-id="ff01c-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="ff01c-235">Als het kenmerk is geconfigureerd op een of meer objecten in Active directory, de wizard het kenmerk wordt gebruikt door andere toepassingen en een foutmelding zoals geïllustreerd in het onderstaande diagram wordt afgesloten.</span><span class="sxs-lookup"><span data-stu-id="ff01c-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="ff01c-236">Als u er zeker van bent dat het kenmerk wordt niet door bestaande toepassingen gebruikt, moet u contact op met ondersteuning voor meer informatie over het onderdrukken van de fout.</span><span class="sxs-lookup"><span data-stu-id="ff01c-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Nieuwe mappen toevoegen aan bestaande implementatie](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="ff01c-238">Azure AD aanmelden</span><span class="sxs-lookup"><span data-stu-id="ff01c-238">Azure AD sign-in</span></span>
<span data-ttu-id="ff01c-239">Bij het integreren van uw on-premises directory met Azure AD, is het belangrijk om te begrijpen hoe de synchronisatie-instellingen invloed hebben op de gebruiker manier wordt geverifieerd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="ff01c-240">Azure AD gebruikt userPrincipalName (User Principal Name) voor het verifiëren van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="ff01c-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="ff01c-241">Wanneer u uw gebruikers synchroniseert, moet u het kenmerk moet worden gebruikt voor de waarde van userPrincipalName zorgvuldig kiezen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="ff01c-242">Het kenmerk voor userPrincipalName kiezen</span><span class="sxs-lookup"><span data-stu-id="ff01c-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="ff01c-243">Bij het selecteren van het kenmerk voor het ontwikkelen van controleren de waarde van de UPN om te worden gebruikt in Azure een</span><span class="sxs-lookup"><span data-stu-id="ff01c-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="ff01c-244">De kenmerkwaarden weer in overeenstemming zijn met de syntaxis van de UPN (RFC 822), die dat deze moet de indelingusername@domain</span><span class="sxs-lookup"><span data-stu-id="ff01c-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="ff01c-245">Het achtervoegsel in de waarden overeenkomt met een van de geverifieerde aangepaste domeinen in Azure AD</span><span class="sxs-lookup"><span data-stu-id="ff01c-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="ff01c-246">In de express-instellingen wordt de veronderstelde keuze is voor het kenmerk userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="ff01c-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="ff01c-247">Als het kenmerk userPrincipalName geen waarde u wilt dat gebruikers aan te melden bij Azure en vervolgens moet u **aangepaste installatie**.</span><span class="sxs-lookup"><span data-stu-id="ff01c-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="ff01c-248">Status van het aangepaste domein en UPN</span><span class="sxs-lookup"><span data-stu-id="ff01c-248">Custom domain state and UPN</span></span>
<span data-ttu-id="ff01c-249">Het is belangrijk om ervoor te zorgen dat er een geverifieerde domein voor het UPN-achtervoegsel is.</span><span class="sxs-lookup"><span data-stu-id="ff01c-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="ff01c-250">Johan is een gebruiker in contoso.com.</span><span class="sxs-lookup"><span data-stu-id="ff01c-250">John is a user in contoso.com.</span></span> <span data-ttu-id="ff01c-251">U wilt dat Jeroen gebruik van de lokale UPN john@contoso.com aan te melden bij Azure nadat u gebruikers aan uw Azure AD-directory contoso.onmicrosoft.com zijn gesynchroniseerd.</span><span class="sxs-lookup"><span data-stu-id="ff01c-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="ff01c-252">Om dit te doen, die u wilt toevoegen en verifiëren van contoso.com als een aangepast domein in Azure AD voordat u kunt beginnen met het synchroniseren van de gebruikers.</span><span class="sxs-lookup"><span data-stu-id="ff01c-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="ff01c-253">Als de UPN-achtervoegsel van Jan, bijvoorbeeld contoso.com is, komt niet overeen met een geverifieerde domeinnaam in Azure AD, vervolgens vervangen Azure AD door het UPN-achtervoegsel contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="ff01c-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="ff01c-254">Niet-routeerbaar on-premises domeinen en UPN voor Azure AD</span><span class="sxs-lookup"><span data-stu-id="ff01c-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="ff01c-255">Sommige organisaties hebben niet-routeerbare domeinen, zoals contoso.local of eenvoudige enkelvoudige domeinen zoals contoso.</span><span class="sxs-lookup"><span data-stu-id="ff01c-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="ff01c-256">U bent geen een niet-routeerbare domein verifiëren in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ff01c-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="ff01c-257">Azure AD Connect kunt synchroniseren met alleen een geverifieerde domeinnaam in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ff01c-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="ff01c-258">Wanneer u een Azure Active directory maakt, maakt u een routeerbaar domein dat standaarddomein voor uw Azure AD, bijvoorbeeld: contoso.onmicrosoft.com wordt.</span><span class="sxs-lookup"><span data-stu-id="ff01c-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="ff01c-259">Het wordt daarom nodig zijn om te controleren of een ander domein in een dergelijk scenario routeerbaar als u niet wilt synchroniseren naar het standaarddomein onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="ff01c-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="ff01c-260">Lees [uw aangepaste domeinnaam toevoegen aan Azure Active Directory](../active-directory-add-domain.md) voor meer informatie over het toevoegen en verifiëren van domeinen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="ff01c-261">Azure AD Connect detecteert als u in een niet-routeerbare domeinomgeving uitvoert en zou u op de juiste wijze van u wilt doorgaan met expresinstellingen waarschuwen.</span><span class="sxs-lookup"><span data-stu-id="ff01c-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="ff01c-262">Als u in een niet-routeerbare domein werkt, is het waarschijnlijk dat de UPN van de gebruikers niet-routeerbare achtervoegsels te hebben.</span><span class="sxs-lookup"><span data-stu-id="ff01c-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="ff01c-263">Bijvoorbeeld, als u worden uitgevoerd onder contoso.local, stelt Azure AD Connect u de aangepaste instellingen in plaats van met expresinstellingen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ff01c-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="ff01c-264">Met aangepaste instellingen voor zijn u opgeven van het kenmerk op dat moet worden gebruikt als de UPN aan te melden bij Azure nadat de gebruikers zijn gesynchroniseerd naar Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ff01c-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ff01c-265">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ff01c-265">Next steps</span></span>
<span data-ttu-id="ff01c-266">Lees meer over het [integreren van uw on-premises identiteiten met Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="ff01c-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
