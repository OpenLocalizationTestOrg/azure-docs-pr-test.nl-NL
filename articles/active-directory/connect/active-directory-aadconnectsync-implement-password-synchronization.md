---
title: Wachtwoordsynchronisatie met Azure AD Connect-synchronisatie implementeren | Microsoft Docs
description: Bevat informatie over hoe werkt Wachtwoordsynchronisatie en hoe u instelt.
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: db9b1578a235be9018fc1985cc75a0a05ee47b3a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="0ac97-103">Wachtwoordsynchronisatie met Azure AD Connect-synchronisatie implementeren</span><span class="sxs-lookup"><span data-stu-id="0ac97-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="0ac97-104">In dit artikel bevat informatie die u wilt synchroniseren van uw wachtwoorden van een lokale Active Directory-exemplaar naar een cloud-gebaseerde Azure Active Directory (Azure AD)-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="0ac97-104">This article provides information that you need to synchronize your user passwords from an on-premises Active Directory instance to a cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="0ac97-105">Wat is synchronisatie van wachtwoorden</span><span class="sxs-lookup"><span data-stu-id="0ac97-105">What is password synchronization</span></span>
<span data-ttu-id="0ac97-106">De kans dat u bent geblokkeerd toegang krijgen tot uw werk vanwege een vergeten wachtwoord is gerelateerd aan het aantal verschillende wachtwoorden die u moet onthouden.</span><span class="sxs-lookup"><span data-stu-id="0ac97-106">The probability that you're blocked from getting your work done due to a forgotten password is related to the number of different passwords you need to remember.</span></span> <span data-ttu-id="0ac97-107">De wachtwoorden die meer hoeft te onthouden is, hoe groter de kans op een vergeten.</span><span class="sxs-lookup"><span data-stu-id="0ac97-107">The more passwords you need to remember, the higher the probability to forget one.</span></span> <span data-ttu-id="0ac97-108">Vragen en oproepen over wachtwoorden en andere problemen met wachtwoord vereisen de meeste bronnen van de helpdesk.</span><span class="sxs-lookup"><span data-stu-id="0ac97-108">Questions and calls about password resets and other password-related issues demand the most helpdesk resources.</span></span>

<span data-ttu-id="0ac97-109">Wachtwoordsynchronisatie is een functie die wordt gebruikt voor het synchroniseren van gebruikerswachtwoorden van een lokale Active Directory-exemplaar naar een cloud-gebaseerde Azure AD-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="0ac97-109">Password synchronization is a feature used to synchronize user passwords from an on-premises Active Directory instance to a cloud-based Azure AD instance.</span></span>
<span data-ttu-id="0ac97-110">Gebruik deze functie aan te melden bij Azure AD-services zoals Office 365, Microsoft Intune, CRM Online en Azure Active Directory Domain Services (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="0ac97-110">Use this feature to sign in to Azure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="0ac97-111">U zich aanmeldt bij de service met behulp van hetzelfde wachtwoord dat u aan te melden bij uw lokale Active Directory-exemplaar gebruiken.</span><span class="sxs-lookup"><span data-stu-id="0ac97-111">You sign in to the service by using the same password you use to sign in to your on-premises Active Directory instance.</span></span>

![Wat is Azure AD Connect?](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="0ac97-113">Vermindert het aantal wachtwoorden, moeten uw gebruikers tot slechts één onderhouden.</span><span class="sxs-lookup"><span data-stu-id="0ac97-113">By reducing the number of passwords, your users need to maintain to just one.</span></span> <span data-ttu-id="0ac97-114">Wachtwoordsynchronisatie helpt u bij:</span><span class="sxs-lookup"><span data-stu-id="0ac97-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="0ac97-115">De productiviteit van uw gebruikers verbeteren.</span><span class="sxs-lookup"><span data-stu-id="0ac97-115">Improve the productivity of your users.</span></span>
* <span data-ttu-id="0ac97-116">Uw helpdesk kosten te verlagen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="0ac97-117">Ook als u besluit om te gebruiken [Federatie met Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), kunt u eventueel instellen Wachtwoordsynchronisatie als een back-up als uw AD FS-infrastructuur is mislukt.</span><span class="sxs-lookup"><span data-stu-id="0ac97-117">Also, if you decide to use [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="0ac97-118">Wachtwoordsynchronisatie is een uitbreiding op de functie voor directory-synchronisatie is geïmplementeerd door Azure AD Connect-synchronisatie.</span><span class="sxs-lookup"><span data-stu-id="0ac97-118">Password synchronization is an extension to the directory synchronization feature implemented by Azure AD Connect sync.</span></span> <span data-ttu-id="0ac97-119">Wachtwoordsynchronisatie gebruiken in uw omgeving, moet u naar:</span><span class="sxs-lookup"><span data-stu-id="0ac97-119">To use password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="0ac97-120">Azure AD Connect installeren.</span><span class="sxs-lookup"><span data-stu-id="0ac97-120">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="0ac97-121">Adreslijstsynchronisatie configureert tussen uw lokale Active Directory-exemplaar en uw Azure Active Directory-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="0ac97-121">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="0ac97-122">Wachtwoordsynchronisatie inschakelen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-122">Enable password synchronization.</span></span>

<span data-ttu-id="0ac97-123">Zie [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md) (Uw on-premises identiteiten integreren met Azure Active Directory) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="0ac97-123">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="0ac97-124">Zie voor meer informatie over Azure Active Directory Domain Services geconfigureerd voor FIPS en Wachtwoordsynchronisatie 'Wachtwoordsynchronisatie en FIPS' verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="0ac97-124">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="0ac97-125">Hoe werkt Wachtwoordsynchronisatie</span><span class="sxs-lookup"><span data-stu-id="0ac97-125">How password synchronization works</span></span>
<span data-ttu-id="0ac97-126">Wachtwoorden worden opgeslagen in de vorm van een weergave van de hash-waarde van het wachtwoord van de werkelijke gebruiker van de service Active Directory-domein.</span><span class="sxs-lookup"><span data-stu-id="0ac97-126">The Active Directory domain service stores passwords in the form of a hash value representation of the actual user password.</span></span> <span data-ttu-id="0ac97-127">Een hash-waarde is een resultaat van een wiskundige eenrichtingsfunctie (de *hash-algoritme*).</span><span class="sxs-lookup"><span data-stu-id="0ac97-127">A hash value is a result of a one-way mathematical function (the *hashing algorithm*).</span></span> <span data-ttu-id="0ac97-128">Er is geen methode om het resultaat van een eenrichtingsfunctie naar de versie van de tekst zonder opmaak van een wachtwoord terug te zetten.</span><span class="sxs-lookup"><span data-stu-id="0ac97-128">There is no method to revert the result of a one-way function to the plain text version of a password.</span></span> <span data-ttu-id="0ac97-129">U kunt een wachtwoord-hash niet gebruiken aan te melden bij uw on-premises netwerk.</span><span class="sxs-lookup"><span data-stu-id="0ac97-129">You cannot use a password hash to sign in to your on-premises network.</span></span>

<span data-ttu-id="0ac97-130">Als u wilt synchroniseren van uw wachtwoord extraheert Azure AD Connect-synchronisatie uw wachtwoord-hash van de lokale Active Directory-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="0ac97-130">To synchronize your password, Azure AD Connect sync extracts your password hash from the on-premises Active Directory instance.</span></span> <span data-ttu-id="0ac97-131">Verwerking van de extra beveiliging wordt toegepast op de wachtwoordhash voordat deze wordt gesynchroniseerd met de verificatieservice voor Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0ac97-131">Extra security processing is applied to the password hash before it is synchronized to the Azure Active Directory authentication service.</span></span> <span data-ttu-id="0ac97-132">Wachtwoorden worden gesynchroniseerd, op basis van een gebruiker en in chronologische volgorde.</span><span class="sxs-lookup"><span data-stu-id="0ac97-132">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="0ac97-133">De werkelijke gegevensstroom van het synchronisatieproces wachtwoord is vergelijkbaar met de synchronisatie van gebruikersgegevens, zoals DisplayName of e-mailadressen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-133">The actual data flow of the password synchronization process is similar to the synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="0ac97-134">Wachtwoorden worden echter vaker dan het standaard directory-synchronisatie-venster voor andere kenmerken gesynchroniseerd.</span><span class="sxs-lookup"><span data-stu-id="0ac97-134">However, passwords are synchronized more frequently than the standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="0ac97-135">Het synchronisatieproces wachtwoord wordt elke twee minuten uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="0ac97-135">The password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="0ac97-136">U kunt de frequentie van dit proces niet wijzigen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-136">You cannot modify the frequency of this process.</span></span> <span data-ttu-id="0ac97-137">Wanneer u een wachtwoord synchroniseert, overschrijft het bestaande wachtwoord van de cloud.</span><span class="sxs-lookup"><span data-stu-id="0ac97-137">When you synchronize a password, it overwrites the existing cloud password.</span></span>

<span data-ttu-id="0ac97-138">De eerste keer dat u de functie van de synchronisatie van wachtwoord inschakelt wordt uitgevoerd een initiële synchronisatie van de wachtwoorden van alle gebruikers die in het bereik.</span><span class="sxs-lookup"><span data-stu-id="0ac97-138">The first time you enable the password synchronization feature, it performs an initial synchronization of the passwords of all in-scope users.</span></span> <span data-ttu-id="0ac97-139">U kunt geen expliciet definiëren een subset van wachtwoorden van gebruikers die u wilt synchroniseren.</span><span class="sxs-lookup"><span data-stu-id="0ac97-139">You cannot explicitly define a subset of user passwords that you want to synchronize.</span></span>

<span data-ttu-id="0ac97-140">Wanneer u een on-premises wachtwoord wijzigt, is het bijgewerkte wachtwoord gesynchroniseerd, meestal binnen een paar minuten.</span><span class="sxs-lookup"><span data-stu-id="0ac97-140">When you change an on-premises password, the updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="0ac97-141">De synchronisatiefunctie wachtwoord mislukte synchronisatiepogingen wordt automatisch opnieuw geprobeerd.</span><span class="sxs-lookup"><span data-stu-id="0ac97-141">The password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="0ac97-142">Als er een fout optreedt tijdens een poging om te synchroniseren van een wachtwoord, wordt er een fout vastgelegd in de logboeken.</span><span class="sxs-lookup"><span data-stu-id="0ac97-142">If an error occurs during an attempt to synchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="0ac97-143">De synchronisatie van een wachtwoord heeft geen invloed op de gebruiker die momenteel is aangemeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-143">The synchronization of a password has no impact on the user  who is currently signed in.</span></span>
<span data-ttu-id="0ac97-144">De huidige sessie van de cloud-service wordt niet direct beïnvloed door een gesynchroniseerde wachtwoordwijziging die optreedt terwijl u bent aangemeld bij een service in de cloud.</span><span class="sxs-lookup"><span data-stu-id="0ac97-144">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in to a cloud service.</span></span> <span data-ttu-id="0ac97-145">Als u de cloudservice moet u opnieuw te verifiëren, moet u uw nieuwe wachtwoord opgeven.</span><span class="sxs-lookup"><span data-stu-id="0ac97-145">However, when the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

<span data-ttu-id="0ac97-146">Een gebruiker moet hun zakelijke referenties nogmaals invoeren om te verifiëren met Azure AD, ongeacht of ze bent aangemeld bij het bedrijfsnetwerk.</span><span class="sxs-lookup"><span data-stu-id="0ac97-146">A user must enter their corporate credentials a second time to authenticate to Azure AD, regardless of whether they're signed in to their corporate network.</span></span> <span data-ttu-id="0ac97-147">Deze patroon kan echter worden geminimaliseerd als de gebruiker selecteert de mij ondertekend behouden in het selectievakje (KMSI) bij aanmelding in.</span><span class="sxs-lookup"><span data-stu-id="0ac97-147">These pattern can be minimized, however, if the user selects the Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="0ac97-148">Deze selectie stelt een sessiecookie dat verificatie voor een korte periode omzeilt.</span><span class="sxs-lookup"><span data-stu-id="0ac97-148">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="0ac97-149">KMSI gedrag kan worden ingeschakeld of uitgeschakeld door de Azure AD-beheerder.</span><span class="sxs-lookup"><span data-stu-id="0ac97-149">KMSI behavior can be enabled or disabled by the Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="0ac97-150">Wachtwoordsynchronisatie wordt alleen ondersteund voor de gebruiker van het type object in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0ac97-150">Password sync is only supported for the object type user in Active Directory.</span></span> <span data-ttu-id="0ac97-151">Dit wordt niet ondersteund voor het objecttype iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="0ac97-151">It is not supported for the iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="0ac97-152">Gedetailleerde beschrijving van hoe Wachtwoordsynchronisatie werkt</span><span class="sxs-lookup"><span data-stu-id="0ac97-152">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="0ac97-153">Hieronder wordt beschreven diepgaande hoe werkt Wachtwoordsynchronisatie tussen Active Directory en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0ac97-153">The following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Gedetailleerde wachtwoord stroom](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="0ac97-155">Elke twee minuten de agent voor Wachtwoordsynchronisatie op de AD Connect-server aanvragen opgeslagen wachtwoord-hashes (het kenmerk unicodePwd) van een DC via de standaard [MS DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replicatie-protocol gebruikt voor het synchroniseren van gegevens tussen DC's.</span><span class="sxs-lookup"><span data-stu-id="0ac97-155">Every two minutes, the password synchronization agent on the AD Connect server requests stored password hashes (the unicodePwd attribute) from a DC via the standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used to synchronize data between DCs.</span></span> <span data-ttu-id="0ac97-156">Het serviceaccount moet een directorywijzigingen repliceren en repliceren Directory wijzigingen alle AD machtigingen (standaard op de installatie) tot de wachtwoord-hashes ophalen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-156">The service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) to obtain the password hashes.</span></span>
2. <span data-ttu-id="0ac97-157">Voordat u verzendt, de domeincontroller de wachtwoordhash MD4 versleuteld met behulp van een sleutel die is een [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash van de sessiesleutel RPC en een salt.</span><span class="sxs-lookup"><span data-stu-id="0ac97-157">Before sending, the DC encrypts the MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of the RPC session key and a salt.</span></span> <span data-ttu-id="0ac97-158">Vervolgens verzendt via RPC het resultaat naar de agent voor Wachtwoordsynchronisatie.</span><span class="sxs-lookup"><span data-stu-id="0ac97-158">It then sends the result to the password synchronization agent over RPC.</span></span> <span data-ttu-id="0ac97-159">De DC geeft ook de salt aan de agent voor Wachtwoordsynchronisatie met behulp van het protocol van de DC-replicatie, zodat de agent wordt de envelop ontsleutelen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-159">The DC also passes the salt to the synchronization agent by using the DC replication protocol, so the agent will be able to decrypt the envelope.</span></span>
3.  <span data-ttu-id="0ac97-160">Nadat de agent voor Wachtwoordsynchronisatie de versleutelde envelop is, gebruikt [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) en de salt voor het genereren van een sleutel voor het ontsleutelen van de ontvangen gegevens terug naar de oorspronkelijke MD4-indeling.</span><span class="sxs-lookup"><span data-stu-id="0ac97-160">After the password synchronization agent has the encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and the salt to generate a key to decrypt the received data back to its original MD4 format.</span></span> <span data-ttu-id="0ac97-161">Op geen enkel heeft de agent voor Wachtwoordsynchronisatie toegang tot het wachtwoord met ongecodeerde tekst.</span><span class="sxs-lookup"><span data-stu-id="0ac97-161">At no point does the password synchronization agent have access to the clear text password.</span></span> <span data-ttu-id="0ac97-162">De agent voor Wachtwoordsynchronisatie van gebruik van MD5 geldt uitsluitend voor replicatie protocol compatibiliteit met de domeincontroller en wordt alleen gebruikt on-premises tussen de domeincontroller en de agent voor Wachtwoordsynchronisatie.</span><span class="sxs-lookup"><span data-stu-id="0ac97-162">The password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with the DC, and it is only used on premises between the DC and the password synchronization agent.</span></span>
4.  <span data-ttu-id="0ac97-163">De agent voor Wachtwoordsynchronisatie breidt de 16-bytes binary wachtwoordhash 64 bytes door eerst te converteren back-the-hash naar een hexadecimale tekenreeks van 32-byte, vervolgens deze tekenreeks te converteren naar binair met UTF-16-codering.</span><span class="sxs-lookup"><span data-stu-id="0ac97-163">The password synchronization agent expands the 16-byte binary password hash to 64 bytes by first converting the hash to a 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="0ac97-164">De agent voor Wachtwoordsynchronisatie voegt een salt die bestaan uit een lengte in 10 bytes salt, naar de 64-bytes binary naar de oorspronkelijke hash verder te beschermen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-164">The password synchronization agent adds a salt, consisting of a 10-byte length salt, to the 64-byte binary to further protect the original hash.</span></span>
6.  <span data-ttu-id="0ac97-165">De agent voor Wachtwoordsynchronisatie combineert de MD4-hash plus salt en ingangen in de [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) functie.</span><span class="sxs-lookup"><span data-stu-id="0ac97-165">The password synchronization agent then combines the MD4 hash plus salt, and inputs it into the [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="0ac97-166">1000 herhalingen van de [HMAC SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) sleutelhash hash-algoritme wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="0ac97-166">1000 iterations of the [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="0ac97-167">De agent voor Wachtwoordsynchronisatie de resulterende 32-byte-hash heeft, worden zowel de salt en het aantal iteraties SHA256 ernaar (voor gebruik door Azure AD) en brengt de tekenreeks van Azure AD Connect naar Azure AD via SSL.</span><span class="sxs-lookup"><span data-stu-id="0ac97-167">The password synchronization agent takes the resulting 32-byte hash, concatenates both the salt and the number of SHA256 iterations to it (for use by Azure AD), then transmits the string from Azure AD Connect to Azure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="0ac97-168">Wanneer een gebruiker wil zich aanmelden bij Azure AD en hun wachtwoord invoert, wordt het wachtwoord uitvoeren via de dezelfde MD4 + salt + PBKDF2 + HMAC SHA256-proces.</span><span class="sxs-lookup"><span data-stu-id="0ac97-168">When a user attempts to sign in to Azure AD and enters their password, the password is run through the same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="0ac97-169">Als de resulterende hash overeenkomt met de hash die is opgeslagen in Azure AD, wordt de gebruiker het juiste wachtwoord heeft ingevoerd en is geverifieerd.</span><span class="sxs-lookup"><span data-stu-id="0ac97-169">If the resulting hash matches the hash stored in Azure AD, the user has entered the correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="0ac97-170">De oorspronkelijke MD4-hash is niet verzonden naar Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0ac97-170">The original MD4 hash is not transmitted to Azure AD.</span></span> <span data-ttu-id="0ac97-171">In plaats daarvan wordt de SHA256-hash van de oorspronkelijke MD4-hash verzonden.</span><span class="sxs-lookup"><span data-stu-id="0ac97-171">Instead, the SHA256 hash of the original MD4 hash is transmitted.</span></span> <span data-ttu-id="0ac97-172">Worden als gevolg hiervan, als de hash die is opgeslagen in Azure AD wordt verkregen, deze kan niet gebruikt in een lokale pass-the-hash-aanval.</span><span class="sxs-lookup"><span data-stu-id="0ac97-172">As a result, if the hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="0ac97-173">Hoe werkt Wachtwoordsynchronisatie met Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="0ac97-173">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="0ac97-174">U kunt de functie wachtwoord synchronisatie ook gebruiken om te synchroniseren van uw on-premises wachtwoorden te [Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0ac97-174">You can also use the password synchronization feature to synchronize your on-premises passwords to [Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="0ac97-175">In dit scenario verifieert het Azure Active Directory Domain Services-exemplaar uw gebruikers in de cloud met alle methoden die beschikbaar zijn in uw lokale Active Directory-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="0ac97-175">In this scenario, the Azure Active Directory Domain Services instance authenticates your users in the cloud with all the methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="0ac97-176">De ervaring van dit scenario is vergelijkbaar met behulp van de Active Directory-migratie (ADMT) in een on-premises omgeving.</span><span class="sxs-lookup"><span data-stu-id="0ac97-176">The experience of this scenario is similar to using the Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="0ac97-177">Beveiligingsoverwegingen</span><span class="sxs-lookup"><span data-stu-id="0ac97-177">Security considerations</span></span>
<span data-ttu-id="0ac97-178">Bij het synchroniseren van wachtwoorden, wordt de tekst zonder opmaak-versie van uw wachtwoord niet blootgesteld aan de functie wachtwoord synchronisatie naar Azure AD of een van de bijbehorende services.</span><span class="sxs-lookup"><span data-stu-id="0ac97-178">When synchronizing passwords, the plain-text version of your password is not exposed to the password synchronization feature, to Azure AD, or any of the associated services.</span></span>

<span data-ttu-id="0ac97-179">Gebruikersverificatie vindt plaats met Azure AD in plaats van op basis van de Active Directory-exemplaar van het bedrijf.</span><span class="sxs-lookup"><span data-stu-id="0ac97-179">User authentication takes place against Azure AD rather than against the organization's own Active Directory instance.</span></span> <span data-ttu-id="0ac97-180">Als uw organisatie opmerkingen over de wachtwoordgegevens in een formulier van het bedrijf verlaten, overweeg dan het feit dat de wachtwoordgegevens SHA256 in Azure AD opgeslagen--is een hash van de oorspronkelijke MD4-hash--veel veiliger is dan wat wordt opgeslagen in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0ac97-180">If your organization has concerns about password data in any form leaving the premises, consider the fact that the SHA256 password data stored in Azure AD--a hash of the original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="0ac97-181">Verder, omdat deze SHA256-hash kan niet worden ontsleuteld, het niet kan worden teruggebracht naar Active Directory-omgeving van de organisatie en weergegeven als een geldige gebruiker-wachtwoord in een pass-the-hash-aanval.</span><span class="sxs-lookup"><span data-stu-id="0ac97-181">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back to the organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="0ac97-182">Overwegingen bij het beleid van wachtwoord</span><span class="sxs-lookup"><span data-stu-id="0ac97-182">Password policy considerations</span></span>
<span data-ttu-id="0ac97-183">Er zijn twee soorten beleid voor wachtwoorden die worden beïnvloed door Wachtwoordsynchronisatie inschakelen:</span><span class="sxs-lookup"><span data-stu-id="0ac97-183">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="0ac97-184">Beleid voor wachtwoordcomplexiteit</span><span class="sxs-lookup"><span data-stu-id="0ac97-184">Password complexity policy</span></span>
* <span data-ttu-id="0ac97-185">Vervalbeleid voor wachtwoorden</span><span class="sxs-lookup"><span data-stu-id="0ac97-185">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="0ac97-186">Beleid voor wachtwoordcomplexiteit</span><span class="sxs-lookup"><span data-stu-id="0ac97-186">Password complexity policy</span></span>  
<span data-ttu-id="0ac97-187">Als Wachtwoordsynchronisatie is ingeschakeld, overschrijven de instellingen voor de complexiteit van wachtwoordbeleid in uw lokale Active Directory-exemplaar complexiteit beleid in de cloud voor gesynchroniseerde gebruikers.</span><span class="sxs-lookup"><span data-stu-id="0ac97-187">When password synchronization is enabled, the password complexity policies in your on-premises Active Directory instance override complexity policies in the cloud for synchronized users.</span></span> <span data-ttu-id="0ac97-188">U kunt alle geldige wachtwoorden van uw lokale Active Directory-exemplaar gebruiken voor toegang tot Azure AD-services.</span><span class="sxs-lookup"><span data-stu-id="0ac97-188">You can use all of the valid passwords from your on-premises Active Directory instance to access Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="0ac97-189">Wachtwoorden voor gebruikers die rechtstreeks in de cloud zijn gemaakt nog steeds worden wachtwoordbeleid zoals gedefinieerd in de cloud.</span><span class="sxs-lookup"><span data-stu-id="0ac97-189">Passwords for users that are created directly in the cloud are still subject to password policies as defined in the cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="0ac97-190">Vervalbeleid voor wachtwoorden</span><span class="sxs-lookup"><span data-stu-id="0ac97-190">Password expiration policy</span></span>  
<span data-ttu-id="0ac97-191">Als een gebruiker zich in het bereik van de synchronisatie van wachtwoorden, het wachtwoord voor de cloud-account is ingesteld op *nooit verlopen*.</span><span class="sxs-lookup"><span data-stu-id="0ac97-191">If a user is in the scope of password synchronization, the cloud account password is set to *Never Expire*.</span></span>

<span data-ttu-id="0ac97-192">U kunt blijven aan te melden bij uw cloudservices verkregen met behulp van een gesynchroniseerde wachtwoord dat is verlopen in uw on-premises omgeving.</span><span class="sxs-lookup"><span data-stu-id="0ac97-192">You can continue to sign in to your cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="0ac97-193">Uw wachtwoord cloud wordt bijgewerkt zodra die u het wachtwoord in de on-premises omgeving wijzigen.</span><span class="sxs-lookup"><span data-stu-id="0ac97-193">Your cloud password is updated the next time you change the password in the on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="0ac97-194">Account verloopt</span><span class="sxs-lookup"><span data-stu-id="0ac97-194">Account expiration</span></span>
<span data-ttu-id="0ac97-195">Als uw organisatie gebruikmaakt van het kenmerk accountExpires als onderdeel van Gebruikersaccountbeheer, let er dan voor dat dit kenmerk is niet gesynchroniseerd naar Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0ac97-195">If your organization uses the accountExpires attribute as part of user account management, be aware that this attribute is not synchronized to Azure AD.</span></span> <span data-ttu-id="0ac97-196">Als gevolg hiervan wordt verlopen Active Directory-account in een omgeving die is geconfigureerd voor Wachtwoordsynchronisatie nog steeds actief zijn in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0ac97-196">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="0ac97-197">We raden aan dat als het account is verlopen, een werkstroomactie moet worden geactiveerd door een PowerShell-script waarmee de gebruiker Azure AD-account worden uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-197">We recommend that if the account is expired, a workflow action should trigger a PowerShell script that disables the user's Azure AD account.</span></span> <span data-ttu-id="0ac97-198">Als u daarentegen wanneer het account is ingeschakeld, moet de Azure AD-exemplaar worden ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-198">Conversely, when the account is turned on, the Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="0ac97-199">Gesynchroniseerde wachtwoorden overschrijven</span><span class="sxs-lookup"><span data-stu-id="0ac97-199">Overwrite synchronized passwords</span></span>
<span data-ttu-id="0ac97-200">Een beheerder kan handmatig uw wachtwoord opnieuw instellen met behulp van Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0ac97-200">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="0ac97-201">In dit geval wordt het nieuwe wachtwoord overschrijft uw gesynchroniseerde wachtwoord en alle wachtwoordbeleidsregels gedefinieerd in de cloud worden toegepast op het nieuwe wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="0ac97-201">In this case, the new password overrides your synchronized password, and all password policies defined in the cloud are applied to the new password.</span></span>

<span data-ttu-id="0ac97-202">Als u uw on-premises wachtwoord wijzigt, het nieuwe wachtwoord is gesynchroniseerd met de cloud en heeft deze voorrang op de handmatig bijgewerkte wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="0ac97-202">If you change your on-premises password again, the new password is synchronized to the cloud, and it overrides the manually updated password.</span></span>

<span data-ttu-id="0ac97-203">De synchronisatie van een wachtwoord heeft geen invloed op de Azure-gebruiker die is aangemeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-203">The synchronization of a password has no impact on the Azure user who is signed in.</span></span> <span data-ttu-id="0ac97-204">De huidige sessie van de cloud-service wordt niet direct beïnvloed door een gesynchroniseerde wachtwoordwijziging die optreedt terwijl u bent aangemeld bij een service in de cloud.</span><span class="sxs-lookup"><span data-stu-id="0ac97-204">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in to a cloud service.</span></span> <span data-ttu-id="0ac97-205">KMSI breidt de duur van dit verschil.</span><span class="sxs-lookup"><span data-stu-id="0ac97-205">KMSI extends the duration of this difference.</span></span> <span data-ttu-id="0ac97-206">Wanneer de cloudservice u opnieuw te verifiëren moet, moet u uw nieuwe wachtwoord op te geven.</span><span class="sxs-lookup"><span data-stu-id="0ac97-206">When the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="0ac97-207">Extra voordelen</span><span class="sxs-lookup"><span data-stu-id="0ac97-207">Additional advantages</span></span>

- <span data-ttu-id="0ac97-208">Wachtwoordsynchronisatie is over het algemeen eenvoudiger te implementeren dan een federation-service.</span><span class="sxs-lookup"><span data-stu-id="0ac97-208">Generally, password synchronization is simpler to implement than a federation service.</span></span> <span data-ttu-id="0ac97-209">Deze geen extra servers vereist en elimineert de afhankelijkheid van een maximaal beschikbare federation-service om gebruikers te verifiëren.</span><span class="sxs-lookup"><span data-stu-id="0ac97-209">It doesn't require any additional servers, and eliminates dependence on a highly available federation service to authenticate users.</span></span> 
- <span data-ttu-id="0ac97-210">Wachtwoordsynchronisatie kan ook worden ingeschakeld naast federatieve.</span><span class="sxs-lookup"><span data-stu-id="0ac97-210">Password synchronization can also be enabled in addition to federation.</span></span> <span data-ttu-id="0ac97-211">Worden kan gebruikt als terugval als een storing optreedt in uw federatieservice.</span><span class="sxs-lookup"><span data-stu-id="0ac97-211">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="0ac97-212">Wachtwoordsynchronisatie inschakelen</span><span class="sxs-lookup"><span data-stu-id="0ac97-212">Enable password synchronization</span></span>
<span data-ttu-id="0ac97-213">Wanneer u Azure AD Connect installeert met behulp van de **Expresinstellingen** , Wachtwoordsynchronisatie is automatisch ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-213">When you install Azure AD Connect by using the **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="0ac97-214">Zie voor meer informatie [aan de slag met Azure AD Connect met expresinstellingen](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="0ac97-214">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="0ac97-215">Als u aangepaste instellingen wanneer u Azure AD Connect installeert, is Wachtwoordsynchronisatie beschikbaar op de aanmeldingspagina van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="0ac97-215">If you use custom settings when you install Azure AD Connect, password synchronization is available on the user sign-in page.</span></span> <span data-ttu-id="0ac97-216">Zie voor meer informatie [aangepaste installatie van Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="0ac97-216">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Wachtwoordsynchronisatie inschakelen](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="0ac97-218">Wachtwoordsynchronisatie en FIPS</span><span class="sxs-lookup"><span data-stu-id="0ac97-218">Password synchronization and FIPS</span></span>
<span data-ttu-id="0ac97-219">Als uw server is vergrendeld volgens Federal Information Processing Standard (FIPS), wordt MD5 uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="0ac97-219">If your server has been locked down according to Federal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="0ac97-220">**Als u wilt MD5 voor wachtwoordsynchronisatie inschakelen, moet u de volgende stappen uitvoeren:**</span><span class="sxs-lookup"><span data-stu-id="0ac97-220">**To enable MD5 for password synchronization, perform the following steps:**</span></span>

1. <span data-ttu-id="0ac97-221">Ga naar %programfiles%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="0ac97-221">Go to %programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="0ac97-222">Open miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="0ac97-222">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="0ac97-223">Ga naar het knooppunt configuration/runtime aan het einde van het bestand.</span><span class="sxs-lookup"><span data-stu-id="0ac97-223">Go to the configuration/runtime node at the end of the file.</span></span>
4. <span data-ttu-id="0ac97-224">Het volgende knooppunt toevoegen:`<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="0ac97-224">Add the following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="0ac97-225">Sla uw wijzigingen op.</span><span class="sxs-lookup"><span data-stu-id="0ac97-225">Save your changes.</span></span>

<span data-ttu-id="0ac97-226">Voor een verwijzing naar is dit fragment wat er moet eruitzien als:</span><span class="sxs-lookup"><span data-stu-id="0ac97-226">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="0ac97-227">Zie voor meer informatie over beveiliging en FIPS [AAD Password Sync, versleuteling en FIPS-naleving](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span><span class="sxs-lookup"><span data-stu-id="0ac97-227">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="0ac97-228">Probleem met Wachtwoordsynchronisatie oplossen</span><span class="sxs-lookup"><span data-stu-id="0ac97-228">Troubleshoot password synchronization</span></span>
<span data-ttu-id="0ac97-229">Als u problemen met synchronisatie van wachtwoorden hebt, raadpleegt u [Wachtwoordsynchronisatie oplossen](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="0ac97-229">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0ac97-230">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="0ac97-230">Next steps</span></span>
* [<span data-ttu-id="0ac97-231">Azure AD Connect-synchronisatie: Synchronisatieopties voor aanpassen</span><span class="sxs-lookup"><span data-stu-id="0ac97-231">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="0ac97-232">Uw on-premises identiteiten integreren met Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="0ac97-232">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
