---
title: aaaSecurity overwegingen voor Azure AD-toepassingsproxy | Microsoft Docs
description: Bevat informatie over de beveiligingsoverwegingen voor het gebruik van Azure AD-toepassingsproxy
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="c98f6-103">Beveiligingsoverwegingen voor toegang tot apps op afstand met Azure AD-toepassingsproxy</span><span class="sxs-lookup"><span data-stu-id="c98f6-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="c98f6-104">Dit artikel wordt uitgelegd hoe Azure Active Directory-toepassingsproxy voorziet in een beveiligde service voor het publiceren en externe toegang tot uw toepassingen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="c98f6-105">Hallo volgende diagram toont hoe Azure AD kunt veilige externe toegang tooyour on-premises toepassingen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagram van veilige externe toegang via Azure AD-toepassingsproxy](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="c98f6-107">De voordelen van beveiliging</span><span class="sxs-lookup"><span data-stu-id="c98f6-107">Security benefits</span></span>

<span data-ttu-id="c98f6-108">Azure AD-toepassingsproxy biedt Hallo volgende beveiligingsvoordelen:</span><span class="sxs-lookup"><span data-stu-id="c98f6-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="c98f6-109">Geverifieerde toegang</span><span class="sxs-lookup"><span data-stu-id="c98f6-109">Authenticated access</span></span> 

<span data-ttu-id="c98f6-110">Als u toouse Azure Active Directory vooraf-verificatie kiest, klikt u vervolgens alleen geverifieerde verbindingen hebben toegang tot uw netwerk.</span><span class="sxs-lookup"><span data-stu-id="c98f6-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="c98f6-111">Azure AD-toepassingsproxy is afhankelijk van hello Azure AD-beveiligingstokenservice (STS) voor alle verificatie.</span><span class="sxs-lookup"><span data-stu-id="c98f6-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="c98f6-112">Vooraf-verificatie, blokkeert door de aard een groot aantal anonieme aanvallen, omdat alleen geauthenticeerde identiteiten Hallo back-endtoepassing kunnen openen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="c98f6-113">Als u Passthrough als uw methode voor verificatie vooraf kiest, kunt u voordeel niet ophalen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="c98f6-114">Voorwaardelijke toegang</span><span class="sxs-lookup"><span data-stu-id="c98f6-114">Conditional access</span></span>

<span data-ttu-id="c98f6-115">Rijkere beleid besturingselementen voordat verbindingen tooyour netwerk tot stand worden gebracht van toepassing.</span><span class="sxs-lookup"><span data-stu-id="c98f6-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="c98f6-116">Met [voorwaardelijke toegang](active-directory-conditional-access-azuread-connected-apps.md), kunt u beperkingen op welk verkeer wordt toegestaan tooaccess uw back-end-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="c98f6-117">Kunt u beleidsregels die aanmeldingen op basis van locatie, sterkte van verificatie en gebruikersprofiel risico beperken.</span><span class="sxs-lookup"><span data-stu-id="c98f6-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="c98f6-118">U kunt beleid voor voorwaardelijke toegang tooconfigure multi-Factor Authentication ook gebruiken voor het toevoegen van een andere laag van beveiliging tooyour gebruikersverificaties.</span><span class="sxs-lookup"><span data-stu-id="c98f6-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="c98f6-119">Beëindiging van verkeer</span><span class="sxs-lookup"><span data-stu-id="c98f6-119">Traffic termination</span></span>

<span data-ttu-id="c98f6-120">Al het verkeer wordt beëindigd in Hallo cloud.</span><span class="sxs-lookup"><span data-stu-id="c98f6-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="c98f6-121">Omdat Azure AD-toepassingsproxy is een reverse proxy, wordt alle verkeer tooback-end-toepassingen op Hallo-service beëindigd.</span><span class="sxs-lookup"><span data-stu-id="c98f6-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="c98f6-122">Hallo sessie kunt ophalen opnieuw tot stand gebracht met de Hallo back-endserver, wat betekent dat uw back-endservers niet zijn beschikbaar gesteld toodirect HTTP-verkeer.</span><span class="sxs-lookup"><span data-stu-id="c98f6-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="c98f6-123">Deze configuratie betekent dat u beter beschermd zijn tegen gerichte aanvallen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="c98f6-124">Alle gebruikers de toegang is uitgaand</span><span class="sxs-lookup"><span data-stu-id="c98f6-124">All access is outbound</span></span> 

<span data-ttu-id="c98f6-125">U hoeft niet tooopen binnenkomende verbindingen toohello bedrijfsnetwerk.</span><span class="sxs-lookup"><span data-stu-id="c98f6-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="c98f6-126">Application Proxy connectors alleen uitgaande verbindingen toohello Azure AD-toepassingsproxy service, wat betekent dat niet tooopen firewallpoorten voor binnenkomende verbindingen hoeft gebruiken.</span><span class="sxs-lookup"><span data-stu-id="c98f6-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="c98f6-127">Traditionele proxy's vereist een perimeternetwerk (ook wel bekend als *DMZ*, *gedemilitariseerde zone*, of *gescreend subnet*) en toegang toounauthenticated toegestaan verbindingen aan de rand van Hallo-netwerk.</span><span class="sxs-lookup"><span data-stu-id="c98f6-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="c98f6-128">Dit scenario moet u veel aanvullende investeringen in de webtoepassing firewall-producten tooanalyze verkeer en bieden aanvullende bescherming toohello omgeving.</span><span class="sxs-lookup"><span data-stu-id="c98f6-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="c98f6-129">Met toepassingsproxy hoeft u niet een perimeternetwerk omdat alle verbindingen uitgaande zijn en plaats via een beveiligd kanaal vindt.</span><span class="sxs-lookup"><span data-stu-id="c98f6-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="c98f6-130">Zie voor meer informatie over connectors [inzicht in Azure AD-toepassingsproxy connectors](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="c98f6-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="c98f6-131">Cloud-scale analytics en machine learning</span><span class="sxs-lookup"><span data-stu-id="c98f6-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="c98f6-132">Geavanceerde beveiliging worden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="c98f6-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="c98f6-133">Omdat deze deel uitmaakt van Azure Active Directory, kunnen gebruikmaken van toepassingsproxy [Azure AD Identity Protection](active-directory-identityprotection.md)met machine learning gebaseerde intelligence en gegevens uit Microsoft Security Response Center Hallo en Digital Crimes Unit.</span><span class="sxs-lookup"><span data-stu-id="c98f6-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="c98f6-134">Samen we proactief identificeren waarmee is geknoeid en bieden real-timebeveiliging van aanmeldingen met een hoog risico. We rekening gehouden met meerdere factoren, zoals toegang vanaf geïnfecteerde apparaten, via anonymizing netwerken, en vanaf locaties ongebruikelijk zijn en onwaarschijnlijk.</span><span class="sxs-lookup"><span data-stu-id="c98f6-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="c98f6-135">Veel van deze rapporten en gebeurtenissen zijn al beschikbaar via een API voor de integratie met uw security information en event management (SIEM)-systemen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="c98f6-136">Externe toegang als een service</span><span class="sxs-lookup"><span data-stu-id="c98f6-136">Remote access as a service</span></span>

<span data-ttu-id="c98f6-137">U hebt geen tooworry over het onderhouden en patchen lokale servers.</span><span class="sxs-lookup"><span data-stu-id="c98f6-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="c98f6-138">Niet-gepatchte software nog steeds accounts voor een groot aantal aanvallen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="c98f6-139">Azure AD-toepassingsproxy is een Internet-scale-service die Microsoft eigenaar is, zodat u altijd de meest recente beveiligingspatches Hallo en upgrades.</span><span class="sxs-lookup"><span data-stu-id="c98f6-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="c98f6-140">tooimprove hello beveiliging van toepassingen die zijn gepubliceerd door Azure AD-toepassingsproxy, we blokkeren web crawler robots indexeren en uw toepassingen wilt archiveren.</span><span class="sxs-lookup"><span data-stu-id="c98f6-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="c98f6-141">Elke keer web crawler robot probeert op te halen van de robot-instellingen voor een gepubliceerde app toepassingsproxy geantwoord met een robots.txt-bestand met `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="c98f6-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="c98f6-142">Achter de schermen Hallo</span><span class="sxs-lookup"><span data-stu-id="c98f6-142">Under hello hood</span></span>

<span data-ttu-id="c98f6-143">Azure AD-toepassingsproxy bestaat uit twee delen:</span><span class="sxs-lookup"><span data-stu-id="c98f6-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="c98f6-144">Hallo-cloudservice: deze service wordt uitgevoerd in Azure, en is waar Hallo externe client/gebruiker verbindingen zijn gemaakt.</span><span class="sxs-lookup"><span data-stu-id="c98f6-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="c98f6-145">[Hallo on-premises-connector](application-proxy-understand-connectors.md): een onderdeel van de lokale, Hallo connector luistert naar aanvragen van hello Azure AD-toepassingsproxy service en verbindingen toohello interne toepassingen verwerkt.</span><span class="sxs-lookup"><span data-stu-id="c98f6-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="c98f6-146">Een stroom tussen Hallo-connector en Hallo toepassingsproxy service tot stand wordt gebracht wanneer:</span><span class="sxs-lookup"><span data-stu-id="c98f6-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="c98f6-147">Hallo connector is eerst ingesteld.</span><span class="sxs-lookup"><span data-stu-id="c98f6-147">hello connector is first set up.</span></span>
* <span data-ttu-id="c98f6-148">Hallo connector haalt de configuratie-informatie uit Hallo service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="c98f6-149">Een gebruiker toegang krijgt tot een gepubliceerde toepassing.</span><span class="sxs-lookup"><span data-stu-id="c98f6-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="c98f6-150">Alle communicatie vindt plaats via SSL en ze altijd afkomstig van Hallo connector toohello service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="c98f6-151">Hallo-service is alleen uitgaand.</span><span class="sxs-lookup"><span data-stu-id="c98f6-151">hello service is outbound only.</span></span>

<span data-ttu-id="c98f6-152">Hallo-connector maakt gebruik van een client certificate tooauthenticate toohello service voor toepassingsproxy voor bijna alle aanroepen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="c98f6-153">Hallo alleen wordt uitzondering toothis stap van de eerste installatie hello, waarbij het clientcertificaat Hallo tot stand is gebracht.</span><span class="sxs-lookup"><span data-stu-id="c98f6-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="c98f6-154">Hallo-connector installeren</span><span class="sxs-lookup"><span data-stu-id="c98f6-154">Installing hello connector</span></span>

<span data-ttu-id="c98f6-155">Wanneer eerst Hallo connector instelt, plaatsvinden Hallo na stroom gebeurtenissen:</span><span class="sxs-lookup"><span data-stu-id="c98f6-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="c98f6-156">registratie Hallo-toohello connectorservice wordt uitgevoerd als onderdeel van installatie Hallo van Hallo-connector.</span><span class="sxs-lookup"><span data-stu-id="c98f6-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="c98f6-157">Gebruikers zijn na vragen aan gebruiker tooenter hun Azure AD-referenties.</span><span class="sxs-lookup"><span data-stu-id="c98f6-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="c98f6-158">Het token dat is verkregen van deze verificatie wordt vervolgens toohello Azure AD-toepassingsproxy service weergegeven.</span><span class="sxs-lookup"><span data-stu-id="c98f6-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="c98f6-159">Hallo service voor toepassingsproxy evalueert Hallo-token.</span><span class="sxs-lookup"><span data-stu-id="c98f6-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="c98f6-160">Hiermee zorgt u ervoor dat Hallo-gebruiker is een bedrijfsbeheerder binnen Hallo-tenant die Hallo token is uitgegeven voor.</span><span class="sxs-lookup"><span data-stu-id="c98f6-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="c98f6-161">Als het Hallo-gebruiker is geen beheerder, wordt Hallo-proces beëindigd.</span><span class="sxs-lookup"><span data-stu-id="c98f6-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="c98f6-162">Hallo-connector een certificaataanvraag client genereert en wordt doorgegeven, samen met de Hallo token, toohello service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="c98f6-163">Hallo-service controleert of Hallo-token op zijn beurt en Hallo-clientaanvraag certificaat ondertekent.</span><span class="sxs-lookup"><span data-stu-id="c98f6-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="c98f6-164">Hallo-connector gebruikt Hallo clientcertificaat voor toekomstige communicatie met de Hallo service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="c98f6-165">Hallo-connector voert een initiële pull van configuratiegegevens Hallo-systeem van Hallo-service met behulp van het clientcertificaat en het is nu gereed tootake aanvragen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="c98f6-166">Hallo-configuratie-instellingen bijwerken</span><span class="sxs-lookup"><span data-stu-id="c98f6-166">Updating hello configuration settings</span></span>

<span data-ttu-id="c98f6-167">Wanneer de service voor toepassingsproxy Hallo Hallo configuratie-instellingen bijwerken, plaatsvinden Hallo na stroom gebeurtenissen:</span><span class="sxs-lookup"><span data-stu-id="c98f6-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="c98f6-168">toohello configuratie eindpunt in de service voor toepassingsproxy Hallo verbindt Hallo connector met behulp van het clientcertificaat.</span><span class="sxs-lookup"><span data-stu-id="c98f6-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="c98f6-169">Nadat het Hallo-clientcertificaat is gevalideerd, Hallo service voor toepassingsproxy configuratie toohello gegevensconnector geretourneerd (bijvoorbeeld Hallo connector groep die connector Hallo moeten deel uitmaken van).</span><span class="sxs-lookup"><span data-stu-id="c98f6-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="c98f6-170">Als het huidige certificaat Hallo meer dan 180 dagen is, genereert Hallo connector een nieuwe certificaataanvraag Hallo clientcertificaat effectief per 180 dagen bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="c98f6-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="c98f6-171">Toegang tot gepubliceerde toepassingen</span><span class="sxs-lookup"><span data-stu-id="c98f6-171">Accessing published applications</span></span>

<span data-ttu-id="c98f6-172">Als gebruikers toegang hebben tot een gepubliceerde toepassing, plaatsvinden hello volgende gebeurtenissen tussen Hallo-service voor toepassingsproxy en Hallo Application Proxy connector:</span><span class="sxs-lookup"><span data-stu-id="c98f6-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="c98f6-173">Hallo service verifieert de gebruiker Hallo voor Hallo-app</span><span class="sxs-lookup"><span data-stu-id="c98f6-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="c98f6-174">Hallo service plaatst een aanvraag in wachtrij Hallo-connector</span><span class="sxs-lookup"><span data-stu-id="c98f6-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="c98f6-175">Hallo-aanvraag uit de wachtrij hello wordt verwerkt door een connector</span><span class="sxs-lookup"><span data-stu-id="c98f6-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="c98f6-176">Hallo-connector wordt gewacht op een reactie</span><span class="sxs-lookup"><span data-stu-id="c98f6-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="c98f6-177">Hallo streams gegevens toohello servicegebruiker</span><span class="sxs-lookup"><span data-stu-id="c98f6-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="c98f6-178">toolearn meer informatie over wat plaatsvindt in elk van deze stappen blijven lezen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="c98f6-179">1. Hallo service verifieert de gebruiker Hallo voor Hallo-app</span><span class="sxs-lookup"><span data-stu-id="c98f6-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="c98f6-180">Als u Hallo app toouse Passthrough geconfigureerd als de methode voor verificatie vooraf, worden Hallo stappen in deze sectie overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="c98f6-181">Als u Hallo app toopreauthenticate geconfigureerd met Azure AD, gebruikers omgeleide toohello Azure AD STS tooauthenticate en hello volgende stappen worden uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="c98f6-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="c98f6-182">Toepassingsproxy controleert u alle vereisten voor het beleid van voorwaardelijke toegang voor specifieke toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="c98f6-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="c98f6-183">Deze stap zorgt ervoor dat gebruiker Hallo toohello toepassing is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="c98f6-184">Als verificatie in twee stappen vereist is, vraagt Hallo verificatie sequence Hallo gebruiker om een tweede methode voor verificatie.</span><span class="sxs-lookup"><span data-stu-id="c98f6-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="c98f6-185">Nadat alle controles zijn verstreken, hello Azure AD-STS geeft een ondertekende token voor de toepassing hello en omleidingen Hallo gebruiker back toohello service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="c98f6-186">Toepassingsproxy verifieert dat Hallo-token is uitgegeven toocorrect Hallo-toepassing.</span><span class="sxs-lookup"><span data-stu-id="c98f6-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="c98f6-187">Hiermee worden ook andere controles uitgevoerd, zoals ervoor te zorgen dat Hallo token is ondertekend door Azure AD en dat deze wordt nog steeds binnen het geldige Hallo-venster.</span><span class="sxs-lookup"><span data-stu-id="c98f6-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="c98f6-188">Toepassingsproxy stelt een gecodeerde verificatie cookie tooindicate dat verificatie toohello toepassing is opgetreden.</span><span class="sxs-lookup"><span data-stu-id="c98f6-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="c98f6-189">Hallo bevat cookie de tijdstempel van een vervaldatum die gebaseerd op het Hallo-token van Azure AD en andere gegevens zoals Hallo-gebruikersnaam die verificatie Hallo is gebaseerd op.</span><span class="sxs-lookup"><span data-stu-id="c98f6-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="c98f6-190">Hallo cookie wordt versleuteld met een persoonlijke sleutel alleen toohello service voor toepassingsproxy bekend.</span><span class="sxs-lookup"><span data-stu-id="c98f6-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="c98f6-191">Application Proxy omleidingen Hallo gebruiker back toohello gevraagde oorspronkelijk URL.</span><span class="sxs-lookup"><span data-stu-id="c98f6-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="c98f6-192">Als een deel van vooraf-verificatie stappen Hallo mislukt, Hallo gebruikersaanvraag wordt geweigerd en Hallo gebruiker een bericht weergegeven dat aangeeft Hallo bron van Hallo probleem wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="c98f6-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="c98f6-193">2. Hallo service plaatst een aanvraag in wachtrij Hallo-connector</span><span class="sxs-lookup"><span data-stu-id="c98f6-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="c98f6-194">Connectors Houd een uitgaande verbinding open toohello service voor toepassingsproxy.</span><span class="sxs-lookup"><span data-stu-id="c98f6-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="c98f6-195">Als een aanvraag binnenkomt, wachtrijen Hallo service Hallo-aanvraag voor een van de geopende verbindingen Hallo voor Hallo connector toopick up.</span><span class="sxs-lookup"><span data-stu-id="c98f6-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="c98f6-196">Hallo-aanvraag bevat de items uit de toepassing hello, zoals aanvraagheaders hello, gegevens van Hallo gecodeerd cookie, Hallo gebruiker maken voor aanvraag Hallo en Hallo aanvragen ID.</span><span class="sxs-lookup"><span data-stu-id="c98f6-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="c98f6-197">Hoewel de gegevens van Hallo gecodeerd cookie met Hallo is verzonden, is geen Hallo verificatiecookie zelf.</span><span class="sxs-lookup"><span data-stu-id="c98f6-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="c98f6-198">3. Hallo connector Hallo-aanvraag uit de wachtrij Hallo verwerkt.</span><span class="sxs-lookup"><span data-stu-id="c98f6-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="c98f6-199">Toepassingsproxy voert op basis van aanvraag hello, een Hallo van de volgende activiteiten:</span><span class="sxs-lookup"><span data-stu-id="c98f6-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="c98f6-200">Als het Hallo-aanvraag is een eenvoudige operatie (bijvoorbeeld: Er zijn geen gegevens binnen de hoofdcode van Hallo met een RESTful *ophalen* aanvraag), Hallo-connector maakt een verbinding toohello interne doelbron en wordt er gewacht totdat een antwoord.</span><span class="sxs-lookup"><span data-stu-id="c98f6-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="c98f6-201">Als Hallo aanvraag gegevens gekoppeld in de hoofdtekst van het Hallo heeft (bijvoorbeeld een RESTful *POST* bewerking), Hallo connector een uitgaande verbinding maakt met behulp van Hallo client certificate toohello toepassingsproxy exemplaar.</span><span class="sxs-lookup"><span data-stu-id="c98f6-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="c98f6-202">Er wordt deze verbinding toorequest Hallo gegevens en opent u een verbinding toohello interne resource.</span><span class="sxs-lookup"><span data-stu-id="c98f6-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="c98f6-203">Nadat het Hallo-aanvraag van Hallo-connector ontvangen, wordt Hallo toepassingsproxy service begint met het accepteren van de inhoud van de gebruiker Hallo en verzendt gegevens toohello connector.</span><span class="sxs-lookup"><span data-stu-id="c98f6-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="c98f6-204">Hallo-connector stuurt op zijn beurt Hallo gegevens toohello interne resource.</span><span class="sxs-lookup"><span data-stu-id="c98f6-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="c98f6-205">4. het Hallo-connector wacht een antwoord.</span><span class="sxs-lookup"><span data-stu-id="c98f6-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="c98f6-206">Nadat het Hallo-aanvraag en de overdracht van alle inhoud toohello back-end is voltooid, Hallo-connector wordt gewacht op een antwoord.</span><span class="sxs-lookup"><span data-stu-id="c98f6-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="c98f6-207">Zodra er een antwoord is ontvangen, Hallo-connector maakt een service voor toepassingsproxy toohello uitgaande verbinding, tooreturn Hallo header details en begin met het Hallo-return gegevensstromen.</span><span class="sxs-lookup"><span data-stu-id="c98f6-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="c98f6-208">5. Hallo streams gegevens toohello gebruiker voor de service.</span><span class="sxs-lookup"><span data-stu-id="c98f6-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="c98f6-209">Sommige verwerking van de toepassing hello optreden hier.</span><span class="sxs-lookup"><span data-stu-id="c98f6-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="c98f6-210">Als u toepassingsproxy tootranslate kop- of -URL's in uw toepassing hebt geconfigureerd, gebeurt dat verwerking zo nodig tijdens deze stap.</span><span class="sxs-lookup"><span data-stu-id="c98f6-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="c98f6-211">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="c98f6-211">Next steps</span></span>

[<span data-ttu-id="c98f6-212">Netwerk topologie overwegingen bij het gebruik van Azure AD-toepassingsproxy</span><span class="sxs-lookup"><span data-stu-id="c98f6-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="c98f6-213">Azure AD-toepassingsproxy connectors begrijpen</span><span class="sxs-lookup"><span data-stu-id="c98f6-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
