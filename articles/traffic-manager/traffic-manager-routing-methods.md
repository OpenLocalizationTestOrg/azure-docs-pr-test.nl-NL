---
title: Azure Traffic Manager - verkeersrouteringsmethoden | Microsoft Docs
description: Hiermee artikelen geeft die u inzicht in de verschillende verkeersrouteringsmethoden die wordt gebruikt door Traffic Manager
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: fe776e24a4f78b389c6096694055b38befa3c419
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="6b8d0-103">Methoden voor het doorsturen van Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="6b8d0-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="6b8d0-104">Azure Traffic Manager ondersteunt vier verkeersroutering methoden om het netwerkverkeer omgeleid naar de verschillende service-eindpunten vast te stellen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-104">Azure Traffic Manager supports four traffic-routing methods to determine how to route network traffic to the various service endpoints.</span></span> <span data-ttu-id="6b8d0-105">De methode voor verkeersroutering geldt Traffic Manager voor elke DNS-query die wordt ontvangen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-105">Traffic Manager applies the traffic-routing method to each DNS query it receives.</span></span> <span data-ttu-id="6b8d0-106">De methode traffic routing bepaalt welk eindpunt in het DNS-antwoord geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-106">The traffic-routing method determines which endpoint returned in the DNS response.</span></span>

<span data-ttu-id="6b8d0-107">Er zijn vier methoden voor het doorsturen van verkeer beschikbaar in Traffic Manager:</span><span class="sxs-lookup"><span data-stu-id="6b8d0-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="6b8d0-108">**[Prioriteit](#priority):** Selecteer **prioriteit** wanneer u wilt gebruiken van een primaire service-eindpunt voor al het verkeer en geef de back-ups in het geval de primaire of de back-eindpunten zijn niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-108">**[Priority](#priority):** Select **Priority** when you want to use a primary service endpoint for all traffic, and provide backups in case the primary or the backup endpoints are unavailable.</span></span>
* <span data-ttu-id="6b8d0-109">**[Gewogen](#weighted):** Selecteer **gewogen** als u wilt voor de distributie van verkeer over een set eindpunten, gelijkmatig of op basis van gewicht, die u definieert.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-109">**[Weighted](#weighted):** Select **Weighted** when you want to distribute traffic across a set of endpoints, either evenly or according to weights, which you define.</span></span>
* <span data-ttu-id="6b8d0-110">**[Prestaties](#performance):** Selecteer **prestaties** wanneer u eindpunten op verschillende geografische locaties en u wilt dat eindgebruikers het eindpunt 'dichtstbijzijnde' in de laagste netwerklatentie termen te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users to use the "closest" endpoint in terms of the lowest network latency.</span></span>
* <span data-ttu-id="6b8d0-111">**[Geografische](#geographic):** Selecteer **geografische** zodat gebruikers worden omgeleid naar specifieke eindpunten (Azure, extern of geneste) op basis van welke geografische locatie hun DNS-query is afkomstig uit.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed to specific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="6b8d0-112">Hiermee machtigt Traffic Manager-klanten scenario's waar dat bekend is van een gebruiker geografische regio en routering toe op basis van die is belangrijk te maken.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-112">This empowers Traffic Manager customers to enable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="6b8d0-113">Voorbeelden zijn die voldoet aan gegevens onafhankelijkheid vereist, lokalisatie van inhoud & gebruiker ervaring en verkeer vanuit verschillende regio's te meten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="6b8d0-114">Alle Traffic Manager-profielen bevatten bewaking van endpoint-status- en eindpunt automatische failover.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="6b8d0-115">Zie voor meer informatie [Traffic Manager-eindpunt bewaking](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="6b8d0-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="6b8d0-116">Een enkele Traffic Manager-profiel kunt slechts één methode voor het doorsturen van verkeer.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="6b8d0-117">U kunt een andere verkeersrouteringsmethode selecteren voor uw profiel op elk gewenst moment.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="6b8d0-118">Wijzigingen worden toegepast binnen één minuut en er geen uitvaltijd is ontstaan.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="6b8d0-119">Voor verkeersroutering methoden kunnen worden gecombineerd met behulp van geneste Traffic Manager-profielen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="6b8d0-120">Geneste kunt geavanceerde en flexibele verkeersroutering configuraties die voldoen aan de behoeften van grotere, complexe toepassingen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet the needs of larger, complex applications.</span></span> <span data-ttu-id="6b8d0-121">Zie voor meer informatie [Traffic Manager-profielen genest](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="6b8d0-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="6b8d0-122"><a name = "priority"></a>Prioriteit voor verkeersroutering methode</span><span class="sxs-lookup"><span data-stu-id="6b8d0-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="6b8d0-123">Een organisatie wil vaak betrouwbaarheid bevatten voor de services die door het implementeren van een of meer back-services als hun primaire service uitvalt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-123">Often an organization wants to provide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="6b8d0-124">De methode 'Prioriteit' traffic routing kan Azure klanten op eenvoudige wijze dit patroon van een failover.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-124">The 'Priority' traffic-routing method allows Azure customers to easily implement this failover pattern.</span></span>

![Azure Traffic Manager 'Prioriteit' verkeersroutering methode][1]

<span data-ttu-id="6b8d0-126">Traffic Manager-profiel bevat een geprioriteerde lijst van de service-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-126">The Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="6b8d0-127">Traffic Manager verzendt standaard al het verkeer naar de primaire (hoogste prioriteit)-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-127">By default, Traffic Manager sends all traffic to the primary (highest-priority) endpoint.</span></span> <span data-ttu-id="6b8d0-128">Als het primaire eindpunt niet beschikbaar is, wordt in Traffic Manager het verkeer naar het tweede eindpunt gestuurd.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-128">If the primary endpoint is not available, Traffic Manager routes the traffic to the second endpoint.</span></span> <span data-ttu-id="6b8d0-129">Als de primaire en secundaire eindpunten niet beschikbaar zijn, wordt het verkeer gaat naar de andere, enzovoort.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-129">If both the primary and secondary endpoints are not available, the traffic goes to the third, and so on.</span></span> <span data-ttu-id="6b8d0-130">Beschikbaarheid van het eindpunt is gebaseerd op de geconfigureerde status (ingeschakeld of uitgeschakeld) en de lopende eindpuntcontrole.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-130">Availability of the endpoint is based on the configured status (enabled or disabled) and the ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="6b8d0-131">Eindpunten configureren</span><span class="sxs-lookup"><span data-stu-id="6b8d0-131">Configuring endpoints</span></span>

<span data-ttu-id="6b8d0-132">Met Azure Resource Manager, configureert u de eindpuntprioriteit expliciet met behulp van de prioriteitseigenschap voor elk eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-132">With Azure Resource Manager, you configure the endpoint priority explicitly using the 'priority' property for each endpoint.</span></span> <span data-ttu-id="6b8d0-133">Deze eigenschap is een waarde tussen 1 en 1000.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="6b8d0-134">Lagere waarden vertegenwoordigen een hogere prioriteit.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="6b8d0-135">Eindpunten kunnen geen prioriteitswaarden delen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="6b8d0-136">De eigenschap is optioneel.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-136">Setting the property is optional.</span></span> <span data-ttu-id="6b8d0-137">Wanneer u dit weglaat, wordt een standaardprioriteit op basis van de endpoint-volgorde wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-137">When omitted, a default priority based on the endpoint order is used.</span></span>

##<span data-ttu-id="6b8d0-138"><a name = "weighted"></a>Gewogen verkeersroutering methode</span><span class="sxs-lookup"><span data-stu-id="6b8d0-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="6b8d0-139">De 'Gewogen' verkeersroutering methode kunt u verkeer gelijkmatig verdelen of een vooraf gedefinieerde weging gebruiken.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-139">The 'Weighted' traffic-routing method allows you to distribute traffic evenly or to use a pre-defined weighting.</span></span>

![Azure Traffic Manager-'Gewogen' methode verkeer routering][2]

<span data-ttu-id="6b8d0-141">In de gewogen verkeersroutering methode kunt u een gewicht toewijzen aan elk eindpunt in de profielconfiguratie van Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-141">In the Weighted traffic-routing method, you assign a weight to each endpoint in the Traffic Manager profile configuration.</span></span> <span data-ttu-id="6b8d0-142">Het gewicht is een geheel getal van 1 tot en met 1000.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-142">The weight is an integer from 1 to 1000.</span></span> <span data-ttu-id="6b8d0-143">Deze parameter is optioneel.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-143">This parameter is optional.</span></span> <span data-ttu-id="6b8d0-144">Als u dit weglaat, wordt verkeer Managers een standaardgewicht van '1'.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="6b8d0-145">Voor elke DNS-query heeft ontvangen, kiest de Traffic Manager willekeurig een beschikbare eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="6b8d0-146">De kans van de keuze van een eindpunt is gebaseerd op het gewicht is toegewezen aan alle beschikbare eindpunten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-146">The probability of choosing an endpoint is based on the weights assigned to all available endpoints.</span></span> <span data-ttu-id="6b8d0-147">Met behulp van hetzelfde gewicht over alle eindpunten resulteert in een zelfs verkeer distributie.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-147">Using the same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="6b8d0-148">Met behulp van hogere of lagere gewichten op specifieke eindpunten zorgt ervoor dat deze eindpunten moet meer of minder vaak worden geretourneerd in de DNS-antwoorden.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-148">Using higher or lower weights on specific endpoints causes those endpoints to be returned more or less frequently in the DNS responses.</span></span>

<span data-ttu-id="6b8d0-149">De gewogen maakt een nuttig scenario's:</span><span class="sxs-lookup"><span data-stu-id="6b8d0-149">The weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="6b8d0-150">Upgrade van de toepassing geleidelijk: een percentage van het verkeer te routeren naar een nieuw eindpunt toewijzen en het verkeer geleidelijk te verhogen na verloop van tijd tot 100%.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-150">Gradual application upgrade: Allocate a percentage of traffic to route to a new endpoint, and gradually increase the traffic over time to 100%.</span></span>
* <span data-ttu-id="6b8d0-151">Toepassingen migreren naar Azure: een profiel maken met Azure en externe eindpunten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-151">Application migration to Azure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="6b8d0-152">Het gewicht van de eindpunten van de nieuwe eindpunten liever aanpassen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-152">Adjust the weight of the endpoints to prefer the new endpoints.</span></span>
* <span data-ttu-id="6b8d0-153">Cloud sturen voor extra capaciteit: snel een on-premises implementatie naar de cloud uitbreiden door de gegevens achter een Traffic Manager-profiel.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into the cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="6b8d0-154">Wanneer u extra capaciteit in de cloud, kunt u toevoegen of meer eindpunten inschakelen en geef op welk gedeelte van het verkeer naar elk eindpunt gaat.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-154">When you need extra capacity in the cloud, you can add or enable more endpoints and specify what portion of traffic goes to each endpoint.</span></span>

<span data-ttu-id="6b8d0-155">De Azure Resource Manager-portal ondersteunt de configuratie van gewogen voor verkeersroutering.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-155">The Resource Manager Azure portal supports the configuration of weighted traffic routing.</span></span>  <span data-ttu-id="6b8d0-156">U kunt met behulp van de Resource Manager-versies van Azure PowerShell, CLI en de REST API's gewichten configureren.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-156">You can configure weights using the Resource Manager versions of Azure PowerShell, CLI, and the REST APIs.</span></span>

<span data-ttu-id="6b8d0-157">Het is belangrijk te weten dat DNS-antwoorden in de cache opgeslagen door clients en de recursieve DNS-servers die clients gebruiken voor het omzetten van DNS-namen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-157">It is important to understand that DNS responses are cached by clients and by the recursive DNS servers that the clients use to resolve DNS names.</span></span> <span data-ttu-id="6b8d0-158">Deze cache, kan een invloed hebben op gewogen verkeer distributies.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="6b8d0-159">Wanneer het aantal clients en de recursieve DNS-servers groot is, wordt verkeer distributie werkt zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-159">When the number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="6b8d0-160">Echter, wanneer het aantal clients of recursieve DNS-servers klein is, cachebewerkingen kan aanzienlijk laten uitvallen de distributie van verkeer.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-160">However, when the number of clients or recursive DNS servers is small, caching can significantly skew the traffic distribution.</span></span>

<span data-ttu-id="6b8d0-161">Algemene gebruiksvoorbeelden zijn onder andere:</span><span class="sxs-lookup"><span data-stu-id="6b8d0-161">Common use cases include:</span></span>

* <span data-ttu-id="6b8d0-162">Ontwikkeling en testomgevingen</span><span class="sxs-lookup"><span data-stu-id="6b8d0-162">Development and testing environments</span></span>
* <span data-ttu-id="6b8d0-163">Toepassingen communicatie</span><span class="sxs-lookup"><span data-stu-id="6b8d0-163">Application-to-application communications</span></span>
* <span data-ttu-id="6b8d0-164">Toepassingen die gericht is op een beperkte-gebruikersgroep die delen een gemeenschappelijke recursieve DNS-infrastructuur (bijvoorbeeld medewerkers van de bedrijfsportal verbinding maken via een proxy)</span><span class="sxs-lookup"><span data-stu-id="6b8d0-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="6b8d0-165">Deze DNS-cache in gevolgen voor alle DNS-verkeer routeren systemen, niet alleen Azure Traffic Manager gelden.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-165">These DNS caching effects are common to all DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="6b8d0-166">In sommige gevallen kan expliciet de DNS-cache wissen bieden een tijdelijke oplossing.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-166">In some cases, explicitly clearing the DNS cache may provide a workaround.</span></span> <span data-ttu-id="6b8d0-167">In andere gevallen is zijn een alternatieve methode voor verkeersroutering geschikter.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="6b8d0-168"><a name = "performance"></a>Prestaties voor verkeersroutering methode</span><span class="sxs-lookup"><span data-stu-id="6b8d0-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="6b8d0-169">Eindpunten in twee of meer locaties wereldwijd implementeren, kunt de reactietijd van de vele toepassingen verbeteren door routeren van verkeer naar de locatie die het dichtst bij u is.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-169">Deploying endpoints in two or more locations across the globe can improve the responsiveness of many applications by routing traffic to the location that is 'closest' to you.</span></span> <span data-ttu-id="6b8d0-170">De methode 'Prestaties' traffic routing biedt deze mogelijkheid.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-170">The 'Performance' traffic-routing method provides this capability.</span></span>

![Azure Traffic Manager 'Prestaties' verkeersroutering methode][3]

<span data-ttu-id="6b8d0-172">Het eindpunt 'dichtstbijzijnde' is niet noodzakelijkerwijs dichtstbijzijnde door geografische afstand wordt gemeten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-172">The 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="6b8d0-173">In plaats daarvan bepaalt de methode 'Prestaties' traffic routing het dichtstbijzijnde eindpunt door te meten netwerklatentie.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-173">Instead, the 'Performance' traffic-routing method determines the closest endpoint by measuring network latency.</span></span> <span data-ttu-id="6b8d0-174">Traffic Manager onderhoudt een tabel van de latentie Internet om bij te houden de round trip-tijd tussen het IP-adresbereiken en elke Azure-datacenter.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-174">Traffic Manager maintains an Internet Latency Table to track the round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="6b8d0-175">Traffic Manager zoekt naar het IP-bronadres van de inkomende DNS-aanvraag in de tabel van de latentie Internet.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-175">Traffic Manager looks up the source IP address of the incoming DNS request in the Internet Latency Table.</span></span> <span data-ttu-id="6b8d0-176">Traffic Manager kiest een eindpunt beschikbaar in het datacenter Azure die de laagste latentie voor deze IP-adresbereik is, en vervolgens dat eindpunt in de DNS-antwoord geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-176">Traffic Manager chooses an available endpoint in the Azure datacenter that has the lowest latency for that IP address range, then returns that endpoint in the DNS response.</span></span>

<span data-ttu-id="6b8d0-177">Zoals uitgelegd in [hoe Traffic Manager werkt](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager ontvangt geen DNS-query's rechtstreeks van clients.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="6b8d0-178">In plaats daarvan DNS-query's zijn afkomstig van de recursieve DNS-service dat de clients zijn geconfigureerd voor gebruik.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-178">Rather, DNS queries come from the recursive DNS service that the clients are configured to use.</span></span> <span data-ttu-id="6b8d0-179">Daarom het IP-adres gebruikt om te bepalen van het eindpunt 'dichtstbijzijnde' is geen IP-adres van de client, maar het is het IP-adres van de recursieve DNS-service.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-179">Therefore, the IP address used to determine the 'closest' endpoint is not the client's IP address, but it is the IP address of the recursive DNS service.</span></span> <span data-ttu-id="6b8d0-180">Dit IP-adres is in de praktijk kan een goede proxy voor de client.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-180">In practice, this IP address is a good proxy for the client.</span></span>


<span data-ttu-id="6b8d0-181">Traffic Manager wordt regelmatig bijgewerkt in de tabel Internet latentie vanwege wijzigingen in de globale Internet en de nieuwe Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-181">Traffic Manager regularly updates the Internet Latency Table to account for changes in the global Internet and new Azure regions.</span></span> <span data-ttu-id="6b8d0-182">Echter de prestaties van toepassingen is afhankelijk van realtime variaties in load via Internet.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-182">However, application performance varies based on real-time variations in load across the Internet.</span></span> <span data-ttu-id="6b8d0-183">Verkeer routeren bewaakt belasting van een bepaalde service-eindpunt niet.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="6b8d0-184">Echter, als een eindpunt niet beschikbaar is, Traffic Manager biedt niet opnemen in reacties op DNS-query's.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="6b8d0-185">Verwijst naar Let op:</span><span class="sxs-lookup"><span data-stu-id="6b8d0-185">Points to note:</span></span>

* <span data-ttu-id="6b8d0-186">Als uw profiel meerdere eindpunten in dezelfde Azure-regio bevat, klikt u vervolgens wordt Traffic Manager verkeer gelijkmatig over het aantal beschikbare eindpunten in deze regio.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-186">If your profile contains multiple endpoints in the same Azure region, then Traffic Manager distributes traffic evenly across the available endpoints in that region.</span></span> <span data-ttu-id="6b8d0-187">Als u liever een ander verkeer distributie binnen een regio, kunt u [Traffic Manager-profielen genest](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="6b8d0-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="6b8d0-188">Als alle ingeschakelde eindpunten in de dichtstbijzijnde Azure-regio zijn gedegradeerd, wordt het Traffic Manager verkeer verplaatst naar de eindpunten in de volgende dichtstbijzijnde Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-188">If all enabled endpoints in the closest Azure region are degraded, Traffic Manager moves traffic to the endpoints in the next closest Azure region.</span></span> <span data-ttu-id="6b8d0-189">Als u een volgorde van voorkeur failover definiëren wilt, gebruikt u [Traffic Manager-profielen genest](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="6b8d0-189">If you want to define a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="6b8d0-190">Als u de verkeersrouteringsmethode prestaties met externe eindpunten of geneste eindpunten, moet u de locatie van deze eindpunten opgeven.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-190">When using the Performance traffic routing method with external endpoints or nested endpoints, you need to specify the location of those endpoints.</span></span> <span data-ttu-id="6b8d0-191">Kies de Azure-regio die het dichtst bij uw implementatie.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-191">Choose the Azure region closest to your deployment.</span></span> <span data-ttu-id="6b8d0-192">Deze locaties zijn de waarden die worden ondersteund door de latentie Internet tabel.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-192">Those locations are the values supported by the Internet Latency Table.</span></span>
* <span data-ttu-id="6b8d0-193">De algoritme die kiest van het eindpunt is deterministisch.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-193">The algorithm that chooses the endpoint is deterministic.</span></span> <span data-ttu-id="6b8d0-194">Herhaalde DNS-query's uit dezelfde client omgeleid naar hetzelfde eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-194">Repeated DNS queries from the same client are directed to the same endpoint.</span></span> <span data-ttu-id="6b8d0-195">Clients gebruiken doorgaans verschillende recursieve DNS-servers als onderweg.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="6b8d0-196">De client kan worden gerouteerd naar een ander eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-196">The client may be routed to a different endpoint.</span></span> <span data-ttu-id="6b8d0-197">Routering kan ook worden beïnvloed door wijzigingen in de tabel van de latentie Internet.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-197">Routing can also be affected by updates to the Internet Latency Table.</span></span> <span data-ttu-id="6b8d0-198">De prestaties voor verkeersroutering methode is daarom geen garantie dat een client altijd worden omgeleid naar hetzelfde eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-198">Therefore, the Performance traffic-routing method does not guarantee that a client is always routed to the same endpoint.</span></span>
* <span data-ttu-id="6b8d0-199">Wanneer de Internet-latentie-tabel is gewijzigd, is het mogelijk dat sommige clients worden omgeleid naar een ander eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-199">When the Internet Latency Table changes, you may notice that some clients are directed to a different endpoint.</span></span> <span data-ttu-id="6b8d0-200">Deze wijziging routering is nauwkeuriger op basis van latentiegegevens van de huidige.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="6b8d0-201">Deze updates zijn essentieel voor het onderhouden van de nauwkeurigheid van het verkeer routeren naarmate Internet voortdurend zich verder ontwikkelen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-201">These updates are essential to maintain the accuracy of Performance traffic-routing as the Internet continually evolves.</span></span>

## <span data-ttu-id="6b8d0-202"><a name = "geographic"></a>Geografische verkeersroutering methode</span><span class="sxs-lookup"><span data-stu-id="6b8d0-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="6b8d0-203">Traffic Manager-profielen kunnen worden geconfigureerd voor het gebruik van de geografische routeringsmethode zodat gebruikers worden omgeleid naar specifieke eindpunten (Azure, extern of geneste) op basis van welke geografische locatie hun DNS-query is afkomstig uit.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-203">Traffic Manager profiles can be configured to use the Geographic routing method so that users are directed to specific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="6b8d0-204">Hiermee machtigt Traffic Manager-klanten scenario's waar dat bekend is van een gebruiker geografische regio en routering toe op basis van die is belangrijk te maken.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-204">This empowers Traffic Manager customers to enable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="6b8d0-205">Voorbeelden zijn die voldoet aan gegevens onafhankelijkheid vereist, lokalisatie van inhoud & gebruiker ervaring en verkeer vanuit verschillende regio's te meten.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="6b8d0-206">Wanneer een profiel is geconfigureerd voor het doorsturen van geografische, elk eindpunt gekoppeld dat profiel moet beschikken over een reeks geografische regio's die zijn toegewezen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs to have a set of geographic regions assigned to it.</span></span> <span data-ttu-id="6b8d0-207">Een geografische regio kan zich op de volgende detailniveaus</span><span class="sxs-lookup"><span data-stu-id="6b8d0-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="6b8d0-208">World – elke regio</span><span class="sxs-lookup"><span data-stu-id="6b8d0-208">World– any region</span></span>
- <span data-ttu-id="6b8d0-209">Regionale groepering – bijvoorbeeld Afrika Midden-Oosten, Australië/Pacific enzovoort.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="6b8d0-210">Land/regio – bijvoorbeeld Ierland Peru, Hongkong SAR enzovoort.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="6b8d0-211">Staat/provincie – bijvoorbeeld Verenigde Staten Californië, Australië-Queensland, Canada Alberta enz. (Opmerking: deze granulariteitsniveau wordt alleen ondersteund voor staten / provincies in Australië, Canada VK en Verenigde Staten).</span><span class="sxs-lookup"><span data-stu-id="6b8d0-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="6b8d0-212">Wanneer een regio of een set van regio's is toegewezen aan een eindpunt, wordt alle aanvragen van deze gebieden gerouteerd alleen naar dat eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-212">When a region or a set of regions is assigned to an endpoint, any requests from those regions gets routed only to that endpoint.</span></span> <span data-ttu-id="6b8d0-213">Traffic Manager maakt gebruik van het bron-IP-adres van de DNS-query om te bepalen van de regio van waaruit het opvragen van een gebruiker uit – meestal is dit het IP-adres van de lokale DNS-resolver tijdens het doorzoeken van de query namens de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-213">Traffic Manager uses the source IP address of the DNS query to determine the region from which a user is querying from – usually this is the IP address of the local DNS resolver doing the query on behalf of the user.</span></span>  

![Azure Traffic Manager-'Geografische' methode verkeer routering](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="6b8d0-215">Traffic Manager leest het bron-IP-adres van de DNS-query en besluit welke geografische regio die afkomstig van zijn is.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-215">Traffic Manager reads the source IP address of the DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="6b8d0-216">Het lijkt erop klikt om te zien of er een eindpunt dat deze geografische regio toegewezen heeft.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-216">It then looks to see if there is an endpoint that has this geographic region mapped to it.</span></span> <span data-ttu-id="6b8d0-217">Deze zoekactie wordt gestart op het laagste niveau van granulatie (staat/provincie waar het wordt ondersteund, anders op het niveau van het land/regio) en probeert het helemaal tot aan het hoogste niveau, **World**.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-217">This lookup starts at the lowest granularity level (State/Province where it is supported, else at the Country/Region level) and goes all the way up to the highest level, which is **World**.</span></span> <span data-ttu-id="6b8d0-218">Het eerste resultaat gevonden met behulp van deze verandering is aangewezen als het eindpunt te retourneren in de query-antwoord.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-218">The first match found using this traversal is designated as the endpoint to return in the query response.</span></span> <span data-ttu-id="6b8d0-219">Als die overeenkomt met een eindpunt binnen die onderliggende profiel van een geneste type eindpunt wordt geretourneerd, gebaseerd op de routeringsmethode voor.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="6b8d0-220">De volgende punten van toepassing zijn op dit gedrag:</span><span class="sxs-lookup"><span data-stu-id="6b8d0-220">The following points are applicable to this behavior:</span></span>

- <span data-ttu-id="6b8d0-221">Een geografische regio kan alleen worden toegewezen aan één eindpunt in een Traffic Manager-profiel als het type routering geografische routering.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-221">A geographic region can be mapped only to one endpoint in a Traffic Manager profile when the routing type is Geographic Routing.</span></span> <span data-ttu-id="6b8d0-222">Dit zorgt ervoor dat gebruikers routering deterministisch is en klanten scenario's waarvoor ondubbelzinnig geografische grenzen kunnen inschakelen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="6b8d0-223">De regio van een gebruiker afkomstig zijn onder twee verschillende eindpunten geografische toewijzing, Traffic Manager selecteert het eindpunt met de laagste granulatie als u routering aanvragen van die regio aan het andere eindpunt niet.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects the endpoint with the lowest granularity and does not consider routing requests from that region to the other endpoint.</span></span> <span data-ttu-id="6b8d0-224">Neem bijvoorbeeld een type routering voor geografische profiel met twee eindpunten - 1 en Endpoint2.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="6b8d0-225">1 is geconfigureerd voor het ontvangen verkeer van Ierland en Endpoint2 is geconfigureerd voor het ontvangen verkeer van Europa.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-225">Endpoint1 is configured to receive traffic from Ireland and Endpoint2 is configured to receive traffic from Europe.</span></span> <span data-ttu-id="6b8d0-226">Als een aanvraag afkomstig uit Ierland is, wordt het altijd naar 1 gerouteerd.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-226">If a request originates from Ireland, it is always routed to Endpoint1.</span></span>
- <span data-ttu-id="6b8d0-227">Omdat een regio kan alleen worden toegewezen aan één eindpunt, wordt het in Traffic Manager retourneert ongeacht of het eindpunt al dan niet in orde is.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-227">Since a region can be mapped only to one endpoint, Traffic Manager returns it regardless of whether the endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="6b8d0-228">Het is raadzaam dat klanten die gebruikmaken van de geografische routeringsmethode koppelen aan de geneste type-eindpunten die onderliggende profielen met ten minste twee eindpunten binnen elk heeft.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-228">It is strongly recommended that customers using the geographic routing method associate it with the Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="6b8d0-229">Als een eindpunt overeenkomst is gevonden en dat eindpunt in de **gestopt** staat, Traffic Manager een GEENGEGEVENS antwoord geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-229">If an endpoint match is found and that endpoint is in the **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="6b8d0-230">In dit geval geen verdere zoekacties bestaat hoger staan in de hiërarchie geografische regio.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-230">In this case, no further lookups is made higher up in the geographic region hierarchy.</span></span> <span data-ttu-id="6b8d0-231">Dit gedrag is ook van toepassing voor geneste eindpunttypen wanneer het onderliggende profiel in de **gestopt** of **uitgeschakelde** status.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-231">This behavior is also applicable for nested endpoint types when the child profile is in the **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="6b8d0-232">Als een eindpunt wordt weergegeven in een **uitgeschakelde** status, het niet opgenomen in de regio die overeenkomt met de proces.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-232">If an endpoint displays a **Disabled** status, it won’t be included in the region matching process.</span></span> <span data-ttu-id="6b8d0-233">Dit gedrag is ook van toepassing voor geneste eindpunttypen wanneer het eindpunt is in de **uitgeschakelde** status.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-233">This behavior is also applicable for nested endpoint types when the endpoint is in the **Disabled** state.</span></span>
- <span data-ttu-id="6b8d0-234">Als een query afkomstig is van een geografische regio die niet toegewezen in dit profiel is, retourneert Traffic Manager een antwoord GEENGEGEVENS.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="6b8d0-235">Daarom is het raadzaam dat klanten gebruiken geografische routering met één eindpunt, in het ideale geval van het type geneste met ten minste twee eindpunten in het onderliggende-profiel met de regio **World** toegewezen.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within the child profile, with the region **World** assigned to it.</span></span> <span data-ttu-id="6b8d0-236">Dit zorgt er ook voor dat alle IP-adressen die niet zijn toegewezen aan een regio worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-236">This also ensures that any IP addresses that do not map to a region are handled.</span></span>

<span data-ttu-id="6b8d0-237">Zoals uitgelegd in [hoe Traffic Manager werkt](traffic-manager-how-traffic-manager-works.md), Traffic Manager ontvangt geen DNS-query's rechtstreeks van clients.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="6b8d0-238">In plaats daarvan DNS-query's zijn afkomstig van de recursieve DNS-service dat de clients zijn geconfigureerd voor gebruik.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-238">Rather, DNS queries come from the recursive DNS service that the clients are configured to use.</span></span> <span data-ttu-id="6b8d0-239">Daarom het IP-adres gebruikt om te bepalen van de regio is niet van de client-IP-adres, maar het is het IP-adres van de recursieve DNS-service.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-239">Therefore, the IP address used to determine the region is not the client's IP address, but it is the IP address of the recursive DNS service.</span></span> <span data-ttu-id="6b8d0-240">Dit IP-adres is in de praktijk kan een goede proxy voor de client.</span><span class="sxs-lookup"><span data-stu-id="6b8d0-240">In practice, this IP address is a good proxy for the client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="6b8d0-241">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="6b8d0-241">Next steps</span></span>

<span data-ttu-id="6b8d0-242">Meer informatie over het ontwikkelen van hoge beschikbaarheid van toepassingen via [eindpuntcontrole Traffic Manager](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="6b8d0-242">Learn how to develop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="6b8d0-243">Meer informatie over hoe [een Traffic Manager-profiel maken](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="6b8d0-243">Learn how to [create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



