---
title: Azure Sleutelkluis-oplossing in Log Analytics | Microsoft Docs
description: U kunt de oplossing voor Azure Sleutelkluis in logboekanalyse Azure Sleutelkluis-Logboeken.
services: log-analytics
documentationcenter: 
author: richrundmsft
manager: jochan
editor: 
ms.assetid: 5e25e6d6-dd20-4528-9820-6e2958a40dae
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/09/2017
ms.author: richrund
ms.openlocfilehash: 651586e0846ffb22a23e64b73c2cc614980d9b92
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="azure-key-vault-analytics-solution-in-log-analytics"></a><span data-ttu-id="f2500-103">Azure Key Vault Analytics-oplossing in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f2500-103">Azure Key Vault Analytics solution in Log Analytics</span></span>

![Sleutelkluis symbool](./media/log-analytics-azure-keyvault/key-vault-analytics-symbol.png)

<span data-ttu-id="f2500-105">Met de oplossing Azure Key Vault in Log Analytics kunt u de AuditEvent-logboeken van Azure Key Vault controleren.</span><span class="sxs-lookup"><span data-stu-id="f2500-105">You can use the Azure Key Vault solution in Log Analytics to review Azure Key Vault AuditEvent logs.</span></span>

<span data-ttu-id="f2500-106">Voor het gebruik van de oplossing, moet u logboekregistratie van Azure Sleutelkluis diagnostische gegevens inschakelen en het omleiden van de diagnostische gegevens naar een werkruimte voor logboekanalyse.</span><span class="sxs-lookup"><span data-stu-id="f2500-106">To use the solution, you need to enable logging of Azure Key Vault diagnostics and direct the diagnostics to a Log Analytics workspace.</span></span> <span data-ttu-id="f2500-107">Het is niet nodig zijn voor het schrijven van de logboeken naar Azure Blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="f2500-107">It is not necessary to write the logs to Azure Blob storage.</span></span>

> [!NOTE]
> <span data-ttu-id="f2500-108">In januari 2017, de ondersteunde manier van het verzenden van Logboeken van de Sleutelkluis met logboekanalyse gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="f2500-108">In January 2017, the supported way of sending logs from Key Vault to Log Analytics changed.</span></span> <span data-ttu-id="f2500-109">Als de Sleutelkluis-oplossing u toont *(afgeschaft)* in de titel verwijzen naar [migreren van de oude Sleutelkluis oplossing](#migrating-from-the-old-key-vault-solution) voor stappen die u moet volgen.</span><span class="sxs-lookup"><span data-stu-id="f2500-109">If the Key Vault solution you are using shows *(deprecated)* in the title, refer to [migrating from the old Key Vault solution](#migrating-from-the-old-key-vault-solution) for steps you need to follow.</span></span>
>
>

## <a name="install-and-configure-the-solution"></a><span data-ttu-id="f2500-110">Installeren en configureren van de oplossing</span><span class="sxs-lookup"><span data-stu-id="f2500-110">Install and configure the solution</span></span>
<span data-ttu-id="f2500-111">Gebruik de volgende instructies voor het installeren en configureren van de Azure Sleutelkluis-oplossing:</span><span class="sxs-lookup"><span data-stu-id="f2500-111">Use the following instructions to install and configure the Azure Key Vault solution:</span></span>

1. <span data-ttu-id="f2500-112">Inschakelen van de Azure Sleutelkluis-oplossing van [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) of met behulp van de procedure beschreven in [toevoegen Log Analytics-oplossingen van de galerie met oplossingen](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="f2500-112">Enable the Azure Key Vault solution from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>
2. <span data-ttu-id="f2500-113">Inschakelen van logboekregistratie van diagnostische gegevens voor de Sleutelkluis-bronnen te bewaken, met behulp van de [portal](#enable-key-vault-diagnostics-in-the-portal) of [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span><span class="sxs-lookup"><span data-stu-id="f2500-113">Enable diagnostics logging for the Key Vault resources to monitor, using either the [portal](#enable-key-vault-diagnostics-in-the-portal) or [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span></span>

### <a name="enable-key-vault-diagnostics-in-the-portal"></a><span data-ttu-id="f2500-114">Sleutelkluis diagnostische gegevens in de portal inschakelen</span><span class="sxs-lookup"><span data-stu-id="f2500-114">Enable Key Vault diagnostics in the portal</span></span>

1. <span data-ttu-id="f2500-115">Navigeer in de Azure-portal naar de Sleutelkluis-bron om te controleren</span><span class="sxs-lookup"><span data-stu-id="f2500-115">In the Azure portal, navigate to the Key Vault resource to monitor</span></span>
2. <span data-ttu-id="f2500-116">Selecteer *diagnostische logboeken* om de volgende pagina te openen</span><span class="sxs-lookup"><span data-stu-id="f2500-116">Select *Diagnostics logs* to open the following page</span></span>

   ![afbeelding van Azure Sleutelkluis-tegel](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics01.png)
3. <span data-ttu-id="f2500-118">Klik op *diagnostische gegevens inschakelen* om de volgende pagina te openen</span><span class="sxs-lookup"><span data-stu-id="f2500-118">Click *Turn on diagnostics* to open the following page</span></span>

   ![afbeelding van Azure Sleutelkluis-tegel](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics02.png)
4. <span data-ttu-id="f2500-120">Om diagnostische gegevens inschakelen, klikt u op *op* onder *Status*</span><span class="sxs-lookup"><span data-stu-id="f2500-120">To turn on diagnostics, click *On* under *Status*</span></span>
5. <span data-ttu-id="f2500-121">Klik op het selectievakje voor *verzenden met Log Analytics*</span><span class="sxs-lookup"><span data-stu-id="f2500-121">Click the checkbox for *Send to Log Analytics*</span></span>
6. <span data-ttu-id="f2500-122">Selecteer een bestaande werkruimte voor logboekanalyse of een werkruimte maken</span><span class="sxs-lookup"><span data-stu-id="f2500-122">Select an existing Log Analytics workspace, or create a workspace</span></span>
7. <span data-ttu-id="f2500-123">Om in te schakelen *AuditEvent* Logboeken, klikt u op het selectievakje onder logboek</span><span class="sxs-lookup"><span data-stu-id="f2500-123">To enable *AuditEvent* logs, click the checkbox under Log</span></span>
8. <span data-ttu-id="f2500-124">Klik op *opslaan* waarmee de logboekregistratie van diagnostische gegevens met Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f2500-124">Click *Save* to enable the logging of diagnostics to Log Analytics</span></span>

### <a name="enable-key-vault-diagnostics-using-powershell"></a><span data-ttu-id="f2500-125">Sleutelkluis diagnostische gegevens met behulp van PowerShell inschakelen</span><span class="sxs-lookup"><span data-stu-id="f2500-125">Enable Key Vault diagnostics using PowerShell</span></span>
<span data-ttu-id="f2500-126">De volgende PowerShell-script bevat een voorbeeld van het gebruik van `Set-AzureRmDiagnosticSetting` Diagnostische logboekregistratie voor Sleutelkluis in te schakelen:</span><span class="sxs-lookup"><span data-stu-id="f2500-126">The following PowerShell script provides an example of how to use `Set-AzureRmDiagnosticSetting` to enable diagnostic logging for Key Vault:</span></span>
```
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$kv = Get-AzureRmKeyVault -VaultName 'ContosoKeyVault'

Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId  -WorkspaceId $workspaceId -Enabled $true
```



## <a name="review-azure-key-vault-data-collection-details"></a><span data-ttu-id="f2500-127">Bekijk de details van Azure Sleutelkluis gegevens verzamelen</span><span class="sxs-lookup"><span data-stu-id="f2500-127">Review Azure Key Vault data collection details</span></span>
<span data-ttu-id="f2500-128">Azure Sleutelkluis-oplossing verzamelt diagnostische logboeken rechtstreeks uit de Sleutelkluis.</span><span class="sxs-lookup"><span data-stu-id="f2500-128">Azure Key Vault solution collects diagnostics logs directly from the Key Vault.</span></span>
<span data-ttu-id="f2500-129">Het is niet nodig om te schrijven van de logboeken naar Azure Blob-opslag en geen agent is vereist voor het verzamelen van gegevens.</span><span class="sxs-lookup"><span data-stu-id="f2500-129">It is not necessary to write the logs to Azure Blob storage and no agent is required for data collection.</span></span>

<span data-ttu-id="f2500-130">De volgende tabel bevat de methoden van de collectie en andere informatie over hoe gegevens worden verzameld voor Azure Sleutelkluis.</span><span class="sxs-lookup"><span data-stu-id="f2500-130">The following table shows data collection methods and other details about how data is collected for Azure Key Vault.</span></span>

| <span data-ttu-id="f2500-131">Platform</span><span class="sxs-lookup"><span data-stu-id="f2500-131">Platform</span></span> | <span data-ttu-id="f2500-132">Directe agent</span><span class="sxs-lookup"><span data-stu-id="f2500-132">Direct agent</span></span> | <span data-ttu-id="f2500-133">Systems Center Operations Manager-agent</span><span class="sxs-lookup"><span data-stu-id="f2500-133">Systems Center Operations Manager agent</span></span> | <span data-ttu-id="f2500-134">Azure</span><span class="sxs-lookup"><span data-stu-id="f2500-134">Azure</span></span> | <span data-ttu-id="f2500-135">Operations Manager is vereist?</span><span class="sxs-lookup"><span data-stu-id="f2500-135">Operations Manager required?</span></span> | <span data-ttu-id="f2500-136">Operations Manager-agent gegevens verzonden via de beheergroep</span><span class="sxs-lookup"><span data-stu-id="f2500-136">Operations Manager agent data sent via management group</span></span> | <span data-ttu-id="f2500-137">Verzamelingsfrequentie</span><span class="sxs-lookup"><span data-stu-id="f2500-137">Collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="f2500-138">Azure</span><span class="sxs-lookup"><span data-stu-id="f2500-138">Azure</span></span> |  |  |<span data-ttu-id="f2500-139">&#8226;</span><span class="sxs-lookup"><span data-stu-id="f2500-139">&#8226;</span></span> |  |  | <span data-ttu-id="f2500-140">bij ontvangst</span><span class="sxs-lookup"><span data-stu-id="f2500-140">on arrival</span></span> |

## <a name="use-azure-key-vault"></a><span data-ttu-id="f2500-141">Azure Key Vault gebruiken</span><span class="sxs-lookup"><span data-stu-id="f2500-141">Use Azure Key Vault</span></span>
<span data-ttu-id="f2500-142">Nadat u [installeren van de oplossing](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), de Sleutelkluis-gegevens weergeven door te klikken op de **Azure Key Vault** tegel van de **overzicht** pagina van logboekanalyse.</span><span class="sxs-lookup"><span data-stu-id="f2500-142">After you [install the solution](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), view the Key Vault data by clicking the **Azure Key Vault** tile from the **Overview** page of Log Analytics.</span></span>

![afbeelding van Azure Sleutelkluis-tegel](./media/log-analytics-azure-keyvault/log-analytics-keyvault-tile.png)

<span data-ttu-id="f2500-144">Nadat u op de **overzicht** herhalen, kunt u samenvattingen van de logboekbestanden weergeven en ga vervolgens omlaag de gedetailleerde informatie voor de volgende categorieën:</span><span class="sxs-lookup"><span data-stu-id="f2500-144">After you click the **Overview** tile, you can view summaries of your logs and then drill in to details for the following categories:</span></span>

* <span data-ttu-id="f2500-145">Volume van alle sleutelkluisbewerkingen gedurende een periode</span><span class="sxs-lookup"><span data-stu-id="f2500-145">Volume of all key vault operations over time</span></span>
* <span data-ttu-id="f2500-146">Kan bewerking volumes gedurende een periode</span><span class="sxs-lookup"><span data-stu-id="f2500-146">Failed operation volumes over time</span></span>
* <span data-ttu-id="f2500-147">Gemiddelde latentie van operationele per bewerking</span><span class="sxs-lookup"><span data-stu-id="f2500-147">Average operational latency by operation</span></span>
* <span data-ttu-id="f2500-148">Quality of service voor bewerkingen met het aantal bewerkingen die meer dan 1000 ms te nemen en een lijst met bewerkingen die meer dan 1000 ms uitvoeren</span><span class="sxs-lookup"><span data-stu-id="f2500-148">Quality of service for operations with the number of operations that take more than 1000 ms and a list of operations that take more than 1000 ms</span></span>

![afbeelding van Azure Sleutelkluis-dashboard](./media/log-analytics-azure-keyvault/log-analytics-keyvault01.png)

![afbeelding van Azure Sleutelkluis-dashboard](./media/log-analytics-azure-keyvault/log-analytics-keyvault02.png)

### <a name="to-view-details-for-any-operation"></a><span data-ttu-id="f2500-151">Details voor elke bewerking weergeven</span><span class="sxs-lookup"><span data-stu-id="f2500-151">To view details for any operation</span></span>
1. <span data-ttu-id="f2500-152">Op de **overzicht** pagina, klikt u op de **Azure Key Vault** tegel.</span><span class="sxs-lookup"><span data-stu-id="f2500-152">On the **Overview** page, click the **Azure Key Vault** tile.</span></span>
2. <span data-ttu-id="f2500-153">Op de **Azure Key Vault** dashboard, Controleer de overzichtsgegevens in een van de blades, en klik op een om gedetailleerde informatie over het in de zoekpagina logboek weer te geven.</span><span class="sxs-lookup"><span data-stu-id="f2500-153">On the **Azure Key Vault** dashboard, review the summary information in one of the blades, and then click one to view detailed information about it in the log search page.</span></span>

    <span data-ttu-id="f2500-154">U kunt op elk van de zoekpagina logboek kunt resultaten weergeven door de tijd, gedetailleerde resultaten en uw Logboekgeschiedenis zoeken.</span><span class="sxs-lookup"><span data-stu-id="f2500-154">On any of the log search pages, you can view results by time, detailed results, and your log search history.</span></span> <span data-ttu-id="f2500-155">U kunt ook filteren op facetten om de resultaten te beperken.</span><span class="sxs-lookup"><span data-stu-id="f2500-155">You can also filter by facets to narrow the results.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="f2500-156">Log Analytics-records</span><span class="sxs-lookup"><span data-stu-id="f2500-156">Log Analytics records</span></span>
<span data-ttu-id="f2500-157">De Azure Sleutelkluis-oplossing analyseert records die een soort **KeyVaults** die worden verzameld van [AuditEvent logboeken](../key-vault/key-vault-logging.md) in Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="f2500-157">The Azure Key Vault solution analyzes records that have a type of **KeyVaults** that are collected from [AuditEvent logs](../key-vault/key-vault-logging.md) in Azure Diagnostics.</span></span>  <span data-ttu-id="f2500-158">Eigenschappen voor deze records zijn in de volgende tabel:</span><span class="sxs-lookup"><span data-stu-id="f2500-158">Properties for these records are in the following table:</span></span>  

| <span data-ttu-id="f2500-159">Eigenschap</span><span class="sxs-lookup"><span data-stu-id="f2500-159">Property</span></span> | <span data-ttu-id="f2500-160">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="f2500-160">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="f2500-161">Type</span><span class="sxs-lookup"><span data-stu-id="f2500-161">Type</span></span> |<span data-ttu-id="f2500-162">*AzureDiagnostics*</span><span class="sxs-lookup"><span data-stu-id="f2500-162">*AzureDiagnostics*</span></span> |
| <span data-ttu-id="f2500-163">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="f2500-163">SourceSystem</span></span> |<span data-ttu-id="f2500-164">*Azure*</span><span class="sxs-lookup"><span data-stu-id="f2500-164">*Azure*</span></span> |
| <span data-ttu-id="f2500-165">CallerIpAddress</span><span class="sxs-lookup"><span data-stu-id="f2500-165">CallerIpAddress</span></span> |<span data-ttu-id="f2500-166">IP-adres van de client die de aanvraag heeft ingediend</span><span class="sxs-lookup"><span data-stu-id="f2500-166">IP address of the client who made the request</span></span> |
| <span data-ttu-id="f2500-167">Category</span><span class="sxs-lookup"><span data-stu-id="f2500-167">Category</span></span> | <span data-ttu-id="f2500-168">*AuditEvent*</span><span class="sxs-lookup"><span data-stu-id="f2500-168">*AuditEvent*</span></span> |
| <span data-ttu-id="f2500-169">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="f2500-169">CorrelationId</span></span> |<span data-ttu-id="f2500-170">Een optionele GUID die de client kan doorgeven om de logboeken aan de clientzijde te relateren aan (Sleutelkluis-)logboeken aan de servicezijde.</span><span class="sxs-lookup"><span data-stu-id="f2500-170">An optional GUID that the client can pass to correlate client-side logs with service-side (Key Vault) logs.</span></span> |
| <span data-ttu-id="f2500-171">DurationMs</span><span class="sxs-lookup"><span data-stu-id="f2500-171">DurationMs</span></span> |<span data-ttu-id="f2500-172">De tijd die nodig was om de REST-API-aanvraag af te handelen in milliseconden.</span><span class="sxs-lookup"><span data-stu-id="f2500-172">Time it took to service the REST API request, in milliseconds.</span></span> <span data-ttu-id="f2500-173">Dit is niet opgenomen netwerklatentie, zodat de tijd die u aan de clientzijde meet mogelijk niet overeenkomt met deze tijd.</span><span class="sxs-lookup"><span data-stu-id="f2500-173">This time does not include network latency, so the time that you measure on the client side might not match this time.</span></span> |
| <span data-ttu-id="f2500-174">httpStatusCode_d</span><span class="sxs-lookup"><span data-stu-id="f2500-174">httpStatusCode_d</span></span> |<span data-ttu-id="f2500-175">HTTP-statuscode geretourneerd door de aanvraag (bijvoorbeeld *200*)</span><span class="sxs-lookup"><span data-stu-id="f2500-175">HTTP status code returned by the request (for example, *200*)</span></span> |
| <span data-ttu-id="f2500-176">id_s</span><span class="sxs-lookup"><span data-stu-id="f2500-176">id_s</span></span> |<span data-ttu-id="f2500-177">De unieke ID van de aanvraag</span><span class="sxs-lookup"><span data-stu-id="f2500-177">Unique ID of the request</span></span> |
| <span data-ttu-id="f2500-178">identity_claim_appid_g</span><span class="sxs-lookup"><span data-stu-id="f2500-178">identity_claim_appid_g</span></span> | <span data-ttu-id="f2500-179">GUID voor de toepassings-id</span><span class="sxs-lookup"><span data-stu-id="f2500-179">GUID for the application id</span></span> |
| <span data-ttu-id="f2500-180">OperationName</span><span class="sxs-lookup"><span data-stu-id="f2500-180">OperationName</span></span> |<span data-ttu-id="f2500-181">Naam van de bewerking, zoals beschreven in [logboekregistratie van Azure Sleutelkluis](../key-vault/key-vault-logging.md)</span><span class="sxs-lookup"><span data-stu-id="f2500-181">Name of the operation, as documented in [Azure Key Vault Logging](../key-vault/key-vault-logging.md)</span></span> |
| <span data-ttu-id="f2500-182">OperationVersion</span><span class="sxs-lookup"><span data-stu-id="f2500-182">OperationVersion</span></span> |<span data-ttu-id="f2500-183">REST-API-versie die door de client aangevraagde (bijvoorbeeld *2015-06-01*)</span><span class="sxs-lookup"><span data-stu-id="f2500-183">REST API version requested by the client (for example *2015-06-01*)</span></span> |
| <span data-ttu-id="f2500-184">requestUri_s</span><span class="sxs-lookup"><span data-stu-id="f2500-184">requestUri_s</span></span> |<span data-ttu-id="f2500-185">URI van de aanvraag</span><span class="sxs-lookup"><span data-stu-id="f2500-185">Uri of the request</span></span> |
| <span data-ttu-id="f2500-186">Resource</span><span class="sxs-lookup"><span data-stu-id="f2500-186">Resource</span></span> |<span data-ttu-id="f2500-187">Naam van de sleutelkluis</span><span class="sxs-lookup"><span data-stu-id="f2500-187">Name of the key vault</span></span> |
| <span data-ttu-id="f2500-188">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="f2500-188">ResourceGroup</span></span> |<span data-ttu-id="f2500-189">Resourcegroep van de sleutelkluis</span><span class="sxs-lookup"><span data-stu-id="f2500-189">Resource group of the key vault</span></span> |
| <span data-ttu-id="f2500-190">ResourceId</span><span class="sxs-lookup"><span data-stu-id="f2500-190">ResourceId</span></span> |<span data-ttu-id="f2500-191">Azure Resource Manager-resource-id.</span><span class="sxs-lookup"><span data-stu-id="f2500-191">Azure Resource Manager Resource ID.</span></span> <span data-ttu-id="f2500-192">Voor Sleutelkluis-Logboeken is dit de Sleutelkluis-bron-ID.</span><span class="sxs-lookup"><span data-stu-id="f2500-192">For Key Vault logs, this is the Key Vault resource ID.</span></span> |
| <span data-ttu-id="f2500-193">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="f2500-193">ResourceProvider</span></span> |<span data-ttu-id="f2500-194">*MICROSOFT CORPORATION. KEYVAULT*</span><span class="sxs-lookup"><span data-stu-id="f2500-194">*MICROSOFT.KEYVAULT*</span></span> |
| <span data-ttu-id="f2500-195">ResourceType</span><span class="sxs-lookup"><span data-stu-id="f2500-195">ResourceType</span></span> | <span data-ttu-id="f2500-196">*KLUIZEN*</span><span class="sxs-lookup"><span data-stu-id="f2500-196">*VAULTS*</span></span> |
| <span data-ttu-id="f2500-197">ResultSignature</span><span class="sxs-lookup"><span data-stu-id="f2500-197">ResultSignature</span></span> |<span data-ttu-id="f2500-198">HTTP-status (bijvoorbeeld *OK*)</span><span class="sxs-lookup"><span data-stu-id="f2500-198">HTTP status (for example, *OK*)</span></span> |
| <span data-ttu-id="f2500-199">ResultType</span><span class="sxs-lookup"><span data-stu-id="f2500-199">ResultType</span></span> |<span data-ttu-id="f2500-200">Resultaat van de REST-API-aanvraag (bijvoorbeeld *geslaagd*)</span><span class="sxs-lookup"><span data-stu-id="f2500-200">Result of REST API request (for example, *Success*)</span></span> |
| <span data-ttu-id="f2500-201">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="f2500-201">SubscriptionId</span></span> |<span data-ttu-id="f2500-202">Azure-abonnement-ID van het abonnement met de Sleutelkluis</span><span class="sxs-lookup"><span data-stu-id="f2500-202">Azure subscription ID of the subscription containing the Key Vault</span></span> |

## <a name="migrating-from-the-old-key-vault-solution"></a><span data-ttu-id="f2500-203">Migreren van de oude Sleutelkluis-oplossing</span><span class="sxs-lookup"><span data-stu-id="f2500-203">Migrating from the old Key Vault solution</span></span>
<span data-ttu-id="f2500-204">In januari 2017, de ondersteunde manier van het verzenden van Logboeken van de Sleutelkluis met logboekanalyse gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="f2500-204">In January 2017, the supported way of sending logs from Key Vault to Log Analytics changed.</span></span> <span data-ttu-id="f2500-205">Deze wijzigingen bieden de volgende voordelen:</span><span class="sxs-lookup"><span data-stu-id="f2500-205">These changes provide the following advantages:</span></span>
+ <span data-ttu-id="f2500-206">Logboeken geschreven rechtstreeks met logboekanalyse zonder te hoeven gebruiken van een opslagaccount</span><span class="sxs-lookup"><span data-stu-id="f2500-206">Logs are written directly to Log Analytics without the need to use a storage account</span></span>
+ <span data-ttu-id="f2500-207">Minder latentie vanaf het moment wanneer logboeken worden gegenereerd voor hen beschikbaar worden gesteld in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f2500-207">Less latency from the time when logs are generated to them being available in Log Analytics</span></span>
+ <span data-ttu-id="f2500-208">Minder configuratiestappen</span><span class="sxs-lookup"><span data-stu-id="f2500-208">Fewer configuration steps</span></span>
+ <span data-ttu-id="f2500-209">Een algemene indeling voor alle typen Azure diagnostics</span><span class="sxs-lookup"><span data-stu-id="f2500-209">A common format for all types of Azure diagnostics</span></span>

<span data-ttu-id="f2500-210">De bijgewerkte oplossing gebruiken:</span><span class="sxs-lookup"><span data-stu-id="f2500-210">To use the updated solution:</span></span>

1. [<span data-ttu-id="f2500-211">Diagnostische gegevens worden verzonden met logboekanalyse rechtstreeks vanuit de Sleutelkluis configureren</span><span class="sxs-lookup"><span data-stu-id="f2500-211">Configure diagnostics to be sent directly to Log Analytics from Key Vault</span></span>](#enable-key-vault-diagnostics-in-the-portal)  
2. <span data-ttu-id="f2500-212">De oplossing Azure Key Vault inschakelen met behulp van de procedure beschreven in [toevoegen Log Analytics-oplossingen van de galerie met oplossingen](log-analytics-add-solutions.md)</span><span class="sxs-lookup"><span data-stu-id="f2500-212">Enable the Azure Key Vault solution by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md)</span></span>
3. <span data-ttu-id="f2500-213">Bijwerken van een opgeslagen query's, dashboards of waarschuwingen te gebruiken van het nieuwe gegevenstype</span><span class="sxs-lookup"><span data-stu-id="f2500-213">Update any saved queries, dashboards, or alerts to use the new data type</span></span>
  + <span data-ttu-id="f2500-214">Type is gewijzigd van: KeyVaults naar AzureDiagnostics.</span><span class="sxs-lookup"><span data-stu-id="f2500-214">Type is change from: KeyVaults to AzureDiagnostics.</span></span> <span data-ttu-id="f2500-215">Het ResourceType kunt u filteren op Sleutelkluis Logboeken.</span><span class="sxs-lookup"><span data-stu-id="f2500-215">You can use the ResourceType to filter to Key Vault Logs.</span></span>
  - <span data-ttu-id="f2500-216">In plaats van: `Type=KeyVaults`, gebruiken`Type=AzureDiagnostics ResourceType=VAULTS`</span><span class="sxs-lookup"><span data-stu-id="f2500-216">Instead of: `Type=KeyVaults`, use `Type=AzureDiagnostics ResourceType=VAULTS`</span></span>
  + <span data-ttu-id="f2500-217">Velden: (veldnamen zijn hoofdlettergevoelig)</span><span class="sxs-lookup"><span data-stu-id="f2500-217">Fields: (Field names are case-sensitive)</span></span>
  - <span data-ttu-id="f2500-218">Voor elk veld dat een achtervoegsel van \_s, \_d, of \_g in de naam wijzigen van het eerste teken in kleine letters</span><span class="sxs-lookup"><span data-stu-id="f2500-218">For any field that has a suffix of \_s, \_d, or \_g in the name, change the first character to lower case</span></span>
  - <span data-ttu-id="f2500-219">Voor elk veld dat een achtervoegsel van \_o in naam van de gegevens is opgesplitst in afzonderlijke velden op basis van de geneste veldnamen.</span><span class="sxs-lookup"><span data-stu-id="f2500-219">For any field that has a suffix of \_o in name, the data is split into individual fields based on the nested field names.</span></span> <span data-ttu-id="f2500-220">Bijvoorbeeld, wordt de UPN van de aanroepfunctie opgeslagen in een veld`identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span><span class="sxs-lookup"><span data-stu-id="f2500-220">For example, the UPN of the caller is stored in a field `identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span></span>
   - <span data-ttu-id="f2500-221">Veld CallerIpAddress gewijzigd in CallerIPAddress</span><span class="sxs-lookup"><span data-stu-id="f2500-221">Field CallerIpAddress changed to CallerIPAddress</span></span>
   - <span data-ttu-id="f2500-222">Veld RemoteIPCountry is niet meer aanwezig</span><span class="sxs-lookup"><span data-stu-id="f2500-222">Field RemoteIPCountry is no longer present</span></span>
4. <span data-ttu-id="f2500-223">Verwijder de *Sleutelkluis Analytics (afgeschaft)* oplossing.</span><span class="sxs-lookup"><span data-stu-id="f2500-223">Remove the *Key Vault Analytics (Deprecated)* solution.</span></span> <span data-ttu-id="f2500-224">Als u met behulp van PowerShell, gebruikt u`Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that the workspace is in> -WorkspaceName <name of the log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span><span class="sxs-lookup"><span data-stu-id="f2500-224">If you are using PowerShell, use `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that the workspace is in> -WorkspaceName <name of the log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span></span>

<span data-ttu-id="f2500-225">Gegevens verzameld voordat de wijziging niet zichtbaar in de nieuwe oplossing is.</span><span class="sxs-lookup"><span data-stu-id="f2500-225">Data collected before the change is not visible in the new solution.</span></span> <span data-ttu-id="f2500-226">U kunt blijven opvragen voor deze gegevens met behulp van de oude Type en de veldnamen.</span><span class="sxs-lookup"><span data-stu-id="f2500-226">You can continue to query for this data using the old Type and field names.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="f2500-227">Problemen oplossen</span><span class="sxs-lookup"><span data-stu-id="f2500-227">Troubleshooting</span></span>
[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="next-steps"></a><span data-ttu-id="f2500-228">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="f2500-228">Next steps</span></span>
* <span data-ttu-id="f2500-229">Gebruik [zoekopdrachten aanmelden met logboekanalyse](log-analytics-log-searches.md) om gedetailleerde gegevens voor Azure Sleutelkluis te bekijken.</span><span class="sxs-lookup"><span data-stu-id="f2500-229">Use [Log searches in Log Analytics](log-analytics-log-searches.md) to view detailed Azure Key Vault data.</span></span>
