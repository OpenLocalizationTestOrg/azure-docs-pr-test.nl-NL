---
title: aaaWorking met grote Azure virtuele-Machineschaalsets | Microsoft Docs
description: Wat u moet tooknow toouse grote virtuele machine van Azure sets schalen
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a><span data-ttu-id="c9661-103">Werken met grote virtuele-machineschaalsets</span><span class="sxs-lookup"><span data-stu-id="c9661-103">Working with large virtual machine scale sets</span></span>
<span data-ttu-id="c9661-104">U kunt nu Azure maken [virtuele-machineschaalsets](/azure/virtual-machine-scale-sets/) met een capaciteit van up too1, 000 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-104">You can now create Azure [virtual machine scale sets](/azure/virtual-machine-scale-sets/) with a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="c9661-105">In dit document, een _grote virtuele-machineschaalset_ is gedefinieerd als een schaal ingesteld geschikt is voor het schalen van toogreater dan 100 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-105">In this document, a _large virtual machine scale set_ is defined as a scale set capable of scaling toogreater than 100 VMs.</span></span> <span data-ttu-id="c9661-106">Deze mogelijkheid wordt ingesteld met een schaalseteigenschap (_singlePlacementGroup=False_).</span><span class="sxs-lookup"><span data-stu-id="c9661-106">This capability is set by a scale set property (_singlePlacementGroup=False_).</span></span> 

<span data-ttu-id="c9661-107">Bepaalde aspecten van grote schaal wordt ingesteld, zoals load balancing en fouttolerantie domeinen zich anders gedragen tooa standaardschaal set.</span><span class="sxs-lookup"><span data-stu-id="c9661-107">Certain aspects of large scale sets, such as load balancing and fault domains behave differently tooa standard scale set.</span></span> <span data-ttu-id="c9661-108">Dit document wordt uitgelegd Hallo kenmerken van grote schaalsets en wordt beschreven wat u moet tooknow toosuccessfully ze gebruiken in uw toepassingen.</span><span class="sxs-lookup"><span data-stu-id="c9661-108">This document explains hello characteristics of large scale sets, and describes what you need tooknow toosuccessfully use them in your applications.</span></span> 

<span data-ttu-id="c9661-109">Een gemeenschappelijke aanpak voor het implementeren van cloudinfrastructuur op grote schaal toocreate is een reeks _schaaleenheden_, bijvoorbeeld door het maken van meerdere virtuele machines sets schalen op meerdere VNETs en storage-accounts.</span><span class="sxs-lookup"><span data-stu-id="c9661-109">A common approach for deploying cloud infrastructure at large scale is toocreate a set of _scale units_, for example by creating multiple VMs scale sets across multiple VNETs and storage accounts.</span></span> <span data-ttu-id="c9661-110">Deze aanpak geeft u eenvoudiger beheer vergeleken toosingle VM's en meerdere schaaleenheden zijn handig voor veel toepassingen, met name de waarvoor andere stapelbare onderdelen, zoals meerdere virtuele netwerken en eindpunten.</span><span class="sxs-lookup"><span data-stu-id="c9661-110">This approach provides easier management compared toosingle VMs, and multiple scale units are useful for many applications, particularly those that require other stackable components like multiple virtual networks and endpoints.</span></span> <span data-ttu-id="c9661-111">Als uw toepassing echter een grote cluster vereist, kan het eenvoudiger toodeploy één scale van too1, 000 VM's instellen zijn.</span><span class="sxs-lookup"><span data-stu-id="c9661-111">If your application requires a single large cluster however, it can be more straightforward toodeploy a single scale set of up too1,000 VMs.</span></span> <span data-ttu-id="c9661-112">Voorbeeldscenario's zijn gecentraliseerde big data-implementaties, of rekenrasters die een eenvoudig beheer van een grote groep werkrolknooppunten vereisen.</span><span class="sxs-lookup"><span data-stu-id="c9661-112">Example scenarios include centralized big data deployments, or compute grids requiring simple management of a large pool of worker nodes.</span></span> <span data-ttu-id="c9661-113">In combinatie met VM-schaalaanpassingsset [gegevensschijven gekoppeld](virtual-machine-scale-sets-attached-disks.md), grote schaal stelt u in staat stellen toodeploy een schaalbare infrastructuur, die bestaan uit duizenden kernen en petabytes aan opslag, als een enkele bewerking.</span><span class="sxs-lookup"><span data-stu-id="c9661-113">Combined with VM scale set [attached data disks](virtual-machine-scale-sets-attached-disks.md), large scale sets enable you toodeploy a scalable infrastructure consisting of thousands of cores and petabytes of storage, as a single operation.</span></span>

## <a name="placement-groups"></a><span data-ttu-id="c9661-114">Plaatsingsgroepen</span><span class="sxs-lookup"><span data-stu-id="c9661-114">Placement groups</span></span> 
<span data-ttu-id="c9661-115">Wat maakt een _grote_ schaal instelt speciale is geen Hallo aantal virtuele machines, maar Hallo aantal _plaatsing groepen_ bevat.</span><span class="sxs-lookup"><span data-stu-id="c9661-115">What makes a _large_ scale set special is not hello number of VMs, but hello number of _placement groups_ it contains.</span></span> <span data-ttu-id="c9661-116">Een groep plaatsing is een constructie vergelijkbare tooan Azure beschikbaarheidsset, met een eigen domeinen met fouten en upgradedomeinen.</span><span class="sxs-lookup"><span data-stu-id="c9661-116">A placement group is a construct similar tooan Azure availability set, with its own fault domains and upgrade domains.</span></span> <span data-ttu-id="c9661-117">Standaard bestaat een schaalset uit één plaatsingsgroep met een omvang van maximaal 100 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-117">By default, a scale set consists of a single placement group with a maximum size of 100 VMs.</span></span> <span data-ttu-id="c9661-118">Als de eigenschap met de naam van een schaalset _singlePlacementGroup_ too_false_, is ingesteld Hallo scale set kunnen moet bestaan uit meerdere plaatsing groepen en heeft een bereik van 0-1000 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-118">If a scale set property called _singlePlacementGroup_ is set too_false_, hello scale set can be composed of multiple placement groups and has a range of 0-1,000 VMs.</span></span> <span data-ttu-id="c9661-119">Als de standaardwaarde toohello van ingesteld _true_, een scale-set bestaat uit een groep één plaatsing en heeft een bereik van 0-100 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-119">When set toohello default value of _true_, a scale set is composed of a single placement group, and has a range of 0-100 VMs.</span></span>

## <a name="checklist-for-using-large-scale-sets"></a><span data-ttu-id="c9661-120">Controlelijst voor het gebruik van grote schaalsets</span><span class="sxs-lookup"><span data-stu-id="c9661-120">Checklist for using large scale sets</span></span>
<span data-ttu-id="c9661-121">toodecide of uw toepassing kunt aanbrengen effectief gebruik van grote schaalsets, kunt u overwegen Hallo volgens de vereisten:</span><span class="sxs-lookup"><span data-stu-id="c9661-121">toodecide whether your application can make effective use of large scale sets, consider hello following requirements:</span></span>

- <span data-ttu-id="c9661-122">Grote schaalsets vereisen Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="c9661-122">Large scale sets require Azure Managed Disks.</span></span> <span data-ttu-id="c9661-123">Voor schaalsets die niet worden gemaakt met Managed Disks zijn meerdere opslagaccounts vereist (één voor elke 20 virtuele machines).</span><span class="sxs-lookup"><span data-stu-id="c9661-123">Scale sets that are not created with Managed Disks require multiple storage accounts (one for every 20 VMs).</span></span> <span data-ttu-id="c9661-124">Grote schaalsets zijn ontworpen toowork uitsluitend met schijven beheerd tooreduce uw storage management overhead en tooavoid Hallo risico van het uitvoeren van abonnement is beperkt voor opslagaccounts.</span><span class="sxs-lookup"><span data-stu-id="c9661-124">Large scale sets are designed toowork exclusively with Managed Disks tooreduce your storage management overhead, and tooavoid hello risk of running into subscription limits for storage accounts.</span></span> <span data-ttu-id="c9661-125">Als u geen beheerde schijven gebruikt, is uw schaalset beperkt too100 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-125">If you do not use Managed Disks, your scale set is limited too100 VMs.</span></span>
- <span data-ttu-id="c9661-126">Gemaakt op basis van installatiekopieën van Azure Marketplace-schaalsets kunnen opschalen van too1, 000 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-126">Scale sets created from Azure Marketplace images can scale up too1,000 VMs.</span></span>
- <span data-ttu-id="c9661-127">Gemaakt op basis van aangepaste installatiekopieën (VM-installatiekopieën u maken en uploaden zelf)-schaalsets kunnen momenteel opschalen van too100 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="c9661-127">Scale sets created from custom images (VM images you create and upload yourself) can currently scale up too100 VMs.</span></span>
- <span data-ttu-id="c9661-128">Laag 4 taakverdeling met hello Azure Load Balancer is nog niet ondersteund voor schaalsets bestaat uit meerdere groepen voor plaatsing.</span><span class="sxs-lookup"><span data-stu-id="c9661-128">Layer-4 load balancing with hello Azure Load Balancer is not yet supported for scale sets composed of multiple placement groups.</span></span> <span data-ttu-id="c9661-129">Als u toouse hello Azure Load Balancer Zorg ervoor dat Hallo schaal instelt moet is een groep één plaatsing, wat de standaardinstelling Hallo is geconfigureerde toouse.</span><span class="sxs-lookup"><span data-stu-id="c9661-129">If you need toouse hello Azure Load Balancer make sure hello scale set is configured toouse a single placement group, which is hello default setting.</span></span>
- <span data-ttu-id="c9661-130">Laag 7 taakverdeling met hello Azure Application Gateway wordt ondersteund voor alle-schaalsets.</span><span class="sxs-lookup"><span data-stu-id="c9661-130">Layer-7 load balancing with hello Azure Application Gateway is supported for all scale sets.</span></span>
- <span data-ttu-id="c9661-131">Een scale-set is gedefinieerd met één subnet: Zorg ervoor dat uw subnet is een adresruimte die groot genoeg zijn voor alle Hallo VM die u nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="c9661-131">A scale set is defined with a single subnet - make sure your subnet has an address space large enough for all hello VMs you need.</span></span> <span data-ttu-id="c9661-132">Standaard een schaal overprovisions ingesteld (leidt tot extra virtuele machines tijdens de implementatie of het uitbreiden, die u niet weet in rekening gebracht voor) tooimprove implementatie betrouwbaarheid en prestaties.</span><span class="sxs-lookup"><span data-stu-id="c9661-132">By default a scale set overprovisions (creates extra VMs at deployment time or when scaling out, which you are not charged for) tooimprove deployment reliability and performance.</span></span> <span data-ttu-id="c9661-133">Toestaan dat voor een groter dan het aantal virtuele machines die u van plan bent tooscale op Hallo van adresruimte 20%.</span><span class="sxs-lookup"><span data-stu-id="c9661-133">Allow for an address space 20% greater than hello number of VMs you plan tooscale to.</span></span>
- <span data-ttu-id="c9661-134">Als u van plan bent toodeploy veel VM's, moet de quotalimieten voor uw berekenings-core toobe verhoogd.</span><span class="sxs-lookup"><span data-stu-id="c9661-134">If you are planning toodeploy many VMs, your Compute core quota limits may need toobe increased.</span></span>
- <span data-ttu-id="c9661-135">Fout- en upgradedomeinen zijn alleen consistent binnen een plaatsingsgroep.</span><span class="sxs-lookup"><span data-stu-id="c9661-135">Fault domains and upgrade domains are only consistent within a placement group.</span></span> <span data-ttu-id="c9661-136">Deze architectuur wordt niet gewijzigd Hallo algemene beschikbaarheid van een schaal instellen, zoals virtuele machines gelijkmatig worden verdeeld over verschillende fysieke hardware, maar wordt uitgevoerd betekent dat als u twee virtuele machines op andere hardware zijn tooguarantee moet zorg ervoor dat ze zich in verschillende domeinen met fouten domeinen in dezelfde groep van de plaatsing Hallo.</span><span class="sxs-lookup"><span data-stu-id="c9661-136">This architecture does not change hello overall availability of a scale set, as VMs are evenly distributed across distinct physical hardware, but it does means that if you need tooguarantee two VMs are on different hardware, make sure they are in different fault domains in hello same placement group.</span></span> <span data-ttu-id="c9661-137">Fout domein en de plaatsing groeps-ID worden weergegeven in Hallo _weergave exemplaar_ instellen van een schaal VM.</span><span class="sxs-lookup"><span data-stu-id="c9661-137">Fault domain and placement group ID are shown in hello _instance view_ of a scale set VM.</span></span> <span data-ttu-id="c9661-138">U kunt Hallo instantieweergave van een VM-schaalset bevatten weergeven in Hallo [Azure Resource Explorer](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c9661-138">You can view hello instance view of a scale set VM in hello [Azure Resource Explorer](https://resources.azure.com/).</span></span>


## <a name="creating-a-large-scale-set"></a><span data-ttu-id="c9661-139">Een grote schaalset maken</span><span class="sxs-lookup"><span data-stu-id="c9661-139">Creating a large scale set</span></span>
<span data-ttu-id="c9661-140">Wanneer u een schaal instellen in hello Azure-portal maakt, kunt u toestaan deze tooscale toomultiple plaatsing groepen door Hallo instelling _limiet tooa één plaatsing groep_ optie too_False_ in Hallo _basisbeginselen_ blade.</span><span class="sxs-lookup"><span data-stu-id="c9661-140">When you create a scale set in hello Azure portal, you can allow it tooscale toomultiple placement groups by setting hello _Limit tooa single placement group_ option too_False_ in hello _Basics_ blade.</span></span> <span data-ttu-id="c9661-141">Met deze optie set too_False_, kunt u een _aantal exemplaar_ waarde van too1, 000.</span><span class="sxs-lookup"><span data-stu-id="c9661-141">With this option set too_False_, you can specify an _Instance count_ value of up too1,000.</span></span>

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

<span data-ttu-id="c9661-142">Kunt u een VM grootschalige ingesteld met Hallo [Azure CLI](https://github.com/Azure/azure-cli) _az vmss maken_ opdracht.</span><span class="sxs-lookup"><span data-stu-id="c9661-142">You can create a large VM scale set using hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss create_ command.</span></span> <span data-ttu-id="c9661-143">Met deze opdracht ingesteld intelligent standaardinstellingen zoals subnetgrootte op basis van Hallo _aantal exemplaren_ argument:</span><span class="sxs-lookup"><span data-stu-id="c9661-143">This command sets intelligent defaults such as subnet size based on hello _instance-count_ argument:</span></span>

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
<span data-ttu-id="c9661-144">Houd er rekening mee dat Hallo _vmss maken_ wordt standaard een bepaalde configuratiewaarden als u ze niet opgeven.</span><span class="sxs-lookup"><span data-stu-id="c9661-144">Note that hello _vmss create_ command defaults certain configuration values if you do not specify them.</span></span> <span data-ttu-id="c9661-145">toosee hello beschikbare opties die u kunt onderdrukken, probeer:</span><span class="sxs-lookup"><span data-stu-id="c9661-145">toosee hello available options that you can override, try:</span></span>
```bash
az vmss create --help
```

<span data-ttu-id="c9661-146">Als u een grote schaal ingesteld door het opstellen van een Azure Resource Manager-sjabloon maakt, zorg er dan voor dat Hallo-sjabloon maakt u een scale-set op basis van beheerde Azure-schijven.</span><span class="sxs-lookup"><span data-stu-id="c9661-146">If you are creating a large scale set by composing an Azure Resource Manager template, make sure hello template creates a scale set based on Azure Managed Disks.</span></span> <span data-ttu-id="c9661-147">U kunt instellen Hallo _singlePlacementGroup_ eigenschap too_false_ in Hallo _eigenschappen_ sectie Hallo _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span><span class="sxs-lookup"><span data-stu-id="c9661-147">You can set hello _singlePlacementGroup_ property too_false_ in hello _properties_ section of hello _Microsoft.Compute/virtualMAchineScaleSets_ resource.</span></span> <span data-ttu-id="c9661-148">Hallo volgende JSON-fragment toont Hallo begin van een scale set sjabloon, inclusief Hallo 1.000 VM-capaciteit en Hallo _'singlePlacementGroup': false_ instelling:</span><span class="sxs-lookup"><span data-stu-id="c9661-148">hello following JSON fragment shows hello beginning of a scale set template, including hello 1,000 VM capacity and hello _"singlePlacementGroup" : false_ setting:</span></span>
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
<span data-ttu-id="c9661-149">Voor een compleet voorbeeld van een grote schaal stelt u de sjabloon, raadpleeg dan te[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span><span class="sxs-lookup"><span data-stu-id="c9661-149">For a complete example of a large scale set template, refer too[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).</span></span>

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a><span data-ttu-id="c9661-150">Toospan instellen meerdere plaatsing groepen converteren van een bestaande schaal</span><span class="sxs-lookup"><span data-stu-id="c9661-150">Converting an existing scale set toospan multiple placement groups</span></span>
<span data-ttu-id="c9661-151">toomake een bestaande VM-geschikt is schaalset voor het schalen van toomore dan 100 virtuele machines, moet u toochange hello _singplePlacementGroup_ eigenschap too_false_ in Hallo scale model instelt.</span><span class="sxs-lookup"><span data-stu-id="c9661-151">toomake an existing VM scale set capable of scaling toomore than 100 VMs, you need toochange hello _singplePlacementGroup_ property too_false_ in hello scale set model.</span></span> <span data-ttu-id="c9661-152">U kunt testen met het wijzigen van deze eigenschap Hello [Azure Resource Explorer](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c9661-152">You can test changing this property with hello [Azure Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="c9661-153">Zoeken naar een bestaande schaalset, selecteer _bewerken_ en wijzig Hallo _singlePlacementGroup_ eigenschap.</span><span class="sxs-lookup"><span data-stu-id="c9661-153">Find an existing scale set, select _Edit_ and change hello _singlePlacementGroup_ property.</span></span> <span data-ttu-id="c9661-154">Als u deze eigenschap niet ziet, kan worden weergegeven, Hallo scale ingesteld met een oudere versie van Hallo Microsoft.Compute-API.</span><span class="sxs-lookup"><span data-stu-id="c9661-154">If you do not see this property, you may be viewing hello scale set with an older version of hello Microsoft.Compute API.</span></span>

>[!NOTE] 
<span data-ttu-id="c9661-155">U kunt een ingesteld op basis van een enkele plaatsing groep alleen (Hallo standaardgedrag) tooa ondersteunen meerdere plaatsing groepen ondersteunende schaal wijzigen, maar Hallo andersom kan niet worden geconverteerd.</span><span class="sxs-lookup"><span data-stu-id="c9661-155">You can change a scale set from supporting a single placement group only (hello default behavior) tooa supporting multiple placement groups, but you cannot convert hello other way around.</span></span> <span data-ttu-id="c9661-156">Zorg daarom dat u weet Hallo eigenschappen van grote schaalsets voordat deze wordt geconverteerd.</span><span class="sxs-lookup"><span data-stu-id="c9661-156">Therefore make sure you understand hello properties of large scale sets before converting.</span></span> <span data-ttu-id="c9661-157">Zorg in het bijzonder, hoeft u geen laag 4 taakverdeling met hello Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="c9661-157">In particular, make sure you do not need layer-4 load balancing with hello Azure Load Balancer.</span></span>


