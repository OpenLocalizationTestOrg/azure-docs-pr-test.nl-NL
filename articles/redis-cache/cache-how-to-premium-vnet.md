---
title: een virtueel netwerk voor een Premium Azure Redis-Cache aaaConfigure | Microsoft Docs
description: Meer informatie over hoe toocreate en Virtual Network-ondersteuning voor uw exemplaren Premium-laag Azure Redis-Cache beheren
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 8b1e43a0-a70e-41e6-8994-0ac246d8bf7f
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 05/15/2017
ms.author: sdanie
ms.openlocfilehash: fab715f4d9365ee4c2f8b89d2e2e58768c25b671
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-virtual-network-support-for-a-premium-azure-redis-cache"></a><span data-ttu-id="82627-103">Hoe tooconfigure Virtual Network-ondersteuning voor een Premium Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="82627-103">How tooconfigure Virtual Network Support for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="82627-104">Azure Redis-Cache heeft verschillende cache aanbiedingen die flexibiliteit bij het Hallo-keuze van de cachegrootte en -onderdelen bieden, met inbegrip van Premium-laag functies zoals clustering, persistentie en virtual network-ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="82627-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="82627-105">Een VNet is een particulier netwerk in Hallo cloud.</span><span class="sxs-lookup"><span data-stu-id="82627-105">A VNet is a private network in hello cloud.</span></span> <span data-ttu-id="82627-106">Wanneer een Azure Redis-Cache-exemplaar is geconfigureerd met een VNet, is niet openbaar toegankelijk en kunnen alleen worden geopend vanuit virtuele machines en toepassingen binnen Hallo VNet.</span><span class="sxs-lookup"><span data-stu-id="82627-106">When an Azure Redis Cache instance is configured with a VNet, it is not publicly addressable and can only be accessed from virtual machines and applications within hello VNet.</span></span> <span data-ttu-id="82627-107">Dit artikel wordt beschreven hoe het virtuele netwerk tooconfigure ondersteuning bieden voor een premium Azure Redis-Cache-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="82627-107">This article describes how tooconfigure virtual network support for a premium Azure Redis Cache instance.</span></span>

> [!NOTE]
> <span data-ttu-id="82627-108">Azure Redis-Cache ondersteunt zowel klassieke en Resource Manager VNets.</span><span class="sxs-lookup"><span data-stu-id="82627-108">Azure Redis Cache supports both classic and Resource Manager VNets.</span></span>
> 
> 

<span data-ttu-id="82627-109">Zie voor informatie over andere functies van premium-cache, [inleiding toohello Azure Redis-Cache Premium-laag](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="82627-109">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="why-vnet"></a><span data-ttu-id="82627-110">Waarom VNet?</span><span class="sxs-lookup"><span data-stu-id="82627-110">Why VNet?</span></span>
<span data-ttu-id="82627-111">[Azure-netwerk (VNet)](https://azure.microsoft.com/services/virtual-network/) implementatie biedt verbeterde beveiliging en isolatie voor uw Azure Redis-Cache, evenals de subnetten, toegangscontrolebeleid, en andere functies toofurther toegang beperken.</span><span class="sxs-lookup"><span data-stu-id="82627-111">[Azure Virtual Network (VNet)](https://azure.microsoft.com/services/virtual-network/) deployment provides enhanced security and isolation for your Azure Redis Cache, as well as subnets, access control policies, and other features toofurther restrict access.</span></span>

## <a name="virtual-network-support"></a><span data-ttu-id="82627-112">Virtual network-ondersteuning</span><span class="sxs-lookup"><span data-stu-id="82627-112">Virtual network support</span></span>
<span data-ttu-id="82627-113">Ondersteuning voor Virtual Network (VNet) is geconfigureerd op Hallo **nieuwe Redis-Cache** blade tijdens het maken van de cache.</span><span class="sxs-lookup"><span data-stu-id="82627-113">Virtual Network (VNet) support is configured on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="82627-114">Nadat u een premium-prijscategorie hebt geselecteerd, kunt u VNet Redis-integratie configureren met behulp van een VNet dat in Hallo hetzelfde abonnement en dezelfde locatie als uw cache.</span><span class="sxs-lookup"><span data-stu-id="82627-114">Once you have selected a premium pricing tier, you can configure Redis VNet integration by selecting a VNet that is in hello same subscription and location as your cache.</span></span> <span data-ttu-id="82627-115">toouse een nieuw VNet maken het eerst door de volgende stappen in Hallo [een virtueel netwerk maken met Azure-portal Hallo](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) of [een virtueel netwerk (klassiek) maken met behulp van Azure-portal Hallo](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) en ga daarna terug toohello **Nieuwe Redis-Cache** blade toocreate en configureren van uw premium-cache.</span><span class="sxs-lookup"><span data-stu-id="82627-115">toouse a new VNet, create it first by following hello steps in [Create a virtual network using hello Azure portal](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) or [Create a virtual network (classic) by using hello Azure portal](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) and then return toohello **New Redis Cache** blade toocreate and configure your premium cache.</span></span>

<span data-ttu-id="82627-116">tooconfigure hello VNet voor de nieuwe cache, klikt u op **virtueel netwerk** op Hallo **nieuwe Redis-Cache** blade en selecteer Hallo gewenst VNet uit de vervolgkeuzelijst Hallo.</span><span class="sxs-lookup"><span data-stu-id="82627-116">tooconfigure hello VNet for your new cache, click **Virtual Network** on hello **New Redis Cache** blade, and select hello desired VNet from hello drop-down list.</span></span>

![Virtueel netwerk][redis-cache-vnet]

<span data-ttu-id="82627-118">Selecteer de gewenste subnet uit Hallo Hallo **Subnet** vervolgkeuzelijst lijst en geef de gewenste Hallo **statisch IP-adres**.</span><span class="sxs-lookup"><span data-stu-id="82627-118">Select hello desired subnet from hello **Subnet** drop-down list, and specify hello desired **Static IP address**.</span></span> <span data-ttu-id="82627-119">Als u van een klassiek VNet hello gebruikmaakt **statisch IP-adres** veld is optioneel en als niets wordt opgegeven, wordt een gekozen van subnet Hallo geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="82627-119">If you are using a classic VNet hello **Static IP address** field is optional, and if none is specified, one is chosen from hello selected subnet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="82627-120">Bij het implementeren van een Azure Redis-Cache tooa Resource Manager VNet moet Hallo cache een toegewezen subnet dat geen andere resources, met uitzondering van Azure Redis-Cache-exemplaren bevat.</span><span class="sxs-lookup"><span data-stu-id="82627-120">When deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resources except for Azure Redis Cache instances.</span></span> <span data-ttu-id="82627-121">Als wordt geprobeerd toodeploy wordt een Azure Redis-Cache tooa Resource Manager VNet tooa subnet met andere resources, het Hallo-implementatie mislukt.</span><span class="sxs-lookup"><span data-stu-id="82627-121">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet tooa subnet that contains other resources, hello deployment fails.</span></span>
> 
> 

![Virtueel netwerk][redis-cache-vnet-ip]

> [!IMPORTANT]
> <span data-ttu-id="82627-123">Azure bepaalde IP-adressen binnen elk subnet gereserveerd en deze adressen kunnen niet worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="82627-123">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="82627-124">Hallo zijn eerste en laatste IP-adressen van Hallo subnetten gereserveerd voor protocol overeenstemming, samen met drie meer adressen voor Azure-services gebruikt.</span><span class="sxs-lookup"><span data-stu-id="82627-124">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="82627-125">Zie voor meer informatie [zijn er beperkingen voor het gebruik van IP-adressen binnen deze subnetten?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="82627-125">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>
> 
> <span data-ttu-id="82627-126">Bij toevoeging toohello IP-adressen die worden gebruikt door hello Azure VNET infrastructuur, elke Redis-exemplaar in Hallo subnet gebruikt twee IP-adressen per shard en één extra IP-adres voor Hallo load balancer.</span><span class="sxs-lookup"><span data-stu-id="82627-126">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="82627-127">Een niet-geclusterde cache wordt beschouwd als een shard toohave.</span><span class="sxs-lookup"><span data-stu-id="82627-127">A non-clustered cache is considered toohave one shard.</span></span>
> 
> 

<span data-ttu-id="82627-128">Nadat het Hallo-cache wordt gemaakt, kunt u Hallo-configuratie voor Hallo VNet weergeven door te klikken op **virtueel netwerk** van Hallo **Resource menu**.</span><span class="sxs-lookup"><span data-stu-id="82627-128">After hello cache is created, you can view hello configuration for hello VNet by clicking **Virtual Network** from hello **Resource menu**.</span></span>

![Virtueel netwerk][redis-cache-vnet-info]

<span data-ttu-id="82627-130">tooconnect tooyour Azure Redis-cache-exemplaar bij gebruik van een VNet Geef Hallo-hostnaam van uw cache in de verbindingsreeks Hallo zoals weergegeven in het volgende voorbeeld Hallo:</span><span class="sxs-lookup"><span data-stu-id="82627-130">tooconnect tooyour Azure Redis cache instance when using a VNet, specify hello host name of your cache in hello connection string as shown in hello following example:</span></span>

    private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
    {
        return ConnectionMultiplexer.Connect("contoso5premium.redis.cache.windows.net,abortConnect=false,ssl=true,password=password");
    });

    public static ConnectionMultiplexer Connection
    {
        get
        {
            return lazyConnection.Value;
        }
    }

## <a name="azure-redis-cache-vnet-faq"></a><span data-ttu-id="82627-131">Azure Redis-Cache VNet Veelgestelde vragen</span><span class="sxs-lookup"><span data-stu-id="82627-131">Azure Redis Cache VNet FAQ</span></span>
<span data-ttu-id="82627-132">Hallo volgende lijst bevat toocommonly van antwoorden op veelgestelde vragen over het schalen van hello Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="82627-132">hello following list contains answers toocommonly asked questions about hello Azure Redis Cache scaling.</span></span>

* [<span data-ttu-id="82627-133">Wat zijn enkele veelvoorkomende configuratiefouten bij Azure Redis-Cache en VNets?</span><span class="sxs-lookup"><span data-stu-id="82627-133">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>](#what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets)
* [<span data-ttu-id="82627-134">Hoe kan ik mijn cache werkt in een VNET controleren?</span><span class="sxs-lookup"><span data-stu-id="82627-134">How can I verify that my cache is working in a VNET?</span></span>](#how-can-i-verify-that-my-cache-is-working-in-a-vnet)
* [<span data-ttu-id="82627-135">Kan ik VNets met een standaard of basic-cache gebruiken?</span><span class="sxs-lookup"><span data-stu-id="82627-135">Can I use VNets with a standard or basic cache?</span></span>](#can-i-use-vnets-with-a-standard-or-basic-cache)
* [<span data-ttu-id="82627-136">Waarom een Redis-cache niet in sommige subnetten maar geen andere?</span><span class="sxs-lookup"><span data-stu-id="82627-136">Why does creating a Redis cache fail in some subnets but not others?</span></span>](#why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others)
* [<span data-ttu-id="82627-137">Wat zijn Hallo subnet adresvereisten?</span><span class="sxs-lookup"><span data-stu-id="82627-137">What are hello subnet address space requirements?</span></span>](#what-are-the-subnet-address-space-requirements)
* [<span data-ttu-id="82627-138">Werk alle functies van de cache bij het hosten van een cache in een VNET?</span><span class="sxs-lookup"><span data-stu-id="82627-138">Do all cache features work when hosting a cache in a VNET?</span></span>](#do-all-cache-features-work-when-hosting-a-cache-in-a-vnet)

## <a name="what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets"></a><span data-ttu-id="82627-139">Wat zijn enkele veelvoorkomende configuratiefouten bij Azure Redis-Cache en VNets?</span><span class="sxs-lookup"><span data-stu-id="82627-139">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>
<span data-ttu-id="82627-140">Wanneer Azure Redis-Cache wordt gehost in een VNet, worden Hallo-poorten in Hallo volgende tabellen gebruikt.</span><span class="sxs-lookup"><span data-stu-id="82627-140">When Azure Redis Cache is hosted in a VNet, hello ports in hello following tables are used.</span></span> 

>[!IMPORTANT]
><span data-ttu-id="82627-141">Als het Hallo-poorten in Hallo volgende tabellen worden geblokkeerd, is het mogelijk dat Hallo cache niet goed werkt.</span><span class="sxs-lookup"><span data-stu-id="82627-141">If hello ports in hello following tables are blocked, hello cache may not function correctly.</span></span> <span data-ttu-id="82627-142">Met een of meer van deze poorten geblokkeerd is Hallo meest voorkomende onjuiste configuratie probleem wanneer u Azure Redis-Cache in een VNet.</span><span class="sxs-lookup"><span data-stu-id="82627-142">Having one or more of these ports blocked is hello most common misconfiguration issue when using Azure Redis Cache in a VNet.</span></span>
> 
> 

- [<span data-ttu-id="82627-143">Vereisten voor de uitgaande poort</span><span class="sxs-lookup"><span data-stu-id="82627-143">Outbound port requirements</span></span>](#outbound-port-requirements)
- [<span data-ttu-id="82627-144">Vereisten voor de binnenkomende poort</span><span class="sxs-lookup"><span data-stu-id="82627-144">Inbound port requirements</span></span>](#inbound-port-requirements)

### <a name="outbound-port-requirements"></a><span data-ttu-id="82627-145">Vereisten voor de uitgaande poort</span><span class="sxs-lookup"><span data-stu-id="82627-145">Outbound port requirements</span></span>

<span data-ttu-id="82627-146">Er zijn zeven vereisten van de uitgaande poort.</span><span class="sxs-lookup"><span data-stu-id="82627-146">There are seven outbound port requirements.</span></span>

- <span data-ttu-id="82627-147">Indien gewenst, alle uitgaande verbindingen toohello internet via een client kan worden gemaakt op lokale controlemogelijkheden apparaten.</span><span class="sxs-lookup"><span data-stu-id="82627-147">If desired, all outbound connections toohello internet can be made through a client's on-premises auditing device.</span></span>
- <span data-ttu-id="82627-148">Drie Hallo poorten verkeer tooAzure eindpunten onderhoud Azure Storage en Azure DNS worden gerouteerd.</span><span class="sxs-lookup"><span data-stu-id="82627-148">Three of hello ports route traffic tooAzure endpoints servicing Azure Storage and Azure DNS.</span></span>
- <span data-ttu-id="82627-149">Hallo resterende poortbereiken en voor interne communicatie voor Redis-subnet.</span><span class="sxs-lookup"><span data-stu-id="82627-149">hello remaining port ranges and for internal Redis subnet communications.</span></span> <span data-ttu-id="82627-150">Er is geen subnet NSG-regels zijn vereist voor interne communicatie voor Redis-subnet.</span><span class="sxs-lookup"><span data-stu-id="82627-150">No subnet NSG rules are required for internal Redis subnet communications.</span></span>

| <span data-ttu-id="82627-151">Poort(en)</span><span class="sxs-lookup"><span data-stu-id="82627-151">Port(s)</span></span> | <span data-ttu-id="82627-152">Richting</span><span class="sxs-lookup"><span data-stu-id="82627-152">Direction</span></span> | <span data-ttu-id="82627-153">Protocol-Transport</span><span class="sxs-lookup"><span data-stu-id="82627-153">Transport Protocol</span></span> | <span data-ttu-id="82627-154">Doel</span><span class="sxs-lookup"><span data-stu-id="82627-154">Purpose</span></span> | <span data-ttu-id="82627-155">Lokaal IP</span><span class="sxs-lookup"><span data-stu-id="82627-155">Local IP</span></span> | <span data-ttu-id="82627-156">Externe IP</span><span class="sxs-lookup"><span data-stu-id="82627-156">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="82627-157">80, 443</span><span class="sxs-lookup"><span data-stu-id="82627-157">80, 443</span></span> |<span data-ttu-id="82627-158">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-158">Outbound</span></span> |<span data-ttu-id="82627-159">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-159">TCP</span></span> |<span data-ttu-id="82627-160">Redis-afhankelijkheden op Azure Storage/PKI (Internet)</span><span class="sxs-lookup"><span data-stu-id="82627-160">Redis dependencies on Azure Storage/PKI (Internet)</span></span> | <span data-ttu-id="82627-161">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-161">(Redis subnet)</span></span> |* |
| <span data-ttu-id="82627-162">53</span><span class="sxs-lookup"><span data-stu-id="82627-162">53</span></span> |<span data-ttu-id="82627-163">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-163">Outbound</span></span> |<span data-ttu-id="82627-164">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="82627-164">TCP/UDP</span></span> |<span data-ttu-id="82627-165">Afhankelijkheden van DNS (Internet/VNet) redis</span><span class="sxs-lookup"><span data-stu-id="82627-165">Redis dependencies on DNS (Internet/VNet)</span></span> | <span data-ttu-id="82627-166">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-166">(Redis subnet)</span></span> |* |
| <span data-ttu-id="82627-167">8443</span><span class="sxs-lookup"><span data-stu-id="82627-167">8443</span></span> |<span data-ttu-id="82627-168">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-168">Outbound</span></span> |<span data-ttu-id="82627-169">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-169">TCP</span></span> |<span data-ttu-id="82627-170">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-170">Internal communications for Redis</span></span> | <span data-ttu-id="82627-171">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-171">(Redis subnet)</span></span> | <span data-ttu-id="82627-172">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-172">(Redis subnet)</span></span> |
| <span data-ttu-id="82627-173">10221-10231</span><span class="sxs-lookup"><span data-stu-id="82627-173">10221-10231</span></span> |<span data-ttu-id="82627-174">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-174">Outbound</span></span> |<span data-ttu-id="82627-175">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-175">TCP</span></span> |<span data-ttu-id="82627-176">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-176">Internal communications for Redis</span></span> | <span data-ttu-id="82627-177">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-177">(Redis subnet)</span></span> | <span data-ttu-id="82627-178">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-178">(Redis subnet)</span></span> |
| <span data-ttu-id="82627-179">20226</span><span class="sxs-lookup"><span data-stu-id="82627-179">20226</span></span> |<span data-ttu-id="82627-180">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-180">Outbound</span></span> |<span data-ttu-id="82627-181">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-181">TCP</span></span> |<span data-ttu-id="82627-182">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-182">Internal communications for Redis</span></span> | <span data-ttu-id="82627-183">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-183">(Redis subnet)</span></span> |<span data-ttu-id="82627-184">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-184">(Redis subnet)</span></span> |
| <span data-ttu-id="82627-185">13000-13999</span><span class="sxs-lookup"><span data-stu-id="82627-185">13000-13999</span></span> |<span data-ttu-id="82627-186">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-186">Outbound</span></span> |<span data-ttu-id="82627-187">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-187">TCP</span></span> |<span data-ttu-id="82627-188">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-188">Internal communications for Redis</span></span> | <span data-ttu-id="82627-189">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-189">(Redis subnet)</span></span> |<span data-ttu-id="82627-190">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-190">(Redis subnet)</span></span> |
| <span data-ttu-id="82627-191">15000-15999</span><span class="sxs-lookup"><span data-stu-id="82627-191">15000-15999</span></span> |<span data-ttu-id="82627-192">Uitgaand</span><span class="sxs-lookup"><span data-stu-id="82627-192">Outbound</span></span> |<span data-ttu-id="82627-193">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-193">TCP</span></span> |<span data-ttu-id="82627-194">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-194">Internal communications for Redis</span></span> | <span data-ttu-id="82627-195">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-195">(Redis subnet)</span></span> |<span data-ttu-id="82627-196">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-196">(Redis subnet)</span></span> |


### <a name="inbound-port-requirements"></a><span data-ttu-id="82627-197">Vereisten voor de binnenkomende poort</span><span class="sxs-lookup"><span data-stu-id="82627-197">Inbound port requirements</span></span>

<span data-ttu-id="82627-198">Er zijn acht vereisten voor het bereik van binnenkomende poort.</span><span class="sxs-lookup"><span data-stu-id="82627-198">There are eight inbound port range requirements.</span></span> <span data-ttu-id="82627-199">Inkomende aanvragen in deze bereiken zijn inkomende verkeer van andere services die worden gehost in Hallo hetzelfde VNET of interne toohello Redis subnet communicatie.</span><span class="sxs-lookup"><span data-stu-id="82627-199">Inbound requests in these ranges are either inbound from other services hosted in hello same VNET or internal toohello Redis subnet communications.</span></span>

| <span data-ttu-id="82627-200">Poort(en)</span><span class="sxs-lookup"><span data-stu-id="82627-200">Port(s)</span></span> | <span data-ttu-id="82627-201">Richting</span><span class="sxs-lookup"><span data-stu-id="82627-201">Direction</span></span> | <span data-ttu-id="82627-202">Protocol-Transport</span><span class="sxs-lookup"><span data-stu-id="82627-202">Transport Protocol</span></span> | <span data-ttu-id="82627-203">Doel</span><span class="sxs-lookup"><span data-stu-id="82627-203">Purpose</span></span> | <span data-ttu-id="82627-204">Lokaal IP</span><span class="sxs-lookup"><span data-stu-id="82627-204">Local IP</span></span> | <span data-ttu-id="82627-205">Externe IP</span><span class="sxs-lookup"><span data-stu-id="82627-205">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="82627-206">6379, 6380</span><span class="sxs-lookup"><span data-stu-id="82627-206">6379, 6380</span></span> |<span data-ttu-id="82627-207">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-207">Inbound</span></span> |<span data-ttu-id="82627-208">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-208">TCP</span></span> |<span data-ttu-id="82627-209">Client communicatie tooRedis, Azure taakverdeling</span><span class="sxs-lookup"><span data-stu-id="82627-209">Client communication tooRedis, Azure load balancing</span></span> | <span data-ttu-id="82627-210">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-210">(Redis subnet)</span></span> |<span data-ttu-id="82627-211">Virtueel netwerk, Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="82627-211">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-212">8443</span><span class="sxs-lookup"><span data-stu-id="82627-212">8443</span></span> |<span data-ttu-id="82627-213">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-213">Inbound</span></span> |<span data-ttu-id="82627-214">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-214">TCP</span></span> |<span data-ttu-id="82627-215">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-215">Internal communications for Redis</span></span> | <span data-ttu-id="82627-216">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-216">(Redis subnet)</span></span> |<span data-ttu-id="82627-217">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-217">(Redis subnet)</span></span> |
| <span data-ttu-id="82627-218">8500</span><span class="sxs-lookup"><span data-stu-id="82627-218">8500</span></span> |<span data-ttu-id="82627-219">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-219">Inbound</span></span> |<span data-ttu-id="82627-220">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="82627-220">TCP/UDP</span></span> |<span data-ttu-id="82627-221">Azure load balancing</span><span class="sxs-lookup"><span data-stu-id="82627-221">Azure load balancing</span></span> | <span data-ttu-id="82627-222">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-222">(Redis subnet)</span></span> |<span data-ttu-id="82627-223">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="82627-223">Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-224">10221-10231</span><span class="sxs-lookup"><span data-stu-id="82627-224">10221-10231</span></span> |<span data-ttu-id="82627-225">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-225">Inbound</span></span> |<span data-ttu-id="82627-226">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-226">TCP</span></span> |<span data-ttu-id="82627-227">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-227">Internal communications for Redis</span></span> | <span data-ttu-id="82627-228">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-228">(Redis subnet)</span></span> |<span data-ttu-id="82627-229">(Redis subnet), Load Balancer van Azure</span><span class="sxs-lookup"><span data-stu-id="82627-229">(Redis subnet), Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-230">13000-13999</span><span class="sxs-lookup"><span data-stu-id="82627-230">13000-13999</span></span> |<span data-ttu-id="82627-231">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-231">Inbound</span></span> |<span data-ttu-id="82627-232">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-232">TCP</span></span> |<span data-ttu-id="82627-233">Client communicatie tooRedis Clusters, Azure load balancing</span><span class="sxs-lookup"><span data-stu-id="82627-233">Client communication tooRedis Clusters, Azure load balancing</span></span> | <span data-ttu-id="82627-234">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-234">(Redis subnet)</span></span> |<span data-ttu-id="82627-235">Virtueel netwerk, Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="82627-235">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-236">15000-15999</span><span class="sxs-lookup"><span data-stu-id="82627-236">15000-15999</span></span> |<span data-ttu-id="82627-237">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-237">Inbound</span></span> |<span data-ttu-id="82627-238">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-238">TCP</span></span> |<span data-ttu-id="82627-239">Client communicatie tooRedis Clusters, Azure load Balancing</span><span class="sxs-lookup"><span data-stu-id="82627-239">Client communication tooRedis Clusters, Azure load Balancing</span></span> | <span data-ttu-id="82627-240">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-240">(Redis subnet)</span></span> |<span data-ttu-id="82627-241">Virtueel netwerk, Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="82627-241">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-242">16001</span><span class="sxs-lookup"><span data-stu-id="82627-242">16001</span></span> |<span data-ttu-id="82627-243">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-243">Inbound</span></span> |<span data-ttu-id="82627-244">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="82627-244">TCP/UDP</span></span> |<span data-ttu-id="82627-245">Azure load balancing</span><span class="sxs-lookup"><span data-stu-id="82627-245">Azure load balancing</span></span> | <span data-ttu-id="82627-246">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-246">(Redis subnet)</span></span> |<span data-ttu-id="82627-247">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="82627-247">Azure Load Balancer</span></span> |
| <span data-ttu-id="82627-248">20226</span><span class="sxs-lookup"><span data-stu-id="82627-248">20226</span></span> |<span data-ttu-id="82627-249">Inkomend</span><span class="sxs-lookup"><span data-stu-id="82627-249">Inbound</span></span> |<span data-ttu-id="82627-250">TCP</span><span class="sxs-lookup"><span data-stu-id="82627-250">TCP</span></span> |<span data-ttu-id="82627-251">Interne communicatie voor Redis</span><span class="sxs-lookup"><span data-stu-id="82627-251">Internal communications for Redis</span></span> | <span data-ttu-id="82627-252">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-252">(Redis subnet)</span></span> |<span data-ttu-id="82627-253">(Redis subnet)</span><span class="sxs-lookup"><span data-stu-id="82627-253">(Redis subnet)</span></span> |

### <a name="additional-vnet-network-connectivity-requirements"></a><span data-ttu-id="82627-254">Aanvullende VNET-connectiviteit netwerkvereisten</span><span class="sxs-lookup"><span data-stu-id="82627-254">Additional VNET network connectivity requirements</span></span>

<span data-ttu-id="82627-255">Er zijn verbindingsproblemen netwerkvereisten voor Azure Redis-Cache kan niet in eerste instantie in een virtueel netwerk worden voldaan.</span><span class="sxs-lookup"><span data-stu-id="82627-255">There are network connectivity requirements for Azure Redis Cache that may not be initially met in a virtual network.</span></span> <span data-ttu-id="82627-256">Azure Redis-Cache is vereist op dat alle Hallo items toofunction correct bij gebruik binnen een virtueel netwerk te volgen.</span><span class="sxs-lookup"><span data-stu-id="82627-256">Azure Redis Cache requires all hello following items toofunction properly when used within a virtual network.</span></span>

* <span data-ttu-id="82627-257">Uitgaande connectiviteit tooAzure opslag netwerkeindpunten overal ter wereld.</span><span class="sxs-lookup"><span data-stu-id="82627-257">Outbound network connectivity tooAzure Storage endpoints worldwide.</span></span> <span data-ttu-id="82627-258">Dit omvat eindpunten zich in Hallo dezelfde regio bevinden als hello Azure Redis-Cache-exemplaar, evenals de storage-eindpunten zich in **andere** Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="82627-258">This includes endpoints located in hello same region as hello Azure Redis Cache instance, as well as storage endpoints located in **other** Azure regions.</span></span> <span data-ttu-id="82627-259">Azure Storage-eindpunten omgezet onder de volgende DNS-domeinen Hallo: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, en *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="82627-259">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, and *file.core.windows.net*.</span></span> 
* <span data-ttu-id="82627-260">Uitgaande netwerkverbinding te*ocsp.msocsp.com*, *mscrl.microsoft.com*, en *crl.microsoft.com*. Deze connectiviteit is benodigde toosupport SSL-functionaliteit.</span><span class="sxs-lookup"><span data-stu-id="82627-260">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com*, and *crl.microsoft.com*. This connectivity is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="82627-261">Hallo DNS-configuratie voor het virtuele netwerk Hallo moet geschikt is voor het oplossen van alle Hallo eindpunten en domeinen die zijn vermeld in Hallo eerdere punten.</span><span class="sxs-lookup"><span data-stu-id="82627-261">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span> <span data-ttu-id="82627-262">Deze DNS-vereisten kunnen worden voldaan door te zorgen voor een geldig DNS-infrastructuur is geconfigureerd en onderhouden voor Hallo virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="82627-262">These DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>
* <span data-ttu-id="82627-263">Uitgaande network connectivity toohello Azure Monitoring-eindpunten die onder de volgende DNS-domeinen Hallo oplossen na: shoebox2 black.shoebox2.metrics.nsatc.net, Noord-prod2.prod2.metrics.nsatc.net azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, Oost-prod2.prod2.metrics.nsatc.net azglobal-red.azglobal.metrics.nsatc.net.</span><span class="sxs-lookup"><span data-stu-id="82627-263">Outbound network connectivity toohello following Azure Monitoring endpoints, which resolve under hello following DNS domains: shoebox2-black.shoebox2.metrics.nsatc.net, north-prod2.prod2.metrics.nsatc.net, azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, east-prod2.prod2.metrics.nsatc.net, azglobal-red.azglobal.metrics.nsatc.net.</span></span>

### <a name="how-can-i-verify-that-my-cache-is-working-in-a-vnet"></a><span data-ttu-id="82627-264">Hoe kan ik mijn cache werkt in een VNET controleren?</span><span class="sxs-lookup"><span data-stu-id="82627-264">How can I verify that my cache is working in a VNET?</span></span>

>[!IMPORTANT]
><span data-ttu-id="82627-265">Wanneer u verbinding maakt tooan Azure Redis-Cache-exemplaar dat wordt gehost in een VNET, Hallo uw cache moeten clients zich in hetzelfde VNET, met inbegrip van de testtoepassingen of diagnostische hulpprogramma's voor pingen.</span><span class="sxs-lookup"><span data-stu-id="82627-265">When connecting tooan Azure Redis Cache instance that is hosted in a VNET, your cache clients must be in hello same VNET, including any test applications or diagnostic pinging tools.</span></span>
>
>

<span data-ttu-id="82627-266">Nadat port requirements for Windows hello zijn geconfigureerd zoals beschreven in de vorige sectie hello, kunt u controleren of uw cache werkt door Hallo volgende stappen uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="82627-266">Once hello port requirements are configured as described in hello previous section, you can verify that your cache is working by performing hello following steps.</span></span>

- <span data-ttu-id="82627-267">[Opnieuw opstarten](cache-administration.md#reboot) Hallo alle knooppunten in de cache.</span><span class="sxs-lookup"><span data-stu-id="82627-267">[Reboot](cache-administration.md#reboot) all of hello cache nodes.</span></span> <span data-ttu-id="82627-268">Als alle Hallo vereiste cacheafhankelijkheden kunnen niet worden bereikt (zoals beschreven in [Poortvereisten voor binnenkomende](cache-how-to-premium-vnet.md#inbound-port-requirements) en [uitgaande Poortvereisten](cache-how-to-premium-vnet.md#outbound-port-requirements)), Hallo cache niet kunnen toorestart is.</span><span class="sxs-lookup"><span data-stu-id="82627-268">If all of hello required cache dependencies can't be reached (as documented in [Inbound port requirements](cache-how-to-premium-vnet.md#inbound-port-requirements) and [Outbound port requirements](cache-how-to-premium-vnet.md#outbound-port-requirements)), hello cache won't be able toorestart successfully.</span></span>
- <span data-ttu-id="82627-269">Nadat de cache-knooppunten Hallo opnieuw hebt opgestart (zoals gerapporteerd door de status van de cache in Azure-portal Hallo Hallo), kunt u Hallo volgende tests uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="82627-269">Once hello cache nodes have restarted (as reported by hello cache status in hello Azure portal), you can perform hello following tests:</span></span>
  - <span data-ttu-id="82627-270">Hallo cache-eindpunt (met behulp van poort 6380) vanaf een machine die zich binnen Hallo pingen hetzelfde VNET als Hallo cache, met behulp van [tcping](https://www.elifulkerson.com/projects/tcping.php).</span><span class="sxs-lookup"><span data-stu-id="82627-270">ping hello cache endpoint (using port 6380) from a machine that is within hello same VNET as hello cache, using [tcping](https://www.elifulkerson.com/projects/tcping.php).</span></span> <span data-ttu-id="82627-271">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="82627-271">For example:</span></span>
    
    `tcping.exe contosocache.redis.cache.windows.net 6380`
    
    <span data-ttu-id="82627-272">Als hello `tcping` tool meldt dat Hallo-poort is geopend, Hallo-cache is beschikbaar voor de verbinding van clients in Hallo VNET.</span><span class="sxs-lookup"><span data-stu-id="82627-272">If hello `tcping` tool reports that hello port is open, hello cache is available for connection from clients in hello VNET.</span></span>

  - <span data-ttu-id="82627-273">Tootest van een andere manier is een test-cacheclient toocreate (die mogelijk een eenvoudige consoletoepassing met StackExchange.Redis) die verbinding maakt toohello cache en toegevoegd enkele items uit de cache Hallo opgehaald.</span><span class="sxs-lookup"><span data-stu-id="82627-273">Another way tootest is toocreate a test cache client (which could be a simple console application using StackExchange.Redis) that connects toohello cache and adds and retrieves some items from hello cache.</span></span> <span data-ttu-id="82627-274">Installeer Hallo voorbeeld clienttoepassing op een virtuele machine die zich in hetzelfde VNET als Hallo cache Hallo en voer dit tooverify connectiviteit toohello cache.</span><span class="sxs-lookup"><span data-stu-id="82627-274">Install hello sample client application onto a VM that is in hello same VNET as hello cache and run it tooverify connectivity toohello cache.</span></span>


### <a name="can-i-use-vnets-with-a-standard-or-basic-cache"></a><span data-ttu-id="82627-275">Kan ik VNets met een standaard of basic-cache gebruiken?</span><span class="sxs-lookup"><span data-stu-id="82627-275">Can I use VNets with a standard or basic cache?</span></span>
<span data-ttu-id="82627-276">VNets kan alleen worden gebruikt met premium-caches.</span><span class="sxs-lookup"><span data-stu-id="82627-276">VNets can only be used with premium caches.</span></span>

### <a name="why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others"></a><span data-ttu-id="82627-277">Waarom een Redis-cache niet in sommige subnetten maar geen andere?</span><span class="sxs-lookup"><span data-stu-id="82627-277">Why does creating a Redis cache fail in some subnets but not others?</span></span>
<span data-ttu-id="82627-278">Als u een Azure Redis-Cache tooa Resource Manager VNet implementeert, moet Hallo cache zich in een speciale subnet op dat er is geen resourcetype bevat.</span><span class="sxs-lookup"><span data-stu-id="82627-278">If you are deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resource type.</span></span> <span data-ttu-id="82627-279">Als wordt geprobeerd toodeploy wordt een Azure Redis-Cache tooa Resource Manager VNet subnet met andere resources, het Hallo-implementatie mislukt.</span><span class="sxs-lookup"><span data-stu-id="82627-279">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet subnet that contains other resources, hello deployment fails.</span></span> <span data-ttu-id="82627-280">Voordat u een nieuwe Redis-cache kunt maken, moet u bestaande resources binnen het subnet Hallo Hallo verwijderen.</span><span class="sxs-lookup"><span data-stu-id="82627-280">You must delete hello existing resources inside hello subnet before you can create a new Redis cache.</span></span>

<span data-ttu-id="82627-281">U kunt meerdere typen implementeren van resources tooa klassieke VNet, zolang er voldoende IP-adressen beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="82627-281">You can deploy multiple types of resources tooa classic VNet as long as you have enough IP addresses available.</span></span>

### <a name="what-are-hello-subnet-address-space-requirements"></a><span data-ttu-id="82627-282">Wat zijn Hallo subnet adresvereisten?</span><span class="sxs-lookup"><span data-stu-id="82627-282">What are hello subnet address space requirements?</span></span>
<span data-ttu-id="82627-283">Azure bepaalde IP-adressen binnen elk subnet gereserveerd en deze adressen kunnen niet worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="82627-283">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="82627-284">Hallo zijn eerste en laatste IP-adressen van Hallo subnetten gereserveerd voor protocol overeenstemming, samen met drie meer adressen voor Azure-services gebruikt.</span><span class="sxs-lookup"><span data-stu-id="82627-284">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="82627-285">Zie voor meer informatie [zijn er beperkingen voor het gebruik van IP-adressen binnen deze subnetten?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="82627-285">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>

<span data-ttu-id="82627-286">Bij toevoeging toohello IP-adressen die worden gebruikt door hello Azure VNET infrastructuur, elke Redis-exemplaar in Hallo subnet gebruikt twee IP-adressen per shard en één extra IP-adres voor Hallo load balancer.</span><span class="sxs-lookup"><span data-stu-id="82627-286">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="82627-287">Een niet-geclusterde cache wordt beschouwd als een shard toohave.</span><span class="sxs-lookup"><span data-stu-id="82627-287">A non-clustered cache is considered toohave one shard.</span></span>

### <a name="do-all-cache-features-work-when-hosting-a-cache-in-a-vnet"></a><span data-ttu-id="82627-288">Werk alle functies van de cache bij het hosten van een cache in een VNET?</span><span class="sxs-lookup"><span data-stu-id="82627-288">Do all cache features work when hosting a cache in a VNET?</span></span>
<span data-ttu-id="82627-289">Als uw cache deel van een VNET uitmaakt, toegang alleen clients in VNET Hallo Hallo-cache.</span><span class="sxs-lookup"><span data-stu-id="82627-289">When your cache is part of a VNET, only clients in hello VNET can access hello cache.</span></span> <span data-ttu-id="82627-290">Als gevolg hiervan werken hello volgende cache functies niet op dit moment.</span><span class="sxs-lookup"><span data-stu-id="82627-290">As a result, hello following cache management features don't work at this time.</span></span>

* <span data-ttu-id="82627-291">Console redis - omdat Redis-Console wordt uitgevoerd in uw lokale browser, die zich buiten de Hallo VNET, het tooyour cache kan geen verbinding kunt maken.</span><span class="sxs-lookup"><span data-stu-id="82627-291">Redis Console - Because Redis Console runs in your local browser, which is outside hello VNET, it can't connect tooyour cache.</span></span>

## <a name="use-expressroute-with-azure-redis-cache"></a><span data-ttu-id="82627-292">ExpressRoute gebruiken met Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="82627-292">Use ExpressRoute with Azure Redis Cache</span></span>
<span data-ttu-id="82627-293">Klanten kunnen verbinding maken met een [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) circuit tootheir virtuele netwerkinfrastructuur, waardoor hun lokale netwerk tooAzure uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="82627-293">Customers can connect an [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span> 

<span data-ttu-id="82627-294">Standaard een nieuwe ExpressRoute-circuit voert geen geforceerde tunneling (aankondiging van een standaardroute 0.0.0.0/0) op een VNET.</span><span class="sxs-lookup"><span data-stu-id="82627-294">By default, a newly created ExpressRoute circuit does not perform forced tunneling (advertisement of a default route, 0.0.0.0/0) on a VNET.</span></span> <span data-ttu-id="82627-295">Als gevolg hiervan uitgaande internetverbinding is toegestaan rechtstreeks vanuit Hallo VNET en clienttoepassingen kunnen tooconnect tooother Azure zijn eindpunten, met inbegrip van Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="82627-295">As a result, outbound Internet connectivity is allowed directly from hello VNET and client applications are able tooconnect tooother Azure endpoints including Azure Redis Cache.</span></span>

<span data-ttu-id="82627-296">Een algemene configuratie van de klant is echter toouse geforceerde tunneling (adverteren een standaardroute) waardoor uitgaande Internet verkeer tooinstead stroom lokale.</span><span class="sxs-lookup"><span data-stu-id="82627-296">However a common customer configuration is toouse forced tunneling (advertise a default route) which forces outbound Internet traffic tooinstead flow on-premises.</span></span> <span data-ttu-id="82627-297">Dit netwerkverkeer wordt verbroken verbinding met Azure Redis-Cache als uitgaand verkeer Hallo vervolgens lokale geblokkeerd zodat hello Azure Redis-Cache-exemplaar niet kunnen toocommunicate met de bijbehorende afhankelijkheden is.</span><span class="sxs-lookup"><span data-stu-id="82627-297">This traffic flow breaks connectivity with Azure Redis Cache if hello outbound traffic is then blocked on-premises such that hello Azure Redis Cache instance is not able toocommunicate with its dependencies.</span></span>

<span data-ttu-id="82627-298">Hallo-oplossing is toodefine een (of meer) gebruiker gedefinieerde routes (udr's) op Hallo subnet met hello Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="82627-298">hello solution is toodefine one (or more) user-defined routes (UDRs) on hello subnet that contains hello Azure Redis Cache.</span></span> <span data-ttu-id="82627-299">Een UDR definieert subnet-specifieke routes die in plaats van de standaardroute Hallo gehonoreerd.</span><span class="sxs-lookup"><span data-stu-id="82627-299">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="82627-300">Indien mogelijk, wordt aangeraden toouse Hallo volgende configuratie:</span><span class="sxs-lookup"><span data-stu-id="82627-300">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="82627-301">Hallo ExpressRoute configuratie kondigt 0.0.0.0/0 en standaard force alle uitgaande verkeer lokale tunnels.</span><span class="sxs-lookup"><span data-stu-id="82627-301">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="82627-302">Hallo UDR toegepast toohello subnet hello Azure Redis-Cache met definieert 0.0.0.0/0 met een werkende route voor TCP/IP-verkeer toohello openbare internet. bijvoorbeeld door het instellen van Hallo van volgende hop type too'Internet'.</span><span class="sxs-lookup"><span data-stu-id="82627-302">hello UDR applied toohello subnet containing hello Azure Redis Cache defines 0.0.0.0/0 with a working route for TCP/IP traffic toohello public internet; for example by setting hello next hop type too'Internet'.</span></span>

<span data-ttu-id="82627-303">Hallo is gecombineerde effect van deze stappen dat Hallo subnetniveau UDR voorrang hebben op Hallo ExpressRoute geforceerde tunneling, zodat uitgaande toegang tot Internet vanaf hello Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="82627-303">hello combined effect of these steps is that hello subnet level UDR takes precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello Azure Redis Cache.</span></span>

<span data-ttu-id="82627-304">Maken van verbinding tooan Azure Redis-Cache-exemplaar van een on-premises toepassing met behulp van ExpressRoute is niet een typische gebruiksscenario vanwege redenen tooperformance (clients moeten voor de beste prestaties Azure Redis-Cache in Hallo dezelfde regio bevinden als hello Azure Redis-Cache).</span><span class="sxs-lookup"><span data-stu-id="82627-304">Connecting tooan Azure Redis Cache instance from an on-premises application using ExpressRoute is not a typical usage scenario due tooperformance reasons (for best performance Azure Redis Cache clients should be in hello same region as hello Azure Redis Cache).</span></span>

>[!IMPORTANT] 
><span data-ttu-id="82627-305">Hallo routes die zijn gedefinieerd in een UDR **moet** worden specifiek genoeg tootake voorrang boven alle routes die worden geadverteerd door Hallo ExpressRoute configuratie.</span><span class="sxs-lookup"><span data-stu-id="82627-305">hello routes defined in a UDR **must** be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="82627-306">Hallo volgende voorbeeld wordt Hallo brede 0.0.0.0/0-adresbereik, en als zodanig kan mogelijk worden per ongeluk genegeerd door route-advertisements met behulp van specifieke adresbereiken.</span><span class="sxs-lookup"><span data-stu-id="82627-306">hello following example uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>

>[!WARNING]  
><span data-ttu-id="82627-307">Azure Redis-Cache wordt niet ondersteund met ExpressRoute-configuraties die **onjuist cross-adverteert routes van Hallo pad toohello persoonlijke peering pad voor openbare peering**.</span><span class="sxs-lookup"><span data-stu-id="82627-307">Azure Redis Cache is not supported with ExpressRoute configurations that **incorrectly cross-advertise routes from hello public peering path toohello private peering path**.</span></span> <span data-ttu-id="82627-308">ExpressRoute-configuraties waarvoor openbare peering is geconfigureerd, ontvangt de route-advertisements van Microsoft voor een groot aantal Microsoft Azure-IP-adresbereiken.</span><span class="sxs-lookup"><span data-stu-id="82627-308">ExpressRoute configurations that have public peering configured, receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="82627-309">Als deze adresbereiken onjuist cross aangekondigd op Hallo-pad voor persoonlijke peering, is Hallo resultaat dat alle uitgaande pakketten van subnet hello Azure Redis-Cache van het exemplaar van de klant ten onrechte force via een tunnel tooa on-premises netwerk infrastructuur.</span><span class="sxs-lookup"><span data-stu-id="82627-309">If these address ranges are incorrectly cross-advertised on hello private peering path, hello result is that all outbound network packets from hello Azure Redis Cache instance's subnet are incorrectly force-tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="82627-310">Deze stroom van het netwerk verbreekt Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="82627-310">This network flow breaks Azure Redis Cache.</span></span> <span data-ttu-id="82627-311">Hallo oplossing toothis probleem is toostop cross-adverteert routes van Hallo pad toohello persoonlijke peering pad voor openbare peering.</span><span class="sxs-lookup"><span data-stu-id="82627-311">hello solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>


<span data-ttu-id="82627-312">Achtergrondinformatie over de gebruiker gedefinieerde routes zijn beschikbaar in deze [overzicht](../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="82627-312">Background information on user-defined routes is available in this [overview](../virtual-network/virtual-networks-udr-overview.md).</span></span>

<span data-ttu-id="82627-313">Zie voor meer informatie over ExpressRoute [technisch overzicht van ExpressRoute](../expressroute/expressroute-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="82627-313">For more information about ExpressRoute, see [ExpressRoute technical overview](../expressroute/expressroute-introduction.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="82627-314">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="82627-314">Next steps</span></span>
<span data-ttu-id="82627-315">Meer informatie over hoe meer premium toouse functies in de cache.</span><span class="sxs-lookup"><span data-stu-id="82627-315">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="82627-316">Inleiding toohello Azure Redis-Cache Premium-laag</span><span class="sxs-lookup"><span data-stu-id="82627-316">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-vnet]: ./media/cache-how-to-premium-vnet/redis-cache-vnet.png

[redis-cache-vnet-ip]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-ip.png

[redis-cache-vnet-info]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-info.png

