---
title: aaaHow tooconfigure gegevenspersistentie voor een Premium Azure Redis-Cache
description: Meer informatie over hoe tooconfigure en uw Azure Redis-Cache-exemplaren van Premium-laag voor gegevenspersistentie beheren
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="fb9fd-103">Hoe tooconfigure gegevenspersistentie voor een Premium Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="fb9fd-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="fb9fd-104">Azure Redis-Cache heeft verschillende cache aanbiedingen die flexibiliteit bij het Hallo-keuze van de cachegrootte en -onderdelen bieden, met inbegrip van Premium-laag functies zoals clustering, persistentie en virtual network-ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="fb9fd-105">Dit artikel wordt beschreven hoe tooconfigure persistentie in een premium Azure Redis-Cache exemplaar.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="fb9fd-106">Zie voor informatie over andere functies van premium-cache, [inleiding toohello Azure Redis-Cache Premium-laag](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="fb9fd-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="fb9fd-107">Wat is gegevenspersistentie?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-107">What is data persistence?</span></span>
<span data-ttu-id="fb9fd-108">[Redis-persistentie](https://redis.io/topics/persistence) kunt u toopersist opgeslagen gegevens in Redis.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="fb9fd-109">U kunt ook momentopnamen en back-up Hallo-gegevens die u in het geval van een hardwarefout laden kunt.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="fb9fd-110">Dit is een grote voordeel ten opzichte van Basic of standaardcategorie waarbij alle gegevens Hallo wordt opgeslagen in het geheugen en kunnen er mogelijk gegevensverlies in geval van een storing waar Cache-knooppunten niet beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="fb9fd-111">Azure Redis-Cache biedt Redis-persistentie met Hallo modellen te volgen:</span><span class="sxs-lookup"><span data-stu-id="fb9fd-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="fb9fd-112">**RDB persistentie** -persistentie wanneer RDB (Redis database) is geconfigureerd, Azure Redis-Cache een momentopname van Redis-cache in een binaire indeling toodisk op basis van een configureerbare back-upfrequentie Redis Hallo blijft bestaan.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="fb9fd-113">Als er een onherstelbare gebeurtenis optreedt die zowel Hallo primaire en replica cache uitgeschakeld, is Hallo cache opnieuw met de meest recente momentopname Hallo samengesteld.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="fb9fd-114">Meer informatie over Hallo [voordelen](https://redis.io/topics/persistence#rdb-advantages) en [nadelen](https://redis.io/topics/persistence#rdb-disadvantages) van RDB persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="fb9fd-115">**AOF persistentie** -persistentie wanneer AOF (alleen Append-bestand) is geconfigureerd, Azure Redis-Cache worden opgeslagen voor elke schrijven tooa bewerkingslogboek dat ten minste eenmaal per seconde bij een Azure Storage-account is opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="fb9fd-116">Als er een onherstelbare gebeurtenis optreedt die zowel Hallo primaire en replica cache uitgeschakeld, is Hallo cache opnieuw samengesteld met behulp van schrijfbewerkingen Hallo opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="fb9fd-117">Meer informatie over Hallo [voordelen](https://redis.io/topics/persistence#aof-advantages) en [nadelen](https://redis.io/topics/persistence#aof-disadvantages) van AOF persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="fb9fd-118">Persistentie wordt geconfigureerd via Hallo **nieuwe Redis-Cache** blade tijdens het maken van de cache en op Hallo **Resource menu** voor bestaande premium in de cache opslaat.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="fb9fd-119">Nadat een premium-prijscategorie is geselecteerd, klikt u op **Redis-persistentie**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Redis-persistentie][redis-cache-persistence]

<span data-ttu-id="fb9fd-121">Hallo stappen in de volgende sectie Hallo Beschrijf hoe tooconfigure Redis-persistentie op uw nieuwe premium-cache.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="fb9fd-122">Zodra de Redis-persistentie is geconfigureerd, klikt u op **maken** toocreate uw nieuwe premium in de cache met Redis-persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="fb9fd-123">Redis-persistentie inschakelen</span><span class="sxs-lookup"><span data-stu-id="fb9fd-123">Enable Redis persistence</span></span>

<span data-ttu-id="fb9fd-124">Redis-persistentie is ingeschakeld op Hallo **Redis-gegevenspersistentie** blade door het kiezen van een **RDB** of **AOF** persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="fb9fd-125">Deze blade wordt voor nieuwe caches geopend tijdens het Hallo-cache maken, zoals beschreven in de vorige sectie Hallo.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="fb9fd-126">Voor bestaande caches Hallo **Redis-gegevenspersistentie** blade wordt geopend vanuit Hallo **Resource menu** voor uw cache.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Instellingen voor redis][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="fb9fd-128">RDB persistentie configureren</span><span class="sxs-lookup"><span data-stu-id="fb9fd-128">Configure RDB persistence</span></span>

<span data-ttu-id="fb9fd-129">tooenable RDB persistentie, klikt u op **RDB**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="fb9fd-130">toodisable RDB persistentie op een eerder ingeschakelde premium-cache, klikt u op **uitgeschakelde**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis-persistentie RDB][redis-cache-rdb-persistence]

<span data-ttu-id="fb9fd-132">tooconfigure hello back-up-interval, selecteer een **back-upfrequentie** uit de vervolgkeuzelijst Hallo.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="fb9fd-133">U kunt kiezen uit **15 minuten**, **30 minuten**, **60 minuten**, **6 uur**, **12 uur**, en **24 uur**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="fb9fd-134">Dit interval begint te tellen omlaag nadat Hallo eerdere back-upbewerking is voltooid en wanneer deze is verstreken een nieuwe back-up wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="fb9fd-135">Klik op **Opslagaccount** tooselect Hallo storage account toouse en kies ofwel Hallo **primaire sleutel** of **secundaire sleutel** toouse van Hallo **opslag Sleutel** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="fb9fd-136">U moet een opslagaccount kiezen in Hallo dezelfde regio bevinden als het Hallo-cache, en een **Premium-opslag** account wordt aanbevolen omdat premium-opslag heeft een hogere doorvoer.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="fb9fd-137">Als Hallo-opslagsleutel voor uw account persistentie wordt opnieuw gegenereerd, moet u de gewenste sleutel Hallo in Hallo configureren **opslagsleutel** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="fb9fd-138">Klik op **OK** toosave Hallo persistentie configuratie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="fb9fd-139">Hallo volgende back-up (of eerste back-up voor nieuwe caches) wordt gestart zodra hello back-upfrequentie-interval is verstreken.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="fb9fd-140">AOF persistentie configureren</span><span class="sxs-lookup"><span data-stu-id="fb9fd-140">Configure AOF persistence</span></span>

<span data-ttu-id="fb9fd-141">tooenable AOF persistentie, klikt u op **AOF**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="fb9fd-142">toodisable AOF persistentie op een eerder ingeschakelde premium-cache, klikt u op **uitgeschakelde**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis-persistentie AOF][redis-cache-aof-persistence]

<span data-ttu-id="fb9fd-144">tooconfigure AOF persistentie, Geef een **eerste Opslagaccount**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="fb9fd-145">Dit opslagaccount moet Hallo dezelfde regio bevinden als het Hallo-cache, en een **Premium-opslag** account wordt aanbevolen omdat premium-opslag heeft een hogere doorvoer.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="fb9fd-146">U kunt desgewenst een extra storage-account met de naam **tweede Opslagaccount**.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="fb9fd-147">Als een tweede storage-account is geconfigureerd, hello schrijfbewerkingen toohello replica cache worden geschreven toothis tweede storage-account.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="fb9fd-148">Kies voor elke geconfigureerde opslagaccount beide Hallo **primaire sleutel** of **secundaire sleutel** toouse van Hallo **opslagsleutel** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="fb9fd-149">Als Hallo-opslagsleutel voor uw account persistentie wordt opnieuw gegenereerd, moet u de gewenste sleutel Hallo in Hallo configureren **opslagsleutel** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="fb9fd-150">Wanneer de persistentie AOF is ingeschakeld, schrijven operations toohello cache toohello aangewezen storage-account (of accounts als u een tweede storage-account hebt geconfigureerd) worden opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="fb9fd-151">In geval van een onherstelbare fout Hallo gebruikt dat vindt u beide Hallo primaire en replica-cache, hello opgeslagen AOF logboek is toorebuild Hallo cache.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="fb9fd-152">Persistentie Veelgestelde vragen</span><span class="sxs-lookup"><span data-stu-id="fb9fd-152">Persistence FAQ</span></span>
<span data-ttu-id="fb9fd-153">Hallo bevat volgende lijst toocommonly van antwoorden op veelgestelde vragen over Azure Redis-Cache persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="fb9fd-154">Kan ik persistentie op een eerder gemaakte cache inschakelen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="fb9fd-155">Kan ik AOF en RDB persistentie op Hallo inschakelen hetzelfde moment?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="fb9fd-156">Welk model persistentie moet ik kiezen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="fb9fd-157">Wat gebeurt er als ik tooa andere grootte hebt aangepast en een back-up is hersteld die is gemaakt voordat de bewerking schalen Hallo?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="fb9fd-158">RDB persistentie</span><span class="sxs-lookup"><span data-stu-id="fb9fd-158">RDB persistence</span></span>
* [<span data-ttu-id="fb9fd-159">Kan ik Hallo RDB back-upfrequentie wijzigen nadat het maken van Hallo-cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="fb9fd-160">Waarom als ik een back-upfrequentie RDB van 60 minuten er meer dan 60 minuten tussen back-ups is?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="fb9fd-161">Wat gebeurt er toohello oude RDB back-ups wanneer een nieuwe back-up wordt gemaakt?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="fb9fd-162">AOF persistentie</span><span class="sxs-lookup"><span data-stu-id="fb9fd-162">AOF persistence</span></span>
* [<span data-ttu-id="fb9fd-163">Wanneer moet ik een tweede storage-account gebruiken?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="fb9fd-164">Ondersteunt AOF persistentie invloed in de gehele, latentie, of de prestaties van mijn cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="fb9fd-165">Hoe kan ik Hallo tweede storage-account verwijderen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="fb9fd-166">Wat is er een herschrijven en wat betekent dat voor mijn cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="fb9fd-167">Wat moet ik verwachten tijdens het schalen van een cache met AOF ingeschakeld?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="fb9fd-168">Hoe wordt mijn gegevens AOF ingedeeld in de opslag?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="fb9fd-169">Kan ik persistentie op een eerder gemaakte cache inschakelen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="fb9fd-170">Ja, Redis-persistentie kan worden geconfigureerd op de cache maken en bestaande premium in de cache van.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="fb9fd-171">Kan ik AOF en RDB persistentie op Hallo inschakelen hetzelfde moment?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="fb9fd-172">Nee, kunt u alleen RDB of AOF, maar niet beide op Hallo inschakelen hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="fb9fd-173">Welk model persistentie moet ik kiezen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="fb9fd-174">AOF persistentie slaat elke schrijven tooa logboek enkele invloed op de doorvoer heeft, vergeleken met RDB persistentie waarin wordt opgeslagen back-ups op basis van Hallo back-interval geconfigureerd met minimale gevolgen voor prestaties.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="fb9fd-175">Kies AOF persistentie als het primaire doel toominimize gegevensverlies, en u een afname in doorvoer voor uw cache verwerken kunt.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="fb9fd-176">Kies RDB persistentie als u wilt dat de optimale doorvoer toomaintain op uw cache, maar toch een mechanisme om gegevens te herstellen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="fb9fd-177">Meer informatie over Hallo [voordelen](https://redis.io/topics/persistence#rdb-advantages) en [nadelen](https://redis.io/topics/persistence#rdb-disadvantages) van RDB persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="fb9fd-178">Meer informatie over Hallo [voordelen](https://redis.io/topics/persistence#aof-advantages) en [nadelen](https://redis.io/topics/persistence#aof-disadvantages) van AOF persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="fb9fd-179">Zie voor meer informatie over prestaties bij gebruik van AOF persistentie [biedt AOF persistentie invloed in de gehele, latentie, of de prestaties van mijn cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="fb9fd-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="fb9fd-180">Wat gebeurt er als ik tooa andere grootte hebt aangepast en een back-up is hersteld die is gemaakt voordat de bewerking schalen Hallo?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="fb9fd-181">Voor zowel RDB AOF persistentie:</span><span class="sxs-lookup"><span data-stu-id="fb9fd-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="fb9fd-182">Als u de schaal groter tooa hebt aangepast, zijn er geen gevolgen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="fb9fd-183">Als u kleinere tooa hebt geschaald, en u een aangepaste hebt [databases](cache-configure.md#databases) instelling die groter is dan Hallo [databases limiet](cache-configure.md#databases) voor de grootte van uw nieuwe gegevens in deze databases is niet hersteld.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="fb9fd-184">Zie voor meer informatie [Mijn aangepaste databases betrokken instellen tijdens het schalen Is?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="fb9fd-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="fb9fd-185">Als u kleinere tooa hebt geschaald en er niet genoeg ruimte in Hallo kleinere grootte toohold alle gegevens van de laatste back-up, sleutels Hallo Hallo onbeschikbaar tijdens het terugzetten van een hello gemaakt wordt, meestal met behulp van Hallo [allkeys lru](http://redis.io/topics/lru-cache) verwijderen het beleid.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="fb9fd-186">Kan ik Hallo RDB back-upfrequentie wijzigen nadat het maken van Hallo-cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="fb9fd-187">Ja, kunt u back-upfrequentie voor persistentie RDB op Hallo Hallo **Redis-gegevenspersistentie** blade.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="fb9fd-188">Zie voor instructies [configureren Redis-persistentie](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="fb9fd-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="fb9fd-189">Waarom als ik een back-upfrequentie RDB van 60 minuten er meer dan 60 minuten tussen back-ups is?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="fb9fd-190">Hallo RDB persistentie back-upfrequentie interval start niet totdat de vorige back-upproces Hallo is voltooid.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="fb9fd-191">Als de back-upfrequentie Hallo is 60 minuten duurt een volledige back-upproces 15 minuten toosuccessfully, start Hallo volgende back-up niet totdat 75 minuten nadat de Hallo begintijd van Hallo eerdere back-up.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="fb9fd-192">Wat gebeurt er toohello oude RDB back-ups wanneer een nieuwe back-up wordt gemaakt?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="fb9fd-193">Alle RDB persistentie back-ups met uitzondering van de meest recente Hallo worden automatisch verwijderd.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="fb9fd-194">Deze verwijdering mogelijk niet direct plaats, maar oudere back-ups zijn niet voor onbepaalde tijd bewaard.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="fb9fd-195">Wanneer moet ik een tweede storage-account gebruiken?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-195">When should I use a second storage account?</span></span>

<span data-ttu-id="fb9fd-196">Als u denkt dat u hoger dan de verwachte set bewerkingen op Hallo-cache hebt, moet u een tweede storage-account voor AOF persistentie.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="fb9fd-197">Instellen van de secundaire opslagaccount Hallo zorgt ervoor dat uw cache opslaglimieten van bandbreedte niet bereiken.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="fb9fd-198">Ondersteunt AOF persistentie invloed in de gehele, latentie, of de prestaties van mijn cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="fb9fd-199">AOF persistentie is van invloed op doorvoer door ongeveer 15% – 20% wanneer Hallo cache lager dan de maximale belasting is (CPU- en laden beide onder 90%).</span><span class="sxs-lookup"><span data-stu-id="fb9fd-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="fb9fd-200">Er mag niet zijn latentieproblemen bij het Hallo-cache is binnen dit bereik.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="fb9fd-201">Echter Hallo cache tot komen deze limieten sneller met AOF ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="fb9fd-202">Hoe kan ik Hallo tweede storage-account verwijderen?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="fb9fd-203">U kunt Hallo AOF persistentie secundaire storage-account verwijderen door in te stellen Hallo tweede opslagaccount toobe Hallo dezelfde als de eerste opslagaccount Hallo.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="fb9fd-204">Zie voor instructies [AOF configureren persistentie](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="fb9fd-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="fb9fd-205">Wat is er een herschrijven en wat betekent dat voor mijn cache?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="fb9fd-206">Als Hallo AOF bestand erg groot genoeg is, een herschrijven wordt automatisch in de wachtrij op Hallo-cache.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="fb9fd-207">Hallo herschrijven voorkeursoptie Hallo AOF bestand met minimale set Hallo van bewerkingen die nodig zijn toocreate Hallo huidige gegevensset.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="fb9fd-208">Tijdens de regeneraties, verwachten dat tooreach prestatielimieten sneller vooral wanneer omgaan met grote gegevenssets.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="fb9fd-209">Regeneraties optreden minder vaak zoals Hallo AOF bestand groter wordt, maar duurt een aanzienlijke hoeveelheid tijd wanneer dit gebeurt.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="fb9fd-210">Wat moet ik verwachten tijdens het schalen van een cache met AOF ingeschakeld?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="fb9fd-211">Als Hallo AOF gelijktijdig Hallo met schalen aanzienlijk groot is, klikt u vervolgens verwachten dat Hallo scale bewerking tootake langer dan verwacht, omdat deze wordt opnieuw Hallo bestand nadat het schalen is voltooid.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="fb9fd-212">Zie voor meer informatie over het schalen [wat gebeurt er als ik tooa andere grootte hebt aangepast en een back-up is hersteld die is gemaakt voordat de bewerking schalen Hallo?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="fb9fd-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="fb9fd-213">Hoe wordt mijn gegevens AOF ingedeeld in de opslag?</span><span class="sxs-lookup"><span data-stu-id="fb9fd-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="fb9fd-214">Gegevens die zijn opgeslagen in AOF bestanden is onderverdeeld in meerdere pagina-blobs per knooppunt tooincrease prestaties Hallo gegevens toostorage op te slaan.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="fb9fd-215">Hallo volgende tabel geeft weer hoeveel pagina-BLOB's worden gebruikt voor elke prijscategorie:</span><span class="sxs-lookup"><span data-stu-id="fb9fd-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="fb9fd-216">Premiumlaag</span><span class="sxs-lookup"><span data-stu-id="fb9fd-216">Premium tier</span></span> | <span data-ttu-id="fb9fd-217">Blobs</span><span class="sxs-lookup"><span data-stu-id="fb9fd-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="fb9fd-218">P1</span><span class="sxs-lookup"><span data-stu-id="fb9fd-218">P1</span></span>           | <span data-ttu-id="fb9fd-219">4 per shard</span><span class="sxs-lookup"><span data-stu-id="fb9fd-219">4 per shard</span></span>    |
| <span data-ttu-id="fb9fd-220">P2</span><span class="sxs-lookup"><span data-stu-id="fb9fd-220">P2</span></span>           | <span data-ttu-id="fb9fd-221">8 per shard</span><span class="sxs-lookup"><span data-stu-id="fb9fd-221">8 per shard</span></span>    |
| <span data-ttu-id="fb9fd-222">P3</span><span class="sxs-lookup"><span data-stu-id="fb9fd-222">P3</span></span>           | <span data-ttu-id="fb9fd-223">16 per shard</span><span class="sxs-lookup"><span data-stu-id="fb9fd-223">16 per shard</span></span>   |
| <span data-ttu-id="fb9fd-224">P4</span><span class="sxs-lookup"><span data-stu-id="fb9fd-224">P4</span></span>           | <span data-ttu-id="fb9fd-225">20 per shard</span><span class="sxs-lookup"><span data-stu-id="fb9fd-225">20 per shard</span></span>   |

<span data-ttu-id="fb9fd-226">Wanneer clustering is ingeschakeld, heeft elke shard in Hallo-cache een eigen set van pagina-blobs, zoals aangegeven in de vorige tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="fb9fd-227">Een cache P2 met drie shards verdeelt bijvoorbeeld het bestand AOF over 24 pagina-blobs (8 BLOB's per shard met 3 shards).</span><span class="sxs-lookup"><span data-stu-id="fb9fd-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="fb9fd-228">Na een herschrijven bestaan twee sets van AOF bestanden in de opslag.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="fb9fd-229">Regeneraties optreden in Hallo achtergrond en toevoeg-toohello eerste set van bestanden, terwijl de set-bewerkingen voor die cache toohello worden verzonden tijdens het Hallo herschrijven toohello tweede set toevoegen.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="fb9fd-230">Een back-up wordt tijdelijk opgeslagen tijdens regeneraties in geval van storing, maar onmiddellijk is verwijderd nadat een herschrijven is voltooid.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="fb9fd-231">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="fb9fd-231">Next steps</span></span>
<span data-ttu-id="fb9fd-232">Meer informatie over hoe meer premium toouse functies in de cache.</span><span class="sxs-lookup"><span data-stu-id="fb9fd-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="fb9fd-233">Inleiding toohello Azure Redis-Cache Premium-laag</span><span class="sxs-lookup"><span data-stu-id="fb9fd-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png
