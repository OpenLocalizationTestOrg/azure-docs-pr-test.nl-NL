---
title: Het configureren van Redis-clustering voor een Premium Azure Redis-Cache | Microsoft Docs
description: Meer informatie over het maken en beheren van Redis-clustering voor de laag Premium Azure Redis-Cache-exemplaren
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 86a4a605dbb3b11924c14ff42238009742f72898
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-configure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="e5d7b-103">Redis clustering voor een Premium Azure Redis-Cache configureren</span><span class="sxs-lookup"><span data-stu-id="e5d7b-103">How to configure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="e5d7b-104">Azure Redis-Cache heeft verschillende cache aanbiedingen die flexibiliteit bij de keuze van cachegrootte en -functies bieden, zoals de Premium-laag functies zoals clustering, persistentie en virtual network-ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-104">Azure Redis Cache has different cache offerings, which provide flexibility in the choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="e5d7b-105">Dit artikel wordt beschreven hoe u configureert in een premium Azure Redis-Cache-exemplaar clustering.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-105">This article describes how to configure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="e5d7b-106">Zie voor informatie over andere functies van premium-cache, [Inleiding tot de Azure Redis-Cache Premium-laag](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-106">For information on other premium cache features, see [Introduction to the Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="e5d7b-107">Wat is de Redis-Cluster?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-107">What is Redis Cluster?</span></span>
<span data-ttu-id="e5d7b-108">Azure Redis-Cache biedt Redis-cluster als [ge√Ømplementeerd in Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="e5d7b-109">Met Redis-Cluster beschikt u over de volgende voordelen:</span><span class="sxs-lookup"><span data-stu-id="e5d7b-109">With Redis Cluster, you get the following benefits:</span></span> 

* <span data-ttu-id="e5d7b-110">De mogelijkheid om automatisch gesplitst uw gegevensset tussen meerdere knooppunten.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-110">The ability to automatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="e5d7b-111">De mogelijkheid om door te gaan bewerkingen wanneer een subset van de knooppunten ondervindt fouten of niet kunnen communiceren met de rest van het cluster.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-111">The ability to continue operations when a subset of the nodes is experiencing failures or are unable to communicate with the rest of the cluster.</span></span> 
* <span data-ttu-id="e5d7b-112">Meer doorvoer: doorvoer lineair neemt toe naarmate u Verhoog het aantal shards.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-112">More throughput: Throughput increases linearly as you increase the number of shards.</span></span> 
* <span data-ttu-id="e5d7b-113">Grootte van meer geheugen: Lineair neemt toe naarmate u Verhoog het aantal shards.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-113">More memory size: Increases linearly as you increase the number of shards.</span></span>  

<span data-ttu-id="e5d7b-114">Zie voor meer informatie over de grootte, doorvoer en bandbreedte van premiumcaches [welke aanbieding Redis-Cache en de grootte moet ik gebruiken?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="e5d7b-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="e5d7b-115">In Azure wordt Redis-cluster aangeboden als een primair/replica model waarin de elke shard heeft een paar primair/replica met replicatie waar de replicatie wordt beheerd door service van Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where the replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="e5d7b-116">Clustering</span><span class="sxs-lookup"><span data-stu-id="e5d7b-116">Clustering</span></span>
<span data-ttu-id="e5d7b-117">Clustering is ingeschakeld op de **nieuwe Redis-Cache** blade tijdens het maken van de cache.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-117">Clustering is enabled on the **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="e5d7b-118">Clustering is geconfigureerd op de **Redis-Cluster** blade.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-118">Clustering is configured on the **Redis Cluster** blade.</span></span>

![Clustering][redis-cache-clustering]

<span data-ttu-id="e5d7b-120">U kunt maximaal 10 shards in het cluster hebben.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-120">You can have up to 10 shards in the cluster.</span></span> <span data-ttu-id="e5d7b-121">Klik op **ingeschakeld** en schuif de schuifregelaar of typ een getal tussen 1 en 10 voor **Shard aantal** en klik op **OK**.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-121">Click **Enabled** and slide the slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="e5d7b-122">Elke shard is een primair/replica cache paar beheerd door Azure en de totale grootte van de cache wordt berekend door het aantal shards vermenigvuldigen met de grootte van de cache in de prijscategorie is geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-122">Each shard is a primary/replica cache pair managed by Azure, and the total size of the cache is calculated by multiplying the number of shards by the cache size selected in the pricing tier.</span></span> 

![Clustering][redis-cache-clustering-selected]

<span data-ttu-id="e5d7b-124">Zodra de cache is gemaakt u verbinding maakt met en gebruik deze net zoals een niet-geclusterde cache en Redis distribueert de gegevens in de Cache shards.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-124">Once the cache is created you connect to it and use it just like a non-clustered cache, and Redis distributes the data throughout the Cache shards.</span></span> <span data-ttu-id="e5d7b-125">Als u diagnostische gegevens is [ingeschakeld](cache-how-to-monitor.md#enable-cache-diagnostics), metrische gegevens voor elke shard afzonderlijk worden vastgelegd en kunnen worden [bekeken](cache-how-to-monitor.md) in de blade Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in the Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="e5d7b-126">Er zijn een aantal kleine verschillen in de clienttoepassing vereist wanneer clustering is geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="e5d7b-127">Zie voor meer informatie [moet ik mijn clienttoepassing clustering Breng eventuele wijzigingen?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="e5d7b-127">For more information, see [Do I need to make any changes to my client application to use clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="e5d7b-128">Voorbeeld van code over het werken met met de client StackExchange.Redis clustering, Zie de [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) gedeelte van de [Hallo wereld](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-128">For sample code on working with clustering with the StackExchange.Redis client, see the [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of the [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-the-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="e5d7b-129">Wijzig de clustergrootte van de op een actieve premium-cache</span><span class="sxs-lookup"><span data-stu-id="e5d7b-129">Change the cluster size on a running premium cache</span></span>
<span data-ttu-id="e5d7b-130">Wijzigen van de clustergrootte van de op een actieve premium-cache met clustering is ingeschakeld, klikt u op **clustergrootte Redis** van de **Resource menu**.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-130">To change the cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from the **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="e5d7b-131">Terwijl de Azure Redis-Cache Premium-laag is vrijgegeven voor algemene beschikbaarheid, is de clustergrootte Redis-functie momenteel preview.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-131">While the Azure Redis Cache Premium tier has been released to General Availability, the Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Clustergrootte redis][redis-cache-redis-cluster-size]

<span data-ttu-id="e5d7b-133">Gebruik de schuifregelaar om de clustergrootte, of typ een getal tussen 1 en 10 in de **Shard aantal** tekstvak en klik op **OK** om op te slaan.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-133">To change the cluster size, use the slider or type a number between 1 and 10 in the **Shard count** text box and click **OK** to save.</span></span>

> [!NOTE]
> <span data-ttu-id="e5d7b-134">Schalen van een cluster wordt uitgevoerd de [migreren](https://redis.io/commands/migrate) opdracht, die een dure opdracht, dus voor minimale invloed, kunt u deze bewerking tijdens daluren uitvoert.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-134">Scaling a cluster runs the [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="e5d7b-135">Tijdens de migratie ziet u een piek in de belasting van de server.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-135">During the migration process, you will see a spike in server load.</span></span> <span data-ttu-id="e5d7b-136">Schalen van een cluster lang proces actief is en de hoeveelheid tijd is afhankelijk van het aantal sleutels en de grootte van de waarden die zijn gekoppeld aan deze sleutels.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-136">Scaling a cluster is a long running process and the amount of time taken depends on the number of keys and size of the values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="e5d7b-137">Veelgestelde vragen over clustering</span><span class="sxs-lookup"><span data-stu-id="e5d7b-137">Clustering FAQ</span></span>
<span data-ttu-id="e5d7b-138">De volgende lijst bevat antwoorden op veelgestelde vragen over Azure Redis-Cache clustering.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-138">The following list contains answers to commonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="e5d7b-139">Moet ik mijn clienttoepassing clustering Breng eventuele wijzigingen?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-139">Do I need to make any changes to my client application to use clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="e5d7b-140">Hoe worden de sleutels in een cluster gedistribueerd?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="e5d7b-141">Wat is de grootste cachegrootte die ik kan maken?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-141">What is the largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="e5d7b-142">Alle Redis-clients ondersteunen clustering?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="e5d7b-143">Hoe kan ik verbinden naar Mijn cache als clustering is ingeschakeld?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-143">How do I connect to my cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="e5d7b-144">Kan ik rechtstreeks verbinding maken met de afzonderlijke shards van mijn cache?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-144">Can I directly connect to the individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="e5d7b-145">Kan ik de clustering voor een eerder gemaakte cache configureren?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="e5d7b-146">Kan ik de clustering voor een basis of standaard-cache configureren?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="e5d7b-147">Kan ik gebruiken met de ASP.NET-sessiestatus Redis en uitvoercaching providers clustering?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-147">Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="e5d7b-148">Ik krijg verplaatsen uitzonderingen bij gebruik van StackExchange.Redis en clustering, wat moet ik doen?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering"></a><span data-ttu-id="e5d7b-149">Moet ik mijn clienttoepassing clustering Breng eventuele wijzigingen?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-149">Do I need to make any changes to my client application to use clustering?</span></span>
* <span data-ttu-id="e5d7b-150">Wanneer clustering is ingeschakeld, wordt alleen database 0 beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="e5d7b-151">Als u de clienttoepassing gebruikmaakt van meerdere databases en probeert te lezen of schrijven naar een andere database dan 0, wordt de volgende uitzondering gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-151">If your client application uses multiple databases and it tries to read or write to a database other than 0, the following exception is thrown.</span></span> <span data-ttu-id="e5d7b-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch to database: 6`</span><span class="sxs-lookup"><span data-stu-id="e5d7b-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch to database: 6`</span></span>
  
  <span data-ttu-id="e5d7b-153">Zie voor meer informatie [clusterspecificatie Redis - ge√Ømplementeerde subset](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="e5d7b-154">Als u [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), moet u 1.0.481 of hoger.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="e5d7b-155">U verbinding maken met de cache met behulp van dezelfde [eindpunten, poorten en sleutels](cache-configure.md#properties) die u gebruikt bij het verbinden met een cache die geen clusteren is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-155">You connect to the cache using the same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting to a cache that does not have clustering enabled.</span></span> <span data-ttu-id="e5d7b-156">Het enige verschil is dat alle lees- en schrijfbewerkingen met 0-database moeten worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-156">The only difference is that all reads and writes must be done to database 0.</span></span>
  
  * <span data-ttu-id="e5d7b-157">Andere clients mogelijk andere vereisten.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-157">Other clients may have different requirements.</span></span> <span data-ttu-id="e5d7b-158">Zie [alle Redis-clients ondersteunen clustering?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="e5d7b-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="e5d7b-159">Als uw toepassing gebruikmaakt van meerdere sleutelbewerkingen batch worden opgenomen in √©√©n opdracht, worden alle sleutels moeten zich in de shard dezelfde.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-159">If your application uses multiple key operations batched into a single command, all keys must be located in the same shard.</span></span> <span data-ttu-id="e5d7b-160">Zie voor informatie over het zoeken van sleutels in de dezelfde shard [hoe worden sleutels verdeeld in een cluster?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="e5d7b-160">To locate keys in the same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="e5d7b-161">Als u van ASP.NET Session State-provider Redis gebruikmaakt moet u 2.0.1 of hoger.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="e5d7b-162">Zie [kan ik gebruiken met de ASP.NET-sessiestatus Redis en uitvoercaching providers clustering?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="e5d7b-162">See [Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="e5d7b-163">Hoe worden de sleutels in een cluster gedistribueerd?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="e5d7b-164">Per de Redis [sleutels distributiemodel](http://redis.io/topics/cluster-spec#keys-distribution-model) documentatie: de sleutel ruimte 16384 sleuven opgesplitst.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-164">Per the Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: The key space is split into 16384 slots.</span></span> <span data-ttu-id="e5d7b-165">Elke sleutel wordt gehasht en toegewezen aan een van deze sleuven, zijn verdeeld over de knooppunten van het cluster.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-165">Each key is hashed and assigned to one of these slots, which are distributed across the nodes of the cluster.</span></span> <span data-ttu-id="e5d7b-166">U kunt configureren die deel van de sleutel wordt opgedeeld om ervoor te zorgen dat er meerdere sleutels bevinden zich in de dezelfde shard met hash-tags.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-166">You can configure which part of the key is hashed to ensure that multiple keys are located in the same shard using hash tags.</span></span>

* <span data-ttu-id="e5d7b-167">Met een hash-code - sleutels als een deel van de sleutel is ingesloten in `{` en `}`, alleen deel van de sleutel wordt opgedeeld voor het vaststellen van de sleuf hash van een sleutel van.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-167">Keys with a hash tag - if any part of the key is enclosed in `{` and `}`, only that part of the key is hashed for the purposes of determining the hash slot of a key.</span></span> <span data-ttu-id="e5d7b-168">Bijvoorbeeld de volgende 3 sleutels zou bevinden in de dezelfde shard: `{key}1`, `{key}2`, en `{key}3` omdat alleen de `key` deel van de naam wordt opgedeeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-168">For example, the following 3 keys would be located in the same shard: `{key}1`, `{key}2`, and `{key}3` since only the `key` part of the name is hashed.</span></span> <span data-ttu-id="e5d7b-169">Zie voor een volledige lijst met sleutels hash-code specificaties [sleutels hash-tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="e5d7b-170">Sleutels zonder een hash-code - de naam van de gehele sleutel wordt gebruikt voor de hash.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-170">Keys without a hash tag - the entire key name is used for hashing.</span></span> <span data-ttu-id="e5d7b-171">Dit resulteert in een statistisch zelfs distributiepunt via de shards van de cache.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-171">This results in a statistically even distribution across the shards of the cache.</span></span>

<span data-ttu-id="e5d7b-172">Voor optimale prestaties en doorvoer, wordt u aangeraden de sleutels gelijkmatig distribueren.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-172">For best performance and throughput, we recommend distributing the keys evenly.</span></span> <span data-ttu-id="e5d7b-173">Als u gebruikmaakt van sleutels met een hash-label is de verantwoordelijkheid van de toepassing om te controleren of de sleutels worden evenredig verdeeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-173">If you are using keys with a hash tag it is the application's responsibility to ensure the keys are distributed evenly.</span></span>

<span data-ttu-id="e5d7b-174">Zie voor meer informatie [sleutels distributiemodel](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis-Cluster gegevens sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), en [sleutels hash-tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="e5d7b-175">Zie voor een voorbeeld van code over het werken met clustering en sleutels in de dezelfde shard vinden met de client StackExchange.Redis, de [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) gedeelte van de [Hallo wereld](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-175">For sample code on working with clustering and locating keys in the same shard with the StackExchange.Redis client, see the [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of the [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-the-largest-cache-size-i-can-create"></a><span data-ttu-id="e5d7b-176">Wat is de grootste cachegrootte die ik kan maken?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-176">What is the largest cache size I can create?</span></span>
<span data-ttu-id="e5d7b-177">De grootte van de grootste premium-cache is 53 GB.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-177">The largest premium cache size is 53 GB.</span></span> <span data-ttu-id="e5d7b-178">U kunt maximaal 10 shards zodat u een maximale grootte van 530 GB maken.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-178">You can create up to 10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="e5d7b-179">Als u een groter formaat moet kunt u [aanvragen meer](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="e5d7b-180">Zie voor meer informatie [prijzen van Azure Redis-Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="e5d7b-181">Alle Redis-clients ondersteunen clustering?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="e5d7b-182">Redis clustering op dit moment die niet alle clients ondersteunen.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-182">At the present time not all clients support Redis clustering.</span></span> <span data-ttu-id="e5d7b-183">StackExchange.Redis is een versie die ondersteuning biedt voor.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="e5d7b-184">Zie voor meer informatie over andere clients de [met het cluster speelt](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) sectie van de [Redis-cluster zelfstudie](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-184">For more information on other clients, see the [Playing with the cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of the [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="e5d7b-185">Als u als de client StackExchange.Redis gebruikt, controleert u de nieuwste versie van [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 of hoger voor clustering correct te laten werken.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-185">If you are using StackExchange.Redis as your client, ensure you are using the latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering to work correctly.</span></span> <span data-ttu-id="e5d7b-186">Als u problemen met verplaatsen uitzonderingen hebt, raadpleegt u [uitzonderingen verplaatsen](#move-exceptions) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-to-my-cache-when-clustering-is-enabled"></a><span data-ttu-id="e5d7b-187">Hoe kan ik verbinden naar Mijn cache als clustering is ingeschakeld?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-187">How do I connect to my cache when clustering is enabled?</span></span>
<span data-ttu-id="e5d7b-188">U kunt verbinding maken met uw cache met behulp van dezelfde [eindpunten](cache-configure.md#properties), [poorten](cache-configure.md#properties), en [sleutels](cache-configure.md#access-keys) die u gebruikt bij het verbinden met een cache die geen clusteren is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-188">You can connect to your cache using the same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting to a cache that does not have clustering enabled.</span></span> <span data-ttu-id="e5d7b-189">Redis beheert de clustering op de back-end, zodat u niet hoeft te beheren vanaf uw client.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-189">Redis manages the clustering on the backend so you don't have to manage it from your client.</span></span>

### <a name="can-i-directly-connect-to-the-individual-shards-of-my-cache"></a><span data-ttu-id="e5d7b-190">Kan ik rechtstreeks verbinding maken met de afzonderlijke shards van mijn cache?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-190">Can I directly connect to the individual shards of my cache?</span></span>
<span data-ttu-id="e5d7b-191">Dit wordt niet officieel ondersteund.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-191">This is not officially supported.</span></span> <span data-ttu-id="e5d7b-192">Met die gezegd, wordt elke shard bestaat uit de cache combinatie van een primair/replica, gezamenlijk aangeduid als een cache-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="e5d7b-193">U kunt verbinding maken met de exemplaren van deze cache met behulp van het redis cli-hulpprogramma in de [onstabiel](http://redis.io/download) branche van de Redis-opslagplaats op GitHub.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-193">You can connect to these cache instances using the redis-cli utility in the [unstable](http://redis.io/download) branch of the Redis repository at GitHub.</span></span> <span data-ttu-id="e5d7b-194">Deze versie implementeert basisondersteuning wanneer gestart met de `-c` overschakelen.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-194">This version implements basic support when started with the `-c` switch.</span></span> <span data-ttu-id="e5d7b-195">Zie voor meer informatie [met het cluster speelt](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) op [http://redis.io](http://redis.io) in de [Redis-cluster zelfstudie](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-195">For more information see [Playing with the cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in the [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="e5d7b-196">Gebruik de volgende opdrachten voor niet-ssl.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-196">For non-ssl, use the following commands.</span></span>

    Redis-cli.exe ‚Äìh <<cachename>> -p 13000 (to connect to instance 0)
    Redis-cli.exe ‚Äìh <<cachename>> -p 13001 (to connect to instance 1)
    Redis-cli.exe ‚Äìh <<cachename>> -p 13002 (to connect to instance 2)
    ...
    Redis-cli.exe ‚Äìh <<cachename>> -p 1300N (to connect to instance N)

<span data-ttu-id="e5d7b-197">Voor ssl, vervangt u `1300N` met `1500N`.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="e5d7b-198">Kan ik de clustering voor een eerder gemaakte cache configureren?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="e5d7b-199">U kunt momenteel alleen inschakelen wanneer u een cache maken clustering.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="e5d7b-200">U kunt de clustergrootte wijzigen nadat de cache is gemaakt, maar u niet toevoegen aan een premium-cache of verwijderen uit de cache premium clustering nadat de cache is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-200">You can change the cluster size after the cache is created, but you can't add clustering to a premium cache or remove clustering from a premium cache after the cache is created.</span></span> <span data-ttu-id="e5d7b-201">Een premium-cache met clusteren is ingeschakeld en slechts √©√©n shard is anders dan een premium-cache van dezelfde grootte hebben van geen clustering.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-201">A premium cache with clustering enabled and only one shard is different than a premium cache of the same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="e5d7b-202">Kan ik de clustering voor een basis of standaard-cache configureren?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="e5d7b-203">Clustering is alleen beschikbaar voor premium-caches.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="e5d7b-204">Kan ik gebruiken met de ASP.NET-sessiestatus Redis en uitvoercaching providers clustering?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-204">Can I use clustering with the Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="e5d7b-205">**Redis-Cache-uitvoer provider** -er zijn geen wijzigingen vereist.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="e5d7b-206">**Redis Session State-provider** - gebruiken clustering, moet u [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 of hoger, of een uitzondering gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-206">**Redis Session State provider** - to use clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="e5d7b-207">Dit is een belangrijke wijziging; Zie voor meer informatie [v2.0.0 Details van de wijziging op te splitsen](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="e5d7b-208">Ik krijg verplaatsen uitzonderingen bij gebruik van StackExchange.Redis en clustering, wat moet ik doen?</span><span class="sxs-lookup"><span data-stu-id="e5d7b-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="e5d7b-209">Als u van StackExchange.Redis gebruikmaakt en ontvangt `MOVE` uitzonderingen bij gebruik van clustering, zorg ervoor dat u gebruikmaakt van [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) of hoger.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="e5d7b-210">Zie voor instructies over het configureren van uw .NET-toepassingen voor gebruik van StackExchange.Redis [de cacheclients configureren](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="e5d7b-210">For instructions on configuring your .NET applications to use StackExchange.Redis, see [Configure the cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e5d7b-211">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="e5d7b-211">Next steps</span></span>
<span data-ttu-id="e5d7b-212">Informatie over het gebruik van meer Premiumfuncties cache.</span><span class="sxs-lookup"><span data-stu-id="e5d7b-212">Learn how to use more premium cache features.</span></span>

* [<span data-ttu-id="e5d7b-213">Inleiding tot de Azure Redis-Cache Premium-laag</span><span class="sxs-lookup"><span data-stu-id="e5d7b-213">Introduction to the Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







