---
title: Python machine learning-scripts uitvoeren | Microsoft Docs
description: Overzichten ontwerp grondbeginselen ondersteuning voor Python-scripts in Azure Machine Learning en basic gebruiksscenario's, mogelijkheden en beperkingen.
keywords: Python machine learning pandas, python pandas, python-scripts, python-scripts uitvoeren
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: e8d6377bc939e6711a96e521b5f574fc8d060929
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="9ed60-104">Python-scripts voor Machine Learning uitvoeren in Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="9ed60-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="9ed60-105">Dit onderwerp beschrijft de beginselen ontwerp is de huidige ondersteuning voor Python-scripts in Azure Machine Learning onderliggende.</span><span class="sxs-lookup"><span data-stu-id="9ed60-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="9ed60-106">De belangrijkste mogelijkheden worden ook beschreven, met inbegrip van:</span><span class="sxs-lookup"><span data-stu-id="9ed60-106">The main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="9ed60-107">basic-gebruiksscenario's uitvoeren</span><span class="sxs-lookup"><span data-stu-id="9ed60-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="9ed60-108">een experiment beoordelen in een webservice</span><span class="sxs-lookup"><span data-stu-id="9ed60-108">score an experiment in a web service</span></span>
- <span data-ttu-id="9ed60-109">ondersteuning voor het importeren van de bestaande code</span><span class="sxs-lookup"><span data-stu-id="9ed60-109">support for importing existing code</span></span>
- <span data-ttu-id="9ed60-110">Visualisaties exporteren</span><span class="sxs-lookup"><span data-stu-id="9ed60-110">export visualizations</span></span>
- <span data-ttu-id="9ed60-111">onder supervisie Functieselectie uitvoeren</span><span class="sxs-lookup"><span data-stu-id="9ed60-111">perform supervised feature selection</span></span>
- <span data-ttu-id="9ed60-112">enkele beperkingen begrijpen</span><span class="sxs-lookup"><span data-stu-id="9ed60-112">understand some limitations</span></span>

<span data-ttu-id="9ed60-113">[Python](https://www.python.org/) is een onmisbaar hulpmiddel bij het hulpprogramma borst van veel gegevenswetenschappers.</span><span class="sxs-lookup"><span data-stu-id="9ed60-113">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="9ed60-114">Heeft:</span><span class="sxs-lookup"><span data-stu-id="9ed60-114">It has:</span></span>

* <span data-ttu-id="9ed60-115">een syntaxis elegante en beknopt</span><span class="sxs-lookup"><span data-stu-id="9ed60-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="9ed60-116">ondersteuning voor meerdere platforms</span><span class="sxs-lookup"><span data-stu-id="9ed60-116">cross-platform support,</span></span> 
* <span data-ttu-id="9ed60-117">een enorme hoeveelheden krachtige bibliotheken en</span><span class="sxs-lookup"><span data-stu-id="9ed60-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="9ed60-118">volwassen ontwikkelingsprogramma's.</span><span class="sxs-lookup"><span data-stu-id="9ed60-118">mature development tools.</span></span> 

<span data-ttu-id="9ed60-119">Python wordt gebruikt in alle fasen van een werkstroom die doorgaans in machine learning-modellen worden gebruikt:</span><span class="sxs-lookup"><span data-stu-id="9ed60-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="9ed60-120">gegevens opnemen en verwerken</span><span class="sxs-lookup"><span data-stu-id="9ed60-120">data ingest and processing</span></span> 
- <span data-ttu-id="9ed60-121">functie constructie</span><span class="sxs-lookup"><span data-stu-id="9ed60-121">feature construction</span></span>
- <span data-ttu-id="9ed60-122">model trainen</span><span class="sxs-lookup"><span data-stu-id="9ed60-122">model training</span></span> 
- <span data-ttu-id="9ed60-123">validatie van</span><span class="sxs-lookup"><span data-stu-id="9ed60-123">model validation</span></span>
- <span data-ttu-id="9ed60-124">implementatie van de modellen</span><span class="sxs-lookup"><span data-stu-id="9ed60-124">deployment of the models</span></span>

<span data-ttu-id="9ed60-125">Azure Machine Learning Studio ondersteunt insluiten Python-scripts in diverse delen van een machine learning-experiment, en ze ook naadloos publiceren als een webservices op Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9ed60-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="9ed60-126">Principes van Python-scripts in Machine Learning</span><span class="sxs-lookup"><span data-stu-id="9ed60-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="9ed60-127">De primaire interface met Python in Azure Machine Learning Studio is via de [Python Script uitvoeren] [ execute-python-script] module weergegeven in afbeelding 1.</span><span class="sxs-lookup"><span data-stu-id="9ed60-127">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="9ed60-130">Afbeelding 1.</span><span class="sxs-lookup"><span data-stu-id="9ed60-130">Figure 1.</span></span> <span data-ttu-id="9ed60-131">De **Python Script uitvoeren** module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-131">The **Execute Python Script** module.</span></span>

<span data-ttu-id="9ed60-132">De [Python Script uitvoeren] [ execute-python-script] -module in de Azure ML Studio maximaal drie invoer accepteert en maximaal twee uitvoer (beschreven in de volgende sectie), zoals de analoog R produceert de [R uitvoeren Script] [ execute-r-script] module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-132">The [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up to three inputs and produces up to two outputs (discussed in the following section), like its R analogue, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="9ed60-133">De Python-code wordt uitgevoerd is ingevoerd in het parametervak als een speciaal benoemde toegangspunt aangeroepen functie `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="9ed60-133">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="9ed60-134">Hier volgen de belangrijkste principes gebruikt voor het implementeren van deze module:</span><span class="sxs-lookup"><span data-stu-id="9ed60-134">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="9ed60-135">*Moet idiomatische voor Python-gebruikers.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="9ed60-136">De meeste Python gebruikers rekening te houden met de code als functies in modules.</span><span class="sxs-lookup"><span data-stu-id="9ed60-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="9ed60-137">Dus als een groot aantal uitvoerbare instructies in een module op het hoogste niveau is relatief zeldzame.</span><span class="sxs-lookup"><span data-stu-id="9ed60-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="9ed60-138">Het script wordt hierdoor ook een speciaal benoemde Python-functie in plaats van alleen een reeks instructies.</span><span class="sxs-lookup"><span data-stu-id="9ed60-138">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="9ed60-139">De objecten worden weergegeven in de functie zijn Python-bibliotheek Standaardtypen zoals [Pandas](http://pandas.pydata.org/) gegevensframes en [NumPy](http://www.numpy.org/) matrices.</span><span class="sxs-lookup"><span data-stu-id="9ed60-139">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="9ed60-140">*Hoogwaardige tussen lokale moet hebben en in de cloud uitvoeringen.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="9ed60-141">De back-end gebruikt voor het uitvoeren van de Python-code is gebaseerd op [Anaconda](https://store.continuum.io/cshop/anaconda/), een veelgebruikte platformoverschrijdende wetenschappelijke Python-distributie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-141">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="9ed60-142">Het wordt geleverd met bijna 200 van de meest voorkomende Python-pakketten.</span><span class="sxs-lookup"><span data-stu-id="9ed60-142">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="9ed60-143">Daarom gegevenswetenschappers voor foutopsporing en de code op hun lokale Azure Machine Learning-compatibele Anaconda-omgeving te kwalificeren.</span><span class="sxs-lookup"><span data-stu-id="9ed60-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="9ed60-144">Gebruik vervolgens een bestaande ontwikkelomgeving, zoals [IPython](http://ipython.org/) notebook of [Python-Tools voor Visual Studio](http://aka.ms/ptvs), uit te voeren als onderdeel van een Azure ML-experiment.</span><span class="sxs-lookup"><span data-stu-id="9ed60-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), to run it as part of an Azure ML experiment.</span></span> <span data-ttu-id="9ed60-145">De `azureml_main` ingangspunt is een vanilla Python-functie en kan dus *** zonder Azure ML-specifieke code of de SDK geïnstalleerd worden geschreven.</span><span class="sxs-lookup"><span data-stu-id="9ed60-145">The `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or the SDK installed.</span></span>
3. <span data-ttu-id="9ed60-146">*Moet naadloos samenstelbare met andere Azure Machine Learning-modules.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="9ed60-147">De [Python Script uitvoeren] [ execute-python-script] module accepteert als invoer en uitvoer, standaard Azure Machine Learning-gegevenssets.</span><span class="sxs-lookup"><span data-stu-id="9ed60-147">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="9ed60-148">De onderliggende structuur verbinding transparant en efficiënt van de Azure ML en Python runtimes.</span><span class="sxs-lookup"><span data-stu-id="9ed60-148">The underlying framework transparently and efficiently bridges the Azure ML and Python runtimes.</span></span> <span data-ttu-id="9ed60-149">Dus kan Python worden gebruikt in combinatie met de bestaande Azure ML-werkstromen, inclusief verbindingen die gebruikmaken van R en SQLite.</span><span class="sxs-lookup"><span data-stu-id="9ed60-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="9ed60-150">Een resultaat gegevens wetenschappelijk kan opstellen werkstromen die:</span><span class="sxs-lookup"><span data-stu-id="9ed60-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="9ed60-151">Python en Pandas gebruiken voor gegevens vooraf verwerken en opschonen</span><span class="sxs-lookup"><span data-stu-id="9ed60-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="9ed60-152">de gegevens naar een SQL-transformatie, het samenvoegen van meerdere gegevenssets met formulier functies feed</span><span class="sxs-lookup"><span data-stu-id="9ed60-152">feed the data to a SQL transformation, joining multiple datasets to form features</span></span>
   * <span data-ttu-id="9ed60-153">met behulp van de algoritmen in Azure Machine Learning modellen trainen</span><span class="sxs-lookup"><span data-stu-id="9ed60-153">train models using the algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="9ed60-154">evalueren en verwerk de resultaten in R.</span><span class="sxs-lookup"><span data-stu-id="9ed60-154">evaluate and post-process the results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="9ed60-155">Basic-gebruiksscenario's in ML voor Python-scripts</span><span class="sxs-lookup"><span data-stu-id="9ed60-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="9ed60-156">In deze sectie enquête we enkele eenvoudige gebruikt de [Python Script uitvoeren] [ execute-python-script] module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-156">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="9ed60-157">Invoer voor de Python-module worden weergegeven als Pandas gegevensframes.</span><span class="sxs-lookup"><span data-stu-id="9ed60-157">Inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="9ed60-158">De functie moet een enkel Pandas gegevensframe binnen een Python-pakket retourneren [reeks](https://docs.python.org/2/c-api/sequence.html) zoals een tuple, lijst of NumPy matrix.</span><span class="sxs-lookup"><span data-stu-id="9ed60-158">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="9ed60-159">Het eerste element van deze reeks wordt vervolgens geretourneerd in de eerste uitvoerpoort van de module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-159">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="9ed60-160">Dit schema wordt weergegeven in afbeelding 2.</span><span class="sxs-lookup"><span data-stu-id="9ed60-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="9ed60-162">Afbeelding 2.</span><span class="sxs-lookup"><span data-stu-id="9ed60-162">Figure 2.</span></span> <span data-ttu-id="9ed60-163">Toewijzing van poorten parameters invoer- en retourwaarde naar uitvoerpoort.</span><span class="sxs-lookup"><span data-stu-id="9ed60-163">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="9ed60-164">Meer gedetailleerde semantiek van hoe de ingangspoorten aan de parameters van toegewezen de `azureml_main` functie worden weergegeven in tabel 1:</span><span class="sxs-lookup"><span data-stu-id="9ed60-164">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="9ed60-166">Tabel 1.</span><span class="sxs-lookup"><span data-stu-id="9ed60-166">Table 1.</span></span> <span data-ttu-id="9ed60-167">Toewijzing van ingangspoorten voor functieparameters.</span><span class="sxs-lookup"><span data-stu-id="9ed60-167">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="9ed60-168">De toewijzing tussen ingangspoorten en functieparameters is positionele:</span><span class="sxs-lookup"><span data-stu-id="9ed60-168">The mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="9ed60-169">De eerste verbonden invoerpoort is toegewezen aan de eerste parameter van de functie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-169">The first connected input port is mapped to the first parameter of the function.</span></span> 
- <span data-ttu-id="9ed60-170">De tweede invoer (indien verbonden) is toegewezen aan de tweede parameter van de functie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-170">The second input (if connected) is mapped to the second parameter of the function.</span></span>

<span data-ttu-id="9ed60-171">Zie *Python voor gegevensanalyse* (O'Reilly 2012) door West McKinney voor meer informatie over Python Pandas en hoe deze kan worden gebruikt om gegevens te bewerken effectiever en efficiënter.</span><span class="sxs-lookup"><span data-stu-id="9ed60-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used to manipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="9ed60-172">De vertaling van invoer en uitvoer typen</span><span class="sxs-lookup"><span data-stu-id="9ed60-172">Translation of input and output types</span></span> 
<span data-ttu-id="9ed60-173">Invoergegevenssets in Azure ML worden geconverteerd naar gegevensframes in Pandas.</span><span class="sxs-lookup"><span data-stu-id="9ed60-173">Input datasets in Azure ML are converted to data frames in Pandas.</span></span> <span data-ttu-id="9ed60-174">Gegevensframes uitvoer worden terug naar de Azure ML-gegevenssets geconverteerd.</span><span class="sxs-lookup"><span data-stu-id="9ed60-174">Output data frames are converted back to Azure ML datasets.</span></span> <span data-ttu-id="9ed60-175">De volgende conversies worden uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="9ed60-175">The following conversions are performed:</span></span>

1. <span data-ttu-id="9ed60-176">De tekenreeks en de numerieke kolommen worden geconverteerd als-is en de ontbrekende waarden in een gegevensset worden geconverteerd naar 'N.V.T.' waarden in Pandas.</span><span class="sxs-lookup"><span data-stu-id="9ed60-176">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="9ed60-177">De dezelfde conversie wordt uitgevoerd op de manier waarop terug (NB-waarden in Pandas worden geconverteerd naar de ontbrekende waarden in de Azure ML).</span><span class="sxs-lookup"><span data-stu-id="9ed60-177">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure ML).</span></span>
2. <span data-ttu-id="9ed60-178">Index aanvalsvectoren in Pandas worden niet ondersteund in Azure ML.</span><span class="sxs-lookup"><span data-stu-id="9ed60-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="9ed60-179">Alle ingevoerde gegevensframes in de functie Python hebben altijd een 64-bits numerieke index van 0 tot het aantal rijen min 1.</span><span class="sxs-lookup"><span data-stu-id="9ed60-179">All input data frames in the Python function always have a 64-bit numerical index from 0 to the number of rows minus 1.</span></span> 
3. <span data-ttu-id="9ed60-180">Azure ML-gegevenssets geen dubbele kolomnamen en kolomnamen, die geen tekenreeksen zijn.</span><span class="sxs-lookup"><span data-stu-id="9ed60-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="9ed60-181">Als een frame uitvoer-gegevens niet-numerieke kolommen bevat, wordt het framework roept `str` op de kolomnamen.</span><span class="sxs-lookup"><span data-stu-id="9ed60-181">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="9ed60-182">Ook zijn eventuele dubbele kolomnamen automatisch vervormd om te zorgen dat de namen uniek zijn.</span><span class="sxs-lookup"><span data-stu-id="9ed60-182">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="9ed60-183">Het achtervoegsel (2) is toegevoegd aan de eerste kopie, (3) naar de tweede dubbel, enzovoort.</span><span class="sxs-lookup"><span data-stu-id="9ed60-183">The suffix (2) is added to the first duplicate, (3) to the second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="9ed60-184">Operationele Python-scripts</span><span class="sxs-lookup"><span data-stu-id="9ed60-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="9ed60-185">Alle [Python Script uitvoeren] [ execute-python-script] modules die worden gebruikt in een score experiment worden aangeroepen wanneer gepubliceerd als een webservice.</span><span class="sxs-lookup"><span data-stu-id="9ed60-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="9ed60-186">Afbeelding 3 ziet u bijvoorbeeld een score experiment met de code voor een enkele Python-expressie niet evalueren.</span><span class="sxs-lookup"><span data-stu-id="9ed60-186">For example, Figure 3 shows a scoring experiment that contains the code to evaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="9ed60-189">Afbeelding 3.</span><span class="sxs-lookup"><span data-stu-id="9ed60-189">Figure 3.</span></span> <span data-ttu-id="9ed60-190">Web-service voor het evalueren van een Python-expressie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="9ed60-191">Een webservice die is gemaakt op basis van dit experiment:</span><span class="sxs-lookup"><span data-stu-id="9ed60-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="9ed60-192">neemt als invoer een Python-expressie (als tekenreeks)</span><span class="sxs-lookup"><span data-stu-id="9ed60-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="9ed60-193">verzendt het naar de Python-interpreter</span><span class="sxs-lookup"><span data-stu-id="9ed60-193">sends it to the Python interpreter</span></span> 
- <span data-ttu-id="9ed60-194">retourneert een tabel met zowel het geëvalueerde resultaat als de expressie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-194">returns a table containing both the expression and the evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="9ed60-195">Bestaande Python scriptmodules importeren</span><span class="sxs-lookup"><span data-stu-id="9ed60-195">Importing existing Python script modules</span></span>

<span data-ttu-id="9ed60-196">Een algemene gebruiksvoorbeeld voor veel gegevenswetenschappers is het opnemen van bestaande Python-scripts in Azure ML-experimenten.</span><span class="sxs-lookup"><span data-stu-id="9ed60-196">A common use-case for many data scientists is to incorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="9ed60-197">In plaats van dat alle code worden samengevoegd en in een vak één script worden geplakt, vereisen de [Python Script uitvoeren] [ execute-python-script] module een zipbestand met Python-modules op de derde invoerpoort accepteert.</span><span class="sxs-lookup"><span data-stu-id="9ed60-197">Instead of requiring that all code be concatenated and pasted into a single script box, the [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at the third input port.</span></span> <span data-ttu-id="9ed60-198">Het bestand is door het framework worden uitgevoerd tijdens runtime zijn uitgepakt en de inhoud worden toegevoegd aan het bibliotheekpad van Python-interpreter.</span><span class="sxs-lookup"><span data-stu-id="9ed60-198">The file is unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="9ed60-199">De `azureml_main` toegangspunt dat deze modules kunt vervolgens rechtstreeks importeren door de functie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-199">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="9ed60-200">Een voorbeeld kunt u het bestand met een eenvoudige "Hallo, wereld" functie Hello.py.</span><span class="sxs-lookup"><span data-stu-id="9ed60-200">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="9ed60-202">Afbeelding 4.</span><span class="sxs-lookup"><span data-stu-id="9ed60-202">Figure 4.</span></span> <span data-ttu-id="9ed60-203">Gebruiker gedefinieerde functie in Hello.py-bestand.</span><span class="sxs-lookup"><span data-stu-id="9ed60-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="9ed60-204">Vervolgens maken we een bestand Hello.zip Hello.py met:</span><span class="sxs-lookup"><span data-stu-id="9ed60-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="9ed60-206">Afbeelding 5.</span><span class="sxs-lookup"><span data-stu-id="9ed60-206">Figure 5.</span></span> <span data-ttu-id="9ed60-207">ZIP-bestand met de gebruiker gedefinieerde Python-code.</span><span class="sxs-lookup"><span data-stu-id="9ed60-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="9ed60-208">Upload het zip-bestand als een gegevensset naar Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="9ed60-208">Upload the zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="9ed60-209">Vervolgens maken en uitvoeren van een experiment die gebruikmaakt van de Python-code in het bestand Hello.zip door het image koppelt aan de derde invoerpoort van de **Python Script uitvoeren** module, zoals weergegeven in deze afbeelding.</span><span class="sxs-lookup"><span data-stu-id="9ed60-209">Then create and run an experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="9ed60-212">Afbeelding 6.</span><span class="sxs-lookup"><span data-stu-id="9ed60-212">Figure 6.</span></span> <span data-ttu-id="9ed60-213">Voorbeeldexperiment door gebruiker gedefinieerde Python code geüpload als een zip-bestand.</span><span class="sxs-lookup"><span data-stu-id="9ed60-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="9ed60-214">De module-uitvoer laat zien dat het zip-bestand uitgepakt is en dat de functie `print_hello` is uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="9ed60-214">The module output shows that the zip file has been unpackaged and that the function `print_hello` has been run.</span></span>
<span data-ttu-id="9ed60-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="9ed60-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="9ed60-216">Afbeelding 7.</span><span class="sxs-lookup"><span data-stu-id="9ed60-216">Figure 7.</span></span> <span data-ttu-id="9ed60-217">Gebruiker gedefinieerde functie gebruikt in de [Python Script uitvoeren] [ execute-python-script] module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-217">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="9ed60-218">Werken met visualisaties</span><span class="sxs-lookup"><span data-stu-id="9ed60-218">Working with visualizations</span></span>

<span data-ttu-id="9ed60-219">Waarnemingspunten gemaakt met behulp van MatplotLib die kan worden weergegeven in de browser kunnen worden geretourneerd door de [Python Script uitvoeren][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="9ed60-219">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="9ed60-220">Maar de waarnemingspunten worden niet automatisch omgeleid naar installatiekopieën omdat ze bij gebruik van R. De gebruiker moet expliciet Sla dus waarnemingspunten naar PNG-bestanden als ze moeten worden geretourneerd naar Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="9ed60-220">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="9ed60-221">Voor het genereren van installatiekopieën van MatplotLib, moet u de volgende procedure uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="9ed60-221">To generate images from MatplotLib, you must complete the following procedure:</span></span>

* <span data-ttu-id="9ed60-222">de back-end vanuit de renderer standaard Qt gebaseerde overschakelen naar 'Door'</span><span class="sxs-lookup"><span data-stu-id="9ed60-222">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="9ed60-223">Maak een nieuw object van de afbeelding</span><span class="sxs-lookup"><span data-stu-id="9ed60-223">create a new figure object</span></span> 
* <span data-ttu-id="9ed60-224">ophalen van de as en alle waarnemingspunten genereren in de App</span><span class="sxs-lookup"><span data-stu-id="9ed60-224">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="9ed60-225">de afbeelding in een PNG-bestand opslaan</span><span class="sxs-lookup"><span data-stu-id="9ed60-225">save the figure to a PNG file</span></span> 

<span data-ttu-id="9ed60-226">Dit proces wordt geïllustreerd in de volgende afbeelding 8 die een spreidingsgrafiek tekent matrix met de functie scatter_matrix in Pandas worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9ed60-226">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="9ed60-228">Afbeelding 8.</span><span class="sxs-lookup"><span data-stu-id="9ed60-228">Figure 8.</span></span> <span data-ttu-id="9ed60-229">Code MatplotLib cijfers opslaan naar installatiekopieën.</span><span class="sxs-lookup"><span data-stu-id="9ed60-229">Code to save MatplotLib figures to images.</span></span>

<span data-ttu-id="9ed60-230">Afbeelding 9 toont een experiment die gebruikmaakt van het script eerder weergegeven om terug te keren worden uitgezet via de tweede uitvoerpoort.</span><span class="sxs-lookup"><span data-stu-id="9ed60-230">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="9ed60-233">Afbeelding 9.</span><span class="sxs-lookup"><span data-stu-id="9ed60-233">Figure 9.</span></span> <span data-ttu-id="9ed60-234">Visualiseren waarnemingspunten gegenereerd op basis van Python-code.</span><span class="sxs-lookup"><span data-stu-id="9ed60-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="9ed60-235">Het is mogelijk meerdere cijfers geretourneerd door deze in verschillende afbeeldingen, de Azure Machine Learning-runtime neemt over alle installatiekopieën en ze voor visualisatie kan toevoegen.</span><span class="sxs-lookup"><span data-stu-id="9ed60-235">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="9ed60-236">Geavanceerde voorbeelden</span><span class="sxs-lookup"><span data-stu-id="9ed60-236">Advanced examples</span></span>

<span data-ttu-id="9ed60-237">De Anaconda-omgeving geïnstalleerd in Azure Machine Learning bevat algemene pakketten zoals NumPy SciPy en Scikits meer.</span><span class="sxs-lookup"><span data-stu-id="9ed60-237">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="9ed60-238">Deze pakketten kunnen effectief worden gebruikt voor verschillende gegevensverwerkingstaken in een machine learning-pijplijn.</span><span class="sxs-lookup"><span data-stu-id="9ed60-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="9ed60-239">Als u bijvoorbeeld illustratie de volgende experiment en het script van het gebruik van ensemble overbrengen in Scikits-informatie over het berekenen van de functie belang scores voor een gegevensset.</span><span class="sxs-lookup"><span data-stu-id="9ed60-239">As an example, the following experiment and script illustrate the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="9ed60-240">De scores kunnen worden gebruikt om uit te voeren onder supervisie Functieselectie voordat een andere ML-model wordt ingevoerd.</span><span class="sxs-lookup"><span data-stu-id="9ed60-240">The scores can be used to perform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="9ed60-241">Hier volgt de Python-functie waarmee de scores belang en de volgorde van de functies op basis van de scores berekenen:</span><span class="sxs-lookup"><span data-stu-id="9ed60-241">Here is the Python function used to compute the importance scores and order the features based on the scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="9ed60-243">Afbeelding 10.</span><span class="sxs-lookup"><span data-stu-id="9ed60-243">Figure 10.</span></span> <span data-ttu-id="9ed60-244">Waarden van positie functies werken door scores.</span><span class="sxs-lookup"><span data-stu-id="9ed60-244">Function to rank features by scores.</span></span>
<span data-ttu-id="9ed60-245"> Het volgende experiment vervolgens wordt berekend en retourneert de scores belang van functies in de gegevensset 'Pima Indische Diabetes' in Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="9ed60-245">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="9ed60-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="9ed60-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="9ed60-247">Afbeelding 11.</span><span class="sxs-lookup"><span data-stu-id="9ed60-247">Figure 11.</span></span> <span data-ttu-id="9ed60-248">Waarden van positie functies in de gegevensset Pima Indische Diabetes experimenteren.</span><span class="sxs-lookup"><span data-stu-id="9ed60-248">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="9ed60-249">Beperkingen</span><span class="sxs-lookup"><span data-stu-id="9ed60-249">Limitations</span></span>
<span data-ttu-id="9ed60-250">De [Python Script uitvoeren] [ execute-python-script] heeft momenteel de volgende beperkingen:</span><span class="sxs-lookup"><span data-stu-id="9ed60-250">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="9ed60-251">*De uitvoering van de sandbox.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-251">*Sandboxed execution.*</span></span> <span data-ttu-id="9ed60-252">De Python-runtime is momenteel sandbox en, als gevolg hiervan kan geen toegang tot het netwerk of het lokale bestandssysteem op een persistente manier.</span><span class="sxs-lookup"><span data-stu-id="9ed60-252">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="9ed60-253">Alle bestanden lokaal opgeslagen zijn geïsoleerd en verwijderd wanneer de module is voltooid.</span><span class="sxs-lookup"><span data-stu-id="9ed60-253">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="9ed60-254">De Python-code heeft geen toegang tot de meeste mappen op de computer die op wordt uitgevoerd, de uitzondering wordt de huidige map en de bijbehorende submappen.</span><span class="sxs-lookup"><span data-stu-id="9ed60-254">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="9ed60-255">*Een gebrek aan geavanceerde ontwikkeling en foutopsporing van ondersteuning.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="9ed60-256">De Python-module biedt op dit moment geen ondersteuning van IDE-functies zoals intellisense en foutopsporing.</span><span class="sxs-lookup"><span data-stu-id="9ed60-256">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="9ed60-257">De volledige Python stack-trace is ook beschikbaar als de module is mislukt tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="9ed60-257">Also, if the module fails at runtime, the full Python stack trace is available.</span></span> <span data-ttu-id="9ed60-258">Maar deze moet worden weergegeven in het uitvoerlogboek voor voor de module.</span><span class="sxs-lookup"><span data-stu-id="9ed60-258">But it must be viewed in the output log for the module.</span></span> <span data-ttu-id="9ed60-259">Momenteel wordt aangeraden dat u ontwikkelen en Python-scripts in een omgeving zoals IPython voor foutopsporing en vervolgens de code in de module te importeren.</span><span class="sxs-lookup"><span data-stu-id="9ed60-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="9ed60-260">*Enkele gegevens frame uitvoer.*</span><span class="sxs-lookup"><span data-stu-id="9ed60-260">*Single data frame output.*</span></span> <span data-ttu-id="9ed60-261">Het ingangspunt Python is alleen toegestaan als resultaat een gegevensframe enkele als uitvoer.</span><span class="sxs-lookup"><span data-stu-id="9ed60-261">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="9ed60-262">Het is niet op dit moment mogelijk dat willekeurige Python-objecten, zoals getraind modellen rechtstreeks teruggestuurd naar de Azure Machine Learning-runtime.</span><span class="sxs-lookup"><span data-stu-id="9ed60-262">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="9ed60-263">Zoals [R-Script uitvoeren][execute-r-script], die dezelfde beperking heeft, is het mogelijk in veel gevallen pickle objecten in een byte-matrix en ga daarna terug die binnen een gegevensframe.</span><span class="sxs-lookup"><span data-stu-id="9ed60-263">Like [Execute R Script][execute-r-script], which has the same limitation, it is possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="9ed60-264">*Onvermogen om Python installatie aanpassen*.</span><span class="sxs-lookup"><span data-stu-id="9ed60-264">*Inability to customize Python installation*.</span></span> <span data-ttu-id="9ed60-265">Er is momenteel de enige manier om aangepaste Python-modules toevoegen via het zip-bestand mechanisme die eerder zijn beschreven.</span><span class="sxs-lookup"><span data-stu-id="9ed60-265">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="9ed60-266">Dit is geschikt voor kleine modules, is het lastig voor grote modules (met name die met native DLLs) of een groot aantal modules.</span><span class="sxs-lookup"><span data-stu-id="9ed60-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="9ed60-267">Conclusie trekt</span><span class="sxs-lookup"><span data-stu-id="9ed60-267">Conclusions</span></span>
<span data-ttu-id="9ed60-268">De [Python Script uitvoeren] [ execute-python-script] module kunt u een wetenschappelijk gegevens bestaande Python-code in de cloud-gebaseerde machine learning-werkstromen in Azure Machine Learning en in het naadloos opnemen operationeel maken als onderdeel van een webservice.</span><span class="sxs-lookup"><span data-stu-id="9ed60-268">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="9ed60-269">De module Python-script werkt natuurlijk samen met andere modules in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="9ed60-269">The Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="9ed60-270">De module kan worden gebruikt voor een aantal taken van gegevensverkenning vooraf verwerken en het ophalen van functies en vervolgens evaluatie en na verwerking van de resultaten.</span><span class="sxs-lookup"><span data-stu-id="9ed60-270">The module can be used for a range of tasks from data exploration to pre-processing and feature extraction, and then to evaluation and post-processing of the results.</span></span> <span data-ttu-id="9ed60-271">De back-end-runtime gebruikt voor de uitvoering is gebaseerd op Anaconda, een uitgebreid geteste en gebruikte Python-distributie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-271">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="9ed60-272">Deze back-end kunt u eenvoudig u aan de ingebouwde bestaande code-elementen in de cloud.</span><span class="sxs-lookup"><span data-stu-id="9ed60-272">This backend makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="9ed60-273">We verwachten bieden extra functionaliteit aan de [Python Script uitvoeren] [ execute-python-script] module zoals de mogelijkheid om te trainen en modellen in Python operationeel en betere ondersteuning toevoegen voor de ontwikkeling en foutopsporing in Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="9ed60-273">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9ed60-274">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9ed60-274">Next steps</span></span>
<span data-ttu-id="9ed60-275">Raadpleeg het [Python Developer Center](https://azure.microsoft.com/develop/python/) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="9ed60-275">For more information, see the [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
