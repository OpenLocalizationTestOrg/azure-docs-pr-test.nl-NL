---
title: Doorsturen van gegevens van Azure Automation-taak met OMS Log Analytics | Microsoft Docs
description: In dit artikel laat zien hoe u met het verzenden van taakstatus en runbook-taak streams Microsoft Operations Management Suite-logboekanalyse meer inzicht leveren en het beheer.
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: 2c0ca7fc332963e5a5db3c20c400ed877ae0cc54
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-to-log-analytics-oms"></a><span data-ttu-id="0ce28-103">Doorsturen taakstatus en taak stromen van Automation voor logboekanalyse (OMS)</span><span class="sxs-lookup"><span data-stu-id="0ce28-103">Forward job status and job streams from Automation to Log Analytics (OMS)</span></span>
<span data-ttu-id="0ce28-104">Automation kan runbook taak status en taak streams verzenden naar de werkruimte voor logboekanalyse voor Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="0ce28-104">Automation can send runbook job status and job streams to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="0ce28-105">Taak registreert en taak streams zichtbaar zijn in de Azure-portal of PowerShell zijn voor afzonderlijke taken en Hiermee kunt u eenvoudige onderzoeken uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="0ce28-105">Job logs and job streams are visible in the Azure portal, or with PowerShell, for individual jobs and this allows you to perform simple investigations.</span></span> <span data-ttu-id="0ce28-106">Met Log Analytics kunt u nu:</span><span class="sxs-lookup"><span data-stu-id="0ce28-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="0ce28-107">Inzicht verkrijgen in uw Automation-taken</span><span class="sxs-lookup"><span data-stu-id="0ce28-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="0ce28-108">Trigger een e-mailadres of de waarschuwing op basis van de status van de taak runbook (bijvoorbeeld is mislukt of onderbroken)</span><span class="sxs-lookup"><span data-stu-id="0ce28-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="0ce28-109">Geavanceerde query's in uw taak stromen schrijven</span><span class="sxs-lookup"><span data-stu-id="0ce28-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="0ce28-110">Taken correleren via Automation-accounts</span><span class="sxs-lookup"><span data-stu-id="0ce28-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="0ce28-111">De taakgeschiedenis visualiseren gedurende een periode</span><span class="sxs-lookup"><span data-stu-id="0ce28-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="0ce28-112">Vereisten en overwegingen voor de implementatie</span><span class="sxs-lookup"><span data-stu-id="0ce28-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="0ce28-113">Als u wilt beginnen met het verzenden van uw Automation-logboeken met Log Analytics, hebt u het volgende nodig:</span><span class="sxs-lookup"><span data-stu-id="0ce28-113">To start sending your Automation logs to Log Analytics, you need:</span></span>

1. <span data-ttu-id="0ce28-114">De November 2016 of hoger release van [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="0ce28-114">The November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="0ce28-115">Een werkruimte voor logboekanalyse.</span><span class="sxs-lookup"><span data-stu-id="0ce28-115">A Log Analytics workspace.</span></span> <span data-ttu-id="0ce28-116">Zie voor meer informatie [aan de slag met logboekanalyse](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="0ce28-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="0ce28-117">De ResourceId voor uw Azure Automation-account</span><span class="sxs-lookup"><span data-stu-id="0ce28-117">The ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="0ce28-118">Voer de volgende PowerShell ResourceId van de voor uw Azure Automation-account en de werkruimte voor logboekanalyse vindt:</span><span class="sxs-lookup"><span data-stu-id="0ce28-118">To find the ResourceId for your Azure Automation account and Log Analytics workspace, run the following PowerShell:</span></span>

```powershell
# Find the ResourceId for the Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find the ResourceId for the Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="0ce28-119">Als er meerdere Automation-accounts of werkruimten, in de uitvoer van de bovenstaande opdrachten, vinden de *naam* hoeft te configureren en kopieer de waarde voor *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="0ce28-119">If you have multiple Automation accounts, or workspaces, in the output of the preceding commands, find the *Name* you need to configure and copy the value for *ResourceId*.</span></span>

<span data-ttu-id="0ce28-120">Als u wilt zoeken naar de *naam* van uw Automation-account in de Azure portal, selecteer uw Automation-account van de **Automation-account** blade en selecteer **alle instellingen** .</span><span class="sxs-lookup"><span data-stu-id="0ce28-120">If you need to find the *Name* of your Automation account, in the Azure portal select your Automation account from the **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="0ce28-121">Selecteer op de blade **Alle instellingen** onder **Accountinstellingen** de optie **Eigenschappen**.</span><span class="sxs-lookup"><span data-stu-id="0ce28-121">From the **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="0ce28-122">Noteer de waarden die op de blade **Eigenschappen** worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="0ce28-122">In the **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="0ce28-123">![Eigenschappen van Automation-Account](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="0ce28-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="0ce28-124">Integratie met logboekanalyse instellen</span><span class="sxs-lookup"><span data-stu-id="0ce28-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="0ce28-125">Start op uw computer **Windows PowerShell** van de **Start** scherm.</span><span class="sxs-lookup"><span data-stu-id="0ce28-125">On your computer, start **Windows PowerShell** from the **Start** screen.</span></span>  
2. <span data-ttu-id="0ce28-126">Kopieer en plak de volgende PowerShell en bewerken van de waarde voor de `$workspaceId` en `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="0ce28-126">Copy and paste the following PowerShell, and edit the value for the `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="0ce28-127">Voor de `-Environment` parameter, geldige waarden zijn *AzureCloud* of *AzureUSGovernment* , afhankelijk van de cloudomgeving die u in werkt.</span><span class="sxs-lookup"><span data-stu-id="0ce28-127">For the `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on the cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check to see which cloud environment to sign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use the following command to get the resource id of the workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="0ce28-128">Na dit script uitvoert, ziet u records in logboekanalyse binnen 10 minuten van nieuwe JobLogs of JobStreams wordt geschreven.</span><span class="sxs-lookup"><span data-stu-id="0ce28-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="0ce28-129">Overzicht van de logboeken, voer de volgende query in logboekanalyse logboek zoeken:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="0ce28-129">To see the logs, run the following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="0ce28-130">Configuratie controleren</span><span class="sxs-lookup"><span data-stu-id="0ce28-130">Verify configuration</span></span>
<span data-ttu-id="0ce28-131">Om te bevestigen dat uw Automation-account logboeken naar uw werkruimte voor logboekanalyse is verzendt, moet u controleren of diagnostische gegevens correct zijn ingesteld op het Automation-account met behulp van de volgende PowerShell:</span><span class="sxs-lookup"><span data-stu-id="0ce28-131">To confirm that your Automation account is sending logs to your Log Analytics workspace, check that diagnostics are set correctly on the Automation account using the following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check to see which cloud environment to sign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use the following command to get the resource id of the workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="0ce28-132">Zorg ervoor dat in de uitvoer:</span><span class="sxs-lookup"><span data-stu-id="0ce28-132">In the output ensure that:</span></span>
+ <span data-ttu-id="0ce28-133">Onder *logboeken*, de waarde voor *ingeschakeld* is *True*</span><span class="sxs-lookup"><span data-stu-id="0ce28-133">Under *Logs*, the value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="0ce28-134">De waarde van *WorkspaceId* is ingesteld op de ResourceId van de werkruimte voor logboekanalyse</span><span class="sxs-lookup"><span data-stu-id="0ce28-134">The value of *WorkspaceId* is set to the ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="0ce28-135">Log Analytics-records</span><span class="sxs-lookup"><span data-stu-id="0ce28-135">Log Analytics records</span></span>
<span data-ttu-id="0ce28-136">Diagnostische gegevens van Azure Automation maakt u twee soorten records in Log Analytics en zijn gelabeld als **Type = AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="0ce28-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="0ce28-137">Taaklogboeken</span><span class="sxs-lookup"><span data-stu-id="0ce28-137">Job Logs</span></span>
| <span data-ttu-id="0ce28-138">Eigenschap</span><span class="sxs-lookup"><span data-stu-id="0ce28-138">Property</span></span> | <span data-ttu-id="0ce28-139">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="0ce28-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="0ce28-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="0ce28-140">TimeGenerated</span></span> |<span data-ttu-id="0ce28-141">Datum en tijd van uitvoering van de runbooktaak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-141">Date and time when the runbook job executed.</span></span> |
| <span data-ttu-id="0ce28-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="0ce28-142">RunbookName_s</span></span> |<span data-ttu-id="0ce28-143">De naam van het runbook.</span><span class="sxs-lookup"><span data-stu-id="0ce28-143">The name of the runbook.</span></span> |
| <span data-ttu-id="0ce28-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="0ce28-144">Caller_s</span></span> |<span data-ttu-id="0ce28-145">Wie de bewerking heeft gestart.</span><span class="sxs-lookup"><span data-stu-id="0ce28-145">Who initiated the operation.</span></span>  <span data-ttu-id="0ce28-146">Mogelijke waarden zijn een e-mailadres of het systeem voor geplande taken.</span><span class="sxs-lookup"><span data-stu-id="0ce28-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="0ce28-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="0ce28-147">Tenant_g</span></span> | <span data-ttu-id="0ce28-148">GUID die de tenant voor de aanroeper identificeert.</span><span class="sxs-lookup"><span data-stu-id="0ce28-148">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="0ce28-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="0ce28-149">JobId_g</span></span> |<span data-ttu-id="0ce28-150">De GUID die de id van de runbooktaak is.</span><span class="sxs-lookup"><span data-stu-id="0ce28-150">GUID that is the Id of the runbook job.</span></span> |
| <span data-ttu-id="0ce28-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="0ce28-151">ResultType</span></span> |<span data-ttu-id="0ce28-152">De status van de runbooktaak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-152">The status of the runbook job.</span></span>  <span data-ttu-id="0ce28-153">Mogelijke waarden zijn:</span><span class="sxs-lookup"><span data-stu-id="0ce28-153">Possible values are:</span></span><br><span data-ttu-id="0ce28-154">- Gestart</span><span class="sxs-lookup"><span data-stu-id="0ce28-154">- Started</span></span><br><span data-ttu-id="0ce28-155">- Gestopt</span><span class="sxs-lookup"><span data-stu-id="0ce28-155">- Stopped</span></span><br><span data-ttu-id="0ce28-156">- Onderbroken</span><span class="sxs-lookup"><span data-stu-id="0ce28-156">- Suspended</span></span><br><span data-ttu-id="0ce28-157">- Mislukt</span><span class="sxs-lookup"><span data-stu-id="0ce28-157">- Failed</span></span><br><span data-ttu-id="0ce28-158">-Voltooid</span><span class="sxs-lookup"><span data-stu-id="0ce28-158">- Completed</span></span> |
| <span data-ttu-id="0ce28-159">Category</span><span class="sxs-lookup"><span data-stu-id="0ce28-159">Category</span></span> | <span data-ttu-id="0ce28-160">Classificatie van het type gegevens.</span><span class="sxs-lookup"><span data-stu-id="0ce28-160">Classification of the type of data.</span></span>  <span data-ttu-id="0ce28-161">Voor Automation is de waarde JobLogs.</span><span class="sxs-lookup"><span data-stu-id="0ce28-161">For Automation, the value is JobLogs.</span></span> |
| <span data-ttu-id="0ce28-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="0ce28-162">OperationName</span></span> | <span data-ttu-id="0ce28-163">Hiermee wordt het type bewerking opgegeven dat in Azure wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="0ce28-163">Specifies the type of operation performed in Azure.</span></span>  <span data-ttu-id="0ce28-164">De waarde is voor automatisering kunt taak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-164">For Automation, the value is Job.</span></span> |
| <span data-ttu-id="0ce28-165">Resource</span><span class="sxs-lookup"><span data-stu-id="0ce28-165">Resource</span></span> | <span data-ttu-id="0ce28-166">Naam van het Automation-account</span><span class="sxs-lookup"><span data-stu-id="0ce28-166">Name of the Automation account</span></span> |
| <span data-ttu-id="0ce28-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="0ce28-167">SourceSystem</span></span> | <span data-ttu-id="0ce28-168">Log Analytics verzameld hoe de gegevens.</span><span class="sxs-lookup"><span data-stu-id="0ce28-168">How Log Analytics collected the data.</span></span> <span data-ttu-id="0ce28-169">Altijd *Azure* voor Azure diagnostics.</span><span class="sxs-lookup"><span data-stu-id="0ce28-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="0ce28-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="0ce28-170">ResultDescription</span></span> |<span data-ttu-id="0ce28-171">Hiermee wordt resultaatstatus van de runbooktaak beschreven.</span><span class="sxs-lookup"><span data-stu-id="0ce28-171">Describes the runbook job result state.</span></span>  <span data-ttu-id="0ce28-172">Mogelijke waarden zijn:</span><span class="sxs-lookup"><span data-stu-id="0ce28-172">Possible values are:</span></span><br><span data-ttu-id="0ce28-173">- Taak is gestart</span><span class="sxs-lookup"><span data-stu-id="0ce28-173">- Job is started</span></span><br><span data-ttu-id="0ce28-174">- Taak is mislukt</span><span class="sxs-lookup"><span data-stu-id="0ce28-174">- Job Failed</span></span><br><span data-ttu-id="0ce28-175">- Taak is voltooid</span><span class="sxs-lookup"><span data-stu-id="0ce28-175">- Job Completed</span></span> |
| <span data-ttu-id="0ce28-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="0ce28-176">CorrelationId</span></span> |<span data-ttu-id="0ce28-177">De GUID die de correlatie-id van de runbooktaak is.</span><span class="sxs-lookup"><span data-stu-id="0ce28-177">GUID that is the Correlation Id of the runbook job.</span></span> |
| <span data-ttu-id="0ce28-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="0ce28-178">ResourceId</span></span> |<span data-ttu-id="0ce28-179">Hiermee geeft u de Azure Automation-account-id van het runbook.</span><span class="sxs-lookup"><span data-stu-id="0ce28-179">Specifies the Azure Automation account resource id of the runbook.</span></span> |
| <span data-ttu-id="0ce28-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="0ce28-180">SubscriptionId</span></span> | <span data-ttu-id="0ce28-181">De Azure-abonnement-Id (GUID) voor het Automation-account.</span><span class="sxs-lookup"><span data-stu-id="0ce28-181">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="0ce28-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="0ce28-182">ResourceGroup</span></span> | <span data-ttu-id="0ce28-183">Naam van de resourcegroep voor het Automation-account.</span><span class="sxs-lookup"><span data-stu-id="0ce28-183">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="0ce28-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="0ce28-184">ResourceProvider</span></span> | <span data-ttu-id="0ce28-185">MICROSOFT CORPORATION. AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="0ce28-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="0ce28-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="0ce28-186">ResourceType</span></span> | <span data-ttu-id="0ce28-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="0ce28-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="0ce28-188">Taak stromen</span><span class="sxs-lookup"><span data-stu-id="0ce28-188">Job Streams</span></span>
| <span data-ttu-id="0ce28-189">Eigenschap</span><span class="sxs-lookup"><span data-stu-id="0ce28-189">Property</span></span> | <span data-ttu-id="0ce28-190">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="0ce28-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="0ce28-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="0ce28-191">TimeGenerated</span></span> |<span data-ttu-id="0ce28-192">Datum en tijd van uitvoering van de runbooktaak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-192">Date and time when the runbook job executed.</span></span> |
| <span data-ttu-id="0ce28-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="0ce28-193">RunbookName_s</span></span> |<span data-ttu-id="0ce28-194">De naam van het runbook.</span><span class="sxs-lookup"><span data-stu-id="0ce28-194">The name of the runbook.</span></span> |
| <span data-ttu-id="0ce28-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="0ce28-195">Caller_s</span></span> |<span data-ttu-id="0ce28-196">Wie de bewerking heeft gestart.</span><span class="sxs-lookup"><span data-stu-id="0ce28-196">Who initiated the operation.</span></span>  <span data-ttu-id="0ce28-197">Mogelijke waarden zijn een e-mailadres of het systeem voor geplande taken.</span><span class="sxs-lookup"><span data-stu-id="0ce28-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="0ce28-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="0ce28-198">StreamType_s</span></span> |<span data-ttu-id="0ce28-199">Het type taakstroom.</span><span class="sxs-lookup"><span data-stu-id="0ce28-199">The type of job stream.</span></span> <span data-ttu-id="0ce28-200">Mogelijke waarden zijn:</span><span class="sxs-lookup"><span data-stu-id="0ce28-200">Possible values are:</span></span><br><span data-ttu-id="0ce28-201">- Voortgang</span><span class="sxs-lookup"><span data-stu-id="0ce28-201">-Progress</span></span><br><span data-ttu-id="0ce28-202">- Uitvoer</span><span class="sxs-lookup"><span data-stu-id="0ce28-202">- Output</span></span><br><span data-ttu-id="0ce28-203">- Waarschuwing</span><span class="sxs-lookup"><span data-stu-id="0ce28-203">- Warning</span></span><br><span data-ttu-id="0ce28-204">- Fout</span><span class="sxs-lookup"><span data-stu-id="0ce28-204">- Error</span></span><br><span data-ttu-id="0ce28-205">- Foutopsporing</span><span class="sxs-lookup"><span data-stu-id="0ce28-205">- Debug</span></span><br><span data-ttu-id="0ce28-206">- Uitgebreid</span><span class="sxs-lookup"><span data-stu-id="0ce28-206">- Verbose</span></span> |
| <span data-ttu-id="0ce28-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="0ce28-207">Tenant_g</span></span> | <span data-ttu-id="0ce28-208">GUID die de tenant voor de aanroeper identificeert.</span><span class="sxs-lookup"><span data-stu-id="0ce28-208">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="0ce28-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="0ce28-209">JobId_g</span></span> |<span data-ttu-id="0ce28-210">De GUID die de id van de runbooktaak is.</span><span class="sxs-lookup"><span data-stu-id="0ce28-210">GUID that is the Id of the runbook job.</span></span> |
| <span data-ttu-id="0ce28-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="0ce28-211">ResultType</span></span> |<span data-ttu-id="0ce28-212">De status van de runbooktaak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-212">The status of the runbook job.</span></span>  <span data-ttu-id="0ce28-213">Mogelijke waarden zijn:</span><span class="sxs-lookup"><span data-stu-id="0ce28-213">Possible values are:</span></span><br><span data-ttu-id="0ce28-214">-In voortgang</span><span class="sxs-lookup"><span data-stu-id="0ce28-214">- In Progress</span></span> |
| <span data-ttu-id="0ce28-215">Category</span><span class="sxs-lookup"><span data-stu-id="0ce28-215">Category</span></span> | <span data-ttu-id="0ce28-216">Classificatie van het type gegevens.</span><span class="sxs-lookup"><span data-stu-id="0ce28-216">Classification of the type of data.</span></span>  <span data-ttu-id="0ce28-217">Voor Automation is de waarde JobStreams.</span><span class="sxs-lookup"><span data-stu-id="0ce28-217">For Automation, the value is JobStreams.</span></span> |
| <span data-ttu-id="0ce28-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="0ce28-218">OperationName</span></span> | <span data-ttu-id="0ce28-219">Hiermee wordt het type bewerking opgegeven dat in Azure wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="0ce28-219">Specifies the type of operation performed in Azure.</span></span>  <span data-ttu-id="0ce28-220">De waarde is voor automatisering kunt taak.</span><span class="sxs-lookup"><span data-stu-id="0ce28-220">For Automation, the value is Job.</span></span> |
| <span data-ttu-id="0ce28-221">Resource</span><span class="sxs-lookup"><span data-stu-id="0ce28-221">Resource</span></span> | <span data-ttu-id="0ce28-222">Naam van het Automation-account</span><span class="sxs-lookup"><span data-stu-id="0ce28-222">Name of the Automation account</span></span> |
| <span data-ttu-id="0ce28-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="0ce28-223">SourceSystem</span></span> | <span data-ttu-id="0ce28-224">Log Analytics verzameld hoe de gegevens.</span><span class="sxs-lookup"><span data-stu-id="0ce28-224">How Log Analytics collected the data.</span></span> <span data-ttu-id="0ce28-225">Altijd *Azure* voor Azure diagnostics.</span><span class="sxs-lookup"><span data-stu-id="0ce28-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="0ce28-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="0ce28-226">ResultDescription</span></span> |<span data-ttu-id="0ce28-227">Bevat de uitvoerstroom van het runbook.</span><span class="sxs-lookup"><span data-stu-id="0ce28-227">Includes the output stream from the runbook.</span></span> |
| <span data-ttu-id="0ce28-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="0ce28-228">CorrelationId</span></span> |<span data-ttu-id="0ce28-229">De GUID die de correlatie-id van de runbooktaak is.</span><span class="sxs-lookup"><span data-stu-id="0ce28-229">GUID that is the Correlation Id of the runbook job.</span></span> |
| <span data-ttu-id="0ce28-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="0ce28-230">ResourceId</span></span> |<span data-ttu-id="0ce28-231">Hiermee geeft u de Azure Automation-account-id van het runbook.</span><span class="sxs-lookup"><span data-stu-id="0ce28-231">Specifies the Azure Automation account resource id of the runbook.</span></span> |
| <span data-ttu-id="0ce28-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="0ce28-232">SubscriptionId</span></span> | <span data-ttu-id="0ce28-233">De Azure-abonnement-Id (GUID) voor het Automation-account.</span><span class="sxs-lookup"><span data-stu-id="0ce28-233">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="0ce28-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="0ce28-234">ResourceGroup</span></span> | <span data-ttu-id="0ce28-235">Naam van de resourcegroep voor het Automation-account.</span><span class="sxs-lookup"><span data-stu-id="0ce28-235">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="0ce28-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="0ce28-236">ResourceProvider</span></span> | <span data-ttu-id="0ce28-237">MICROSOFT CORPORATION. AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="0ce28-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="0ce28-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="0ce28-238">ResourceType</span></span> | <span data-ttu-id="0ce28-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="0ce28-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="0ce28-240">Log Analytics Automation weer aanmeldt</span><span class="sxs-lookup"><span data-stu-id="0ce28-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="0ce28-241">Nu uw Automation-taaklogboeken verzenden met logboekanalyse hebt gestart, gaan we kijken wat u kunt doen met deze logboeken in logboekanalyse.</span><span class="sxs-lookup"><span data-stu-id="0ce28-241">Now that you have started sending your Automation job logs to Log Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="0ce28-242">Overzicht van de logboeken, voer de volgende query:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="0ce28-242">To see the logs, run the following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="0ce28-243">Een e-mailbericht verzenden wanneer een runbooktaak is mislukt of wordt onderbroken</span><span class="sxs-lookup"><span data-stu-id="0ce28-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="0ce28-244">Een van onze belangrijkste klant vraagt is voor de mogelijkheid voor het verzenden van een e-mailbericht of een tekst wanneer er iets mis met een runbooktaak gaat.</span><span class="sxs-lookup"><span data-stu-id="0ce28-244">One of our top customer asks is for the ability to send an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="0ce28-245">Als u wilt een waarschuwingsregel maakt, begint u met het maken van een zoekopdracht logboek voor de runbook-taak-records die de waarschuwing moet worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="0ce28-245">To create an alert rule, you start by creating a log search for the runbook job records that should invoke the alert.</span></span>  <span data-ttu-id="0ce28-246">Klik op de **waarschuwing** knop maken en configureren van de waarschuwingsregel.</span><span class="sxs-lookup"><span data-stu-id="0ce28-246">Click the **Alert** button to create and configure the alert rule.</span></span>

1. <span data-ttu-id="0ce28-247">Klik op de pagina overzicht van Log Analytics **logboek zoeken**.</span><span class="sxs-lookup"><span data-stu-id="0ce28-247">From the Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="0ce28-248">Maken van een zoekquery logboek voor de waarschuwing door de volgende zoeken in het queryveld typen: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` u kunt de RunbookName groeperen met behulp van:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="0ce28-248">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by the RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="0ce28-249">Als u naar de werkruimte logboeken van meer dan een Automation-account of -abonnement hebt ingesteld, kunt u uw waarschuwingen per abonnement en de Automation-account kunt groeperen.</span><span class="sxs-lookup"><span data-stu-id="0ce28-249">If you have set up logs from more than one Automation account or subscription to your workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="0ce28-250">Automation-accountnaam kan worden afgeleid van het veld Resource in het doorzoeken van JobLogs.</span><span class="sxs-lookup"><span data-stu-id="0ce28-250">Automation account name can be derived from the Resource field in the search of JobLogs.</span></span>  
3. <span data-ttu-id="0ce28-251">Openen van de **waarschuwingsregel toevoegen** scherm, klikt u op **waarschuwing** boven aan de pagina.</span><span class="sxs-lookup"><span data-stu-id="0ce28-251">To open the **Add Alert Rule** screen, click **Alert** at the top of the page.</span></span> <span data-ttu-id="0ce28-252">Zie voor meer informatie over de opties voor het configureren van de waarschuwing [waarschuwingen in logboekanalyse](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="0ce28-252">For further details on the options to configure the alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="0ce28-253">Alle taken die zijn voltooid met fouten vinden</span><span class="sxs-lookup"><span data-stu-id="0ce28-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="0ce28-254">Naast de waarschuwingen op fouten, vindt u wanneer een runbooktaak een fout niet wordt beëindigd heeft.</span><span class="sxs-lookup"><span data-stu-id="0ce28-254">In addition to alerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="0ce28-255">In dergelijke gevallen PowerShell produceert een foutstroom, maar de fouten niet wordt beëindigd zorgen niet voor de taak onderbreken of als mislukt.</span><span class="sxs-lookup"><span data-stu-id="0ce28-255">In these cases PowerShell produces an error stream, but the non-terminating errors do not cause your job to suspend or fail.</span></span>    

1. <span data-ttu-id="0ce28-256">Klik in de werkruimte voor logboekanalyse op **logboek zoeken**.</span><span class="sxs-lookup"><span data-stu-id="0ce28-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="0ce28-257">Typ in het queryveld `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` en klik vervolgens op **Search**.</span><span class="sxs-lookup"><span data-stu-id="0ce28-257">In the query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="0ce28-258">Weergave taak stromen voor een taak</span><span class="sxs-lookup"><span data-stu-id="0ce28-258">View job streams for a job</span></span>
<span data-ttu-id="0ce28-259">Wanneer u een taak foutopsporing, kunt u ook om te zoeken in de taak stromen.</span><span class="sxs-lookup"><span data-stu-id="0ce28-259">When you are debugging a job, you may also want to look into the job streams.</span></span>  <span data-ttu-id="0ce28-260">De volgende query geeft alle stromen voor een enkele taak met GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0:</span><span class="sxs-lookup"><span data-stu-id="0ce28-260">The following query shows all the streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="0ce28-261">Status van de historische taak weergeven</span><span class="sxs-lookup"><span data-stu-id="0ce28-261">View historical job status</span></span>
<span data-ttu-id="0ce28-262">U kunt ten slotte uw Taakgeschiedenis visualiseren gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="0ce28-262">Finally, you may want to visualize your job history over time.</span></span>  <span data-ttu-id="0ce28-263">U kunt deze query gebruiken om te zoeken naar de status van de taken gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="0ce28-263">You can use this query to search for the status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="0ce28-264">![OMS historische taak Statusgrafiek](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="0ce28-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="0ce28-265">Samenvatting</span><span class="sxs-lookup"><span data-stu-id="0ce28-265">Summary</span></span>
<span data-ttu-id="0ce28-266">Verzenden van uw Automation-taak status en stream-gegevens met Log Analytics, krijgt u inzicht in de status van uw Automation-taken op:</span><span class="sxs-lookup"><span data-stu-id="0ce28-266">By sending your Automation job status and stream data to Log Analytics, you can get better insight into the status of your Automation jobs by:</span></span>
+ <span data-ttu-id="0ce28-267">Instellen van waarschuwingen om u te waarschuwen wanneer er een probleem</span><span class="sxs-lookup"><span data-stu-id="0ce28-267">Setting up alerts to notify you when there is an issue</span></span>
+ <span data-ttu-id="0ce28-268">Met behulp van aangepaste weergaven en zoekopdrachten voor het visualiseren van de runbookresultaten, gerelateerde de status van de runbook-taak en andere indicatoren of metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="0ce28-268">Using custom views and search queries to visualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="0ce28-269">Log Analytics biedt meer operationeel inzicht voor uw Automation-taken en adres incidenten sneller kan helpen.</span><span class="sxs-lookup"><span data-stu-id="0ce28-269">Log Analytics provides greater operational visibility to your Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="0ce28-270">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="0ce28-270">Next steps</span></span>
* <span data-ttu-id="0ce28-271">Zie [Log searches in Log Analytics (Logboekzoekopdrachten in Log Analytics)](../log-analytics/log-analytics-log-searches.md) voor meer informatie over het maken van verschillende zoekquery's en het controleren van de Automation-taaklogboeken met Log Analytics</span><span class="sxs-lookup"><span data-stu-id="0ce28-271">To learn more about how to construct different search queries and review the Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="0ce28-272">Zie voor informatie over het maken en ophalen van de uitvoer en foutberichten van runbooks, [Runbook uitvoer en berichten](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="0ce28-272">To understand how to create and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="0ce28-273">Zie [Track a runbook job (Runbooktaken bijhouden)](automation-runbook-execution.md) voor meer informatie over runbookuitvoering, het bewaken van runbooktaken en andere technische details</span><span class="sxs-lookup"><span data-stu-id="0ce28-273">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="0ce28-274">Zie [Collecting Azure storage data in Log Analytics overview (Overzicht Azure-opslaggegevens verzamelen in Log Analytics)](../log-analytics/log-analytics-azure-storage.md) voor meer informatie over OMS Log Analytics en gegevensverzamelingsbronnen</span><span class="sxs-lookup"><span data-stu-id="0ce28-274">To learn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
