---
title: De verwijdering van resourcegroepen automatiseren | Microsoft Docs
description: PowerShell Workflow-versie van een Azure Automation-scenario, inclusief runbooks om alle resourcegroepen in uw abonnement te verwijderen.
services: automation
documentationcenter: 
author: MGoedtel
manager: jwhit
editor: 
ms.assetid: b848e345-fd5d-4b9d-bc57-3fe41d2ddb5c
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 09/26/2016
ms.author: magoedte
ms.openlocfilehash: 6aa3897d44b146483204d43e026d3d158c3e13b6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="azure-automation-scenario---automate-removal-of-resource-groups"></a><span data-ttu-id="ff57e-103">Azure Automation-scenario: de verwijdering van resourcegroepen automatiseren</span><span class="sxs-lookup"><span data-stu-id="ff57e-103">Azure Automation scenario - automate removal of resource groups</span></span>
<span data-ttu-id="ff57e-104">Veel klanten maken meer dan één resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="ff57e-104">Many customers create more than one resource group.</span></span> <span data-ttu-id="ff57e-105">Sommige worden dan bijvoorbeeld gebruikt voor het beheer van productietoepassingen en andere als ontwikkelings-, test- en faseringsomgeving.</span><span class="sxs-lookup"><span data-stu-id="ff57e-105">Some might be used for managing production applications, and others might be used as development, testing, and staging environments.</span></span> <span data-ttu-id="ff57e-106">Het automatiseren van de implementatie van deze resources is één ding, maar om een resourcegroep buiten gebruik te stellen met een enkele muisklik is heel wat anders.</span><span class="sxs-lookup"><span data-stu-id="ff57e-106">Automating the deployment of these resources is one thing, but being able to decommission a resource group with a click of the button is another.</span></span> <span data-ttu-id="ff57e-107">U kunt deze algemene beheertaak stroomlijnen met behulp van Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="ff57e-107">You can streamline this common management task by using Azure Automation.</span></span> <span data-ttu-id="ff57e-108">Dit is handig als u werkt met een Azure-abonnement met een bestedingslimiet via een ledenaanbieding zoals MSDN of het programma Microsoft Partner Network Cloud Essentials.</span><span class="sxs-lookup"><span data-stu-id="ff57e-108">This is helpful if you are working with an Azure subscription that has a spending limit through a member offer like MSDN or the Microsoft Partner Network Cloud Essentials program.</span></span>

<span data-ttu-id="ff57e-109">Dit scenario is gebaseerd op een PowerShell-runbook en is ontworpen om een of meer resourcegroepen die u opgeeft uit uw abonnement te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="ff57e-109">This scenario is based on a PowerShell runbook and is designed to remove one or more resource groups that you specify from your subscription.</span></span> <span data-ttu-id="ff57e-110">De standaardinstelling van het runbook is om een test uit te voeren voordat u doorgaat.</span><span class="sxs-lookup"><span data-stu-id="ff57e-110">The default setting of the runbook is to test before proceeding.</span></span> <span data-ttu-id="ff57e-111">Zo voorkomt u dat u de resourcegroep per ongeluk verwijdert voordat u er klaar voor bent om deze procedure te voltooien.</span><span class="sxs-lookup"><span data-stu-id="ff57e-111">This ensures that you don't accidentally delete the resource group before you're ready to complete this procedure.</span></span>   

## <a name="getting-the-scenario"></a><span data-ttu-id="ff57e-112">Het scenario ophalen</span><span class="sxs-lookup"><span data-stu-id="ff57e-112">Getting the scenario</span></span>
<span data-ttu-id="ff57e-113">Dit scenario bestaat uit een PowerShell-runbook dat u kunt downloaden uit de [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span><span class="sxs-lookup"><span data-stu-id="ff57e-113">This scenario consists of a PowerShell runbook that you can download from the [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span></span> <span data-ttu-id="ff57e-114">U kunt het ook rechtstreeks vanuit de [Runbook-galerie](automation-runbook-gallery.md) in Azure Portal importeren.</span><span class="sxs-lookup"><span data-stu-id="ff57e-114">You can also import it directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal.</span></span><br><br>

| <span data-ttu-id="ff57e-115">Runbook</span><span class="sxs-lookup"><span data-stu-id="ff57e-115">Runbook</span></span> | <span data-ttu-id="ff57e-116">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="ff57e-116">Description</span></span> |
| --- | --- |
| <span data-ttu-id="ff57e-117">Remove-ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="ff57e-117">Remove-ResourceGroup</span></span> |<span data-ttu-id="ff57e-118">Hiermee verwijdert u een of meer Azure-resourcegroepen en de daarbij behorende resources uit het abonnement.</span><span class="sxs-lookup"><span data-stu-id="ff57e-118">Removes one or more Azure resource groups and associated resources from the subscription.</span></span> |

<br>
<span data-ttu-id="ff57e-119">De volgende invoerparameters zijn voor dit runbook gedefinieerd:</span><span class="sxs-lookup"><span data-stu-id="ff57e-119">The following input parameters are defined for this runbook:</span></span>

| <span data-ttu-id="ff57e-120">Parameter</span><span class="sxs-lookup"><span data-stu-id="ff57e-120">Parameter</span></span> | <span data-ttu-id="ff57e-121">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="ff57e-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="ff57e-122">NameFilter (vereist)</span><span class="sxs-lookup"><span data-stu-id="ff57e-122">NameFilter (Required)</span></span> |<span data-ttu-id="ff57e-123">Hiermee geeft u een naamfilter op, zodat u de resourcegroepen die u van plan bent te verwijderen, kunt beperken.</span><span class="sxs-lookup"><span data-stu-id="ff57e-123">Specifies a name filter to limit the resource groups that you intend on deleting.</span></span> <span data-ttu-id="ff57e-124">U kunt meerdere waarden doorgeven met behulp van een met komma's gescheiden lijst.</span><span class="sxs-lookup"><span data-stu-id="ff57e-124">You can pass multiple values using a comma-separated list.</span></span><br><span data-ttu-id="ff57e-125">Het filter is niet hoofdlettergevoelig en komt overeen met elke resourcegroep die de tekenreeks bevat.</span><span class="sxs-lookup"><span data-stu-id="ff57e-125">The filter is not case-sensitive and will match any resource group that contains the string.</span></span> |
| <span data-ttu-id="ff57e-126">PreviewMode (optioneel)</span><span class="sxs-lookup"><span data-stu-id="ff57e-126">PreviewMode (Optional)</span></span> |<span data-ttu-id="ff57e-127">Hiermee voert u het runbook uit om te zien welke resourcegroepen er worden verwijderd, maar er wordt geen actie ondernomen.</span><span class="sxs-lookup"><span data-stu-id="ff57e-127">Executes the runbook to see which resource groups would be deleted, but takes no action.</span></span><br><span data-ttu-id="ff57e-128">De standaard is **waar**. Zo voorkomt u dat u onbedoeld een of meer resourcegroepen verwijdert die aan het runbook zijn doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="ff57e-128">The default is **true** to help avoid accidental deletion of one or more resource groups passed to the runbook.</span></span> |

## <a name="install-and-configure-this-scenario"></a><span data-ttu-id="ff57e-129">Dit scenario installeren en configureren</span><span class="sxs-lookup"><span data-stu-id="ff57e-129">Install and configure this scenario</span></span>
### <a name="prerequisites"></a><span data-ttu-id="ff57e-130">Vereisten</span><span class="sxs-lookup"><span data-stu-id="ff57e-130">Prerequisites</span></span>
<span data-ttu-id="ff57e-131">Dit runbook verifieert het gebruik van het [Azure Uitvoeren als-account](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="ff57e-131">This runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span>    

### <a name="install-and-publish-the-runbooks"></a><span data-ttu-id="ff57e-132">De runbooks installeren en publiceren</span><span class="sxs-lookup"><span data-stu-id="ff57e-132">Install and publish the runbooks</span></span>
<span data-ttu-id="ff57e-133">Nadat u het runbook hebt gedownload, kunt u dit importeren met behulp van de procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation) (Procedures voor het importeren van runbooks).</span><span class="sxs-lookup"><span data-stu-id="ff57e-133">After you download the runbook, you can import it by using the procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span></span> <span data-ttu-id="ff57e-134">Publiceer het runbook nadat dit is geïmporteerd in uw Automation-account.</span><span class="sxs-lookup"><span data-stu-id="ff57e-134">Publish the runbook after it has been successfully imported into your Automation account.</span></span>

## <a name="using-the-runbook"></a><span data-ttu-id="ff57e-135">Het runbook gebruiken</span><span class="sxs-lookup"><span data-stu-id="ff57e-135">Using the runbook</span></span>
<span data-ttu-id="ff57e-136">De volgende stappen helpen u bij het uitvoeren van dit runbook. Zo raakt u vertrouwd met hoe het werkt.</span><span class="sxs-lookup"><span data-stu-id="ff57e-136">The following steps will walk you through the execution of this runbook and help you become familiar with how it works.</span></span> <span data-ttu-id="ff57e-137">In dit voorbeeld wordt het runbook alleen getest. De resourcegroep wordt niet daadwerkelijk verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ff57e-137">You will only be testing the runbook in this example, not actually deleting the resource group.</span></span>  

1. <span data-ttu-id="ff57e-138">Open uw Automation-account via Azure Portal en klik op **Runbooks**.</span><span class="sxs-lookup"><span data-stu-id="ff57e-138">From the Azure portal, open your Automation account and click **Runbooks**.</span></span>
2. <span data-ttu-id="ff57e-139">Selecteer het runbook **Remove-ResourceGroup** en klik op **Starten**.</span><span class="sxs-lookup"><span data-stu-id="ff57e-139">Select the **Remove-ResourceGroup** runbook and click **Start**.</span></span>
3. <span data-ttu-id="ff57e-140">Wanneer u het runbook start, wordt de blade **Runbook starten** geopend en kunt u de parameters configureren.</span><span class="sxs-lookup"><span data-stu-id="ff57e-140">When you start the runbook, the **Start Runbook** blade opens and you can configure the parameters.</span></span> <span data-ttu-id="ff57e-141">Voer de namen in van de resourcegroepen in uw abonnement waarmee u wilt testen en waarvan het niet erg is als deze per ongeluk worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ff57e-141">Enter the names of resource groups in your subscription that you can use for testing and will cause no harm if accidentally deleted.</span></span><br> <span data-ttu-id="ff57e-142">![Remove-ResouceGroup-parameters](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span><span class="sxs-lookup"><span data-stu-id="ff57e-142">![Remove-ResouceGroup parameters](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span></span>

   > [!NOTE]
   > <span data-ttu-id="ff57e-143">Zorg ervoor dat **Previewmode** is ingesteld op **true** om te voorkomen dat de geselecteerde resourcegroepen worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ff57e-143">Make sure **Previewmode** is set to **true** to avoid deleting the selected resource groups.</span></span>  <span data-ttu-id="ff57e-144">**Opmerking:** Met dit runbook wordt de resourcegroep met het Automation-account dat dit runbook uitvoert, niet verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ff57e-144">**Note** that this runbook will not remove the resource group that contains the Automation account that is running this runbook.</span></span>  
   >
   >
4. <span data-ttu-id="ff57e-145">Nadat u alle parameterwaarden hebt geconfigureerd, klikt u op **OK**. Het runbook wordt in de wachtrij geplaatst om te worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ff57e-145">After you have configured all the parameter values, click **OK**, and the runbook will be queued for execution.</span></span>  

<span data-ttu-id="ff57e-146">Als u de details van de runbooktaak **Remove-ResourceGroup** in Azure Portal wilt weergeven, selecteert u **Taken** in het runbook.</span><span class="sxs-lookup"><span data-stu-id="ff57e-146">To view the details of the **Remove-ResourceGroup** runbook job in the Azure portal, select **Jobs** in the runbook.</span></span> <span data-ttu-id="ff57e-147">Het taakoverzicht geeft de invoerparameters en de uitvoerstroom weer, naast algemene informatie over de taak en eventuele uitzonderingen.</span><span class="sxs-lookup"><span data-stu-id="ff57e-147">The job summary displays the input parameters and the output stream in addition to general information about the job and any exceptions that occurred.</span></span><br> <span data-ttu-id="ff57e-148">![Taakstatus van het runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span><span class="sxs-lookup"><span data-stu-id="ff57e-148">![Remove-ResourceGroup runbook job status](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span></span>

<span data-ttu-id="ff57e-149">Het **Taakoverzicht** bevat berichten van de uitvoer-, waarschuwings- en foutstromen.</span><span class="sxs-lookup"><span data-stu-id="ff57e-149">The **Job Summary** includes messages from the output, warning, and error streams.</span></span> <span data-ttu-id="ff57e-150">Selecteer **Uitvoer** om gedetailleerde resultaten van de uitvoering van het runbook weer te geven.</span><span class="sxs-lookup"><span data-stu-id="ff57e-150">Select **Output** to view detailed results from the runbook execution.</span></span><br> <span data-ttu-id="ff57e-151">![Uitvoerresultaten van het runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="ff57e-151">![Remove-ResourceGroup runbook output results](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span></span>

## <a name="next-steps"></a><span data-ttu-id="ff57e-152">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ff57e-152">Next steps</span></span>
* <span data-ttu-id="ff57e-153">Zie [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md) (Een runbook in Azure Automation maken of importeren) om uw eigen runbook te maken.</span><span class="sxs-lookup"><span data-stu-id="ff57e-153">To get started creating your own runbook, see [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md).</span></span>
* <span data-ttu-id="ff57e-154">Zie [Mijn eerste PowerShell Workflow-runbook](automation-first-runbook-textual.md) om aan de slag te gaan met PowerShell Workflow-runbooks.</span><span class="sxs-lookup"><span data-stu-id="ff57e-154">To get started with PowerShell Workflow runbooks, see [My first PowerShell Workflow runbook](automation-first-runbook-textual.md).</span></span>
