---
title: Uitvoeren van Runbook in Azure Automation | Microsoft Docs
description: Beschrijft de details van hoe een runbook in Azure Automation wordt verwerkt.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="d4024-103">Uitvoeren van Runbook in Azure Automation</span><span class="sxs-lookup"><span data-stu-id="d4024-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="d4024-104">Wanneer u een runbook in Azure Automation start, wordt een taak gemaakt.</span><span class="sxs-lookup"><span data-stu-id="d4024-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="d4024-105">Een taak is één uitvoeringsinstantie van een runbook.</span><span class="sxs-lookup"><span data-stu-id="d4024-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="d4024-106">Een Azure Automation worker is toegewezen aan elke taak uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="d4024-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="d4024-107">Werknemers worden gedeeld door meerdere Azure-accounts, zijn taken van andere Automation-accounts geïsoleerd van elkaar.</span><span class="sxs-lookup"><span data-stu-id="d4024-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="d4024-108">U doet geen hebben controle over welke worker-services de aanvraag voor de taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="d4024-109">Één runbook kan meerdere taken tegelijk actief hebben.</span><span class="sxs-lookup"><span data-stu-id="d4024-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="d4024-110">Wanneer u de lijst met runbooks in de Azure portal weergeeft, geeft de status van alle taken die zijn gestart voor elk runbook.</span><span class="sxs-lookup"><span data-stu-id="d4024-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="d4024-111">U kunt de lijst met taken voor elk runbook weergeven om de status van elk bijhouden.</span><span class="sxs-lookup"><span data-stu-id="d4024-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="d4024-112">Zie voor een beschrijving van de status van een andere taak [status van een taak](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="d4024-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="d4024-113">Het volgende diagram toont de levenscyclus van een runbooktaak voor [grafische runbooks](automation-runbook-types.md#graphical-runbooks) en [PowerShell Workflow-runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="d4024-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Status van een taak - PowerShell-werkstroom](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="d4024-115">Het volgende diagram toont de levenscyclus van een runbooktaak voor [PowerShell-runbooks](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="d4024-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Status van een taak - PowerShell-Script](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="d4024-117">Uw taken hebben toegang tot uw Azure-resources door het maken van een verbinding met uw Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="d4024-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="d4024-118">Ze hebben alleen toegang tot bronnen in uw datacentrum als deze resources toegankelijk via de openbare cloud zijn.</span><span class="sxs-lookup"><span data-stu-id="d4024-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="d4024-119">Status van een taak</span><span class="sxs-lookup"><span data-stu-id="d4024-119">Job statuses</span></span>
<span data-ttu-id="d4024-120">De volgende tabel beschrijft de verschillende statussen die mogelijk voor een taak zijn.</span><span class="sxs-lookup"><span data-stu-id="d4024-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="d4024-121">Status</span><span class="sxs-lookup"><span data-stu-id="d4024-121">Status</span></span> | <span data-ttu-id="d4024-122">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d4024-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d4024-123">Voltooid</span><span class="sxs-lookup"><span data-stu-id="d4024-123">Completed</span></span> |<span data-ttu-id="d4024-124">De taak is voltooid.</span><span class="sxs-lookup"><span data-stu-id="d4024-124">The job completed successfully.</span></span> |
| <span data-ttu-id="d4024-125">Is mislukt</span><span class="sxs-lookup"><span data-stu-id="d4024-125">Failed</span></span> |<span data-ttu-id="d4024-126">Voor [grafisch en PowerShell Workflow-runbooks](automation-runbook-types.md), het runbook kan niet worden gecompileerd.</span><span class="sxs-lookup"><span data-stu-id="d4024-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="d4024-127">Voor [PowerShell-Script runbooks](automation-runbook-types.md), het runbook kan niet worden gestart of de taak is een uitzondering opgetreden.</span><span class="sxs-lookup"><span data-stu-id="d4024-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="d4024-128">Is mislukt, wacht voor bronnen</span><span class="sxs-lookup"><span data-stu-id="d4024-128">Failed, waiting for resources</span></span> |<span data-ttu-id="d4024-129">De taak is mislukt omdat het werkproces de [evenredige verdeling](#fairshare) driemaal beperken en gestart vanaf het dezelfde controlepunt of vanaf het begin van het runbook elke keer.</span><span class="sxs-lookup"><span data-stu-id="d4024-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="d4024-130">In de wachtrij</span><span class="sxs-lookup"><span data-stu-id="d4024-130">Queued</span></span> |<span data-ttu-id="d4024-131">De taak is in afwachting voor bronnen op een Automation worker beschikbaar zijn, zodat het kan worden gestart.</span><span class="sxs-lookup"><span data-stu-id="d4024-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="d4024-132">Starting</span><span class="sxs-lookup"><span data-stu-id="d4024-132">Starting</span></span> |<span data-ttu-id="d4024-133">De taak is toegewezen aan een werknemer en het systeem is bezig te starten.</span><span class="sxs-lookup"><span data-stu-id="d4024-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="d4024-134">Hervatten</span><span class="sxs-lookup"><span data-stu-id="d4024-134">Resuming</span></span> |<span data-ttu-id="d4024-135">Het systeem is bezig de taak wordt hervat nadat deze is onderbroken.</span><span class="sxs-lookup"><span data-stu-id="d4024-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="d4024-136">Running</span><span class="sxs-lookup"><span data-stu-id="d4024-136">Running</span></span> |<span data-ttu-id="d4024-137">De taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d4024-137">The job is running.</span></span> |
| <span data-ttu-id="d4024-138">Wordt uitgevoerd, wachten op resources</span><span class="sxs-lookup"><span data-stu-id="d4024-138">Running, waiting for resources</span></span> |<span data-ttu-id="d4024-139">De taak is verwijderd omdat het werkproces de [evenredige verdeling](#fairshare) limiet.</span><span class="sxs-lookup"><span data-stu-id="d4024-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="d4024-140">Het hervatten snel uit de laatste controlepunt.</span><span class="sxs-lookup"><span data-stu-id="d4024-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="d4024-141">Stopped</span><span class="sxs-lookup"><span data-stu-id="d4024-141">Stopped</span></span> |<span data-ttu-id="d4024-142">De taak is gestopt door de gebruiker voordat deze is voltooid.</span><span class="sxs-lookup"><span data-stu-id="d4024-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="d4024-143">Stopping</span><span class="sxs-lookup"><span data-stu-id="d4024-143">Stopping</span></span> |<span data-ttu-id="d4024-144">Het systeem is bezig te stoppen van de taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="d4024-145">Onderbroken</span><span class="sxs-lookup"><span data-stu-id="d4024-145">Suspended</span></span> |<span data-ttu-id="d4024-146">De taak is onderbroken door de gebruiker, door het systeem of door een opdracht in het runbook.</span><span class="sxs-lookup"><span data-stu-id="d4024-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="d4024-147">Een onderbroken taak kan opnieuw worden gestart en hervat vanaf het laatste controlepunt of vanaf het begin van het runbook als er geen controlepunten.</span><span class="sxs-lookup"><span data-stu-id="d4024-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="d4024-148">Het runbook wordt alleen door het systeem worden onderbroken wanneer er een uitzondering optreedt.</span><span class="sxs-lookup"><span data-stu-id="d4024-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="d4024-149">ErrorActionPreference is standaard ingesteld op **doorgaan**, wil zeggen dat de taak wordt uitgevoerd op een fout.</span><span class="sxs-lookup"><span data-stu-id="d4024-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="d4024-150">Als deze voorkeursvariabele is ingesteld op **stoppen**, en vervolgens de taak wordt onderbroken op een fout opgetreden.</span><span class="sxs-lookup"><span data-stu-id="d4024-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="d4024-151">Van toepassing op [grafisch en PowerShell Workflow-runbooks](automation-runbook-types.md) alleen.</span><span class="sxs-lookup"><span data-stu-id="d4024-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="d4024-152">Onderbreken</span><span class="sxs-lookup"><span data-stu-id="d4024-152">Suspending</span></span> |<span data-ttu-id="d4024-153">Het systeem probeert te onderbreken van de taak op verzoek van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="d4024-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="d4024-154">Het runbook moet het volgende controlepunt bereiken voordat deze kan worden onderbroken.</span><span class="sxs-lookup"><span data-stu-id="d4024-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="d4024-155">Als het laatste controlepunt al doorgegeven, is voordat deze kan worden onderbroken voltooid.</span><span class="sxs-lookup"><span data-stu-id="d4024-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="d4024-156">Van toepassing op [grafisch en PowerShell Workflow-runbooks](automation-runbook-types.md) alleen.</span><span class="sxs-lookup"><span data-stu-id="d4024-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="d4024-157">Status van de Azure-portal weergeven</span><span class="sxs-lookup"><span data-stu-id="d4024-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="d4024-158">U kunt een samengevatte status van alle runbooktaken weergeven of inzoomen op gegevens van een specifiek runbook-taak in de Azure portal of door integratie met uw werkruimte voor logboekanalyse van Microsoft Operations Management Suite (OMS) om door te sturen runbook de status en taak streams taak configureren.</span><span class="sxs-lookup"><span data-stu-id="d4024-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="d4024-159">Zie voor meer informatie over de integratie met OMS Log Analytics [doorsturen taakstatus en taak stromen van Automation voor logboekanalyse (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="d4024-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="d4024-160">Automation-runbooktaken samenvatting</span><span class="sxs-lookup"><span data-stu-id="d4024-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="d4024-161">Aan de rechterkant van de geselecteerde Automation-account, ziet u een overzicht van alle runbooktaken voor een geselecteerde Automation-account onder **taak statistieken** tegel.</span><span class="sxs-lookup"><span data-stu-id="d4024-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="d4024-162">![Statistieken voor taak tegel](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="d4024-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="d4024-163">Deze tegel wordt weergegeven voor een aantal en de grafische weergave van de taakstatus voor alle taken die worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d4024-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="d4024-164">Op de tegel te klikken geeft de **taken** blade die een overzicht van alle taken die worden uitgevoerd, met de status, taakuitvoering en begin en einde tijden bevat.</span><span class="sxs-lookup"><span data-stu-id="d4024-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="d4024-165">![Blade Automation-account-uptaken](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="d4024-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="d4024-166">U kunt de lijst met taken filteren door te selecteren **Filter de taken** en filter op een specifiek runbook, taakstatus, of in de vervolgkeuzelijst, het bereik van de datum/tijd om te zoeken in.</span><span class="sxs-lookup"><span data-stu-id="d4024-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="d4024-167">![Status van de taak filteren](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="d4024-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="d4024-168">U kunt ook overzichtsgegevens voor een specifiek runbook taak weergeven door te selecteren dat runbook uit de **Runbooks** blade in uw Automation-account en selecteer vervolgens de **taken** tegel.</span><span class="sxs-lookup"><span data-stu-id="d4024-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="d4024-169">Dit geeft de **taken** blade en daar kunt u klikken op de record van de taak om de details en de uitvoer weer te geven.</span><span class="sxs-lookup"><span data-stu-id="d4024-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="d4024-170">![Blade Automation-account-uptaken](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="d4024-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="d4024-171">Taakoverzicht</span><span class="sxs-lookup"><span data-stu-id="d4024-171">Job Summary</span></span>
<span data-ttu-id="d4024-172">U kunt een lijst van alle taken die zijn gemaakt voor een bepaald runbook en de meest recente status weergeven.</span><span class="sxs-lookup"><span data-stu-id="d4024-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="d4024-173">U kunt deze lijst op de taakstatus en het datumbereik voor de laatste wijziging aan het project op te filteren.</span><span class="sxs-lookup"><span data-stu-id="d4024-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="d4024-174">Als u wilt weergeven in de gedetailleerde informatie en uitvoer, klik op de naam van een taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="d4024-175">De gedetailleerde weergave van de taak bevat de waarden voor de runbookparameters die zijn opgegeven voor die taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="d4024-176">U kunt de volgende stappen gebruiken om de taken voor een runbook weer te geven.</span><span class="sxs-lookup"><span data-stu-id="d4024-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="d4024-177">Selecteer in de Azure-portal **Automation** en selecteer vervolgens de naam van een Automation-account.</span><span class="sxs-lookup"><span data-stu-id="d4024-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="d4024-178">Selecteer in de hub **Runbooks** en klik vervolgens op de **Runbooks** blade een runbook in de lijst selecteren.</span><span class="sxs-lookup"><span data-stu-id="d4024-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="d4024-179">Op de blade voor het geselecteerde runbook, klikt u op de **taken** tegel.</span><span class="sxs-lookup"><span data-stu-id="d4024-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="d4024-180">Klik op een van de taken in de lijst en op de blade runbook taak details kunt u de details en de uitvoer weergeven.</span><span class="sxs-lookup"><span data-stu-id="d4024-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="d4024-181">Taakstatus ophalen met Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="d4024-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="d4024-182">U kunt de [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) voor het ophalen van de taken gemaakt voor een runbook en de details van een bepaalde taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="d4024-183">Als u een runbook met Windows PowerShell Start [Start AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), en vervolgens wordt de resulterende taak geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="d4024-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="d4024-184">Gebruik [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)uitvoer naar een taak ophalen-uitvoer.</span><span class="sxs-lookup"><span data-stu-id="d4024-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="d4024-185">De volgende voorbeeldopdrachten de laatste taak voor een voorbeeldrunbook opgehaald en sorden de status, de waarden voor de runbookparameters en de uitvoer van de taak.</span><span class="sxs-lookup"><span data-stu-id="d4024-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="d4024-186">Evenredige verdeling</span><span class="sxs-lookup"><span data-stu-id="d4024-186">Fair share</span></span>
<span data-ttu-id="d4024-187">Om de resources kan delen met alle runbooks in de cloud, wordt Azure Automation tijdelijk elke taak geladen nadat deze actief is geweest gedurende drie uur.</span><span class="sxs-lookup"><span data-stu-id="d4024-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="d4024-188">Tijdens deze periode kunnen taken voor [op basis van PowerShell-runbooks](automation-runbook-types.md#powershell-runbooks) worden gestopt en wordt niet opnieuw worden gestart.</span><span class="sxs-lookup"><span data-stu-id="d4024-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="d4024-189">De taak status ziet **gestopt**.</span><span class="sxs-lookup"><span data-stu-id="d4024-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="d4024-190">Dit type runbook wordt altijd opnieuw opgestart vanaf het begin omdat controlepunten wordt niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="d4024-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="d4024-191">[PowerShell-werkstroom runbooks](automation-runbook-types.md#powershell-workflow-runbooks) wordt hervat vanaf de laatste [controlepunt](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="d4024-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="d4024-192">Na het uitvoeren van drie uur zal de runbooktaak worden onderbroken door de service en de status ervan toont **uitgevoerd, wachten op resources**.</span><span class="sxs-lookup"><span data-stu-id="d4024-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="d4024-193">Zodra een sandbox beschikbaar, het runbook wordt automatisch opnieuw gestart door de Automation-service en wordt hervat vanaf het laatste controlepunt.</span><span class="sxs-lookup"><span data-stu-id="d4024-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="d4024-194">Dit is normaal gedrag van de PowerShell-werkstroom voor onderbreken/opnieuw te starten.</span><span class="sxs-lookup"><span data-stu-id="d4024-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="d4024-195">Als het runbook opnieuw groter is dan drie uur van de runtime, het proces wordt herhaald, worden drie pogingen gedaan.</span><span class="sxs-lookup"><span data-stu-id="d4024-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="d4024-196">Na het derde opnieuw opstarten, als het runbook nog niet voltooid in drie uur en vervolgens de runbooktaak is mislukt en de status van de taak aangeeft **mislukt, wacht resources**.</span><span class="sxs-lookup"><span data-stu-id="d4024-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="d4024-197">In dit geval ontvangt u de volgende uitzondering aan de fout.</span><span class="sxs-lookup"><span data-stu-id="d4024-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="d4024-198">*De taak kan niet worden voortgezet omdat deze is herhaaldelijk onbeschikbaar gemaakt vanaf het controlepunt dezelfde. Zorg ervoor dat uw Runbook heeft geen langdurige bewerkingen zonder dat de status.*</span><span class="sxs-lookup"><span data-stu-id="d4024-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="d4024-199">Dit is de service van runbooks voor onbepaalde tijd worden uitgevoerd zonder te voltooien, beveiligen, omdat ze niet de volgende controlepunt te maken kunnen zonder het ontladen opnieuw.</span><span class="sxs-lookup"><span data-stu-id="d4024-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="d4024-200">Als het runbook geen controlepunten heeft of de taak niet het eerste controlepunt heeft bereikt voordat het wordt ongedaan gemaakt, klikt u vervolgens opnieuw wordt gestart vanaf het begin.</span><span class="sxs-lookup"><span data-stu-id="d4024-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="d4024-201">Wanneer u een runbook maakt, moet u ervoor zorgen dat de tijd voor het uitvoeren van alle activiteiten tussen de twee controlepunten niet meer dan drie uur.</span><span class="sxs-lookup"><span data-stu-id="d4024-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="d4024-202">Mogelijk moet u controlepunten toevoegen aan uw runbook om ervoor te zorgen dat deze niet deze drie uur limiet is bereikt of lange onderverdelen bewerkingen uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d4024-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="d4024-203">Uw runbook kan bijvoorbeeld een opnieuw indexeren uitvoeren op een grote SQL-database.</span><span class="sxs-lookup"><span data-stu-id="d4024-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="d4024-204">Als deze één bewerking niet voltooid binnen de limiet van evenredige verdeling, worden de taak de verwijderd en opnieuw worden opgestart vanaf het begin.</span><span class="sxs-lookup"><span data-stu-id="d4024-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="d4024-205">In dit geval moet u de bewerking opnieuw indexeren in meerdere stappen, zoals het indexeren van één tabel tegelijk onderverdelen en vervolgens een controlepunt invoegen na elke bewerking, zodat de taak na de laatste bewerking hervatten kan te voltooien.</span><span class="sxs-lookup"><span data-stu-id="d4024-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d4024-206">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="d4024-206">Next steps</span></span>
* <span data-ttu-id="d4024-207">Zie voor meer informatie over de verschillende methoden die kunnen worden gebruikt voor het starten van een runbook in Azure Automation, [een runbook starten in Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="d4024-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

