---
title: aaaError verwerken in Azure Automation grafische runbooks | Microsoft Docs
description: Dit artikel wordt beschreven hoe tooimplement-fout tijdens het verwerken van logica in Azure Automation grafische runbooks.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="39f82-103">Foutafhandeling in grafische Azure Automation-runbooks</span><span class="sxs-lookup"><span data-stu-id="39f82-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="39f82-104">Een sleutel runbook ontwerp principal tooconsider met het identificeren van verschillende problemen waarmee een runbook kunt krijgen.</span><span class="sxs-lookup"><span data-stu-id="39f82-104">A key runbook design principal tooconsider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="39f82-105">Deze problemen kunnen geslaagde pogingen, verwachte foutstatussen en onverwachte foutvoorwaarden zijn.</span><span class="sxs-lookup"><span data-stu-id="39f82-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="39f82-106">Runbooks moeten foutafhandeling bevatten.</span><span class="sxs-lookup"><span data-stu-id="39f82-106">Runbooks should include error handling.</span></span> <span data-ttu-id="39f82-107">toovalidate Hallo uitvoer van een activiteit of een fout opgetreden bij de grafische runbooks verwerken, kan u de activiteit van een Windows PowerShell gebruiken, voorwaardelijke logica definiëren op Hallo uitvoer koppeling van de activiteit Hallo of toepassen van een andere methode.</span><span class="sxs-lookup"><span data-stu-id="39f82-107">toovalidate hello output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on hello output link of hello activity, or apply another method.</span></span>          

<span data-ttu-id="39f82-108">Als er een fout niet wordt beëindigd, die wordt uitgevoerd met een runbook-activiteit, wordt elke activiteit die volgt vaak verwerkt ongeacht het Hallo-fout.</span><span class="sxs-lookup"><span data-stu-id="39f82-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of hello error.</span></span> <span data-ttu-id="39f82-109">Hallo-fout is waarschijnlijk toogenerate een uitzondering, maar de volgende activiteit Hallo heeft nog steeds toorun.</span><span class="sxs-lookup"><span data-stu-id="39f82-109">hello error is likely toogenerate an exception, but hello next activity is still allowed toorun.</span></span> <span data-ttu-id="39f82-110">Dit is Hallo manier dat PowerShell ontworpen toohandle fouten is.</span><span class="sxs-lookup"><span data-stu-id="39f82-110">This is hello way that PowerShell is designed toohandle errors.</span></span>    

<span data-ttu-id="39f82-111">Hallo typen PowerShell fouten die zich tijdens de uitvoering voordoen kunnen wordt beëindigd of niet wordt beëindigd.</span><span class="sxs-lookup"><span data-stu-id="39f82-111">hello types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="39f82-112">Hallo verschillen tussen wordt beëindigd en niet wordt beëindigd fouten zijn als volgt:</span><span class="sxs-lookup"><span data-stu-id="39f82-112">hello differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="39f82-113">**Fout beëindigd**: een ernstige fout tijdens het uitvoeren van die volledig Hallo opdracht (of het uitvoeren van script) stopt.</span><span class="sxs-lookup"><span data-stu-id="39f82-113">**Terminating error**: A serious error during execution that halts hello command (or script execution) completely.</span></span> <span data-ttu-id="39f82-114">Voorbeelden zijn onder andere niet-bestaande cmdlets, syntaxisfouten waardoor een cmdlet niet kan worden uitgevoerd of andere fatale fouten.</span><span class="sxs-lookup"><span data-stu-id="39f82-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="39f82-115">**Fout niet beëindigd**: een niet-ernstige fout waarmee uitvoering toocontinue ondanks Hallo-fout.</span><span class="sxs-lookup"><span data-stu-id="39f82-115">**Non-terminating error**: A non-serious error that allows execution toocontinue despite hello failure.</span></span> <span data-ttu-id="39f82-116">Voorbeelden zijn onder andere operationele fouten, zoals niet-gevonden bestanden en machtigingsproblemen.</span><span class="sxs-lookup"><span data-stu-id="39f82-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="39f82-117">Azure Automation-grafische runbooks zijn verbeterd met Hallo mogelijkheid tooinclude foutafhandeling.</span><span class="sxs-lookup"><span data-stu-id="39f82-117">Azure Automation graphical runbooks have been improved with hello capability tooinclude error handling.</span></span> <span data-ttu-id="39f82-118">U kunt nu van uitzonderingen niet-afsluitfouten maken en foutkoppelingen tussen activiteiten maken.</span><span class="sxs-lookup"><span data-stu-id="39f82-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="39f82-119">Dit proces kan de runbookauteur van een toocatch fouten en gerealiseerde of onverwachte voorwaarden beheren.</span><span class="sxs-lookup"><span data-stu-id="39f82-119">This process allows a runbook author toocatch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-toouse-error-handling"></a><span data-ttu-id="39f82-120">Wanneer de foutafhandeling toouse</span><span class="sxs-lookup"><span data-stu-id="39f82-120">When toouse error handling</span></span>

<span data-ttu-id="39f82-121">Wanneer er een kritieke fout of uitzondering genereert activiteit, is het belangrijk tooprevent Hallo volgende activiteit in uw runbook verwerking en toohandle Hallo-fout op de juiste wijze.</span><span class="sxs-lookup"><span data-stu-id="39f82-121">Whenever there is a critical activity that throws an error or exception, it's important tooprevent hello next activity in your runbook from processing and toohandle hello error appropriately.</span></span> <span data-ttu-id="39f82-122">Dit is met name cruciaal wanneer uw runbooks ondersteuning bieden voor een bedrijfsproces of servicebewerking.</span><span class="sxs-lookup"><span data-stu-id="39f82-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="39f82-123">Voor elke activiteit die een fout kunt produceren, toevoegen Hallo runbookauteur de koppeling van een fout die andere activiteiten wijst tooany.</span><span class="sxs-lookup"><span data-stu-id="39f82-123">For each activity that can produce an error, hello runbook author can add an error link pointing tooany other activity.</span></span>  <span data-ttu-id="39f82-124">Hallo doelactiviteit kunt van elk type, met inbegrip van code activiteiten, aanroepen van een cmdlet aanroepen van een ander runbook zijn enzovoort.</span><span class="sxs-lookup"><span data-stu-id="39f82-124">hello destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="39f82-125">Bovendien kan doelactiviteit Hallo ook uitgaande koppelingen hebben.</span><span class="sxs-lookup"><span data-stu-id="39f82-125">In addition, hello destination activity can also have outgoing links.</span></span> <span data-ttu-id="39f82-126">Dit kunnen gewone koppelingen zijn of foutkoppelingen.</span><span class="sxs-lookup"><span data-stu-id="39f82-126">These links can be regular links or error links.</span></span> <span data-ttu-id="39f82-127">Dit betekent dat Hallo runbookauteur complexe logica voor foutafhandeling zonder tooa sorteren kunt implementeren code van de activiteit.</span><span class="sxs-lookup"><span data-stu-id="39f82-127">This means hello runbook author can implement complex error-handling logic without resorting tooa code activity.</span></span> <span data-ttu-id="39f82-128">Hallo aanbevolen procedure is een speciale foutafhandeling runbook met algemene functionaliteit toocreate, maar dit is niet verplicht.</span><span class="sxs-lookup"><span data-stu-id="39f82-128">hello recommended practice is toocreate a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="39f82-129">Foutafhandeling logica in een PowerShell-code-activiteit is het niet alleen optie Hallo.</span><span class="sxs-lookup"><span data-stu-id="39f82-129">Error-handling logic in a PowerShell code activity it isn't hello only option.</span></span>  

<span data-ttu-id="39f82-130">Bijvoorbeeld: overweeg een runbook dat toostart probeert een virtuele machine en een toepassing installeert op deze.</span><span class="sxs-lookup"><span data-stu-id="39f82-130">For example, consider a runbook that tries toostart a VM and install an application on it.</span></span> <span data-ttu-id="39f82-131">Als hello virtuele machine niet correct wordt gestart, worden twee acties uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="39f82-131">If hello VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="39f82-132">Er wordt een melding over dit probleem verzonden.</span><span class="sxs-lookup"><span data-stu-id="39f82-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="39f82-133">Er wordt een ander runbook gestart dat in plaats hiervan automatisch een nieuwe VM inricht.</span><span class="sxs-lookup"><span data-stu-id="39f82-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="39f82-134">Een oplossing toohave is een fout-koppeling die verwijst tooan activiteit ingangen stap 1.</span><span class="sxs-lookup"><span data-stu-id="39f82-134">One solution is toohave an error link pointing tooan activity that handles step one.</span></span> <span data-ttu-id="39f82-135">Bijvoorbeeld, u verbinding kan maken van Hallo **Write-Warning** cmdlet tooan activiteit voor stap 2, zoals Hallo **Start AzureRmAutomationRunbook** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="39f82-135">For example, you could connect hello **Write-Warning** cmdlet tooan activity for step two, such as hello **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="39f82-136">U kan ook dit gedrag voor gebruik in runbooks met veel generalize door de gegevens van deze twee activiteiten in een afzonderlijk foutbericht verwerking runbook en de volgende Hallo richtlijnen eerder voorgesteld.</span><span class="sxs-lookup"><span data-stu-id="39f82-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following hello guidance suggested earlier.</span></span> <span data-ttu-id="39f82-137">Voordat u dit runbook foutafhandeling, kan u een aangepast bericht van Hallo-gegevens in de oorspronkelijke runbook Hallo maken en vervolgens doorgeven als een parameter toohello foutafhandeling runbook.</span><span class="sxs-lookup"><span data-stu-id="39f82-137">Before calling this error-handling runbook, you could construct a custom message from hello data in hello original runbook, and then pass it as a parameter toohello error-handling runbook.</span></span>

## <a name="how-toouse-error-handling"></a><span data-ttu-id="39f82-138">Hoe toouse foutafhandeling</span><span class="sxs-lookup"><span data-stu-id="39f82-138">How toouse error handling</span></span>

<span data-ttu-id="39f82-139">Elke activiteit heeft een configuratie-instellingen waarmee van uitzonderingen niet-afsluitfouten worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="39f82-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="39f82-140">Deze instelling is standaard uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="39f82-140">By default, this setting is disabled.</span></span> <span data-ttu-id="39f82-141">Het is raadzaam dat u deze instelling inschakelt op een activiteit waarvoor toohandle fouten.</span><span class="sxs-lookup"><span data-stu-id="39f82-141">We recommend that you enable this setting on any activity where you want toohandle errors.</span></span>  

<span data-ttu-id="39f82-142">Als u deze configuratie inschakelt, worden u zodat zeker zowel wordt beëindigd als niet wordt beëindigd fouten in de Hallo activiteit worden behandeld als fouten niet wordt beëindigd en kunnen worden verwerkt met de koppeling van een fout.</span><span class="sxs-lookup"><span data-stu-id="39f82-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in hello activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="39f82-143">Nadat u deze instelling configureert, moet u een activiteit die verantwoordelijk is voor Hallo fout maken.</span><span class="sxs-lookup"><span data-stu-id="39f82-143">After configuring this setting, you create an activity that handles hello error.</span></span> <span data-ttu-id="39f82-144">Als een activiteit een fout produceert, vervolgens Hallo uitgaande fout koppelingen worden gevolgd en Hallo reguliere koppelingen zijn niet, zelfs als Hallo activiteit ook reguliere uitvoer produceert.</span><span class="sxs-lookup"><span data-stu-id="39f82-144">If an activity produces any error, then hello outgoing error links are followed, and hello regular links are not, even if hello activity produces regular output as well.</span></span><br><br> ![Voorbeeld van foutkoppeling voor Automation-runbook](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="39f82-146">Een runbook haalt in Hallo voorbeeld te volgen, een variabele die Hallo computernaam van een virtuele machine bevat.</span><span class="sxs-lookup"><span data-stu-id="39f82-146">In hello following example, a runbook retrieves a variable that contains hello computer name of a virtual machine.</span></span> <span data-ttu-id="39f82-147">Wordt geprobeerd toostart Hallo virtuele machine met de volgende activiteit Hallo.</span><span class="sxs-lookup"><span data-stu-id="39f82-147">It then attempts toostart hello virtual machine with hello next activity.</span></span><br><br> ![Voorbeeld van foutafhandeling in Automation-runbook](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="39f82-149">Hallo **Get-AutomationVariable** activiteit en **Start-AzureRmVm** geconfigureerde tooconvert uitzonderingen tooerrors zijn.</span><span class="sxs-lookup"><span data-stu-id="39f82-149">hello **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured tooconvert exceptions tooerrors.</span></span>  <span data-ttu-id="39f82-150">Als er zijn problemen bij het gebruik van Hallo variabele of begin Hallo VM en fouten gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="39f82-150">If there are problems getting hello variable or starting hello VM, then errors are generated.</span></span><br><br> <span data-ttu-id="39f82-151">![Activiteitsinstellingen voor foutafhandeling in Automation-runbook](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="39f82-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="39f82-152">Fout koppelingen stromen van deze activiteiten van één tooa **fout management** activiteit (een code-activiteit).</span><span class="sxs-lookup"><span data-stu-id="39f82-152">Error links flow from these activities tooa single **error management** activity (a code activity).</span></span> <span data-ttu-id="39f82-153">Deze activiteit is geconfigureerd met een eenvoudige PowerShell-expressie die gebruikmaakt van Hallo *Throw* sleutelwoord toostop verwerking, samen met *$Error.Exception.Message* tooget Hallo-bericht met een beschrijving van Hallo huidige uitzondering.</span><span class="sxs-lookup"><span data-stu-id="39f82-153">This activity is configured with a simple PowerShell expression that uses hello *Throw* keyword toostop processing, along with *$Error.Exception.Message* tooget hello message that describes hello current exception.</span></span><br><br> <span data-ttu-id="39f82-154">![Codevoorbeeld voor foutafhandeling in Automation-runbook](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="39f82-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="39f82-155">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="39f82-155">Next steps</span></span>

* <span data-ttu-id="39f82-156">Zie toolearn meer informatie over koppelingen en koppelingstypen in de grafische runbooks [grafisch ontwerpen in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="39f82-156">toolearn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="39f82-157">meer over de uitvoering van runbook, hoe toomonitor runbooktaken en andere technische details, Zie toolearn [bijhouden van een runbooktaak](automation-runbook-execution.md).</span><span class="sxs-lookup"><span data-stu-id="39f82-157">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>
