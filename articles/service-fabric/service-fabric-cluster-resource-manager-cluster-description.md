---
title: aaaCluster beschrijving van de Cluster Resource Manager | Microsoft Docs
description: Met een beschrijving van een Service Fabric-cluster door te geven voor domeinen met fouten, domeinen upgraden, eigenschappen van het knooppunt en knooppunt capaciteitswaarden voor Hallo Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 55f8ab37-9399-4c9a-9e6c-d2d859de6766
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f2822075976bd54402af5ad56991b5b360dfb1d8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="describing-a-service-fabric-cluster"></a><span data-ttu-id="a31a9-103">Met een beschrijving van een service fabric-cluster</span><span class="sxs-lookup"><span data-stu-id="a31a9-103">Describing a service fabric cluster</span></span>
<span data-ttu-id="a31a9-104">Hallo Service Fabric-Cluster Resource Manager biedt verschillende mechanismen voor het beschrijven van een cluster.</span><span class="sxs-lookup"><span data-stu-id="a31a9-104">hello Service Fabric Cluster Resource Manager provides several mechanisms for describing a cluster.</span></span> <span data-ttu-id="a31a9-105">Tijdens runtime, wordt Hallo Cluster Resource Manager gebruikt deze informatie tooensure hoge beschikbaarheid van Hallo-services in Hallo cluster wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-105">During runtime, hello Cluster Resource Manager uses this information tooensure high availability of hello services running in hello cluster.</span></span> <span data-ttu-id="a31a9-106">Bij het afdwingen van deze belangrijke regels, ook wordt geprobeerd toooptimize Hallo brongebruik binnen Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="a31a9-106">While enforcing these important rules, it also attempts toooptimize hello resource consumption within hello cluster.</span></span>

## <a name="key-concepts"></a><span data-ttu-id="a31a9-107">Belangrijkste concepten</span><span class="sxs-lookup"><span data-stu-id="a31a9-107">Key concepts</span></span>
<span data-ttu-id="a31a9-108">Hallo Cluster Resource Manager biedt ondersteuning voor verschillende functies die worden beschreven van een cluster:</span><span class="sxs-lookup"><span data-stu-id="a31a9-108">hello Cluster Resource Manager supports several features that describe a cluster:</span></span>

* <span data-ttu-id="a31a9-109">Domeinen met fouten</span><span class="sxs-lookup"><span data-stu-id="a31a9-109">Fault Domains</span></span>
* <span data-ttu-id="a31a9-110">Upgradedomeinen</span><span class="sxs-lookup"><span data-stu-id="a31a9-110">Upgrade Domains</span></span>
* <span data-ttu-id="a31a9-111">Knooppunteigenschappen</span><span class="sxs-lookup"><span data-stu-id="a31a9-111">Node Properties</span></span>
* <span data-ttu-id="a31a9-112">Capaciteit van knooppunt</span><span class="sxs-lookup"><span data-stu-id="a31a9-112">Node Capacities</span></span>

## <a name="fault-domains"></a><span data-ttu-id="a31a9-113">Foutdomeinen</span><span class="sxs-lookup"><span data-stu-id="a31a9-113">Fault domains</span></span>
<span data-ttu-id="a31a9-114">Een domein met fouten is een gebied van gecoördineerde is mislukt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-114">A Fault Domain is any area of coordinated failure.</span></span> <span data-ttu-id="a31a9-115">Een enkele computer is een Foutdomein (omdat deze niet kan op een eigen voor verschillende oorzaken hebben, vanuit power supply fouten toodrive fouten toobad NIC firmware).</span><span class="sxs-lookup"><span data-stu-id="a31a9-115">A single machine is a Fault Domain (since it can fail on its own for various reasons, from power supply failures toodrive failures toobad NIC firmware).</span></span> <span data-ttu-id="a31a9-116">Machines verbonden toohello dezelfde Ethernet-switch bevinden zich in hetzelfde Foutdomein als Hallo zijn machines delen één bron stroomstoring of op één locatie.</span><span class="sxs-lookup"><span data-stu-id="a31a9-116">Machines connected toohello same Ethernet switch are in hello same Fault Domain, as are machines sharing a single source of power or in a single location.</span></span> <span data-ttu-id="a31a9-117">Aangezien het natuurlijke voor de hardware fouten toooverlap, worden de domeinen met fouten zijn inherent hiërarchische en worden weergegeven als URI's in Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a31a9-117">Since it's natural for hardware faults toooverlap, Fault Domains are inherently hierarchal and are represented as URIs in Service Fabric.</span></span>

<span data-ttu-id="a31a9-118">Het is belangrijk dat Foutdomeinen correct zijn ingesteld sinds de Service Fabric gebruikt deze informatie toosafely plaats services.</span><span class="sxs-lookup"><span data-stu-id="a31a9-118">It is important that Fault Domains are set up correctly since Service Fabric uses this information toosafely place services.</span></span> <span data-ttu-id="a31a9-119">Service Fabric wil niet tooplace services zodanig dat Hallo verlies van een domein met fouten (dit wordt veroorzaakt door Hallo storing van een onderdeel) een toogo service niet actief veroorzaakt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-119">Service Fabric doesn't want tooplace services such that hello loss of a Fault Domain (caused by hello failure of some component) causes a service toogo down.</span></span> <span data-ttu-id="a31a9-120">In hello Azure Service Fabric Hallo Foutdomein informatie verstrekt door Hallo omgeving toocorrectly gebruikt-omgeving configureert u Hallo knooppunten in cluster Hallo namens jou.</span><span class="sxs-lookup"><span data-stu-id="a31a9-120">In hello Azure environment Service Fabric uses hello Fault Domain information provided by hello environment toocorrectly configure hello nodes in hello cluster on your behalf.</span></span> <span data-ttu-id="a31a9-121">Voor Service Fabric zelfstandige, domeinen met fouten worden gedefinieerd op moment Hallo is dat Hallo-cluster ingesteld</span><span class="sxs-lookup"><span data-stu-id="a31a9-121">For Service Fabric Standalone, Fault Domains are defined at hello time that hello cluster is set up</span></span> 

> [!WARNING]
> <span data-ttu-id="a31a9-122">Het is belangrijk dat Hallo Foutdomein informatie opgegeven tooService Fabric nauwkeurig is.</span><span class="sxs-lookup"><span data-stu-id="a31a9-122">It is important that hello Fault Domain information provided tooService Fabric is accurate.</span></span> <span data-ttu-id="a31a9-123">Stel dat dat uw Service Fabric-cluster knooppunten binnen 10 virtuele machines, op vijf fysieke hosts worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-123">For example, let's say that your Service Fabric cluster's nodes are running inside 10 virtual machines, running on five physical hosts.</span></span> <span data-ttu-id="a31a9-124">In dit geval wordt er 10 virtuele machines, maar er is slechts 5 verschillende (hoogste niveau) fault-domeinen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-124">In this case, even though there are 10 virtual machines, there's only 5 different (top level) fault domains.</span></span> <span data-ttu-id="a31a9-125">Delen dezelfde fysieke host zorgt ervoor dat Hallo VMs tooshare Hallo foutdomein dezelfde hoofdmap, aangezien Hallo VMs ervaring fout gecoördineerd als hun fysieke host is mislukt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-125">Sharing hello same physical host causes VMs tooshare hello same root fault domain, since hello VMs experience coordinated failure if their physical host fails.</span></span>  
>
> <span data-ttu-id="a31a9-126">Omdat Service Fabric Hallo Foutdomein van een knooppunt niet toochange verwacht.</span><span class="sxs-lookup"><span data-stu-id="a31a9-126">Since Service Fabric expects hello Fault Domain of a node not toochange.</span></span> <span data-ttu-id="a31a9-127">Andere mechanismen zoals hoge beschikbaarheid van virtuele machines, Hallo gezorgd [HA virtuele machines](https://technet.microsoft.com/en-us/library/cc967323.aspx), transparante migratie van virtuele machines van één host tooanother gebruiken.</span><span class="sxs-lookup"><span data-stu-id="a31a9-127">Other mechanisms of ensuring high availability of hello VMs, such as [HA-VMs](https://technet.microsoft.com/en-us/library/cc967323.aspx), use transparent migration of VMs from one host tooanother.</span></span> <span data-ttu-id="a31a9-128">Deze mechanismen geen opnieuw configureren of melding Hallo code binnen Hallo VM wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-128">These mechanisms do not reconfigure or notify hello running code inside hello VM.</span></span> <span data-ttu-id="a31a9-129">Als zodanig zijn **niet ondersteund** als omgevingen voor het uitvoeren van Service Fabric-clusters.</span><span class="sxs-lookup"><span data-stu-id="a31a9-129">As such, they are **not supported** as environments for running Service Fabric clusters.</span></span> <span data-ttu-id="a31a9-130">Service Fabric moet de gebruikte beveiligingstechnologieën Hallo alleen hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="a31a9-130">Service Fabric should be hello only high-availability technology employed.</span></span> <span data-ttu-id="a31a9-131">Mechanismen zoals VM livemigratie, SAN's, of andere gebruikers zijn niet nodig.</span><span class="sxs-lookup"><span data-stu-id="a31a9-131">Mechanisms like live VM migration, SANs, or others are not necessary.</span></span> <span data-ttu-id="a31a9-132">Als u gebruikt in combinatie met Service Fabric, deze mechanismen _verminderen_ toepassing beschikbaarheid en betrouwbaarheid omdat ze extra complexiteit veroorzaken gecentraliseerde bronnen van de fout toevoegen en gebruiken van betrouwbaarheid en beschikbaarheidsstrategieën die met die in Service Fabric conflicteren.</span><span class="sxs-lookup"><span data-stu-id="a31a9-132">If used in conjunction with Service Fabric, these mechanisms _reduce_ application availability and reliability because they introduce additional complexity, add centralized sources of failure, and utilize reliability and availability strategies that conflict with those in Service Fabric.</span></span> 
>
>

<span data-ttu-id="a31a9-133">In onderstaande afbeelding voor Hallo kleur we alle Hallo entiteiten tooFault domeinen en lijst met die alle verschillende domeinen met fouten die het resultaat Hallo bijdragen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-133">In hello graphic below we color all hello entities that contribute tooFault Domains and list all hello different Fault Domains that result.</span></span> <span data-ttu-id="a31a9-134">In dit voorbeeld hebben we datacenters ('DC'), rekken ('R') en blades ("B").</span><span class="sxs-lookup"><span data-stu-id="a31a9-134">In this example, we have datacenters ("DC"), racks ("R"), and blades ("B").</span></span> <span data-ttu-id="a31a9-135">Stelen, als elke blade meer dan één virtuele machine bevat, kan er een andere laag in Hallo Foutdomein hiërarchie.</span><span class="sxs-lookup"><span data-stu-id="a31a9-135">Conceivably, if each blade holds more than one virtual machine, there could be another layer in hello Fault Domain hierarchy.</span></span>

<span data-ttu-id="a31a9-136"><center>
![Knooppunten ingedeeld via domeinen met fouten][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-136"><center>
![Nodes organized via Fault Domains][Image1]
</center></span></span>

<span data-ttu-id="a31a9-137">Tijdens runtime, hello Service Fabric-Cluster Resource Manager-domeinen met fouten in de cluster Hallo Hallo beschouwt en indelingen plannen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-137">During runtime, hello Service Fabric Cluster Resource Manager considers hello Fault Domains in hello cluster and plans layouts.</span></span> <span data-ttu-id="a31a9-138">Hallo stateful replica's of stateless exemplaren voor een bepaalde service worden gedistribueerd, zodat ze in afzonderlijke domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-138">hello stateful replicas or stateless instances for a given service are distributed so they are in separate Fault Domains.</span></span> <span data-ttu-id="a31a9-139">Hallo service over domeinen met fouten worden verdeeld, zorgt u ervoor Hallo beschikbaarheid van Hallo-service niet is geknoeid als een Foutdomein op elk niveau van Hallo hiërarchie is mislukt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-139">Distributing hello service across fault domains ensures hello availability of hello service is not compromised when a Fault Domain fails at any level of hello hierarchy.</span></span>

<span data-ttu-id="a31a9-140">Van service Fabric-Cluster Resource Manager niet van belang hoeveel lagen in Hallo Foutdomein hiërarchie.</span><span class="sxs-lookup"><span data-stu-id="a31a9-140">Service Fabric’s Cluster Resource Manager doesn’t care how many layers there are in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="a31a9-141">Echter, wordt geprobeerd tooensure die Hallo verlies van elk een deel van de hiërarchie Hallo heeft geen invloed op services die erin worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-141">However, it tries tooensure that hello loss of any one portion of hello hierarchy doesn’t impact services running in it.</span></span> 

<span data-ttu-id="a31a9-142">Het is raadzaam als er Hallo hetzelfde aantal knooppunten op elk niveau van diepte in Hallo Foutdomein hiërarchie.</span><span class="sxs-lookup"><span data-stu-id="a31a9-142">It is best if there are hello same number of nodes at each level of depth in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="a31a9-143">Als Hallo 'boomstructuur' van de domeinen met fouten in het cluster niet in balans is, maakt het moeilijker voor Hallo Cluster Resource Manager toofigure uit Hallo best toewijzing van services.</span><span class="sxs-lookup"><span data-stu-id="a31a9-143">If hello “tree” of Fault Domains is unbalanced in your cluster, it makes it harder for hello Cluster Resource Manager toofigure out hello best allocation of services.</span></span> <span data-ttu-id="a31a9-144">Imbalanced Foutdomeinen indelingen betekenen dat Hallo verlies van bepaalde domeinen impact Hallo beschikbaarheid van services die meer dan andere domeinen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-144">Imbalanced Fault Domains layouts mean that hello loss of some domains impact hello availability of services more than other domains.</span></span> <span data-ttu-id="a31a9-145">Als gevolg hiervan Hallo Cluster Resource Manager is verwijderd tussen twee doelen: deze toouse Hallo-machines in het domein 'dikke' wil dat door het plaatsen van services op deze, en deze services in andere domeinen tooplace wil zodat Hallo verlies van een domein geen problemen veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="a31a9-145">As a result, hello Cluster Resource Manager is torn between two goals: It wants toouse hello machines in that “heavy” domain by placing services on them, and it wants tooplace services in other domains so that hello loss of a domain doesn’t cause problems.</span></span> 

<span data-ttu-id="a31a9-146">Wat imbalanced domeinen eruit?</span><span class="sxs-lookup"><span data-stu-id="a31a9-146">What do imbalanced domains look like?</span></span> <span data-ttu-id="a31a9-147">In onderstaande Hallo diagram, laten we zien twee verschillende cluster indelingen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-147">In hello diagram below, we show two different cluster layouts.</span></span> <span data-ttu-id="a31a9-148">Hallo knooppunten zijn in de eerste voorbeeld Hallo gelijkmatig verdeeld over Hallo domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-148">In hello first example, hello nodes are distributed evenly across hello Fault Domains.</span></span> <span data-ttu-id="a31a9-149">In het tweede voorbeeld hello heeft een Foutdomein veel meer knooppunten dan Hallo andere domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-149">In hello second example, one Fault Domain has many more nodes than hello other Fault Domains.</span></span> 

<span data-ttu-id="a31a9-150"><center>
![Twee verschillende cluster indelingen][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-150"><center>
![Two different cluster layouts][Image2]
</center></span></span>

<span data-ttu-id="a31a9-151">Hallo keuze waarvan Foutdomein een knooppunt bevat wordt in Azure, voor u beheerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-151">In Azure, hello choice of which Fault Domain contains a node is managed for you.</span></span> <span data-ttu-id="a31a9-152">Echter, afhankelijk van het aantal knooppunten die u inricht Hallo kunt u nog steeds uiteindelijk domeinen met fouten met meer knooppunten bevat dan andere.</span><span class="sxs-lookup"><span data-stu-id="a31a9-152">However, depending on hello number of nodes that you provision you can still end up with Fault Domains with more nodes in them than others.</span></span> <span data-ttu-id="a31a9-153">Stel dat u hebt vijf domeinen met fouten in het Hallo-cluster, maar zeven knooppunten inrichten voor een gegeven NodeType.</span><span class="sxs-lookup"><span data-stu-id="a31a9-153">For example, say you have five Fault Domains in hello cluster but provision seven nodes for a given NodeType.</span></span> <span data-ttu-id="a31a9-154">In dit geval eindigen hello eerst twee domeinen met fouten met meer knooppunten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-154">In this case, hello first two Fault Domains end up with more nodes.</span></span> <span data-ttu-id="a31a9-155">Als u toodeploy meer NodeTypes met alleen een aantal exemplaren doorgaat, haalt Hallo probleem slechter.</span><span class="sxs-lookup"><span data-stu-id="a31a9-155">If you continue toodeploy more NodeTypes with only a couple instances, hello problem gets worse.</span></span> <span data-ttu-id="a31a9-156">Daarom die verdient het aanbeveling dat Hallo is het aantal knooppunten in elk knooppunttype een veelvoud van Hallo aantal Foutdomeinen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-156">For this reason it's recommended that hello number of nodes in each node type is a multiple of hello number of Fault Domains.</span></span>

## <a name="upgrade-domains"></a><span data-ttu-id="a31a9-157">Upgradedomeinen</span><span class="sxs-lookup"><span data-stu-id="a31a9-157">Upgrade domains</span></span>
<span data-ttu-id="a31a9-158">Upgradedomeinen zijn een andere functie waarmee een Service Fabric-Cluster Resource Manager Hallo Hallo lay-out van de cluster Hallo begrijpen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-158">Upgrade Domains are another feature that helps hello Service Fabric Cluster Resource Manager understand hello layout of hello cluster.</span></span> <span data-ttu-id="a31a9-159">Upgradedomeinen sets met knooppunten die zijn bijgewerkt op Hallo definiëren hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="a31a9-159">Upgrade Domains define sets of nodes that are upgraded at hello same time.</span></span> <span data-ttu-id="a31a9-160">Upgradedomeinen help Hallo Cluster Resource Manager begrijpen en te organiseren beheerbewerkingen zoals upgrades.</span><span class="sxs-lookup"><span data-stu-id="a31a9-160">Upgrade Domains help hello Cluster Resource Manager understand and orchestrate management operations like upgrades.</span></span>

<span data-ttu-id="a31a9-161">Upgradedomeinen zijn veel zoals domeinen met fouten, maar met enkele belangrijke verschillen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-161">Upgrade Domains are a lot like Fault Domains, but with a couple key differences.</span></span> <span data-ttu-id="a31a9-162">Eerst definiëren gebieden van gecoördineerde hardwarefouten domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-162">First, areas of coordinated hardware failures define Fault Domains.</span></span> <span data-ttu-id="a31a9-163">Upgrade uitvoeren van domeinen, op Hallo daarentegen, zijn gedefinieerd door het beleid.</span><span class="sxs-lookup"><span data-stu-id="a31a9-163">Upgrade Domains, on hello other hand, are defined by policy.</span></span> <span data-ttu-id="a31a9-164">U toodecide hoeveel u wilt dat, in plaats van dit wordt bepaald door het Hallo-omgeving.</span><span class="sxs-lookup"><span data-stu-id="a31a9-164">You get toodecide how many you want, rather than it being dictated by hello environment.</span></span> <span data-ttu-id="a31a9-165">U kunt zoveel Upgrade-domeinen als knooppunten hebben.</span><span class="sxs-lookup"><span data-stu-id="a31a9-165">You could have as many Upgrade Domains as you do nodes.</span></span> <span data-ttu-id="a31a9-166">Een ander verschil tussen domeinen met fouten en -domeinen upgraden is dat er geen Upgrade domeinen hiërarchische.</span><span class="sxs-lookup"><span data-stu-id="a31a9-166">Another difference between Fault Domains and Upgrade Domains is that Upgrade Domains are not hierarchical.</span></span> <span data-ttu-id="a31a9-167">In plaats daarvan lijken ze meer op een eenvoudige label.</span><span class="sxs-lookup"><span data-stu-id="a31a9-167">Instead, they are more like a simple tag.</span></span> 

<span data-ttu-id="a31a9-168">Hallo volgende diagram ziet u drie dat domeinen upgraden worden striped verdeeld over drie domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-168">hello following diagram shows three Upgrade Domains are striped across three Fault Domains.</span></span> <span data-ttu-id="a31a9-169">U ziet ook een mogelijke plaatsing voor drie verschillende replica's van een stateful service, waar elke in verschillende domeinen met fouten en domeinen upgraden eindigt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-169">It also shows one possible placement for three different replicas of a stateful service, where each ends up in different Fault and Upgrade Domains.</span></span> <span data-ttu-id="a31a9-170">Deze plaatsing kunt Hallo verlies van een domein met fouten in de Hallo midden van een service-upgrade en nog steeds een kopie van het Hallo-code en gegevens.</span><span class="sxs-lookup"><span data-stu-id="a31a9-170">This placement allows hello loss of a Fault Domain while in hello middle of a service upgrade and still have one copy of hello code and data.</span></span>  

<span data-ttu-id="a31a9-171"><center>
![Plaatsing met fouten en Upgradedomeinen][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-171"><center>
![Placement With Fault and Upgrade Domains][Image3]
</center></span></span>

<span data-ttu-id="a31a9-172">Er zijn voor- en nadelen toohaving grote aantallen domeinen upgraden.</span><span class="sxs-lookup"><span data-stu-id="a31a9-172">There are pros and cons toohaving large numbers of Upgrade Domains.</span></span> <span data-ttu-id="a31a9-173">Meer domeinen upgraden betekent elke stap van het Hallo-upgrade is een meer gedetailleerd en daarom is van invloed op een kleiner aantal knooppunten of services.</span><span class="sxs-lookup"><span data-stu-id="a31a9-173">More Upgrade Domains means each step of hello upgrade is more granular and therefore affects a smaller number of nodes or services.</span></span> <span data-ttu-id="a31a9-174">Als gevolg hiervan minder services hebben toomove tegelijk minder verloop Inleiding in Hallo-systeem.</span><span class="sxs-lookup"><span data-stu-id="a31a9-174">As a result, fewer services have toomove at a time, introducing less churn into hello system.</span></span> <span data-ttu-id="a31a9-175">Dit heeft vaak tooimprove betrouwbaarheid, omdat minder Hallo-service wordt beïnvloed door een probleem tijdens de upgrade Hallo geïntroduceerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-175">This tends tooimprove reliability, since less of hello service is impacted by any issue introduced during hello upgrade.</span></span> <span data-ttu-id="a31a9-176">Meer domeinen upgraden betekent ook dat u minder beschikbare buffer op andere knooppunten toohandle Hallo gevolgen Hallo upgrade nodig.</span><span class="sxs-lookup"><span data-stu-id="a31a9-176">More Upgrade Domains also means that you need less available buffer on other nodes toohandle hello impact of hello upgrade.</span></span> <span data-ttu-id="a31a9-177">Bijvoorbeeld, als u vijf upgraden domeinen hebt, afhandelt Hallo knooppunten in elk ongeveer 20% van uw verkeer.</span><span class="sxs-lookup"><span data-stu-id="a31a9-177">For example, if you have five Upgrade Domains, hello nodes in each are handling roughly 20% of your traffic.</span></span> <span data-ttu-id="a31a9-178">Als u tootake omlaag dat domein bijwerken voor een upgrade nodig, moet die load gewoonlijk toogo ergens.</span><span class="sxs-lookup"><span data-stu-id="a31a9-178">If you need tootake down that Upgrade Domain for an upgrade, that load usually needs toogo somewhere.</span></span> <span data-ttu-id="a31a9-179">Aangezien u vier resterende upgraden domeinen hebt, moet elk voldoende ruimte voor ongeveer 5% van totale Hallo-verkeer.</span><span class="sxs-lookup"><span data-stu-id="a31a9-179">Since you have four remaining Upgrade Domains, each must have room for about 5% of hello total traffic.</span></span> <span data-ttu-id="a31a9-180">Meer domeinen upgraden betekent dat u minder buffer op Hallo knooppunten in Hallo cluster nodig.</span><span class="sxs-lookup"><span data-stu-id="a31a9-180">More Upgrade Domains means you need less buffer on hello nodes in hello cluster.</span></span> <span data-ttu-id="a31a9-181">Denk bijvoorbeeld als er 10 domeinen upgraden in plaats daarvan.</span><span class="sxs-lookup"><span data-stu-id="a31a9-181">For example, consider if you had 10 Upgrade Domains instead.</span></span> <span data-ttu-id="a31a9-182">In dat geval zouden elke UD alleen worden verwerkt ongeveer 10% van totale Hallo-verkeer.</span><span class="sxs-lookup"><span data-stu-id="a31a9-182">In that case, each UD would only be handling about 10% of hello total traffic.</span></span> <span data-ttu-id="a31a9-183">Wanneer een Upgradestappen via Hallo-cluster, moet elk domein alleen toohave ruimte voor ongeveer 1.1% van de totale Hallo-verkeer.</span><span class="sxs-lookup"><span data-stu-id="a31a9-183">When an upgrade steps through hello cluster, each domain would only need toohave room for about 1.1% of hello total traffic.</span></span> <span data-ttu-id="a31a9-184">Meer domeinen upgraden kunt u in het algemeen toorun uw knooppunten op een hoger gebruik, omdat u minder gereserveerde capaciteit nodig.</span><span class="sxs-lookup"><span data-stu-id="a31a9-184">More Upgrade Domains generally allow you toorun your nodes at higher utilization, since you need less reserved capacity.</span></span> <span data-ttu-id="a31a9-185">Hallo geldt ook voor domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-185">hello same is true for Fault Domains.</span></span>  

<span data-ttu-id="a31a9-186">Hallo nadeel dat veel domeinen upgraden is dat upgrades tootake langer vaak.</span><span class="sxs-lookup"><span data-stu-id="a31a9-186">hello downside of having many Upgrade Domains is that upgrades tend tootake longer.</span></span> <span data-ttu-id="a31a9-187">Service Fabric wacht een korte periode na een Upgrade-domein is voltooid en controleert voordat u begint tooupgrade Hallo volgende.</span><span class="sxs-lookup"><span data-stu-id="a31a9-187">Service Fabric waits a short period of time after an Upgrade Domain is completed and performs checks before starting tooupgrade hello next one.</span></span> <span data-ttu-id="a31a9-188">Deze vertragingen inschakelen detecteren problemen die zijn geïntroduceerd door Hallo upgrade voordat Hallo upgrade wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-188">These delays enable detecting issues introduced by hello upgrade before hello upgrade proceeds.</span></span> <span data-ttu-id="a31a9-189">Hallo afweging is acceptabel omdat deze onjuiste wijzigingen voorkomt dat van invloed zijn op te veel van de service Hallo tegelijk.</span><span class="sxs-lookup"><span data-stu-id="a31a9-189">hello tradeoff is acceptable because it prevents bad changes from affecting too much of hello service at a time.</span></span>

<span data-ttu-id="a31a9-190">Te weinig upgraden domeinen heeft veel negatieve neveneffecten – terwijl elke afzonderlijke upgraden domein niet actief is en een groot deel van een upgrade wordt uitgevoerd de algehele capaciteit is niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="a31a9-190">Too few Upgrade Domains has many negative side effects – while each individual Upgrade Domain is down and being upgraded a large portion of your overall capacity is unavailable.</span></span> <span data-ttu-id="a31a9-191">Bijvoorbeeld, als u slechts drie domeinen upgraden hebt duurt u omlaag ongeveer 1/3 van uw algehele service of het cluster capaciteit tegelijk.</span><span class="sxs-lookup"><span data-stu-id="a31a9-191">For example, if you only have three Upgrade Domains you are taking down about 1/3 of your overall service or cluster capacity at a time.</span></span> <span data-ttu-id="a31a9-192">Met zoveel van uw service niet actief in één keer niet gewenst omdat u toohave voldoende capaciteit in de rest van de werkbelasting van uw cluster toohandle Hallo Hallo hebt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-192">Having so much of your service down at once isn’t desirable since you have toohave enough capacity in hello rest of your cluster toohandle hello workload.</span></span> <span data-ttu-id="a31a9-193">Onderhoud van deze buffer houdt in dat tijdens de normale werking die knooppunten kleiner dan ze anders zou zijn geladen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-193">Maintaining that buffer means that during normal operation those nodes are less loaded than they would be otherwise.</span></span> <span data-ttu-id="a31a9-194">Dit verhoogt de Hallo kosten van het uitvoeren van uw service.</span><span class="sxs-lookup"><span data-stu-id="a31a9-194">This increases hello cost of running your service.</span></span>

<span data-ttu-id="a31a9-195">Er is geen echte limiet toohello totale aantal fouten of domeinen upgraden in een omgeving, of de beperkingen van hoe ze elkaar overlappen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-195">There’s no real limit toohello total number of fault or Upgrade Domains in an environment, or constraints on how they overlap.</span></span> <span data-ttu-id="a31a9-196">Die gezegd, er zijn enkele algemene patronen zijn:</span><span class="sxs-lookup"><span data-stu-id="a31a9-196">That said, there are several common patterns:</span></span>

- <span data-ttu-id="a31a9-197">Domeinen met fouten en -domeinen upgraden toegewezen 1:1</span><span class="sxs-lookup"><span data-stu-id="a31a9-197">Fault Domains and Upgrade Domains mapped 1:1</span></span>
- <span data-ttu-id="a31a9-198">Een Upgrade Domain per knooppunt (fysieke of virtuele OS exemplaar)</span><span class="sxs-lookup"><span data-stu-id="a31a9-198">One Upgrade Domain per Node (physical or virtual OS instance)</span></span>
- <span data-ttu-id="a31a9-199">Een 'striped' of 'matrix' model waar Hallo domeinen met fouten en -domeinen upgraden vormen een matrix met computers waarop een meestal omlaag Hallo diagonaal</span><span class="sxs-lookup"><span data-stu-id="a31a9-199">A “striped” or “matrix” model where hello Fault Domains and Upgrade Domains form a matrix with machines usually running down hello diagonals</span></span>

<span data-ttu-id="a31a9-200"><center>
![Probleem- en Upgradedomein indelingen][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-200"><center>
![Fault and Upgrade Domain Layouts][Image4]
</center></span></span>

<span data-ttu-id="a31a9-201">Er is dat geen best beantwoordt welke indeling toochoose, elk heeft een aantal voordelen en nadelen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-201">There’s no best answer which layout toochoose, each has some pros and cons.</span></span> <span data-ttu-id="a31a9-202">Hallo 1FD:1UD model is bijvoorbeeld eenvoudige tooset maximaal is.</span><span class="sxs-lookup"><span data-stu-id="a31a9-202">For example, hello 1FD:1UD model is simple tooset up.</span></span> <span data-ttu-id="a31a9-203">Hallo is 1 Upgradedomein per knooppunt model zoals welke mensen worden gebruikt om de meeste.</span><span class="sxs-lookup"><span data-stu-id="a31a9-203">hello 1 Upgrade Domain per Node model is most like what people are used to.</span></span> <span data-ttu-id="a31a9-204">Elk knooppunt is tijdens upgrades onafhankelijk bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-204">During upgrades each node is updated independently.</span></span> <span data-ttu-id="a31a9-205">Dit is vergelijkbaar toohow kleine sets machines handmatig in de afgelopen Hallo zijn bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-205">This is similar toohow small sets of machines were upgraded manually in hello past.</span></span> 

<span data-ttu-id="a31a9-206">meest voorkomende Hallo-model is Hallo FD/UD matrix waar hello FDs en UDs een tabel vormen en knooppunten worden geplaatst langs Hallo diagonaal wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="a31a9-206">hello most common model is hello FD/UD matrix, where hello FDs and UDs form a table and nodes are placed starting along hello diagonal.</span></span> <span data-ttu-id="a31a9-207">Dit is standaard gebruikt in Service Fabric-clusters in Azure Hallo-model.</span><span class="sxs-lookup"><span data-stu-id="a31a9-207">This is hello model used by default in Service Fabric clusters in Azure.</span></span> <span data-ttu-id="a31a9-208">Voor clusters met knooppunten die veel belandt alles wat u ziet eruit als Hallo compacte matrix patroon hierboven.</span><span class="sxs-lookup"><span data-stu-id="a31a9-208">For clusters with many nodes everything ends up looking like hello dense matrix pattern above.</span></span>

## <a name="fault-and-upgrade-domain-constraints-and-resulting-behavior"></a><span data-ttu-id="a31a9-209">Beperkingen voor fouttolerantie en het upgraden van domein en het resulterende gedrag</span><span class="sxs-lookup"><span data-stu-id="a31a9-209">Fault and Upgrade Domain constraints and resulting behavior</span></span>
<span data-ttu-id="a31a9-210">Hallo Cluster Resource Manager beschouwt Hallo desire tookeep een service verdeeld zijn over de fout en -domeinen upgraden als een beperking.</span><span class="sxs-lookup"><span data-stu-id="a31a9-210">hello Cluster Resource Manager treats hello desire tookeep a service balanced across fault and Upgrade Domains as a constraint.</span></span> <span data-ttu-id="a31a9-211">U vindt meer informatie over de beperkingen in [in dit artikel](service-fabric-cluster-resource-manager-management-integration.md).</span><span class="sxs-lookup"><span data-stu-id="a31a9-211">You can find out more about constraints in [this article](service-fabric-cluster-resource-manager-management-integration.md).</span></span> <span data-ttu-id="a31a9-212">status van probleem- en Upgrade Domain beperkingen Hallo: ' voor een bepaalde service partitie moet nooit er een verschil *meer dan één* in Hallo aantal serviceobjecten (stateless service-exemplaren of stateful service replica's) tussen twee domeinen."</span><span class="sxs-lookup"><span data-stu-id="a31a9-212">hello Fault and Upgrade Domain constraints state: "For a given service partition there should never be a difference *greater than one* in hello number of service objects (stateless service instances or stateful service replicas) between two domains."</span></span> <span data-ttu-id="a31a9-213">Dit voorkomt dat bepaalde verplaatst of regelingen die strijdig zijn met deze beperking.</span><span class="sxs-lookup"><span data-stu-id="a31a9-213">This prevents certain moves or arrangements that violate this constraint.</span></span>

<span data-ttu-id="a31a9-214">Bekijk een voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="a31a9-214">Let's look at one example.</span></span> <span data-ttu-id="a31a9-215">Stel dat we een cluster met zes knooppunten zijn geconfigureerd met vijf domeinen met fouten en vijf domeinen upgraden hebben.</span><span class="sxs-lookup"><span data-stu-id="a31a9-215">Let's say that we have a cluster with six nodes, configured with five Fault Domains and five Upgrade Domains.</span></span>

|  | <span data-ttu-id="a31a9-216">FD0</span><span class="sxs-lookup"><span data-stu-id="a31a9-216">FD0</span></span> | <span data-ttu-id="a31a9-217">FD1</span><span class="sxs-lookup"><span data-stu-id="a31a9-217">FD1</span></span> | <span data-ttu-id="a31a9-218">FD2</span><span class="sxs-lookup"><span data-stu-id="a31a9-218">FD2</span></span> | <span data-ttu-id="a31a9-219">FD3</span><span class="sxs-lookup"><span data-stu-id="a31a9-219">FD3</span></span> | <span data-ttu-id="a31a9-220">FD4</span><span class="sxs-lookup"><span data-stu-id="a31a9-220">FD4</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="a31a9-221">**UD0**</span><span class="sxs-lookup"><span data-stu-id="a31a9-221">**UD0**</span></span> |<span data-ttu-id="a31a9-222">N1</span><span class="sxs-lookup"><span data-stu-id="a31a9-222">N1</span></span> | | | | |
| <span data-ttu-id="a31a9-223">**UD1**</span><span class="sxs-lookup"><span data-stu-id="a31a9-223">**UD1**</span></span> |<span data-ttu-id="a31a9-224">N6</span><span class="sxs-lookup"><span data-stu-id="a31a9-224">N6</span></span> |<span data-ttu-id="a31a9-225">N2</span><span class="sxs-lookup"><span data-stu-id="a31a9-225">N2</span></span> | | | |
| <span data-ttu-id="a31a9-226">**UD2**</span><span class="sxs-lookup"><span data-stu-id="a31a9-226">**UD2**</span></span> | | |<span data-ttu-id="a31a9-227">N3</span><span class="sxs-lookup"><span data-stu-id="a31a9-227">N3</span></span> | | |
| <span data-ttu-id="a31a9-228">**UD3**</span><span class="sxs-lookup"><span data-stu-id="a31a9-228">**UD3**</span></span> | | | |<span data-ttu-id="a31a9-229">N4</span><span class="sxs-lookup"><span data-stu-id="a31a9-229">N4</span></span> | |
| <span data-ttu-id="a31a9-230">**UD4**</span><span class="sxs-lookup"><span data-stu-id="a31a9-230">**UD4**</span></span> | | | | |<span data-ttu-id="a31a9-231">N5</span><span class="sxs-lookup"><span data-stu-id="a31a9-231">N5</span></span> |

<span data-ttu-id="a31a9-232">Nu gaan we spreken maken we een service met een TargetReplicaSetSize (of voor een stateless service een InstanceCount) van vijf.</span><span class="sxs-lookup"><span data-stu-id="a31a9-232">Now let's say that we create a service with a TargetReplicaSetSize (or, for a stateless service an InstanceCount) of five.</span></span> <span data-ttu-id="a31a9-233">Hallo replica's land op N1 N5.</span><span class="sxs-lookup"><span data-stu-id="a31a9-233">hello replicas land on N1-N5.</span></span> <span data-ttu-id="a31a9-234">In feite is nooit N6 gebruikt ongeacht hoeveel services zoals deze die u maakt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-234">In fact, N6 is never used no matter how many services like this you create.</span></span> <span data-ttu-id="a31a9-235">Maar waarom?</span><span class="sxs-lookup"><span data-stu-id="a31a9-235">But why?</span></span> <span data-ttu-id="a31a9-236">Bekijk Hallo verschil tussen de huidige indeling Hallo en wat er gebeurt als N6 is gekozen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-236">Let's look at hello difference between hello current layout and what would happen if N6 is chosen.</span></span>

<span data-ttu-id="a31a9-237">Hier volgt Hallo indeling we is en Hallo aantal replica's per fouttolerantie en het upgraden van domein:</span><span class="sxs-lookup"><span data-stu-id="a31a9-237">Here's hello layout we got and hello total number of replicas per Fault and Upgrade Domain:</span></span>

|  | <span data-ttu-id="a31a9-238">FD0</span><span class="sxs-lookup"><span data-stu-id="a31a9-238">FD0</span></span> | <span data-ttu-id="a31a9-239">FD1</span><span class="sxs-lookup"><span data-stu-id="a31a9-239">FD1</span></span> | <span data-ttu-id="a31a9-240">FD2</span><span class="sxs-lookup"><span data-stu-id="a31a9-240">FD2</span></span> | <span data-ttu-id="a31a9-241">FD3</span><span class="sxs-lookup"><span data-stu-id="a31a9-241">FD3</span></span> | <span data-ttu-id="a31a9-242">FD4</span><span class="sxs-lookup"><span data-stu-id="a31a9-242">FD4</span></span> | <span data-ttu-id="a31a9-243">UDTotal</span><span class="sxs-lookup"><span data-stu-id="a31a9-243">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="a31a9-244">**UD0**</span><span class="sxs-lookup"><span data-stu-id="a31a9-244">**UD0**</span></span> |<span data-ttu-id="a31a9-245">R1</span><span class="sxs-lookup"><span data-stu-id="a31a9-245">R1</span></span> | | | | |<span data-ttu-id="a31a9-246">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-246">1</span></span> |
| <span data-ttu-id="a31a9-247">**UD1**</span><span class="sxs-lookup"><span data-stu-id="a31a9-247">**UD1**</span></span> | |<span data-ttu-id="a31a9-248">R2</span><span class="sxs-lookup"><span data-stu-id="a31a9-248">R2</span></span> | | | |<span data-ttu-id="a31a9-249">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-249">1</span></span> |
| <span data-ttu-id="a31a9-250">**UD2**</span><span class="sxs-lookup"><span data-stu-id="a31a9-250">**UD2**</span></span> | | |<span data-ttu-id="a31a9-251">R3</span><span class="sxs-lookup"><span data-stu-id="a31a9-251">R3</span></span> | | |<span data-ttu-id="a31a9-252">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-252">1</span></span> |
| <span data-ttu-id="a31a9-253">**UD3**</span><span class="sxs-lookup"><span data-stu-id="a31a9-253">**UD3**</span></span> | | | |<span data-ttu-id="a31a9-254">R4</span><span class="sxs-lookup"><span data-stu-id="a31a9-254">R4</span></span> | |<span data-ttu-id="a31a9-255">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-255">1</span></span> |
| <span data-ttu-id="a31a9-256">**UD4**</span><span class="sxs-lookup"><span data-stu-id="a31a9-256">**UD4**</span></span> | | | | |<span data-ttu-id="a31a9-257">R5</span><span class="sxs-lookup"><span data-stu-id="a31a9-257">R5</span></span> |<span data-ttu-id="a31a9-258">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-258">1</span></span> |
| <span data-ttu-id="a31a9-259">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="a31a9-259">**FDTotal**</span></span> |<span data-ttu-id="a31a9-260">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-260">1</span></span> |<span data-ttu-id="a31a9-261">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-261">1</span></span> |<span data-ttu-id="a31a9-262">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-262">1</span></span> |<span data-ttu-id="a31a9-263">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-263">1</span></span> |<span data-ttu-id="a31a9-264">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-264">1</span></span> |- |

<span data-ttu-id="a31a9-265">Deze indeling wordt verdeeld in termen van knooppunten per domein met fouten en het upgraden van domein.</span><span class="sxs-lookup"><span data-stu-id="a31a9-265">This layout is balanced in terms of nodes per Fault Domain and Upgrade Domain.</span></span> <span data-ttu-id="a31a9-266">Het is ook taakverdeling in termen van Hallo aantal replica's per probleem- en Upgrade-domein.</span><span class="sxs-lookup"><span data-stu-id="a31a9-266">It is also balanced in terms of hello number of replicas per Fault and Upgrade Domain.</span></span> <span data-ttu-id="a31a9-267">Elk domein heeft hetzelfde aantal knooppunten Hallo en Hallo hetzelfde aantal replica's.</span><span class="sxs-lookup"><span data-stu-id="a31a9-267">Each domain has hello same number of nodes and hello same number of replicas.</span></span>

<span data-ttu-id="a31a9-268">Nu gaan we kijken wat gebeurt er als er N6 in plaats van N2 gebruikt waren.</span><span class="sxs-lookup"><span data-stu-id="a31a9-268">Now, let's look at what would happen if we'd used N6 instead of N2.</span></span> <span data-ttu-id="a31a9-269">Hoe zou replica's Hallo gedistribueerd vervolgens?</span><span class="sxs-lookup"><span data-stu-id="a31a9-269">How would hello replicas be distributed then?</span></span>

|  | <span data-ttu-id="a31a9-270">FD0</span><span class="sxs-lookup"><span data-stu-id="a31a9-270">FD0</span></span> | <span data-ttu-id="a31a9-271">FD1</span><span class="sxs-lookup"><span data-stu-id="a31a9-271">FD1</span></span> | <span data-ttu-id="a31a9-272">FD2</span><span class="sxs-lookup"><span data-stu-id="a31a9-272">FD2</span></span> | <span data-ttu-id="a31a9-273">FD3</span><span class="sxs-lookup"><span data-stu-id="a31a9-273">FD3</span></span> | <span data-ttu-id="a31a9-274">FD4</span><span class="sxs-lookup"><span data-stu-id="a31a9-274">FD4</span></span> | <span data-ttu-id="a31a9-275">UDTotal</span><span class="sxs-lookup"><span data-stu-id="a31a9-275">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="a31a9-276">**UD0**</span><span class="sxs-lookup"><span data-stu-id="a31a9-276">**UD0**</span></span> |<span data-ttu-id="a31a9-277">R1</span><span class="sxs-lookup"><span data-stu-id="a31a9-277">R1</span></span> | | | | |<span data-ttu-id="a31a9-278">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-278">1</span></span> |
| <span data-ttu-id="a31a9-279">**UD1**</span><span class="sxs-lookup"><span data-stu-id="a31a9-279">**UD1**</span></span> |<span data-ttu-id="a31a9-280">R5</span><span class="sxs-lookup"><span data-stu-id="a31a9-280">R5</span></span> | | | | |<span data-ttu-id="a31a9-281">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-281">1</span></span> |
| <span data-ttu-id="a31a9-282">**UD2**</span><span class="sxs-lookup"><span data-stu-id="a31a9-282">**UD2**</span></span> | | |<span data-ttu-id="a31a9-283">R2</span><span class="sxs-lookup"><span data-stu-id="a31a9-283">R2</span></span> | | |<span data-ttu-id="a31a9-284">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-284">1</span></span> |
| <span data-ttu-id="a31a9-285">**UD3**</span><span class="sxs-lookup"><span data-stu-id="a31a9-285">**UD3**</span></span> | | | |<span data-ttu-id="a31a9-286">R3</span><span class="sxs-lookup"><span data-stu-id="a31a9-286">R3</span></span> | |<span data-ttu-id="a31a9-287">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-287">1</span></span> |
| <span data-ttu-id="a31a9-288">**UD4**</span><span class="sxs-lookup"><span data-stu-id="a31a9-288">**UD4**</span></span> | | | | |<span data-ttu-id="a31a9-289">R4</span><span class="sxs-lookup"><span data-stu-id="a31a9-289">R4</span></span> |<span data-ttu-id="a31a9-290">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-290">1</span></span> |
| <span data-ttu-id="a31a9-291">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="a31a9-291">**FDTotal**</span></span> |<span data-ttu-id="a31a9-292">2</span><span class="sxs-lookup"><span data-stu-id="a31a9-292">2</span></span> |<span data-ttu-id="a31a9-293">0</span><span class="sxs-lookup"><span data-stu-id="a31a9-293">0</span></span> |<span data-ttu-id="a31a9-294">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-294">1</span></span> |<span data-ttu-id="a31a9-295">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-295">1</span></span> |<span data-ttu-id="a31a9-296">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-296">1</span></span> |- |

<span data-ttu-id="a31a9-297">Deze lay-out is in strijd met onze definitie voor Hallo Foutdomein beperking.</span><span class="sxs-lookup"><span data-stu-id="a31a9-297">This layout violates our definition for hello Fault Domain constraint.</span></span> <span data-ttu-id="a31a9-298">FD0 heeft twee replica's, terwijl FD1 nul, aanbrengen Hallo verschil tussen FD0 en FD1 een totaal van twee heeft.</span><span class="sxs-lookup"><span data-stu-id="a31a9-298">FD0 has two replicas, while FD1 has zero, making hello difference between FD0 and FD1 a total of two.</span></span> <span data-ttu-id="a31a9-299">Hallo Cluster Resource Manager is niet toegestaan voor deze benadering.</span><span class="sxs-lookup"><span data-stu-id="a31a9-299">hello Cluster Resource Manager does not allow this arrangement.</span></span> <span data-ttu-id="a31a9-300">Op dezelfde manier als we N2 en N6 (in plaats van N1 en N2 gekozen) dat we zouden krijgen:</span><span class="sxs-lookup"><span data-stu-id="a31a9-300">Similarly if we picked N2 and N6 (instead of N1 and N2) we'd get:</span></span>

|  | <span data-ttu-id="a31a9-301">FD0</span><span class="sxs-lookup"><span data-stu-id="a31a9-301">FD0</span></span> | <span data-ttu-id="a31a9-302">FD1</span><span class="sxs-lookup"><span data-stu-id="a31a9-302">FD1</span></span> | <span data-ttu-id="a31a9-303">FD2</span><span class="sxs-lookup"><span data-stu-id="a31a9-303">FD2</span></span> | <span data-ttu-id="a31a9-304">FD3</span><span class="sxs-lookup"><span data-stu-id="a31a9-304">FD3</span></span> | <span data-ttu-id="a31a9-305">FD4</span><span class="sxs-lookup"><span data-stu-id="a31a9-305">FD4</span></span> | <span data-ttu-id="a31a9-306">UDTotal</span><span class="sxs-lookup"><span data-stu-id="a31a9-306">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="a31a9-307">**UD0**</span><span class="sxs-lookup"><span data-stu-id="a31a9-307">**UD0**</span></span> | | | | | |<span data-ttu-id="a31a9-308">0</span><span class="sxs-lookup"><span data-stu-id="a31a9-308">0</span></span> |
| <span data-ttu-id="a31a9-309">**UD1**</span><span class="sxs-lookup"><span data-stu-id="a31a9-309">**UD1**</span></span> |<span data-ttu-id="a31a9-310">R5</span><span class="sxs-lookup"><span data-stu-id="a31a9-310">R5</span></span> |<span data-ttu-id="a31a9-311">R1</span><span class="sxs-lookup"><span data-stu-id="a31a9-311">R1</span></span> | | | |<span data-ttu-id="a31a9-312">2</span><span class="sxs-lookup"><span data-stu-id="a31a9-312">2</span></span> |
| <span data-ttu-id="a31a9-313">**UD2**</span><span class="sxs-lookup"><span data-stu-id="a31a9-313">**UD2**</span></span> | | |<span data-ttu-id="a31a9-314">R2</span><span class="sxs-lookup"><span data-stu-id="a31a9-314">R2</span></span> | | |<span data-ttu-id="a31a9-315">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-315">1</span></span> |
| <span data-ttu-id="a31a9-316">**UD3**</span><span class="sxs-lookup"><span data-stu-id="a31a9-316">**UD3**</span></span> | | | |<span data-ttu-id="a31a9-317">R3</span><span class="sxs-lookup"><span data-stu-id="a31a9-317">R3</span></span> | |<span data-ttu-id="a31a9-318">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-318">1</span></span> |
| <span data-ttu-id="a31a9-319">**UD4**</span><span class="sxs-lookup"><span data-stu-id="a31a9-319">**UD4**</span></span> | | | | |<span data-ttu-id="a31a9-320">R4</span><span class="sxs-lookup"><span data-stu-id="a31a9-320">R4</span></span> |<span data-ttu-id="a31a9-321">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-321">1</span></span> |
| <span data-ttu-id="a31a9-322">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="a31a9-322">**FDTotal**</span></span> |<span data-ttu-id="a31a9-323">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-323">1</span></span> |<span data-ttu-id="a31a9-324">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-324">1</span></span> |<span data-ttu-id="a31a9-325">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-325">1</span></span> |<span data-ttu-id="a31a9-326">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-326">1</span></span> |<span data-ttu-id="a31a9-327">1</span><span class="sxs-lookup"><span data-stu-id="a31a9-327">1</span></span> |- |

<span data-ttu-id="a31a9-328">Deze indeling wordt verdeeld in termen van domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-328">This layout is balanced in terms of Fault Domains.</span></span> <span data-ttu-id="a31a9-329">Echter, nu deze wordt schenden Hallo upgraden domein beperking.</span><span class="sxs-lookup"><span data-stu-id="a31a9-329">However, now it's violating hello Upgrade Domain constraint.</span></span> <span data-ttu-id="a31a9-330">Dit is omdat UD0 nul replica's heeft terwijl UD1 twee heeft.</span><span class="sxs-lookup"><span data-stu-id="a31a9-330">This is because UD0 has zero replicas while UD1 has two.</span></span> <span data-ttu-id="a31a9-331">Daarom wordt deze lay-out ook is ongeldig en won't worden verzameld door Hallo Cluster Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a31a9-331">Therefore, this layout is also invalid and won't be picked by hello Cluster Resource Manager.</span></span> 

## <a name="configuring-fault-and-upgrade-domains"></a><span data-ttu-id="a31a9-332">Configureren van de fout en domeinen upgraden</span><span class="sxs-lookup"><span data-stu-id="a31a9-332">Configuring fault and Upgrade Domains</span></span>
<span data-ttu-id="a31a9-333">Domeinen met fouten en -domeinen upgraden definiëren gebeurt automatisch in Azure gehoste Service Fabric-implementaties.</span><span class="sxs-lookup"><span data-stu-id="a31a9-333">Defining Fault Domains and Upgrade Domains is done automatically in Azure hosted Service Fabric deployments.</span></span> <span data-ttu-id="a31a9-334">Service Fabric opgehaald en gebruikt Hallo omgeving gegevens uit Azure.</span><span class="sxs-lookup"><span data-stu-id="a31a9-334">Service Fabric picks up and uses hello environment information from Azure.</span></span>

<span data-ttu-id="a31a9-335">Als u uw eigen-cluster maakt (of een bepaalde topologie in ontwikkeling toorun wilt), kunt u Hallo Foutdomein en het upgraden van domein informatie zelf opgeven.</span><span class="sxs-lookup"><span data-stu-id="a31a9-335">If you’re creating your own cluster (or want toorun a particular topology in development), you can provide hello Fault Domain and Upgrade Domain information yourself.</span></span> <span data-ttu-id="a31a9-336">In dit voorbeeld definiëren we een lokaal ontwikkelcluster van negen knooppunt die drie 'datacenters' (elk met drie rekken omvat).</span><span class="sxs-lookup"><span data-stu-id="a31a9-336">In this example, we define a nine node local development cluster that spans three “datacenters” (each with three racks).</span></span> <span data-ttu-id="a31a9-337">Dit cluster heeft ook drie upgraden domeinen striped verdeeld over de drie datacenters.</span><span class="sxs-lookup"><span data-stu-id="a31a9-337">This cluster also has three Upgrade Domains striped across those three datacenters.</span></span> <span data-ttu-id="a31a9-338">Een voorbeeld van Hallo configuratie lager is dan:</span><span class="sxs-lookup"><span data-stu-id="a31a9-338">An example of hello configuration is below:</span></span> 

<span data-ttu-id="a31a9-339">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="a31a9-339">ClusterManifest.xml</span></span>

```xml
  <Infrastructure>
    <!-- IsScaleMin indicates that this cluster runs on one-box /one single server -->
    <WindowsServer IsScaleMin="true">
      <NodeList>
        <Node NodeName="Node01" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType01" FaultDomain="fd:/DC01/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node02" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType02" FaultDomain="fd:/DC01/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node03" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType03" FaultDomain="fd:/DC01/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node04" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType04" FaultDomain="fd:/DC02/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node05" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType05" FaultDomain="fd:/DC02/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node06" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType06" FaultDomain="fd:/DC02/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node07" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType07" FaultDomain="fd:/DC03/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node08" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType08" FaultDomain="fd:/DC03/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node09" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType09" FaultDomain="fd:/DC03/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
      </NodeList>
    </WindowsServer>
  </Infrastructure>
```

<span data-ttu-id="a31a9-340">via ClusterConfig.json voor zelfstandige implementaties</span><span class="sxs-lookup"><span data-stu-id="a31a9-340">via ClusterConfig.json for Standalone deployments</span></span>

```json
"nodes": [
  {
    "nodeName": "vm1",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm2",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm3",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm4",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm5",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm6",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm7",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm8",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm9",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD3"
  }
],
```

> [!NOTE]
> <span data-ttu-id="a31a9-341">Bij het definiëren van clusters via Azure Resource Manager, worden Foutdomeinen en -domeinen upgraden door Azure worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-341">When defining clusters via Azure Resource Manager, Fault Domains and Upgrade Domains are assigned by Azure.</span></span> <span data-ttu-id="a31a9-342">Hallo-definitie van uw knooppunttypen en virtuele-Machineschaalsets in uw Azure Resource Manager-sjabloon bevat daarom geen Foutdomein of domeingegevens upgraden.</span><span class="sxs-lookup"><span data-stu-id="a31a9-342">Therefore, hello definition of your Node Types and Virtual Machine Scale Sets in your Azure Resource Manager template does not include Fault Domain or Upgrade Domain information.</span></span>
>

## <a name="node-properties-and-placement-constraints"></a><span data-ttu-id="a31a9-343">Eigenschappen van het knooppunt en plaatsingsbeperkingen</span><span class="sxs-lookup"><span data-stu-id="a31a9-343">Node properties and placement constraints</span></span>
<span data-ttu-id="a31a9-344">U gaat soms (in feite meestal Hallo) toowant tooensure die bepaalde werkbelastingen alleen op bepaalde soorten knooppunten in cluster Hallo worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-344">Sometimes (in fact, most of hello time) you’re going toowant tooensure that certain workloads run only on certain types of nodes in hello cluster.</span></span> <span data-ttu-id="a31a9-345">Voor kan sommige werkbelasting bijvoorbeeld vereisen GPU's of SSD's en andere niet.</span><span class="sxs-lookup"><span data-stu-id="a31a9-345">For example, some workload may require GPUs or SSDs while others may not.</span></span> <span data-ttu-id="a31a9-346">Een goed voorbeeld van doelen hardware tooparticular werkbelastingen is er bijna alle lagen-architectuur.</span><span class="sxs-lookup"><span data-stu-id="a31a9-346">A great example of targeting hardware tooparticular workloads is almost every n-tier architecture out there.</span></span> <span data-ttu-id="a31a9-347">Bepaalde computers fungeren als front-end- of -API voor de kant van de toepassing hello Hallo en blootgestelde toohello clients of Hallo internet.</span><span class="sxs-lookup"><span data-stu-id="a31a9-347">Certain machines serve as hello front end or API serving side of hello application and are exposed toohello clients or hello internet.</span></span> <span data-ttu-id="a31a9-348">Andere machines, vaak met verschillende hardware-bronnen, verwerken Hallo werk van Hallo compute of opslag lagen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-348">Different machines, often with different hardware resources, handle hello work of hello compute or storage layers.</span></span> <span data-ttu-id="a31a9-349">Dit zijn meestal _niet_ rechtstreeks blootgesteld tooclients of Hallo internet.</span><span class="sxs-lookup"><span data-stu-id="a31a9-349">These are usually _not_ directly exposed tooclients or hello internet.</span></span> <span data-ttu-id="a31a9-350">Service Fabric verwacht dat er gevallen waarin bepaalde werkbelastingen toorun op specifieke hardwareconfiguraties moeten zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-350">Service Fabric expects that there are cases where particular workloads need toorun on particular hardware configurations.</span></span> <span data-ttu-id="a31a9-351">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="a31a9-351">For example:</span></span>

* <span data-ttu-id="a31a9-352">een bestaande n-tier-toepassing is 'opgeheven en verplaatst' in een Service Fabric-omgeving</span><span class="sxs-lookup"><span data-stu-id="a31a9-352">an existing n-tier application has been “lifted and shifted” into a Service Fabric environment</span></span>
* <span data-ttu-id="a31a9-353">een werklast wil toorun op specifieke hardware voor prestaties of schaal veiligheidsredenen isolatie</span><span class="sxs-lookup"><span data-stu-id="a31a9-353">a workload wants toorun on specific hardware for performance, scale, or security isolation reasons</span></span>
* <span data-ttu-id="a31a9-354">Een werklast worden geïsoleerd van andere werkbelastingen omwille van beleid of de resource-verbruik</span><span class="sxs-lookup"><span data-stu-id="a31a9-354">A workload should be isolated from other workloads for policy or resource consumption reasons</span></span>

<span data-ttu-id="a31a9-355">toosupport dit soort configuraties, Service Fabric is een eerste-klas begrip van de labels die toegepast toonodes worden kunnen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-355">toosupport these sorts of configurations, Service Fabric has a first class notion of tags that can be applied toonodes.</span></span> <span data-ttu-id="a31a9-356">Deze tags worden genoemd **knooppunteigenschappen**.</span><span class="sxs-lookup"><span data-stu-id="a31a9-356">These tags are called **node properties**.</span></span> <span data-ttu-id="a31a9-357">**Plaatsingsbeperkingen** Hallo instructies gekoppeld tooindividual-services die voor een of meer eigenschappen van het knooppunt selecteert zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-357">**Placement constraints** are hello statements attached tooindividual services that select for one or more node properties.</span></span> <span data-ttu-id="a31a9-358">Plaatsingsbeperkingen definiëren waar services moeten worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-358">Placement constraints define where services should run.</span></span> <span data-ttu-id="a31a9-359">Hallo reeks beperkingen is extensible - een sleutel-waardepaar kunt werken.</span><span class="sxs-lookup"><span data-stu-id="a31a9-359">hello set of constraints is extensible - any key/value pair can work.</span></span> 

<span data-ttu-id="a31a9-360"><center>
![Cluster-indeling verschillende werkbelastingen][Image5]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-360"><center>
![Cluster Layout Different Workloads][Image5]
</center></span></span>

### <a name="built-in-node-properties"></a><span data-ttu-id="a31a9-361">Ingebouwd in de eigenschappen van knooppunt</span><span class="sxs-lookup"><span data-stu-id="a31a9-361">Built in node properties</span></span>
<span data-ttu-id="a31a9-362">Service Fabric definieert een aantal standaardeigenschappen knooppunt die automatisch kunnen worden gebruikt zonder Hallo gebruiker toodefine ze.</span><span class="sxs-lookup"><span data-stu-id="a31a9-362">Service Fabric defines some default node properties that can be used automatically without hello user having toodefine them.</span></span> <span data-ttu-id="a31a9-363">Hallo standaardeigenschappen gedefinieerd op elk knooppunt zijn Hallo **NodeType** en Hallo **NodeName**.</span><span class="sxs-lookup"><span data-stu-id="a31a9-363">hello default properties defined at each node are hello **NodeType** and hello **NodeName**.</span></span> <span data-ttu-id="a31a9-364">U kunt dus bijvoorbeeld een beperking voor plaatsing als schrijven `"(NodeType == NodeType03)"`.</span><span class="sxs-lookup"><span data-stu-id="a31a9-364">So for example you could write a placement constraint as `"(NodeType == NodeType03)"`.</span></span> <span data-ttu-id="a31a9-365">We hebben vindt meestal NodeType toobe een van de meest gebruikte Hallo-eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-365">Generally we have found NodeType toobe one of hello most commonly used properties.</span></span> <span data-ttu-id="a31a9-366">Het is nuttig omdat deze 1:1 met een type van een machine overeenkomt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-366">It is useful since it corresponds 1:1 with a type of a machine.</span></span> <span data-ttu-id="a31a9-367">Elk type van de machine overeenkomt met tooa type werkbelasting in een traditionele n-tier-toepassing.</span><span class="sxs-lookup"><span data-stu-id="a31a9-367">Each type of machine corresponds tooa type of workload in a traditional n-tier application.</span></span>

<span data-ttu-id="a31a9-368"><center>
![Plaatsingsbeperkingen en eigenschappen van knooppunt][Image6]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-368"><center>
![Placement Constraints and Node Properties][Image6]
</center></span></span>

## <a name="placement-constraint-and-node-property-syntax"></a><span data-ttu-id="a31a9-369">Plaatsing van de beperkingen en de syntaxis van de eigenschap knooppunt</span><span class="sxs-lookup"><span data-stu-id="a31a9-369">Placement Constraint and Node Property Syntax</span></span> 
<span data-ttu-id="a31a9-370">Hallo-waarde opgegeven in de eigenschap knooppunt Hallo kan string, bool, of lang ondertekend.</span><span class="sxs-lookup"><span data-stu-id="a31a9-370">hello value specified in hello node property can be a string, bool, or signed long.</span></span> <span data-ttu-id="a31a9-371">Hallo-instructie op Hallo service heet een plaatsing *beperking* omdat beperkt waar Hallo-service kan worden uitgevoerd in Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="a31a9-371">hello statement at hello service is called a placement *constraint* since it constrains where hello service can run in hello cluster.</span></span> <span data-ttu-id="a31a9-372">Hallo-beperking kan elke Boole-instructie die wordt toegepast op Hallo ander knooppunteigenschappen in Hallo cluster zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-372">hello constraint can be any Boolean statement that operates on hello different node properties in hello cluster.</span></span> <span data-ttu-id="a31a9-373">Hallo geldig selectoren in deze instructies Boolean-waarde zijn:</span><span class="sxs-lookup"><span data-stu-id="a31a9-373">hello valid selectors in these boolean statements are:</span></span>

1) <span data-ttu-id="a31a9-374">voorwaardelijke controles voor het maken van bepaalde instructies</span><span class="sxs-lookup"><span data-stu-id="a31a9-374">conditional checks for creating particular statements</span></span>

| <span data-ttu-id="a31a9-375">Instructie</span><span class="sxs-lookup"><span data-stu-id="a31a9-375">Statement</span></span> | <span data-ttu-id="a31a9-376">Syntaxis</span><span class="sxs-lookup"><span data-stu-id="a31a9-376">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="a31a9-377">'gelijk zijn aan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-377">"equal to"</span></span> | <span data-ttu-id="a31a9-378">"=="</span><span class="sxs-lookup"><span data-stu-id="a31a9-378">"=="</span></span> |
| <span data-ttu-id="a31a9-379">'is niet gelijk aan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-379">"not equal to"</span></span> | <span data-ttu-id="a31a9-380">"!="</span><span class="sxs-lookup"><span data-stu-id="a31a9-380">"!="</span></span> |
| <span data-ttu-id="a31a9-381">'die groter is dan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-381">"greater than"</span></span> | <span data-ttu-id="a31a9-382">">"</span><span class="sxs-lookup"><span data-stu-id="a31a9-382">">"</span></span> |
| <span data-ttu-id="a31a9-383">'groter dan of gelijk zijn aan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-383">"greater than or equal to"</span></span> | <span data-ttu-id="a31a9-384">">="</span><span class="sxs-lookup"><span data-stu-id="a31a9-384">">="</span></span> |
| <span data-ttu-id="a31a9-385">'kleiner dan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-385">"less than"</span></span> | <span data-ttu-id="a31a9-386">"<"</span><span class="sxs-lookup"><span data-stu-id="a31a9-386">"<"</span></span> |
| <span data-ttu-id="a31a9-387">'kleiner dan of gelijk aan'</span><span class="sxs-lookup"><span data-stu-id="a31a9-387">"less than or equal to"</span></span> | <span data-ttu-id="a31a9-388">"<="</span><span class="sxs-lookup"><span data-stu-id="a31a9-388">"<="</span></span> |

2) <span data-ttu-id="a31a9-389">Boole-instructies voor groepering en logische bewerkingen</span><span class="sxs-lookup"><span data-stu-id="a31a9-389">boolean statements for grouping and logical operations</span></span>

| <span data-ttu-id="a31a9-390">Instructie</span><span class="sxs-lookup"><span data-stu-id="a31a9-390">Statement</span></span> | <span data-ttu-id="a31a9-391">Syntaxis</span><span class="sxs-lookup"><span data-stu-id="a31a9-391">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="a31a9-392">'en'</span><span class="sxs-lookup"><span data-stu-id="a31a9-392">"and"</span></span> | <span data-ttu-id="a31a9-393">"&&"</span><span class="sxs-lookup"><span data-stu-id="a31a9-393">"&&"</span></span> |
| <span data-ttu-id="a31a9-394">"of"</span><span class="sxs-lookup"><span data-stu-id="a31a9-394">"or"</span></span> | <span data-ttu-id="a31a9-395">"&#124;&#124;"</span><span class="sxs-lookup"><span data-stu-id="a31a9-395">"&#124;&#124;"</span></span> |
| <span data-ttu-id="a31a9-396">"niet"</span><span class="sxs-lookup"><span data-stu-id="a31a9-396">"not"</span></span> | <span data-ttu-id="a31a9-397">"!"</span><span class="sxs-lookup"><span data-stu-id="a31a9-397">"!"</span></span> |
| <span data-ttu-id="a31a9-398">'als één instructie een groep'</span><span class="sxs-lookup"><span data-stu-id="a31a9-398">"group as single statement"</span></span> | <span data-ttu-id="a31a9-399">"()"</span><span class="sxs-lookup"><span data-stu-id="a31a9-399">"()"</span></span> |

<span data-ttu-id="a31a9-400">Hier volgen enkele voorbeelden van basisbeperking instructies.</span><span class="sxs-lookup"><span data-stu-id="a31a9-400">Here are some examples of basic constraint statements.</span></span>

  * `"Value >= 5"`
  * `"NodeColor != green"`
  * `"((OneProperty < 100) || ((AnotherProperty == false) && (OneProperty >= 100)))"`

<span data-ttu-id="a31a9-401">Alleen knooppunten waar hello algemene plaatsing beperking instructie evalueert te 'True' kunnen geplaatst op het Hallo-service hebben.</span><span class="sxs-lookup"><span data-stu-id="a31a9-401">Only nodes where hello overall placement constraint statement evaluates too“True” can have hello service placed on it.</span></span> <span data-ttu-id="a31a9-402">Knooppunten waarvoor geen een eigenschap worden gedefinieerd, komen niet overeen met de plaatsing beperkingen met die eigenschap.</span><span class="sxs-lookup"><span data-stu-id="a31a9-402">Nodes that do not have a property defined do not match any placement constraint containing that property.</span></span>

<span data-ttu-id="a31a9-403">Stel deze eigenschappen zijn gedefinieerd voor een bepaald knooppunt-type op het knooppunt volgt Hallo:</span><span class="sxs-lookup"><span data-stu-id="a31a9-403">Let’s say that hello following node properties were defined for a given node type:</span></span>

<span data-ttu-id="a31a9-404">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="a31a9-404">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType01">
      <PlacementProperties>
        <Property Name="HasSSD" Value="true"/>
        <Property Name="NodeColor" Value="green"/>
        <Property Name="SomeProperty" Value="5"/>
      </PlacementProperties>
    </NodeType>
```

<span data-ttu-id="a31a9-405">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure.</span><span class="sxs-lookup"><span data-stu-id="a31a9-405">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

> [!NOTE]
> <span data-ttu-id="a31a9-406">Type in uw Azure Resource Manager-sjabloon Hallo knooppunt meestal parameters wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-406">In your Azure Resource Manager template hello node type is usually parameterized.</span></span> <span data-ttu-id="a31a9-407">Deze eruit als '[parameters('vmNodeType1Name')]' in plaats van 'NodeType01'.</span><span class="sxs-lookup"><span data-stu-id="a31a9-407">It would look like "[parameters('vmNodeType1Name')]" rather than "NodeType01".</span></span>
>

```json
"nodeTypes": [
    {
        "name": "NodeType01",
        "placementProperties": {
            "HasSSD": "true",
            "NodeColor": "green",
            "SomeProperty": "5"
        },
    }
],
```

<span data-ttu-id="a31a9-408">U kunt de plaatsing van de service maken *beperkingen* voor een service, zoals als volgt:</span><span class="sxs-lookup"><span data-stu-id="a31a9-408">You can create service placement *constraints* for a service like as follows:</span></span>

<span data-ttu-id="a31a9-409">C#</span><span class="sxs-lookup"><span data-stu-id="a31a9-409">C#</span></span>

```csharp
FabricClient fabricClient = new FabricClient();
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
serviceDescription.PlacementConstraints = "(HasSSD == true && SomeProperty >= 4)";
// add other required servicedescription fields
//...
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="a31a9-410">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="a31a9-410">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceType -Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton -PlacementConstraint "HasSSD == true && SomeProperty >= 4"
```

<span data-ttu-id="a31a9-411">Als alle knooppunten van NodeType01 geldig zijn, kunt u ook dat knooppunttype met Hallo beperking selecteren "(NodeType == NodeType01) '.</span><span class="sxs-lookup"><span data-stu-id="a31a9-411">If all nodes of NodeType01 are valid, you can also select that node type with hello constraint "(NodeType == NodeType01)".</span></span>

<span data-ttu-id="a31a9-412">Hallo cool bewerkingen over een service plaatsingsbeperkingen is dat ze kunnen dynamisch worden bijgewerkt tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="a31a9-412">One of hello cool things about a service’s placement constraints is that they can be updated dynamically during runtime.</span></span> <span data-ttu-id="a31a9-413">Dus als u wilt, kunt u een service navigeren in de cluster hello, toevoegen en verwijderen vereisten, enzovoort. Service Fabric zorgt om ervoor te zorgen dat service Hallo blijft en beschikbaar is zelfs wanneer deze typen wijzigingen worden aangebracht.</span><span class="sxs-lookup"><span data-stu-id="a31a9-413">So if you need to, you can move a service around in hello cluster, add and remove requirements, etc. Service Fabric takes care of ensuring that hello service stays up and available even when these types of changes are made.</span></span>

<span data-ttu-id="a31a9-414">C#:</span><span class="sxs-lookup"><span data-stu-id="a31a9-414">C#:</span></span>

```csharp
StatefulServiceUpdateDescription updateDescription = new StatefulServiceUpdateDescription();
updateDescription.PlacementConstraints = "NodeType == NodeType01";
await fabricClient.ServiceManager.UpdateServiceAsync(new Uri("fabric:/app/service"), updateDescription);
```

<span data-ttu-id="a31a9-415">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="a31a9-415">Powershell:</span></span>

```posh
Update-ServiceFabricService -Stateful -ServiceName $serviceName -PlacementConstraints "NodeType == NodeType01"
```

<span data-ttu-id="a31a9-416">Plaatsingsbeperkingen zijn opgegeven voor elke andere benoemde service-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="a31a9-416">Placement constraints are specified for every different named service instance.</span></span> <span data-ttu-id="a31a9-417">Updates altijd uitgevoerd Hallo van (overschrijven) wat eerder is opgegeven.</span><span class="sxs-lookup"><span data-stu-id="a31a9-417">Updates always take hello place of (overwrite) what was previously specified.</span></span>

<span data-ttu-id="a31a9-418">Hallo cluster definitie definieert Hallo-eigenschappen op een knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-418">hello cluster definition defines hello properties on a node.</span></span> <span data-ttu-id="a31a9-419">Kan de eigenschappen van een knooppunt is de upgrade van een cluster configuratie vereist.</span><span class="sxs-lookup"><span data-stu-id="a31a9-419">Changing a node's properties requires a cluster configuration upgrade.</span></span> <span data-ttu-id="a31a9-420">Een upgrade van een knooppunt eigenschappen nodig elk knooppunt in kwestie toorestart tooreport nieuwe eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-420">Upgrading a node's properties requires each affected node toorestart tooreport its new properties.</span></span> <span data-ttu-id="a31a9-421">Deze rolling upgrades worden beheerd door Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a31a9-421">These rolling upgrades are managed by Service Fabric.</span></span>

## <a name="describing-and-managing-cluster-resources"></a><span data-ttu-id="a31a9-422">Beschrijven en de clusterbronnen beheren</span><span class="sxs-lookup"><span data-stu-id="a31a9-422">Describing and Managing Cluster Resources</span></span>
<span data-ttu-id="a31a9-423">Een van de belangrijkste taken van een orchestrator is toohelp Hallo brongebruik in Hallo cluster beheren.</span><span class="sxs-lookup"><span data-stu-id="a31a9-423">One of hello most important jobs of any orchestrator is toohelp manage resource consumption in hello cluster.</span></span> <span data-ttu-id="a31a9-424">Het beheren van clusterbronnen kan leiden tot een aantal verschillende dingen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-424">Managing cluster resources can mean a couple of different things.</span></span> <span data-ttu-id="a31a9-425">Eerst, er ervoor zorgen dat machines zijn niet overbelast.</span><span class="sxs-lookup"><span data-stu-id="a31a9-425">First, there's ensuring that machines are not overloaded.</span></span> <span data-ttu-id="a31a9-426">Dit betekent om ervoor te zorgen dat machines meer services die deze kunnen verwerken worden niet uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-426">This means making sure that machines aren't running more services than they can handle.</span></span> <span data-ttu-id="a31a9-427">Er is ten tweede Netwerktaakverdeling en optimalisatie van die kritieke toorunning services efficiënt is.</span><span class="sxs-lookup"><span data-stu-id="a31a9-427">Second, there's balancing and optimization which is critical toorunning services efficiently.</span></span> <span data-ttu-id="a31a9-428">Kosten effectieve of prestaties-serviceaanbiedingen gevoelige mag geen enkele toobe knooppunten hot terwijl andere koude.</span><span class="sxs-lookup"><span data-stu-id="a31a9-428">Cost effective or performance sensitive service offerings can't allow some nodes toobe hot while others are cold.</span></span> <span data-ttu-id="a31a9-429">Hot knooppunten leiden tooresource conflicten en slechte prestaties en koude knooppunten vertegenwoordigen verspild bronnen en hogere kosten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-429">Hot nodes lead tooresource contention and poor performance, and cold nodes represent wasted resources and increased costs.</span></span> 

<span data-ttu-id="a31a9-430">Service Fabric vertegenwoordigt resources als `Metrics`.</span><span class="sxs-lookup"><span data-stu-id="a31a9-430">Service Fabric represents resources as `Metrics`.</span></span> <span data-ttu-id="a31a9-431">Metrische gegevens zijn logische of fysieke resource die u wilt dat toodescribe tooService Fabric.</span><span class="sxs-lookup"><span data-stu-id="a31a9-431">Metrics are any logical or physical resource that you want toodescribe tooService Fabric.</span></span> <span data-ttu-id="a31a9-432">Voorbeelden van metrische gegevens zijn bijvoorbeeld 'WorkQueueDepth' of 'MemoryInMb'.</span><span class="sxs-lookup"><span data-stu-id="a31a9-432">Examples of metrics are things like “WorkQueueDepth” or “MemoryInMb”.</span></span> <span data-ttu-id="a31a9-433">Zie voor meer informatie over Hallo fysieke resources die Service Fabric kunnen van toepassing op knooppunten [resource governance](service-fabric-resource-governance.md).</span><span class="sxs-lookup"><span data-stu-id="a31a9-433">For information about hello physical resources that Service Fabric can govern on nodes, see [resource governance](service-fabric-resource-governance.md).</span></span> <span data-ttu-id="a31a9-434">Zie voor meer informatie over het configureren van aangepaste metrische gegevens en het gebruik [in dit artikel](service-fabric-cluster-resource-manager-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="a31a9-434">For information on configuring custom metrics and their uses, see [this article](service-fabric-cluster-resource-manager-metrics.md)</span></span>

<span data-ttu-id="a31a9-435">Metrische gegevens zijn anders dan plaatsingen beperkingen en eigenschappen van het knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-435">Metrics are different from placements constraints and node properties.</span></span> <span data-ttu-id="a31a9-436">Eigenschappen van het knooppunt zijn statisch descriptors van Hallo knooppunten zelf.</span><span class="sxs-lookup"><span data-stu-id="a31a9-436">Node properties are static descriptors of hello nodes themselves.</span></span> <span data-ttu-id="a31a9-437">Metrische gegevens worden de resources die knooppunten hebben en dat services gebruiken wanneer ze worden uitgevoerd op een knooppunt beschreven.</span><span class="sxs-lookup"><span data-stu-id="a31a9-437">Metrics describe resources that nodes have and that services consume when they are run on a node.</span></span> <span data-ttu-id="a31a9-438">De eigenschap van een knooppunt kan 'HasSSD' en tootrue of ONWAAR kan worden ingesteld.</span><span class="sxs-lookup"><span data-stu-id="a31a9-438">A node property could be "HasSSD" and could be set tootrue or false.</span></span> <span data-ttu-id="a31a9-439">Hallo hoeveelheid beschikbare ruimte op die SSD en hoeveel is verbruikt door services zou een metriek zoals 'DriveSpaceInMb' zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-439">hello amount of space available on that SSD and how much is consumed by services would be a metric like “DriveSpaceInMb”.</span></span> 

<span data-ttu-id="a31a9-440">Het is belangrijk toonote die op dezelfde manier als voor plaatsingsbeperkingen en eigenschappen van het knooppunt Hallo Service Fabric-Cluster Resource Manager biedt geen begrijpen welke Hallo-namen van Hallo metrische gegevens gemiddelde.</span><span class="sxs-lookup"><span data-stu-id="a31a9-440">It is important toonote that just like for placement constraints and node properties, hello Service Fabric Cluster Resource Manager doesn't understand what hello names of hello metrics mean.</span></span> <span data-ttu-id="a31a9-441">De namen van de metrische gegevens zijn alleen tekenreeksen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-441">Metric names are just strings.</span></span> <span data-ttu-id="a31a9-442">Het is een goede gewoonte toodeclare eenheden als onderdeel van de metrische Hallo-namen die u maakt tijdens kan dubbelzinnig zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-442">It is a good practice toodeclare units as a part of hello metric names that you create when it could be ambiguous.</span></span>

## <a name="capacity"></a><span data-ttu-id="a31a9-443">Capaciteit</span><span class="sxs-lookup"><span data-stu-id="a31a9-443">Capacity</span></span>
<span data-ttu-id="a31a9-444">Als u alle resource uitgeschakeld *balancing*, Service-Fabric-Cluster Resource Manager zou nog ervoor te zorgen dat geen knooppunt uiteindelijk via de capaciteit.</span><span class="sxs-lookup"><span data-stu-id="a31a9-444">If you turned off all resource *balancing*, Service Fabric’s Cluster Resource Manager would still ensure that no node ended up over its capacity.</span></span> <span data-ttu-id="a31a9-445">Capaciteit overschrijdingen beheren is mogelijk, tenzij het Hallo-cluster is vol of Hallo werkbelasting is groter dan een willekeurig knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-445">Managing capacity overruns is possible unless hello cluster is too full or hello workload is larger than any node.</span></span> <span data-ttu-id="a31a9-446">Capaciteit is een andere *beperking* die Hallo Cluster Resource Manager gebruikt toounderstand hoeveel van een bron op een knooppunt is.</span><span class="sxs-lookup"><span data-stu-id="a31a9-446">Capacity is another *constraint* that hello Cluster Resource Manager uses toounderstand how much of a resource a node has.</span></span> <span data-ttu-id="a31a9-447">Resterende capaciteit is ook getraceerd voor Hallo cluster als geheel.</span><span class="sxs-lookup"><span data-stu-id="a31a9-447">Remaining capacity is also tracked for hello cluster as a whole.</span></span> <span data-ttu-id="a31a9-448">Zowel Hallo capaciteit en het verbruik van Hallo op Hallo serviceniveau worden uitgedrukt in termen van metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="a31a9-448">Both hello capacity and hello consumption at hello service level are expressed in terms of metrics.</span></span> <span data-ttu-id="a31a9-449">Dus bijvoorbeeld Hallo metriek mogelijk 'ClientConnections' en een bepaald knooppunt heeft misschien een capaciteit voor 'ClientConnections' van 32768.</span><span class="sxs-lookup"><span data-stu-id="a31a9-449">So for example, hello metric might be "ClientConnections" and a given Node may have a capacity for "ClientConnections" of 32768.</span></span> <span data-ttu-id="a31a9-450">Andere knooppunten kunnen andere limieten deel van de service uitgevoerd op knooppunt kunnen zeggen het momenteel verbruikt 32256 van Hallo metriek 'ClientConnections' hebben.</span><span class="sxs-lookup"><span data-stu-id="a31a9-450">Other nodes can have other limits Some service running on that node can say it is currently consuming 32256 of hello metric "ClientConnections".</span></span>

<span data-ttu-id="a31a9-451">Tijdens runtime houdt Hallo Cluster Resource Manager resterende capaciteit in de cluster Hallo en op knooppunten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-451">During runtime, hello Cluster Resource Manager tracks remaining capacity in hello cluster and on nodes.</span></span> <span data-ttu-id="a31a9-452">In de volgorde tootrack aftrekken capaciteit Hallo Cluster Resource Manager elke service informatie over het gebruik van capaciteit van van het knooppunt waarop Hallo-service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a31a9-452">In order tootrack capacity hello Cluster Resource Manager subtracts each service's usage from node's capacity where hello service runs.</span></span> <span data-ttu-id="a31a9-453">Met deze informatie kunt Hallo Service Fabric-Cluster Resource Manager kunt te achterhalen waar tooplace of verplaatsen van replica's zodat de knooppunten niet Bespreek de capaciteit.</span><span class="sxs-lookup"><span data-stu-id="a31a9-453">With this information, hello Service Fabric Cluster Resource Manager can figure out where tooplace or move replicas so that nodes don’t go over capacity.</span></span>

<span data-ttu-id="a31a9-454"><center>
![Clusterknooppunten en capaciteit][Image7]
</center></span><span class="sxs-lookup"><span data-stu-id="a31a9-454"><center>
![Cluster nodes and capacity][Image7]
</center></span></span>

<span data-ttu-id="a31a9-455">C#:</span><span class="sxs-lookup"><span data-stu-id="a31a9-455">C#:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
ServiceLoadMetricDescription metric = new ServiceLoadMetricDescription();
metric.Name = "ClientConnections";
metric.PrimaryDefaultLoad = 1024;
metric.SecondaryDefaultLoad = 0;
metric.Weight = ServiceLoadMetricWeight.High;
serviceDescription.Metrics.Add(metric);
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="a31a9-456">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="a31a9-456">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ClientConnections,High,1024,0)
```

<span data-ttu-id="a31a9-457">Hier ziet u capaciteit die zijn gedefinieerd in het clustermanifest Hallo:</span><span class="sxs-lookup"><span data-stu-id="a31a9-457">You can see capacities defined in hello cluster manifest:</span></span>

<span data-ttu-id="a31a9-458">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="a31a9-458">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType03">
      <Capacities>
        <Capacity Name="ClientConnections" Value="65536"/>
      </Capacities>
    </NodeType>
```

<span data-ttu-id="a31a9-459">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure.</span><span class="sxs-lookup"><span data-stu-id="a31a9-459">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

```json
"nodeTypes": [
    {
        "name": "NodeType03",
        "capacities": {
            "ClientConnections": "65536",
        }
    }
],
```

<span data-ttu-id="a31a9-460">Meestal laden een service wijzigingen dynamisch.</span><span class="sxs-lookup"><span data-stu-id="a31a9-460">Commonly a service’s load changes dynamically.</span></span> <span data-ttu-id="a31a9-461">Stel dat de belasting van een replica van 'ClientConnections' gewijzigd van 1024 too2048, maar Hallo knooppunt werd uitgevoerd op vervolgens alleen had 512 resterende voor deze metriek capaciteit.</span><span class="sxs-lookup"><span data-stu-id="a31a9-461">Say that a replica's load of "ClientConnections" changed from 1024 too2048, but hello node it was running on then only had 512 capacity remaining for that metric.</span></span> <span data-ttu-id="a31a9-462">Nu die replica of de plaatsing van het exemplaar is ongeldig, omdat er niet genoeg ruimte op het knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-462">Now that replica or instance's placement is invalid, since there's not enough room on that node.</span></span> <span data-ttu-id="a31a9-463">Hallo Cluster Resource Manager heeft tookick in en Hallo knooppunt terug hieronder capaciteit ophalen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-463">hello Cluster Resource Manager has tookick in and get hello node back below capacity.</span></span> <span data-ttu-id="a31a9-464">Belasting op het Hallo-knooppunt dat door een of meer van de replica's Hallo of exemplaren van dat knooppunt tooother knooppunten verplaatsen via capaciteit vermindert.</span><span class="sxs-lookup"><span data-stu-id="a31a9-464">It reduces load on hello node that is over capacity by moving one or more of hello replicas or instances from that node tooother nodes.</span></span> <span data-ttu-id="a31a9-465">Bij het verplaatsen van replica's, probeert Hallo Cluster Resource Manager toominimize Hallo kosten van deze stromen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-465">When moving replicas, hello Cluster Resource Manager tries toominimize hello cost of those movements.</span></span> <span data-ttu-id="a31a9-466">Verplaatsingkosten wordt besproken in [in dit artikel](service-fabric-cluster-resource-manager-movement-cost.md) meer over Hallo Cluster Resource Manager strategieën de herverdeling en regels beschreven [hier](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="a31a9-466">Movement cost is discussed in [this article](service-fabric-cluster-resource-manager-movement-cost.md) and more about hello Cluster Resource Manager's rebalancing strategies and rules is described [here](service-fabric-cluster-resource-manager-metrics.md).</span></span>

## <a name="cluster-capacity"></a><span data-ttu-id="a31a9-467">Cluster-capaciteit</span><span class="sxs-lookup"><span data-stu-id="a31a9-467">Cluster capacity</span></span>
<span data-ttu-id="a31a9-468">Hoe hello Service Fabric-Cluster Resource Manager behouden Hallo algehele-cluster van een te volle?</span><span class="sxs-lookup"><span data-stu-id="a31a9-468">So how does hello Service Fabric Cluster Resource Manager keep hello overall cluster from being too full?</span></span> <span data-ttu-id="a31a9-469">Ook met de dynamische belasting bij er veel niet is kunt het doen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-469">Well, with dynamic load there’s not a lot it can do.</span></span> <span data-ttu-id="a31a9-470">Services kunnen hun piek load onafhankelijk van de acties die door Hallo Cluster Resource Manager hebben.</span><span class="sxs-lookup"><span data-stu-id="a31a9-470">Services can have their load spike independently of actions taken by hello Cluster Resource Manager.</span></span> <span data-ttu-id="a31a9-471">Uw cluster met genoeg ruimte vandaag is mogelijk als gevolg hiervan underpowered als u morgen opnieuw stelen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-471">As a result, your cluster with plenty of headroom today may be underpowered when you become famous tomorrow.</span></span> <span data-ttu-id="a31a9-472">Die gezegd, er zijn een aantal besturingselementen die zijn standaard uitbreidbaar tooprevent problemen zijn.</span><span class="sxs-lookup"><span data-stu-id="a31a9-472">That said, there are some controls that are baked in tooprevent problems.</span></span> <span data-ttu-id="a31a9-473">Hallo eerst doen we is voorkomt het maken van nieuwe werkbelastingen waardoor Hallo cluster toobecome volledige Hallo.</span><span class="sxs-lookup"><span data-stu-id="a31a9-473">hello first thing we can do is prevent hello creation of new workloads that would cause hello cluster toobecome full.</span></span>

<span data-ttu-id="a31a9-474">Stel dat u een stateless service maakt en of hieraan sommige load gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="a31a9-474">Say that you create a stateless service and it has some load associated with it.</span></span> <span data-ttu-id="a31a9-475">Stel dat Hallo service Hallo 'DiskSpaceInMb' metriek hecht.</span><span class="sxs-lookup"><span data-stu-id="a31a9-475">Let’s say that hello service cares about hello "DiskSpaceInMb" metric.</span></span> <span data-ttu-id="a31a9-476">Stel nu dat het gaat tooconsume vijf eenheden van 'DiskSpaceInMb' voor elk exemplaar van Hallo-service is.</span><span class="sxs-lookup"><span data-stu-id="a31a9-476">Let's also say that it is going tooconsume five units of "DiskSpaceInMb" for every instance of hello service.</span></span> <span data-ttu-id="a31a9-477">Wilt u toocreate drie exemplaren van Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="a31a9-477">You want toocreate three instances of hello service.</span></span> <span data-ttu-id="a31a9-478">Goed gedaan.</span><span class="sxs-lookup"><span data-stu-id="a31a9-478">Great!</span></span> <span data-ttu-id="a31a9-479">Dat betekent dat we 15 eenheden van toobe 'DiskSpaceInMb' moet aanwezig zijn op Hallo cluster zodat we tooeven worden kunnen toocreate deze service-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="a31a9-479">So that means that we need 15 units of "DiskSpaceInMb" toobe present in hello cluster in order for us tooeven be able toocreate these service instances.</span></span> <span data-ttu-id="a31a9-480">Hallo Cluster Resource Manager berekent voortdurend Hallo capaciteit en het verbruik van elke metriek zodat deze kan Hallo resterende capaciteit in Hallo cluster bepalen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-480">hello Cluster Resource Manager continually calculates hello capacity and consumption of each metric so it can determine hello remaining capacity in hello cluster.</span></span> <span data-ttu-id="a31a9-481">Als er niet voldoende ruimte, Hallo Cluster Resource Manager weigert Hallo service aanroepen van maken.</span><span class="sxs-lookup"><span data-stu-id="a31a9-481">If there isn't enough space, hello Cluster Resource Manager rejects hello create service call.</span></span>

<span data-ttu-id="a31a9-482">Omdat de vereiste Hallo alleen die er 15 eenheden beschikbaar zijn, kan deze ruimte veel verschillende manieren worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="a31a9-482">Since hello requirement is only that there be 15 units available, this space could be allocated many different ways.</span></span> <span data-ttu-id="a31a9-483">Bijvoorbeeld, kan er één resterende eenheid van de capaciteit op 15 verschillende knooppunten of drie resterende eenheden van de capaciteit van vijf verschillende knooppunten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-483">For example, there could be one remaining unit of capacity on 15 different nodes, or three remaining units of capacity on five different nodes.</span></span> <span data-ttu-id="a31a9-484">Als Hallo Cluster Resource Manager dingen rangschikken kunt zodat er vijf eenheden beschikbaar is op drie knooppunten, wordt het Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="a31a9-484">If hello Cluster Resource Manager can rearrange things so there's five units available on three nodes, it places hello service.</span></span> <span data-ttu-id="a31a9-485">Opnieuw ordenen Hallo-cluster is meestal mogelijk tenzij Hallo-cluster bijna vol is of Hallo bestaande services kunnen niet worden gecombineerd om een bepaalde reden.</span><span class="sxs-lookup"><span data-stu-id="a31a9-485">Rearranging hello cluster is usually possible unless hello cluster is almost full or hello existing services can't be consolidated for some reason.</span></span>

## <a name="buffered-capacity"></a><span data-ttu-id="a31a9-486">Buffer capaciteit</span><span class="sxs-lookup"><span data-stu-id="a31a9-486">Buffered Capacity</span></span>
<span data-ttu-id="a31a9-487">De capaciteit van de buffer is een andere functie Hallo Cluster Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a31a9-487">Buffered capacity is another feature of hello Cluster Resource Manager.</span></span> <span data-ttu-id="a31a9-488">Reservering van een gedeelte van Hallo kunt algehele capaciteit van het knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-488">It allows reservation of some portion of hello overall node capacity.</span></span> <span data-ttu-id="a31a9-489">Deze buffer capaciteit is alleen gebruikte tooplace services tijdens upgrades en knooppuntfouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-489">This capacity buffer is only used tooplace services during upgrades and node failures.</span></span> <span data-ttu-id="a31a9-490">De capaciteit van de buffer is globaal opgegeven per metrische gegevens voor alle knooppunten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-490">Buffered Capacity is specified globally per metric for all nodes.</span></span> <span data-ttu-id="a31a9-491">Hallo-waarde die u voor Hallo gereserveerde capaciteit kiest is een functie van Hallo aantal probleem- en Upgrade domeinen hebt u in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="a31a9-491">hello value you pick for hello reserved capacity is a function of hello number of Fault and Upgrade Domains you have in hello cluster.</span></span> <span data-ttu-id="a31a9-492">Meer fouttolerantie en -domeinen upgraden betekent dat u een lager getal kunt kiezen voor de capaciteit van de buffer.</span><span class="sxs-lookup"><span data-stu-id="a31a9-492">More Fault and Upgrade Domains means that you can pick a lower number for your buffered capacity.</span></span> <span data-ttu-id="a31a9-493">Als u meer domeinen hebt, kunt u uw cluster toobe kleinere hoeveelheden niet beschikbaar verwachten tijdens upgrades en fouten.</span><span class="sxs-lookup"><span data-stu-id="a31a9-493">If you have more domains, you can expect smaller amounts of your cluster toobe unavailable during upgrades and failures.</span></span> <span data-ttu-id="a31a9-494">Capaciteit gebufferd geven alleen zinvol als u opgegeven Hallo knooppunt capaciteit voor een metriek hebt.</span><span class="sxs-lookup"><span data-stu-id="a31a9-494">Specifying Buffered Capacity only makes sense if you have also specified hello node capacity for a metric.</span></span>

<span data-ttu-id="a31a9-495">Hier volgt een voorbeeld van hoe toospecify capaciteit gebufferd:</span><span class="sxs-lookup"><span data-stu-id="a31a9-495">Here's an example of how toospecify buffered capacity:</span></span>

<span data-ttu-id="a31a9-496">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="a31a9-496">ClusterManifest.xml</span></span>

```xml
        <Section Name="NodeBufferPercentage">
            <Parameter Name="SomeMetric" Value="0.15" />
            <Parameter Name="SomeOtherMetric" Value="0.20" />
        </Section>
```

<span data-ttu-id="a31a9-497">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure:</span><span class="sxs-lookup"><span data-stu-id="a31a9-497">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "NodeBufferPercentage",
    "parameters": [
      {
          "name": "SomeMetric",
          "value": "0.15"
      },
      {
          "name": "SomeOtherMetric",
          "value": "0.20"
      }
    ]
  }
]
```

<span data-ttu-id="a31a9-498">Hallo maken van nieuwe services mislukt wanneer het Hallo-cluster valt buiten het gebufferde capaciteit voor een metriek.</span><span class="sxs-lookup"><span data-stu-id="a31a9-498">hello creation of new services fails when hello cluster is out of buffered capacity for a metric.</span></span> <span data-ttu-id="a31a9-499">Hallo maken van nieuwe services toopreserve Hallo buffer voorkomen, zorgt u ervoor dat upgrades en fouten geen knooppunten toogo overbelast veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="a31a9-499">Preventing hello creation of new services toopreserve hello buffer ensures that upgrades and failures don’t cause nodes toogo over capacity.</span></span> <span data-ttu-id="a31a9-500">De capaciteit van de buffer is optioneel, maar wordt aanbevolen in een cluster dat een capaciteit voor een metriek definieert.</span><span class="sxs-lookup"><span data-stu-id="a31a9-500">Buffered capacity is optional but is recommended in any cluster that defines a capacity for a metric.</span></span>

<span data-ttu-id="a31a9-501">Hallo Cluster Resource Manager, wordt deze informatie laden.</span><span class="sxs-lookup"><span data-stu-id="a31a9-501">hello Cluster Resource Manager exposes this load information.</span></span> <span data-ttu-id="a31a9-502">Voor elke metriek omvat deze informatie:</span><span class="sxs-lookup"><span data-stu-id="a31a9-502">For each metric, this information includes:</span></span> 
  - <span data-ttu-id="a31a9-503">Hallo gebufferd capaciteitsinstellingen</span><span class="sxs-lookup"><span data-stu-id="a31a9-503">hello buffered capacity settings</span></span>
  - <span data-ttu-id="a31a9-504">Hallo totale capaciteit</span><span class="sxs-lookup"><span data-stu-id="a31a9-504">hello total capacity</span></span>
  - <span data-ttu-id="a31a9-505">Hallo huidige verbruik</span><span class="sxs-lookup"><span data-stu-id="a31a9-505">hello current consumption</span></span>
  - <span data-ttu-id="a31a9-506">Hiermee wordt aangegeven of elke metriek wordt beschouwd als met gelijke taakverdeling of niet</span><span class="sxs-lookup"><span data-stu-id="a31a9-506">whether each metric is considered balanced or not</span></span>
  - <span data-ttu-id="a31a9-507">statistieken over Hallo standaarddeviatie</span><span class="sxs-lookup"><span data-stu-id="a31a9-507">statistics about hello standard deviation</span></span>
  - <span data-ttu-id="a31a9-508">Hallo-knooppunten die Hallo belasting voor de meeste en minimaal hebben</span><span class="sxs-lookup"><span data-stu-id="a31a9-508">hello nodes which have hello most and least load</span></span>  
  
<span data-ttu-id="a31a9-509">Hieronder ziet u een voorbeeld van deze uitvoer:</span><span class="sxs-lookup"><span data-stu-id="a31a9-509">Below we see an example of that output:</span></span>

```posh
PS C:\Users\user> Get-ServiceFabricClusterLoadInformation
LastBalancingStartTimeUtc : 9/1/2016 12:54:59 AM
LastBalancingEndTimeUtc   : 9/1/2016 12:54:59 AM
LoadMetricInformation     :
                            LoadMetricName        : Metric1
                            IsBalancedBefore      : False
                            IsBalancedAfter       : False
                            DeviationBefore       : 0.192450089729875
                            DeviationAfter        : 0.192450089729875
                            BalancingThreshold    : 1
                            Action                : NoActionNeeded
                            ActivityThreshold     : 0
                            ClusterCapacity       : 189
                            ClusterLoad           : 45
                            ClusterRemainingCapacity : 144
                            NodeBufferPercentage  : 10
                            ClusterBufferedCapacity : 170
                            ClusterRemainingBufferedCapacity : 125
                            ClusterCapacityViolation : False
                            MinNodeLoadValue      : 0
                            MinNodeLoadNodeId     : 3ea71e8e01f4b0999b121abcbf27d74d
                            MaxNodeLoadValue      : 15
                            MaxNodeLoadNodeId     : 2cc648b6770be1bc9824fa995d5b68b1
```

## <a name="next-steps"></a><span data-ttu-id="a31a9-510">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a31a9-510">Next steps</span></span>
* <span data-ttu-id="a31a9-511">Bekijk voor informatie over het Hallo-architectuur en de informatiestroom binnen Hallo Cluster Resource Manager, [in dit artikel](service-fabric-cluster-resource-manager-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="a31a9-511">For information on hello architecture and information flow within hello Cluster Resource Manager, check out [this article ](service-fabric-cluster-resource-manager-architecture.md)</span></span>
* <span data-ttu-id="a31a9-512">Defragmentatie metrische gegevens definiëren is eenrichtingssessie tooconsolidate belasting van de knooppunten in plaats van af te spreiden. toolearn hoe tooconfigure defragmentatie, raadpleeg dan te[in dit artikel](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="a31a9-512">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
* <span data-ttu-id="a31a9-513">Vanaf Hallo begin starten en [ophalen van een inleiding toohello Service Fabric-Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="a31a9-513">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
* <span data-ttu-id="a31a9-514">toofind uit over hoe Hallo Cluster Resource Manager beheert en een compromis tussen de werklast van de cluster Hallo, bekijk Hallo artikel op [load balancing](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="a31a9-514">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-domains.png
[Image2]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-uneven-fault-domain-layout.png
[Image3]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domains-with-placement.png
[Image4]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domain-layout-strategies.png
[Image5]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-layout-different-workloads.png
[Image6]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-placement-constraints-node-properties.png
[Image7]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-nodes-and-capacity.png
