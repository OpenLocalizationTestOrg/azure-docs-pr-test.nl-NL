---
title: aaaAdvanced gebruik van Reliable Services | Microsoft Docs
description: Meer informatie over de geavanceerde informatie over het gebruik van de Service Fabric Reliable Services voor extra flexibiliteit in uw services.
services: Service-Fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: masnider
ms.assetid: f2942871-863d-47c3-b14a-7cdad9a742c7
ms.service: Service-Fabric
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: e6d6310a4deae9edcfcd76551e1337f0e39e9e5d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="advanced-usage-of-hello-reliable-services-programming-model"></a><span data-ttu-id="f0028-103">Informatie over het gebruik van Hallo Reliable Services programmeermodel geavanceerde</span><span class="sxs-lookup"><span data-stu-id="f0028-103">Advanced usage of hello Reliable Services programming model</span></span>
<span data-ttu-id="f0028-104">Azure Service Fabric vereenvoudigt schrijven en betrouwbare staatloze en stateful services beheren.</span><span class="sxs-lookup"><span data-stu-id="f0028-104">Azure Service Fabric simplifies writing and managing reliable stateless and stateful services.</span></span> <span data-ttu-id="f0028-105">Deze handleiding wordt gesproken over geavanceerde gebruik van Reliable Services toogain meer controle en flexibiliteit via uw services.</span><span class="sxs-lookup"><span data-stu-id="f0028-105">This guide talks about advanced usages of Reliable Services toogain more control and flexibility over your services.</span></span> <span data-ttu-id="f0028-106">Eerdere tooreading deze handleiding, raken met [Hallo Reliable Services programmeermodel](service-fabric-reliable-services-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="f0028-106">Prior tooreading this guide, familiarize yourself with [hello Reliable Services programming model](service-fabric-reliable-services-introduction.md).</span></span>

<span data-ttu-id="f0028-107">Stateful en staatloze services hebben twee primaire ingangspunten voor gebruikerscode:</span><span class="sxs-lookup"><span data-stu-id="f0028-107">Both stateful and stateless services have two primary entry points for user code:</span></span>

* <span data-ttu-id="f0028-108">`RunAsync(C#) / runAsync(Java)`is een algemene toegangspunt voor uw servicecode.</span><span class="sxs-lookup"><span data-stu-id="f0028-108">`RunAsync(C#) / runAsync(Java)` is a general-purpose entry point for your service code.</span></span>
* <span data-ttu-id="f0028-109">`CreateServiceReplicaListeners(C#)`en `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` is voor het openen van communicatielisteners voor clientaanvragen.</span><span class="sxs-lookup"><span data-stu-id="f0028-109">`CreateServiceReplicaListeners(C#)` and `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` is for opening communication listeners for client requests.</span></span>

<span data-ttu-id="f0028-110">Voor de meeste services zijn deze twee ingangspunten voldoende.</span><span class="sxs-lookup"><span data-stu-id="f0028-110">For most services, these two entry points are sufficient.</span></span> <span data-ttu-id="f0028-111">In zeldzame gevallen wanneer meer controle over de levenscyclus van een service vereist is, de levenscyclus van aanvullende gebeurtenissen zijn beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="f0028-111">In rare cases when more control over a service's lifecycle is required, additional lifecycle events are available.</span></span>

## <a name="stateless-service-instance-lifecycle"></a><span data-ttu-id="f0028-112">Levenscyclus van staatloze service-exemplaar</span><span class="sxs-lookup"><span data-stu-id="f0028-112">Stateless service instance lifecycle</span></span>
<span data-ttu-id="f0028-113">Er is een staatloze service lifecycle zeer eenvoudig.</span><span class="sxs-lookup"><span data-stu-id="f0028-113">A stateless service's lifecycle is very simple.</span></span> <span data-ttu-id="f0028-114">Een stateless service kan alleen worden geopend, gesloten of afgebroken.</span><span class="sxs-lookup"><span data-stu-id="f0028-114">A stateless service can only be opened, closed, or aborted.</span></span> <span data-ttu-id="f0028-115">`RunAsync`in een stateless service wordt uitgevoerd wanneer een service-exemplaar wordt geopend en wanneer een service-exemplaar is gesloten of afgebroken geannuleerd.</span><span class="sxs-lookup"><span data-stu-id="f0028-115">`RunAsync` in a stateless service is executed when a service instance is opened, and canceled when a service instance is closed or aborted.</span></span>

<span data-ttu-id="f0028-116">Hoewel `RunAsync` moet voldoende in bijna alle gevallen Hallo geopend, sluit en gebeurtenissen in een stateless service afbreken zijn ook beschikbaar:</span><span class="sxs-lookup"><span data-stu-id="f0028-116">Although `RunAsync` should be sufficient in almost all cases, hello open, close, and abort events in a stateless service are also available:</span></span>

* <span data-ttu-id="f0028-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java`OnOpenAsync wordt aangeroepen wanneer Hallo staatloze service-exemplaar over toobe gebruikt is.</span><span class="sxs-lookup"><span data-stu-id="f0028-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java` OnOpenAsync is called when hello stateless service instance is about toobe used.</span></span> <span data-ttu-id="f0028-118">Initialisatie van uitgebreide servicetaken kunnen op dit moment worden gestart.</span><span class="sxs-lookup"><span data-stu-id="f0028-118">Extended service initialization tasks can be started at this time.</span></span>
* <span data-ttu-id="f0028-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java`OnCloseAsync wordt aangeroepen wanneer Hallo staatloze service-exemplaar toobe gaat probleemloos afsluiten.</span><span class="sxs-lookup"><span data-stu-id="f0028-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java` OnCloseAsync is called when hello stateless service instance is going toobe gracefully shut down.</span></span> <span data-ttu-id="f0028-120">Dit kan gebeuren wanneer Hallo servicecode wordt bijgewerkt, Hallo service-exemplaar is verplaatst vanwege tooload netwerktaakverdeling of een tijdelijke fout wordt gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="f0028-120">This can occur when hello service's code is being upgraded, hello service instance is being moved due tooload balancing, or a transient fault is detected.</span></span> <span data-ttu-id="f0028-121">OnCloseAsync kunt sluiten gebruikte toosafely worden alle resources, eventuele achtergrondverwerking stoppen, hebt opgeslagen status van externe of bestaande verbindingen afgesloten.</span><span class="sxs-lookup"><span data-stu-id="f0028-121">OnCloseAsync can be used toosafely close any resources, stop any background processing, finish saving external state, or close down existing connections.</span></span>
* <span data-ttu-id="f0028-122">`void OnAbort() - C# / void onAbort() - Java`OnAbort wordt aangeroepen wanneer Hallo staatloze service-exemplaar geforceerd wordt afgesloten.</span><span class="sxs-lookup"><span data-stu-id="f0028-122">`void OnAbort() - C# / void onAbort() - Java` OnAbort is called when hello stateless service instance is being forcefully shut down.</span></span> <span data-ttu-id="f0028-123">Dit wordt doorgaans als een permanente storing wordt gedetecteerd op Hallo-knooppunt, of wanneer het Service Fabric niet betrouwbaar Hallo service-exemplaar van de levenscyclus van vanwege fouten toointernal beheren genoemd.</span><span class="sxs-lookup"><span data-stu-id="f0028-123">This is generally called when a permanent fault is detected on hello node, or when Service Fabric cannot reliably manage hello service instance's lifecycle due toointernal failures.</span></span>

## <a name="stateful-service-replica-lifecycle"></a><span data-ttu-id="f0028-124">Levenscyclus van de replica stateful service</span><span class="sxs-lookup"><span data-stu-id="f0028-124">Stateful service replica lifecycle</span></span>

> [!NOTE]
> <span data-ttu-id="f0028-125">Stateful betrouwbare services worden nog niet ondersteund in Java.</span><span class="sxs-lookup"><span data-stu-id="f0028-125">Stateful reliable services are not supported in Java yet.</span></span>
>
>

<span data-ttu-id="f0028-126">De levenscyclus van een stateful service-replica is veel complexer dan staatloze service-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="f0028-126">A stateful service replica's lifecycle is much more complex than a stateless service instance.</span></span> <span data-ttu-id="f0028-127">Bovendien tooopen, sluiten en afbreken van gebeurtenissen, een stateful service replica rol ondergaat tijdens de levensduur.</span><span class="sxs-lookup"><span data-stu-id="f0028-127">In addition tooopen, close, and abort events, a stateful service replica undergoes role changes during its lifetime.</span></span> <span data-ttu-id="f0028-128">Wanneer een replica stateful service rol wordt gewijzigd, Hallo `OnChangeRoleAsync` gebeurtenis wordt geactiveerd:</span><span class="sxs-lookup"><span data-stu-id="f0028-128">When a stateful service replica changes role, hello `OnChangeRoleAsync` event is triggered:</span></span>

* <span data-ttu-id="f0028-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)`OnChangeRoleAsync wordt aangeroepen wanneer Hallo stateful service replica-rol, bijvoorbeeld tooprimary of secundaire site wordt gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="f0028-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)` OnChangeRoleAsync is called when hello stateful service replica is changing role, for example tooprimary or secondary.</span></span> <span data-ttu-id="f0028-130">Primaire replica's worden vermeld write-status (toocreate zijn toegestaan en tooReliable verzamelingen schrijven).</span><span class="sxs-lookup"><span data-stu-id="f0028-130">Primary replicas are given write status (are allowed toocreate and write tooReliable Collections).</span></span> <span data-ttu-id="f0028-131">Secundaire replica's zijn opgegeven leesstatus (kan alleen worden gelezen van bestaande betrouwbare verzamelingen).</span><span class="sxs-lookup"><span data-stu-id="f0028-131">Secondary replicas are given read status (can only read from existing Reliable Collections).</span></span> <span data-ttu-id="f0028-132">De meeste werk in een stateful service wordt uitgevoerd op de primaire replica Hallo.</span><span class="sxs-lookup"><span data-stu-id="f0028-132">Most work in a stateful service is performed at hello primary replica.</span></span> <span data-ttu-id="f0028-133">Secundaire replica's kunnen uitvoeren voor validatie van alleen-lezen, rapport genereren, gegevensanalyse of andere taken alleen-lezen.</span><span class="sxs-lookup"><span data-stu-id="f0028-133">Secondary replicas can perform read-only validation, report generation, data mining, or other read-only jobs.</span></span>

<span data-ttu-id="f0028-134">In een stateful service alleen Hallo primaire replica heeft schrijftoegang toostate en dus wordt doorgaans wanneer Hallo service echte werk wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f0028-134">In a stateful service, only hello primary replica has write access toostate and thus is generally when hello service is performing actual work.</span></span> <span data-ttu-id="f0028-135">Hallo `RunAsync` methode in een stateful service wordt alleen uitgevoerd wanneer de Hallo stateful service replica primaire is.</span><span class="sxs-lookup"><span data-stu-id="f0028-135">hello `RunAsync` method in a stateful service is executed only when hello stateful service replica is primary.</span></span> <span data-ttu-id="f0028-136">Hallo `RunAsync` methode wordt geannuleerd als een primaire replica rol wijzigingen weg van primaire, evenals tijdens Hallo sluit en gebeurtenissen afbreken.</span><span class="sxs-lookup"><span data-stu-id="f0028-136">hello `RunAsync` method is canceled when a primary replica's role changes away from primary, as well as during hello close and abort events.</span></span>

<span data-ttu-id="f0028-137">Met behulp van Hallo `OnChangeRoleAsync` gebeurtenis kunt u tooperform werk, afhankelijk van de replicarol ook zoals in het antwoord toorole wijzigen.</span><span class="sxs-lookup"><span data-stu-id="f0028-137">Using hello `OnChangeRoleAsync` event allows you tooperform work depending on replica role as well as in response toorole change.</span></span>

<span data-ttu-id="f0028-138">Een stateful service biedt ook Hallo dezelfde vier lifecycle gebeurtenissen als een stateless service gebruiksscenario's Hallo dezelfde heeft:</span><span class="sxs-lookup"><span data-stu-id="f0028-138">A stateful service also provides hello same four lifecycle events as a stateless service, with hello same semantics and use cases:</span></span>

```csharp
* Task OnOpenAsync(IStatefulServicePartition, CancellationToken)
* Task OnCloseAsync(CancellationToken)
* void OnAbort()
```

## <a name="next-steps"></a><span data-ttu-id="f0028-139">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="f0028-139">Next steps</span></span>
<span data-ttu-id="f0028-140">Zie voor meer geavanceerde onderwerpen gerelateerde tooService Fabric, Hallo artikelen te volgen:</span><span class="sxs-lookup"><span data-stu-id="f0028-140">For more advanced topics related tooService Fabric, see hello following articles:</span></span>

* [<span data-ttu-id="f0028-141">Configureren van stateful Reliable Services</span><span class="sxs-lookup"><span data-stu-id="f0028-141">Configuring stateful Reliable Services</span></span>](service-fabric-reliable-services-configuration.md)
* [<span data-ttu-id="f0028-142">Service Fabric health Inleiding</span><span class="sxs-lookup"><span data-stu-id="f0028-142">Service Fabric health introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="f0028-143">Systeemstatusrapporten gebruiken voor het oplossen van problemen</span><span class="sxs-lookup"><span data-stu-id="f0028-143">Using system health reports for troubleshooting</span></span>](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)
* [<span data-ttu-id="f0028-144">Services configureren met Hallo Service Fabric-Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f0028-144">Configuring Services with hello Service Fabric Cluster Resource Manager</span></span>](service-fabric-cluster-resource-manager-configure-services.md)
