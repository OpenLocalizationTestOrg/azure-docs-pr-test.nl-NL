---
title: Analyse van Azure Service Fabric-gebeurtenis met Application Insights | Microsoft Docs
description: Meer informatie over het visualiseren en analyseren van gebeurtenissen met Application Insights voor controle en diagnostische gegevens van Azure Service Fabric-clusters.
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 4085a607b800f4f4f155cdc266bc203b0858fd7c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="7c29a-103">Analyse van gebeurtenis en visualisatie met Application Insights</span><span class="sxs-lookup"><span data-stu-id="7c29a-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="7c29a-104">Azure Application Insights is een uitbreidbaar platform voor bewaking en diagnostische gegevens.</span><span class="sxs-lookup"><span data-stu-id="7c29a-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="7c29a-105">Er staan een krachtige analytics en gegevensquery's hulpprogramma, aanpasbare dashboard en visualisaties en meer opties, waaronder geautomatiseerde waarschuwingen.</span><span class="sxs-lookup"><span data-stu-id="7c29a-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="7c29a-106">Het is het aanbevolen platform voor controle en diagnostische gegevens voor Service Fabric-toepassingen en services.</span><span class="sxs-lookup"><span data-stu-id="7c29a-106">It is the recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="7c29a-107">Application Insights instellen</span><span class="sxs-lookup"><span data-stu-id="7c29a-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="7c29a-108">Maken van een Resource AI</span><span class="sxs-lookup"><span data-stu-id="7c29a-108">Creating an AI Resource</span></span>

<span data-ttu-id="7c29a-109">Maken van een resource AI head over naar de Azure Marketplace en zoek naar 'Application Insights'.</span><span class="sxs-lookup"><span data-stu-id="7c29a-109">To create an AI resource, head over to the Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="7c29a-110">Het moet weergegeven als de eerste oplossing (het zich onder de categorie 'Web + Mobile').</span><span class="sxs-lookup"><span data-stu-id="7c29a-110">It should show up as the first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="7c29a-111">Klik op **maken** wanneer u de juiste resource kijkt (bevestigen dat het pad overeenkomt met de onderstaande afbeelding).</span><span class="sxs-lookup"><span data-stu-id="7c29a-111">Click **Create** when you are looking at the right resource (confirm that your path matches the image below).</span></span>

![Nieuwe Application Insights-resource](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="7c29a-113">U moet om sommige gegevens voor het inrichten van de resource correct in te vullen.</span><span class="sxs-lookup"><span data-stu-id="7c29a-113">You will need to fill out some information to provision the resource correctly.</span></span> <span data-ttu-id="7c29a-114">In de *toepassingstype* veld gebruik 'ASP.NET-webtoepassing' als u van een Service Fabric gebruikmaakt de programming modellen of publiceren een .NET-toepassing aan het cluster.</span><span class="sxs-lookup"><span data-stu-id="7c29a-114">In the *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application to the cluster.</span></span> <span data-ttu-id="7c29a-115">Gebruik 'Algemene' als u Gast uitvoerbare bestanden en containers implementeren wilt.</span><span class="sxs-lookup"><span data-stu-id="7c29a-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="7c29a-116">In het algemeen standaard gebruik van 'ASP.NET-webtoepassing' geopend te houden die uw opties in de toekomst.</span><span class="sxs-lookup"><span data-stu-id="7c29a-116">In general, default to using "ASP.NET web application" to keep your options open in the future.</span></span> <span data-ttu-id="7c29a-117">De naam is tot uw voorkeur en de resourcegroep en de abonnement zijn gewijzigd na de implementatie van de resource.</span><span class="sxs-lookup"><span data-stu-id="7c29a-117">The name is up to your preference, and both the resource group and subscription are changeable post-deployment of the resource.</span></span> <span data-ttu-id="7c29a-118">Het is raadzaam dat uw AI-resource in dezelfde resourcegroep als uw cluster is.</span><span class="sxs-lookup"><span data-stu-id="7c29a-118">We recommend that your AI resource is in the same resource group as your cluster.</span></span> <span data-ttu-id="7c29a-119">Als u meer informatie nodig hebt, raadpleegt u [een Application Insights-resource maken](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="7c29a-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="7c29a-120">U moet de Instrumentatiesleutel AI AI configureren met de gebeurtenis aggregatie-hulpprogramma.</span><span class="sxs-lookup"><span data-stu-id="7c29a-120">You need the AI Instrumentation Key to configure AI with your event aggregation tool.</span></span> <span data-ttu-id="7c29a-121">Zodra uw AI-resource (duurt een paar minuten nadat de implementatie is gevalideerd) is geconfigureerd, Ga naar het en zoek de **eigenschappen** sectie op de linkernavigatiebalk.</span><span class="sxs-lookup"><span data-stu-id="7c29a-121">Once your AI resource is set up (takes a few minutes after the deployment is validated), navigate to it and find the **Properties** section on the left navigation bar.</span></span> <span data-ttu-id="7c29a-122">Een nieuwe blade geopend waarin een *INSTRUMENTATIESLEUTEL*.</span><span class="sxs-lookup"><span data-stu-id="7c29a-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="7c29a-123">Als u wijzigen van het abonnement of resourcegroep van de bron wilt, kan het worden gedaan hier ook.</span><span class="sxs-lookup"><span data-stu-id="7c29a-123">If you need to change the subscription or resource group of the resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="7c29a-124">AI configureren met af</span><span class="sxs-lookup"><span data-stu-id="7c29a-124">Configuring AI with WAD</span></span>

<span data-ttu-id="7c29a-125">Er zijn twee methoden voor het verzenden van gegevens van af naar Azure AI, die wordt bereikt door een sink AI toe te voegen aan de configuratie af, zoals beschreven in [in dit artikel](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="7c29a-125">There are two primary ways to send data from WAD to Azure AI, which is achieved by adding an AI sink to the WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="7c29a-126">Een Instrumentatiesleutel AI toevoegen bij het maken van een cluster in Azure-portal</span><span class="sxs-lookup"><span data-stu-id="7c29a-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Toevoegen van een AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="7c29a-128">Bij het maken van een cluster als Diagnostics 'Op' is ingeschakeld, wordt er een optioneel veld dat u een Application Insights-instrumentatiesleutel wilt weergeven.</span><span class="sxs-lookup"><span data-stu-id="7c29a-128">When creating a cluster, if Diagnostics is turned "On", an optional field to enter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="7c29a-129">Als u uw AI IKey hier plakt, de sink AI automatisch geconfigureerd voor u in de Resource Manager-sjabloon die wordt gebruikt voor het implementeren van uw cluster.</span><span class="sxs-lookup"><span data-stu-id="7c29a-129">If you paste your AI IKey here, the AI sink will be automatically configured for you in the Resource Manager template that is used to deploy your cluster.</span></span>

#### <a name="add-the-ai-sink-to-the-resource-manager-template"></a><span data-ttu-id="7c29a-130">De Sink AI toevoegen aan de Resource Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="7c29a-130">Add the AI Sink to the Resource Manager template</span></span>

<span data-ttu-id="7c29a-131">Voeg in de 'WadCfg' van de Resource Manager-sjabloon, een 'Sink' door de volgende twee wijzigingen, waaronder:</span><span class="sxs-lookup"><span data-stu-id="7c29a-131">In the "WadCfg" of the Resource Manager template, add a "Sink" by including the following two changes:</span></span>

1. <span data-ttu-id="7c29a-132">De configuratie van de sink toevoegen:</span><span class="sxs-lookup"><span data-stu-id="7c29a-132">Add the sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="7c29a-133">De Sink opnemen in de DiagnosticMonitorConfiguration door de volgende regel in 'DiagnosticMonitorConfiguration' van de 'WadCfg' toe te voegen:</span><span class="sxs-lookup"><span data-stu-id="7c29a-133">Include the Sink in the DiagnosticMonitorConfiguration by adding the following line in "DiagnosticMonitorConfiguration" of the "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="7c29a-134">In zowel de codefragmenten hierboven, is de naam 'applicationInsights' gebruikt om te beschrijven de sink.</span><span class="sxs-lookup"><span data-stu-id="7c29a-134">In both the code snippets above, the name "applicationInsights" was used to describe the sink.</span></span> <span data-ttu-id="7c29a-135">Dit is geen vereiste en als de naam van de sink is opgenomen in een 'put', kunt u de naam instellen op een willekeurige tekenreeks.</span><span class="sxs-lookup"><span data-stu-id="7c29a-135">This is not a requirement and as long as the name of the sink is included in "sinks", you can set the name to any string.</span></span>

<span data-ttu-id="7c29a-136">Op dit moment wordt logboeken van het cluster weergegeven als de traceringen in AI van Logboeken.</span><span class="sxs-lookup"><span data-stu-id="7c29a-136">Currently, logs from the cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="7c29a-137">Aangezien de meeste van de traceringen afkomstig is van het platform van niveau 'Ter informatie' zijn, kunt u ook overwegen voor het wijzigen van de configuratie van de sink om alleen de logboeken van het type 'Kritiek' of 'Fout' verzenden.</span><span class="sxs-lookup"><span data-stu-id="7c29a-137">Since most of the traces coming from the platform are of level "Informational", you can also consider changing the sink configuration to only send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="7c29a-138">Dit kan worden gedaan door 'Kanalen' toevoegen aan uw sink, zoals wordt beschreven in [in dit artikel](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="7c29a-138">This can be done by adding "Channels" to your sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="7c29a-139">Als u een onjuiste AI IKey in de portal of in de Resource Manager-sjabloon gebruikt, moet u handmatig de sleutel wijzigen en het cluster bijwerken / opnieuw te implementeren.</span><span class="sxs-lookup"><span data-stu-id="7c29a-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have to manually change the key and update the cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="7c29a-140">AI met EventFlow configureren</span><span class="sxs-lookup"><span data-stu-id="7c29a-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="7c29a-141">Als u EventFlow voor het verzamelen van gegevens gebruikt, controleert u of voor het importeren van de `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet-pakket.</span><span class="sxs-lookup"><span data-stu-id="7c29a-141">If you are using EventFlow to aggregate events, make sure to import the `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="7c29a-142">De volgende moet worden opgenomen in de *levert* sectie van de *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="7c29a-142">The following has to be included in the *outputs* section of the *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace the following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="7c29a-143">Zorg ervoor dat de vereiste wijzigingen aanbrengen in uw filters, evenals alle andere invoer (samen met hun respectieve NuGet-pakketten) bevatten.</span><span class="sxs-lookup"><span data-stu-id="7c29a-143">Make sure to make the required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="7c29a-144">AI. SDK</span><span class="sxs-lookup"><span data-stu-id="7c29a-144">AI.SDK</span></span>

<span data-ttu-id="7c29a-145">Het is raadzaam EventFlow en af te gebruiken als aggregatieoplossingen, omdat ze is toegestaan voor een meer modulaire benadering voor diagnostische gegevens en bewaking, dat wil zeggen dat als u wilt wijzigen van de uitvoer van EventFlow, hiervoor geen wijziging in uw werkelijke instrumentation alleen een eenvoudige wijziging aan het configuratiebestand.</span><span class="sxs-lookup"><span data-stu-id="7c29a-145">It is generally recommended to use EventFlow and WAD as aggregation solutions, because they allow for a more modular approach to diagnostics and monitoring, i.e. if you want to change your outputs from EventFlow, it requires no change to your actual instrumentation, just a simple modification to your config file.</span></span> <span data-ttu-id="7c29a-146">Als u echter besluit te investeren in het gebruik van Application Insights en waarschijnlijk niet wijzigen in een ander platform, moet u zoeken naar met behulp van AI nieuwe SDK voor het aggregeren van gebeurtenissen en ze worden verzonden naar AI.</span><span class="sxs-lookup"><span data-stu-id="7c29a-146">If, however, you decide to invest in using Application Insights and are not likely to change to a different platform, you should look into using AI's new SDK for aggregating events and sending them to AI.</span></span> <span data-ttu-id="7c29a-147">Dit betekent dat u niet langer EventFlow moet voor het verzenden van uw gegevens naar AI configureren, maar in plaats daarvan de ApplicationInsight Service Fabric-NuGet-pakket installeert.</span><span class="sxs-lookup"><span data-stu-id="7c29a-147">This means that you will no longer have to configure EventFlow to send your data to AI, but instead will install the ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="7c29a-148">Meer informatie over het pakket vindt [hier](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="7c29a-148">Details on the package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="7c29a-149">[Application Insights-ondersteuning voor Microservices en Containers](https://azure.microsoft.com/app-insights-microservices/) bevat enkele van de nieuwe functies die wordt gewerkt (momenteel nog steeds in beta), waarmee u uitgebreide controle out-of-the-box-opties met AI hebben.</span><span class="sxs-lookup"><span data-stu-id="7c29a-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of the new features that are being worked on (currently still in beta), which allow you to have richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="7c29a-150">Deze omvatten het bijhouden van afhankelijkheid (gebruikt bij het bouwen van een AppMap van uw services en toepassingen in een cluster en de communicatie tussen deze twee) en betere correlatie van traceringen afkomstig zijn van uw services (helpt u bij het beter dicht een probleem in de werkstroom van een app of service).</span><span class="sxs-lookup"><span data-stu-id="7c29a-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and the communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in the workflow of an app or service).</span></span>

<span data-ttu-id="7c29a-151">Als u in .NET ontwikkelt en waarschijnlijk van Service Fabric programming modellen en wil AI gebruiken als uw platform gebruikmaken zullen voor het visualiseren en analyseren van gebeurtenissen en logboek gegevens zijn, klikt u vervolgens het is raadzaam dat u via de route AI SDK als vorm van controle en diagnos gaat workflow uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="7c29a-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing to use AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via the AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="7c29a-152">Lees [dit](../application-insights/app-insights-asp-net-more.md) en [dit](../application-insights/app-insights-asp-net-trace-logs.md) aan de slag met AI gebruiken om uw logboeken te verzamelen.</span><span class="sxs-lookup"><span data-stu-id="7c29a-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) to get started with using AI to collect and display your logs.</span></span>

## <a name="navigating-the-ai-resource-in-azure-portal"></a><span data-ttu-id="7c29a-153">De resource AI in Azure-portal te navigeren</span><span class="sxs-lookup"><span data-stu-id="7c29a-153">Navigating the AI resource in Azure portal</span></span>

<span data-ttu-id="7c29a-154">Wanneer u AI hebt geconfigureerd als uitvoer voor uw gebeurtenissen en Logboeken, wordt informatie moet eerst worden weergegeven in de AI-bron in een paar minuten.</span><span class="sxs-lookup"><span data-stu-id="7c29a-154">Once you have configured AI as an output for your events and logs, information should start to show up in your AI resource in a few minutes.</span></span> <span data-ttu-id="7c29a-155">Navigeer naar de bron AI, u naar het dashboard AI-resource gaat.</span><span class="sxs-lookup"><span data-stu-id="7c29a-155">Navigate to the AI resource, which will take you to the AI resource dashboard.</span></span> <span data-ttu-id="7c29a-156">Klik op **Search** in de taakbalk AI om te zien van de meest recente traceringen die deze heeft ontvangen en kunnen ze filteren.</span><span class="sxs-lookup"><span data-stu-id="7c29a-156">Click **Search** in the AI taskbar to see the latest traces that it has received, and to be able to filter through them.</span></span>

<span data-ttu-id="7c29a-157">*Metrics Explorer* een handig hulpmiddel voor het maken van aangepaste dashboards die op basis van de metrische gegevens die uw toepassingen, services en cluster kunnen rapporteren.</span><span class="sxs-lookup"><span data-stu-id="7c29a-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="7c29a-158">Zie [verkennen van metrische gegevens in Application Insights](../application-insights/app-insights-metrics-explorer.md) voor het instellen van een paar grafieken voor uzelf op basis van de gegevens die u verzamelt.</span><span class="sxs-lookup"><span data-stu-id="7c29a-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) to set up a few charts for yourself based on the data you are collecting.</span></span>

<span data-ttu-id="7c29a-159">Te klikken op **Analytics** gaat u naar de Application Insights Analytics-portal, waar u kunt een query gebeurtenissen en traceringen met een groter bereik en optionaliteit.</span><span class="sxs-lookup"><span data-stu-id="7c29a-159">Clicking **Analytics** will take you to the Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="7c29a-160">Meer informatie over deze [analyses in Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="7c29a-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7c29a-161">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="7c29a-161">Next steps</span></span>

* <span data-ttu-id="7c29a-162">[Stel waarschuwingen in AI](../application-insights/app-insights-alerts.md) om te worden geïnformeerd over wijzigingen in de prestatie- of -gebruik</span><span class="sxs-lookup"><span data-stu-id="7c29a-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) to be notified about changes in performance or usage</span></span>
* <span data-ttu-id="7c29a-163">[Detectie in Application Insights slimme](../application-insights/app-insights-proactive-diagnostics.md) voert een proactieve analyse van de telemetrie die wordt verzonden naar AI om u te waarschuwen u potentiële prestatieproblemen</span><span class="sxs-lookup"><span data-stu-id="7c29a-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of the telemetry being sent to AI to warn you of potential performance problems</span></span>