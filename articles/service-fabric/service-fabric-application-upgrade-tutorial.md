---
title: Service Fabric-app upgrade-zelfstudie | Microsoft Docs
description: Dit artikel helpt bij de ervaring van een Service Fabric-toepassing implementeren, de code te wijzigen en implementeren van een upgrade met behulp van Visual Studio.
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: a3181a7a-9ab1-4216-b07a-05b79bd826a4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 940440688ec770a4aeb932b574bd6be173f494d4
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade-tutorial-using-visual-studio"></a><span data-ttu-id="b0be6-103">Service Fabric-toepassing upgraden zelfstudie met Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b0be6-103">Service Fabric application upgrade tutorial using Visual Studio</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b0be6-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="b0be6-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="b0be6-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b0be6-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="b0be6-106">Azure Service Fabric vereenvoudigt het proces van updaten van cloud-toepassingen door ervoor te zorgen dat alleen gewijzigde services worden bijgewerkt en dat de toepassingsstatus wordt bewaakt gedurende het upgradeproces.</span><span class="sxs-lookup"><span data-stu-id="b0be6-106">Azure Service Fabric simplifies the process of upgrading cloud applications by ensuring that only changed services are upgraded, and that application health is monitored throughout the upgrade process.</span></span> <span data-ttu-id="b0be6-107">Deze ook automatisch teruggedraaid in de toepassing naar de vorige versie wordt uitgevoerd voor problemen.</span><span class="sxs-lookup"><span data-stu-id="b0be6-107">It also automatically rolls back the application to the previous version upon encountering issues.</span></span> <span data-ttu-id="b0be6-108">Service Fabric-toepassingsupgrades worden *Zero Downtime*, omdat de toepassing kan worden bijgewerkt zonder uitvaltijd.</span><span class="sxs-lookup"><span data-stu-id="b0be6-108">Service Fabric application upgrades are *Zero Downtime*, since the application can be upgraded with no downtime.</span></span> <span data-ttu-id="b0be6-109">Deze zelfstudie bevat informatie over het uitvoeren van een uitrollende upgrade vanuit Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b0be6-109">This tutorial covers how to complete a rolling upgrade from Visual Studio.</span></span>

## <a name="step-1-build-and-publish-the-visual-objects-sample"></a><span data-ttu-id="b0be6-110">Stap 1: Maken en publiceren van de steekproef visuele objecten</span><span class="sxs-lookup"><span data-stu-id="b0be6-110">Step 1: Build and publish the Visual Objects sample</span></span>
<span data-ttu-id="b0be6-111">Download eerst het [visuele objecten](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) toepassing vanuit GitHub.</span><span class="sxs-lookup"><span data-stu-id="b0be6-111">First, download the [Visual Objects](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) application from GitHub.</span></span> <span data-ttu-id="b0be6-112">Vervolgens maken en publiceren van de toepassing door met de rechtermuisknop op het toepassingsproject **VisualObjects**, en het selecteren van de **publiceren** opdracht in het menu-item van het Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="b0be6-112">Then, build and publish the application by right-clicking on the application project, **VisualObjects**, and selecting the **Publish** command in the Service Fabric menu item.</span></span>

![Contextmenu voor een Service Fabric-toepassing][image1]

<span data-ttu-id="b0be6-114">Selecteren **publiceren** opstart, wordt een pop-up en u kunt de **profiel als doel** naar **PublishProfiles\Local.xml**.</span><span class="sxs-lookup"><span data-stu-id="b0be6-114">Selecting **Publish** brings up a popup, and you can set the **Target profile** to **PublishProfiles\Local.xml**.</span></span> <span data-ttu-id="b0be6-115">Het venster moet eruitzien als in het volgende voordat u op **publiceren**.</span><span class="sxs-lookup"><span data-stu-id="b0be6-115">The window should look like the following before you click **Publish**.</span></span>

![Een Service Fabric-toepassing publiceren][image2]

<span data-ttu-id="b0be6-117">Nu kunt u **publiceren** in het dialoogvenster.</span><span class="sxs-lookup"><span data-stu-id="b0be6-117">Now you can click **Publish** in the dialog box.</span></span> <span data-ttu-id="b0be6-118">U kunt [Service Fabric Explorer om het cluster en de toepassing weer te geven](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="b0be6-118">You can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="b0be6-119">De visuele objecten-toepassing heeft een webservice die u naar door te typen gaat [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) in de adresbalk van uw browser.</span><span class="sxs-lookup"><span data-stu-id="b0be6-119">The Visual Objects application has a web service that you can go to by typing [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) in the address bar of your browser.</span></span>  <span data-ttu-id="b0be6-120">Hier ziet u 10 zwevende visual objecten verplaatsen op het scherm.</span><span class="sxs-lookup"><span data-stu-id="b0be6-120">You should see 10 floating visual objects moving around on the screen.</span></span>

<span data-ttu-id="b0be6-121">**Opmerking:** als implementeert voor `Cloud.xml` profiel (Azure Service Fabric) moet beschikbaar zijn op de toepassing vervolgens **http://{ServiceFabricName}. { Region}.cloudapp.Azure.com:8081/visualobjects/**.</span><span class="sxs-lookup"><span data-stu-id="b0be6-121">**NOTE:** If deploying to `Cloud.xml` profile (Azure Service Fabric), the application should then be available at **http://{ServiceFabricName}.{Region}.cloudapp.azure.com:8081/visualobjects/**.</span></span> <span data-ttu-id="b0be6-122">Zorg ervoor dat u hebt `8081/TCP` geconfigureerd in de Load Balancer (zoeken de Load Balancer in dezelfde resourcegroep bevinden als de Service Fabric-instantie).</span><span class="sxs-lookup"><span data-stu-id="b0be6-122">Make sure you do have `8081/TCP` configured in the Load Balancer (find the Load Balancer in the same resource group as the Service Fabric instance).</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="b0be6-123">Stap 2: Het voorbeeld visuele objecten bijwerken</span><span class="sxs-lookup"><span data-stu-id="b0be6-123">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="b0be6-124">U wellicht opgevallen dat door de versie die is geïmplementeerd in stap 1, visuele objecten niet draaien.</span><span class="sxs-lookup"><span data-stu-id="b0be6-124">You might notice that with the version that was deployed in step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="b0be6-125">Deze toepassing op een waar de visuele objecten ook draaien gaat upgraden.</span><span class="sxs-lookup"><span data-stu-id="b0be6-125">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="b0be6-126">Selecteer het project VisualObjects.ActorService binnen de oplossing VisualObjects en open de **VisualObjectActor.cs** bestand.</span><span class="sxs-lookup"><span data-stu-id="b0be6-126">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the **VisualObjectActor.cs** file.</span></span> <span data-ttu-id="b0be6-127">In dat bestand, gaat u naar de methode `MoveObject`, uitcommentariëren `visualObject.Move(false)`, en verwijder het commentaarteken `visualObject.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="b0be6-127">Within that file, go to the method `MoveObject`, comment out `visualObject.Move(false)`, and uncomment `visualObject.Move(true)`.</span></span> <span data-ttu-id="b0be6-128">Deze codewijziging draait de objecten na de upgrade van de service.</span><span class="sxs-lookup"><span data-stu-id="b0be6-128">This code change rotates the objects after the service is upgraded.</span></span>  <span data-ttu-id="b0be6-129">**Nu kunt u (niet opnieuw opbouwen) de oplossing bouwen**, die de gewijzigde projecten bouwt.</span><span class="sxs-lookup"><span data-stu-id="b0be6-129">**Now you can build (not rebuild) the solution**, which builds the modified projects.</span></span> <span data-ttu-id="b0be6-130">Als u selecteert *alles opnieuw opbouwen*, u moet de Updateversies voor alle projecten.</span><span class="sxs-lookup"><span data-stu-id="b0be6-130">If you select *Rebuild all*, you have to update the versions for all the projects.</span></span>

<span data-ttu-id="b0be6-131">Er moet ook versie onze toepassing.</span><span class="sxs-lookup"><span data-stu-id="b0be6-131">We also need to version our application.</span></span> <span data-ttu-id="b0be6-132">Om de versiewijzigingen nadat u met de rechtermuisknop op de **VisualObjects** project, kunt u de Visual Studio **Manifest versies bewerken** optie.</span><span class="sxs-lookup"><span data-stu-id="b0be6-132">To make the version changes after you right-click on the **VisualObjects** project, you can use the Visual Studio **Edit Manifest Versions** option.</span></span> <span data-ttu-id="b0be6-133">Deze optie wordt het dialoogvenster voor versie als volgt:</span><span class="sxs-lookup"><span data-stu-id="b0be6-133">Selecting this option brings up the dialog box for edition versions as follows:</span></span>

![Dialoogvenster versiebeheer][image3]

<span data-ttu-id="b0be6-135">Bijwerken van de versies voor de gewijzigde projecten en hun code-pakketten, samen met de toepassing naar versie 2.0.0.</span><span class="sxs-lookup"><span data-stu-id="b0be6-135">Update the versions for the modified projects and their code packages, along with the application to version 2.0.0.</span></span> <span data-ttu-id="b0be6-136">Nadat de wijzigingen zijn aangebracht, het manifest moet eruitzien als in de volgende (vet gedeelten weergeven van de wijzigingen):</span><span class="sxs-lookup"><span data-stu-id="b0be6-136">After the changes are made, the manifest should look like the following (bold portions show the changes):</span></span>

![Versies bijwerken][image4]

<span data-ttu-id="b0be6-138">De Visual Studio-hulpprogramma's kunnen doen automatische samentellingen van versies bij het selecteren van **automatisch bijwerken van toepassing en Serviceversies**.</span><span class="sxs-lookup"><span data-stu-id="b0be6-138">The Visual Studio tools can do automatic rollups of versions upon selecting **Automatically update application and service versions**.</span></span> <span data-ttu-id="b0be6-139">Als u [SemVer](http://www.semver.org), moet u de code bijwerken en/of configuratie pakket versie alleen als deze optie is geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="b0be6-139">If you use [SemVer](http://www.semver.org), you need to update the code and/or configuration package version alone if that option is selected.</span></span>

<span data-ttu-id="b0be6-140">De wijzigingen opslaan en controleren nu de **Upgrade van de toepassing** vak.</span><span class="sxs-lookup"><span data-stu-id="b0be6-140">Save the changes, and now check the **Upgrade the Application** box.</span></span>

## <a name="step-3--upgrade-your-application"></a><span data-ttu-id="b0be6-141">Stap 3: Uw toepassing bijwerken</span><span class="sxs-lookup"><span data-stu-id="b0be6-141">Step 3:  Upgrade your application</span></span>
<span data-ttu-id="b0be6-142">Vertrouwd raken met de [parameters voor het bijwerken van toepassing](service-fabric-application-upgrade-parameters.md) en de [upgradeproces](service-fabric-application-upgrade.md) ophalen van een goed begrip van de verschillende parameters voor het bijwerken, time-outs en health criterium die kan worden toegepast.</span><span class="sxs-lookup"><span data-stu-id="b0be6-142">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion that can be applied.</span></span> <span data-ttu-id="b0be6-143">Voor dit scenario moet is het criterium service health evaluatie ingesteld op de standaardwaarde (niet-bewaakte modus).</span><span class="sxs-lookup"><span data-stu-id="b0be6-143">For this walkthrough, the service health evaluation criterion is set to the default (unmonitored mode).</span></span> <span data-ttu-id="b0be6-144">U kunt deze instellingen configureren door te selecteren **instellingen configureren voor Upgrade** en vervolgens de parameters naar wens te bewerken.</span><span class="sxs-lookup"><span data-stu-id="b0be6-144">You can configure these settings by selecting **Configure Upgrade Settings** and then modifying the parameters as desired.</span></span>

<span data-ttu-id="b0be6-145">Nu we alle is ingesteld op het begin van de upgrade van de toepassing met het selecteren zijn **publiceren**.</span><span class="sxs-lookup"><span data-stu-id="b0be6-145">Now we are all set to start the application upgrade by selecting **Publish**.</span></span> <span data-ttu-id="b0be6-146">Deze optie voert een upgrade van uw toepassing naar versie 2.0.0, waarin de objecten draaien.</span><span class="sxs-lookup"><span data-stu-id="b0be6-146">This option upgrades your application to version 2.0.0, in which the objects rotate.</span></span> <span data-ttu-id="b0be6-147">Service Fabric upgrades één updatedomein tegelijk (sommige objecten zijn bijgewerkt eerst, gevolgd door anderen) en de service blijft toegankelijk tijdens de upgrade.</span><span class="sxs-lookup"><span data-stu-id="b0be6-147">Service Fabric upgrades one update domain at a time (some objects are updated first, followed by others), and the service remains accessible during the upgrade.</span></span> <span data-ttu-id="b0be6-148">Toegang tot de service kan worden gecontroleerd via de client (browser).</span><span class="sxs-lookup"><span data-stu-id="b0be6-148">Access to the service can be checked through your client (browser).</span></span>  

<span data-ttu-id="b0be6-149">Nu als de upgrade opbrengst toepassing u kunt deze bewaken met Service Fabric Explorer met de **Upgrades uitgevoerd** tabblad onder de toepassingen.</span><span class="sxs-lookup"><span data-stu-id="b0be6-149">Now, as the application upgrade proceeds, you can monitor it with Service Fabric Explorer, by using the **Upgrades in Progress** tab under the applications.</span></span>

<span data-ttu-id="b0be6-150">Alle domeinen van de update moeten worden bijgewerkt (voltooid) in een paar minuten en het Visual Studio-uitvoervenster moet ook zijn dat de upgrade is voltooid.</span><span class="sxs-lookup"><span data-stu-id="b0be6-150">In a few minutes, all update domains should be upgraded (completed), and the Visual Studio output window should also state that the upgrade is completed.</span></span> <span data-ttu-id="b0be6-151">En u ziet dat *alle* nu roteren van de visual objecten in uw browservenster!</span><span class="sxs-lookup"><span data-stu-id="b0be6-151">And you should find that *all* the visual objects in your browser window are now rotating!</span></span>

<span data-ttu-id="b0be6-152">U kunt proberen de versies, wijzigen en verplaatsen van versie 2.0.0 naar versie 3.0.0 wijze van oefening maakt, of zelfs van versie 2.0.0 terug naar versie 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="b0be6-152">You may want to try changing the versions, and moving from version 2.0.0 to version 3.0.0 as an exercise, or even from version 2.0.0 back to version 1.0.0.</span></span> <span data-ttu-id="b0be6-153">Afspelen met time-outs en statusbeleid voor uzelf bekend mee te maken.</span><span class="sxs-lookup"><span data-stu-id="b0be6-153">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="b0be6-154">Wanneer naar een Azure-cluster in plaats van een lokaal cluster implementeert, wordt de gebruikte parameters wellicht afwijken.</span><span class="sxs-lookup"><span data-stu-id="b0be6-154">When deploying to an Azure cluster as opposed to a local cluster, the parameters used may have to differ.</span></span> <span data-ttu-id="b0be6-155">Het is raadzaam dat u de time-outs conservatieve ingesteld.</span><span class="sxs-lookup"><span data-stu-id="b0be6-155">We recommend that you set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b0be6-156">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="b0be6-156">Next steps</span></span>
<span data-ttu-id="b0be6-157">[Bijwerken van uw toepassing met behulp van PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) begeleidt u bij een upgrade van de toepassing met behulp van PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b0be6-157">[Upgrading your application using PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="b0be6-158">Bepalen hoe uw toepassing wordt bijgewerkt met behulp van [parameters upgrade](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="b0be6-158">Control how your application is upgraded by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="b0be6-159">Uw toepassingsupgrades compatibel maken door te leren hoe u [serialisatie van gegevens](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="b0be6-159">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="b0be6-160">Informatie over het gebruik van geavanceerde functionaliteit tijdens het bijwerken van uw toepassing door te verwijzen naar [geavanceerde onderwerpen](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="b0be6-160">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="b0be6-161">Veelvoorkomende problemen oplossen in toepassingsupgrades door te verwijzen naar de stappen in [probleemoplossing toepassingsupgrades](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="b0be6-161">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image1]: media/service-fabric-application-upgrade-tutorial/upgrade7.png
[image2]: media/service-fabric-application-upgrade-tutorial/upgrade1.png
[image3]: media/service-fabric-application-upgrade-tutorial/upgrade5.png
[image4]: media/service-fabric-application-upgrade-tutorial/upgrade6.png
