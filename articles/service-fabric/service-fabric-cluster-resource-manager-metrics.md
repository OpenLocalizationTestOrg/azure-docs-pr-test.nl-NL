---
title: Azure microservice load met metrische gegevens beheren | Microsoft Docs
description: Meer informatie over het configureren en gebruiken van metrische gegevens in Service Fabric service brongebruik te beheren.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 7e020bb6c02c80127e4225ba695017dff9b5a168
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="9ea16-103">Het beheren van het brongebruik en de belasting in Service Fabric met metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9ea16-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="9ea16-104">*Metrische gegevens* zijn de resources die uw services voorzichtig over en die worden geleverd door de knooppunten in het cluster.</span><span class="sxs-lookup"><span data-stu-id="9ea16-104">*Metrics* are the resources that your services care about and which are provided by the nodes in the cluster.</span></span> <span data-ttu-id="9ea16-105">Een metriek is alles wat u wilt beheren om te kunnen verbeteren of de prestaties van uw services controleren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-105">A metric is anything that you want to manage in order to improve or monitor the performance of your services.</span></span> <span data-ttu-id="9ea16-106">U kunt bijvoorbeeld geheugenverbruik als u wilt weten of de service is overbelast bekijken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-106">For example, you might watch memory consumption to know if your service is overloaded.</span></span> <span data-ttu-id="9ea16-107">Er wordt een andere gebruikt om te achterhalen of de service elders waarbij geheugen dat minder beperkt verplaatsen kan is, om betere prestaties wenst.</span><span class="sxs-lookup"><span data-stu-id="9ea16-107">Another use is to figure out whether the service could move elsewhere where memory is less constrained in order to get better performance.</span></span>

<span data-ttu-id="9ea16-108">Items zoals geheugen, schijf- en CPU-gebruik zijn voorbeelden van metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="9ea16-109">Deze metrische gegevens zijn fysieke metrische gegevens en bronnen die overeenkomen met de fysieke resources op het knooppunt dat moet worden beheerd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-109">These metrics are physical metrics, resources that correspond to physical resources on the node that need to be managed.</span></span> <span data-ttu-id="9ea16-110">Metrische gegevens kan ook worden (en meestal zijn) logische metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="9ea16-111">Logische metrische gegevens zijn bijvoorbeeld 'MyWorkQueueDepth' of 'MessagesToProcess' of 'TotalRecords'.</span><span class="sxs-lookup"><span data-stu-id="9ea16-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="9ea16-112">Logische metrische gegevens zijn toepassingsspecifieke en indirect overeen met het verbruik van bepaalde fysieke resource.</span><span class="sxs-lookup"><span data-stu-id="9ea16-112">Logical metrics are application-defined and indirectly correspond to some physical resource consumption.</span></span> <span data-ttu-id="9ea16-113">Logische metrische gegevens zijn algemene omdat het soms moeilijk te meten en in het rapport verbruik van de fysieke resources op basis van de per-service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-113">Logical metrics are common because it can be hard to measure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="9ea16-114">De complexiteit van het meten van en rapportage van uw eigen fysieke metrische gegevens is ook waarom Service Fabric sommige standaard metrische gegevens bevat.</span><span class="sxs-lookup"><span data-stu-id="9ea16-114">The complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="9ea16-115">Standaard metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9ea16-115">Default metrics</span></span>
<span data-ttu-id="9ea16-116">Stel dat u wilt schrijven en implementeren van uw service aan de slag.</span><span class="sxs-lookup"><span data-stu-id="9ea16-116">Let’s say that you want to get started writing and deploying your service.</span></span> <span data-ttu-id="9ea16-117">Op dit moment weet niet welk fysieke of logische resources verbruikt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="9ea16-118">Dat is geen probleem!</span><span class="sxs-lookup"><span data-stu-id="9ea16-118">That’s fine!</span></span> <span data-ttu-id="9ea16-119">De Service Fabric Cluster Resource Manager maakt gebruik van bepaalde standaard metrische gegevens wanneer er geen andere waarden zijn opgegeven.</span><span class="sxs-lookup"><span data-stu-id="9ea16-119">The Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="9ea16-120">Ze zijn:</span><span class="sxs-lookup"><span data-stu-id="9ea16-120">They are:</span></span>

  - <span data-ttu-id="9ea16-121">PrimaryCount - telling van de primaire replica's op het knooppunt</span><span class="sxs-lookup"><span data-stu-id="9ea16-121">PrimaryCount - count of Primary replicas on the node</span></span> 
  - <span data-ttu-id="9ea16-122">ReplicaCount - telling van de totale stateful replica's op het knooppunt</span><span class="sxs-lookup"><span data-stu-id="9ea16-122">ReplicaCount - count of total stateful replicas on the node</span></span>
  - <span data-ttu-id="9ea16-123">Aantal - telling van alle service-objecten (stateless en stateful) op het knooppunt</span><span class="sxs-lookup"><span data-stu-id="9ea16-123">Count - count of all service objects (stateless and stateful) on the node</span></span>

| <span data-ttu-id="9ea16-124">Gegevens</span><span class="sxs-lookup"><span data-stu-id="9ea16-124">Metric</span></span> | <span data-ttu-id="9ea16-125">Staatloze exemplaar laden</span><span class="sxs-lookup"><span data-stu-id="9ea16-125">Stateless Instance Load</span></span> | <span data-ttu-id="9ea16-126">Stateful secundaire laden</span><span class="sxs-lookup"><span data-stu-id="9ea16-126">Stateful Secondary Load</span></span> | <span data-ttu-id="9ea16-127">Stateful primaire laden</span><span class="sxs-lookup"><span data-stu-id="9ea16-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9ea16-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="9ea16-128">PrimaryCount</span></span> |<span data-ttu-id="9ea16-129">0</span><span class="sxs-lookup"><span data-stu-id="9ea16-129">0</span></span> |<span data-ttu-id="9ea16-130">0</span><span class="sxs-lookup"><span data-stu-id="9ea16-130">0</span></span> |<span data-ttu-id="9ea16-131">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-131">1</span></span> |
| <span data-ttu-id="9ea16-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="9ea16-132">ReplicaCount</span></span> |<span data-ttu-id="9ea16-133">0</span><span class="sxs-lookup"><span data-stu-id="9ea16-133">0</span></span> |<span data-ttu-id="9ea16-134">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-134">1</span></span> |<span data-ttu-id="9ea16-135">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-135">1</span></span> |
| <span data-ttu-id="9ea16-136">Count</span><span class="sxs-lookup"><span data-stu-id="9ea16-136">Count</span></span> |<span data-ttu-id="9ea16-137">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-137">1</span></span> |<span data-ttu-id="9ea16-138">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-138">1</span></span> |<span data-ttu-id="9ea16-139">1</span><span class="sxs-lookup"><span data-stu-id="9ea16-139">1</span></span> |

<span data-ttu-id="9ea16-140">Voor algemene werkbelastingen geeft de standaard metrische gegevens een goede verdeling van het werk in het cluster.</span><span class="sxs-lookup"><span data-stu-id="9ea16-140">For basic workloads, the default metrics provide a decent distribution of work in the cluster.</span></span> <span data-ttu-id="9ea16-141">In het volgende voorbeeld gaan we kijken wat er gebeurt als er twee services en zijn afhankelijk van de standaard metrische gegevens voor netwerktaakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9ea16-141">In the following example, let’s see what happens when we create two services and rely on the default metrics for balancing.</span></span> <span data-ttu-id="9ea16-142">De eerste service is een stateful service met drie partities en een grootte van de drie doel replicaset.</span><span class="sxs-lookup"><span data-stu-id="9ea16-142">The first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="9ea16-143">De tweede service is een staatloze service met één partitie en drie exemplaren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-143">The second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="9ea16-144">Dit is wat u krijgt:</span><span class="sxs-lookup"><span data-stu-id="9ea16-144">Here's what you get:</span></span>

<span data-ttu-id="9ea16-145"><center>
![Cluster-indeling met standaard metrische gegevens][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="9ea16-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="9ea16-146">Een aantal zaken te weten:</span><span class="sxs-lookup"><span data-stu-id="9ea16-146">Some things to note:</span></span>
  - <span data-ttu-id="9ea16-147">Primaire replica's voor de stateful service zijn verdeeld over meerdere knooppunten</span><span class="sxs-lookup"><span data-stu-id="9ea16-147">Primary replicas for the stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="9ea16-148">Replica's voor dezelfde partitie worden op verschillende knooppunten</span><span class="sxs-lookup"><span data-stu-id="9ea16-148">Replicas for the same partition are on different nodes</span></span>
  - <span data-ttu-id="9ea16-149">Het totale aantal primaire en secundaire replica's wordt gedistribueerd in het cluster</span><span class="sxs-lookup"><span data-stu-id="9ea16-149">The total number of primaries and secondaries is distributed in the cluster</span></span>
  - <span data-ttu-id="9ea16-150">Het totale aantal serviceobjecten worden gelijkmatig op elk knooppunt toegewezen</span><span class="sxs-lookup"><span data-stu-id="9ea16-150">The total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="9ea16-151">Goede!</span><span class="sxs-lookup"><span data-stu-id="9ea16-151">Good!</span></span>

<span data-ttu-id="9ea16-152">De standaard metrische gegevens werken geweldig als een begin.</span><span class="sxs-lookup"><span data-stu-id="9ea16-152">The default metrics work great as a start.</span></span> <span data-ttu-id="9ea16-153">Echter wordt de metrische gegevens die standaard alleen uitvoeren u tot nu toe.</span><span class="sxs-lookup"><span data-stu-id="9ea16-153">However, the default metrics will only carry you so far.</span></span> <span data-ttu-id="9ea16-154">Bijvoorbeeld: Wat is de kans dat de partitionering schema u resultaten opgenomen in perfect zelfs-gebruik door alle partities?</span><span class="sxs-lookup"><span data-stu-id="9ea16-154">For example: What's the likelihood that the partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="9ea16-155">Wat is de kans dat de belasting voor een bepaalde service constant gedurende een bepaalde periode is, of zelfs dezelfde over meerdere partities nu?</span><span class="sxs-lookup"><span data-stu-id="9ea16-155">What’s the chance that the load for a given service is constant over time, or even just the same across multiple partitions right now?</span></span>

<span data-ttu-id="9ea16-156">U kunt uitvoeren met alleen de standaard metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-156">You could run with just the default metrics.</span></span> <span data-ttu-id="9ea16-157">Dit leidt meestal betekent echter dat het clustergebruik van uw is korter en meer ongelijke dan u wilt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="9ea16-158">Dit komt doordat de metrische gegevens die standaard zijn geen geavanceerde en wordt ervan uitgegaan dat alles is gelijk.</span><span class="sxs-lookup"><span data-stu-id="9ea16-158">This is because the default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="9ea16-159">Bijvoorbeeld: een primaire die bezig is en één die niet beide bijdragen "1" in de metriek PrimaryCount.</span><span class="sxs-lookup"><span data-stu-id="9ea16-159">For example, a Primary that is busy and one that is not both contribute "1" to the PrimaryCount metric.</span></span> <span data-ttu-id="9ea16-160">In het ergste geval kan met alleen de standaard metrische gegevens ook leiden tot overscheduled knooppunten, wat leidt tot prestatieproblemen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-160">In the worst case, using only the default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="9ea16-161">Als u geïnteresseerd bent in het meeste uit uw cluster ophalen en prestatieproblemen te voorkomen, moet u aangepaste metrische gegevens en rapportage van de dynamische belasting bij gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-161">If you're interested in getting the most out of your cluster and avoiding performance issues, you need to use custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="9ea16-162">Aangepaste metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9ea16-162">Custom metrics</span></span>
<span data-ttu-id="9ea16-163">Metrische gegevens zijn geconfigureerd op basis van de per-met de naam-service-exemplaar bij het maken van de service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-163">Metrics are configured on a per-named-service-instance basis when you’re creating the service.</span></span>

<span data-ttu-id="9ea16-164">Een metriek heeft enkele eigenschappen beschrijving van het: een naam, een gewicht en een werklast (standaard).</span><span class="sxs-lookup"><span data-stu-id="9ea16-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="9ea16-165">Metrische naam: De naam van de metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-165">Metric Name: The name of the metric.</span></span> <span data-ttu-id="9ea16-166">De naam van de meetwaarde is de unieke id voor de metriek binnen het cluster uit het perspectief van de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="9ea16-166">The metric name is a unique identifier for the metric within the cluster from the Resource Manager’s perspective.</span></span>
* <span data-ttu-id="9ea16-167">Gewicht: Metrische gewicht definieert hoe belangrijk deze waarde is ten opzichte van de andere metrische gegevens voor deze service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-167">Weight: Metric weight defines how important this metric is relative to the other metrics for this service.</span></span>
* <span data-ttu-id="9ea16-168">Werklast (standaard): De werklast (standaard) is anders, afhankelijk van de service stateless of stateful weergegeven.</span><span class="sxs-lookup"><span data-stu-id="9ea16-168">Default Load: The default load is represented differently depending on whether the service is stateless or stateful.</span></span>
  * <span data-ttu-id="9ea16-169">Voor stateless services heeft elke metriek één eigenschap met de naam DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="9ea16-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="9ea16-170">U definieert voor stateful services:</span><span class="sxs-lookup"><span data-stu-id="9ea16-170">For stateful services you define:</span></span>
    * <span data-ttu-id="9ea16-171">PrimaryDefaultLoad: De standaardhoeveelheid van deze metrische gegevens van deze service verbruikt wanneer het een primaire</span><span class="sxs-lookup"><span data-stu-id="9ea16-171">PrimaryDefaultLoad: The default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="9ea16-172">SecondaryDefaultLoad: De standaardhoeveelheid van deze metrische gegevens van deze service verbruikt wanneer deze een secundair</span><span class="sxs-lookup"><span data-stu-id="9ea16-172">SecondaryDefaultLoad: The default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="9ea16-173">Als u aangepaste metrische gegevens definiëren en u wilt _ook_ gebruiken de standaard metrische gegevens, moet u _expliciet_ de standaard metrische gegevens back- en gewicht en waarden definiëren voor hen toevoegen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-173">If you define custom metrics and you want to _also_ use the default metrics, you need to _explicitly_ add the default metrics back and define weights and values for them.</span></span> <span data-ttu-id="9ea16-174">Dit is omdat moet u de relatie tussen de standaard metrische gegevens en uw aangepaste metrische gegevens definiëren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-174">This is because you must define the relationship between the default metrics and your custom metrics.</span></span> <span data-ttu-id="9ea16-175">Bijvoorbeeld, misschien u het belangrijkst ConnectionCount of WorkQueueDepth meer dan primaire distributie.</span><span class="sxs-lookup"><span data-stu-id="9ea16-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="9ea16-176">Standaard is het gewicht van de metriek PrimaryCount hoog, zodat u beperken op Gemiddeld wilt wanneer u uw andere metrische gegevens om te controleren of dat ze voorrang toevoegt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-176">By default the weight of the PrimaryCount metric is High, so you want to reduce it to Medium when you add your other metrics to ensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="9ea16-177">Metrische gegevens voor uw service - een voorbeeld definiëren</span><span class="sxs-lookup"><span data-stu-id="9ea16-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="9ea16-178">Stel dat u wilt dat de volgende configuratie:</span><span class="sxs-lookup"><span data-stu-id="9ea16-178">Let’s say you want the following configuration:</span></span>

  - <span data-ttu-id="9ea16-179">Een waarde met de naam 'ConnectionCount' uw service-rapporten</span><span class="sxs-lookup"><span data-stu-id="9ea16-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="9ea16-180">Wilt u ook de standaard metrische gegevens gebruiken</span><span class="sxs-lookup"><span data-stu-id="9ea16-180">You also want to use the default metrics</span></span> 
  - <span data-ttu-id="9ea16-181">U hebt gedaan sommige metingen en weten dat een primaire replica van die service gewoonlijk 20 eenheden van 'ConnectionCount duurt'</span><span class="sxs-lookup"><span data-stu-id="9ea16-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="9ea16-182">Secundaire replica's gebruiken "ConnectionCount" 5-eenheden</span><span class="sxs-lookup"><span data-stu-id="9ea16-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="9ea16-183">U weet dat 'ConnectionCount' is de belangrijkste metrische gegevens in termen van de prestaties van deze bepaalde service beheren</span><span class="sxs-lookup"><span data-stu-id="9ea16-183">You know that "ConnectionCount" is the most important metric in terms of managing the performance of this particular service</span></span>
  - <span data-ttu-id="9ea16-184">U wilt nog steeds primaire replica's met gelijke taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9ea16-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="9ea16-185">Taakverdeling van de primaire replica's wordt doorgaans een goed idee ongeacht wat.</span><span class="sxs-lookup"><span data-stu-id="9ea16-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="9ea16-186">Dit helpt voorkomen dat het verlies van een knooppunt of fault-domein die invloed hebben op het grootste deel van de primaire replica's samen met het.</span><span class="sxs-lookup"><span data-stu-id="9ea16-186">This helps prevent the loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="9ea16-187">Anders is de standaard metrische gegevens er mis</span><span class="sxs-lookup"><span data-stu-id="9ea16-187">Otherwise, the default metrics are fine</span></span>

<span data-ttu-id="9ea16-188">Hier volgt de code die u schrijven wilt naar het maken van een service met deze configuratie:</span><span class="sxs-lookup"><span data-stu-id="9ea16-188">Here’s the code that you would write to create a service with that metric configuration:</span></span>

<span data-ttu-id="9ea16-189">Code:</span><span class="sxs-lookup"><span data-stu-id="9ea16-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="9ea16-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9ea16-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="9ea16-191">De bovenstaande voorbeelden en de rest van dit document worden beschreven van het beheren van metrische gegevens op basis van de per-met de naam-service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-191">The above examples and the rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="9ea16-192">Het is ook mogelijk om te definiëren van metrische gegevens voor uw services op de service _type_ niveau.</span><span class="sxs-lookup"><span data-stu-id="9ea16-192">It is also possible to define metrics for your services at the service _type_ level.</span></span> <span data-ttu-id="9ea16-193">Dit wordt bereikt door op te geven ze in de manifesten voor uw service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="9ea16-194">Type niveau metrische gegevens definiëren wordt niet aanbevolen om verschillende redenen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="9ea16-195">De eerste reden is dat de namen van de metrische vaak omgevingspecifiek zijn.</span><span class="sxs-lookup"><span data-stu-id="9ea16-195">The first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="9ea16-196">Tenzij er een vast contract aanwezig is, mag u niet zeker dat de metriek 'Kernen' in een omgeving geen 'MiliCores' of 'Kernen' in andere gevallen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-196">Unless there is a firm contract in place, you cannot be sure that the metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="9ea16-197">Als uw metrische gegevens zijn gedefinieerd in uw manifest moet u nieuwe manifesten per omgeving maken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-197">If your metrics are defined in your manifest you need to create new manifests per environment.</span></span> <span data-ttu-id="9ea16-198">Dit leidt meestal tot een verspreiding van verschillende manifesten met slechts kleine verschillen, wat tot problemen bij het beheer leiden kunnen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-198">This usually leads to a proliferation of different manifests with only minor differences, which can lead to management difficulties.</span></span>  
>
> <span data-ttu-id="9ea16-199">Metrische belasting zijn vaak op basis van de per-met de naam-service-exemplaar toegewezen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="9ea16-200">Stel dat u één exemplaar van de service voor CustomerA die alleen licht gebruik wil maken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-200">For example, let's say you create one instance of the service for CustomerA who plans to use it only lightly.</span></span> <span data-ttu-id="9ea16-201">Stel ook dat u een andere maken voor CustomerB die een grotere werkbelasting heeft.</span><span class="sxs-lookup"><span data-stu-id="9ea16-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="9ea16-202">In dit geval wilt u waarschijnlijk aanpassen van de belasting van de standaardwaarde voor deze services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-202">In this case, you'd probably want to tweak the default loads for those services.</span></span> <span data-ttu-id="9ea16-203">Als u metrische gegevens laadt gedefinieerd via manifesten en u wilt ondersteunen in dit scenario, vereist deze verschillende groepen van toepassingen en servicetypen voor elke klant.</span><span class="sxs-lookup"><span data-stu-id="9ea16-203">If you have metrics and loads defined via manifests and you want to support this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="9ea16-204">De waarden die worden gedefinieerd tijdens het maken van een service overschrijven die zijn gedefinieerd in het manifest, zodat u die voor de specifieke standaardinstellingen kan gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-204">The values defined at service creation time override those defined in the manifest, so you could use that to set the specific defaults.</span></span> <span data-ttu-id="9ea16-205">Echter dat zorgt ervoor dat de waarden in de manifesten die niet overeenkomen met die de service daadwerkelijk wordt uitgevoerd met gedeclareerd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-205">However, doing that causes the values declared in the manifests to not match those the service actually runs with.</span></span> <span data-ttu-id="9ea16-206">Dit kan leiden tot verwarring.</span><span class="sxs-lookup"><span data-stu-id="9ea16-206">This can lead to confusion.</span></span> 
>

<span data-ttu-id="9ea16-207">Als een herinnering: als u alleen gebruiken de standaard metrische gegevens wilt, moet u niet de verzameling metrische gegevens op alle touch of iets speciale doen bij het maken van uw service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-207">As a reminder: if you just want to use the default metrics, you don’t need to touch the metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="9ea16-208">De standaard metrische gegevens ophalen automatisch gebruikt wanneer er geen andere worden bepaald.</span><span class="sxs-lookup"><span data-stu-id="9ea16-208">The default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="9ea16-209">Nu gaan we door elk van deze instellingen in meer detail en hebben over het gedrag op dat dit van invloed is.</span><span class="sxs-lookup"><span data-stu-id="9ea16-209">Now, let's go through each of these settings in more detail and talk about the behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="9ea16-210">Belasting</span><span class="sxs-lookup"><span data-stu-id="9ea16-210">Load</span></span>
<span data-ttu-id="9ea16-211">De hele punt voor het definiëren van metrische gegevens is om aan te duiden sommige laden.</span><span class="sxs-lookup"><span data-stu-id="9ea16-211">The whole point of defining metrics is to represent some load.</span></span> <span data-ttu-id="9ea16-212">*Load* hoeveel van een metriek is verbruikt door sommige service-exemplaar of de replica op een bepaald knooppunt is.</span><span class="sxs-lookup"><span data-stu-id="9ea16-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="9ea16-213">Belasting kan worden geconfigureerd op bijna elk gewenst moment.</span><span class="sxs-lookup"><span data-stu-id="9ea16-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="9ea16-214">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="9ea16-214">For example:</span></span>

  - <span data-ttu-id="9ea16-215">Laden kan worden gedefinieerd als een service wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="9ea16-216">Dit heet _standaard load_.</span><span class="sxs-lookup"><span data-stu-id="9ea16-216">This is called _default load_.</span></span>
  - <span data-ttu-id="9ea16-217">De metrische gegevens, met inbegrip van de standaardwaarde is geladen voor een service kunt bijgewerkt nadat de service is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-217">The metric information, including default loads, for a service can updated after the service is created.</span></span> <span data-ttu-id="9ea16-218">Dit heet _een service bijwerken_.</span><span class="sxs-lookup"><span data-stu-id="9ea16-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="9ea16-219">De belasting voor een bepaalde partitie kunnen worden hersteld op de standaardwaarden voor de service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-219">The loads for a given partition can be reset to the default values for that service.</span></span> <span data-ttu-id="9ea16-220">Dit heet _opnieuw instellen van belasting van partitie_.</span><span class="sxs-lookup"><span data-stu-id="9ea16-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="9ea16-221">Load worden gerapporteerd op een per per service object dynamisch tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="9ea16-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="9ea16-222">Dit heet _reporting load_.</span><span class="sxs-lookup"><span data-stu-id="9ea16-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="9ea16-223">Alle deze strategieën kan worden gebruikt binnen dezelfde service tijdens zijn levensduur.</span><span class="sxs-lookup"><span data-stu-id="9ea16-223">All of these strategies can be used within the same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="9ea16-224">Werklast (standaard)</span><span class="sxs-lookup"><span data-stu-id="9ea16-224">Default load</span></span>
<span data-ttu-id="9ea16-225">*Standaard load* is hoeveel van de metrische gegevens elk serviceobject (stateless exemplaar of stateful replica) van deze service verbruikt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-225">*Default load* is how much of the metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="9ea16-226">De Cluster Resource Manager gebruikt dit nummer voor het laden van het service-object totdat het andere informatie, zoals een rapport van de dynamische belasting bij ontvangt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-226">The Cluster Resource Manager uses this number for the load of the service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="9ea16-227">Voor eenvoudiger services is de belasting van de standaard een statische definitie.</span><span class="sxs-lookup"><span data-stu-id="9ea16-227">For simpler services, the default load is a static definition.</span></span> <span data-ttu-id="9ea16-228">De belasting van de standaard nooit is bijgewerkt en wordt gebruikt voor de levensduur van de service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-228">The default load is never updated and is used for the lifetime of the service.</span></span> <span data-ttu-id="9ea16-229">Standaard wordt geladen works ideaal voor eenvoudige scenario's waarbij bepaalde hoeveelheden resources zijn toegewezen aan verschillende werkbelastingen en niet wijzigen voor capaciteitsplanning.</span><span class="sxs-lookup"><span data-stu-id="9ea16-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated to different workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="9ea16-230">Zie voor meer informatie over het capaciteitsbeheer en capaciteit voor de knooppunten in het cluster te definiëren, [in dit artikel](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="9ea16-230">For more information on capacity management and defining capacities for the nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="9ea16-231">De Cluster Resource Manager kunt stateful services om op te geven van een andere standaard belasting voor hun primaire en secundaire replica's.</span><span class="sxs-lookup"><span data-stu-id="9ea16-231">The Cluster Resource Manager allows stateful services to specify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="9ea16-232">Stateless services kunnen alleen een waarde opgeven die van toepassing op alle exemplaren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-232">Stateless services can only specify one value that applies to all instances.</span></span> <span data-ttu-id="9ea16-233">Voor stateful services, de standaard werkbelasting voor de primaire en secundaire verschillen replica's meestal omdat de replica's kunnen verschillende soorten werk in elke rol.</span><span class="sxs-lookup"><span data-stu-id="9ea16-233">For stateful services, the default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="9ea16-234">Bijvoorbeeld: primaire meestal fungeren lees- en schrijfbewerkingen en verwerken van de meeste van de rekenkundige last en secundaire replica's niet.</span><span class="sxs-lookup"><span data-stu-id="9ea16-234">For example, Primaries usually serve both reads and writes, and handle most of the computational burden, while secondaries do not.</span></span> <span data-ttu-id="9ea16-235">Meestal is de werklast (standaard) voor een primaire replica hoger dan de standaard belasting voor de secundaire replica's.</span><span class="sxs-lookup"><span data-stu-id="9ea16-235">Usually the default load for a primary replica is higher than the default load for secondary replicas.</span></span> <span data-ttu-id="9ea16-236">De reële getallen moet afhankelijk van uw eigen metingen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-236">The real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="9ea16-237">Dynamische belasting bij</span><span class="sxs-lookup"><span data-stu-id="9ea16-237">Dynamic load</span></span>
<span data-ttu-id="9ea16-238">Stel dat u uw service een tijdje hebt actief.</span><span class="sxs-lookup"><span data-stu-id="9ea16-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="9ea16-239">U hebt die opgemerkt met sommige bewaking:</span><span class="sxs-lookup"><span data-stu-id="9ea16-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="9ea16-240">Sommige partities of verschillende exemplaren van een bepaalde service meer bronnen dan andere gebruiken</span><span class="sxs-lookup"><span data-stu-id="9ea16-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="9ea16-241">Sommige services een belasting die gedurende een bepaalde periode varieert.</span><span class="sxs-lookup"><span data-stu-id="9ea16-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="9ea16-242">Er is een groot aantal dingen die dergelijke fluctuaties load kunnen veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="9ea16-243">Bijvoorbeeld, zijn verschillende services of partities gekoppeld aan verschillende klanten met verschillende vereisten.</span><span class="sxs-lookup"><span data-stu-id="9ea16-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="9ea16-244">Load kan ook wijzigen, omdat de hoeveelheid werk die de service beschikt in de loop van de dag varieert.</span><span class="sxs-lookup"><span data-stu-id="9ea16-244">Load could also change because the amount of work the service does varies over the course of the day.</span></span> <span data-ttu-id="9ea16-245">Ongeacht de reden is er meestal geen enkel getal die u voor standaard gebruiken kunt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-245">Regardless of the reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="9ea16-246">Dit geldt vooral als u wilt ophalen van het gebruik van de meeste buiten het cluster.</span><span class="sxs-lookup"><span data-stu-id="9ea16-246">This is especially true if you want to get the most utilization out of the cluster.</span></span> <span data-ttu-id="9ea16-247">Een waarde die u voor de werklast (standaard kiest) is onjuist enkele van de tijd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-247">Any value you pick for default load is wrong some of the time.</span></span> <span data-ttu-id="9ea16-248">Onjuiste standaardinstellingen laadt resultaat in het Cluster Resource Manager boven of onder het toewijzen van resources.</span><span class="sxs-lookup"><span data-stu-id="9ea16-248">Incorrect default loads result in the Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="9ea16-249">Als gevolg hiervan hebt u knooppunten die boven of onder benut worden ondanks dat de Cluster Resource Manager denkt dat het cluster wordt verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9ea16-249">As a result, you have nodes that are over or under utilized even though the Cluster Resource Manager thinks the cluster is balanced.</span></span> <span data-ttu-id="9ea16-250">Standaard laadt zijn nog steeds goed, omdat ze bepaalde informatie voor de eerste positie bieden, maar ze nog niet voltooid verhaal voor echte werkbelastingen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="9ea16-251">Om vast te leggen nauwkeurig veranderende resourcevereisten, kan de Cluster Resource Manager elk serviceobject een eigen load bijwerken tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="9ea16-251">To accurately capture changing resource requirements, the Cluster Resource Manager allows each service object to update its own load during runtime.</span></span> <span data-ttu-id="9ea16-252">Dit de dynamische belasting bij reporting wordt genoemd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="9ea16-253">Rapporten van de dynamische belasting bij toestaan replica's of exemplaren om aan te passen van hun toewijzing/gerapporteerd belasting van metrische gegevens gedurende hun levensduur.</span><span class="sxs-lookup"><span data-stu-id="9ea16-253">Dynamic load reports allow replicas or instances to adjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="9ea16-254">Meestal rapporteren dat het lage hoeveelheden een metriek is geïnstalleerd via een replica van de service of het exemplaar dat koude en niet doen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="9ea16-255">Een bezet replica of instance rapporteren dat ze meer gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="9ea16-256">Reporting load per replica of het exemplaar, kunt de Cluster Resource Manager opnieuw indelen van de afzonderlijke service-objecten in het cluster.</span><span class="sxs-lookup"><span data-stu-id="9ea16-256">Reporting load per replica or instance allows the Cluster Resource Manager to reorganize the individual service objects in the cluster.</span></span> <span data-ttu-id="9ea16-257">Opnieuw indelen van de services, kunt ervoor zorgen dat ze de resources die ze nodig hebben.</span><span class="sxs-lookup"><span data-stu-id="9ea16-257">Reorganizing the services helps ensure that they get the resources they require.</span></span> <span data-ttu-id="9ea16-258">Bezet services ophalen effectief ' vrijmaken ' bronnen van andere replica's of exemplaren die momenteel koude of minder werk te doen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-258">Busy services effectively get to "reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="9ea16-259">Binnen Reliable Services is de code voor het rapporteren over de belasting dynamisch ziet er als volgt:</span><span class="sxs-lookup"><span data-stu-id="9ea16-259">Within Reliable Services, the code to report load dynamically looks like this:</span></span>

<span data-ttu-id="9ea16-260">Code:</span><span class="sxs-lookup"><span data-stu-id="9ea16-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="9ea16-261">Een service kan rapporteren dat op een van de metrische gegevens gedefinieerd tijdens het maken.</span><span class="sxs-lookup"><span data-stu-id="9ea16-261">A service can report on any of the metrics defined for it at creation time.</span></span> <span data-ttu-id="9ea16-262">Als een service-rapporten belasting voor een waarde die niet is geconfigureerd voor gebruik, negeert Service Fabric die rapporteren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-262">If a service reports load for a metric that it is not configured to use, Service Fabric ignores that report.</span></span> <span data-ttu-id="9ea16-263">Als er andere metrische gegevens op hetzelfde moment gerapporteerd die geldig zijn, worden deze rapporten worden geaccepteerd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-263">If there are other metrics reported at the same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="9ea16-264">Service-code kunt meten en rapporteren van alle metrische gegevens die deze procedures, en de configuratie te gebruiken zonder dat de code wijzigen door operators kunnen opgeven.</span><span class="sxs-lookup"><span data-stu-id="9ea16-264">Service code can measure and report all the metrics it knows how to, and operators can specify the metric configuration to use without having to change the service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="9ea16-265">Configuratie van een service bijwerken</span><span class="sxs-lookup"><span data-stu-id="9ea16-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="9ea16-266">De lijst met metrische gegevens die zijn gekoppeld aan de service en de eigenschappen van deze metrische gegevens kunnen dynamisch worden bijgewerkt terwijl de service live wordt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-266">The list of metrics associated with the service, and the properties of those metrics can be updated dynamically while the service is live.</span></span> <span data-ttu-id="9ea16-267">Hiermee om te experimenteren en flexibiliteit.</span><span class="sxs-lookup"><span data-stu-id="9ea16-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="9ea16-268">Enkele voorbeelden van wanneer dit handig is zijn:</span><span class="sxs-lookup"><span data-stu-id="9ea16-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="9ea16-269">een metriek met een buggy rapport voor een bepaalde service uitschakelen</span><span class="sxs-lookup"><span data-stu-id="9ea16-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="9ea16-270">het gewicht van de metrische gegevens op basis van het gewenste gedrag opnieuw configureren</span><span class="sxs-lookup"><span data-stu-id="9ea16-270">reconfiguring the weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="9ea16-271">inschakelen van een nieuwe waarde pas nadat de code al is geïmplementeerd en gevalideerd via andere methoden</span><span class="sxs-lookup"><span data-stu-id="9ea16-271">enabling a new metric only after the code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="9ea16-272">het wijzigen van de belasting van de standaardwaarde voor een service op basis van waargenomen gedrag en het verbruik</span><span class="sxs-lookup"><span data-stu-id="9ea16-272">changing the default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="9ea16-273">De belangrijkste API's voor het wijzigen van de configuratie zijn `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# en `Update-ServiceFabricService` in PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9ea16-273">The main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="9ea16-274">Welke informatie u met deze API's opgeeft vervangt de bestaande metrische gegevens voor de service onmiddellijk.</span><span class="sxs-lookup"><span data-stu-id="9ea16-274">Whatever information you specify with these APIs replaces the existing metric information for the service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="9ea16-275">De combinatie van waarden van standaard load en rapporten van de dynamische belasting bij</span><span class="sxs-lookup"><span data-stu-id="9ea16-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="9ea16-276">Standaard-belasting en de dynamische belasting kunnen worden gebruikt voor dezelfde service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-276">Default load and dynamic loads can be used for the same service.</span></span> <span data-ttu-id="9ea16-277">Wanneer een service maakt gebruik van zowel de werklast (standaard) en de dynamische belasting bij rapporten, wordt standaard load fungeert als een schatting totdat u dynamische rapporten worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="9ea16-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="9ea16-278">Standaard load is goed, omdat dit de Cluster Resource Manager iets biedt werken met.</span><span class="sxs-lookup"><span data-stu-id="9ea16-278">Default load is good because it gives the Cluster Resource Manager something to work with.</span></span> <span data-ttu-id="9ea16-279">De werklast (standaard) kunt de Cluster Resource Manager-service-objecten in goede locaties plaatsen wanneer ze worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-279">The default load allows the Cluster Resource Manager to place the service objects in good locations when they are created.</span></span> <span data-ttu-id="9ea16-280">Als er geen standaard-informatie laden is opgegeven, wordt een effectief willekeurige plaatsing van services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="9ea16-281">Als load rapporten later binnenkomen de initiële willekeurige plaatsing is vaak verkeerde en de Cluster Resource Manager te verplaatsen van services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-281">When load reports arrive later the initial random placement is often wrong and the Cluster Resource Manager has to move services.</span></span>

<span data-ttu-id="9ea16-282">We nemen van het vorige voorbeeld en zien wat er gebeurt wanneer we enkele aangepaste metrische gegevens en de dynamische belasting bij reporting toevoegt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="9ea16-283">In dit voorbeeld gebruiken we 'MemoryInMb' als een voorbeeld van de meting.</span><span class="sxs-lookup"><span data-stu-id="9ea16-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="9ea16-284">Geheugen is een van de system metrische gegevens die Service Fabric kunt [resource reguleren](service-fabric-resource-governance.md), en uzelf reporting is doorgaans moeilijk.</span><span class="sxs-lookup"><span data-stu-id="9ea16-284">Memory is one of the system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="9ea16-285">We niet daadwerkelijk verwacht dat u voor het rapporteren van geheugenverbruik; Geheugen wordt gebruikt als hulp bij het leren over de mogelijkheden van het Cluster Resource Manager hier.</span><span class="sxs-lookup"><span data-stu-id="9ea16-285">We don't actually expect you to report on Memory consumption; Memory is used here as an aid to learning about the capabilities of the Cluster Resource Manager.</span></span>
>

<span data-ttu-id="9ea16-286">We gaan ervan uit dat we in eerste instantie de stateful service met de volgende opdracht gemaakt:</span><span class="sxs-lookup"><span data-stu-id="9ea16-286">Let’s presume that we initially created the stateful service with the following command:</span></span>

<span data-ttu-id="9ea16-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9ea16-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="9ea16-288">Deze syntaxis is als een herinnering (MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad').</span><span class="sxs-lookup"><span data-stu-id="9ea16-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="9ea16-289">Kijken wat een mogelijke cluster indeling kan er als volgt uitzien:</span><span class="sxs-lookup"><span data-stu-id="9ea16-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="9ea16-290"><center>
![Cluster Gebalanceerd met zowel standaard als aangepaste metrische gegevens][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="9ea16-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="9ea16-291">Een aantal zaken die opgemerkt zijn:</span><span class="sxs-lookup"><span data-stu-id="9ea16-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="9ea16-292">Secundaire replica's binnen een partitie kunnen hebben hun eigen laden</span><span class="sxs-lookup"><span data-stu-id="9ea16-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="9ea16-293">De metrische gegevens, zoek de algemene taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9ea16-293">Overall the metrics look balanced.</span></span> <span data-ttu-id="9ea16-294">Voor geheugen, is de verhouding tussen de maximale en minimale belasting 1,75 (het knooppunt met de meeste load N3, is de minst is N2 en 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="9ea16-294">For Memory, the ratio between the maximum and minimum load is 1.75 (the node with the most load is N3, the least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="9ea16-295">Er zijn een aantal zaken die we nog steeds nodig om uit te leggen:</span><span class="sxs-lookup"><span data-stu-id="9ea16-295">There are some things that we still need to explain:</span></span>

* <span data-ttu-id="9ea16-296">Wat bepaald of een ratio van 1,75 redelijke of niet is?</span><span class="sxs-lookup"><span data-stu-id="9ea16-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="9ea16-297">Hoe weet de Cluster Resource Manager als die voldoende is of als er meer werk te doen?</span><span class="sxs-lookup"><span data-stu-id="9ea16-297">How does the Cluster Resource Manager know if that’s good enough or if there is more work to do?</span></span>
* <span data-ttu-id="9ea16-298">Wanneer balancing treedt?</span><span class="sxs-lookup"><span data-stu-id="9ea16-298">When does balancing happen?</span></span>
* <span data-ttu-id="9ea16-299">Wat betekent dit dat geheugen 'Hoog' werd gewogen?</span><span class="sxs-lookup"><span data-stu-id="9ea16-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="9ea16-300">Metrische gewichten</span><span class="sxs-lookup"><span data-stu-id="9ea16-300">Metric weights</span></span>
<span data-ttu-id="9ea16-301">Dezelfde metrische gegevens bijhouden over verschillende services is belangrijk.</span><span class="sxs-lookup"><span data-stu-id="9ea16-301">Tracking the same metrics across different services is important.</span></span> <span data-ttu-id="9ea16-302">Globale weergave is wat de Cluster Resource Manager verbruik in het cluster volgen en zorg ervoor dat de knooppunten niet gaan over de capaciteit verbruik op alle knooppunten in balans is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="9ea16-302">That global view is what allows the Cluster Resource Manager to track consumption in the cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="9ea16-303">Services hebben echter verschillende weergaven over het belang van de dezelfde metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-303">However, services may have different views as to the importance of the same metric.</span></span> <span data-ttu-id="9ea16-304">Ook in een cluster met veel metrische gegevens en partijen van services, perfect taakverdeling oplossingen bestaat mogelijk niet voor alle metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9ea16-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="9ea16-305">Hoe moet de Cluster Resource Manager in deze situaties verwerken?</span><span class="sxs-lookup"><span data-stu-id="9ea16-305">How should the Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="9ea16-306">Metrische gewichten toestaan dat de Cluster Resource Manager om te bepalen hoe u het cluster kan worden verdeeld wanneer er niet perfect opgenomen wordt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-306">Metric weights allow the Cluster Resource Manager to decide how to balance the cluster when there’s no perfect answer.</span></span> <span data-ttu-id="9ea16-307">Metrische gewicht dat de Cluster Resource Manager voor een evenwichtige specifieke services anders.</span><span class="sxs-lookup"><span data-stu-id="9ea16-307">Metric weights also allow the Cluster Resource Manager to balance specific services differently.</span></span> <span data-ttu-id="9ea16-308">Metrische gegevens kunt laten vier verschillende gewicht niveaus: nul, laag, gemiddeld en hoog.</span><span class="sxs-lookup"><span data-stu-id="9ea16-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="9ea16-309">Een metriek met een gewicht van nul bijdraagt niets wanneer u overweegt of dingen of niet evenwicht zijn.</span><span class="sxs-lookup"><span data-stu-id="9ea16-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="9ea16-310">De belasting echter nog steeds dragen bij aan capaciteit management.</span><span class="sxs-lookup"><span data-stu-id="9ea16-310">However, its load does still contribute to capacity management.</span></span> <span data-ttu-id="9ea16-311">Metrische gegevens met nul gewicht zijn nog steeds nuttig en worden vaak gebruikt als onderdeel van het servicegedrag en prestatiebewaking.</span><span class="sxs-lookup"><span data-stu-id="9ea16-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="9ea16-312">[In dit artikel](service-fabric-diagnostics-event-generation-infra.md) bevat meer informatie over het gebruik van metrische gegevens voor controle en diagnostische gegevens van uw services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on the use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="9ea16-313">De werkelijke invloed van verschillende metrische gewichten in het cluster is dat de Cluster Resource Manager verschillende oplossingen genereert.</span><span class="sxs-lookup"><span data-stu-id="9ea16-313">The real impact of different metric weights in the cluster is that the Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="9ea16-314">Metrische gewichten geven de Cluster Resource Manager dat bepaalde metrische gegevens belangrijker dan andere zijn.</span><span class="sxs-lookup"><span data-stu-id="9ea16-314">Metric weights tell the Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="9ea16-315">Wanneer er geen ideale oplossing is de Cluster Resource Manager kunt geven de voorkeur oplossingen die de hogere gewogen metrische gegevens beter kan worden verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9ea16-315">When there's no perfect solution the Cluster Resource Manager can prefer solutions which balance the higher weighted metrics better.</span></span> <span data-ttu-id="9ea16-316">Als een service denkt een bepaalde waarde is niet belangrijk is dat, dat kan dit het gebruik van deze metrische gegevens van imbalanced vinden.</span><span class="sxs-lookup"><span data-stu-id="9ea16-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="9ea16-317">Hierdoor kan een andere service een oneven distributie van sommige metrische gegevens die belangrijk voor het ophalen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-317">This allows another service to get an even distribution of some metric that is important to it.</span></span>

<span data-ttu-id="9ea16-318">Bekijk een voorbeeld van sommige rapporten laden en hoe verschillende metriek gewicht resulteert in een andere toewijzingen aan in het cluster.</span><span class="sxs-lookup"><span data-stu-id="9ea16-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in the cluster.</span></span> <span data-ttu-id="9ea16-319">In dit voorbeeld ziet u dat de Cluster Resource Manager voor het maken van verschillende regelingen van services overschakelen van het relatieve gewicht van de metrische gegevens veroorzaakt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-319">In this example, we see that switching the relative weight of the metrics causes the Cluster Resource Manager to create different arrangements of services.</span></span>

<span data-ttu-id="9ea16-320"><center>
![Voorbeeld van de metrische gewicht en de invloed ervan op oplossingen Netwerktaakverdeling][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="9ea16-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="9ea16-321">In dit voorbeeld zijn er vier verschillende services, alle reporting verschillende waarden voor twee verschillende maatstaven voor MetricA en MetricB.</span><span class="sxs-lookup"><span data-stu-id="9ea16-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="9ea16-322">In één geval alle services definiëren MetricA is het belangrijkste instrument (gewicht = hoog) en MetricB als niet belangrijk (gewicht = laag).</span><span class="sxs-lookup"><span data-stu-id="9ea16-322">In one case, all the services define MetricA is the most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="9ea16-323">Als gevolg hiervan, ziet u dat de Cluster Resource Manager Hiermee plaatst u de services zodat MetricA is beter dan MetricB taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9ea16-323">As a result, we see that the Cluster Resource Manager places the services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="9ea16-324">'Beter taakverdeling' betekent dat MetricA een lagere heeft heeft een lagere standaarddeviatie dan MetricB.</span><span class="sxs-lookup"><span data-stu-id="9ea16-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="9ea16-325">In het tweede geval omkeren we de metrische gewichten.</span><span class="sxs-lookup"><span data-stu-id="9ea16-325">In the second case, we reverse the metric weights.</span></span> <span data-ttu-id="9ea16-326">Hierdoor wordt de Cluster Resource Manager services A en B verzinnen van een toewijzing waar MetricB is een betere taakverdeling dan MetricA.</span><span class="sxs-lookup"><span data-stu-id="9ea16-326">As a result, the Cluster Resource Manager swaps services A and B to come up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="9ea16-327">Metrische gewichten bepalen hoe de Cluster Resource Manager moet in evenwicht zijn, maar niet wanneer balancing moet gebeuren.</span><span class="sxs-lookup"><span data-stu-id="9ea16-327">Metric weights determine how the Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="9ea16-328">Bekijk voor meer informatie over Netwerktaakverdeling, [in dit artikel](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="9ea16-329">Globale metrische gewichten</span><span class="sxs-lookup"><span data-stu-id="9ea16-329">Global metric weights</span></span>
<span data-ttu-id="9ea16-330">Stel dat ServiceA definieert MetricA zoals hoge gewicht en XPb stelt het gewicht voor MetricA laag of nul.</span><span class="sxs-lookup"><span data-stu-id="9ea16-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets the weight for MetricA to Low or Zero.</span></span> <span data-ttu-id="9ea16-331">Wat is het werkelijke gewicht dat belandt ophalen gebruikt?</span><span class="sxs-lookup"><span data-stu-id="9ea16-331">What’s the actual weight that ends up getting used?</span></span>

<span data-ttu-id="9ea16-332">Er zijn meerdere gewichten die worden voor elke metriek bijgehouden.</span><span class="sxs-lookup"><span data-stu-id="9ea16-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="9ea16-333">De eerste dikte is gedefinieerd voor de metriek wanneer de service wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9ea16-333">The first weight is the one defined for the metric when the service is created.</span></span> <span data-ttu-id="9ea16-334">Het andere gewicht is een globale gewicht, wordt automatisch berekend.</span><span class="sxs-lookup"><span data-stu-id="9ea16-334">The other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="9ea16-335">De Cluster Resource Manager gebruikt deze beide gewichten wanneer score berekenen voor oplossingen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-335">The Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="9ea16-336">Het is belangrijk rekening houdend met beide gewichten.</span><span class="sxs-lookup"><span data-stu-id="9ea16-336">Taking both weights into account is important.</span></span> <span data-ttu-id="9ea16-337">Hiermee wordt de Cluster Resource Manager voor elke service op basis van een eigen prioriteiten worden verdeeld en er ook voor zorgen dat de cluster als geheel correct wordt toegewezen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-337">This allows the Cluster Resource Manager to balance each service according to its own priorities, and also ensure that the cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="9ea16-338">Wat er zou gebeuren als de Cluster Resource Manager globale en lokale saldo niet interesseren?</span><span class="sxs-lookup"><span data-stu-id="9ea16-338">What would happen if the Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="9ea16-339">Het is ook eenvoudig bouwen van oplossingen die globaal in evenwicht zijn, maar die leiden tot slechte resourceverdeling voor afzonderlijke services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-339">Well, it’s easy to construct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="9ea16-340">In het volgende voorbeeld gaan we kijken naar een service die is geconfigureerd met alleen de standaard metrische gegevens en kijk wat er gebeurt wanneer alleen globale saldo wordt beschouwd als:</span><span class="sxs-lookup"><span data-stu-id="9ea16-340">In the following example, let’s look at a service configured with just the default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="9ea16-341"><center>
![De Impact van een globale alleen oplossing][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="9ea16-341"><center>
![The Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="9ea16-342">In het bovenste voorbeeld op basis van de globale verdelen, wordt de cluster als geheel inderdaad verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9ea16-342">In the top example based only on global balance, the cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="9ea16-343">Alle knooppunten hebben de dezelfde telling van de primaire en de hetzelfde aantal totaal aantal replica's.</span><span class="sxs-lookup"><span data-stu-id="9ea16-343">All nodes have the same count of primaries and the same number total replicas.</span></span> <span data-ttu-id="9ea16-344">Echter, als u naar de werkelijke impact van deze toewijzing kijkt is het niet zo goed: het verlies van een willekeurig knooppunt van invloed is op een bepaalde belasting, omdat het duurt alle van de primaire voordat.</span><span class="sxs-lookup"><span data-stu-id="9ea16-344">However, if you look at the actual impact of this allocation it’s not so good: the loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="9ea16-345">Bijvoorbeeld, als het eerste knooppunt de drie primaire voor drie verschillende partities van de cirkel-service mislukt is alle verloren gegaan.</span><span class="sxs-lookup"><span data-stu-id="9ea16-345">For example, if the first node fails the three primaries for the three different partitions of the Circle service would all be lost.</span></span> <span data-ttu-id="9ea16-346">Als u daarentegen hebben de driehoek en zeshoek services hun partities verliezen van een replica.</span><span class="sxs-lookup"><span data-stu-id="9ea16-346">Conversely, the Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="9ea16-347">Dit zorgt ervoor dat niet wordt onderbroken, behalve voor het herstellen van de replica omlaag.</span><span class="sxs-lookup"><span data-stu-id="9ea16-347">This causes no disruption, other than having to recover the down replica.</span></span>

<span data-ttu-id="9ea16-348">De Cluster Resource Manager heeft in het voorbeeld onder de replica's op basis van het saldo globale en per-service worden gedistribueerd.</span><span class="sxs-lookup"><span data-stu-id="9ea16-348">In the bottom example, the Cluster Resource Manager has distributed the replicas based on both the global and per-service balance.</span></span> <span data-ttu-id="9ea16-349">Bij het berekenen van de score van de oplossing biedt het grootste deel van het gewicht globale oplossing en een (configureerbaar) deel aan afzonderlijke services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-349">When calculating the score of the solution it gives most of the weight to the global solution, and a (configurable) portion to individual services.</span></span> <span data-ttu-id="9ea16-350">Globale verdelen voor een waarde wordt berekend op basis van het gemiddelde van de metrische gewicht van elke service.</span><span class="sxs-lookup"><span data-stu-id="9ea16-350">Global balance for a metric is calculated based on the average of the metric weights from each service.</span></span> <span data-ttu-id="9ea16-351">Elke service, wordt verdeeld volgens een eigen gedefinieerde metrische gewichten.</span><span class="sxs-lookup"><span data-stu-id="9ea16-351">Each service is balanced according to its own defined metric weights.</span></span> <span data-ttu-id="9ea16-352">Dit zorgt ervoor dat de services in binnen zelf volgens hun eigen behoeften evenwicht zijn.</span><span class="sxs-lookup"><span data-stu-id="9ea16-352">This ensures that the services are balanced within themselves according to their own needs.</span></span> <span data-ttu-id="9ea16-353">Als het eerste knooppunt de fout mislukt is als gevolg hiervan verdeeld over alle partities van alle services.</span><span class="sxs-lookup"><span data-stu-id="9ea16-353">As a result, if the same first node fails the failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="9ea16-354">De gevolgen voor elk is hetzelfde.</span><span class="sxs-lookup"><span data-stu-id="9ea16-354">The impact to each is the same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9ea16-355">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9ea16-355">Next steps</span></span>
- <span data-ttu-id="9ea16-356">Voor meer informatie over het configureren van services, [informatie over het configureren van Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="9ea16-357">Defragmentatie metrische gegevens definiëren, is een manier om te consolideren belasting van de knooppunten in plaats van af te spreiden. Raadpleeg voor meer informatie over het configureren van defragmentatie, [in dit artikel](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-357">Defining Defragmentation Metrics is one way to consolidate load on nodes instead of spreading it out. To learn how to configure defragmentation, refer to [this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="9ea16-358">Als u wilt weten over hoe de Cluster Resource Manager beheert en een compromis tussen de werklast van het cluster, Raadpleeg het artikel op [load balancing](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-358">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="9ea16-359">Vanaf het begin starten en [Maak kennis met de Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-359">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="9ea16-360">Verplaatsingskosten is één manier om de Cluster Resource Manager-signalering dat bepaalde services zijn duurder dan de andere verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="9ea16-360">Movement Cost is one way of signaling to the Cluster Resource Manager that certain services are more expensive to move than others.</span></span> <span data-ttu-id="9ea16-361">Raadpleeg voor meer informatie over verplaatsingskosten [in dit artikel](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="9ea16-361">To learn more about movement cost, refer to [this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
