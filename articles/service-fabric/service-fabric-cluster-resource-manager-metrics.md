---
title: aaaManage Azure microservice load met metrische gegevens | Microsoft Docs
description: Meer informatie over hoe tooconfigure en gebruik metrische gegevens in Service Fabric toomanage brongebruik service.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="9d4b1-103">Het beheren van het brongebruik en de belasting in Service Fabric met metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9d4b1-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="9d4b1-104">*Metrische gegevens* Hallo-resources die uw services voorzichtig over en die worden geleverd door Hallo knooppunten in cluster Hallo zijn.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="9d4b1-105">Een metriek is iets dat u wilt dat toomanage in de volgorde tooimprove of monitor Hallo prestaties van uw services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="9d4b1-106">U kunt bijvoorbeeld geheugen verbruik tooknow bekijken als uw service is overbelast.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="9d4b1-107">Gebruik een andere is toofigure out of Hallo-service kan verplaatsen elders waarbij geheugen is dat minder beperkt in volgorde tooget betere prestaties.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="9d4b1-108">Items zoals geheugen, schijf- en CPU-gebruik zijn voorbeelden van metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="9d4b1-109">Deze metrische gegevens zijn fysieke metrische gegevens en bronnen die overeenkomen met resources op Hallo-knooppunt dat moet worden beheerd toobe toophysical.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="9d4b1-110">Metrische gegevens kan ook worden (en meestal zijn) logische metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="9d4b1-111">Logische metrische gegevens zijn bijvoorbeeld 'MyWorkQueueDepth' of 'MessagesToProcess' of 'TotalRecords'.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="9d4b1-112">Logische metrische gegevens zijn toepassingsspecifieke en indirect overeen toosome fysieke resourceverbruik.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="9d4b1-113">Logische metrische gegevens zijn algemene omdat het vaste toomeasure en het verbruik van rapport van fysieke resources op basis van de per-service kan zijn.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="9d4b1-114">Hallo complexiteit van het meten van en rapportage van uw eigen fysieke metrische gegevens is ook waarom Service Fabric sommige standaard metrische gegevens bevat.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="9d4b1-115">Standaard metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9d4b1-115">Default metrics</span></span>
<span data-ttu-id="9d4b1-116">Stel dat u wilt dat tooget schrijven en implementeren van uw service is gestart.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="9d4b1-117">Op dit moment weet niet welk fysieke of logische resources verbruikt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="9d4b1-118">Dat is geen probleem!</span><span class="sxs-lookup"><span data-stu-id="9d4b1-118">That’s fine!</span></span> <span data-ttu-id="9d4b1-119">Hallo Service Fabric-Cluster Resource Manager maakt gebruik van bepaalde standaard metrische gegevens wanneer er geen andere waarden zijn opgegeven.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="9d4b1-120">Ze zijn:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-120">They are:</span></span>

  - <span data-ttu-id="9d4b1-121">PrimaryCount - telling van de primaire replica's op Hallo-knooppunt</span><span class="sxs-lookup"><span data-stu-id="9d4b1-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="9d4b1-122">ReplicaCount - telling van de totale stateful replica's op Hallo-knooppunt</span><span class="sxs-lookup"><span data-stu-id="9d4b1-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="9d4b1-123">Aantal - telling van alle service-objecten (stateless en stateful) op Hallo-knooppunt</span><span class="sxs-lookup"><span data-stu-id="9d4b1-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="9d4b1-124">Gegevens</span><span class="sxs-lookup"><span data-stu-id="9d4b1-124">Metric</span></span> | <span data-ttu-id="9d4b1-125">Staatloze exemplaar laden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-125">Stateless Instance Load</span></span> | <span data-ttu-id="9d4b1-126">Stateful secundaire laden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-126">Stateful Secondary Load</span></span> | <span data-ttu-id="9d4b1-127">Stateful primaire laden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9d4b1-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="9d4b1-128">PrimaryCount</span></span> |<span data-ttu-id="9d4b1-129">0</span><span class="sxs-lookup"><span data-stu-id="9d4b1-129">0</span></span> |<span data-ttu-id="9d4b1-130">0</span><span class="sxs-lookup"><span data-stu-id="9d4b1-130">0</span></span> |<span data-ttu-id="9d4b1-131">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-131">1</span></span> |
| <span data-ttu-id="9d4b1-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="9d4b1-132">ReplicaCount</span></span> |<span data-ttu-id="9d4b1-133">0</span><span class="sxs-lookup"><span data-stu-id="9d4b1-133">0</span></span> |<span data-ttu-id="9d4b1-134">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-134">1</span></span> |<span data-ttu-id="9d4b1-135">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-135">1</span></span> |
| <span data-ttu-id="9d4b1-136">Count</span><span class="sxs-lookup"><span data-stu-id="9d4b1-136">Count</span></span> |<span data-ttu-id="9d4b1-137">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-137">1</span></span> |<span data-ttu-id="9d4b1-138">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-138">1</span></span> |<span data-ttu-id="9d4b1-139">1</span><span class="sxs-lookup"><span data-stu-id="9d4b1-139">1</span></span> |

<span data-ttu-id="9d4b1-140">Voor algemene werkbelastingen bestaan Hallo standaard metrische gegevens uit een goede verdeling van het werk in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="9d4b1-141">In de Hallo voorbeeld te volgen, gaan we kijken wat er gebeurt als er twee services en zijn afhankelijk van Hallo standaard metrische gegevens voor netwerktaakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="9d4b1-142">Hallo eerste is een stateful service met drie partities en een grootte van de drie doel replicaset.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="9d4b1-143">tweede Hallo-service is een staatloze met één partitie en drie exemplaren.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="9d4b1-144">Dit is wat u krijgt:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-144">Here's what you get:</span></span>

<span data-ttu-id="9d4b1-145"><center>
![Cluster-indeling met standaard metrische gegevens][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="9d4b1-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="9d4b1-146">Sommige toonote dingen:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-146">Some things toonote:</span></span>
  - <span data-ttu-id="9d4b1-147">Primaire replica's voor stateful service Hallo zijn verdeeld over meerdere knooppunten</span><span class="sxs-lookup"><span data-stu-id="9d4b1-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="9d4b1-148">Replica's voor dezelfde partitie worden op verschillende knooppunten Hallo</span><span class="sxs-lookup"><span data-stu-id="9d4b1-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="9d4b1-149">Hallo totale aantal primaire en secundaire replica's wordt gedistribueerd in het Hallo-cluster</span><span class="sxs-lookup"><span data-stu-id="9d4b1-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="9d4b1-150">Totaal aantal serviceobjecten Hallo worden gelijkmatig op elk knooppunt toegewezen</span><span class="sxs-lookup"><span data-stu-id="9d4b1-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="9d4b1-151">Goede!</span><span class="sxs-lookup"><span data-stu-id="9d4b1-151">Good!</span></span>

<span data-ttu-id="9d4b1-152">Hallo standaard metrische gegevens werken geweldig als een begin.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="9d4b1-153">Echter worden Hallo standaard metrische gegevens alleen uitvoeren u tot nu toe.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="9d4b1-154">Bijvoorbeeld: Wat is er kans op Hallo Hallo partitioneren schema dat u resultaten opgenomen in perfect zelfs-gebruik door alle partities?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="9d4b1-155">Wat is er Hallo kans dat de belasting voor een bepaalde service Hallo constant is gedurende een bepaalde periode of zelfs Hallo dezelfde over meerdere partities nu?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="9d4b1-156">U kunt uitvoeren met NET Hallo standaard metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="9d4b1-157">Dit leidt meestal betekent echter dat het clustergebruik van uw is korter en meer ongelijke dan u wilt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="9d4b1-158">Dit is omdat Hallo standaard metrische gegevens zijn niet adaptieve en wordt ervan uitgegaan dat alles is gelijk.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="9d4b1-159">Bijvoorbeeld, bijdragen een primaire die bezig is en één die niet beide '1' toohello PrimaryCount metriek.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="9d4b1-160">In het ergste geval hello, kan met alleen Hallo standaard metrische gegevens ook leiden tot overscheduled knooppunten, wat leidt tot prestatieproblemen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="9d4b1-161">Als u geïnteresseerd bent in Hallo meeste uit uw cluster ophalen en prestatieproblemen te voorkomen, moet u toouse aangepaste metrische gegevens en rapportage van de dynamische belasting bij.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="9d4b1-162">Aangepaste metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9d4b1-162">Custom metrics</span></span>
<span data-ttu-id="9d4b1-163">Metrische gegevens zijn geconfigureerd op basis van de per-met de naam-service-exemplaar bij het maken van Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="9d4b1-164">Een metriek heeft enkele eigenschappen beschrijving van het: een naam, een gewicht en een werklast (standaard).</span><span class="sxs-lookup"><span data-stu-id="9d4b1-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="9d4b1-165">Metrische naam: naam van Hallo van Hallo metriek.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="9d4b1-166">Hallo metrische naam is een unieke id voor de metriek Hallo binnen Hallo cluster vanuit perspectief Hallo Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="9d4b1-167">Gewicht: Metrische gewicht definieert hoe belangrijk deze waarde is relatief toohello andere metrische gegevens voor deze service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="9d4b1-168">Werklast (standaard): Hallo standaard load is verschillend, afhankelijk van de service Hallo stateless of stateful weergegeven.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="9d4b1-169">Voor stateless services heeft elke metriek één eigenschap met de naam DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="9d4b1-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="9d4b1-170">U definieert voor stateful services:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-170">For stateful services you define:</span></span>
    * <span data-ttu-id="9d4b1-171">PrimaryDefaultLoad: de standaardhoeveelheid Hallo van deze metrische gegevens van deze service verbruikt wanneer het een primaire</span><span class="sxs-lookup"><span data-stu-id="9d4b1-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="9d4b1-172">SecondaryDefaultLoad: Hallo standaardhoeveelheid van deze metrische gegevens van deze service verbruikt wanneer deze een secundair</span><span class="sxs-lookup"><span data-stu-id="9d4b1-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="9d4b1-173">Als u aangepaste metrische gegevens definiëren en too_also_ gebruik Hallo standaard metrische gegevens gewenste, moet u too_explicitly_ Hallo standaard metrische gegevens back- en gewicht en waarden definiëren voor hen toevoegen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="9d4b1-174">Dit is omdat moet u Hallo relatie tussen Hallo standaard metrische gegevens en uw aangepaste metrische gegevens definiëren.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="9d4b1-175">Bijvoorbeeld, misschien u het belangrijkst ConnectionCount of WorkQueueDepth meer dan primaire distributie.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="9d4b1-176">Standaard Hallo gewicht van Hallo PrimaryCount metriek is hoog, zodat u wilt dat tooreduce het tooMedium wanneer u andere tooensure van metrische gegevens hebben voorrang toevoegt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="9d4b1-177">Metrische gegevens voor uw service - een voorbeeld definiëren</span><span class="sxs-lookup"><span data-stu-id="9d4b1-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="9d4b1-178">Stel dat u wilt dat Hallo na configuratie:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="9d4b1-179">Een waarde met de naam 'ConnectionCount' uw service-rapporten</span><span class="sxs-lookup"><span data-stu-id="9d4b1-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="9d4b1-180">Wilt u er ook toouse Hallo standaard metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="9d4b1-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="9d4b1-181">U hebt gedaan sommige metingen en weten dat een primaire replica van die service gewoonlijk 20 eenheden van 'ConnectionCount duurt'</span><span class="sxs-lookup"><span data-stu-id="9d4b1-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="9d4b1-182">Secundaire replica's gebruiken "ConnectionCount" 5-eenheden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="9d4b1-183">Weet u dat 'ConnectionCount' hello belangrijkste metrische gegevens in termen van Hallo prestaties van deze bepaalde service beheren</span><span class="sxs-lookup"><span data-stu-id="9d4b1-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="9d4b1-184">U wilt nog steeds primaire replica's met gelijke taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="9d4b1-185">Taakverdeling van de primaire replica's wordt doorgaans een goed idee ongeacht wat.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="9d4b1-186">Dit helpt voorkomen dat Hallo verlies van een knooppunt of fault-domein die invloed hebben op het grootste deel van de primaire replica's samen met het.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="9d4b1-187">Anders zijn Hallo standaard metrische gegevens fijn</span><span class="sxs-lookup"><span data-stu-id="9d4b1-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="9d4b1-188">Dit is Hallo code dat u toocreate een service met deze configuratie schrijven wilt:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="9d4b1-189">Code:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="9d4b1-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="9d4b1-191">Hallo bovenstaande voorbeelden en hello rest van dit document worden beschreven van het beheren van metrische gegevens op basis van de per-met de naam-service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="9d4b1-192">Het is ook mogelijk toodefine metrische gegevens voor uw services op Hallo service _type_ niveau.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="9d4b1-193">Dit wordt bereikt door op te geven ze in de manifesten voor uw service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="9d4b1-194">Type niveau metrische gegevens definiëren wordt niet aanbevolen om verschillende redenen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="9d4b1-195">Hallo eerste reden is dat de namen van de metrische vaak omgevingspecifiek zijn.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="9d4b1-196">Tenzij er een vast contract aanwezig is, mag u niet zeker dat die metriek Hallo 'Kernen' in een omgeving geen 'MiliCores' of 'Kernen' in andere gevallen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="9d4b1-197">Als uw metrische gegevens zijn gedefinieerd in uw manifest moet u de nieuwe manifesten toocreate per omgeving.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="9d4b1-198">Dit leidt meestal tooa verspreiding van verschillende manifesten met slechts kleine verschillen, wat toomanagement problemen leiden kunnen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="9d4b1-199">Metrische belasting zijn vaak op basis van de per-met de naam-service-exemplaar toegewezen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="9d4b1-200">Bijvoorbeeld, Stel dat u één exemplaar van Hallo maken voor service CustomerA toouse zal deze alleen licht.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="9d4b1-201">Stel ook dat u een andere maken voor CustomerB die een grotere werkbelasting heeft.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="9d4b1-202">In dit geval zou wilt u waarschijnlijk tootweak Hallo standaard wordt geladen voor deze services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="9d4b1-203">Als u metrische gegevens laadt gedefinieerd via manifesten en u wilt dat toosupport dit scenario, vereist deze verschillende groepen van toepassingen en servicetypen voor elke klant.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="9d4b1-204">Hallo waarden gedefinieerd tijdens het maken van service overschrijven die zijn gedefinieerd in het manifest hello, zodat u die tooset Hallo specifieke standaardwaarden kan gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="9d4b1-205">Echter dat zorgt ervoor dat Hallo-waarden die zijn gedeclareerd in Hallo manifesten toonot overeenkomen met die service Hallo daadwerkelijk wordt uitgevoerd met.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="9d4b1-206">Dit kan leiden tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="9d4b1-207">Als een herinnering: als u alleen toouse Hallo standaard metrische gegevens wilt, of u kunt geen tootouch Hallo metrische gegevens verzameling helemaal iets speciale doen bij het maken van uw service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="9d4b1-208">Hallo standaard metrische gegevens ophalen automatisch gebruikt wanneer er geen andere worden bepaald.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="9d4b1-209">Nu gaan we door elk van deze instellingen in meer detail en bespreken Hallo gedrag op dat dit van invloed is.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="9d4b1-210">Belasting</span><span class="sxs-lookup"><span data-stu-id="9d4b1-210">Load</span></span>
<span data-ttu-id="9d4b1-211">Hallo hele punt voor het definiëren van metrische gegevens is de toorepresent sommige belasting.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="9d4b1-212">*Load* hoeveel van een metriek is verbruikt door sommige service-exemplaar of de replica op een bepaald knooppunt is.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="9d4b1-213">Belasting kan worden geconfigureerd op bijna elk gewenst moment.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="9d4b1-214">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-214">For example:</span></span>

  - <span data-ttu-id="9d4b1-215">Laden kan worden gedefinieerd als een service wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="9d4b1-216">Dit heet _standaard load_.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-216">This is called _default load_.</span></span>
  - <span data-ttu-id="9d4b1-217">Hallo metrische gegevens, waaronder de standaard wordt geladen voor een service kunnen worden bijgewerkt nadat het Hallo-service wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="9d4b1-218">Dit heet _een service bijwerken_.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="9d4b1-219">Hallo belasting voor een bepaalde partitie mag reset toohello standaardwaarden voor de service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="9d4b1-220">Dit heet _opnieuw instellen van belasting van partitie_.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="9d4b1-221">Load worden gerapporteerd op een per per service object dynamisch tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="9d4b1-222">Dit heet _reporting load_.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="9d4b1-223">Alle deze strategieën kan worden gebruikt binnen dezelfde service tijdens zijn levensduur Hallo.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="9d4b1-224">Werklast (standaard)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-224">Default load</span></span>
<span data-ttu-id="9d4b1-225">*Standaard load* hoeveel Hallo metriek elke serviceobject (stateless exemplaar of stateful replica) van deze service verbruikt is.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="9d4b1-226">Hallo Cluster Resource Manager gebruikt dit nummer voor Hallo belasting van de service-object Hallo totdat het andere informatie, zoals een rapport van de dynamische belasting bij ontvangt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="9d4b1-227">Voor eenvoudiger services is Hallo standaard load een statische definitie.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="9d4b1-228">Hallo standaard load nooit is bijgewerkt en wordt gebruikt voor het Hallo-levensduur van het Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="9d4b1-229">Standaard wordt geladen works ideaal voor eenvoudige scenario's waarbij bepaalde hoeveelheden resources werkbelastingen zijn speciale toodifferent en niet wijzigen voor capaciteitsplanning.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="9d4b1-230">Zie voor meer informatie over management capaciteit en het definiëren van capaciteit voor Hallo knooppunten in het cluster [in dit artikel](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="9d4b1-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="9d4b1-231">Hallo Cluster Resource Manager kunt stateful services toospecify een andere standaard belasting voor hun primaire en secundaire replica's.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="9d4b1-232">Stateless services kunnen slechts één waarde die van toepassing tooall exemplaren is opgeven.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="9d4b1-233">Voor stateful services zijn Hallo standaard load voor primaire en secundaire replica's doorgaans verschillend, omdat de replica's kunnen verschillende soorten werk in elke rol.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="9d4b1-234">Bijvoorbeeld primaire meestal fungeren lees- en schrijfbewerkingen en de meeste Hallo rekenkundige last, verwerken en secundaire replica's niet.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="9d4b1-235">Meestal is Hallo standaard load voor een primaire replica hoger dan Hallo standaard load voor secundaire replica's.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="9d4b1-236">Hallo echte getallen moet afhankelijk van uw eigen metingen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="9d4b1-237">Dynamische belasting bij</span><span class="sxs-lookup"><span data-stu-id="9d4b1-237">Dynamic load</span></span>
<span data-ttu-id="9d4b1-238">Stel dat u uw service een tijdje hebt actief.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="9d4b1-239">U hebt die opgemerkt met sommige bewaking:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="9d4b1-240">Sommige partities of verschillende exemplaren van een bepaalde service meer bronnen dan andere gebruiken</span><span class="sxs-lookup"><span data-stu-id="9d4b1-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="9d4b1-241">Sommige services een belasting die gedurende een bepaalde periode varieert.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="9d4b1-242">Er is een groot aantal dingen die dergelijke fluctuaties load kunnen veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="9d4b1-243">Bijvoorbeeld, zijn verschillende services of partities gekoppeld aan verschillende klanten met verschillende vereisten.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="9d4b1-244">Load kan ook niet wijzigen omdat Hallo hoeveelheid werk Hallo service in de loop Hallo van Hallo dag varieert.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="9d4b1-245">Ongeacht of andere reden hello is er meestal geen enkel getal die u voor standaard gebruiken kunt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="9d4b1-246">Dit geldt vooral als u wilt dat tooget Hallo meeste gebruik buiten het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="9d4b1-247">Een waarde die u voor de werklast (standaard kiest) is onjuist aantal Hallo tijd.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="9d4b1-248">Onjuiste standaardinstellingen laadt leiden tot een Cluster Resource Manager Hallo boven of onder het toewijzen van resources.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="9d4b1-249">Als gevolg hiervan hebt u knooppunten die boven of onder benut worden Hoewel Hallo Cluster Resource Manager denkt dat het Hallo-cluster is verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="9d4b1-250">Standaard laadt zijn nog steeds goed, omdat ze bepaalde informatie voor de eerste positie bieden, maar ze nog niet voltooid verhaal voor echte werkbelastingen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="9d4b1-251">tooaccurately vastleggen wijzigen bronvereisten, Hallo Cluster Resource Manager kunt elke service object tooupdate eigen load tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="9d4b1-252">Dit de dynamische belasting bij reporting wordt genoemd.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="9d4b1-253">Rapporten van de dynamische belasting bij toestaan replica's of exemplaren tooadjust hun toewijzing/gerapporteerd belasting van metrische gegevens gedurende hun levensduur.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="9d4b1-254">Meestal rapporteren dat het lage hoeveelheden een metriek is geïnstalleerd via een replica van de service of het exemplaar dat koude en niet doen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="9d4b1-255">Een bezet replica of instance rapporteren dat ze meer gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="9d4b1-256">Reporting load per replica of het exemplaar, kunnen Hallo Cluster Resource Manager tooreorganize Hallo afzonderlijke serviceobjecten in Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="9d4b1-257">Hallo-services opnieuw indelen, kunt ervoor zorgen dat ze Hallo-resources die ze nodig hebben.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="9d4b1-258">Bezet krijgen effectief te 'vrijmaken' bronnen van andere replica's of exemplaren die momenteel koude of minder werk te doen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="9d4b1-259">Binnen Reliable Services uitziet Hallo code tooreport load dynamisch:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="9d4b1-260">Code:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="9d4b1-261">Een service kan rapporteren dat op een van de Hallo metrische gegevens die zijn gedefinieerd tijdens het maken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="9d4b1-262">Als een service-rapporten belasting voor een waarde die het is niet geconfigureerd toouse, negeert Service Fabric die rapporteren.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="9d4b1-263">Als er andere metrische gegevens gerapporteerd op Hallo dezelfde tijd die geldig zijn, die rapporten worden geaccepteerd.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="9d4b1-264">Service-code kunt meten en rapporteren alle Hallo metrische gegevens die deze procedures, en operators Hallo configuratie toouse zonder toochange Hallo servicecode kunnen opgeven.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="9d4b1-265">Configuratie van een service bijwerken</span><span class="sxs-lookup"><span data-stu-id="9d4b1-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="9d4b1-266">Hallo-lijst van metrische gegevens die zijn gekoppeld aan Hallo-service en Hallo eigenschappen van deze metrische gegevens kunnen dynamisch worden bijgewerkt terwijl Hallo service live.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="9d4b1-267">Hiermee om te experimenteren en flexibiliteit.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="9d4b1-268">Enkele voorbeelden van wanneer dit handig is zijn:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="9d4b1-269">een metriek met een buggy rapport voor een bepaalde service uitschakelen</span><span class="sxs-lookup"><span data-stu-id="9d4b1-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="9d4b1-270">Hallo-gewicht van de metrische gegevens op basis van het gewenste gedrag opnieuw configureren</span><span class="sxs-lookup"><span data-stu-id="9d4b1-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="9d4b1-271">inschakelen van een nieuwe waarde pas nadat Hallo code al is geïmplementeerd en gevalideerd via andere methoden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="9d4b1-272">Hallo standaard load voor een service op basis van waargenomen gedrag en het verbruik van wijzigen</span><span class="sxs-lookup"><span data-stu-id="9d4b1-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="9d4b1-273">Hallo belangrijkste API's voor het wijzigen van de configuratie zijn `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# en `Update-ServiceFabricService` in PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="9d4b1-274">Welke informatie u met deze API's opgeeft vervangt bestaande Hallo metrische gegevens voor Hallo service onmiddellijk.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="9d4b1-275">De combinatie van waarden van standaard load en rapporten van de dynamische belasting bij</span><span class="sxs-lookup"><span data-stu-id="9d4b1-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="9d4b1-276">Standaard-belasting en de dynamische belasting kunnen worden gebruikt voor Hallo dezelfde service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="9d4b1-277">Wanneer een service maakt gebruik van zowel de werklast (standaard) en de dynamische belasting bij rapporten, wordt standaard load fungeert als een schatting totdat u dynamische rapporten worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="9d4b1-278">Standaard load is goed, omdat dit Hallo Cluster Resource Manager is er iets toowork met biedt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="9d4b1-279">Hallo standaard load kunt Hallo Cluster Resource Manager tooplace Hallo-objecten in goede locaties wanneer ze worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="9d4b1-280">Als er geen standaard-informatie laden is opgegeven, wordt een effectief willekeurige plaatsing van services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="9d4b1-281">Bij het ontvangen van load-rapporten later Hallo initiële willekeurige plaatsing is vaak verkeerde en Hallo Cluster Resource Manager toomove services heeft.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="9d4b1-282">We nemen van het vorige voorbeeld en zien wat er gebeurt wanneer we enkele aangepaste metrische gegevens en de dynamische belasting bij reporting toevoegt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="9d4b1-283">In dit voorbeeld gebruiken we 'MemoryInMb' als een voorbeeld van de meting.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="9d4b1-284">Geheugen is een Hallo system metrische gegevens die Service Fabric kunt [resource reguleren](service-fabric-resource-governance.md), en uzelf reporting is doorgaans moeilijk.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="9d4b1-285">We niet daadwerkelijk verwacht dat u tooreport op geheugenverbruik; Geheugen wordt gebruikt als een toolearning hulp over de mogelijkheden van Hallo Hallo Cluster Resource Manager hier.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="9d4b1-286">We gaan ervan uit dat we in eerste instantie Hallo stateful service gemaakt met de volgende opdracht Hallo:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="9d4b1-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="9d4b1-288">Deze syntaxis is als een herinnering (MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad').</span><span class="sxs-lookup"><span data-stu-id="9d4b1-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="9d4b1-289">Kijken wat een mogelijke cluster indeling kan er als volgt uitzien:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="9d4b1-290"><center>
![Cluster Gebalanceerd met zowel standaard als aangepaste metrische gegevens][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="9d4b1-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="9d4b1-291">Een aantal zaken die opgemerkt zijn:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="9d4b1-292">Secundaire replica's binnen een partitie kunnen hebben hun eigen laden</span><span class="sxs-lookup"><span data-stu-id="9d4b1-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="9d4b1-293">De algemene zoek Hallo metrische gegevens taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="9d4b1-294">Hallo voor geheugen, de verhouding tussen Hallo maximale en minimale belasting is 1,75 (Hallo knooppunt Hello meeste load is N3, Hallo minste N2 en 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="9d4b1-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="9d4b1-295">Er zijn wordt nog steeds tooexplain moet een aantal zaken:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="9d4b1-296">Wat bepaald of een ratio van 1,75 redelijke of niet is?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="9d4b1-297">Hoe weet Hallo Cluster Resource Manager als die voldoende is of als er meer werk toodo?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="9d4b1-298">Wanneer balancing treedt?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-298">When does balancing happen?</span></span>
* <span data-ttu-id="9d4b1-299">Wat betekent dit dat geheugen 'Hoog' werd gewogen?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="9d4b1-300">Metrische gewichten</span><span class="sxs-lookup"><span data-stu-id="9d4b1-300">Metric weights</span></span>
<span data-ttu-id="9d4b1-301">Bijhouden Hallo dezelfde metrische gegevens naar verschillende services is belangrijk.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="9d4b1-302">Globale weergave is wat Hallo Cluster Resource Manager tootrack verbruik in Hallo cluster en zorg ervoor dat de knooppunten niet gaan over capaciteit verbruik op alle knooppunten in balans is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="9d4b1-303">Services kunnen echter verschillende weergaven hebben als de urgentie toohello Hallo dezelfde metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="9d4b1-304">Ook in een cluster met veel metrische gegevens en partijen van services, perfect taakverdeling oplossingen bestaat mogelijk niet voor alle metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="9d4b1-305">Hoe moet Hallo Cluster Resource Manager in deze situaties verwerken?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="9d4b1-306">Metrische gewichten toestaan Hallo Cluster Resource Manager toodecide hoe toobalance Hallo cluster wanneer er wordt niet perfect opgenomen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="9d4b1-307">Metrische gewichten ook de mogelijkheid Hallo Cluster Resource Manager toobalance specifieke services anders.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="9d4b1-308">Metrische gegevens kunt laten vier verschillende gewicht niveaus: nul, laag, gemiddeld en hoog.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="9d4b1-309">Een metriek met een gewicht van nul bijdraagt niets wanneer u overweegt of dingen of niet evenwicht zijn.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="9d4b1-310">De belasting wordt echter nog steeds bij toocapacity management.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="9d4b1-311">Metrische gegevens met nul gewicht zijn nog steeds nuttig en worden vaak gebruikt als onderdeel van het servicegedrag en prestatiebewaking.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="9d4b1-312">[In dit artikel](service-fabric-diagnostics-event-generation-infra.md) bevat meer informatie over het gebruik van metrische gegevens voor het bewaken van Hallo en diagnostische gegevens van uw services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="9d4b1-313">Hallo heeft echte verschillende metrische gewichten in Hallo cluster dat verschillende oplossingen die Hallo Cluster Resource Manager worden gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="9d4b1-314">Metrische gewichten Vertel Hallo Cluster Resource Manager dat bepaalde metrische gegevens belangrijker dan andere zijn.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="9d4b1-315">Wanneer er geen Hallo ideale oplossing Cluster Resource Manager kunt geven de voorkeur oplossingen die Hallo hoger gewogen metrische gegevens beter kan worden verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="9d4b1-316">Als een service denkt een bepaalde waarde is niet belangrijk is dat, dat kan dit het gebruik van deze metrische gegevens van imbalanced vinden.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="9d4b1-317">Hierdoor kan een gelijke verdeling van sommige metrische gegevens die belangrijk tooit van een andere service tooget.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="9d4b1-318">Bekijk een voorbeeld van sommige rapporten laden en hoe verschillende metriek gewicht resulteert in een andere toewijzingen aan in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="9d4b1-319">In dit voorbeeld zien we dat relatieve gewicht van metrische gegevens Hallo Hallo overschakelen zorgt ervoor Hallo Cluster Resource Manager toocreate verschillende regelingen van services dat.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="9d4b1-320"><center>
![Voorbeeld van de metrische gewicht en de invloed ervan op oplossingen Netwerktaakverdeling][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="9d4b1-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="9d4b1-321">In dit voorbeeld zijn er vier verschillende services, alle reporting verschillende waarden voor twee verschillende maatstaven voor MetricA en MetricB.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="9d4b1-322">In één geval alle Hallo services definiëren MetricA is Hallo belangrijkste (gewicht = hoog) en MetricB als niet belangrijk (gewicht = laag).</span><span class="sxs-lookup"><span data-stu-id="9d4b1-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="9d4b1-323">Als gevolg hiervan zien we dat Hallo Cluster Resource Manager Hallo services plaatst zodat MetricA beter dan MetricB taakverdeling is.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="9d4b1-324">'Beter taakverdeling' betekent dat MetricA een lagere heeft heeft een lagere standaarddeviatie dan MetricB.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="9d4b1-325">In het tweede geval Hallo omkeren we Hallo metrische gewichten.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="9d4b1-326">Als gevolg hiervan wisselt Hallo Cluster Resource Manager services A en B toocome up met een-toewijzing waar MetricB is een betere taakverdeling dan MetricA.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="9d4b1-327">Metrische gewichten bepalen hoe Hallo Cluster Resource Manager moet worden verdeeld, maar niet wanneer balancing moet gebeuren.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="9d4b1-328">Bekijk voor meer informatie over Netwerktaakverdeling, [in dit artikel](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="9d4b1-329">Globale metrische gewichten</span><span class="sxs-lookup"><span data-stu-id="9d4b1-329">Global metric weights</span></span>
<span data-ttu-id="9d4b1-330">Stel dat ServiceA definieert MetricA zoals hoge gewicht en XPb stelt Hallo gewicht voor MetricA tooLow of nul.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="9d4b1-331">Wat is Hallo werkelijke gewicht dat belandt ophalen gebruikt?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="9d4b1-332">Er zijn meerdere gewichten die worden voor elke metriek bijgehouden.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="9d4b1-333">de eerste gewicht Hallo is Hallo een gedefinieerd voor de metriek Hallo wanneer Hallo-service wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="9d4b1-334">Hallo is andere gewicht een globale gewicht, wordt automatisch berekend.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="9d4b1-335">Hallo Cluster Resource Manager gebruikt deze beide gewichten wanneer score berekenen voor oplossingen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="9d4b1-336">Het is belangrijk rekening houdend met beide gewichten.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-336">Taking both weights into account is important.</span></span> <span data-ttu-id="9d4b1-337">Hierdoor kan Hallo Cluster Resource Manager toobalance elke service volgens tooits prioriteiten eigenaar en zorg er ook dat cluster Hallo als geheel juist is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="9d4b1-338">Wat er gebeurt als Hallo Cluster Resource Manager globale en lokale saldo niet interesseren?</span><span class="sxs-lookup"><span data-stu-id="9d4b1-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="9d4b1-339">Het is ook eenvoudig tooconstruct oplossingen die globaal in evenwicht zijn, maar die leiden tot slechte resourceverdeling voor afzonderlijke services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="9d4b1-340">In Hallo voorbeeld te volgen, gaan we kijken naar een service die is geconfigureerd met NET Hallo standaard metrische gegevens en kijk wat er gebeurt wanneer alleen globale saldo wordt beschouwd als:</span><span class="sxs-lookup"><span data-stu-id="9d4b1-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="9d4b1-341"><center>
![Hallo gevolgen van een globale oplossing alleen][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="9d4b1-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="9d4b1-342">Hallo cluster als geheel wordt in Hallo bovenste bijvoorbeeld op basis van de globale saldo inderdaad verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="9d4b1-343">Alle knooppunten hebben Hallo dezelfde primaire aantal en dezelfde Hallo number totaal aantal replica's.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="9d4b1-344">Echter, als u hello werkelijke gevolgen van deze toewijzing bekijkt is het niet zo goed: Hallo verlies van een willekeurig knooppunt van invloed is op een bepaalde belasting, omdat het duurt alle van de primaire voordat.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="9d4b1-345">Bijvoorbeeld, als het eerste knooppunt Hallo Hallo drie primaire voor drie verschillende partities Hallo Hallo cirkel-service mislukt is alle verbroken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="9d4b1-346">Als u daarentegen hebben Hallo driehoek en zeshoek services hun partities verliezen van een replica.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="9d4b1-347">Dit zorgt ervoor dat behalve toorecover Hallo omlaag replica wordt niet onderbroken.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="9d4b1-348">Hallo Cluster Resource Manager heeft Hallo onder bijvoorbeeld Hallo replica's op basis van beide Hallo globale en per service saldo gedistribueerd.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="9d4b1-349">Dit biedt de meeste Hallo gewicht toohello globale oplossing en een tooindividual (configureerbaar) gedeelte services bij het berekenen van de score van de oplossing Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="9d4b1-350">Globale verdelen voor een waarde wordt berekend op basis van gemiddelde Hallo van Hallo metrische gewicht van elke service.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="9d4b1-351">Elke service, wordt volgens tooits eigen gedefinieerde metrische gewichten verdeeld.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="9d4b1-352">Dit zorgt ervoor dat Hallo-services worden afgewogen tegen binnen zelf volgens tootheir eigen behoeften.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="9d4b1-353">Als gevolg hiervan wordt als hello dezelfde eerste knooppunt Hallo fout mislukt verdeeld over alle partities van alle services.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="9d4b1-354">Hallo impact tooeach is dezelfde Hallo.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9d4b1-355">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9d4b1-355">Next steps</span></span>
- <span data-ttu-id="9d4b1-356">Voor meer informatie over het configureren van services, [informatie over het configureren van Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="9d4b1-357">Defragmentatie metrische gegevens definiëren is eenrichtingssessie tooconsolidate belasting van de knooppunten in plaats van af te spreiden. toolearn hoe tooconfigure defragmentatie, raadpleeg dan te[in dit artikel](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="9d4b1-358">toofind uit over hoe Hallo Cluster Resource Manager beheert en een compromis tussen de werklast van de cluster Hallo, bekijk Hallo artikel op [load balancing](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="9d4b1-359">Vanaf Hallo begin starten en [ophalen van een inleiding toohello Service Fabric-Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="9d4b1-360">Verplaatsingkosten is één manier toohello Cluster Resource Manager-signalering dat bepaalde services zijn duurder toomove dan andere.</span><span class="sxs-lookup"><span data-stu-id="9d4b1-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="9d4b1-361">toolearn meer informatie over verplaatsingskosten, Raadpleeg te[in dit artikel](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="9d4b1-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
