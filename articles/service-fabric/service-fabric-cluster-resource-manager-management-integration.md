---
title: Service Fabric Cluster Resource Manager - Management-integratie | Microsoft Docs
description: Een overzicht van de integratiepunten tussen de Cluster Resource Manager en Service Fabric-beheer.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 956cd0b8-b6e3-4436-a224-8766320e8cd7
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9601e758e1033b4e2f86c2c230d4f49479fe6f45
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="cluster-resource-manager-integration-with-service-fabric-cluster-management"></a><span data-ttu-id="d96ba-103">Cluster resource manager-integratie met Service Fabric-Clusterbeheer</span><span class="sxs-lookup"><span data-stu-id="d96ba-103">Cluster resource manager integration with Service Fabric cluster management</span></span>
<span data-ttu-id="d96ba-104">De Service Fabric Cluster Resource Manager biedt geen upgrades station in Service Fabric, maar het is betrokken.</span><span class="sxs-lookup"><span data-stu-id="d96ba-104">The Service Fabric Cluster Resource Manager doesn't drive upgrades in Service Fabric, but it is involved.</span></span> <span data-ttu-id="d96ba-105">De eerste manier die de Cluster Resource Manager met management is door de gewenste status van het cluster en de services in het bijhouden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-105">The first way that the Cluster Resource Manager helps with management is by tracking the desired state of the cluster and the services inside it.</span></span> <span data-ttu-id="d96ba-106">De Cluster Resource Manager verzendt statusrapporten wanneer deze niet kan het cluster in de gewenste configuratie geplaatst.</span><span class="sxs-lookup"><span data-stu-id="d96ba-106">The Cluster Resource Manager sends out health reports when it cannot put the cluster into the desired configuration.</span></span> <span data-ttu-id="d96ba-107">Bijvoorbeeld, als er onvoldoende capaciteit verzendt de Cluster Resource Manager health-waarschuwingen en fouten die wijzen op het probleem.</span><span class="sxs-lookup"><span data-stu-id="d96ba-107">For example, if there is insufficient capacity the Cluster Resource Manager sends out health warnings and errors indicating the problem.</span></span> <span data-ttu-id="d96ba-108">Een andere stukje integratie heeft te maken met de werking van upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-108">Another piece of integration has to do with how upgrades work.</span></span> <span data-ttu-id="d96ba-109">De Cluster Resource Manager verandert het gedrag enigszins tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-109">The Cluster Resource Manager alters its behavior slightly during upgrades.</span></span>  

## <a name="health-integration"></a><span data-ttu-id="d96ba-110">Health-integratie</span><span class="sxs-lookup"><span data-stu-id="d96ba-110">Health integration</span></span>
<span data-ttu-id="d96ba-111">De Cluster Resource Manager houdt voortdurend de regels die u hebt gedefinieerd voor de plaatsing van uw services.</span><span class="sxs-lookup"><span data-stu-id="d96ba-111">The Cluster Resource Manager constantly tracks the rules you have defined for placing your services.</span></span> <span data-ttu-id="d96ba-112">Het houdt ook de resterende capaciteit voor elke metriek op de knooppunten in het cluster en in het cluster als geheel.</span><span class="sxs-lookup"><span data-stu-id="d96ba-112">It also tracks the remaining capacity for each metric on the nodes and in the cluster and in the cluster as a whole.</span></span> <span data-ttu-id="d96ba-113">Als deze kan niet voldoen aan deze regels of als er onvoldoende capaciteit, status, waarschuwingen en fouten verzonden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-113">If it can't satisfy those rules or if there is insufficient capacity, health warnings and errors are emitted.</span></span> <span data-ttu-id="d96ba-114">Als bijvoorbeeld een knooppunt ligt boven de capaciteit en de Cluster Resource Manager zal proberen de situatie oplossen door het verplaatsen van services.</span><span class="sxs-lookup"><span data-stu-id="d96ba-114">For example, if a node is over capacity and the Cluster Resource Manager will try to fix the situation by moving services.</span></span> <span data-ttu-id="d96ba-115">Als deze niet de situatie oplossen zendt het een waarschuwing die aangeeft welk knooppunt is overbelast en voor welke metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="d96ba-115">If it can't correct the situation it emits a health warning indicating which node is over capacity, and for which metrics.</span></span>

<span data-ttu-id="d96ba-116">Een ander voorbeeld van de Resource Manager-waarschuwingen is schendingen van plaatsingsbeperkingen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-116">Another example of the Resource Manager's health warnings is violations of placement constraints.</span></span> <span data-ttu-id="d96ba-117">Bijvoorbeeld, als u een beperking voor de plaatsing hebt gedefinieerd (zoals `“NodeColor == Blue”`) en de Resource Manager detecteert een schending van deze beperking, het verzendt een waarschuwing.</span><span class="sxs-lookup"><span data-stu-id="d96ba-117">For example, if you have defined a placement constraint (such as `“NodeColor == Blue”`) and the Resource Manager detects a violation of that constraint, it emits a health warning.</span></span> <span data-ttu-id="d96ba-118">Dit geldt voor aangepaste beperkingen en de standaardbeperkingen (zoals de beperkingen Foutdomein en het upgraden van domein).</span><span class="sxs-lookup"><span data-stu-id="d96ba-118">This is true for custom constraints and the default constraints (like the Fault Domain and Upgrade Domain constraints).</span></span>

<span data-ttu-id="d96ba-119">Hier volgt een voorbeeld van een dergelijke statusrapport.</span><span class="sxs-lookup"><span data-stu-id="d96ba-119">Here’s an example of one such health report.</span></span> <span data-ttu-id="d96ba-120">In dit geval is het statusrapport voor een van de partities van de service.</span><span class="sxs-lookup"><span data-stu-id="d96ba-120">In this case, the health report is for one of the system service’s partitions.</span></span> <span data-ttu-id="d96ba-121">De health-bericht geeft aan dat de replica's van de betreffende partitie tijdelijk worden verpakt in te weinig domeinen upgraden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-121">The health message indicates the replicas of that partition are temporarily packed into too few Upgrade Domains.</span></span>

```posh
PS C:\Users\User > Get-WindowsFabricPartitionHealth -PartitionId '00000000-0000-0000-0000-000000000001'


PartitionId           : 00000000-0000-0000-0000-000000000001
AggregatedHealthState : Warning
UnhealthyEvaluations  :
                        Unhealthy event: SourceId='System.PLB', Property='ReplicaConstraintViolation_UpgradeDomain', HealthState='Warning', ConsiderWarningAsError=false.

ReplicaHealthStates   :
                        ReplicaId             : 130766528804733380
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528804577821
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528854889931
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528804577822
                        AggregatedHealthState : Ok

                        ReplicaId             : 130837073190680024
                        AggregatedHealthState : Ok

HealthEvents          :
                        SourceId              : System.PLB
                        Property              : ReplicaConstraintViolation_UpgradeDomain
                        HealthState           : Warning
                        SequenceNumber        : 130837100116930204
                        SentAt                : 8/10/2015 7:53:31 PM
                        ReceivedAt            : 8/10/2015 7:53:33 PM
                        TTL                   : 00:01:05
                        Description           : The Load Balancer has detected a Constraint Violation for this Replica: fabric:/System/FailoverManagerService Secondary Partition 00000000-0000-0000-0000-000000000001 is
                        violating the Constraint: UpgradeDomain Details: UpgradeDomain ID -- 4, Replica on NodeName -- Node.8 Currently Upgrading -- false Distribution Policy -- Packing
                        RemoveWhenExpired     : True
                        IsExpired             : False
                        Transitions           : Ok->Warning = 8/10/2015 7:13:02 PM, LastError = 1/1/0001 12:00:00 AM
```

<span data-ttu-id="d96ba-122">Dit is wat dit bericht health zorgt ervoor dat ons is:</span><span class="sxs-lookup"><span data-stu-id="d96ba-122">Here's what this health message is telling us is:</span></span>

1. <span data-ttu-id="d96ba-123">De replica's zichzelf zijn in orde: elk AggregatedHealthState heeft: Ok</span><span class="sxs-lookup"><span data-stu-id="d96ba-123">All the replicas themselves are healthy: Each has AggregatedHealthState : Ok</span></span>
2. <span data-ttu-id="d96ba-124">De beperking van het upgraden van domein distributie is momenteel wordt geschonden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-124">The Upgrade Domain distribution constraint is currently being violated.</span></span> <span data-ttu-id="d96ba-125">Dit betekent dat een bepaald domein voor het upgraden meer replica's van deze partitie dan nodig is.</span><span class="sxs-lookup"><span data-stu-id="d96ba-125">This means a particular Upgrade Domain has more replicas from this partition than it should.</span></span>
3. <span data-ttu-id="d96ba-126">Welk knooppunt bevat de replica waardoor de schending.</span><span class="sxs-lookup"><span data-stu-id="d96ba-126">Which node contains the replica causing the violation.</span></span> <span data-ttu-id="d96ba-127">In dit geval is het knooppunt met de naam 'Node.8'</span><span class="sxs-lookup"><span data-stu-id="d96ba-127">In this case it's the node with the name "Node.8"</span></span>
4. <span data-ttu-id="d96ba-128">Hiermee wordt aangegeven of een upgrade die momenteel gebeurt er voor deze partitie ('momenteel upgraden--false")</span><span class="sxs-lookup"><span data-stu-id="d96ba-128">Whether an upgrade is currently happening for this partition ("Currently Upgrading -- false")</span></span>
5. <span data-ttu-id="d96ba-129">Het distributiebeleid voor deze service: 'Distributie beleid--verpakking'.</span><span class="sxs-lookup"><span data-stu-id="d96ba-129">The distribution policy for this service: "Distribution Policy -- Packing".</span></span> <span data-ttu-id="d96ba-130">Hiermee wordt bepaald door de `RequireDomainDistribution` [plaatsing beleid](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span><span class="sxs-lookup"><span data-stu-id="d96ba-130">This is governed by the `RequireDomainDistribution` [placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span></span> <span data-ttu-id="d96ba-131">'Verpakking' geeft aan dat in dit geval DomainDistribution _niet_ vereist, zodat de juiste plaatsing beleid is niet opgegeven voor deze service.</span><span class="sxs-lookup"><span data-stu-id="d96ba-131">"Packing" indicates that in this case DomainDistribution was _not_ required, so we know that placement policy was not specified for this service.</span></span> 
6. <span data-ttu-id="d96ba-132">Wanneer het rapport is er gebeurd - 8-10-2015 7:13:02 PM</span><span class="sxs-lookup"><span data-stu-id="d96ba-132">When the report happened - 8/10/2015 7:13:02 PM</span></span>

<span data-ttu-id="d96ba-133">Informatie over deze bevoegdheden waarschuwingen die worden geactiveerd in productie te laten u weten iets is een fout opgetreden en wordt ook gebruikt om te detecteren en onjuiste upgrades is gestopt.</span><span class="sxs-lookup"><span data-stu-id="d96ba-133">Information like this powers alerts that fire in production to let you know something has gone wrong and is also used to detect and halt bad upgrades.</span></span> <span data-ttu-id="d96ba-134">In dit geval willen we zien als we kunt achterhalen waarom de Resource Manager moest de replica's in het domein Upgrade pack.</span><span class="sxs-lookup"><span data-stu-id="d96ba-134">In this case, we’d want to see if we can figure out why the Resource Manager had to pack the replicas into the Upgrade Domain.</span></span> <span data-ttu-id="d96ba-135">Meestal verpakking is tijdelijke omdat de knooppunten in de andere Upgrade domeinen, bijvoorbeeld zijn.</span><span class="sxs-lookup"><span data-stu-id="d96ba-135">Usually packing is transient because the nodes in the other Upgrade Domains were down, for example.</span></span>

<span data-ttu-id="d96ba-136">Stel dat de Cluster Resource Manager wordt geprobeerd bepaalde services plaatsen, maar er oplossingen die werken niet.</span><span class="sxs-lookup"><span data-stu-id="d96ba-136">Let’s say the Cluster Resource Manager is trying to place some services, but there aren't any solutions that work.</span></span> <span data-ttu-id="d96ba-137">Wanneer services kunnen niet worden geplaatst, is het meestal voor een van de volgende redenen:</span><span class="sxs-lookup"><span data-stu-id="d96ba-137">When services can't be placed, it is usually for one of the following reasons:</span></span>

1. <span data-ttu-id="d96ba-138">Sommige tijdelijke toestand heeft gemaakt, het onmogelijk om deze service-exemplaar of de replica correct plaatsen</span><span class="sxs-lookup"><span data-stu-id="d96ba-138">Some transient condition has made it impossible to place this service instance or replica correctly</span></span>
2. <span data-ttu-id="d96ba-139">Vereisten voor de plaatsing van de service zijn ongeldig.</span><span class="sxs-lookup"><span data-stu-id="d96ba-139">The service’s placement requirements are unsatisfiable.</span></span>

<span data-ttu-id="d96ba-140">In dergelijke gevallen kunnen statusrapporten van de Cluster Resource Manager u bepalen waarom de service kan niet worden geplaatst.</span><span class="sxs-lookup"><span data-stu-id="d96ba-140">In these cases, health reports from the Cluster Resource Manager help you determine why the service can’t be placed.</span></span> <span data-ttu-id="d96ba-141">We noemen dit proces de beperking eliminatie volgorde.</span><span class="sxs-lookup"><span data-stu-id="d96ba-141">We call this process the constraint elimination sequence.</span></span> <span data-ttu-id="d96ba-142">Tijdens het wordt het systeem begeleid bij de geconfigureerde beperkingen die invloed hebben op de service en registreert wat het elimineren.</span><span class="sxs-lookup"><span data-stu-id="d96ba-142">During it, the system walks through the configured constraints affecting the service and records what they eliminate.</span></span> <span data-ttu-id="d96ba-143">Deze manier wanneer de services niet kunnen worden geplaatst, kunt u zien welke knooppunten zijn geëlimineerd en waarom.</span><span class="sxs-lookup"><span data-stu-id="d96ba-143">This way when services aren’t able to be placed, you can see which nodes were eliminated and why.</span></span>

## <a name="constraint-types"></a><span data-ttu-id="d96ba-144">Beperkingstypen</span><span class="sxs-lookup"><span data-stu-id="d96ba-144">Constraint types</span></span>
<span data-ttu-id="d96ba-145">We hebben over elk van de andere beperkingen in deze health-rapporten.</span><span class="sxs-lookup"><span data-stu-id="d96ba-145">Let’s talk about each of the different constraints in these health reports.</span></span> <span data-ttu-id="d96ba-146">Hier ziet u health berichten die zijn gerelateerd aan deze beperkingen als replica's kunnen niet worden geplaatst.</span><span class="sxs-lookup"><span data-stu-id="d96ba-146">You will see health messages related to these constraints when replicas can't be placed.</span></span>

* <span data-ttu-id="d96ba-147">**ReplicaExclusionStatic** en **ReplicaExclusionDynamic**: deze beperkingen geeft aan dat er een oplossing is afgewezen omdat twee serviceobjecten van dezelfde partitie zou hebben op hetzelfde knooppunt worden geplaatst.</span><span class="sxs-lookup"><span data-stu-id="d96ba-147">**ReplicaExclusionStatic** and **ReplicaExclusionDynamic**: These constraints indicates that a solution was rejected because two service objects from the same partition would have to be placed on the same node.</span></span> <span data-ttu-id="d96ba-148">Dit is niet toegestaan omdat vervolgens fout van dat knooppunt overmatig gevolgen zou hebben voor deze partitie.</span><span class="sxs-lookup"><span data-stu-id="d96ba-148">This isn’t allowed because then failure of that node would overly impact that partition.</span></span> <span data-ttu-id="d96ba-149">ReplicaExclusionStatic en ReplicaExclusionDynamic zijn bijna dezelfde regel en de verschillen niet echt uitmaken.</span><span class="sxs-lookup"><span data-stu-id="d96ba-149">ReplicaExclusionStatic and ReplicaExclusionDynamic are almost the same rule and the differences don't really matter.</span></span> <span data-ttu-id="d96ba-150">Als u een beperking eliminatie reeks die de ReplicaExclusionStatic of ReplicaExclusionDynamic beperking bevat ziet, wordt de Cluster Resource Manager denkt dat er niet voldoende knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d96ba-150">If you are seeing a constraint elimination sequence containing either the ReplicaExclusionStatic or ReplicaExclusionDynamic constraint, the Cluster Resource Manager thinks that there aren’t enough nodes.</span></span> <span data-ttu-id="d96ba-151">Hiervoor moet de resterende oplossingen voor het gebruik van deze ongeldige plaatsingen die zijn niet toegestaan.</span><span class="sxs-lookup"><span data-stu-id="d96ba-151">This requires remaining solutions to use these invalid placements which are disallowed.</span></span> <span data-ttu-id="d96ba-152">De andere beperkingen in de reeks wordt meestal Vertel ons waarom knooppunten in de eerste plaats worden wordt geëlimineerd.</span><span class="sxs-lookup"><span data-stu-id="d96ba-152">The other constraints in the sequence will usually tell us why nodes are being eliminated in the first place.</span></span>
* <span data-ttu-id="d96ba-153">**PlacementConstraint**: als u dit bericht ziet, betekent dit dat we sommige knooppunten geëlimineerd omdat ze niet overeenkomen met de plaatsingsbeperkingen voor de service.</span><span class="sxs-lookup"><span data-stu-id="d96ba-153">**PlacementConstraint**: If you see this message, it means that we eliminated some nodes because they didn’t match the service’s placement constraints.</span></span> <span data-ttu-id="d96ba-154">We traceren uit de momenteel geconfigureerde plaatsingsbeperkingen als onderdeel van dit bericht.</span><span class="sxs-lookup"><span data-stu-id="d96ba-154">We trace out the currently configured placement constraints as a part of this message.</span></span> <span data-ttu-id="d96ba-155">Dit is normaal als er een plaatsing-beperking gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="d96ba-155">This is normal if you have a placement constraint defined.</span></span> <span data-ttu-id="d96ba-156">Echter, als de beperking van de plaatsing van onjuist wordt veroorzaakt door te veel knooppunten om te worden geëlimineerd dit is hoe merkt u.</span><span class="sxs-lookup"><span data-stu-id="d96ba-156">However, if placement constraint is incorrectly causing too many nodes to be eliminated this is how you would notice.</span></span>
* <span data-ttu-id="d96ba-157">**NodeCapacity**: deze beperking betekent dat de Cluster Resource Manager kan geen, de replica's op de aangegeven knooppunten plaatsen omdat die ze via capaciteit plaatst.</span><span class="sxs-lookup"><span data-stu-id="d96ba-157">**NodeCapacity**: This constraint means that the Cluster Resource Manager couldn’t place the replicas on the indicated nodes because that would put them over capacity.</span></span>
* <span data-ttu-id="d96ba-158">**Affiniteit**: deze beperking geeft aan dat we de replica kan niet plaats op de betrokken knooppunten omdat hierdoor een schending van de affiniteit-beperking.</span><span class="sxs-lookup"><span data-stu-id="d96ba-158">**Affinity**: This constraint indicates that we couldn’t place the replica on the affected nodes since it would cause a violation of the affinity constraint.</span></span> <span data-ttu-id="d96ba-159">Meer informatie over de affiniteit is in [in dit artikel](service-fabric-cluster-resource-manager-advanced-placement-rules-affinity.md)</span><span class="sxs-lookup"><span data-stu-id="d96ba-159">More information on affinity is in [this article](service-fabric-cluster-resource-manager-advanced-placement-rules-affinity.md)</span></span>
* <span data-ttu-id="d96ba-160">**FaultDomain** en **UpgradeDomain**: deze beperking elimineert knooppunten if plaatsen van de replica op de knooppunten aangegeven dat verpakken in een bepaalde fout of een upgradedomein.</span><span class="sxs-lookup"><span data-stu-id="d96ba-160">**FaultDomain** and **UpgradeDomain**: This constraint eliminates nodes if placing the replica on the indicated nodes would cause packing in a particular fault or upgrade domain.</span></span> <span data-ttu-id="d96ba-161">Enkele voorbeelden voor het bespreken van deze beperking worden weergegeven in het onderwerp op [probleem- en upgrade domain-beperkingen en het resulterende gedrag](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="d96ba-161">Several examples discussing this constraint are presented in the topic on [fault and upgrade domain constraints and resulting behavior](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
* <span data-ttu-id="d96ba-162">**PreferredLocation**: er mag niet deze beperking verwijderen van knooppunten van de oplossing omdat deze wordt uitgevoerd als een optimalisatie standaard normaal.</span><span class="sxs-lookup"><span data-stu-id="d96ba-162">**PreferredLocation**: You shouldn’t normally see this constraint removing nodes from the solution since it runs as an optimization by default.</span></span> <span data-ttu-id="d96ba-163">De voorkeur locatiebeperking is ook aanwezig zijn tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-163">The preferred location constraint is also present during upgrades.</span></span> <span data-ttu-id="d96ba-164">Tijdens de upgrade wordt gebruikt voor het verplaatsen van services terug naar waar ze zijn wanneer de upgrade wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="d96ba-164">During upgrade it is used to move services back to where they were when the upgrade started.</span></span>

## <a name="blocklisting-nodes"></a><span data-ttu-id="d96ba-165">Blocklisting knooppunten</span><span class="sxs-lookup"><span data-stu-id="d96ba-165">Blocklisting Nodes</span></span>
<span data-ttu-id="d96ba-166">Een andere health-bericht is de Cluster Resource Manager-rapporten wanneer knooppunten zijn blocklisted.</span><span class="sxs-lookup"><span data-stu-id="d96ba-166">Another health message the Cluster Resource Manager reports is when nodes are blocklisted.</span></span> <span data-ttu-id="d96ba-167">U kunt blocklisting beschouwen als een tijdelijke beperking die automatisch voor u is toegepast.</span><span class="sxs-lookup"><span data-stu-id="d96ba-167">You can think of blocklisting as a temporary constraint that is automatically applied for you.</span></span> <span data-ttu-id="d96ba-168">Knooppunten krijgen blocklisted wanneer ze herhaalde fouten optreden tijdens het starten van exemplaren van dat servicetype.</span><span class="sxs-lookup"><span data-stu-id="d96ba-168">Nodes get blocklisted when they experience repeated failures when launching instances of that service type.</span></span> <span data-ttu-id="d96ba-169">Knooppunten zijn blocklisted op basis van de per-service-type.</span><span class="sxs-lookup"><span data-stu-id="d96ba-169">Nodes are blocklisted on a per-service-type basis.</span></span> <span data-ttu-id="d96ba-170">Een knooppunt is mogelijk blocklisted voor één service-type maar niet nog een.</span><span class="sxs-lookup"><span data-stu-id="d96ba-170">A node may be blocklisted for one service type but not another.</span></span> 

<span data-ttu-id="d96ba-171">Ziet u blocklisting kick in vaak tijdens de ontwikkeling: sommige bug zorgt ervoor dat uw ServiceHost vastloopt bij het opstarten.</span><span class="sxs-lookup"><span data-stu-id="d96ba-171">You'll see blocklisting kick in often during development: some bug causes your service host to crash on startup.</span></span> <span data-ttu-id="d96ba-172">Service Fabric probeert te maken van de ServiceHost een paar keer en de fout blijft optreden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-172">Service Fabric tries to create the service host a few times, and the failure keeps occurring.</span></span> <span data-ttu-id="d96ba-173">Na enkele pogingen het knooppunt blocklisted opgehaald en de Cluster Resource Manager zal proberen de service elders te maken.</span><span class="sxs-lookup"><span data-stu-id="d96ba-173">After a few attempts, the node gets blocklisted, and the Cluster Resource Manager will try to create the service elsewhere.</span></span> <span data-ttu-id="d96ba-174">Als deze fout op meerdere knooppunten voordoet blijft, is het mogelijk dat alle knooppunten in de cluster-end van geldige geblokkeerd.</span><span class="sxs-lookup"><span data-stu-id="d96ba-174">If that failure keeps happening on multiple nodes, it's possible that all of the valid nodes in the cluster end up blocked.</span></span> <span data-ttu-id="d96ba-175">Blocklisting kan ook zo veel knooppunten dat niet voldoende is de service om te voldoen aan de gewenste schaal kunt starten verwijderen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-175">Blocklisting cna also remove so many nodes that not enough can successfully launch the service to meet the desired scale.</span></span> <span data-ttu-id="d96ba-176">Doorgaans ziet u extra fouten of waarschuwingen van de Cluster Resource Manager die aangeeft dat de service onder de gewenste replica of aantal exemplaren, evenals de gezondheid van berichten die aangeven wat de fout is dat leidt tot het blocklisting in de eerste plaats.</span><span class="sxs-lookup"><span data-stu-id="d96ba-176">You'll typically see additional errors or warnings from the Cluster Resource Manager indicating that the service is below the desired replica or instance count, as well as health messages indicating what the failure is that's leading to the blocklisting in the first place.</span></span>

<span data-ttu-id="d96ba-177">Blocklisting is geen permanente voorwaarde.</span><span class="sxs-lookup"><span data-stu-id="d96ba-177">Blocklisting is not a permanent condition.</span></span> <span data-ttu-id="d96ba-178">Het knooppunt is verwijderd uit de blocklist na een paar minuten en Service Fabric kunnen de services op dat knooppunt opnieuw activeren.</span><span class="sxs-lookup"><span data-stu-id="d96ba-178">After a few minutes, the node is removed from the blocklist and Service Fabric may activate the services on that node again.</span></span> <span data-ttu-id="d96ba-179">Services kunnen blijven mislukken, dan is het knooppunt opnieuw blocklisted voor dat servicetype.</span><span class="sxs-lookup"><span data-stu-id="d96ba-179">If services continue to fail, the node is blocklisted for that service type again.</span></span> 

### <a name="constraint-priorities"></a><span data-ttu-id="d96ba-180">Beperking prioriteiten</span><span class="sxs-lookup"><span data-stu-id="d96ba-180">Constraint priorities</span></span>

> [!WARNING]
> <span data-ttu-id="d96ba-181">Beperking prioriteiten wijzigen wordt niet aangeraden en mogelijk belangrijke nadelige gevolgen hebben voor uw cluster.</span><span class="sxs-lookup"><span data-stu-id="d96ba-181">Changing constraint priorities is not recommended and may have significant adverse effects on your cluster.</span></span> <span data-ttu-id="d96ba-182">De onderstaande informatie is opgegeven voor de verwijzing van de prioriteiten van de beperking standaard en hun gedrag.</span><span class="sxs-lookup"><span data-stu-id="d96ba-182">The below information is provided for reference of the default constraint priorities and their behavior.</span></span> 
>

<span data-ttu-id="d96ba-183">Met alle van deze beperkingen u mogelijk hebt is denkt 'Hey – ik denk dat dat veroorzaakt domein beperkingen het belangrijkste in mijn systeem is zijn.</span><span class="sxs-lookup"><span data-stu-id="d96ba-183">With all of these constraints, you may have been thinking “Hey – I think that fault domain constraints are the most important thing in my system.</span></span> <span data-ttu-id="d96ba-184">Om ervoor te zorgen dat de beperking van fouttolerantie domein niet wordt geschonden, ben ik bereid andere beperkingen schenden."</span><span class="sxs-lookup"><span data-stu-id="d96ba-184">In order to ensure the fault domain constraint isn't violated, I’m willing to violate other constraints.”</span></span>

<span data-ttu-id="d96ba-185">Beperkingen kunnen worden geconfigureerd met verschillende prioriteitsniveaus.</span><span class="sxs-lookup"><span data-stu-id="d96ba-185">Constraints can be configured with different priority levels.</span></span> <span data-ttu-id="d96ba-186">Dit zijn:</span><span class="sxs-lookup"><span data-stu-id="d96ba-186">These are:</span></span>

   - <span data-ttu-id="d96ba-187">'harde' (0)</span><span class="sxs-lookup"><span data-stu-id="d96ba-187">“hard” (0)</span></span>
   - <span data-ttu-id="d96ba-188">'soft' (1)</span><span class="sxs-lookup"><span data-stu-id="d96ba-188">“soft” (1)</span></span>
   - <span data-ttu-id="d96ba-189">'optimalisatie' (2)</span><span class="sxs-lookup"><span data-stu-id="d96ba-189">“optimization” (2)</span></span>
   - <span data-ttu-id="d96ba-190">"off" (-1).</span><span class="sxs-lookup"><span data-stu-id="d96ba-190">“off” (-1).</span></span> 
   
<span data-ttu-id="d96ba-191">De meeste van de beperkingen zijn standaard geconfigureerd als harde beperkingen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-191">Most of the constraints are configured as hard constraints by default.</span></span>

<span data-ttu-id="d96ba-192">Als u de prioriteit van beperkingen is ongewoon.</span><span class="sxs-lookup"><span data-stu-id="d96ba-192">Changing the priority of constraints is uncommon.</span></span> <span data-ttu-id="d96ba-193">Er zijn keren waar beperking prioriteiten nodig zijn voor het wijzigen, meestal voor een andere fout of probleem dat invloed had op de omgeving te omzeilen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-193">There have been times where constraint priorities needed to change, usually to work around some other bug or behavior that was impacting the environment.</span></span> <span data-ttu-id="d96ba-194">In het algemeen de flexibiliteit van de infrastructuur van de prioriteit beperking uitstekend heeft gewerkt, maar vaak is niet nodig.</span><span class="sxs-lookup"><span data-stu-id="d96ba-194">Generally the flexibility of the constraint priority infrastructure has worked very well, but it isn't needed often.</span></span> <span data-ttu-id="d96ba-195">De meeste gevallen alles bevindt zich op hun Standaardprioriteiten.</span><span class="sxs-lookup"><span data-stu-id="d96ba-195">Most of the time everything sits at their default priorities.</span></span> 

<span data-ttu-id="d96ba-196">Het niveau van de prioriteit niet inhouden dat een bepaalde beperking _wordt_ worden geschonden, evenmin dat zal altijd worden voldaan.</span><span class="sxs-lookup"><span data-stu-id="d96ba-196">The priority levels don't mean that a given constraint _will_ be violated, nor that it will always be met.</span></span> <span data-ttu-id="d96ba-197">Beperking prioriteiten definiëren de volgorde waarin u beperkingen gelden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-197">Constraint priorities define an order in which constraints are enforced.</span></span> <span data-ttu-id="d96ba-198">Prioriteiten definiëren de voor-en nadelen wanneer is het onmogelijk om te voldoen aan alle beperkingen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-198">Priorities define the tradeoffs when it is impossible to satisfy all constraints.</span></span> <span data-ttu-id="d96ba-199">De beperkingen kunnen doorgaans worden voldaan tenzij er iets anders aan de hand in de omgeving.</span><span class="sxs-lookup"><span data-stu-id="d96ba-199">Usually all the constraints can be satisfied unless there's something else going on in the environment.</span></span> <span data-ttu-id="d96ba-200">Enkele voorbeelden van scenario's die tot schendingen van plaatsingsbeperkingen leiden zijn strijdige beperkingen of grote aantallen gelijktijdige fouten.</span><span class="sxs-lookup"><span data-stu-id="d96ba-200">Some examples of scenarios that will lead to constraint violations are conflicting constraints, or large numbers of concurrent failures.</span></span>

<span data-ttu-id="d96ba-201">U kunt de prioriteiten beperking wijzigen in geavanceerde situaties.</span><span class="sxs-lookup"><span data-stu-id="d96ba-201">In advanced situations, you can change the constraint priorities.</span></span> <span data-ttu-id="d96ba-202">Stel dat u wilt ervoor te zorgen dat affiniteit altijd zouden worden geschonden, wanneer dat nodig is voor het oplossen van problemen met knooppunt-capaciteit.</span><span class="sxs-lookup"><span data-stu-id="d96ba-202">For example, say you wanted to ensure that affinity would always be violated when necessary to solve node capacity issues.</span></span> <span data-ttu-id="d96ba-203">Om dit te bereiken, kan u de prioriteit van de beperking affiniteit 'soft' (1) instellen en laat de capaciteit beperking is ingesteld op 'harde' (0).</span><span class="sxs-lookup"><span data-stu-id="d96ba-203">To achieve this, you could set the priority of the affinity constraint to “soft” (1) and leave the capacity constraint set to “hard” (0).</span></span>

<span data-ttu-id="d96ba-204">De standaardwaarden van de prioriteit voor de andere beperkingen zijn opgegeven in de volgende configuratie:</span><span class="sxs-lookup"><span data-stu-id="d96ba-204">The default priority values for the different constraints are specified in the following config:</span></span>

<span data-ttu-id="d96ba-205">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="d96ba-205">ClusterManifest.xml</span></span>

```xml
        <Section Name="PlacementAndLoadBalancing">
            <Parameter Name="PlacementConstraintPriority" Value="0" />
            <Parameter Name="CapacityConstraintPriority" Value="0" />
            <Parameter Name="AffinityConstraintPriority" Value="0" />
            <Parameter Name="FaultDomainConstraintPriority" Value="0" />
            <Parameter Name="UpgradeDomainConstraintPriority" Value="1" />
            <Parameter Name="PreferredLocationConstraintPriority" Value="2" />
        </Section>
```

<span data-ttu-id="d96ba-206">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure:</span><span class="sxs-lookup"><span data-stu-id="d96ba-206">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "PlacementConstraintPriority",
          "value": "0"
      },
      {
          "name": "CapacityConstraintPriority",
          "value": "0"
      },
      {
          "name": "AffinityConstraintPriority",
          "value": "0"
      },
      {
          "name": "FaultDomainConstraintPriority",
          "value": "0"
      },
      {
          "name": "UpgradeDomainConstraintPriority",
          "value": "1"
      },
      {
          "name": "PreferredLocationConstraintPriority",
          "value": "2"
      }
    ]
  }
]
```

## <a name="fault-domain-and-upgrade-domain-constraints"></a><span data-ttu-id="d96ba-207">Beperkingen voor fouttolerantie domein- en domein</span><span class="sxs-lookup"><span data-stu-id="d96ba-207">Fault domain and upgrade domain constraints</span></span>
<span data-ttu-id="d96ba-208">De Cluster Resource Manager wil services verdeeld tussen domeinen met fouten en upgrade te behouden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-208">The Cluster Resource Manager wants to keep services spread out among fault and upgrade domains.</span></span> <span data-ttu-id="d96ba-209">Deze modellen dit als een beperking in de Cluster Resource Manager-engine.</span><span class="sxs-lookup"><span data-stu-id="d96ba-209">It models this as a constraint inside the Cluster Resource Manager’s engine.</span></span> <span data-ttu-id="d96ba-210">Voor meer informatie over hoe ze worden gebruikt en hun specifieke gedrag, Raadpleeg het artikel op [clusterconfiguratie](service-fabric-cluster-resource-manager-cluster-description.md#fault-and-upgrade-domain-constraints-and-resulting-behavior).</span><span class="sxs-lookup"><span data-stu-id="d96ba-210">For more information on how they are used and their specific behavior, check out the article on [cluster configuration](service-fabric-cluster-resource-manager-cluster-description.md#fault-and-upgrade-domain-constraints-and-resulting-behavior).</span></span>

<span data-ttu-id="d96ba-211">De Cluster Resource Manager moet mogelijk een aantal replica's in een upgradedomein pack om door te gaan met upgrades, fouten of andere schendingen van plaatsingsbeperkingen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-211">The Cluster Resource Manager may need to pack a couple replicas into an upgrade domain in order to deal with upgrades, failures, or other constraint violations.</span></span> <span data-ttu-id="d96ba-212">Normaal gesproken verpakken in domeinen met fouten of upgrade gebeurt alleen wanneer er meerdere fouten of andere verloop in het systeem zo wordt voorkomen dat correcte plaatsing.</span><span class="sxs-lookup"><span data-stu-id="d96ba-212">Packing into fault or upgrade domains normally happens only when there are several failures or other churn in the system preventing correct placement.</span></span> <span data-ttu-id="d96ba-213">Als u wenst te verpakken zelfs tijdens deze situaties voorkomen, kunt u gebruikmaken van de `RequireDomainDistribution` [plaatsing beleid](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span><span class="sxs-lookup"><span data-stu-id="d96ba-213">If you wish to prevent packing even during these situations, you can utilize the `RequireDomainDistribution` [placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span></span> <span data-ttu-id="d96ba-214">Houd er rekening mee dat dit mogelijk servicebeschikbaarheid en betrouwbaarheid als een neveneffect van invloed zijn op, dus zorgvuldig rekening te houden.</span><span class="sxs-lookup"><span data-stu-id="d96ba-214">Note that this may affect service availability and reliability as a side effect, so consider it carefully.</span></span>

<span data-ttu-id="d96ba-215">De omgeving correct is geconfigureerd, alle beperkingen zijn volledig in acht genomen, zelfs tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-215">If the environment is configured correctly, all constraints are fully respected, even during upgrades.</span></span> <span data-ttu-id="d96ba-216">Het belangrijkste is dat dat de Cluster Resource Manager is Let op de beperkingen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-216">The key thing is that the Cluster Resource Manager is watching out for your constraints.</span></span> <span data-ttu-id="d96ba-217">Als er een schending gedetecteerd wordt onmiddellijk gerapporteerd en probeert om het probleem te verhelpen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-217">When it detects a violation it immediately reports it and tries to correct the issue.</span></span>

## <a name="the-preferred-location-constraint"></a><span data-ttu-id="d96ba-218">De voorkeur locatiebeperking</span><span class="sxs-lookup"><span data-stu-id="d96ba-218">The preferred location constraint</span></span>
<span data-ttu-id="d96ba-219">De beperking PreferredLocation is enigszins verschillen, als er twee verschillende manieren worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d96ba-219">The PreferredLocation constraint is a little different, as it has two different uses.</span></span> <span data-ttu-id="d96ba-220">Er is een gebruik van deze beperking tijdens toepassingsupgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-220">One use of this constraint is during application upgrades.</span></span> <span data-ttu-id="d96ba-221">De Cluster Resource Manager beheert automatisch deze beperking tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-221">The Cluster Resource Manager automatically manages this constraint during upgrades.</span></span> <span data-ttu-id="d96ba-222">Wordt gebruikt om ervoor te zorgen dat wanneer updates voltooid zijn of replica's naar de oorspronkelijke locatie retourneren.</span><span class="sxs-lookup"><span data-stu-id="d96ba-222">It is used to ensure that when upgrades are complete that replicas return to their initial locations.</span></span> <span data-ttu-id="d96ba-223">Het gebruik van de PreferredLocation-beperking is voor de [ `PreferredPrimaryDomain` plaatsing beleid](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md).</span><span class="sxs-lookup"><span data-stu-id="d96ba-223">The other use of the PreferredLocation constraint is for the [`PreferredPrimaryDomain` placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md).</span></span> <span data-ttu-id="d96ba-224">Deze optimalisaties zijn en daarom de PreferredLocation-beperking is de enige beperking standaard ingesteld op 'Optimalisatie'.</span><span class="sxs-lookup"><span data-stu-id="d96ba-224">Both of these are optimizations, and hence the PreferredLocation constraint is the only constraint set to "Optimization" by default.</span></span>

## <a name="upgrades"></a><span data-ttu-id="d96ba-225">Upgrades</span><span class="sxs-lookup"><span data-stu-id="d96ba-225">Upgrades</span></span>
<span data-ttu-id="d96ba-226">De Cluster Resource Manager helpt ook tijdens de toepassing en cluster, upgrades, waarin deze twee taken bevat:</span><span class="sxs-lookup"><span data-stu-id="d96ba-226">The Cluster Resource Manager also helps during application and cluster upgrades, during which it has two jobs:</span></span>

* <span data-ttu-id="d96ba-227">Zorg ervoor dat de regels van het cluster niet worden gecompromitteerd</span><span class="sxs-lookup"><span data-stu-id="d96ba-227">ensure that the rules of the cluster are not compromised</span></span>
* <span data-ttu-id="d96ba-228">Probeer te helpen bij de upgrade probleemloos</span><span class="sxs-lookup"><span data-stu-id="d96ba-228">try to help the upgrade go smoothly</span></span>

### <a name="keep-enforcing-the-rules"></a><span data-ttu-id="d96ba-229">Houd de regels afdwingen</span><span class="sxs-lookup"><span data-stu-id="d96ba-229">Keep enforcing the rules</span></span>
<span data-ttu-id="d96ba-230">Het belangrijkste wat u moet rekening houden met is dat de regels – de strikte beperkingen zoals plaatsingsbeperkingen en capaciteit - nog steeds worden afgedwongen tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-230">The main thing to be aware of is that the rules – the strict constraints like placement constraints and capacities - are still enforced during upgrades.</span></span> <span data-ttu-id="d96ba-231">Plaatsingsbeperkingen Zorg ervoor dat de werkbelasting van uw alleen uitgevoerd waar ze zijn toegestaan, zelfs tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="d96ba-231">Placement constraints ensure that your workloads only run where they are allowed to, even during upgrades.</span></span> <span data-ttu-id="d96ba-232">Wanneer services maximaal worden beperkt, kunnen upgrades langer duren.</span><span class="sxs-lookup"><span data-stu-id="d96ba-232">When services are highly constrained, upgrades can take longer.</span></span> <span data-ttu-id="d96ba-233">Wanneer de service of het knooppunt dat wordt uitgevoerd wordt verbroken voor een update worden enkele opties voor waar gaan.</span><span class="sxs-lookup"><span data-stu-id="d96ba-233">When the service or the node it is running on is brought down for an update there may be few options for where it can go.</span></span>

### <a name="smart-replacements"></a><span data-ttu-id="d96ba-234">Smart vervangingen</span><span class="sxs-lookup"><span data-stu-id="d96ba-234">Smart replacements</span></span>
<span data-ttu-id="d96ba-235">Wanneer een upgrade wordt gestart, maakt de Resource Manager een momentopname van de huidige indeling van het cluster.</span><span class="sxs-lookup"><span data-stu-id="d96ba-235">When an upgrade starts, the Resource Manager takes a snapshot of the current arrangement of the cluster.</span></span> <span data-ttu-id="d96ba-236">Omdat elk domein Upgrade is voltooid, wordt geprobeerd om te retourneren van de services die in dat domein upgraden naar hun oorspronkelijke positie zijn.</span><span class="sxs-lookup"><span data-stu-id="d96ba-236">As each Upgrade Domain completes, it attempts to return the services that were in that Upgrade Domain to their original arrangement.</span></span> <span data-ttu-id="d96ba-237">Op deze manier zijn er maximaal twee overgangen voor een service tijdens de upgrade.</span><span class="sxs-lookup"><span data-stu-id="d96ba-237">This way there are at most two transitions for a service during the upgrade.</span></span> <span data-ttu-id="d96ba-238">Er is een verplaatsing uit van de betrokken knooppunt en een teruggaan in.</span><span class="sxs-lookup"><span data-stu-id="d96ba-238">There is one move out of the affected node and one move back in.</span></span> <span data-ttu-id="d96ba-239">Het cluster of de service wordt teruggezonden naar de manier waarop het was vóór de upgrade zorgt er ook voor dat de upgrade heeft geen invloed op de indeling van het cluster.</span><span class="sxs-lookup"><span data-stu-id="d96ba-239">Returning the cluster or service to how it was before the upgrade also ensures the upgrade doesn’t impact the layout of the cluster.</span></span> 

### <a name="reduced-churn"></a><span data-ttu-id="d96ba-240">Verminderde verloop</span><span class="sxs-lookup"><span data-stu-id="d96ba-240">Reduced churn</span></span>
<span data-ttu-id="d96ba-241">Een andere wat er tijdens upgrades gebeurt is die de Cluster Resource Manager schakelt netwerktaakverdeling.</span><span class="sxs-lookup"><span data-stu-id="d96ba-241">Another thing that happens during upgrades is that the Cluster Resource Manager turns off balancing.</span></span> <span data-ttu-id="d96ba-242">Zo wordt voorkomen dat netwerktaakverdeling voorkomt u dat onnodige reacties naar de upgrade zelf, zoals het verplaatsen van services in knooppunten die u voor de upgrade verwijderd.</span><span class="sxs-lookup"><span data-stu-id="d96ba-242">Preventing balancing prevents unnecessary reactions to the upgrade itself, like moving services into nodes that were emptied for the upgrade.</span></span> <span data-ttu-id="d96ba-243">Als de desbetreffende upgrade de upgrade van een Cluster is, klikt u vervolgens het volledige cluster is niet in balans tijdens de upgrade.</span><span class="sxs-lookup"><span data-stu-id="d96ba-243">If the upgrade in question is a Cluster upgrade, then the entire cluster is not balanced during the upgrade.</span></span> <span data-ttu-id="d96ba-244">Beperking controles blijft actief, alleen verkeer op basis van de proactieve verdeling van metrische gegevens is uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="d96ba-244">Constraint checks stay active, only movement based on the proactive balancing of metrics is disabled.</span></span>

### <a name="buffered-capacity--upgrade"></a><span data-ttu-id="d96ba-245">Buffer capaciteit & Upgrade</span><span class="sxs-lookup"><span data-stu-id="d96ba-245">Buffered Capacity & Upgrade</span></span>
<span data-ttu-id="d96ba-246">Doorgaans wilt u de upgrade is voltooid, zelfs als het cluster wordt begrensd of bijna vol.</span><span class="sxs-lookup"><span data-stu-id="d96ba-246">Generally you want the upgrade to complete even if the cluster is constrained or close to full.</span></span> <span data-ttu-id="d96ba-247">Het beheren van de capaciteit van het cluster is zelfs belangrijker tijdens upgrades dan normaal.</span><span class="sxs-lookup"><span data-stu-id="d96ba-247">Managing the capacity of the cluster is even more important during upgrades than usual.</span></span> <span data-ttu-id="d96ba-248">Afhankelijk van het aantal upgradedomeinen moet tussen 5 en 20 procent van de capaciteit worden gemigreerd als de upgrade wordt de via het cluster.</span><span class="sxs-lookup"><span data-stu-id="d96ba-248">Depending on the number of upgrade domains, between 5 and 20 percent of capacity must be migrated as the upgrade rolls through the cluster.</span></span> <span data-ttu-id="d96ba-249">Die werken heeft om te gaan op een locatie.</span><span class="sxs-lookup"><span data-stu-id="d96ba-249">That work has to go somewhere.</span></span> <span data-ttu-id="d96ba-250">Dit is wanneer het begrip [gebufferd capaciteiten](service-fabric-cluster-resource-manager-cluster-description.md#buffered-capacity) is nuttig.</span><span class="sxs-lookup"><span data-stu-id="d96ba-250">This is where the notion of [buffered capacities](service-fabric-cluster-resource-manager-cluster-description.md#buffered-capacity) is useful.</span></span> <span data-ttu-id="d96ba-251">De capaciteit van de buffer is tijdens de normale werking in acht genomen.</span><span class="sxs-lookup"><span data-stu-id="d96ba-251">Buffered capacity is respected during normal operation.</span></span> <span data-ttu-id="d96ba-252">De Cluster Resource Manager mogelijk knooppunten tot de totale capaciteit (de buffer verbruikt) tijdens upgrades vult, indien nodig.</span><span class="sxs-lookup"><span data-stu-id="d96ba-252">The Cluster Resource Manager may fill nodes up to their total capacity (consuming the buffer) during upgrades if necessary.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d96ba-253">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="d96ba-253">Next steps</span></span>
* <span data-ttu-id="d96ba-254">Vanaf het begin starten en [Maak kennis met de Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="d96ba-254">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
