---
title: upgrade van de toepassing aaaService Fabric | Microsoft Docs
description: Dit artikel bevat een inleiding tooupgrading een Service Fabric-toepassing, waaronder kiezen upgrade modi en het uitvoeren van statuscontroles.
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="ab3c1-103">Upgrade van Service Fabric-toepassing uitvoeren</span><span class="sxs-lookup"><span data-stu-id="ab3c1-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="ab3c1-104">Een Azure Service Fabric-toepassing is een verzameling van services.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="ab3c1-105">Tijdens een upgrade, vergelijkt Service Fabric Hallo nieuwe [toepassingsmanifest](service-fabric-application-model.md#describe-an-application) met de vorige versie Hallo en bepaalt welke services in de toepassing hello updates vereisen.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="ab3c1-106">Service Fabric vergelijkt de getallen in de service Hallo met Hallo versienummers in de vorige versie Hallo manifesten Hallo-versie.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="ab3c1-107">Als een service niet is gewijzigd, wordt deze service is niet bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="ab3c1-108">Rolling upgrades-overzicht</span><span class="sxs-lookup"><span data-stu-id="ab3c1-108">Rolling upgrades overview</span></span>
<span data-ttu-id="ab3c1-109">In een uitrollende upgrade van de toepassing hello upgrade in fasen uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="ab3c1-110">Hallo-upgrade is in elk stadium toegepaste tooa deelverzameling met knooppunten in het Hallo-cluster, een updatedomein genoemd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="ab3c1-111">Als gevolg hiervan blijft Hallo toepassing beschikbaar in de hele Hallo upgrade.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="ab3c1-112">Tijdens de upgrade Hallo kan Hallo cluster een combinatie van oude en nieuwe versies van Hallo bevatten.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="ab3c1-113">Daarom moet Hallo twee versies moet voorwaarts en achterwaarts compatibel.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="ab3c1-114">Als ze niet compatibel is, is beheerder van de toepassing hello verantwoordelijk voor gefaseerde installatie van de beschikbaarheid van een upgrade toomaintain meerdere-fase.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="ab3c1-115">Bij een upgrade van een meervoudige fasen, de eerste stap Hallo tooan tussenliggende versie van Hallo-toepassing die compatibel is met de vorige versie Hallo worden geüpgraded.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="ab3c1-116">de tweede stap Hallo is tooupgrade Hallo definitieve versie die compatibiliteit Hallo vooraf updateversie, maar is compatibel met Hallo tussenliggende versie.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="ab3c1-117">Update domeinen zijn opgegeven in het clustermanifest Hallo bij het configureren van Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="ab3c1-118">Update domeinen ontvangt geen updates in een bepaalde volgorde.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="ab3c1-119">Een updatedomein is een logische eenheid van de implementatie voor een toepassing.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="ab3c1-120">Update domeinen toestaan Hallo services tooremain hoge beschikbaarheid tijdens een upgrade.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="ab3c1-121">Upgrades niet rolling zijn mogelijk als Hallo upgrade toegepaste tooall-knooppunten in het Hallo-cluster Hallo geval is wanneer het Hallo-toepassing heeft slechts één updatedomein is.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="ab3c1-122">Deze methode wordt niet aanbevolen omdat het Hallo-service wordt uitgeschakeld en is niet beschikbaar op Hallo tijdstip van de upgrade.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="ab3c1-123">Azure biedt bovendien garanties wanneer een cluster met slechts één updatedomein is ingesteld.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="ab3c1-124">Statuscontroles tijdens upgrades</span><span class="sxs-lookup"><span data-stu-id="ab3c1-124">Health checks during upgrades</span></span>
<span data-ttu-id="ab3c1-125">Voor een upgrade statusbeleid hebt toobe ingesteld (of standaardwaarden kunnen worden gebruikt).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="ab3c1-126">Een upgrade wordt aangeduid als geslaagd wanneer alle domeinen van de update zijn bijgewerkt binnen Hallo opgegeven time-outs en wanneer alle bijwerkt domeinen als in orde worden beschouwd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="ab3c1-127">Een updatedomein in orde betekent dat domein van de update Hallo alle Hallo statuscontroles die zijn opgegeven in het statusbeleid Hallo doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="ab3c1-128">Bijvoorbeeld, een statusbeleid dat alle services in een toepassingsexemplaar moet mogelijk verplichten *orde*, zoals status wordt gedefinieerd door de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="ab3c1-129">Zijn de service en toepassing networkdirect statusbeleid en controles tijdens de upgrade door de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="ab3c1-130">Dat wil zeggen, zijn geen servicespecifieke tests uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="ab3c1-131">Bijvoorbeeld, de service kan een vereiste doorvoer hebben, maar het Service Fabric heeft geen Hallo informatie toocheck doorvoer.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="ab3c1-132">Raadpleeg toohello [health artikelen](service-fabric-health-introduction.md) voor Hallo controles die worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="ab3c1-133">Hallo-controles die zich voordoen tijdens een upgrade include-tests voor of Hallo toepassingspakket correct is gekopieerd of Hallo-exemplaar is gestart, enzovoort.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="ab3c1-134">status van de toepassing Hello is een aggregatie van Hallo onderliggende entiteiten van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="ab3c1-135">Kortom, evalueert Service Fabric Hallo status van de toepassing hello via Hallo health die wordt gerapporteerd over de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="ab3c1-136">Deze ook evalueert Hallo status van alle Hallo-services voor de toepassing hello op deze manier.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="ab3c1-137">Service Fabric verdere evalueert Hallo status van de toepassingsservices Hallo door aggregeren Hallo status van onderliggende items, zoals Hallo service replica.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="ab3c1-138">Zodra het statusbeleid voor de toepassing hello wordt voldaan, Hallo upgrade te kunnen voortzetten.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="ab3c1-139">Als Hallo statusbeleid wordt geschonden, mislukt de upgrade van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="ab3c1-140">Upgrade-modi</span><span class="sxs-lookup"><span data-stu-id="ab3c1-140">Upgrade modes</span></span>
<span data-ttu-id="ab3c1-141">Hallo-modus die wij voor de upgrade van de toepassing aanraden is hello bewaakte modus, waarbij Hallo gebruikte modus.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="ab3c1-142">Bewaakte modus Hallo-upgrade uitvoert op één updatedomein, en als alle health controleert op te geven (per Hallo beleid opgegeven), wordt verplaatst op de volgende updatedomein toohello automatisch.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="ab3c1-143">Als statuscontroles mislukken en/of time-outs zijn bereikt, Hallo-upgrade is ofwel teruggedraaid voor Hallo updatedomein of Hallo-modus is handmatig gewijzigd toounmonitored.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="ab3c1-144">U kunt Hallo upgrade toochoose die twee modi voor upgrades van de mislukte configureren.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="ab3c1-145">Niet-bewaakte handmatige modus moet handmatige interventie na elke upgrade op een updatedomein, tookick uit Hallo upgrade op de volgende updatedomein Hallo.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="ab3c1-146">Er is geen health Service Fabric controles worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="ab3c1-147">Hallo beheerder Hallo status of health controles voordat het Hallo-upgrade wordt gestart in de volgende updatedomein Hallo uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="ab3c1-148">Standaard-services upgraden</span><span class="sxs-lookup"><span data-stu-id="ab3c1-148">Upgrade default services</span></span>
<span data-ttu-id="ab3c1-149">Standaardservices in Service Fabric-toepassing kunnen worden bijgewerkt tijdens het Hallo bijwerken van een toepassing.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="ab3c1-150">Standaard-services worden gedefinieerd in Hallo [toepassingsmanifest](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="ab3c1-151">Hallo standaardregels van de upgrade van de services die standaard zijn:</span><span class="sxs-lookup"><span data-stu-id="ab3c1-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="ab3c1-152">Standaard-services in de nieuwe Hallo [toepassingsmanifest](service-fabric-application-model.md#describe-an-application) die niet zijn opgenomen in het Hallo-cluster zijn gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="ab3c1-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) moet toobe tootrue tooenable Hallo volgens de regels voor ingesteld.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="ab3c1-154">Deze functie wordt ondersteund door de v5.5.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="ab3c1-155">In beide vorige bestaande services standaard [toepassingsmanifest](service-fabric-application-model.md#describe-an-application) en nieuwe versie worden bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="ab3c1-156">Beschrijvingen van de service in de nieuwe versie Hallo overschrijft die al in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="ab3c1-157">Upgrade van de toepassing wilt terugdraaien automatisch tijdens het bijwerken van de standaard-fout-service.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="ab3c1-158">Standaard-services in de vorige Hallo [toepassingsmanifest](service-fabric-application-model.md#describe-an-application) , maar niet in de nieuwe versie Hallo worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="ab3c1-159">**Houd er rekening mee dat deze verwijderen standaardservices niet kunnen worden teruggezet.**</span><span class="sxs-lookup"><span data-stu-id="ab3c1-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="ab3c1-160">Voor het geval van een toepassing upgrade is teruggedraaid, zijn standaardservices teruggekeerde toohello status voordat de upgrade wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="ab3c1-161">Maar verwijderde services kunnen nooit worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="ab3c1-162">Toepassing bijwerken stroomdiagram</span><span class="sxs-lookup"><span data-stu-id="ab3c1-162">Application upgrade flowchart</span></span>
<span data-ttu-id="ab3c1-163">Hallo stroomdiagram hieronder vindt u informatie over de upgradeproces Hallo van een Service Fabric-toepassing.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="ab3c1-164">In het bijzonder Hallo stroom wordt beschreven hoe Hallo time-outs, met inbegrip van *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, en *UpgradeHealthCheckInterval*, het beheren wanneer Hallo upgrade in één updatedomein wordt beschouwd als een geslaagd of mislukt.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![Hallo-upgradeproces voor een Service Fabric-toepassing][image]

## <a name="next-steps"></a><span data-ttu-id="ab3c1-166">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ab3c1-166">Next steps</span></span>
<span data-ttu-id="ab3c1-167">[Een upgrade van uw toepassing met behulp van Visual Studio](service-fabric-application-upgrade-tutorial.md) begeleidt u bij een upgrade van de toepassing met Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="ab3c1-168">[Een upgrade van uw toepassing met behulp van Powershell](service-fabric-application-upgrade-tutorial-powershell.md) begeleidt u bij een upgrade van de toepassing met behulp van PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab3c1-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="ab3c1-169">Bepalen hoe uw toepassing wordt bijgewerkt met behulp van [Parameters Upgrade](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="ab3c1-170">Uw toepassingsupgrades compatibel maken door leren hoe toouse [serialisatie van gegevens](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="ab3c1-171">Meer informatie over hoe toouse geavanceerde functies tijdens het bijwerken van uw toepassing door ernaar te verwijzen[geavanceerde onderwerpen](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="ab3c1-172">Veelvoorkomende problemen oplossen in toepassingsupgrades door te verwijzen toohello stappen in [toepassingsupgrades probleemoplossing](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="ab3c1-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
