---
title: Fouten opsporen in Azure microservices in Windows | Microsoft Docs
description: Informatie over het bewaken en onderzoeken van uw services die zijn geschreven met behulp van Microsoft Azure Service Fabric op een lokale ontwikkelcomputer.
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 08998340afb2f242b9a268331607b0d1ddb9b0c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="a975b-103">Controle en diagnose van services in de instellingen voor een lokale computer-ontwikkeling</span><span class="sxs-lookup"><span data-stu-id="a975b-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="a975b-104">Windows</span><span class="sxs-lookup"><span data-stu-id="a975b-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="a975b-105">Linux</span><span class="sxs-lookup"><span data-stu-id="a975b-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="a975b-106">Bewaking, detecteren, onderzoeken en het oplossen van problemen kunt services wilt gaan met minimale onderbreking van de gebruikerservaring.</span><span class="sxs-lookup"><span data-stu-id="a975b-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services to continue with minimal disruption to the user experience.</span></span> <span data-ttu-id="a975b-107">Controle en diagnostische gegevens zijn essentieel belang is in een werkelijke geïmplementeerde productie-omgeving, afhankelijk de efficiëntie van een vergelijkbaar model overstap tijdens de ontwikkeling van services zodat ze werken wanneer u naar een echte setup.</span><span class="sxs-lookup"><span data-stu-id="a975b-107">While monitoring and diagnostics are critical in an actual deployed production environment, the efficiency will depend on adopting a similar model during development of services to ensure they work when you move to a real-world setup.</span></span> <span data-ttu-id="a975b-108">Service Fabric maakt het eenvoudig voor ontwikkelaars van de service voor het implementeren van diagnostische gegevens die naadloos voor zowel lokale ontwikkeling één machine-instellingen als de echte productie cluster instellingen werkt.</span><span class="sxs-lookup"><span data-stu-id="a975b-108">Service Fabric makes it easy for service developers to implement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="a975b-109">Gebeurtenistracering voor Windows</span><span class="sxs-lookup"><span data-stu-id="a975b-109">Event Tracing for Windows</span></span>
<span data-ttu-id="a975b-110">[Event Tracing voor Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is de aanbevolen technologie voor tracering van berichten in Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a975b-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is the recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="a975b-111">Er zijn enkele voordelen van het gebruik van ETW:</span><span class="sxs-lookup"><span data-stu-id="a975b-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="a975b-112">**ETW is snel.**</span><span class="sxs-lookup"><span data-stu-id="a975b-112">**ETW is fast.**</span></span> <span data-ttu-id="a975b-113">Het is ontwikkeld als een tracering technologie met minimale gevolgen voor een uitvoeringstijden code.</span><span class="sxs-lookup"><span data-stu-id="a975b-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="a975b-114">**ETW-tracering werkt naadloos samen in lokale ontwikkelomgevingen en ook instellingen echte cluster.**</span><span class="sxs-lookup"><span data-stu-id="a975b-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="a975b-115">Dit betekent dat u code te herschrijven uw tracering wanneer u klaar bent voor het implementeren van uw code naar een echte cluster geen hebt.</span><span class="sxs-lookup"><span data-stu-id="a975b-115">This  means you don't have to rewrite your tracing code when you are ready to deploy your code to a real cluster.</span></span>
* <span data-ttu-id="a975b-116">**Service Fabric systeemcode gebruikt ook ETW voor interne tracering.**</span><span class="sxs-lookup"><span data-stu-id="a975b-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="a975b-117">Hiermee kunt u uw toepassingstraceringen interleaved met traceringen van Service Fabric-systeem weergeven.</span><span class="sxs-lookup"><span data-stu-id="a975b-117">This allows you to view your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="a975b-118">Ook kunt u gemakkelijker inzicht in de takenreeksen en relaties tussen uw toepassingscode en gebeurtenissen in het onderliggende systeem.</span><span class="sxs-lookup"><span data-stu-id="a975b-118">It also helps you to more easily understand the sequences and interrelationships between your application code and events in the underlying system.</span></span>
* <span data-ttu-id="a975b-119">**Er is een ingebouwde ondersteuning voor Service Fabric Visual Studio tools ETW-gebeurtenissen weergeven.**</span><span class="sxs-lookup"><span data-stu-id="a975b-119">**There is built-in support in Service Fabric Visual Studio tools to view ETW events.**</span></span> <span data-ttu-id="a975b-120">ETW-gebeurtenissen worden weergegeven in de weergave van diagnostische gebeurtenissen van Visual Studio als Visual Studio correct is geconfigureerd met Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a975b-120">ETW events appear in the Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="a975b-121">Service Fabric-systeemgebeurtenissen bekijken in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a975b-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="a975b-122">Service Fabric verzendt ETW-gebeurtenissen om te begrijpen wat er gebeurt in het platform voor ontwikkelaars van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="a975b-122">Service Fabric emits ETW events to help application developers understand what's happening in the platform.</span></span> <span data-ttu-id="a975b-123">Als u dit nog niet hebt gedaan, gaat u verder gaan en volg de stappen in [maken van uw eerste toepassing in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="a975b-123">If you haven't already done so, go ahead and follow the steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="a975b-124">Deze informatie kunt u een toepassing actief en werkend ophalen met de diagnostische gebeurtenissen Viewer de traceringsberichten weergegeven.</span><span class="sxs-lookup"><span data-stu-id="a975b-124">This information will help you get an application up and running with the Diagnostics Events Viewer showing the trace messages.</span></span>

1. <span data-ttu-id="a975b-125">Als de diagnostische gegevens gebeurtenissen venster wordt niet automatisch wordt weergegeven, gaat u naar de **weergave** tabblad in Visual Studio, kiest u **overige vensters** en vervolgens **diagnostische logboeken**.</span><span class="sxs-lookup"><span data-stu-id="a975b-125">If the diagnostics events window does not automatically show, Go to the **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="a975b-126">Elke gebeurtenis heeft standaard metagegevens die u leest het knooppunt, toepassing en service afkomstig is van de gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="a975b-126">Each event has standard metadata information that tells you the node, application and service the event is coming from.</span></span> <span data-ttu-id="a975b-127">U kunt ook de lijst met gebeurtenissen filteren met behulp van de **gebeurtenissen filteren** vak aan de bovenkant van het venster gebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="a975b-127">You can also filter the list of events by using the **Filter events** box at the top of the events window.</span></span> <span data-ttu-id="a975b-128">Bijvoorbeeld, u kunt filteren op **knooppuntnaam** of **servicenaam.**</span><span class="sxs-lookup"><span data-stu-id="a975b-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="a975b-129">En wanneer u de details van gebeurtenis kijkt, kunt u ook onderbreken met behulp van de **onderbreken** knop aan de bovenkant van het venster gebeurtenissen en later hervatten zonder verlies van gebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="a975b-129">And when you're looking at event details, you can also pause by using the **Pause** button at the top of the events window and resume later without any loss of events.</span></span>
   
   ![Visual Studio diagnostische gegevens van de Gebeurtenissenviewer](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-to-the-application-code"></a><span data-ttu-id="a975b-131">Uw eigen aangepaste traceringen toevoegen aan de toepassingscode</span><span class="sxs-lookup"><span data-stu-id="a975b-131">Add your own custom traces to the application code</span></span>
<span data-ttu-id="a975b-132">De Service Fabric Visual Studio-projectsjablonen bevatten voorbeeldcode.</span><span class="sxs-lookup"><span data-stu-id="a975b-132">The Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="a975b-133">De code staat het toevoegen van aangepaste code ETW toepassingstraceringen die worden weergegeven in de Visual Studio ETW-viewer naast system traceringen van Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a975b-133">The code shows how to add custom application code ETW traces that show up in the Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="a975b-134">Het voordeel van deze methode is dat de metagegevens wordt automatisch toegevoegd aan traceringen en Visual Studio diagnostische gebeurtenissen Viewer al geconfigureerd is om deze weer te geven.</span><span class="sxs-lookup"><span data-stu-id="a975b-134">The advantage of this method is that metadata is automatically added to traces, and the Visual Studio Diagnostic Events Viewer is already configured to display them.</span></span>

<span data-ttu-id="a975b-135">Voor projecten gemaakt op basis van de **servicesjablonen** (stateless of stateful) zoeken de `RunAsync` implementatie:</span><span class="sxs-lookup"><span data-stu-id="a975b-135">For projects created from the **service templates** (stateless or stateful) just search for the `RunAsync` implementation:</span></span>

1. <span data-ttu-id="a975b-136">De aanroep van `ServiceEventSource.Current.ServiceMessage` in de `RunAsync` methode toont een voorbeeld van een aangepaste ETW-tracering van de toepassingscode.</span><span class="sxs-lookup"><span data-stu-id="a975b-136">The call to `ServiceEventSource.Current.ServiceMessage` in the `RunAsync` method shows an example of a custom ETW trace from the application code.</span></span>
2. <span data-ttu-id="a975b-137">In de **ServiceEventSource.cs** -bestand, vindt u een overbelasting voor de `ServiceEventSource.ServiceMessage` methode die moet worden gebruikt voor hoge frequentie gebeurtenissen om prestatieredenen.</span><span class="sxs-lookup"><span data-stu-id="a975b-137">In the **ServiceEventSource.cs** file, you will find an overload for the `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="a975b-138">Voor projecten gemaakt op basis van de **actor sjablonen** (stateless of stateful):</span><span class="sxs-lookup"><span data-stu-id="a975b-138">For projects created from the **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="a975b-139">Open de **'ProjectName'.cs** waar het bestand *ProjectName* is de naam die u hebt gekozen voor Visual Studio-project.</span><span class="sxs-lookup"><span data-stu-id="a975b-139">Open the **"ProjectName".cs** file where *ProjectName* is the name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="a975b-140">Zoek de code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in de *DoWorkAsync* methode.</span><span class="sxs-lookup"><span data-stu-id="a975b-140">Find the code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in the *DoWorkAsync* method.</span></span>  <span data-ttu-id="a975b-141">Dit is een voorbeeld van een aangepaste ETW-tracering van toepassingscode geschreven.</span><span class="sxs-lookup"><span data-stu-id="a975b-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="a975b-142">In het bestand **ActorEventSource.cs**, vindt u een overbelasting voor de `ActorEventSource.ActorMessage` methode die moet worden gebruikt voor hoge frequentie gebeurtenissen om prestatieredenen.</span><span class="sxs-lookup"><span data-stu-id="a975b-142">In file **ActorEventSource.cs**, you will find an overload for the `ActorEventSource.ActorMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="a975b-143">Na het toevoegen van aangepaste ETW-tracering toe aan uw servicecode, kunt u bouwen, implementeren en uitvoeren van de toepassing opnieuw om te zien van uw gebeurtenis(sen) in de diagnostische gebeurtenissen Viewer.</span><span class="sxs-lookup"><span data-stu-id="a975b-143">After adding custom ETW tracing to your service code, you can build, deploy, and run the application again to see your event(s) in the Diagnostic Events Viewer.</span></span> <span data-ttu-id="a975b-144">Als u de toepassing met fouten opsporen **F5**, de diagnostische gebeurtenissen Viewer wordt automatisch geopend.</span><span class="sxs-lookup"><span data-stu-id="a975b-144">If you debug the application with **F5**, the Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a975b-145">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a975b-145">Next steps</span></span>
<span data-ttu-id="a975b-146">Dezelfde tracering-code die u hebt toegevoegd aan uw toepassing hierboven voor lokale diagnostische gegevens werken met hulpprogramma's die u gebruiken kunt om deze gebeurtenissen wanneer uw toepassing wordt uitgevoerd op een Azure-cluster weer te geven.</span><span class="sxs-lookup"><span data-stu-id="a975b-146">The same tracing code that you added to your application above for local diagnostics will work with tools that you can use to view these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="a975b-147">Bekijk deze artikelen die de verschillende opties voor de hulpprogramma's worden behandeld en wordt beschreven hoe u kunt deze instellen.</span><span class="sxs-lookup"><span data-stu-id="a975b-147">Check out these articles that discuss the different options for the tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="a975b-148">Het verzamelen van logboeken met diagnostische Azure-gegevens</span><span class="sxs-lookup"><span data-stu-id="a975b-148">How to collect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="a975b-149">Gebeurtenis-aggregatie en verzameling op basis van EventFlow</span><span class="sxs-lookup"><span data-stu-id="a975b-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

