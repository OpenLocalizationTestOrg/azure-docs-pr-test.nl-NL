---
title: aaaGuidelines & aanbevelingen voor betrouwbare verzamelingen in Azure Service Fabric | Microsoft Docs
description: Richtlijnen en aanbevelingen voor het gebruik van betrouwbare Service Fabric-verzamelingen
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: masnider,rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/3/2017
ms.author: mcoskun
ms.openlocfilehash: bcdbc9d013bc044e06c43761e7f515c7e4bf340c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="guidelines-and-recommendations-for-reliable-collections-in-azure-service-fabric"></a><span data-ttu-id="9bbcd-103">Richtlijnen en aanbevelingen voor betrouwbare verzamelingen in Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9bbcd-103">Guidelines and recommendations for Reliable Collections in Azure Service Fabric</span></span>
<span data-ttu-id="9bbcd-104">Deze sectie bevat richtlijnen voor het gebruik van betrouwbare statusbeheer en betrouwbare verzamelingen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-104">This section provides guidelines for using Reliable State Manager and Reliable Collections.</span></span> <span data-ttu-id="9bbcd-105">Hallo-doel is niet voor verrassingen toohelp gebruikers.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-105">hello goal is toohelp users avoid common pitfalls.</span></span>

<span data-ttu-id="9bbcd-106">Hallo richtlijnen zijn ingedeeld als eenvoudige aanbevelingen die worden voorafgegaan door Hallo voorwaarden *doen*, *Overweeg*, *Vermijd* en *niet*.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-106">hello guidelines are organized as simple recommendations prefixed with hello terms *Do*, *Consider*, *Avoid* and *Do not*.</span></span>

* <span data-ttu-id="9bbcd-107">Een object van het aangepaste type dat wordt geretourneerd door leesbewerkingen mag niet worden gewijzigd (bijvoorbeeld `TryPeekAsync` of `TryGetValueAsync`).</span><span class="sxs-lookup"><span data-stu-id="9bbcd-107">Do not modify an object of custom type returned by read operations (for example, `TryPeekAsync` or `TryGetValueAsync`).</span></span> <span data-ttu-id="9bbcd-108">Betrouwbare verzamelingen, net als bij gelijktijdige verzamelingen, een toohello reference-objecten en geen kopie geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-108">Reliable Collections, just like Concurrent Collections, return a reference toohello objects and not a copy.</span></span>
* <span data-ttu-id="9bbcd-109">Doe diepe kopie Hallo object van een aangepast type geretourneerd voordat u deze wijzigt.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-109">Do deep copy hello returned object of a custom type before modifying it.</span></span> <span data-ttu-id="9bbcd-110">Aangezien structs en ingebouwde typen pass-by-value, hoeft u niet toodo een diepe kopie op deze.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-110">Since structs and built-in types are pass-by-value, you do not need toodo a deep copy on them.</span></span>
* <span data-ttu-id="9bbcd-111">Gebruik geen `TimeSpan.MaxValue` voor time-outs.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-111">Do not use `TimeSpan.MaxValue` for time-outs.</span></span> <span data-ttu-id="9bbcd-112">Time-outs moet gebruikte toodetect impassen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-112">Time-outs should be used toodetect deadlocks.</span></span>
* <span data-ttu-id="9bbcd-113">Gebruik een transactie niet nadat deze is toegewezen, is afgebroken, of verwijderd.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-113">Do not use a transaction after it has been committed, aborted, or disposed.</span></span>
* <span data-ttu-id="9bbcd-114">Gebruik een opsomming niet buiten Hallo transactiebereik die is gemaakt in.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-114">Do not use an enumeration outside of hello transaction scope it was created in.</span></span>
* <span data-ttu-id="9bbcd-115">Maak een transactie in een andere transactie geen `using` instructie omdat dit ertoe leiden impassen dat kan.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-115">Do not create a transaction within another transaction’s `using` statement because it can cause deadlocks.</span></span>
* <span data-ttu-id="9bbcd-116">Kan ervoor zorgen dat uw `IComparable<TKey>` implementatie juist is.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-116">Do ensure that your `IComparable<TKey>` implementation is correct.</span></span> <span data-ttu-id="9bbcd-117">Hallo system neemt afhankelijkheid `IComparable<TKey>` voor het samenvoegen van controlepunten en rijen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-117">hello system takes dependency on `IComparable<TKey>` for merging checkpoints and rows.</span></span>
* <span data-ttu-id="9bbcd-118">Gebruik vergrendeling tijdens bijwerken bij het lezen van een item met een tooupdate bedoeling deze tooprevent een bepaalde klasse impassen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-118">Do use Update lock when reading an item with an intention tooupdate it tooprevent a certain class of deadlocks.</span></span>
* <span data-ttu-id="9bbcd-119">Overweeg te houden van uw objecten (bijvoorbeeld TKey + TValue voor betrouwbare woordenlijst) lager dan 80 kB: kleinere Hallo beter.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-119">Consider keeping your items (for example, TKey + TValue for Reliable Dictionary) below 80 KBytes: smaller hello better.</span></span> <span data-ttu-id="9bbcd-120">Dit vermindert Hallo hoeveelheid Heap voor grote objecten gebruik, evenals de schijf en netwerk i/o-vereisten.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-120">This reduces hello amount of Large Object Heap usage as well as disk and network IO requirements.</span></span> <span data-ttu-id="9bbcd-121">Vaak vermindert dubbele gegevens repliceren wanneer er slechts één klein onderdeel van het Hallo-waarde wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-121">Often, it reduces replicating duplicate data when only one small part of hello value is being updated.</span></span> <span data-ttu-id="9bbcd-122">Algemene manier tooachieve dit betrouwbare woordenlijst is toobreak uw rijen in toomultiple rijen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-122">Common way tooachieve this in Reliable Dictionary, is toobreak your rows in toomultiple rows.</span></span>
* <span data-ttu-id="9bbcd-123">Overweeg het gebruik van back-up en herstel na noodgevallen van functionaliteit toohave herstellen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-123">Consider using backup and restore functionality toohave disaster recovery.</span></span>
* <span data-ttu-id="9bbcd-124">Voorkomen dat de combinatie van één entiteit operations en bewerkingen voor meerdere entiteiten (bijvoorbeeld `GetCountAsync`, `CreateEnumerableAsync`) in Hallo dezelfde transactie vanwege de verschillende isolatieniveaus toohello.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-124">Avoid mixing single entity operations and multi-entity operations (e.g `GetCountAsync`, `CreateEnumerableAsync`) in hello same transaction due toohello different isolation levels.</span></span>
* <span data-ttu-id="9bbcd-125">InvalidOperationException worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-125">Do handle InvalidOperationException.</span></span> <span data-ttu-id="9bbcd-126">Door Hallo-systeem voor het aantal redenen kunnen gebruikerstransacties worden afgebroken.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-126">User transactions can be aborted by hello system for variety of reasons.</span></span> <span data-ttu-id="9bbcd-127">Bijvoorbeeld, blokkeert wanneer Hallo betrouwbare status Manager de rol buiten-primaire wordt gewijzigd of wanneer een transactie langlopende afkappen van Hallo transactionele logboek.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-127">For example, when hello Reliable State Manager is changing its role out of Primary or when a long-running transaction is blocking truncation of hello transactional log.</span></span> <span data-ttu-id="9bbcd-128">In dergelijke gevallen ontvangt gebruiker InvalidOperationException die aangeeft dat de transactie al is beëindigd.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-128">In such cases, user may receive InvalidOperationException indicating that their transaction has already been terminated.</span></span> <span data-ttu-id="9bbcd-129">Ervan uitgaande dat, Hallo beëindiging van het Hallo-transactie is niet aangevraagd door gebruiker Hallo, de aanbevolen manier toohandle deze uitzondering is toodispose Hallo transactie, Controleer of Hallo annulering token zijn gesignaleerd (of Hallo-rol van Hallo replica is gewijzigd), en als dat niet Maak een nieuwe transactie en probeer het opnieuw.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-129">Assuming, hello termination of hello transaction was not requested by hello user, best way toohandle this exception is toodispose hello transaction, check if hello cancellation token has been signaled (or hello role of hello replica has been changed), and if not create a new transaction and retry.</span></span>  

<span data-ttu-id="9bbcd-130">Hier volgen enkele dingen tookeep rekening:</span><span class="sxs-lookup"><span data-stu-id="9bbcd-130">Here are some things tookeep in mind:</span></span>

* <span data-ttu-id="9bbcd-131">Hallo standaardtime-out is vier seconden voor alle Hallo betrouwbare verzameling API's.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-131">hello default time-out is four seconds for all hello Reliable Collection APIs.</span></span> <span data-ttu-id="9bbcd-132">De meeste gebruikers gebruik Hallo standaardtime-out.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-132">Most users should use hello default time-out.</span></span>
* <span data-ttu-id="9bbcd-133">Hallo standaard annulering token is `CancellationToken.None` in alle betrouwbare verzamelingen-API's.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-133">hello default cancellation token is `CancellationToken.None` in all Reliable Collections APIs.</span></span>
* <span data-ttu-id="9bbcd-134">Hallo sleuteltype-parameter (*TKey*) voor een betrouwbare woordenlijst correct moet implementeren `GetHashCode()` en `Equals()`.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-134">hello key type parameter (*TKey*) for a Reliable Dictionary must correctly implement `GetHashCode()` and `Equals()`.</span></span> <span data-ttu-id="9bbcd-135">Sleutels moeten niet-wijzigbaar.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-135">Keys must be immutable.</span></span>
* <span data-ttu-id="9bbcd-136">tooachieve hoge beschikbaarheid voor Hallo betrouwbare verzamelingen, elke service moet hebben ten minste een doel en de minimale grootte van 3 replicaset.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-136">tooachieve high availability for hello Reliable Collections, each service should have at least a target and minimum replica set size of 3.</span></span>
* <span data-ttu-id="9bbcd-137">Leesbewerkingen op Hallo secundaire versies die niet doorgevoerd quorum zijn mag worden gelezen.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-137">Read operations on hello secondary may read versions that are not quorum committed.</span></span>
  <span data-ttu-id="9bbcd-138">Dit betekent dat een versie van de gegevens die worden gelezen van een enkel secundaire ONWAAR kan worden gevorderd.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-138">This means that a version of data that is read from a single secondary might be false progressed.</span></span>
  <span data-ttu-id="9bbcd-139">Leesbewerkingen van primaire zijn altijd stabiele: kan nooit worden false gevorderd.</span><span class="sxs-lookup"><span data-stu-id="9bbcd-139">Reads from Primary are always stable: can never be false progressed.</span></span>

### <a name="next-steps"></a><span data-ttu-id="9bbcd-140">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9bbcd-140">Next steps</span></span>
* [<span data-ttu-id="9bbcd-141">Werken met betrouwbare verzamelingen</span><span class="sxs-lookup"><span data-stu-id="9bbcd-141">Working with Reliable Collections</span></span>](service-fabric-work-with-reliable-collections.md)
* [<span data-ttu-id="9bbcd-142">Transacties en vergrendelingen</span><span class="sxs-lookup"><span data-stu-id="9bbcd-142">Transactions and Locks</span></span>](service-fabric-reliable-services-reliable-collections-transactions-locks.md)
* [<span data-ttu-id="9bbcd-143">Betrouwbare status Manager en interne werking van verzameling</span><span class="sxs-lookup"><span data-stu-id="9bbcd-143">Reliable State Manager and Collection Internals</span></span>](service-fabric-reliable-services-reliable-collections-internals.md)
* <span data-ttu-id="9bbcd-144">Het beheren van gegevens</span><span class="sxs-lookup"><span data-stu-id="9bbcd-144">Managing Data</span></span>
  * [<span data-ttu-id="9bbcd-145">Back-up en herstel</span><span class="sxs-lookup"><span data-stu-id="9bbcd-145">Backup and Restore</span></span>](service-fabric-reliable-services-backup-restore.md)
  * [<span data-ttu-id="9bbcd-146">Meldingen</span><span class="sxs-lookup"><span data-stu-id="9bbcd-146">Notifications</span></span>](service-fabric-reliable-services-notifications.md)
  * [<span data-ttu-id="9bbcd-147">Serialisatie en Upgrade</span><span class="sxs-lookup"><span data-stu-id="9bbcd-147">Serialization and Upgrade</span></span>](service-fabric-application-upgrade-data-serialization.md)
  * [<span data-ttu-id="9bbcd-148">Betrouwbaar status Manager-configuratie</span><span class="sxs-lookup"><span data-stu-id="9bbcd-148">Reliable State Manager configuration</span></span>](service-fabric-reliable-services-configuration.md)
* <span data-ttu-id="9bbcd-149">Andere</span><span class="sxs-lookup"><span data-stu-id="9bbcd-149">Others</span></span>
  * [<span data-ttu-id="9bbcd-150">Betrouwbare Services snel starten</span><span class="sxs-lookup"><span data-stu-id="9bbcd-150">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
  * [<span data-ttu-id="9bbcd-151">Referentie voor ontwikkelaars voor betrouwbare verzamelingen</span><span class="sxs-lookup"><span data-stu-id="9bbcd-151">Developer reference for Reliable Collections</span></span>](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)
