---
title: Azure Service Fabric-Containers controle en diagnostische gegevens | Microsoft Docs
description: Informatie over het bewaken en onderzoeken van containers gedirigeerd op Microsoft Azure Service Fabric met OMS van Containers oplossing.
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: 874c1a5c4b399ff2254072b7282f05d83a005cc3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="38386-103">Bewaking van Windows Server-containers met OMS</span><span class="sxs-lookup"><span data-stu-id="38386-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="38386-104">OMS Containers oplossing</span><span class="sxs-lookup"><span data-stu-id="38386-104">OMS Containers Solution</span></span>

<span data-ttu-id="38386-105">Het team Operations Management Suite (OMS) heeft een oplossing Containers voor diagnostische gegevens en de bewaking voor containers gepubliceerd.</span><span class="sxs-lookup"><span data-stu-id="38386-105">The Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="38386-106">Deze oplossing is samen met hun Service Fabric-oplossing een uitstekend hulpprogramma voor het bewaken van containerimplementaties gedirigeerd op Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="38386-106">Alongside their Service Fabric solution, this solution is a great tool to monitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="38386-107">Hier volgt een eenvoudig voorbeeld van het dashboard in de oplossing ziet er als:</span><span class="sxs-lookup"><span data-stu-id="38386-107">Here's a simple example of what the dashboard in the solution looks like:</span></span>

![Basic OMS-Dashboard](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="38386-109">Deze verzamelt ook verschillende soorten logboeken die in de OMS-logboekanalyse-hulpprogramma kunnen worden opgevraagd en kunnen worden gebruikt voor het visualiseren van alle metrische gegevens of gebeurtenissen wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="38386-109">It also collects different kinds of logs that can be queried in the OMS Log Analytics tool, and can be used to visualize any metrics or events being generated.</span></span> <span data-ttu-id="38386-110">De logboek-typen die zijn verzameld zijn:</span><span class="sxs-lookup"><span data-stu-id="38386-110">The log types that are collected are:</span></span>

1. <span data-ttu-id="38386-111">ContainerInventory: geeft informatie over de containerlocatie, naam en installatiekopieën</span><span class="sxs-lookup"><span data-stu-id="38386-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="38386-112">ContainerImageInventory: informatie over geïmplementeerde installatiekopieën, met inbegrip van id's of grootten</span><span class="sxs-lookup"><span data-stu-id="38386-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="38386-113">ContainerLog: specifieke foutenlogboeken, docker-Logboeken (stdout, enzovoort) en andere items</span><span class="sxs-lookup"><span data-stu-id="38386-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="38386-114">ContainerServiceLog: docker-daemon opdrachten die zijn uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="38386-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="38386-115">Prestaties: prestatiemeteritems met inbegrip van container cpu, geheugen, netwerkverkeer, schijf-i/o en aangepaste metrische gegevens van de hostmachines</span><span class="sxs-lookup"><span data-stu-id="38386-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from the host machines</span></span>

<span data-ttu-id="38386-116">In dit artikel bevat informatie over de stappen die nodig zijn voor het instellen van de bewaking van de container voor uw cluster.</span><span class="sxs-lookup"><span data-stu-id="38386-116">This article covers the steps required to set up container monitoring for your cluster.</span></span> <span data-ttu-id="38386-117">Bekijk voor meer informatie over de OMS-Containers oplossing hun [documentatie](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="38386-117">To learn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="38386-118">1. Een Service Fabric-cluster instellen</span><span class="sxs-lookup"><span data-stu-id="38386-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="38386-119">Maak een cluster met de Azure Resource Manager-sjabloon gevonden [hier](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="38386-119">Create a cluster using the Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="38386-120">Zorg ervoor dat een unieke naam van de OMS-werkruimte toevoegen.</span><span class="sxs-lookup"><span data-stu-id="38386-120">Make sure to add a unique OMS workspace name.</span></span> <span data-ttu-id="38386-121">Deze sjabloon wordt ook standaard tot het implementeren van een cluster in de preview-versie van Service Fabric (v255.255), wat betekent dat deze kan niet worden gebruikt in productie en kan niet worden bijgewerkt naar een andere Service Fabric-versie.</span><span class="sxs-lookup"><span data-stu-id="38386-121">This template also defaults to deploying a cluster in the preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded to a different Service Fabric version.</span></span> <span data-ttu-id="38386-122">Als u deze sjabloon gebruiken voor lange termijn of productie, wijzigt u de versie op een stabiele versie getal.</span><span class="sxs-lookup"><span data-stu-id="38386-122">If you decide to use this template for long-term or production use, change the version to a stable version number.</span></span>

<span data-ttu-id="38386-123">Zodra het cluster is ingesteld, moet u bevestigen dat u het juiste certificaat hebt geïnstalleerd en controleer of u verbinding kunnen bent maken met het cluster.</span><span class="sxs-lookup"><span data-stu-id="38386-123">Once the cluster is set up, confirm that you have installed the appropriate certificate, and make sure you are able to connect to the cluster.</span></span>

<span data-ttu-id="38386-124">Bevestig dat de resourcegroep is ingesteld kop correct door aan de [Azure-portal](https://portal.azure.com/) en de implementatie te zoeken.</span><span class="sxs-lookup"><span data-stu-id="38386-124">Confirm that your Resource Group is set up correctly by heading to the [Azure portal](https://portal.azure.com/) and finding the deployment.</span></span> <span data-ttu-id="38386-125">De resourcegroep moet bevatten alle Service Fabric-resources en hebt ook een Log Analytics-oplossing, evenals een Service Fabric-oplossing.</span><span class="sxs-lookup"><span data-stu-id="38386-125">The resource group should contain all the Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="38386-126">Voor het wijzigen van een bestaand Service Fabric-cluster:</span><span class="sxs-lookup"><span data-stu-id="38386-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="38386-127">Controleer of de diagnostische gegevens is ingeschakeld (als dit niet het geval is, het inschakelen via [bijwerken van de virtuele-machineschaalset](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="38386-127">Confirm that Diagnostics is enabled (if not, enable it via [updating the virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="38386-128">Een OMS-werkruimte toevoegen door het maken van een oplossing 'Service Fabric Analytics' via Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="38386-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via the Azure Marketplace</span></span>
* <span data-ttu-id="38386-129">De gegevensbronnen van de Service Fabric-oplossing om op te halen gegevens uit de juiste Azure Storage (ingesteld door af) bewerken in de resourcegroep die de cluster in gebruik is</span><span class="sxs-lookup"><span data-stu-id="38386-129">Edit the data sources of the Service Fabric solution to pick up data from the appropriate Azure Storage tables (set up by WAD) in the Resource Group that the cluster is in</span></span>
* <span data-ttu-id="38386-130">Toevoegen van de agent als een [-extensie voor de virtuele-machineschaalset](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell of via het bijwerken van de virtuele machine schaalset (dezelfde koppeling als hierboven om te wijzigen van de Resource Manager-sjabloon)</span><span class="sxs-lookup"><span data-stu-id="38386-130">Add the agent as an [extension to the virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating the virtual machine scale set (same link as above, to modify the Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="38386-131">2. Een container implementeren</span><span class="sxs-lookup"><span data-stu-id="38386-131">2. Deploy a container</span></span>

<span data-ttu-id="38386-132">Als het cluster gereed is en u hebt gecontroleerd of u toegang hebt, implementeert u een container voor het.</span><span class="sxs-lookup"><span data-stu-id="38386-132">Once the cluster is ready and you have confirmed that you can access it, deploy a container to it.</span></span> <span data-ttu-id="38386-133">Als u kiest voor het gebruik van de preview-versie zoals ingesteld door de sjabloon, kunt u ook verkennen van Service Fabric nieuwe docker compose functionaliteit.</span><span class="sxs-lookup"><span data-stu-id="38386-133">If you chose to use the preview version as set by the template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="38386-134">Vergeet dat de eerste keer dat de installatiekopie van een container wordt geïmplementeerd naar een cluster duurt enkele minuten om de installatiekopie, afhankelijk van de grootte te downloaden.</span><span class="sxs-lookup"><span data-stu-id="38386-134">Bear in mind that the first time a container image is deployed to a cluster, it takes several minutes to download the image depending on its size.</span></span>

## <a name="3-add-the-containers-solution"></a><span data-ttu-id="38386-135">3. De oplossing Containers toevoegen</span><span class="sxs-lookup"><span data-stu-id="38386-135">3. Add the Containers solution</span></span>

<span data-ttu-id="38386-136">In de Azure portal, maakt u een bron Containers (onder de bewaking en beheer categorie) via Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="38386-136">In the Azure portal, create a Containers resource (under the Monitoring + Management category) through Azure Marketplace.</span></span> 

![Containers oplossing toevoegen](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="38386-138">In de stap het maken van aanvraagt het een OMS-werkruimte.</span><span class="sxs-lookup"><span data-stu-id="38386-138">In the creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="38386-139">Selecteer de versie die is gemaakt met de bovenstaande implementatie.</span><span class="sxs-lookup"><span data-stu-id="38386-139">Select the one that was created with the deployment above.</span></span> <span data-ttu-id="38386-140">Deze stap voegt een oplossing Containers in de OMS-werkruimte en wordt automatisch gedetecteerd door de OMS-agent die is geïmplementeerd door de sjabloon.</span><span class="sxs-lookup"><span data-stu-id="38386-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by the OMS agent deployed by the template.</span></span> <span data-ttu-id="38386-141">De agent wordt gestart met het verzamelen van gegevens over de containers processen in het cluster en in ongeveer 10-15 minuten, ziet u het lichte oplossing om met gegevens zoals in de installatiekopie van het bovenstaande dashboard.</span><span class="sxs-lookup"><span data-stu-id="38386-141">The agent will start gathering data on the containers processes in the cluster, and in about 10-15 minutes, you should see the solution light up with data as in the image of the dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="38386-142">4. Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="38386-142">4. Next steps</span></span>

<span data-ttu-id="38386-143">OMS biedt verschillende hulpprogramma's in de werkruimte om als nuttiger voor u.</span><span class="sxs-lookup"><span data-stu-id="38386-143">OMS offers various tools in the workspace to make if more useful for you.</span></span> <span data-ttu-id="38386-144">Bekijk de volgende opties voor het aanpassen van de oplossing voor uw behoeften:</span><span class="sxs-lookup"><span data-stu-id="38386-144">Explore the following options to customize the solution to your needs:</span></span>
- <span data-ttu-id="38386-145">Familiarized ophalen met de [zoeken en uitvoeren van query's in logboek registreren](../log-analytics/log-analytics-log-searches.md) functies die worden aangeboden als onderdeel van logboekanalyse</span><span class="sxs-lookup"><span data-stu-id="38386-145">Get familiarized with the [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="38386-146">Configureer de OMS-agent om op te halen specifieke prestatiemeteritems (Ga naar de startpagina van de werkruimte > Instellingen > gegevens > Windows-prestatiemeteritems)</span><span class="sxs-lookup"><span data-stu-id="38386-146">Configure the OMS agent to pick up specific performance counters (go to the workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="38386-147">Configureren van OMS om in te stellen [geautomatiseerde waarschuwingen](../log-analytics/log-analytics-alerts.md) regels om te helpen detecteren en diagnostische gegevens</span><span class="sxs-lookup"><span data-stu-id="38386-147">Configure OMS to set up [automated alerting](../log-analytics/log-analytics-alerts.md) rules to aid in detecting and diagnostics</span></span>