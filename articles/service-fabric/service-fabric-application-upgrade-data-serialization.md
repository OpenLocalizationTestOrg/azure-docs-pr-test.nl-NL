---
title: 'Upgrade van de toepassing: serialisatie van gegevens | Microsoft Docs'
description: Aanbevolen procedures voor serialisatie van gegevens en de mogelijke gevolgen voor rollende toepassingsupgrades.
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="90d8a-103">De invloed van serialisatie van gegevens op een upgrade van de toepassing</span><span class="sxs-lookup"><span data-stu-id="90d8a-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="90d8a-104">In een [rolling upgrade van de toepassing](service-fabric-application-upgrade.md), Hallo-upgrade is toegepaste tooa deelverzameling met knooppunten, één upgradedomein tegelijk.</span><span class="sxs-lookup"><span data-stu-id="90d8a-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="90d8a-105">Tijdens dit proces een aantal upgradedomeinen zijn op Hallo nieuwere versie van uw toepassing en een aantal upgradedomeinen zijn op een oudere versie van uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="90d8a-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="90d8a-106">Tijdens het Hallo-implementatie, nieuwe versie van uw toepassing hello moet kunnen tooread Hallo oude versie van uw gegevens en Hallo oude versie van uw toepassing moet kunnen tooread Hallo nieuwe versie van uw gegevens.</span><span class="sxs-lookup"><span data-stu-id="90d8a-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="90d8a-107">Als Hallo-gegevensindeling niet voorwaarts en achterwaarts compatibel zijn, Hallo upgrade mogelijk niet werkt of slechter, gegevens mogelijk verloren of beschadigd.</span><span class="sxs-lookup"><span data-stu-id="90d8a-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="90d8a-108">Dit artikel wordt beschreven wat wordt verstaan onder de indeling van uw gegevens en biedt de aanbevolen procedures om ervoor te zorgen dat uw gegevens voorwaarts en achterwaarts zijn compatibel.</span><span class="sxs-lookup"><span data-stu-id="90d8a-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="90d8a-109">Wat is de indeling van uw gegevens?</span><span class="sxs-lookup"><span data-stu-id="90d8a-109">What makes up your data format?</span></span>
<span data-ttu-id="90d8a-110">In de Azure Service Fabric afkomstig Hallo-gegevens die is opgeslagen en gerepliceerd van uw C#-klassen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="90d8a-111">Voor toepassingen die gebruikmaken van [betrouwbare verzamelingen](service-fabric-reliable-services-reliable-collections.md), dat er gegevens Hallo-objecten in Hallo betrouwbare woordenlijsten en wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="90d8a-112">Voor toepassingen die gebruikmaken van [Reliable Actors](service-fabric-reliable-actors-introduction.md), namelijk Hallo status voor Hallo actor back-ups.</span><span class="sxs-lookup"><span data-stu-id="90d8a-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="90d8a-113">Deze C#-klassen moet serializable toobe doorvoeren en repliceren.</span><span class="sxs-lookup"><span data-stu-id="90d8a-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="90d8a-114">Daarom wordt Hallo gegevensindeling gedefinieerd door Hallo velden en eigenschappen die zijn geserialiseerd, evenals hoe ze worden geserialiseerd.</span><span class="sxs-lookup"><span data-stu-id="90d8a-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="90d8a-115">Bijvoorbeeld in een `IReliableDictionary<int, MyClass>` Hallo gegevens is een geserialiseerde `int` en een geserialiseerde `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="90d8a-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="90d8a-116">Code wijzigt die resulteren in een wijziging van de indeling gegevens</span><span class="sxs-lookup"><span data-stu-id="90d8a-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="90d8a-117">Aangezien Hallo gegevensindeling wordt bepaald door de C#-klassen, mogelijk wijzigingen toohello klassen indeling gewijzigde gegevens.</span><span class="sxs-lookup"><span data-stu-id="90d8a-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="90d8a-118">Wees voorzichtig tooensure dat kan worden verwerkt door een uitrollende upgrade Hallo gegevensindeling wijzigen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="90d8a-119">Voorbeelden kunnen leiden tot gegevenswijzigingen van de indeling:</span><span class="sxs-lookup"><span data-stu-id="90d8a-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="90d8a-120">Het toevoegen of verwijderen van velden of eigenschappen</span><span class="sxs-lookup"><span data-stu-id="90d8a-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="90d8a-121">Naamswijzigingen velden of eigenschappen</span><span class="sxs-lookup"><span data-stu-id="90d8a-121">Renaming fields or properties</span></span>
* <span data-ttu-id="90d8a-122">Hallo-typen van velden of eigenschappen wijzigen</span><span class="sxs-lookup"><span data-stu-id="90d8a-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="90d8a-123">Hallo de naam van klasse of naamruimte wijzigen</span><span class="sxs-lookup"><span data-stu-id="90d8a-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="90d8a-124">Gegevenscontract als standaard serialisatiefunctie Hallo</span><span class="sxs-lookup"><span data-stu-id="90d8a-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="90d8a-125">Hallo serialisatiefunctie is is verantwoordelijk voor het Hallo-gegevens lezen en bij het deserialiseren van het naar de huidige versie hello, zelfs als Hallo gegevens zich in een oudere of *nieuwere* versie.</span><span class="sxs-lookup"><span data-stu-id="90d8a-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="90d8a-126">Hallo standaard serialisatiefunctie is Hallo [gegevenscontract serialisatiefunctie](https://msdn.microsoft.com/library/ms733127.aspx), die goed gedefinieerde versieregels heeft.</span><span class="sxs-lookup"><span data-stu-id="90d8a-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="90d8a-127">Betrouwbare verzamelingen kunnen Hallo serialisatiefunctie toobe genegeerd, maar Reliable Actors momenteel niet.</span><span class="sxs-lookup"><span data-stu-id="90d8a-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="90d8a-128">Hallo gegevens serialisatiefunctie speelt een belangrijke rol bij het inschakelen van rollende upgrades.</span><span class="sxs-lookup"><span data-stu-id="90d8a-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="90d8a-129">Hallo gegevenscontract serialisatiefunctie is Hallo serialisatiefunctie die we voor Service Fabric-toepassingen aanbevelen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="90d8a-130">Hoe Hallo gegevensindeling is van invloed op een uitrollende upgrade</span><span class="sxs-lookup"><span data-stu-id="90d8a-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="90d8a-131">Tijdens een rolling upgrade er zijn twee hoofdscenario's waar Hallo serialisatiefunctie een oudere ondervinden of *nieuwere* versie van uw gegevens:</span><span class="sxs-lookup"><span data-stu-id="90d8a-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="90d8a-132">Nadat een knooppunt is bijgewerkt en wordt een back-up wordt gestart, wordt nieuwe serialisatiefunctie Hallo Hallo gegevens persistente toodisk door de oude versie Hallo geladen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="90d8a-133">Tijdens het Hallo rolling upgrade, bevat Hallo cluster een combinatie van Hallo oude en nieuwe versies van uw code.</span><span class="sxs-lookup"><span data-stu-id="90d8a-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="90d8a-134">Omdat replica's kunnen worden geplaatst in verschillende domeinen van de upgrade en replica's gegevens tooeach andere, hello nieuwe en/of oude verzenden kan versie van uw gegevens door Hallo nieuwe en/of de oude versie van de serializer worden aangetroffen.</span><span class="sxs-lookup"><span data-stu-id="90d8a-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="90d8a-135">Hallo ' nieuwe ' en 'oude versie' hier verwijzen toohello versie van uw code die wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="90d8a-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="90d8a-136">Hallo 'nieuwe serialisatiefunctie' verwijst toohello serialisatiefunctie code die wordt uitgevoerd in de nieuwe versie van uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="90d8a-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="90d8a-137">Hallo 'nieuwe gegevens' verwijst toohello geserialiseerd C#-klasse van de nieuwe versie van uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="90d8a-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="90d8a-138">Hallo twee versies van code en indeling van gegevens moet voorwaarts en achterwaarts compatibel.</span><span class="sxs-lookup"><span data-stu-id="90d8a-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="90d8a-139">Als ze niet compatibel zijn, Hallo rolling upgrade mislukken of mogelijk gegevens verloren.</span><span class="sxs-lookup"><span data-stu-id="90d8a-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="90d8a-140">Hallo rolling upgrade mislukken omdat Hallo code of serialisatiefunctie veroorzaken kan uitzonderingen of een storing zodra het Hallo andere versie.</span><span class="sxs-lookup"><span data-stu-id="90d8a-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="90d8a-141">Gegevens zijn mogelijk verloren als er bijvoorbeeld een nieuwe eigenschap is toegevoegd, maar Hallo oude serialisatiefunctie verwijdert alle tijdens de deserialisatie.</span><span class="sxs-lookup"><span data-stu-id="90d8a-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="90d8a-142">Gegevenscontract is Hallo aanbevolen oplossing om ervoor te zorgen dat uw gegevens compatibel is.</span><span class="sxs-lookup"><span data-stu-id="90d8a-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="90d8a-143">Goed gedefinieerde versieregels voor toevoegen, verwijderen en wijzigen van velden heeft.</span><span class="sxs-lookup"><span data-stu-id="90d8a-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="90d8a-144">Het biedt ook ondersteuning voor omgaan met onbekende velden en omgaan met klassenovername in Hallo serialisatie en deserialisatie proces vereist.</span><span class="sxs-lookup"><span data-stu-id="90d8a-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="90d8a-145">Zie voor meer informatie [gegevenscontract met behulp van](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="90d8a-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="90d8a-146">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="90d8a-146">Next steps</span></span>
<span data-ttu-id="90d8a-147">[Een upgrade van uw toepassing met behulp van Visual Studio](service-fabric-application-upgrade-tutorial.md) begeleidt u bij een upgrade van de toepassing met Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="90d8a-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="90d8a-148">[Een upgrade van uw toepassing met behulp van Powershell](service-fabric-application-upgrade-tutorial-powershell.md) begeleidt u bij een upgrade van de toepassing met behulp van PowerShell.</span><span class="sxs-lookup"><span data-stu-id="90d8a-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="90d8a-149">Bepalen hoe uw toepassing wordt bijgewerkt met behulp van [Parameters Upgrade](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="90d8a-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="90d8a-150">Meer informatie over hoe toouse geavanceerde functies tijdens het bijwerken van uw toepassing door ernaar te verwijzen[geavanceerde onderwerpen](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="90d8a-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="90d8a-151">Veelvoorkomende problemen oplossen in toepassingsupgrades door te verwijzen toohello stappen in [toepassingsupgrades probleemoplossing ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="90d8a-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

