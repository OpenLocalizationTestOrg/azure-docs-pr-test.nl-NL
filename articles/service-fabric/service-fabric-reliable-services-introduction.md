---
title: Overzicht van het betrouwbare Service Fabric-Service-programmeermodel | Microsoft Docs
description: Informatie over Service Fabric van betrouwbare Service programmeermodel en schrijven van uw eigen services aan de slag.
services: Service-Fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: vturecek; mani-ramaswamy
ms.assetid: 0c88a533-73f8-4ae1-a939-67d17456ac06
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: masnider;
ms.openlocfilehash: 601b1c7713c9785d949c1c72000ec7f3f63dd682
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="reliable-services-overview"></a><span data-ttu-id="bc92c-103">Overzicht van Reliable Services</span><span class="sxs-lookup"><span data-stu-id="bc92c-103">Reliable Services overview</span></span>
<span data-ttu-id="bc92c-104">Azure Service Fabric vereenvoudigt schrijven en staatloze en stateful Reliable Services beheren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-104">Azure Service Fabric simplifies writing and managing stateless and stateful Reliable Services.</span></span> <span data-ttu-id="bc92c-105">Dit onderwerp wordt beschreven:</span><span class="sxs-lookup"><span data-stu-id="bc92c-105">This topic covers:</span></span>

* <span data-ttu-id="bc92c-106">Het Reliable Services programmeermodel voor staatloze en stateful services.</span><span class="sxs-lookup"><span data-stu-id="bc92c-106">The Reliable Services programming model for stateless and stateful services.</span></span>
* <span data-ttu-id="bc92c-107">De keuzes die u maken moet bij het schrijven van een betrouwbare Service.</span><span class="sxs-lookup"><span data-stu-id="bc92c-107">The choices you have to make when writing a Reliable Service.</span></span>
* <span data-ttu-id="bc92c-108">Sommige scenario's en voorbeelden van het gebruik van Reliable Services en hoe ze zijn geschreven.</span><span class="sxs-lookup"><span data-stu-id="bc92c-108">Some scenarios and examples of when to use Reliable Services and how they are written.</span></span>

<span data-ttu-id="bc92c-109">Reliable Services is een van de programmeermodellen beschikbaar is op de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="bc92c-109">Reliable Services is one of the programming models available on Service Fabric.</span></span> <span data-ttu-id="bc92c-110">De andere is het programmeermodel betrouwbare acteur, waarmee u een virtuele Actor-programmeermodel boven op het model voor Reliable Services.</span><span class="sxs-lookup"><span data-stu-id="bc92c-110">The other is the Reliable Actor programming model, which provides a virtual Actor programming model on top of the Reliable Services model.</span></span> <span data-ttu-id="bc92c-111">Zie voor meer informatie over het model voor Reliable Actors [Inleiding tot Service Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="bc92c-111">For more information on the Reliable Actors programming model, see [Introduction to Service Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span></span>

<span data-ttu-id="bc92c-112">Service Fabric de levensduur van de services van de inrichting en implementatie via bijwerken en verwijderen, beheert [Service Fabric-Toepassingsbeheer](service-fabric-deploy-remove-applications.md).</span><span class="sxs-lookup"><span data-stu-id="bc92c-112">Service Fabric manages the lifetime of services, from provisioning and deployment through upgrade and deletion, via [Service Fabric application management](service-fabric-deploy-remove-applications.md).</span></span>

## <a name="what-are-reliable-services"></a><span data-ttu-id="bc92c-113">Wat zijn Reliable Services?</span><span class="sxs-lookup"><span data-stu-id="bc92c-113">What are Reliable Services?</span></span>
<span data-ttu-id="bc92c-114">Reliable Services biedt een eenvoudige, krachtige, op het hoogste niveau programmeermodel kunt u express wat belangrijk is voor uw toepassing is.</span><span class="sxs-lookup"><span data-stu-id="bc92c-114">Reliable Services gives you a simple, powerful, top-level programming model to help you express what is important to your application.</span></span> <span data-ttu-id="bc92c-115">Met de Reliable Services programmeermodel gebruikt, beschikt u over:</span><span class="sxs-lookup"><span data-stu-id="bc92c-115">With the Reliable Services programming model, you get:</span></span>

* <span data-ttu-id="bc92c-116">Toegang tot de rest van de Service Fabric programming API's.</span><span class="sxs-lookup"><span data-stu-id="bc92c-116">Access to the rest of the Service Fabric programming APIs.</span></span> <span data-ttu-id="bc92c-117">In tegenstelling tot Service Fabric-Services is gemodelleerd als [Gast uitvoerbare bestanden](service-fabric-deploy-existing-app.md), Reliable Services krijgen tot de rest van de Service Fabric-API's rechtstreeks gebruiken.</span><span class="sxs-lookup"><span data-stu-id="bc92c-117">Unlike Service Fabric Services modeled as [Guest Executables](service-fabric-deploy-existing-app.md), Reliable Services get to use the rest of the Service Fabric APIs directly.</span></span> <span data-ttu-id="bc92c-118">Hierdoor kunnen services:</span><span class="sxs-lookup"><span data-stu-id="bc92c-118">This allows services to:</span></span>
  * <span data-ttu-id="bc92c-119">query op het systeem</span><span class="sxs-lookup"><span data-stu-id="bc92c-119">query the system</span></span>
  * <span data-ttu-id="bc92c-120">rapport health over entiteiten in het cluster</span><span class="sxs-lookup"><span data-stu-id="bc92c-120">report health about entities in the cluster</span></span>
  * <span data-ttu-id="bc92c-121">meldingen ontvangen over configuratie-en code</span><span class="sxs-lookup"><span data-stu-id="bc92c-121">receive notifications about configuration and code changes</span></span>
  * <span data-ttu-id="bc92c-122">zoeken en te communiceren met andere services</span><span class="sxs-lookup"><span data-stu-id="bc92c-122">find and communicate with other services,</span></span>
  * <span data-ttu-id="bc92c-123">(optioneel) gebruiken de [betrouwbare verzamelingen](service-fabric-reliable-services-reliable-collections.md)</span><span class="sxs-lookup"><span data-stu-id="bc92c-123">(optionally) use the [Reliable Collections](service-fabric-reliable-services-reliable-collections.md)</span></span>
  * <span data-ttu-id="bc92c-124">.. en zodat ze toegang hebben tot veel andere mogelijkheden via een eerste-klas programmeermodel in diverse programmeertalen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-124">...and giving them access to many other capabilities, all from a first class programming model in several programming languages.</span></span>
* <span data-ttu-id="bc92c-125">Een eenvoudige model voor het uitvoeren van uw eigen code die lijkt op modellen die u om te gebruikt programmeren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-125">A simple model for running your own code that looks like programming models you are used to.</span></span> <span data-ttu-id="bc92c-126">Uw code is een goed gedefinieerde toegangspunt en de levenscyclus van eenvoudig te beheren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-126">Your code has a well-defined entry point and easily managed lifecycle.</span></span>
* <span data-ttu-id="bc92c-127">Een communicatiemodel pluggable.</span><span class="sxs-lookup"><span data-stu-id="bc92c-127">A pluggable communication model.</span></span> <span data-ttu-id="bc92c-128">Gebruik het transport van uw keuze, zoals HTTP met [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, aangepaste TCP-protocollen, of iets anders.</span><span class="sxs-lookup"><span data-stu-id="bc92c-128">Use the transport of your choice, such as HTTP with [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, custom TCP protocols, or anything else.</span></span> <span data-ttu-id="bc92c-129">Betrouwbare Services bieden sommige geweldige out-of-the-box-opties die u kunt gebruiken of u kunt uw eigen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-129">Reliable Services provide some great out-of-the-box options you can use, or you can provide your own.</span></span>
* <span data-ttu-id="bc92c-130">Voor stateful services het programmeermodel Reliable Services kunt u voor het opslaan van uw status meteen in uw service met behulp van consistent en betrouwbaar [betrouwbare verzamelingen](service-fabric-reliable-services-reliable-collections.md).</span><span class="sxs-lookup"><span data-stu-id="bc92c-130">For stateful services, the Reliable Services programming model allows you to consistently and reliably store your state right inside your service by using [Reliable Collections](service-fabric-reliable-services-reliable-collections.md).</span></span> <span data-ttu-id="bc92c-131">Betrouwbare verzamelingen zijn een eenvoudige reeks maximaal beschikbare en betrouwbare verzameling klassen die worden vertrouwd voor iedereen die is gebruikt C#-verzamelingen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-131">Reliable Collections are a simple set of highly available and reliable collection classes that will be familiar to anyone who has used C# collections.</span></span> <span data-ttu-id="bc92c-132">Traditioneel vereist services externe systemen voor betrouwbare statusbeheer.</span><span class="sxs-lookup"><span data-stu-id="bc92c-132">Traditionally, services needed external systems for Reliable state management.</span></span> <span data-ttu-id="bc92c-133">Met betrouwbare verzamelingen kunt u uw status naast uw berekenings opslaan met de dezelfde hoge beschikbaarheid en betrouwbaarheid die u hebt zou verwachten van maximaal beschikbare externe stores.</span><span class="sxs-lookup"><span data-stu-id="bc92c-133">With Reliable Collections, you can store your state next to your compute with the same high availability and reliability you've come to expect from highly available external stores.</span></span> <span data-ttu-id="bc92c-134">Dit model verbetert ook latentie omdat u zijn CO-locatie op de berekenings- en status moet werken.</span><span class="sxs-lookup"><span data-stu-id="bc92c-134">This model also improves latency because you are co-locating the compute and state it needs to function.</span></span>

<span data-ttu-id="bc92c-135">Bekijk deze video van Microsoft Virtual Academy voor een overzicht van Reliable services:<center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span><span class="sxs-lookup"><span data-stu-id="bc92c-135">Watch this Microsoft Virtual Academy video for an overview of Reliable services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span></span>

## <a name="what-makes-reliable-services-different"></a><span data-ttu-id="bc92c-136">Wat Reliable Services verschillende maakt?</span><span class="sxs-lookup"><span data-stu-id="bc92c-136">What makes Reliable Services different?</span></span>
<span data-ttu-id="bc92c-137">Reliable Services in Service Fabric wijken af van de services die u hebt gemaakt voordat.</span><span class="sxs-lookup"><span data-stu-id="bc92c-137">Reliable Services in Service Fabric are different from services you may have written before.</span></span> <span data-ttu-id="bc92c-138">Service Fabric biedt betrouwbaarheid, beschikbaarheid, consistentie en schaalbaarheid.</span><span class="sxs-lookup"><span data-stu-id="bc92c-138">Service Fabric provides reliability, availability, consistency, and scalability.</span></span>

* <span data-ttu-id="bc92c-139">**Betrouwbaarheid** - uw service blijft zelfs in omgevingen met onbetrouwbaar waar uw machines mislukken of druk op netwerkproblemen of in gevallen waarin de services zelf optreden fouten en vastlopen of mislukken.</span><span class="sxs-lookup"><span data-stu-id="bc92c-139">**Reliability** - Your service stays up even in unreliable environments where your machines fail or hit network issues, or in cases where the services themselves encounter errors and crash or fail.</span></span> <span data-ttu-id="bc92c-140">Voor stateful services, wordt de status behouden zelfs met netwerk of andere fouten.</span><span class="sxs-lookup"><span data-stu-id="bc92c-140">For stateful services, your state is preserved even in the presence of network or other failures.</span></span>
* <span data-ttu-id="bc92c-141">**Beschikbaarheid** -uw-service is bereikbaar is en reageert.</span><span class="sxs-lookup"><span data-stu-id="bc92c-141">**Availability** - Your service is reachable and responsive.</span></span> <span data-ttu-id="bc92c-142">Service Fabric onderhoudt het gewenste aantal actieve exemplaren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-142">Service Fabric maintains your desired number of running copies.</span></span>
* <span data-ttu-id="bc92c-143">**Schaalbaarheid** - Services worden ontkoppeld van specifieke hardware en ze kunnen vergroten of verkleinen als nodig is via het toevoegen of verwijderen van de hardware of andere bronnen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-143">**Scalability** - Services are decoupled from specific hardware, and they can grow or shrink as necessary through the addition or removal of hardware or other resources.</span></span> <span data-ttu-id="bc92c-144">Services gemakkelijk worden gepartitioneerd (met name in het geval stateful) om ervoor te zorgen dat de service kan worden geschaald en verwerken van gedeeltelijke fouten.</span><span class="sxs-lookup"><span data-stu-id="bc92c-144">Services are easily partitioned (especially in the stateful case) to ensure that the service can scale and handle partial failures.</span></span> <span data-ttu-id="bc92c-145">Services kunnen worden gemaakt en verwijderd dynamisch via programmacode, waardoor meer exemplaren worden zo nodig worden ingezet spreken in reactie op aanvragen van klanten.</span><span class="sxs-lookup"><span data-stu-id="bc92c-145">Services can be created and deleted dynamically via code, enabling more instances to be spun up as necessary, say in response to customer requests.</span></span> <span data-ttu-id="bc92c-146">Service Fabric raadt ten slotte services lightweight.</span><span class="sxs-lookup"><span data-stu-id="bc92c-146">Finally, Service Fabric encourages services to be lightweight.</span></span> <span data-ttu-id="bc92c-147">Service Fabric kunt duizenden services in te richten in een enkel proces in plaats van dat of dat het volledige OS-exemplaren of processen tot één exemplaar van een service.</span><span class="sxs-lookup"><span data-stu-id="bc92c-147">Service Fabric allows thousands of services to be provisioned within a single process, rather than requiring or dedicating entire OS instances or processes to a single instance of a service.</span></span>
* <span data-ttu-id="bc92c-148">**Consistentie** -gegevens zijn opgeslagen in deze service kan worden gegarandeerd consistent.</span><span class="sxs-lookup"><span data-stu-id="bc92c-148">**Consistency** - Any information stored in this service can be guaranteed to be consistent.</span></span> <span data-ttu-id="bc92c-149">Dit geldt zelfs in meerdere betrouwbare verzamelingen binnen een service.</span><span class="sxs-lookup"><span data-stu-id="bc92c-149">This is true even across multiple reliable collections within a service.</span></span> <span data-ttu-id="bc92c-150">Wijzigingen in verzamelingen in een service kunnen worden gemaakt op een transactioneel atomic manier.</span><span class="sxs-lookup"><span data-stu-id="bc92c-150">Changes across collections within a service can be made in a transactionally atomic manner.</span></span>

## <a name="service-lifecycle"></a><span data-ttu-id="bc92c-151">De levenscyclus van de service</span><span class="sxs-lookup"><span data-stu-id="bc92c-151">Service lifecycle</span></span>
<span data-ttu-id="bc92c-152">Of uw service stateful of stateless, bieden Reliable Services de levensduur van een eenvoudige, waarmee u snel plug-in uw code en aan de slag.</span><span class="sxs-lookup"><span data-stu-id="bc92c-152">Whether your service is stateful or stateless, Reliable Services provide a simple lifecycle that lets you quickly plug in your code and get started.</span></span>  <span data-ttu-id="bc92c-153">Er zijn maar een of twee methoden die u implementeren wilt voor uw service up-to-date en worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="bc92c-153">There are just one or two methods that you need to implement to get your service up and running.</span></span>

* <span data-ttu-id="bc92c-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** -deze methode is waar de service definieert voor de communicatie stack(s) die zij wil gebruiken.</span><span class="sxs-lookup"><span data-stu-id="bc92c-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** - This method is where the service defines the communication stack(s) that it wants to use.</span></span> <span data-ttu-id="bc92c-155">De communicatie-stack, zoals [Web API](service-fabric-reliable-services-communication-webapi.md), is wat definieert de luisterende eindpunt of de eindpunten voor de service (hoe clients bereiken voor de service).</span><span class="sxs-lookup"><span data-stu-id="bc92c-155">The communication stack, such as [Web API](service-fabric-reliable-services-communication-webapi.md), is what defines the listening endpoint or endpoints for the service (how clients reach the service).</span></span> <span data-ttu-id="bc92c-156">Het definieert ook de wisselwerking tussen de berichten die worden weergegeven met de rest van de servicecode.</span><span class="sxs-lookup"><span data-stu-id="bc92c-156">It also defines how the messages that appear interact with the rest of the service code.</span></span>
* <span data-ttu-id="bc92c-157">**RunAsync** -deze methode is waarin de zakelijke logica in uw service wordt uitgevoerd en waarbij deze zou ere van eventuele achtergrondtaken die moeten worden uitgevoerd voor de levensduur van de service.</span><span class="sxs-lookup"><span data-stu-id="bc92c-157">**RunAsync** - This method is where your service runs its business logic, and where it would kick off any background tasks that should run for the lifetime of the service.</span></span> <span data-ttu-id="bc92c-158">De annulering-token dat is opgegeven, is een signaal voor wanneer dat werk moet worden gestopt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-158">The cancellation token that is provided is a signal for when that work should stop.</span></span> <span data-ttu-id="bc92c-159">Als de service moet berichten uit een betrouwbare wachtrij ophalen en deze te verwerken, is dit bijvoorbeeld waarbij die werken gebeurt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-159">For example, if the service needs to pull messages out of a Reliable Queue and process them, this is where that work happens.</span></span>

<span data-ttu-id="bc92c-160">Als u over reliable services voor de eerste keer leert, leest u op!</span><span class="sxs-lookup"><span data-stu-id="bc92c-160">If you're learning about reliable services for the first time, read on!</span></span> <span data-ttu-id="bc92c-161">Als u een gedetailleerd overzicht van de levenscyclus van betrouwbare services zoekt, kunt u Ga via naar [in dit artikel](service-fabric-reliable-services-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="bc92c-161">If you're looking for a detailed walkthrough of the lifecycle of reliable services, you can head over to [this article](service-fabric-reliable-services-lifecycle.md).</span></span>

## <a name="example-services"></a><span data-ttu-id="bc92c-162">Voorbeeld van de services</span><span class="sxs-lookup"><span data-stu-id="bc92c-162">Example services</span></span>
<span data-ttu-id="bc92c-163">Dit programmeermodel weet, gaat nu een kort overzicht van twee verschillende services om te zien hoe deze onderdelen in elkaar passen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-163">Knowing this programming model, let's take a quick look at two different services to see how these pieces fit together.</span></span>

### <a name="stateless-reliable-services"></a><span data-ttu-id="bc92c-164">Staatloze Reliable Services</span><span class="sxs-lookup"><span data-stu-id="bc92c-164">Stateless Reliable Services</span></span>
<span data-ttu-id="bc92c-165">Een stateless service is een waar er is geen status die in de service wordt onderhouden tussen aanroepen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-165">A stateless service is one where there is no state maintained within the service across calls.</span></span> <span data-ttu-id="bc92c-166">Geen status die aanwezig is, is volledig beschikbare en geen vereist synchronisatie, replicatie, persistentie of hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="bc92c-166">Any state that is present is entirely disposable and doesn't require synchronization, replication, persistence, or high availability.</span></span>

<span data-ttu-id="bc92c-167">Neem bijvoorbeeld een rekenmachine die heeft geen geheugen en alle voorwaarden en bewerkingen om uit te voeren in één keer ontvangt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-167">For example, consider a calculator that has no memory and receives all terms and operations to perform at once.</span></span>

<span data-ttu-id="bc92c-168">In dit geval de `RunAsync()` (C#) of `runAsync()` (Java) van de service kan niet leeg zijn, omdat er is geen taak-achtergrondverwerking die de service moet doen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-168">In this case, the `RunAsync()` (C#) or `runAsync()` (Java) of the service can be empty, since there is no background task-processing that the service needs to do.</span></span> <span data-ttu-id="bc92c-169">Wanneer de Rekenmachine-service is gemaakt, wordt een `ICommunicationListener` (C#) of `CommunicationListener` (Java) (bijvoorbeeld [Web API](service-fabric-reliable-services-communication-webapi.md)) die een luisterende eindpunt op sommige poort wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="bc92c-169">When the calculator service is created, it returns an `ICommunicationListener` (C#) or `CommunicationListener` (Java) (for example [Web API](service-fabric-reliable-services-communication-webapi.md)) that opens up a listening endpoint on some port.</span></span> <span data-ttu-id="bc92c-170">Dit eindpunt luisteren worden verbonden met de andere berekenings-methoden (voorbeeld: "Toevoegen (n1, n2)") die de Rekenmachine openbare API definiëren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-170">This listening endpoint hooks up to the different calculation methods (example: "Add(n1, n2)") that define the calculator's public API.</span></span>

<span data-ttu-id="bc92c-171">Wanneer er wordt een aanroep van een client, de juiste methode is aangeroepen en de Rekenmachine-service voert de bewerkingen van de gegevens die zijn opgegeven en retourneert het resultaat.</span><span class="sxs-lookup"><span data-stu-id="bc92c-171">When a call is made from a client, the appropriate method is invoked, and the calculator service performs the operations on the data provided and returns the result.</span></span> <span data-ttu-id="bc92c-172">Geen status worden niet opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-172">It doesn't store any state.</span></span>

<span data-ttu-id="bc92c-173">Geen interne status niet opslaan vereenvoudigt de Rekenmachine van dit voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="bc92c-173">Not storing any internal state makes this example calculator simple.</span></span> <span data-ttu-id="bc92c-174">Maar de meeste services worden niet echt staatloze.</span><span class="sxs-lookup"><span data-stu-id="bc92c-174">But most services aren't truly stateless.</span></span> <span data-ttu-id="bc92c-175">In plaats daarvan extern ze hun status naar een andere store.</span><span class="sxs-lookup"><span data-stu-id="bc92c-175">Instead, they externalize their state to some other store.</span></span> <span data-ttu-id="bc92c-176">(Bijvoorbeeld een web-app die is afhankelijk van de sessiestatus behouden in een archief met back-ups maken of de cache is niet staatloze.)</span><span class="sxs-lookup"><span data-stu-id="bc92c-176">(For example, any web app that relies on keeping session state in a backing store or cache is not stateless.)</span></span>

<span data-ttu-id="bc92c-177">Een voorbeeld van hoe stateless services worden gebruikt Service Fabric is als een front-end dat toegang biedt tot de openbare API voor een webtoepassing.</span><span class="sxs-lookup"><span data-stu-id="bc92c-177">A common example of how stateless services are used in Service Fabric is as a front-end that exposes the public-facing API for a web application.</span></span> <span data-ttu-id="bc92c-178">De front-end-service wordt vervolgens gesproken stateful Services om de gebruikersaanvraag van een te voltooien.</span><span class="sxs-lookup"><span data-stu-id="bc92c-178">The front-end service then talks to stateful services to complete a user request.</span></span> <span data-ttu-id="bc92c-179">In dit geval worden aanroepen van clients omgeleid naar een bekende poort, bijvoorbeeld 80, waarbij de staatloze service luistert.</span><span class="sxs-lookup"><span data-stu-id="bc92c-179">In this case, calls from clients are directed to a known port, such as 80, where the stateless service is listening.</span></span> <span data-ttu-id="bc92c-180">Deze staatloze service ontvangt de oproep en bepaalt of de aanroep van een vertrouwde partij is en welke service het bestemd is voor.</span><span class="sxs-lookup"><span data-stu-id="bc92c-180">This stateless service receives the call and determines whether the call is from a trusted party and which service it's destined for.</span></span>  <span data-ttu-id="bc92c-181">Vervolgens de stateless-service stuurt de aanroep naar de juiste partitie van de stateful service en wordt gewacht op een antwoord.</span><span class="sxs-lookup"><span data-stu-id="bc92c-181">Then, the stateless service forwards the call to the correct partition of the stateful service and waits for a response.</span></span> <span data-ttu-id="bc92c-182">Wanneer de staatloze service een antwoord ontvangt, wordt geantwoord naar de oorspronkelijke client.</span><span class="sxs-lookup"><span data-stu-id="bc92c-182">When the stateless service receives a response, it replies to the original client.</span></span> <span data-ttu-id="bc92c-183">Een voorbeeld van deze service is in onze voorbeelden [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span><span class="sxs-lookup"><span data-stu-id="bc92c-183">An example of such a service is in our samples [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span></span> <span data-ttu-id="bc92c-184">Dit is slechts één voorbeeld van dit patroon in de voorbeelden, er zijn andere gebruikers in ook andere voorbeelden.</span><span class="sxs-lookup"><span data-stu-id="bc92c-184">This is only one example of this pattern in the samples, there are others in other samples as well.</span></span>

### <a name="stateful-reliable-services"></a><span data-ttu-id="bc92c-185">Stateful Reliable Services</span><span class="sxs-lookup"><span data-stu-id="bc92c-185">Stateful Reliable Services</span></span>
<span data-ttu-id="bc92c-186">Een stateful service is een die een gedeelte van de status behouden consistent en aanwezig is in de volgorde voor de service naar de functie nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-186">A stateful service is one that must have some portion of state kept consistent and present in order for the service to function.</span></span> <span data-ttu-id="bc92c-187">Houd rekening met een service die voortdurend berekent een oplopende gemiddelde van een bepaalde waarde op basis van updates die het ontvangt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-187">Consider a service that constantly computes a rolling average of some value based on updates it receives.</span></span> <span data-ttu-id="bc92c-188">U doet dit door moet de huidige set van inkomende aanvragen worden proces en de huidige gemiddelde moet hebben.</span><span class="sxs-lookup"><span data-stu-id="bc92c-188">To do this, it must have the current set of incoming requests it needs to process and the current average.</span></span> <span data-ttu-id="bc92c-189">Alle services die worden opgehaald, verwerkt en wordt informatie opgeslagen in een externe winkel (zoals een Azure-blob of tabel store vandaag) is stateful.</span><span class="sxs-lookup"><span data-stu-id="bc92c-189">Any service that retrieves, processes, and stores information in an external store (such as an Azure blob or table store today) is stateful.</span></span> <span data-ttu-id="bc92c-190">De status blijven alleen in het externe gegevensarchief.</span><span class="sxs-lookup"><span data-stu-id="bc92c-190">It just keeps its state in the external state store.</span></span>

<span data-ttu-id="bc92c-191">De meeste services opslaan vandaag hun status extern, omdat het externe archief wat biedt betrouwbaarheid, beschikbaarheid, schaalbaarheid en consistentie voor die status.</span><span class="sxs-lookup"><span data-stu-id="bc92c-191">Most services today store their state externally, since the external store is what provides reliability, availability, scalability, and consistency for that state.</span></span> <span data-ttu-id="bc92c-192">Services worden niet in Service Fabric is vereist voor het opslaan van hun status extern.</span><span class="sxs-lookup"><span data-stu-id="bc92c-192">In Service Fabric, services aren't required to store their state externally.</span></span> <span data-ttu-id="bc92c-193">Service Fabric zorgt voor deze vereisten voor zowel de code van de status van de service.</span><span class="sxs-lookup"><span data-stu-id="bc92c-193">Service Fabric takes care of these requirements for both the service code and the service state.</span></span>

> [!NOTE]
> <span data-ttu-id="bc92c-194">Ondersteuning voor betrouwbare Stateful Services is niet beschikbaar op Linux nog (voor C# of Java).</span><span class="sxs-lookup"><span data-stu-id="bc92c-194">Support for Stateful Reliable Services is not available on Linux yet (for C# or Java).</span></span>
>

<span data-ttu-id="bc92c-195">Stel, dat we willen schrijven van een service waarmee afbeeldingen worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-195">Let's say we want to write a service that processes images.</span></span> <span data-ttu-id="bc92c-196">U doet dit door maakt de service in een afbeelding en de reeks conversies uitvoeren op die installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="bc92c-196">To do this, the service takes in an image and the series of conversions to perform on that image.</span></span> <span data-ttu-id="bc92c-197">Deze service retourneert een communicatie-listener (we Stel dat het is een WebAPI) dat gegarandeerd een API, zoals `ConvertImage(Image i, IList<Conversion> conversions)`.</span><span class="sxs-lookup"><span data-stu-id="bc92c-197">This service returns a communication listener (let's suppose it's a WebAPI) that exposes an API like `ConvertImage(Image i, IList<Conversion> conversions)`.</span></span> <span data-ttu-id="bc92c-198">Wanneer een aanvraag ontvangt, de service wordt opgeslagen in een `IReliableQueue`, en retourneert een id voor de client zodat deze de aanvraag kunt bijhouden.</span><span class="sxs-lookup"><span data-stu-id="bc92c-198">When it receives a request, the service stores it in a `IReliableQueue`, and returns some id to the client so it can track the request.</span></span>

<span data-ttu-id="bc92c-199">In deze service `RunAsync()` complexere kan worden.</span><span class="sxs-lookup"><span data-stu-id="bc92c-199">In this service, `RunAsync()` could be more complex.</span></span> <span data-ttu-id="bc92c-200">De service heeft een lus in de `RunAsync()` die aanvragen van haalt `IReliableQueue` en voert de gevraagde omzettingen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-200">The service has a loop inside its `RunAsync()` that pulls requests out of `IReliableQueue` and performs the conversions requested.</span></span> <span data-ttu-id="bc92c-201">De resultaten ophalen opgeslagen in een `IReliableDictionary` zodat wanneer de client terugkomt krijgen ze hun geconverteerde installatiekopieën.</span><span class="sxs-lookup"><span data-stu-id="bc92c-201">The results get stored in an `IReliableDictionary` so that when the client comes back they can get their converted images.</span></span> <span data-ttu-id="bc92c-202">Om ervoor te zorgen dat zelfs als er iets niet aan de installatiekopie niet verloren, deze betrouwbare Service zou ophalen uit de wachtrij de conversies uitvoeren en sla het resultaat allemaal in één transactie.</span><span class="sxs-lookup"><span data-stu-id="bc92c-202">To ensure that even if something fails the image isn't lost, this Reliable Service would pull out of the queue, perform the conversions, and store the result all in a single transaction.</span></span> <span data-ttu-id="bc92c-203">In dit geval wordt het bericht is verwijderd uit de wachtrij en de resultaten worden opgeslagen in de woordenlijst resultaat alleen wanneer de conversies voltooid zijn.</span><span class="sxs-lookup"><span data-stu-id="bc92c-203">In this case, the message is removed from the queue and the results are stored in the result dictionary only when the conversions are complete.</span></span> <span data-ttu-id="bc92c-204">U kunt ook kan de service ophalen van de installatiekopie uit de wachtrij en direct op te slaan in een externe winkel.</span><span class="sxs-lookup"><span data-stu-id="bc92c-204">Alternatively, the service could pull the image out of the queue and immediately store it in a remote store.</span></span> <span data-ttu-id="bc92c-205">Dit reduceert de hoeveelheid staat die de service heeft voor het beheren van, maar de complexiteit toeneemt nadat de service heeft om de benodigde metagegevens voor het beheren van de externe store.</span><span class="sxs-lookup"><span data-stu-id="bc92c-205">This reduces the amount of state the service has to manage, but increases complexity since the service has to keep the necessary metadata to manage the remote store.</span></span> <span data-ttu-id="bc92c-206">Met de methode als er iets is mislukt in het midden blijft de aanvraag in de wachtrij moeten worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-206">With either approach, if something failed in the middle the request remains in the queue waiting to be processed.</span></span>

<span data-ttu-id="bc92c-207">Wat te weten over deze service is dat deze als een normale .NET-service klinkt.</span><span class="sxs-lookup"><span data-stu-id="bc92c-207">One thing to note about this service is that it sounds like a normal .NET service!</span></span> <span data-ttu-id="bc92c-208">Het enige verschil is dat de gegevensstructuren wordt gebruikt (`IReliableQueue` en `IReliableDictionary`) worden geleverd door de Service Fabric en maximaal betrouwbare, beschikbare en consistent zijn.</span><span class="sxs-lookup"><span data-stu-id="bc92c-208">The only difference is that the data structures being used (`IReliableQueue` and `IReliableDictionary`) are provided by Service Fabric, and are highly reliable, available, and consistent.</span></span>

## <a name="when-to-use-reliable-services-apis"></a><span data-ttu-id="bc92c-209">Het gebruik van betrouwbare API's voor Services</span><span class="sxs-lookup"><span data-stu-id="bc92c-209">When to use Reliable Services APIs</span></span>
<span data-ttu-id="bc92c-210">Als een van de volgende kenmerkend zijn voor de behoeften van uw toepassing-service, moet u betrouwbare Services-API's overwegen:</span><span class="sxs-lookup"><span data-stu-id="bc92c-210">If any of the following characterize your application service needs, then you should consider Reliable Services APIs:</span></span>

* <span data-ttu-id="bc92c-211">U wilt dat uw service-code (en desgewenst-status) zijn de maximaal beschikbare en betrouwbare</span><span class="sxs-lookup"><span data-stu-id="bc92c-211">You want your service's code (and optionally state) to be highly available and reliable</span></span>
* <span data-ttu-id="bc92c-212">U moet transactionele garanties over meerdere van status (bijvoorbeeld orders en items op).</span><span class="sxs-lookup"><span data-stu-id="bc92c-212">You need transactional guarantees across multiple units of state (for example, orders and order line items).</span></span>
* <span data-ttu-id="bc92c-213">De status van uw toepassing kan natuurlijk worden gemodelleerd als betrouwbare woordenlijsten en wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-213">Your application’s state can be naturally modeled as Reliable Dictionaries and Queues.</span></span>
* <span data-ttu-id="bc92c-214">Uw toepassingen, code of de status moet maximaal beschikbaar is met lage latentie lees- en schrijfbewerkingen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-214">Your applications code or state needs to be highly available with low latency reads and writes.</span></span>
* <span data-ttu-id="bc92c-215">Uw toepassing moet voor het beheren van de gelijktijdigheid van taken of de granulatie van de transactiebewerkingen bij een of meer betrouwbare verzamelingen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-215">Your application needs to control the concurrency or granularity of transacted operations across one or more Reliable Collections.</span></span>
* <span data-ttu-id="bc92c-216">U wilt beheren welke berichten of het partitioneringsschema voor uw service beheren.</span><span class="sxs-lookup"><span data-stu-id="bc92c-216">You want to manage the communications or control the partitioning scheme for your service.</span></span>
* <span data-ttu-id="bc92c-217">Uw code moet een gratis thread-runtime-omgeving.</span><span class="sxs-lookup"><span data-stu-id="bc92c-217">Your code needs a free-threaded runtime environment.</span></span>
* <span data-ttu-id="bc92c-218">Uw toepassing moet worden dynamisch gemaakt of vernietigen betrouwbare woordenlijsten of wachtrijen of hele Services tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="bc92c-218">Your application needs to dynamically create or destroy Reliable Dictionaries or Queues or whole Services at runtime.</span></span>
* <span data-ttu-id="bc92c-219">U moet programmatisch beheren van back-up van de geleverde Service Fabric en functies voor uw service-status te herstellen.</span><span class="sxs-lookup"><span data-stu-id="bc92c-219">You need to programmatically control Service Fabric-provided backup and restore features for your service’s state.</span></span>
* <span data-ttu-id="bc92c-220">Uw toepassing moet onderhouden wijzigingsoverzicht voor de eenheden van de status.</span><span class="sxs-lookup"><span data-stu-id="bc92c-220">Your application needs to maintain change history for its units of state.</span></span>
* <span data-ttu-id="bc92c-221">U wilt ontwikkelen of gebruiken van de van de derde partij ontwikkeld, aangepaste statusproviders.</span><span class="sxs-lookup"><span data-stu-id="bc92c-221">You want to develop or consume third-party-developed, custom state providers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bc92c-222">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="bc92c-222">Next steps</span></span>
* [<span data-ttu-id="bc92c-223">Betrouwbare Services snel starten</span><span class="sxs-lookup"><span data-stu-id="bc92c-223">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="bc92c-224">Reliable Services geavanceerde gebruik</span><span class="sxs-lookup"><span data-stu-id="bc92c-224">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
* [<span data-ttu-id="bc92c-225">Het model voor Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="bc92c-225">The Reliable Actors programming model</span></span>](service-fabric-reliable-actors-introduction.md)
