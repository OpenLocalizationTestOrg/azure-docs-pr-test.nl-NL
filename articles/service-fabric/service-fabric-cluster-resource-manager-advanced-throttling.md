---
title: Beperking in de Service Fabric-cluster resourcemanager | Microsoft Docs
description: Informatie over het configureren van de vertragingen die is opgegeven door de Service Fabric Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 1be0beaf2e199a9c384187efd80b33c7dab5e87c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="throttling-the-service-fabric-cluster-resource-manager"></a><span data-ttu-id="faa2d-103">Beperking van de Service Fabric Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="faa2d-103">Throttling the Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="faa2d-104">Zelfs als u de Cluster Resource Manager correct hebt geconfigureerd, kan het cluster ophalen verstoord.</span><span class="sxs-lookup"><span data-stu-id="faa2d-104">Even if you’ve configured the Cluster Resource Manager correctly, the cluster can get disrupted.</span></span> <span data-ttu-id="faa2d-105">Bijvoorbeeld, kan er gelijktijdige knooppunt en fouttolerantie domein fouten - wat er zou gebeuren als die is opgetreden tijdens een upgrade?</span><span class="sxs-lookup"><span data-stu-id="faa2d-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade?</span></span> <span data-ttu-id="faa2d-106">De Cluster Resource Manager probeert altijd om op te lossen alles, de clusterbronnen opnieuw indelen en los van het cluster wilt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="faa2d-106">The Cluster Resource Manager always tries to fix everything, consuming the cluster's resources trying to reorganize and fix the cluster.</span></span> <span data-ttu-id="faa2d-107">Vertragingen zorgt voor een backstop zodat het cluster resources gebruiken kan stabiel - knooppunten terugkeren, de netwerkpartities retoucheren, gecorrigeerde bits geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="faa2d-107">Throttles help provide a backstop so that the cluster can use resources to stabilize - the nodes come back, the network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="faa2d-108">Om te helpen met dit soort situaties, de Service Fabric Cluster Resource Manager bevat verschillende vertragingen.</span><span class="sxs-lookup"><span data-stu-id="faa2d-108">To help with these sorts of situations, the Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="faa2d-109">Deze vertragingen zijn alle behoorlijk groot hamers.</span><span class="sxs-lookup"><span data-stu-id="faa2d-109">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="faa2d-110">Ze mag niet in het algemeen worden gewijzigd zonder een zorgvuldige planning en testen.</span><span class="sxs-lookup"><span data-stu-id="faa2d-110">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="faa2d-111">Als u de Cluster Resource Manager vertragingen wijzigt, moet u ze aan uw verwachte daadwerkelijke laadbewerking afstemmen.</span><span class="sxs-lookup"><span data-stu-id="faa2d-111">If you change the Cluster Resource Manager's throttles, you should tune them to your expected actual load.</span></span> <span data-ttu-id="faa2d-112">U kunt bepalen moet u beschikken over een aantal vertragingen, zelfs als betekent dit dat het cluster duurt langer regulering in sommige situaties.</span><span class="sxs-lookup"><span data-stu-id="faa2d-112">You may determine you need to have some throttles in place, even if it means the cluster takes longer to stabilize in some situations.</span></span> <span data-ttu-id="faa2d-113">Testen is vereist voor het bepalen van de juiste waarden voor vertragingen.</span><span class="sxs-lookup"><span data-stu-id="faa2d-113">Testing is required to determine the correct values for throttles.</span></span> <span data-ttu-id="faa2d-114">Vertragingen moeten hoog genoeg zijn voor het toestaan van het cluster om te reageren op wijzigingen in een redelijk tijdsbestek en laag genoeg is om daadwerkelijk te voorkomen dat te veel resourceverbruik.</span><span class="sxs-lookup"><span data-stu-id="faa2d-114">Throttles need to be high enough to allow the cluster to respond to changes in a reasonable amount of time, and low enough to actually prevent too much resource consumption.</span></span> 

<span data-ttu-id="faa2d-115">De meeste gevallen die we klanten hebt gezien vertragingen die is nu omdat ze al aanwezig in een omgeving met beperkte resource waren gebruiken.</span><span class="sxs-lookup"><span data-stu-id="faa2d-115">Most of the time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="faa2d-116">Voorbeelden zijn beperkte netwerkbandbreedte voor afzonderlijke knooppunten of schijven die niet kunnen worden opgebouwd veel stateful replica's parallel door beperkingen van de doorvoer.</span><span class="sxs-lookup"><span data-stu-id="faa2d-116">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able to build many stateful replicas in parallel due to throughput limitations.</span></span> <span data-ttu-id="faa2d-117">Zonder vertragingen, kunnen operations deze resources, waardoor bewerkingen mislukken of traag worden overbelast.</span><span class="sxs-lookup"><span data-stu-id="faa2d-117">Without throttles, operations could overwhelm these resources, causing operations to fail or be slow.</span></span> <span data-ttu-id="faa2d-118">In deze situaties klanten vertragingen gebruikt en zijn ze uitbreiden van de hoeveelheid tijd op de hoogte zou het duren voordat het cluster een stabiele status bereiken.</span><span class="sxs-lookup"><span data-stu-id="faa2d-118">In these situations customers used throttles and knew they were extending the amount of time it would take the cluster to reach a stable state.</span></span> <span data-ttu-id="faa2d-119">Klanten ook begrepen dat ze kunnen terechtkomen op lagere algehele betrouwbaarheid actief, terwijl ze zijn beperkt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-119">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-the-throttles"></a><span data-ttu-id="faa2d-120">De vertragingen configureren</span><span class="sxs-lookup"><span data-stu-id="faa2d-120">Configuring the throttles</span></span>

<span data-ttu-id="faa2d-121">Service Fabric heeft twee mechanismen voor beperking van het aantal verplaatsingen van de replica.</span><span class="sxs-lookup"><span data-stu-id="faa2d-121">Service Fabric has two mechanisms for throttling the number of replica movements.</span></span> <span data-ttu-id="faa2d-122">Het standaardmechanisme die bestonden voordat de Service Fabric 5.7 vertegenwoordigt beperking als een absoluut aantal verplaatst toegestaan.</span><span class="sxs-lookup"><span data-stu-id="faa2d-122">The default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="faa2d-123">Dit werkt niet voor clusters van elke grootte.</span><span class="sxs-lookup"><span data-stu-id="faa2d-123">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="faa2d-124">Met name voor grote clusters is de standaardwaarde te klein, aanzienlijk vertragen balancing zelfs wanneer deze nodig is, terwijl hiervoor geen effect in kleinere clusters.</span><span class="sxs-lookup"><span data-stu-id="faa2d-124">In particular, for large clusters the default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="faa2d-125">Dit mechanisme voorafgaande is vervangen door beperking percentage is gebaseerd, die betere met dynamische clusters waarin het aantal services en de knooppunten regelmatig wijzigen schaalt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-125">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which the number of services and nodes change regularly.</span></span>

<span data-ttu-id="faa2d-126">De vertragingen zijn gebaseerd op een percentage van het aantal replica's in de clusters.</span><span class="sxs-lookup"><span data-stu-id="faa2d-126">The throttles are based on a percentage of the number of replicas in the clusters.</span></span> <span data-ttu-id="faa2d-127">Op basis van Percetage vertragingen inschakelen uitdrukken van de regel: 'niet verplaatsen meer dan 10% van de replica's in een interval van 10 minuten', bijvoorbeeld.</span><span class="sxs-lookup"><span data-stu-id="faa2d-127">Percetage based throttles enable expressing the rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="faa2d-128">De configuratie-instellingen voor bandbreedtebeperking op basis van een percentage zijn:</span><span class="sxs-lookup"><span data-stu-id="faa2d-128">The configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="faa2d-129">GlobalMovementThrottleThresholdPercentage - verplaatsingen toegestaan in het cluster op elk gewenst moment het maximale aantal uitgedrukt als percentage van totaal aantal replica's in het cluster.</span><span class="sxs-lookup"><span data-stu-id="faa2d-129">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="faa2d-130">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="faa2d-130">0 indicates no limit.</span></span> <span data-ttu-id="faa2d-131">De standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="faa2d-131">The default value is 0.</span></span> <span data-ttu-id="faa2d-132">Als deze instelling en de GlobalMovementThrottleThreshold worden opgegeven, wordt de limiet voor meer conservatief gebruikt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-132">If both this setting and GlobalMovementThrottleThreshold are specified, then the more conservative limit is used.</span></span>
  - <span data-ttu-id="faa2d-133">GlobalMovementThrottleThresholdPercentageForPlacement - maximumaantal verplaatsingen van het type toegestaan tijdens de fase plaatsing uitgedrukt als percentage van totaal aantal replica's in het cluster.</span><span class="sxs-lookup"><span data-stu-id="faa2d-133">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during the placement phase, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="faa2d-134">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="faa2d-134">0 indicates no limit.</span></span> <span data-ttu-id="faa2d-135">De standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="faa2d-135">The default value is 0.</span></span> <span data-ttu-id="faa2d-136">Als deze instelling en de GlobalMovementThrottleThresholdForPlacement worden opgegeven, wordt de limiet voor meer conservatief gebruikt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-136">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then the more conservative limit is used.</span></span>
  - <span data-ttu-id="faa2d-137">GlobalMovementThrottleThresholdPercentageForBalancing - maximumaantal verplaatsingen van het type toegestaan tijdens de fase taakverdeling, uitgedrukt als percentage van totaal aantal replica's in het cluster.</span><span class="sxs-lookup"><span data-stu-id="faa2d-137">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during the balancing phase, expressed as percentage of total number of replicas in the cluster.</span></span> <span data-ttu-id="faa2d-138">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="faa2d-138">0 indicates no limit.</span></span> <span data-ttu-id="faa2d-139">De standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="faa2d-139">The default value is 0.</span></span> <span data-ttu-id="faa2d-140">Als deze instelling en de GlobalMovementThrottleThresholdForBalancing worden opgegeven, wordt de limiet voor meer conservatief gebruikt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-140">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then the more conservative limit is used.</span></span>

<span data-ttu-id="faa2d-141">Wanneer u het versnellingspercentage opgeeft, geeft u 5% als 0,05.</span><span class="sxs-lookup"><span data-stu-id="faa2d-141">When specifying the throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="faa2d-142">Het interval waarop deze vertragingen zijn bepaald is de GlobalMovementThrottleCountingInterval die is opgegeven in seconden.</span><span class="sxs-lookup"><span data-stu-id="faa2d-142">The interval on which these throttles are governed is the GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="faa2d-143">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure:</span><span class="sxs-lookup"><span data-stu-id="faa2d-143">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="faa2d-144">Standaard op basis van aantal vertragingen</span><span class="sxs-lookup"><span data-stu-id="faa2d-144">Default count based throttles</span></span>
<span data-ttu-id="faa2d-145">Deze informatie wordt geboden voor het geval u oudere clusters hebt, of behoud van deze configuraties in clusters die sindsdien zijn bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="faa2d-145">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="faa2d-146">In het algemeen wordt aangeraden dat deze worden vervangen door de bovenstaande vertragingen op basis van een percentage.</span><span class="sxs-lookup"><span data-stu-id="faa2d-146">In general, it is recommended that these are replaced with the percentage-based throttles above.</span></span> <span data-ttu-id="faa2d-147">Aangezien bandbreedtebeperking op basis van het percentage is standaard uitgeschakeld, blijven deze vertragingen de standaard vertragingen voor een cluster totdat deze zijn uitgeschakeld en door de vertragingen op basis van een percentage vervangen.</span><span class="sxs-lookup"><span data-stu-id="faa2d-147">Since percentage-based throttling is disabled by default, these throttles remain the default throttles for a cluster until they are disabled and replaced with the percentage-based throttles.</span></span> 

  - <span data-ttu-id="faa2d-148">GlobalMovementThrottleThreshold – deze instelling bepaalt het totale aantal verplaatsingen van het type in het cluster gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="faa2d-148">GlobalMovementThrottleThreshold – this setting controls the total number of movements in the cluster over some time.</span></span> <span data-ttu-id="faa2d-149">De hoeveelheid tijd is in seconden als de GlobalMovementThrottleCountingInterval opgegeven.</span><span class="sxs-lookup"><span data-stu-id="faa2d-149">The amount of time is specified in seconds as the GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="faa2d-150">De standaardwaarde voor de GlobalMovementThrottleThreshold is 1000 en de standaardwaarde voor de GlobalMovementThrottleCountingInterval 600 is.</span><span class="sxs-lookup"><span data-stu-id="faa2d-150">The default value for the GlobalMovementThrottleThreshold is 1000 and the default value for the GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="faa2d-151">MovementPerPartitionThrottleThreshold – deze instelling bepaalt het totale aantal verplaatsingen van het type voor elke partitie service gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="faa2d-151">MovementPerPartitionThrottleThreshold – this setting controls the total number of movements for any service partition over some time.</span></span> <span data-ttu-id="faa2d-152">De hoeveelheid tijd is in seconden als de MovementPerPartitionThrottleCountingInterval opgegeven.</span><span class="sxs-lookup"><span data-stu-id="faa2d-152">The amount of time is specified in seconds as the MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="faa2d-153">De standaardwaarde voor de MovementPerPartitionThrottleThreshold is 50 en de standaardwaarde voor de MovementPerPartitionThrottleCountingInterval 600 is.</span><span class="sxs-lookup"><span data-stu-id="faa2d-153">The default value for the MovementPerPartitionThrottleThreshold is 50 and the default value for the MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="faa2d-154">De configuratie voor deze vertragingen volgt hetzelfde patroon als bandbreedtebeperking op basis van een percentage.</span><span class="sxs-lookup"><span data-stu-id="faa2d-154">The configuration for these throttles follows the same pattern as the percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="faa2d-155">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="faa2d-155">Next steps</span></span>
- <span data-ttu-id="faa2d-156">Als u wilt weten over hoe de Cluster Resource Manager beheert en een compromis tussen de werklast van het cluster, Raadpleeg het artikel op [load balancing](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="faa2d-156">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="faa2d-157">De Cluster Resource Manager bevat veel opties voor het beschrijven van het cluster.</span><span class="sxs-lookup"><span data-stu-id="faa2d-157">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="faa2d-158">Meer informatie over deze, Bekijk dit artikel op [met een beschrijving van een Service Fabric-cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="faa2d-158">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
