---
title: aaaThrottling in Hallo Service Fabric-cluster resourcemanager | Microsoft Docs
description: Meer informatie over tooconfigure Hallo vertragingen geleverd door Hallo Service Fabric-Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="df460-103">Beperking van Hallo Service Fabric-Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="df460-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="df460-104">Zelfs als u Hallo Cluster Resource Manager correct hebt geconfigureerd, kan Hallo cluster ophalen verstoord.</span><span class="sxs-lookup"><span data-stu-id="df460-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="df460-105">Bijvoorbeeld, kan er gelijktijdige knooppunt en fouttolerantie domein fouten - wat er zou gebeuren als die is opgetreden tijdens een upgrade? Hallo Cluster Resource Manager probeert altijd toofix alles van het cluster Hallo bronnen probeert tooreorganize en fix Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="df460-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="df460-106">Vertragingen zorgt voor een backstop zodat Hallo cluster resources toostabilize kunt-Hallo knooppunten terugkeren, Hallo netwerkpartities retoucheren, gecorrigeerde bits geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="df460-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="df460-107">toohelp met dit soort situaties Hallo Service Fabric-Cluster Resource Manager bevat verschillende vertragingen.</span><span class="sxs-lookup"><span data-stu-id="df460-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="df460-108">Deze vertragingen zijn alle behoorlijk groot hamers.</span><span class="sxs-lookup"><span data-stu-id="df460-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="df460-109">Ze mag niet in het algemeen worden gewijzigd zonder een zorgvuldige planning en testen.</span><span class="sxs-lookup"><span data-stu-id="df460-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="df460-110">Als u Hallo Cluster Resource Manager van vertragingen wijzigt, moet u ze tooyour verwachte daadwerkelijke laadbewerking afstemmen.</span><span class="sxs-lookup"><span data-stu-id="df460-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="df460-111">U bepaald moet u toohave sommige bandbreedte aanwezig is, zelfs als het Hallo-cluster duurt langer toostabilize in sommige gevallen betekent.</span><span class="sxs-lookup"><span data-stu-id="df460-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="df460-112">Testen van is vereiste toodetermine Hallo juiste waarden voor vertragingen.</span><span class="sxs-lookup"><span data-stu-id="df460-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="df460-113">Vertragingen moeten toobe hoog genoeg tooallow Hallo cluster toorespond toochanges binnen redelijke tijd en laag voldoende tooactually te voorkomen dat te veel resourceverbruik.</span><span class="sxs-lookup"><span data-stu-id="df460-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="df460-114">Meestal Hallo die we klanten hebt gezien vertragingen die is nu omdat ze al aanwezig in een omgeving met beperkte resource waren gebruiken.</span><span class="sxs-lookup"><span data-stu-id="df460-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="df460-115">Enkele voorbeelden voor afzonderlijke knooppunten of schijven die niet kunnen toobuild veel stateful replica's in een beperkte netwerkbandbreedte zou worden parallelle vanwege toothroughput beperkingen.</span><span class="sxs-lookup"><span data-stu-id="df460-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="df460-116">Zonder vertragingen, kunnen operations deze resources, waardoor operations toofail overbelast of traag zijn.</span><span class="sxs-lookup"><span data-stu-id="df460-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="df460-117">In deze situaties klanten vertragingen gebruikt en op de hoogte dat zijn ze Hallo hoeveelheid tijd die nodig zou Hallo cluster tooreach geen stabiele status uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="df460-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="df460-118">Klanten ook begrepen dat ze kunnen terechtkomen op lagere algehele betrouwbaarheid actief, terwijl ze zijn beperkt.</span><span class="sxs-lookup"><span data-stu-id="df460-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="df460-119">Configureren Hallo bandbreedte</span><span class="sxs-lookup"><span data-stu-id="df460-119">Configuring hello throttles</span></span>

<span data-ttu-id="df460-120">Service Fabric heeft twee mechanismen voor het aantal verplaatsingen van het type replica Hallo beperking.</span><span class="sxs-lookup"><span data-stu-id="df460-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="df460-121">Hallo-standaardmechanisme die bestonden voordat de Service Fabric 5.7 vertegenwoordigt beperking als een absoluut aantal verplaatst toegestaan.</span><span class="sxs-lookup"><span data-stu-id="df460-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="df460-122">Dit werkt niet voor clusters van elke grootte.</span><span class="sxs-lookup"><span data-stu-id="df460-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="df460-123">Met name voor grote clusters Hallo standaard is waarde te klein, aanzienlijk vertragen balancing zelfs wanneer deze nodig is, terwijl hiervoor geen effect in kleinere clusters.</span><span class="sxs-lookup"><span data-stu-id="df460-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="df460-124">Dit mechanisme voorafgaande is vervangen door beperking percentage is gebaseerd, die beter bij dynamische clusters geschaald in welke Hallo aantal services en knooppunten regelmatig wijzigen.</span><span class="sxs-lookup"><span data-stu-id="df460-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="df460-125">Hallo vertragingen zijn gebaseerd op een percentage van het aantal replica's in clusters Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="df460-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="df460-126">Op basis van Percetage vertragingen uitdrukken Hallo regel inschakelen: 'niet verplaatsen meer dan 10% van de replica's in een interval van 10 minuten', bijvoorbeeld.</span><span class="sxs-lookup"><span data-stu-id="df460-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="df460-127">Hallo-configuratie-instellingen voor bandbreedtebeperking op basis van een percentage zijn:</span><span class="sxs-lookup"><span data-stu-id="df460-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="df460-128">GlobalMovementThrottleThresholdPercentage - verplaatsingen toegestaan in het cluster op elk gewenst moment het maximale aantal uitgedrukt als percentage van totaal aantal replica's in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="df460-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="df460-129">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="df460-129">0 indicates no limit.</span></span> <span data-ttu-id="df460-130">Hallo-standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="df460-130">hello default value is 0.</span></span> <span data-ttu-id="df460-131">Als deze instelling en de GlobalMovementThrottleThreshold worden opgegeven, wordt klikt u vervolgens hello meer conservatief limiet gebruikt.</span><span class="sxs-lookup"><span data-stu-id="df460-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="df460-132">GlobalMovementThrottleThresholdPercentageForPlacement - maximumaantal verplaatsingen van het type toegestaan tijdens Hallo plaatsing fase, uitgedrukt als percentage van totaal aantal replica's in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="df460-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="df460-133">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="df460-133">0 indicates no limit.</span></span> <span data-ttu-id="df460-134">Hallo-standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="df460-134">hello default value is 0.</span></span> <span data-ttu-id="df460-135">Als deze instelling en de GlobalMovementThrottleThresholdForPlacement worden opgegeven, wordt klikt u vervolgens hello meer conservatief limiet gebruikt.</span><span class="sxs-lookup"><span data-stu-id="df460-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="df460-136">GlobalMovementThrottleThresholdPercentageForBalancing - maximumaantal verplaatsingen van het type toegestaan tijdens het Hallo balancing fase, uitgedrukt als percentage van totaal aantal replica's in het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="df460-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="df460-137">0 geeft geen limiet.</span><span class="sxs-lookup"><span data-stu-id="df460-137">0 indicates no limit.</span></span> <span data-ttu-id="df460-138">Hallo-standaardwaarde is 0.</span><span class="sxs-lookup"><span data-stu-id="df460-138">hello default value is 0.</span></span> <span data-ttu-id="df460-139">Als deze instelling en de GlobalMovementThrottleThresholdForBalancing worden opgegeven, wordt klikt u vervolgens hello meer conservatief limiet gebruikt.</span><span class="sxs-lookup"><span data-stu-id="df460-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="df460-140">Wanneer u Hallo versnellingspercentage opgeeft, geeft u 5% als 0,05.</span><span class="sxs-lookup"><span data-stu-id="df460-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="df460-141">Hallo-interval waarop deze vertragingen worden geregeld is Hallo GlobalMovementThrottleCountingInterval die is opgegeven in seconden.</span><span class="sxs-lookup"><span data-stu-id="df460-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="df460-142">gehoste clusters via ClusterConfig.json voor zelfstandige implementaties of Template.json voor Azure:</span><span class="sxs-lookup"><span data-stu-id="df460-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="df460-143">Standaard op basis van aantal vertragingen</span><span class="sxs-lookup"><span data-stu-id="df460-143">Default count based throttles</span></span>
<span data-ttu-id="df460-144">Deze informatie wordt geboden voor het geval u oudere clusters hebt, of behoud van deze configuraties in clusters die sindsdien zijn bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="df460-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="df460-145">In het algemeen wordt aangeraden dat deze worden vervangen door Hallo percentage gebaseerde vertragingen hierboven.</span><span class="sxs-lookup"><span data-stu-id="df460-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="df460-146">Aangezien bandbreedtebeperking op basis van het percentage is standaard uitgeschakeld, blijven deze vertragingen Hallo standaard vertragingen voor een cluster totdat deze zijn uitgeschakeld en door Hallo percentage gebaseerde vertragingen vervangen.</span><span class="sxs-lookup"><span data-stu-id="df460-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="df460-147">GlobalMovementThrottleThreshold – deze instelling bepaalt Hallo kunt u het totale aantal verplaatsingen van het type in Hallo cluster gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="df460-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="df460-148">Hallo hoeveelheid tijd is in seconden als Hallo GlobalMovementThrottleCountingInterval opgegeven.</span><span class="sxs-lookup"><span data-stu-id="df460-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="df460-149">de standaardwaarde Hallo voor Hallo GlobalMovementThrottleThreshold is 1000 en de standaardwaarde Hallo voor Hallo GlobalMovementThrottleCountingInterval 600 is.</span><span class="sxs-lookup"><span data-stu-id="df460-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="df460-150">MovementPerPartitionThrottleThreshold – deze instelling bepaalt Hallo kunt u het totale aantal verplaatsingen van het type voor elke partitie service gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="df460-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="df460-151">Hallo hoeveelheid tijd is in seconden als Hallo MovementPerPartitionThrottleCountingInterval opgegeven.</span><span class="sxs-lookup"><span data-stu-id="df460-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="df460-152">de standaardwaarde Hallo voor Hallo MovementPerPartitionThrottleThreshold is 50 en Hallo standaardwaarde voor Hallo MovementPerPartitionThrottleCountingInterval is 600.</span><span class="sxs-lookup"><span data-stu-id="df460-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="df460-153">Hallo-configuratie voor deze vertragingen volgt Hallo hetzelfde patroon als Hallo bandbreedtebeperking op basis van een percentage.</span><span class="sxs-lookup"><span data-stu-id="df460-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="df460-154">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="df460-154">Next steps</span></span>
- <span data-ttu-id="df460-155">toofind uit over hoe Hallo Cluster Resource Manager beheert en een compromis tussen de werklast van de cluster Hallo, bekijk Hallo artikel op [load balancing](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="df460-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="df460-156">Hallo Cluster Resource Manager heeft veel opties voor het beschrijven van Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="df460-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="df460-157">toofind voor meer informatie over deze Raadpleeg dit artikel op [met een beschrijving van een Service Fabric-cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="df460-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
