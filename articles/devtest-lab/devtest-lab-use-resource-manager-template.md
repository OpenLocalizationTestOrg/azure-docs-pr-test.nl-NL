---
title: Weergeven en gebruiken van een virtuele machine van Azure Resource Manager-sjabloon | Microsoft Docs
description: Informatie over het gebruik van de Azure Resource Manager-sjabloon van een virtuele machine naar een andere virtuele machines maken
services: devtest-lab,virtual-machines,visual-studio-online
documentationcenter: na
author: tomarcher
manager: douge
editor: 
ms.assetid: a759d9ce-655c-4ac6-8834-cb29dd7d30dd
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: tarcher
ms.openlocfilehash: 12cdb61667f77215c894800d5c439235e767a26b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="use-a-virtual-machines-azure-resource-manager-template"></a><span data-ttu-id="06e7b-103">Een virtuele machine van Azure Resource Manager-sjabloon gebruiken</span><span class="sxs-lookup"><span data-stu-id="06e7b-103">Use a virtual machine's Azure Resource Manager template</span></span>

<span data-ttu-id="06e7b-104">Wanneer u een virtuele machine (VM) maakt in DevTest Labs via de [Azure-portal](http://go.microsoft.com/fwlink/p/?LinkID=525040), u kunt de Azure Resource Manager-sjabloon bekijken voordat u de virtuele machine opslaan.</span><span class="sxs-lookup"><span data-stu-id="06e7b-104">When you are creating a virtual machine (VM) in DevTest Labs through the [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040), you can view the Azure Resource Manager template before you save the VM.</span></span> <span data-ttu-id="06e7b-105">De sjabloon kan vervolgens worden gebruikt als basis voor het maken van meer lab virtuele machines met dezelfde instellingen.</span><span class="sxs-lookup"><span data-stu-id="06e7b-105">The template can then be used as a basis to create more lab VMs with the same settings.</span></span>

<span data-ttu-id="06e7b-106">In dit artikel beschrijft de Resource Manager-sjabloon weergeven bij het maken van een virtuele machine en het implementeren van deze later voor het automatiseren van het maken van dezelfde virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="06e7b-106">This article describes how to view the Resource Manager template when creating a VM, and how to deploy it later to automate creation of the same VM.</span></span>

## <a name="multi-vm-vs-single-vm-resource-manager-templates"></a><span data-ttu-id="06e7b-107">Multi-VM versus één VM-resourcemanager-sjablonen</span><span class="sxs-lookup"><span data-stu-id="06e7b-107">Multi-VM vs. single-VM Resource Manager templates</span></span>
<span data-ttu-id="06e7b-108">Er zijn twee manieren virtuele machines maken in DevTest Labs met een Resource Manager-sjabloon: de bron Microsoft.DevTestLab/labs/virtualmachines inrichten of de resource Microsoft.Commpute/virtualmachines inrichten.</span><span class="sxs-lookup"><span data-stu-id="06e7b-108">There are two ways to create VMs in DevTest Labs using a Resource Manager template: provision the Microsoft.DevTestLab/labs/virtualmachines resource or provision the Microsoft.Commpute/virtualmachines resource.</span></span> <span data-ttu-id="06e7b-109">Elke wordt gebruikt in verschillende scenario's en andere machtigingen zijn vereist.</span><span class="sxs-lookup"><span data-stu-id="06e7b-109">Each is used in different scenarios and require different permissions.</span></span>

- <span data-ttu-id="06e7b-110">Resource Manager-sjablonen die gebruikmaken van een resourcetype Microsoft.DevTestLab/labs/virtualmachines (zoals opgegeven in de eigenschap 'resource' in de sjabloon) kunnen afzonderlijke lab virtuele machines inrichten.</span><span class="sxs-lookup"><span data-stu-id="06e7b-110">Resource Manager templates that use a Microsoft.DevTestLab/labs/virtualmachines resource type (as declared in the “resource” property in the template) can provision individual lab VMs.</span></span> <span data-ttu-id="06e7b-111">Elke virtuele machine vervolgens wordt weergegeven als één item in de lijst van de virtuele machines DevTest Labs:</span><span class="sxs-lookup"><span data-stu-id="06e7b-111">Each VM then shows up as a single item in the DevTest Labs virtual machines list:</span></span>

   ![Lijst met virtuele machines als één items in de lijst van de virtuele machines DevTest Labs](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-item.png)

   <span data-ttu-id="06e7b-113">Dit type Resource Manager-sjabloon kan worden ingericht via de Azure PowerShell-opdracht **New-AzureRmResourceGroupDeployment** of via de Azure CLI-opdracht **az implementatie maken**.</span><span class="sxs-lookup"><span data-stu-id="06e7b-113">This type of Resource Manager template can be provisioned through the Azure PowerShell command **New-AzureRmResourceGroupDeployment** or through the Azure CLI command **az group deployment create**.</span></span> <span data-ttu-id="06e7b-114">Het vereist administrator-machtigingen zodat gebruikers die zijn toegewezen aan een gebruikersrol DevTest Labs kunnen de implementatie niet uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="06e7b-114">It requires administrator permissions, so users who are assigned with a DevTest Labs user role can’t perform the deployment.</span></span> 

- <span data-ttu-id="06e7b-115">Resource Manager-sjablonen die gebruikmaken van een resourcetype Microsoft.Compute/virtualmachines kunnen meerdere virtuele machines inrichten als een omgeving met één klik in de lijst van de virtuele machines DevTest Labs:</span><span class="sxs-lookup"><span data-stu-id="06e7b-115">Resource Manager templates that use a Microsoft.Compute/virtualmachines resource type can provision multiple VMs as a single environment in the DevTest Labs virtual machines list:</span></span>

   ![Lijst met virtuele machines als één items in de lijst van de virtuele machines DevTest Labs](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-environment.png)

   <span data-ttu-id="06e7b-117">Virtuele machines in dezelfde omgeving samen kunnen worden beheerd en dezelfde levenscyclus delen.</span><span class="sxs-lookup"><span data-stu-id="06e7b-117">VMs in the same environment can be managed together and share the same lifecycle.</span></span> <span data-ttu-id="06e7b-118">Gebruikers die zijn toegewezen aan een gebruikersrol DevTest Labs kan omgevingen met behulp van deze sjablonen, zolang de beheerder heeft geconfigureerd in het lab op die manier kunnen maken.</span><span class="sxs-lookup"><span data-stu-id="06e7b-118">Users who are assigned with a DevTest Labs user role can create environments using those templates as long as the administrator has configured the lab that way.</span></span>

<span data-ttu-id="06e7b-119">De rest van dit artikel wordt beschreven Resource Manager-sjablonen die Mirosoft.DevTestLab/labs/virtualmachines gebruiken.</span><span class="sxs-lookup"><span data-stu-id="06e7b-119">The remainder of this article discusses Resource Manager templates that use Mirosoft.DevTestLab/labs/virtualmachines.</span></span> <span data-ttu-id="06e7b-120">Deze worden gebruikt door beheerders lab te maken van VM-lab (bijvoorbeeld claimable VM's) of gouden installatiekopie generatie (bijvoorbeeld installatiekopie factory) automatiseren.</span><span class="sxs-lookup"><span data-stu-id="06e7b-120">These are used by lab admins to automate lab VM creation (for example, claimable VMs) or golden image generation (for example, image factory).</span></span>

<span data-ttu-id="06e7b-121">[Aanbevolen procedures voor het maken van Azure Resource Manager-sjablonen](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) biedt veel richtlijnen en suggesties voor het maken van Azure Resource Manager-sjablonen die zijn betrouwbaar en eenvoudig te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="06e7b-121">[Best practices for creating Azure Resource Manager templates](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) offers many guidelines and suggestions to help you create Azure Resource Manager templates that are reliable and easy to use.</span></span>

## <a name="view-and-save-a-virtual-machines-resource-manager-template"></a><span data-ttu-id="06e7b-122">Weergeven en opslaan van een virtuele machine Resource Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="06e7b-122">View and save a virtual machine's Resource Manager template</span></span>
1. <span data-ttu-id="06e7b-123">Volg de stappen in [maakt van uw eerste virtuele machine in een lab](devtest-lab-create-first-vm.md) om te beginnen met het maken van een virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="06e7b-123">Follow the steps at [Create your first VM in a lab](devtest-lab-create-first-vm.md) to begin creating a virtual machine.</span></span>
1. <span data-ttu-id="06e7b-124">Voer de vereiste informatie voor uw virtuele machine en alle artefacten die u voor deze virtuele machine wilt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="06e7b-124">Enter the required information for your virtual machine and add any artifacts you want for this VM.</span></span>
1. <span data-ttu-id="06e7b-125">Aan de onderkant van het venster van de instellingen configureren, kiest u **weergave ARM-sjabloon**.</span><span class="sxs-lookup"><span data-stu-id="06e7b-125">At the bottom of the Configure settings window, choose **View ARM template**.</span></span>

   ![Knop voor ARM-sjabloon weergeven](./media/devtest-lab-use-arm-template/devtestlab-lab-view-rm-template.png)
1. <span data-ttu-id="06e7b-127">Kopiëren en opslaan van de Resource Manager-sjabloon voor later gebruik maken van een andere virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="06e7b-127">Copy and save the Resource Manager template to use later to create another virtual machine.</span></span>

   ![Resource manager-sjabloon op te slaan voor later gebruik](./media/devtest-lab-use-arm-template/devtestlab-lab-copy-rm-template.png)

<span data-ttu-id="06e7b-129">Nadat u de Resource Manager-sjabloon hebt opgeslagen, moet u het gedeelte parameters van de sjabloon bijwerken voordat u deze kunt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="06e7b-129">After you have saved the Resource Manager template, you must update the parameters section of the template before you can use it.</span></span> <span data-ttu-id="06e7b-130">U kunt een parameter.json dat alleen de parameters buiten de werkelijke Resource Manager-sjabloon aanpast maken.</span><span class="sxs-lookup"><span data-stu-id="06e7b-130">You can create a parameter.json that customizes just the parameters, outside of the actual Resource Manager template.</span></span> 

![Een JSON-bestand met parameters aanpassen](./media/devtest-lab-use-arm-template/devtestlab-lab-custom-params.png)

## <a name="deploy-a-resource-manager-template-to-create-a-vm"></a><span data-ttu-id="06e7b-132">Een Resource Manager-sjabloon voor het maken van een virtuele machine implementeren</span><span class="sxs-lookup"><span data-stu-id="06e7b-132">Deploy a Resource Manager template to create a VM</span></span>
<span data-ttu-id="06e7b-133">Nadat u hebt opgeslagen van Resource Manager-sjabloon en het is afgestemd op uw behoeften, kunt u het maken van VM automatiseren.</span><span class="sxs-lookup"><span data-stu-id="06e7b-133">After you have saved a Resource Manager template and customized it for your needs, you can use it to automate VM creation.</span></span> <span data-ttu-id="06e7b-134">[Implementeren van resources met Resource Manager-sjablonen en Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) wordt beschreven hoe u Azure PowerShell gebruiken met Resource Manager-sjablonen voor het implementeren van uw resources in Azure.</span><span class="sxs-lookup"><span data-stu-id="06e7b-134">[Deploy resources with Resource Manager templates and Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) describes how to use Azure PowerShell with Resource Manager templates to deploy your resources to Azure.</span></span> <span data-ttu-id="06e7b-135">[Implementeren van resources met Resource Manager-sjablonen en Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) wordt beschreven hoe u Azure CLI gebruiken met Resource Manager-sjablonen voor het implementeren van uw resources in Azure.</span><span class="sxs-lookup"><span data-stu-id="06e7b-135">[Deploy resources with Resource Manager templates and Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) describes how to use Azure CLI with Resource Manager templates to deploy your resources to Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="06e7b-136">Alleen een gebruiker met machtigingen van de eigenaar lab kunt virtuele machines maken van een Resource Manager-sjabloon met behulp van Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="06e7b-136">Only a user with lab owner permissions can create VMs from a Resource Manager template by using Azure PowerShell.</span></span> <span data-ttu-id="06e7b-137">Als u wilt automatiseren met behulp van een Resource Manager-sjabloon maken van VM en u alleen gebruikersmachtigingen hebt, kunt u de [ **az lab vm maken** opdracht in de CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span><span class="sxs-lookup"><span data-stu-id="06e7b-137">If you want to automate VM creation using a Resource Manager template and you only have user permissions, you can use the [**az lab vm create** command in the CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span></span>

### <a name="next-steps"></a><span data-ttu-id="06e7b-138">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="06e7b-138">Next steps</span></span>
* <span data-ttu-id="06e7b-139">Meer informatie over hoe [multi-VM-omgevingen maken met Resource Manager-sjablonen](devtest-lab-create-environment-from-arm.md).</span><span class="sxs-lookup"><span data-stu-id="06e7b-139">Learn how to [Create multi-VM environments with Resource Manager templates](devtest-lab-create-environment-from-arm.md).</span></span>
* <span data-ttu-id="06e7b-140">Ontdek meer snel starten-Resource Manager-sjablonen voor het automatiseren van DevTest Labs vanuit de [openbare DevTest Labs GitHub-repo-](https://github.com/Azure/azure-quickstart-templates).</span><span class="sxs-lookup"><span data-stu-id="06e7b-140">Explore more quick-start Resource Manager templates for DevTest Labs automation from the [public DevTest Labs GitHub repo](https://github.com/Azure/azure-quickstart-templates).</span></span>
