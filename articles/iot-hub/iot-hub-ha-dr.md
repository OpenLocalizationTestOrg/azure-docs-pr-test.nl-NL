---
title: Azure IoT Hub hoge beschikbaarheid en herstel na noodgevallen | Microsoft Docs
description: Beschrijft de functies voor Azure en IoT-Hub die u helpen bij het bouwen van maximaal beschikbare Azure IoT-oplossingen met na noodgevallen herstelfuncties.
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 76c3187549e1821908263c30e394db26ee6f75e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="1b613-103">IoT Hub hoge beschikbaarheid en herstel na noodgevallen</span><span class="sxs-lookup"><span data-stu-id="1b613-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="1b613-104">Een Azure-service biedt IoT Hub redundantie op het niveau van de Azure-regio, zonder extra werk vereist voor de oplossing met hoge beschikbaarheid (HA).</span><span class="sxs-lookup"><span data-stu-id="1b613-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at the Azure region level, without any additional work required by the solution.</span></span> <span data-ttu-id="1b613-105">Het Microsoft Azure-platform omvat ook functies waarmee u oplossingen bouwen met herstelfuncties van noodherstel (DR) of de regio-overschrijdende beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="1b613-105">The Microsoft Azure platform also includes features to help you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="1b613-106">Als u globaal en regio-overschrijdende hoge beschikbaarheid bieden voor apparaten of gebruikers wilt, ontwerpen en voorbereiden van uw oplossingen om te profiteren van deze Azure DR-functies.</span><span class="sxs-lookup"><span data-stu-id="1b613-106">If you want to provide global, cross-region high availability for devices or users, design and prepare your solutions to take advantage of these Azure DR features.</span></span> <span data-ttu-id="1b613-107">Het artikel [Azure zakelijke continuïteit technische richtlijnen](../resiliency/resiliency-technical-guidance.md) beschrijving van de ingebouwde functies in Azure voor bedrijfscontinuïteit en Noodherstel.</span><span class="sxs-lookup"><span data-stu-id="1b613-107">The article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes the built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="1b613-108">De [herstel na noodgevallen en hoge beschikbaarheid voor Azure-toepassingen] [ Disaster recovery and high availability for Azure applications] papier biedt architectuurrichtlijnen op strategieën voor het Azure-toepassingen om HA en Noodherstel te bereiken.</span><span class="sxs-lookup"><span data-stu-id="1b613-108">The [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications to achieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="1b613-109">Azure IoT-Hub DR</span><span class="sxs-lookup"><span data-stu-id="1b613-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="1b613-110">IoT Hub implementeert naast intra-regio HA, failover-mechanismen voor herstel na noodgevallen waarvoor geen tussenkomst van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="1b613-110">In addition to intra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from the user.</span></span> <span data-ttu-id="1b613-111">IoT Hub DR automatisch wordt gestart en heeft een beoogde hersteltijd (RTO) van 2-26 uur en de volgende herstelpuntdoelen (RPO's).</span><span class="sxs-lookup"><span data-stu-id="1b613-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and the following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="1b613-112">Functionaliteit</span><span class="sxs-lookup"><span data-stu-id="1b613-112">Functionality</span></span> | <span data-ttu-id="1b613-113">RPO</span><span class="sxs-lookup"><span data-stu-id="1b613-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="1b613-114">Beschikbaarheid van de service voor register- en bewerkingen</span><span class="sxs-lookup"><span data-stu-id="1b613-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="1b613-115">Mogelijk CName verlies</span><span class="sxs-lookup"><span data-stu-id="1b613-115">Possible CName loss</span></span> |
| <span data-ttu-id="1b613-116">Identiteitsgegevens in register-id 's</span><span class="sxs-lookup"><span data-stu-id="1b613-116">Identity data in identity registry</span></span> |<span data-ttu-id="1b613-117">0-5 minuten gegevensverlies</span><span class="sxs-lookup"><span data-stu-id="1b613-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="1b613-118">Apparaat-naar-cloud-berichten</span><span class="sxs-lookup"><span data-stu-id="1b613-118">Device-to-cloud messages</span></span> |<span data-ttu-id="1b613-119">Alle ongelezen berichten gaan verloren</span><span class="sxs-lookup"><span data-stu-id="1b613-119">All unread messages are lost</span></span> |
| <span data-ttu-id="1b613-120">Bewerkingen berichten controleren</span><span class="sxs-lookup"><span data-stu-id="1b613-120">Operations monitoring messages</span></span> |<span data-ttu-id="1b613-121">Alle ongelezen berichten gaan verloren</span><span class="sxs-lookup"><span data-stu-id="1b613-121">All unread messages are lost</span></span> |
| <span data-ttu-id="1b613-122">Cloud-naar-apparaat-berichten</span><span class="sxs-lookup"><span data-stu-id="1b613-122">Cloud-to-device messages</span></span> |<span data-ttu-id="1b613-123">0-5 minuten gegevensverlies</span><span class="sxs-lookup"><span data-stu-id="1b613-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="1b613-124">Cloud-naar-apparaat feedbackwachtrij</span><span class="sxs-lookup"><span data-stu-id="1b613-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="1b613-125">Alle ongelezen berichten gaan verloren</span><span class="sxs-lookup"><span data-stu-id="1b613-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="1b613-126">Regionale failover met IoT Hub</span><span class="sxs-lookup"><span data-stu-id="1b613-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="1b613-127">Een volledige behandeling van implementatietopologieën in IoT-oplossingen is buiten het bereik van dit artikel.</span><span class="sxs-lookup"><span data-stu-id="1b613-127">A complete treatment of deployment topologies in IoT solutions is outside the scope of this article.</span></span> <span data-ttu-id="1b613-128">Het artikel behandelt de *regionale failover* implementatiemodel omwille van de hoge beschikbaarheid en herstel na noodgevallen.</span><span class="sxs-lookup"><span data-stu-id="1b613-128">The article discusses the *regional failover* deployment model for the purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="1b613-129">In een model regionale failover worden de oplossing voor back-end uitvoert voornamelijk in een datacenter-locatie en een secundaire IoT hub en back-end geïmplementeerd in een andere locatie van het datacenter.</span><span class="sxs-lookup"><span data-stu-id="1b613-129">In a regional failover model, the solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="1b613-130">Als de IoT-hub in het primaire datacenter te lijden heeft onder een storing of de netwerkverbinding van het apparaat met het primaire datacenter wordt onderbroken.</span><span class="sxs-lookup"><span data-stu-id="1b613-130">If the IoT hub in the primary datacenter suffers an outage or the network connectivity from the device to the primary datacenter is interrupted.</span></span> <span data-ttu-id="1b613-131">Apparaten gebruiken een secundaire service-eindpunt wanneer de primaire gateway niet bereikbaar.</span><span class="sxs-lookup"><span data-stu-id="1b613-131">Devices use a secondary service endpoint whenever the primary gateway cannot be reached.</span></span> <span data-ttu-id="1b613-132">Met een regio-overschrijdende failover-functie, kan de beschikbaarheid van de oplossing dan de maximale beschikbaarheid van één regio worden verbeterd.</span><span class="sxs-lookup"><span data-stu-id="1b613-132">With a cross-region failover capability, the solution availability can be improved beyond the high availability of a single region.</span></span>

<span data-ttu-id="1b613-133">Op een hoog niveau voor het implementeren van een model regionale failover met IoT Hub, moet u het volgende:</span><span class="sxs-lookup"><span data-stu-id="1b613-133">At a high level, to implement a regional failover model with IoT Hub, you need the following:</span></span>

* <span data-ttu-id="1b613-134">**Een secundaire iothub en routering logica apparaat**: in het geval van een onderbreking van de service in uw primaire regio apparaten moeten beginnen met het verbinding maken met uw secundaire regio.</span><span class="sxs-lookup"><span data-stu-id="1b613-134">**A secondary IoT hub and device routing logic**: In the case of a service disruption in your primary region, devices must start connecting to your secondary region.</span></span> <span data-ttu-id="1b613-135">Gezien de statusbewust aard van de meeste services die zijn betrokken, is het gebruikelijk dat beheerders van de oplossing voor het activeren van het failoverproces tussen regio.</span><span class="sxs-lookup"><span data-stu-id="1b613-135">Given the state-aware nature of most services involved, it is common for solution administrators to trigger the inter-region failover process.</span></span> <span data-ttu-id="1b613-136">De beste manier om het nieuwe eindpunt naar apparaten, terwijl controle van het proces wordt behouden communiceren is dat ze regelmatig controleren op een *concierge* service voor het huidige actieve eindpunt.</span><span class="sxs-lookup"><span data-stu-id="1b613-136">The best way to communicate the new endpoint to devices, while maintaining control of the process, is to have them regularly check a *concierge* service for the current active endpoint.</span></span> <span data-ttu-id="1b613-137">De service concierge kan een webtoepassing die is gerepliceerd en bereikbaar bewaard zijn met behulp van DNS-omleiding technieken (bijvoorbeeld [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="1b613-137">The concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="1b613-138">**Identiteit register repliceren** : om te worden gebruikt, de secundaire IoT-hub alle apparaat-id's die verbinding met de oplossing maken kunnen moet bevatten.</span><span class="sxs-lookup"><span data-stu-id="1b613-138">**Identity registry replication** - To be usable, the secondary IoT hub must contain all device identities that can connect to the solution.</span></span> <span data-ttu-id="1b613-139">De oplossing moet back-ups geogerepliceerde van apparaat-id's houden en te uploaden naar de secundaire IoT-hub voordat u overschakelt van de actieve eindpunt voor de apparaten.</span><span class="sxs-lookup"><span data-stu-id="1b613-139">The solution should keep geo-replicated backups of device identities, and upload them to the secondary IoT hub before switching the active endpoint for the devices.</span></span> <span data-ttu-id="1b613-140">De apparaat-id exportfunctie van IoT Hub is handig in deze context.</span><span class="sxs-lookup"><span data-stu-id="1b613-140">The device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="1b613-141">Zie voor meer informatie [IoT Hub developer guide - id-register][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="1b613-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="1b613-142">**Samenvoegen van logica** : wanneer de primaire regio weer beschikbaar is, alle de status en gegevens die zijn gemaakt in de secundaire site moeten worden gemigreerd terug naar de primaire regio.</span><span class="sxs-lookup"><span data-stu-id="1b613-142">**Merging logic** - When the primary region becomes available again, all the state and data that have been created in the secondary site must be migrated back to the primary region.</span></span> <span data-ttu-id="1b613-143">Deze status en gegevens, vooral heeft betrekking op apparaat-id's en metagegevens van toepassing moet worden samengevoegd met de primaire IoT-hub en andere toepassingsspecifieke winkels in de primaire regio.</span><span class="sxs-lookup"><span data-stu-id="1b613-143">This state and data mostly relates to device identities and application metadata, which must be merged with the primary IoT hub and any other application-specific stores in the primary region.</span></span> <span data-ttu-id="1b613-144">Om te vereenvoudigen in deze stap, moet u de idempotent-bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="1b613-144">To simplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="1b613-145">De Idempotent operations minimaliseert de neveneffecten van de uiteindelijke consistente distributie van gebeurtenissen en van duplicaten of out-van-levering van gebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="1b613-145">Idempotent operations minimize the side-effects from the eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="1b613-146">Bovendien moet de toepassingslogica worden ontworpen voor mogelijke inconsistenties of 'enigszins' uit datum status tolereren.</span><span class="sxs-lookup"><span data-stu-id="1b613-146">In addition, the application logic should be designed to tolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="1b613-147">Deze situatie kan optreden vanwege de extra tijd die nodig is voor het systeem 'retoucheren' op basis van herstelpuntdoelen (RPO).</span><span class="sxs-lookup"><span data-stu-id="1b613-147">This situation can occur due to the additional time it takes for the system to "heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1b613-148">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="1b613-148">Next steps</span></span>
<span data-ttu-id="1b613-149">Volg deze koppelingen voor meer informatie over Azure IoT Hub:</span><span class="sxs-lookup"><span data-stu-id="1b613-149">Follow these links to learn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="1b613-150">[Aan de slag met IoT Hubs (zelfstudie)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="1b613-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="1b613-151">[Wat is Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="1b613-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
