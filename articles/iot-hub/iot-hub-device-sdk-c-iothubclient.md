---
title: aaaAzure IoT-apparaat SDK voor C - IoTHubClient | Microsoft Docs
description: Hoe toouse hello IoTHubClient bibliotheek op Hallo van het apparaat van Azure IoT SDK voor C toocreate apparaat-apps die communiceren met een IoT-hub.
services: iot-hub
documentationcenter: 
author: olivierbloch
manager: timlt
editor: 
ms.assetid: 828cf2bf-999d-4b8a-8a28-c7c901629600
ms.service: iot-hub
ms.devlang: cpp
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 09/06/2016
ms.author: obloch
ms.openlocfilehash: d1ece79e9ba6d1e5fd45cabb8fca393b24052e07
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-iot-device-sdk-for-c--more-about-iothubclient"></a><span data-ttu-id="a2a9c-103">Azure IoT-apparaat SDK voor C: meer informatie over IoTHubClient</span><span class="sxs-lookup"><span data-stu-id="a2a9c-103">Azure IoT device SDK for C – more about IoTHubClient</span></span>
<span data-ttu-id="a2a9c-104">Hallo [eerst artikel](iot-hub-device-sdk-c-intro.md) in deze reeks geïntroduceerd Hallo **Azure IoT-device SDK voor C**. Dit artikel worden beschreven dat er twee architectuur lagen SDK zijn.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-104">hello [first article](iot-hub-device-sdk-c-intro.md) in this series introduced hello **Azure IoT device SDK for C**. That article explained that there are two architectural layers in SDK.</span></span> <span data-ttu-id="a2a9c-105">Hallo base is Hallo **IoTHubClient** bibliotheek die rechtstreeks communicatie met IoT Hub beheert.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-105">At hello base is hello **IoTHubClient** library which directly manages communication with IoT Hub.</span></span> <span data-ttu-id="a2a9c-106">Er is ook Hallo **serialisatiefunctie** bibliotheek die op deze tooprovide serialisatie-services voortbouwt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-106">There's also hello **serializer** library that builds on top of that tooprovide serialization services.</span></span> <span data-ttu-id="a2a9c-107">In dit artikel bieden we extra details op Hallo **IoTHubClient** bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-107">In this article we'll provide additional detail on hello **IoTHubClient** library.</span></span>

<span data-ttu-id="a2a9c-108">Hallo vorige artikel wordt beschreven hoe toouse hello **IoTHubClient** bibliotheek toosend gebeurtenissen tooIoT Hub en ontvangen van berichten.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-108">hello previous article described how toouse hello **IoTHubClient** library toosend events tooIoT Hub and receive messages.</span></span> <span data-ttu-id="a2a9c-109">In dit artikel wordt uitgebreid die discussie waarin wordt uitgelegd hoe toomore nauwkeurig beheren *wanneer* verzenden en ontvangen van gegevens, introductie van toohello **lager niveau API's**.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-109">This article extends that discussion by explaining how toomore precisely manage *when* you send and receive data, introducing you toohello **lower-level APIs**.</span></span> <span data-ttu-id="a2a9c-110">Ook wordt uitgelegd hoe tooattach eigenschappen tooevents (en berichten ophalen) met Hallo eigenschap afhandeling van functies in Hallo **IoTHubClient** bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-110">We'll also explain how tooattach properties tooevents (and retrieve them from messages) using hello property handling features in hello **IoTHubClient** library.</span></span> <span data-ttu-id="a2a9c-111">Ten slotte, bieden we extra uitleg van de verschillende manieren toohandle berichten uit IoT Hub is ontvangen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-111">Finally, we'll provide additional explanation of different ways toohandle messages received from IoT Hub.</span></span>

<span data-ttu-id="a2a9c-112">Hallo artikel tot slot die betrekking hebben op een aantal verschillende onderwerpen, waaronder informatie over referenties voor apparaat en hoe toochange gedrag van Hallo Hallo **IoTHubClient** via configuratieopties.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-112">hello article concludes by covering a couple of miscellaneous topics, including more about device credentials and how toochange hello behavior of hello **IoTHubClient** through configuration options.</span></span>

<span data-ttu-id="a2a9c-113">We gebruiken Hallo **IoTHubClient** SDK tooexplain voorbeelden in deze onderwerpen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-113">We'll use hello **IoTHubClient** SDK samples tooexplain these topics.</span></span> <span data-ttu-id="a2a9c-114">Als u toofollow langs wilt, raadpleegt u Hallo **iothub\_client\_voorbeeld\_http** en **iothub\_client\_voorbeeld\_amqp** toepassingen die zijn opgenomen in hello Azure IoT-device SDK voor C. alles dat wordt beschreven in Hallo uit te voeren in deze voorbeelden wordt gedemonstreerd.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-114">If you want toofollow along, see hello **iothub\_client\_sample\_http** and **iothub\_client\_sample\_amqp** applications that are included in hello Azure IoT device SDK for C. Everything described in hello following sections is demonstrated in these samples.</span></span>

<span data-ttu-id="a2a9c-115">U vindt Hallo [ **Azure IoT-device SDK voor C** ](https://github.com/Azure/azure-iot-sdk-c) GitHub-opslagplaats en de weergave details van Hallo API in Hallo [C-API-referentiemateriaal](https://azure.github.io/azure-iot-sdk-c/index.html).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-115">You can find hello [**Azure IoT device SDK for C**](https://github.com/Azure/azure-iot-sdk-c) GitHub repository and view details of hello API in hello [C API reference](https://azure.github.io/azure-iot-sdk-c/index.html).</span></span>

## <a name="hello-lower-level-apis"></a><span data-ttu-id="a2a9c-116">Hallo lager niveau API's</span><span class="sxs-lookup"><span data-stu-id="a2a9c-116">hello lower-level APIs</span></span>
<span data-ttu-id="a2a9c-117">Hallo vorige artikel beschreven Hallo de werking van Hallo **IotHubClient** binnen de context Hallo Hallo **iothub\_client\_voorbeeld\_amqp** de toepassing.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-117">hello previous article described hello basic operation of hello **IotHubClient** within hello context of hello **iothub\_client\_sample\_amqp** application.</span></span> <span data-ttu-id="a2a9c-118">Bijvoorbeeld, het uitgelegd hoe tooinitialize Hallo tapewisselaar met deze code.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-118">For example, it explained how tooinitialize hello library using this code.</span></span>

```
IOTHUB_CLIENT_HANDLE iotHubClientHandle;
iotHubClientHandle = IoTHubClient_CreateFromConnectionString(connectionString, AMQP_Protocol);
```

<span data-ttu-id="a2a9c-119">Ook wordt beschreven hoe toosend gebeurtenissen gebruik van deze aanroep van functie.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-119">It also described how toosend events using this function call.</span></span>

```
IoTHubClient_SendEventAsync(iotHubClientHandle, message.messageHandle, SendConfirmationCallback, &message);
```

<span data-ttu-id="a2a9c-120">Hallo artikel wordt ook beschreven hoe tooreceive berichten via het registreren van een callback-functie.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-120">hello article also described how tooreceive messages by registering a callback function.</span></span>

```
int receiveContext = 0;
IoTHubClient_SetMessageCallback(iotHubClientHandle, ReceiveMessageCallback, &receiveContext);
```

<span data-ttu-id="a2a9c-121">hebt u Hallo artikel ook geleerd hoe toofree resources met behulp van zoals Hallo volgende code.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-121">hello article also showed how toofree resources using code such as hello following.</span></span>

```
IoTHubClient_Destroy(iotHubClientHandle);
```

<span data-ttu-id="a2a9c-122">Er zijn echter aanvullende functies tooeach van deze API's:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-122">However there are companion functions tooeach of these APIs:</span></span>

* <span data-ttu-id="a2a9c-123">IoTHubClient\_LLE\_CreateFromConnectionString</span><span class="sxs-lookup"><span data-stu-id="a2a9c-123">IoTHubClient\_LL\_CreateFromConnectionString</span></span>
* <span data-ttu-id="a2a9c-124">IoTHubClient\_LLE\_SendEventAsync</span><span class="sxs-lookup"><span data-stu-id="a2a9c-124">IoTHubClient\_LL\_SendEventAsync</span></span>
* <span data-ttu-id="a2a9c-125">IoTHubClient\_LLE\_SetMessageCallback</span><span class="sxs-lookup"><span data-stu-id="a2a9c-125">IoTHubClient\_LL\_SetMessageCallback</span></span>
* <span data-ttu-id="a2a9c-126">IoTHubClient\_LLE\_vernietigen</span><span class="sxs-lookup"><span data-stu-id="a2a9c-126">IoTHubClient\_LL\_Destroy</span></span>

<span data-ttu-id="a2a9c-127">Deze functies alle opnemen 'LLE' in hello API-naam.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-127">These functions all include “LL” in hello API name.</span></span> <span data-ttu-id="a2a9c-128">Hallo-parameters van elk van deze functies zijn dan die identiek tootheir niet LLE collega's.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-128">Other than that, hello parameters of each of these functions are identical tootheir non-LL counterparts.</span></span> <span data-ttu-id="a2a9c-129">Hallo-gedrag van deze functies verschilt echter op één belangrijk.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-129">However, hello behavior of these functions is different in one important way.</span></span>

<span data-ttu-id="a2a9c-130">Als u aanroept **IoTHubClient\_CreateFromConnectionString**, nieuwe thread die wordt uitgevoerd op de achtergrond Hallo Hallo onderliggende bibliotheken maken.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-130">When you call **IoTHubClient\_CreateFromConnectionString**, hello underlying libraries create a new thread that runs in hello background.</span></span> <span data-ttu-id="a2a9c-131">Deze thread gebeurtenissen verzendt en ontvangt berichten uit IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-131">This thread sends events to, and receives messages from, IoT Hub.</span></span> <span data-ttu-id="a2a9c-132">Er is geen dergelijke thread wordt gemaakt bij het werken met Hallo 'LLE' API's.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-132">No such thread is created when working with hello "LL" APIs.</span></span> <span data-ttu-id="a2a9c-133">Hallo maken van de achtergrondthread Hallo is een gemak toohello ontwikkelaar.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-133">hello creation of hello background thread is a convenience toohello developer.</span></span> <span data-ttu-id="a2a9c-134">U hebt geen tooworry over expliciet gebeurtenissen verzenden en ontvangen van berichten uit IoT Hub--gebeurt automatisch op Hallo achtergrond.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-134">You don’t have tooworry about explicitly sending events and receiving messages from IoT Hub -- it happens automatically in hello background.</span></span> <span data-ttu-id="a2a9c-135">Daarentegen Hallo 'LLE' API's bieden u een expliciete controle over de communicatie met IoT Hub, als u deze nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-135">In contrast, hello "LL" APIs give you explicit control over communication with IoT Hub, if you need it.</span></span>

<span data-ttu-id="a2a9c-136">toounderstand deze beter we bekijken een voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-136">toounderstand this better, let’s look at an example:</span></span>

<span data-ttu-id="a2a9c-137">Als u aanroept **IoTHubClient\_SendEventAsync**, wat u daadwerkelijk doet Hallo gebeurtenis is als in een buffer.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-137">When you call **IoTHubClient\_SendEventAsync**, what you're actually doing is putting hello event in a buffer.</span></span> <span data-ttu-id="a2a9c-138">Hallo achtergrondthread gemaakt bij het aanroepen van **IoTHubClient\_CreateFromConnectionString** voortdurend deze buffer bewaakt en worden alle gegevens verzonden dat deze tooIoT Hub bevat.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-138">hello background thread created when you call **IoTHubClient\_CreateFromConnectionString** continually monitors this buffer and sends any data that it contains tooIoT Hub.</span></span> <span data-ttu-id="a2a9c-139">Dit gebeurt op de achtergrond op Hallo Hallo dezelfde tijd die Hallo hoofdthread is bezig met andere taken.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-139">This happens in hello background at hello same time that hello main thread is performing other work.</span></span>

<span data-ttu-id="a2a9c-140">Op dezelfde manier als het registreren van een callback-functie voor berichten met **IoTHubClient\_SetMessageCallback**, bent u Hallo SDK toohave Hallo achtergrond instructie thread Hallo callback-functie aanroepen wanneer een bericht ontvangen, onafhankelijk van Hallo hoofdthread.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-140">Similarly, when you register a callback function for messages using **IoTHubClient\_SetMessageCallback**, you're instructing hello SDK toohave hello background thread invoke hello callback function when a message is received, independent of hello main thread.</span></span>

<span data-ttu-id="a2a9c-141">Hallo 'LLE' API's niet een achtergrond-thread niet maken.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-141">hello "LL" APIs don’t create a background thread.</span></span> <span data-ttu-id="a2a9c-142">In plaats daarvan een nieuwe API moet worden aangeroepen tooexplicitly verzenden en ontvangen van gegevens uit IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-142">Instead, a new API must be called tooexplicitly send and receive data from IoT Hub.</span></span> <span data-ttu-id="a2a9c-143">Dit wordt geïllustreerd in Hallo voorbeeld te volgen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-143">This is demonstrated in hello following example.</span></span>

<span data-ttu-id="a2a9c-144">Hallo **iothub\_client\_voorbeeld\_http** toepassing die opgenomen in de SDK demonstreert Hallo Hallo lager niveau API's.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-144">hello **iothub\_client\_sample\_http** application that’s included in hello SDK demonstrates hello lower-level APIs.</span></span> <span data-ttu-id="a2a9c-145">In dit voorbeeld sturen we gebeurtenissen tooIoT Hub met code zoals Hallo volgende:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-145">In that sample, we send events tooIoT Hub with code such as hello following:</span></span>

```
EVENT_INSTANCE message;
sprintf_s(msgText, sizeof(msgText), "Message_%d_From_IoTHubClient_LL_Over_HTTP", i);
message.messageHandle = IoTHubMessage_CreateFromByteArray((const unsigned char*)msgText, strlen(msgText));

IoTHubClient_LL_SendEventAsync(iotHubClientHandle, message.messageHandle, SendConfirmationCallback, &message)
```

<span data-ttu-id="a2a9c-146">Hallo eerste drie regels maken het Hallo-bericht en de laatste regel Hallo verzendt Hallo-gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-146">hello first three lines create hello message, and hello last line sends hello event.</span></span> <span data-ttu-id="a2a9c-147">Echter, zoals eerder vermeld, 'verzenden' hello gebeurtenis betekent dat gegevens Hallo gewoon wordt geplaatst in een buffer.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-147">However, as mentioned previously, "sending" hello event means that hello data is simply placed in a buffer.</span></span> <span data-ttu-id="a2a9c-148">Niets op Hallo netwerk wordt verzonden wanneer we noemen **IoTHubClient\_LLE\_SendEventAsync**.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-148">Nothing is transmitted on hello network when we call **IoTHubClient\_LL\_SendEventAsync**.</span></span> <span data-ttu-id="a2a9c-149">U moet aanroepen in volgorde tooactually inkomende hello gegevens tooIoT Hub **IoTHubClient\_LLE\_DoWork**, zoals in dit voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-149">In order tooactually ingress hello data tooIoT Hub, you must call **IoTHubClient\_LL\_DoWork**, as in this example:</span></span>

```
while (1)
{
    IoTHubClient_LL_DoWork(iotHubClientHandle);
    ThreadAPI_Sleep(1000);
}
```

<span data-ttu-id="a2a9c-150">Deze code (van Hallo **iothub\_client\_voorbeeld\_http** toepassing) herhaaldelijk roept **IoTHubClient\_LLE\_DoWork** .</span><span class="sxs-lookup"><span data-stu-id="a2a9c-150">This code (from hello **iothub\_client\_sample\_http** application) repeatedly calls **IoTHubClient\_LL\_DoWork**.</span></span> <span data-ttu-id="a2a9c-151">Elke keer **IoTHubClient\_LLE\_DoWork** is aangeroepen, het sommige gebeurtenissen van Hallo buffer tooIoT Hub verzendt en het ophalen van een bericht in de wachtrij toohello apparaat worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-151">Each time **IoTHubClient\_LL\_DoWork** is called, it sends some events from hello buffer tooIoT Hub and it retrieves a queued message being sent toohello device.</span></span> <span data-ttu-id="a2a9c-152">het laatste geval Hallo betekent dat als we een callback-functie voor berichten, geregistreerd en vervolgens het Hallo-callback is aangeroepen (ervan uitgaande dat alle berichten worden in de wachtrij geplaatst).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-152">hello latter case means that if we registered a callback function for messages, then hello callback is invoked (assuming any messages are queued up).</span></span> <span data-ttu-id="a2a9c-153">Hebben zou we een callbackfunctie met code zoals Hallo volgende geregistreerd:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-153">We would have registered such a callback function with code such as hello following:</span></span>

```
IoTHubClient_LL_SetMessageCallback(iotHubClientHandle, ReceiveMessageCallback, &receiveContext)
```

<span data-ttu-id="a2a9c-154">Hallo reden die **IoTHubClient\_LLE\_DoWork** heet vaak in een lus is dat elke keer dat deze wordt aangeroepen, verzendt *sommige* buffer opgeslagen gebeurtenissen tooIoT Hub en haalt *naast Hallo* bericht dat in de wachtrij geplaatst voor Hallo-apparaat.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-154">hello reason that **IoTHubClient\_LL\_DoWork** is often called in a loop is that each time it’s called, it sends *some* buffered events tooIoT Hub and retrieves *hello next* message queued up for hello device.</span></span> <span data-ttu-id="a2a9c-155">Elke aanroep wordt niet gegarandeerd toosend buffer opgeslagen gebeurtenissen of in de wachtrij tooretrieve alle berichten.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-155">Each call isn’t guaranteed toosend all buffered events or tooretrieve all queued messages.</span></span> <span data-ttu-id="a2a9c-156">Als u wilt dat toosend alle gebeurtenissen in Hallo buffer en ga vervolgens door op met de andere verwerking kunt u deze lus vervangen met code zoals Hallo volgende:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-156">If you want toosend all events in hello buffer and then continue on with other processing you can replace this loop with code such as hello following:</span></span>

```
IOTHUB_CLIENT_STATUS status;

while ((IoTHubClient_LL_GetSendStatus(iotHubClientHandle, &status) == IOTHUB_CLIENT_OK) && (status == IOTHUB_CLIENT_SEND_STATUS_BUSY))
{
    IoTHubClient_LL_DoWork(iotHubClientHandle);
    ThreadAPI_Sleep(1000);
}
```

<span data-ttu-id="a2a9c-157">Deze code roept **IoTHubClient\_LLE\_DoWork** totdat alle gebeurtenissen in de buffer Hallo tooIoT Hub zijn verzonden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-157">This code calls **IoTHubClient\_LL\_DoWork** until all events in hello buffer have been sent tooIoT Hub.</span></span> <span data-ttu-id="a2a9c-158">Houd er rekening mee dat dit ook impliceert niet alle berichten in de wachtrij is ontvangen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-158">Note this does not also imply that all queued messages have been received.</span></span> <span data-ttu-id="a2a9c-159">Deel van Hallo reden hiervoor is dat als deterministische een actie controleren of er 'alle' berichten niet.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-159">Part of hello reason for this is that checking for "all" messages isn’t as deterministic an action.</span></span> <span data-ttu-id="a2a9c-160">Wat gebeurt er als u 'alle' Hallo-berichten ophalen, maar wordt nog een toohello apparaat verzonden onmiddellijk na?</span><span class="sxs-lookup"><span data-stu-id="a2a9c-160">What happens if you retrieve "all" of hello messages, but then another one is sent toohello device immediately after?</span></span> <span data-ttu-id="a2a9c-161">Er is een betere manier toodeal met die met een geprogrammeerde time-out.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-161">A better way toodeal with that is with a programmed timeout.</span></span> <span data-ttu-id="a2a9c-162">Hallo-bericht callback-functie kan bijvoorbeeld een timer ingesteld telkens wanneer deze wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-162">For example, hello message callback function could reset a timer every time it’s invoked.</span></span> <span data-ttu-id="a2a9c-163">Vervolgens kunt u bedrijfslogica toocontinue verwerken als u bijvoorbeeld geen berichten ontvangen in Hallo laatste *X* seconden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-163">You can then write logic toocontinue processing if, for example, no messages have been received in hello last *X* seconds.</span></span>

<span data-ttu-id="a2a9c-164">Wanneer u bent klaar ingressing gebeurtenissen en ontvangen van berichten, ervoor toocall Hallo bijbehorende functie tooclean resources worden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-164">When you’re finished ingressing events and receiving messages, be sure toocall hello corresponding function tooclean up resources.</span></span>

```
IoTHubClient_LL_Destroy(iotHubClientHandle);
```

<span data-ttu-id="a2a9c-165">In feite is er slechts één set API's toosend en ontvangen van gegevens met een achtergrond-thread en een andere set API's die hetzelfde zonder Hallo achtergrondthread Hallo.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-165">Basically there’s only one set of APIs toosend and receive data with a background thread and another set of APIs that does hello same thing without hello background thread.</span></span> <span data-ttu-id="a2a9c-166">Veel van ontwikkelaars mogelijk liever Hallo niet - LLE API's, maar hello API's van lager niveau zijn nuttig wanneer Hallo developer wil expliciete controle over Netwerkoverdrachten.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-166">A lot of developers may prefer hello non-LL APIs, but hello lower-level APIs are useful when hello developer wants explicit control over network transmissions.</span></span> <span data-ttu-id="a2a9c-167">Bijvoorbeeld: op sommige apparaten verzamelen van gegevens gedurende een bepaalde tijd alleen ingangsgebeurtenissen tussenpozen (bijvoorbeeld één keer een uur of één keer per dag).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-167">For example, some devices collect data over time and only ingress events at specified intervals (for example, once an hour or once a day).</span></span> <span data-ttu-id="a2a9c-168">Hallo lager niveau API's kunt u de mogelijkheid tooexplicitly besturingselement Hallo bij het verzenden en ontvangen van gegevens uit IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-168">hello lower-level APIs give you hello ability tooexplicitly control when you send and receive data from IoT Hub.</span></span> <span data-ttu-id="a2a9c-169">Anderen liever Hallo eenvoud gewoon die Hallo die lager niveau API's bieden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-169">Others will simply prefer hello simplicity that hello lower-level APIs provide.</span></span> <span data-ttu-id="a2a9c-170">Alles op Hallo hoofdthread in plaats van sommige werk gebeurt op Hallo achtergrond gebeurt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-170">Everything happens on hello main thread rather than some work happening in hello background.</span></span>

<span data-ttu-id="a2a9c-171">Het model dat u kiest, worden ervoor toobe consistent in welke API's die u gebruikt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-171">Whichever model you choose, be sure toobe consistent in which APIs you use.</span></span> <span data-ttu-id="a2a9c-172">Als u met het aanroepen van Start **IoTHubClient\_LLE\_CreateFromConnectionString**, zorg ervoor dat u alleen Hallo overeenkomt lager niveau API's voor een vervolgzelfstudie werk gebruiken:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-172">If you start by calling **IoTHubClient\_LL\_CreateFromConnectionString**, be sure you only use hello corresponding lower-level APIs for any follow-up work:</span></span>

* <span data-ttu-id="a2a9c-173">IoTHubClient\_LLE\_SendEventAsync</span><span class="sxs-lookup"><span data-stu-id="a2a9c-173">IoTHubClient\_LL\_SendEventAsync</span></span>
* <span data-ttu-id="a2a9c-174">IoTHubClient\_LLE\_SetMessageCallback</span><span class="sxs-lookup"><span data-stu-id="a2a9c-174">IoTHubClient\_LL\_SetMessageCallback</span></span>
* <span data-ttu-id="a2a9c-175">IoTHubClient\_LLE\_vernietigen</span><span class="sxs-lookup"><span data-stu-id="a2a9c-175">IoTHubClient\_LL\_Destroy</span></span>
* <span data-ttu-id="a2a9c-176">IoTHubClient\_LLE\_DoWork</span><span class="sxs-lookup"><span data-stu-id="a2a9c-176">IoTHubClient\_LL\_DoWork</span></span>

<span data-ttu-id="a2a9c-177">Hallo tegengestelde is ook ingesteld op true.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-177">hello opposite is true as well.</span></span> <span data-ttu-id="a2a9c-178">Als u met opstart **IoTHubClient\_CreateFromConnectionString**, en vervolgens gebruik Hallo niet - LLE API's voor alle verdere verwerking.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-178">If you start with **IoTHubClient\_CreateFromConnectionString**, then use hello non-LL APIs for any additional processing.</span></span>

<span data-ttu-id="a2a9c-179">Zie in hello Azure IoT-apparaat SDK voor C, Hallo **iothub\_client\_voorbeeld\_http** -toepassing voor een compleet voorbeeld van Hallo lager niveau API's.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-179">In hello Azure IoT device SDK for C, see hello **iothub\_client\_sample\_http** application for a complete example of hello lower-level APIs.</span></span> <span data-ttu-id="a2a9c-180">Hallo **iothub\_client\_voorbeeld\_amqp** toepassing voor een voorbeeld van een volledige Hallo niet - LLE API's kan worden verwezen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-180">hello **iothub\_client\_sample\_amqp** application can be referenced for a full example of hello non-LL APIs.</span></span>

## <a name="property-handling"></a><span data-ttu-id="a2a9c-181">Verwerking van de eigenschap</span><span class="sxs-lookup"><span data-stu-id="a2a9c-181">Property handling</span></span>
<span data-ttu-id="a2a9c-182">Tot nu toe wanneer we verzenden van gegevens hebt die worden beschreven, hebt we is verwijst toohello hoofdtekst van het Hallo-bericht.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-182">So far when we've described sending data, we've been referring toohello body of hello message.</span></span> <span data-ttu-id="a2a9c-183">Neem bijvoorbeeld deze code:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-183">For example, consider this code:</span></span>

```
EVENT_INSTANCE message;
sprintf_s(msgText, sizeof(msgText), "Hello World");
message.messageHandle = IoTHubMessage_CreateFromByteArray((const unsigned char*)msgText, strlen(msgText));
IoTHubClient_LL_SendEventAsync(iotHubClientHandle, message.messageHandle, SendConfirmationCallback, &message)
```

<span data-ttu-id="a2a9c-184">Het volgende voorbeeld wordt een bericht tooIoT Hub met Hallo tekst "Hallo wereld".</span><span class="sxs-lookup"><span data-stu-id="a2a9c-184">This example sends a message tooIoT Hub with hello text "Hello World."</span></span> <span data-ttu-id="a2a9c-185">IoT Hub kan echter ook eigenschappen toobe gekoppelde tooeach bericht.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-185">However, IoT Hub also allows properties toobe attached tooeach message.</span></span> <span data-ttu-id="a2a9c-186">Eigenschappen zijn naam/waarde-paren die aangesloten toohello bericht worden kunnen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-186">Properties are name/value pairs that can be attached toohello message.</span></span> <span data-ttu-id="a2a9c-187">Bijvoorbeeld, kunt we Hallo vorige code tooattach een eigenschap toohello bericht wijzigen:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-187">For example, we can modify hello previous code tooattach a property toohello message:</span></span>

```
MAP_HANDLE propMap = IoTHubMessage_Properties(message.messageHandle);
sprintf_s(propText, sizeof(propText), "%d", i);
Map_AddOrUpdate(propMap, "SequenceNumber", propText);
```

<span data-ttu-id="a2a9c-188">Begin met het aanroepen van **IoTHubMessage\_eigenschappen** en deze Hallo-ingang van ons bericht wordt doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-188">We start by calling **IoTHubMessage\_Properties** and passing it hello handle of our message.</span></span> <span data-ttu-id="a2a9c-189">Wat we terughalen is een **kaart\_verwerken** verwijzing waarmee we toostart eigenschappen toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-189">What we get back is a **MAP\_HANDLE** reference that enables us toostart adding properties.</span></span> <span data-ttu-id="a2a9c-190">Hallo laatstgenoemde wordt bereikt door het aanroepen van **kaart\_AddOrUpdate**, wat een verwijzing tooa kaart duurt\_INGANG Hallo eigenschapsnaam en Hallo eigenschapswaarde.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-190">hello latter is accomplished by calling **Map\_AddOrUpdate**, which takes a reference tooa MAP\_HANDLE, hello property name, and hello property value.</span></span> <span data-ttu-id="a2a9c-191">Met deze API kunnen we zoveel eigenschappen als we wilt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-191">With this API we can add as many properties as we like.</span></span>

<span data-ttu-id="a2a9c-192">Wanneer de gebeurtenis Hallo wordt gelezen uit **Event Hubs**, Hallo ontvanger kunt opsommen Hallo eigenschappen en de bijbehorende waarden ophalen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-192">When hello event is read from **Event Hubs**, hello receiver can enumerate hello properties and retrieve their corresponding values.</span></span> <span data-ttu-id="a2a9c-193">Bijvoorbeeld in .NET dit zou worden bereikt door het openen van Hallo [eigenschappen verzameling op Hallo EventData object](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.eventdata.properties.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-193">For example, in .NET this would be accomplished by accessing hello [Properties collection on hello EventData object](https://msdn.microsoft.com/library/azure/microsoft.servicebus.messaging.eventdata.properties.aspx).</span></span>

<span data-ttu-id="a2a9c-194">In het vorige voorbeeld hello koppelt we eigenschappen tooan gebeurtenis dat we tooIoT Hub verzendt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-194">In hello previous example, we’re attaching properties tooan event that we send tooIoT Hub.</span></span> <span data-ttu-id="a2a9c-195">Eigenschappen kunnen ook worden aangesloten toomessages ontvangen van IoT-Hub.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-195">Properties can also be attached toomessages received from IoT Hub.</span></span> <span data-ttu-id="a2a9c-196">Als we tooretrieve eigenschappen van een bericht wilt, kunnen we code zoals Hallo volgende gebruiken in onze callback-functie van het bericht:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-196">If we want tooretrieve properties from a message, we can use code such as hello following in our message callback function:</span></span>

```
static IOTHUBMESSAGE_DISPOSITION_RESULT ReceiveMessageCallback(IOTHUB_MESSAGE_HANDLE message, void* userContextCallback)
{
    . . .

    // Retrieve properties from hello message
    MAP_HANDLE mapProperties = IoTHubMessage_Properties(message);
    if (mapProperties != NULL)
    {
        const char*const* keys;
        const char*const* values;
        size_t propertyCount = 0;
        if (Map_GetInternals(mapProperties, &keys, &values, &propertyCount) == MAP_OK)
        {
            if (propertyCount > 0)
            {
                printf("Message Properties:\r\n");
                for (size_t index = 0; index < propertyCount; index++)
                {
                    printf("\tKey: %s Value: %s\r\n", keys[index], values[index]);
                }
                printf("\r\n");
            }
        }
    }

    . . .
}
```

<span data-ttu-id="a2a9c-197">Hallo aanroep te**IoTHubMessage\_eigenschappen** retourneert Hallo **kaart\_verwerken** verwijzing.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-197">hello call too**IoTHubMessage\_Properties** returns hello **MAP\_HANDLE** reference.</span></span> <span data-ttu-id="a2a9c-198">We geeft die verwijzen naar te**kaart\_GetInternals** tooobtain een verwijzing tooan-matrix van Hallo naam/waarde-paren (evenals een aantal Hallo-eigenschappen).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-198">We then pass that reference too**Map\_GetInternals** tooobtain a reference tooan array of hello name/value pairs (as well as a count of hello properties).</span></span> <span data-ttu-id="a2a9c-199">Op dat moment is een kwestie van Hallo eigenschappen tooget toohello waarden die we wilt inventariseren.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-199">At that point it's a simple matter of enumerating hello properties tooget toohello values we want.</span></span>

<span data-ttu-id="a2a9c-200">U hebt geen toouse eigenschappen in uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-200">You don't have toouse properties in your application.</span></span> <span data-ttu-id="a2a9c-201">Echter, als u tooset moet ze op gebeurtenissen of deze worden opgehaald van berichten, hello **IoTHubClient** bibliotheek kunt u gemakkelijk.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-201">However, if you need tooset them on events or retrieve them from messages, hello **IoTHubClient** library makes it easy.</span></span>

## <a name="message-handling"></a><span data-ttu-id="a2a9c-202">Afhandeling van berichten</span><span class="sxs-lookup"><span data-stu-id="a2a9c-202">Message handling</span></span>
<span data-ttu-id="a2a9c-203">Zoals eerder gezegd, wanneer berichten uit IoT Hub Hallo **IoTHubClient** bibliotheek antwoordt door een geregistreerde callback-functie wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-203">As stated previously, when messages arrive from IoT Hub hello **IoTHubClient** library responds by invoking a registered callback function.</span></span> <span data-ttu-id="a2a9c-204">Er is een retourparameter van deze functie die een extra verklaring verdient.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-204">There is a return parameter of this function that deserves some additional explanation.</span></span> <span data-ttu-id="a2a9c-205">Hier volgt een fragment van de callback-functie in Hallo Hallo **iothub\_client\_voorbeeld\_http** voorbeeldtoepassing:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-205">Here’s an excerpt of hello callback function in hello **iothub\_client\_sample\_http** sample application:</span></span>

```
static IOTHUBMESSAGE_DISPOSITION_RESULT ReceiveMessageCallback(IOTHUB_MESSAGE_HANDLE message, void* userContextCallback)
{
    . . .
    return IOTHUBMESSAGE_ACCEPTED;
}
```

<span data-ttu-id="a2a9c-206">Houd er rekening mee dat het retourtype Hallo **IOTHUBMESSAGE\_toestand\_resultaat** en in dit geval wordt teruggeplaatst **IOTHUBMESSAGE\_GEACCEPTEERDE**.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-206">Note that hello return type is **IOTHUBMESSAGE\_DISPOSITION\_RESULT** and in this particular case we return **IOTHUBMESSAGE\_ACCEPTED**.</span></span> <span data-ttu-id="a2a9c-207">Er zijn andere waarden die we van deze functie kunt terugkeren wijzigen hoe Hallo **IoTHubClient** bibliotheek reageert toohello bericht retouraanroep.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-207">There are other values we can return from this function that change how hello **IoTHubClient** library reacts toohello message callback.</span></span> <span data-ttu-id="a2a9c-208">Hier volgen Hallo-opties.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-208">Here are hello options.</span></span>

* <span data-ttu-id="a2a9c-209">**IOTHUBMESSAGE\_GEACCEPTEERDE** – het Hallo-bericht is verwerkt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-209">**IOTHUBMESSAGE\_ACCEPTED** – hello message has been processed successfully.</span></span> <span data-ttu-id="a2a9c-210">Hallo **IoTHubClient** bibliotheek zullen niet worden aangeroepen Hallo callback-functie opnieuw met de Hallo hetzelfde bericht.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-210">hello **IoTHubClient** library will not invoke hello callback function again with hello same message.</span></span>
* <span data-ttu-id="a2a9c-211">**IOTHUBMESSAGE\_geweigerd** : het Hallo-bericht is niet verwerkt en er is geen toodo desire Hallo daarom in toekomstige.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-211">**IOTHUBMESSAGE\_REJECTED** – hello message was not processed and there is no desire toodo so in hello future.</span></span> <span data-ttu-id="a2a9c-212">Hallo **IoTHubClient** bibliotheek moet niet worden aangeroepen Hallo callback-functie opnieuw met de Hallo hetzelfde bericht.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-212">hello **IoTHubClient** library should not invoke hello callback function again with hello same message.</span></span>
* <span data-ttu-id="a2a9c-213">**IOTHUBMESSAGE\_ABANDONED** – het Hallo-bericht is niet verwerkt, maar Hallo **IoTHubClient** bibliotheek Hallo callback-functie opnieuw met de Hallo moet aanroepen hetzelfde bericht.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-213">**IOTHUBMESSAGE\_ABANDONED** – hello message was not processed successfully, but hello **IoTHubClient** library should invoke hello callback function again with hello same message.</span></span>

<span data-ttu-id="a2a9c-214">Voor Hallo eerst twee retourcodes, hello **IoTHubClient** bibliotheek verzendt een bericht tooIoT Hub die aangeeft dat het Hallo-bericht moet worden verwijderd uit Hallo apparaatwachtrij en niet opnieuw worden bezorgd.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-214">For hello first two return codes, hello **IoTHubClient** library sends a message tooIoT Hub indicating that hello message should be deleted from hello device queue and not delivered again.</span></span> <span data-ttu-id="a2a9c-215">Hallo netto effect is dezelfde Hallo (het Hallo-bericht is verwijderd uit Hallo apparaatwachtrij), maar Hiermee wordt aangegeven of het Hallo-bericht is goedgekeurd of geweigerd nog steeds wordt vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-215">hello net effect is hello same (hello message is deleted from hello device queue), but whether hello message was accepted or rejected is still recorded.</span></span>  <span data-ttu-id="a2a9c-216">Dit verschil Recording is nuttig toosenders van het Hallo-bericht die luisteren naar feedback en weten als een apparaat heeft geaccepteerd of een bepaald bericht afgewezen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-216">Recording this distinction is useful toosenders of hello message who can listen for feedback and find out if a device has accepted or rejected a particular message.</span></span>

<span data-ttu-id="a2a9c-217">In het laatste geval Hallo een bericht ook tooIoT Hub wordt verzonden, maar Hiermee wordt aangegeven dat het Hallo-bericht moet opnieuw worden bezorgd.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-217">In hello last case a message is also sent tooIoT Hub, but it indicates that hello message should be redelivered.</span></span> <span data-ttu-id="a2a9c-218">Meestal zult u een bericht afbreken als u er een fout optreden tootry tooprocess Hallo bericht opnieuw.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-218">Typically you’ll abandon a message if you encounter some error but want tootry tooprocess hello message again.</span></span> <span data-ttu-id="a2a9c-219">Daarentegen is weigeren van een bericht geschikt als er een onherstelbare fout optreden (of als u gewoon besluit dat u niet wilt dat het Hallo-bericht tooprocess).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-219">In contrast, rejecting a message is appropriate when you encounter an unrecoverable error (or if you simply decide you don’t want tooprocess hello message).</span></span>

<span data-ttu-id="a2a9c-220">In elk geval worden op de hoogte van de andere retourcodes Hallo zodat u van Hallo gewenste Hallo-gedrag kan veroorzaken **IoTHubClient** bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-220">In any case, be aware of hello different return codes so that you can elicit hello behavior you want from hello **IoTHubClient** library.</span></span>

## <a name="alternate-device-credentials"></a><span data-ttu-id="a2a9c-221">Alternatieve apparaat referenties</span><span class="sxs-lookup"><span data-stu-id="a2a9c-221">Alternate device credentials</span></span>
<span data-ttu-id="a2a9c-222">Zoals eerder vermeld, Hallo eerst te beginnen toodo bij het werken met Hallo **IoTHubClient** bibliotheek tooobtain is een **IOTHUB\_CLIENT\_verwerken** met een aanroep zoals Hallo te volgen:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-222">As explained previously, hello first thing toodo when working with hello **IoTHubClient** library is tooobtain a **IOTHUB\_CLIENT\_HANDLE** with a call such as hello following:</span></span>

```
IOTHUB_CLIENT_HANDLE iotHubClientHandle;
iotHubClientHandle = IoTHubClient_CreateFromConnectionString(connectionString, AMQP_Protocol);
```

<span data-ttu-id="a2a9c-223">Hallo argumenten te**IoTHubClient\_CreateFromConnectionString** zijn verbindingsreeks Hallo-apparaat en een parameter die aangeeft Hallo-protocol gebruiken we toocommunicate met IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-223">hello arguments too**IoTHubClient\_CreateFromConnectionString** are hello device connection string and a parameter that indicates hello protocol we use toocommunicate with IoT Hub.</span></span> <span data-ttu-id="a2a9c-224">verbindingsreeks Hallo-apparaat heeft een indeling die wordt weergegeven als volgt:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-224">hello device connection string has a format that appears as follows:</span></span>

```
HostName=IOTHUBNAME.IOTHUBSUFFIX;DeviceId=DEVICEID;SharedAccessKey=SHAREDACCESSKEY
```

<span data-ttu-id="a2a9c-225">Er zijn vier stukjes informatie in deze tekenreeks: naam van de IoT Hub, achtervoegsel IoT Hub, apparaat-ID en gedeelde toegangssleutel.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-225">There are four pieces of information in this string: IoT Hub name, IoT Hub suffix, device ID, and shared access key.</span></span> <span data-ttu-id="a2a9c-226">U Hallo volledig gekwalificeerde domeinnaam (FQDN) van een IoT-hub verkrijgen wanneer u uw IoT hub-instantie in hello Azure-portal maakt — Hiermee krijgt u naam Hallo IoT-hub (Hallo eerste deel van Hallo Fully Qualified Domain Name) en het Hallo IoT hub achtervoegsel (Hallo rest Hallo Fully Qualified Domain Name).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-226">You obtain hello fully qualified domain name (FQDN) of an IoT hub when you create your IoT hub instance in hello Azure portal — this gives you hello IoT hub name (hello first part of hello FQDN) and hello IoT hub suffix (hello rest of hello FQDN).</span></span> <span data-ttu-id="a2a9c-227">U krijgt Hallo apparaat-ID en de gedeelde toegangssleutel Hallo wanneer u uw apparaat met IoT Hub registreert (zoals beschreven in Hallo [vorige artikel](iot-hub-device-sdk-c-intro.md)).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-227">You get hello device ID and hello shared access key when you register your device with IoT Hub (as described in hello [previous article](iot-hub-device-sdk-c-intro.md)).</span></span>

<span data-ttu-id="a2a9c-228">**IoTHubClient\_CreateFromConnectionString** biedt u eenrichtingssessie tooinitialize Hallo-bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-228">**IoTHubClient\_CreateFromConnectionString** gives you one way tooinitialize hello library.</span></span> <span data-ttu-id="a2a9c-229">Als u liever, kunt u een nieuwe **IOTHUB\_CLIENT\_verwerken** met behulp van deze afzonderlijke parameters in plaats van verbindingsreeks Hallo-apparaat.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-229">If you prefer, you can create a new **IOTHUB\_CLIENT\_HANDLE** by using these individual parameters rather than hello device connection string.</span></span> <span data-ttu-id="a2a9c-230">Dit wordt bereikt met de volgende code Hallo:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-230">This is achieved with hello following code:</span></span>

```
IOTHUB_CLIENT_CONFIG iotHubClientConfig;
iotHubClientConfig.iotHubName = "";
iotHubClientConfig.deviceId = "";
iotHubClientConfig.deviceKey = "";
iotHubClientConfig.iotHubSuffix = "";
iotHubClientConfig.protocol = HTTP_Protocol;
IOTHUB_CLIENT_HANDLE iotHubClientHandle = IoTHubClient_LL_Create(&iotHubClientConfig);
```

<span data-ttu-id="a2a9c-231">Dit kunnen worden behaald Hallo hetzelfde is als **IoTHubClient\_CreateFromConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-231">This accomplishes hello same thing as **IoTHubClient\_CreateFromConnectionString**.</span></span>

<span data-ttu-id="a2a9c-232">Het lijkt misschien duidelijk dat u toouse wilt **IoTHubClient\_CreateFromConnectionString** in plaats van deze uitgebreidere methode van de initialisatie.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-232">It may seem obvious that you would want toouse **IoTHubClient\_CreateFromConnectionString** rather than this more verbose method of initialization.</span></span> <span data-ttu-id="a2a9c-233">Houd er rekening mee echter, wanneer u een apparaat in IoT Hub registreren wat er een apparaat-ID en de apparaatsleutel (niet een verbindingsreeks is).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-233">Keep in mind, however, that when you register a device in IoT Hub what you get is a device ID and device key (not a connection string).</span></span> <span data-ttu-id="a2a9c-234">Hallo *apparaat explorer* SDK hulpprogramma geïntroduceerd in Hallo [vorige artikel](iot-hub-device-sdk-c-intro.md) maakt gebruik van bibliotheken in Hallo **Azure IoT service SDK** toocreate Hallo apparaat verbindingsreeks uit Hallo apparaat-ID, de sleutel voor apparaat en IoT Hub-hostnaam.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-234">hello *device explorer* SDK tool introduced in hello [previous article](iot-hub-device-sdk-c-intro.md) uses libraries in hello **Azure IoT service SDK** toocreate hello device connection string from hello device ID, device key, and IoT Hub host name.</span></span> <span data-ttu-id="a2a9c-235">Aanroepen van dus **IoTHubClient\_LLE\_maken** wellicht de voorkeur omdat u Hallo stap voor het genereren van een verbindingsreeks.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-235">So calling **IoTHubClient\_LL\_Create** may be preferable because it saves you hello step of generating a connection string.</span></span> <span data-ttu-id="a2a9c-236">Gebruik de methode is handig.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-236">Use whichever method is convenient.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="a2a9c-237">Configuratie-opties</span><span class="sxs-lookup"><span data-stu-id="a2a9c-237">Configuration options</span></span>
<span data-ttu-id="a2a9c-238">Tot nu toe alles over Hallo manier Hallo beschreven **IoTHubClient** bibliotheek werkt weerspiegelt het standaardgedrag.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-238">So far everything described about hello way hello **IoTHubClient** library works reflects its default behavior.</span></span> <span data-ttu-id="a2a9c-239">Er zijn echter een aantal opties die u kunt de werking van Hallo bibliotheek toochange instellen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-239">However, there are a few options that you can set toochange how hello library works.</span></span> <span data-ttu-id="a2a9c-240">Dit wordt bereikt door het gebruik van Hallo **IoTHubClient\_LLE\_SetOption** API.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-240">This is accomplished by leveraging hello **IoTHubClient\_LL\_SetOption** API.</span></span> <span data-ttu-id="a2a9c-241">Bekijk het volgende voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-241">Consider this example:</span></span>

```
unsigned int timeout = 30000;
IoTHubClient_LL_SetOption(iotHubClientHandle, "timeout", &timeout);
```

<span data-ttu-id="a2a9c-242">Er zijn een aantal opties die vaak worden gebruikt:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-242">There are a couple of options that are commonly used:</span></span>

* <span data-ttu-id="a2a9c-243">**SetBatching** (bool) – als **true**, en vervolgens de gegevens die worden verzonden tooIoT Hub wordt verzonden in batches.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-243">**SetBatching** (bool) – If **true**, then data sent tooIoT Hub is sent in batches.</span></span> <span data-ttu-id="a2a9c-244">Als **false**, en vervolgens berichten afzonderlijk worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-244">If **false**, then messages are sent individually.</span></span> <span data-ttu-id="a2a9c-245">Hallo standaardwaarde is **false**.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-245">hello default is **false**.</span></span> <span data-ttu-id="a2a9c-246">Houd er rekening mee dat Hallo **SetBatching** optie is alleen van toepassing toohello HTTP-protocol en niet toohello MQTT of AMQP-protocol.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-246">Note that hello **SetBatching** option only applies toohello HTTP protocol and not toohello MQTT or AMQP protocols.</span></span>
* <span data-ttu-id="a2a9c-247">**Time-out** (niet-ondertekende int): deze waarde wordt weergegeven in milliseconden.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-247">**Timeout** (unsigned int) – This value is represented in milliseconds.</span></span> <span data-ttu-id="a2a9c-248">Als een HTTP-aanvraag of antwoord ontvangen duurt langer dan de opgegeven tijd, verzendt vervolgens Hallo verbinding een time-out optreedt.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-248">If sending an HTTP request or receiving a response takes longer than this time, then hello connection times out.</span></span>

<span data-ttu-id="a2a9c-249">Hallo optie batchverwerking is belangrijk.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-249">hello batching option is important.</span></span> <span data-ttu-id="a2a9c-250">Standaard Hallo bibliotheek ingresses gebeurtenissen afzonderlijk (één gebeurtenis is wat u te doorgeven**IoTHubClient\_LLE\_SendEventAsync**).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-250">By default, hello library ingresses events individually (a single event is whatever you pass too**IoTHubClient\_LL\_SendEventAsync**).</span></span> <span data-ttu-id="a2a9c-251">Als de optie batchverwerking Hallo **waar**, Hallo-bibliotheek verzamelt zoveel gebeurtenissen zoals kan het Hallo-buffer (omhoog toohello maximale berichtgrootte die IoT Hub accepteert).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-251">If hello batching option is **true**, hello library collects as many events as it can from hello buffer (up toohello maximum message size that IoT Hub will accept).</span></span>  <span data-ttu-id="a2a9c-252">Hallo gebeurtenis batch wordt verzonden tooIoT Hub in één HTTP-aanroep (Hallo afzonderlijke gebeurtenissen zijn gebundeld in een JSON-matrix).</span><span class="sxs-lookup"><span data-stu-id="a2a9c-252">hello event batch is sent tooIoT Hub in a single HTTP call (hello individual events are bundled into a JSON array).</span></span> <span data-ttu-id="a2a9c-253">Inschakelen van batchverwerking doorgaans resulteert in grote prestatiewinst omdat u bent netwerk retourbewerkingen verminderen.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-253">Enabling batching typically results in big performance gains since you’re reducing network round-trips.</span></span> <span data-ttu-id="a2a9c-254">Bovendien vermindert bandbreedte omdat u bij het verzenden van een set HTTP-headers met een gebeurtenis batch in plaats van een set headers voor elke afzonderlijke gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-254">It also significantly reduces bandwidth since you are sending one set of HTTP headers with an event batch rather than a set of headers for each individual event.</span></span> <span data-ttu-id="a2a9c-255">Tenzij u een specifieke reden toodo anders hebt, moet doorgaans u tooenable batchverwerking.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-255">Unless you have a specific reason toodo otherwise, typically you’ll want tooenable batching.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a2a9c-256">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a2a9c-256">Next steps</span></span>
<span data-ttu-id="a2a9c-257">Dit artikel wordt beschreven in detail Hallo gedrag van Hallo **IoTHubClient** bibliotheek gevonden in Hallo **Azure IoT-device SDK voor C**. Met deze informatie kunt u een goed begrip van Hallo-mogelijkheden van Hallo hebt **IoTHubClient** bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-257">This article describes in detail hello behavior of hello **IoTHubClient** library found in hello **Azure IoT device SDK for C**. With this information, you should have a good understanding of hello capabilities of hello **IoTHubClient** library.</span></span> <span data-ttu-id="a2a9c-258">Hallo [volgende artikel](iot-hub-device-sdk-c-serializer.md) biedt vergelijkbare detail op Hallo **serialisatiefunctie** bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="a2a9c-258">hello [next article](iot-hub-device-sdk-c-serializer.md) provides similar detail on hello **serializer** library.</span></span>

<span data-ttu-id="a2a9c-259">toolearn meer informatie over het ontwikkelen voor IoT Hub, Zie Hallo [Azure IoT SDK's][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="a2a9c-259">toolearn more about developing for IoT Hub, see hello [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="a2a9c-260">toofurther verkennen Hallo-mogelijkheden van IoT Hub, Zie:</span><span class="sxs-lookup"><span data-stu-id="a2a9c-260">toofurther explore hello capabilities of IoT Hub, see:</span></span>

* <span data-ttu-id="a2a9c-261">[Een apparaat simuleren met Azure IoT rand][lnk-iotedge]</span><span class="sxs-lookup"><span data-stu-id="a2a9c-261">[Simulating a device with Azure IoT Edge][lnk-iotedge]</span></span>

[lnk-sdks]: iot-hub-devguide-sdks.md

[lnk-iotedge]: iot-hub-linux-iot-edge-simulated-device.md
