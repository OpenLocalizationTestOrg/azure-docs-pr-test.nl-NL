---
title: Data Lake Store prestaties afstemmen richtlijnen aaaAzure | Microsoft Docs
description: Azure Data Lake Store-prestaties afstemmen richtlijnen
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="5d6de-103">Azure Data Lake Store voor prestaties afstemmen</span><span class="sxs-lookup"><span data-stu-id="5d6de-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="5d6de-104">Data Lake Store ondersteunt hoge gegevensdoorvoer voor i/o-intensieve analyse en gegevensverplaatsing.</span><span class="sxs-lookup"><span data-stu-id="5d6de-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="5d6de-105">In Azure Data Lake Store is met behulp van alle beschikbare doorvoer – Hallo hoeveelheid gegevens die kunnen worden gelezen of geschreven per seconde – belangrijk tooget Hallo optimale prestaties.</span><span class="sxs-lookup"><span data-stu-id="5d6de-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="5d6de-106">Dit wordt bereikt door het uitvoeren van zoveel leest en schrijft parallel mogelijk.</span><span class="sxs-lookup"><span data-stu-id="5d6de-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Data Lake Store-prestaties](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="5d6de-108">Azure Data Lake Store kunt schalen tooprovide Hallo nodig doorvoer voor alle analytics scenario.</span><span class="sxs-lookup"><span data-stu-id="5d6de-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="5d6de-109">Een Azure Data Lake Store-account biedt standaard automatisch voldoende doorvoer toomeet Hallo behoeften van een categorie gebruiksvoorbeelden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="5d6de-110">Hallo gevallen waarin klanten wordt uitgevoerd in de standaardlimiet Hallo Hallo ADLS-account kan worden geconfigureerd tooprovide meer doorvoer door contact op met Microsoft ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="5d6de-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="5d6de-111">Gegevensopname</span><span class="sxs-lookup"><span data-stu-id="5d6de-111">Data ingestion</span></span>

<span data-ttu-id="5d6de-112">Bij het ophalen van gegevens uit een bron system tooADLS, is het belangrijk tooconsider die bron hardware, bron netwerkhardware en network connectivity tooADLS Hallo Hallo knelpunt kan worden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Data Lake Store-prestaties](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="5d6de-114">Het is belangrijk tooensure die Hallo verplaatsing van gegevens wordt niet beïnvloed door deze factoren.</span><span class="sxs-lookup"><span data-stu-id="5d6de-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="5d6de-115">Bron-Hardware</span><span class="sxs-lookup"><span data-stu-id="5d6de-115">Source Hardware</span></span>

<span data-ttu-id="5d6de-116">Of u van lokale machines of virtuele machines in Azure gebruikmaakt, moet u zorgvuldig Hallo geschikte hardware.</span><span class="sxs-lookup"><span data-stu-id="5d6de-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="5d6de-117">SSD's tooHDDs liever voor bron schijfhardware, en kies vervolgens schijfhardware met sneller aandrijfassen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="5d6de-118">Gebruik voor bron netwerkhardware, Hallo snelste NIC's mogelijk.</span><span class="sxs-lookup"><span data-stu-id="5d6de-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="5d6de-119">In Azure, wordt aangeraden Azure D14 virtuele machines die op de juiste wijze krachtige Hallo-schijf- en netwerkhardware.</span><span class="sxs-lookup"><span data-stu-id="5d6de-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="5d6de-120">Network Connectivity tooAzure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="5d6de-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="5d6de-121">Hallo-netwerkverbinding tussen de brongegevens en Azure Data Lake store kan soms Hallo knelpunt zijn.</span><span class="sxs-lookup"><span data-stu-id="5d6de-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="5d6de-122">Wanneer de brongegevens On-Premises is, overweeg het gebruik van een specifieke verbinding met [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="5d6de-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="5d6de-123">Als de brongegevens in Azure, Hallo worden aanbevolen wanneer Hallo gegevens in Hallo dezelfde Azure-regio als Hallo Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="5d6de-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="5d6de-124">Gegevensopname hulpprogramma's voor maximale garandeert configureren</span><span class="sxs-lookup"><span data-stu-id="5d6de-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="5d6de-125">Nadat u Hallo bron hardware hebt opgelost en network connectivity knelpunten hierboven, u bent klaar tooconfigure de opname-hulpprogramma's.</span><span class="sxs-lookup"><span data-stu-id="5d6de-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="5d6de-126">Hallo volgende tabel bevat een overzicht van de registersleutelinstellingen voor verschillende hulpprogramma's van populaire opname Hallo en biedt uitgebreide prestaties artikelen voor hen afstemmen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="5d6de-127">Dit gaat u naar meer informatie over dit hulpprogramma toouse voor uw scenario toolearn [artikel](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="5d6de-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="5d6de-128">Hulpprogramma</span><span class="sxs-lookup"><span data-stu-id="5d6de-128">Tool</span></span>               | <span data-ttu-id="5d6de-129">Instellingen</span><span class="sxs-lookup"><span data-stu-id="5d6de-129">Settings</span></span>     | <span data-ttu-id="5d6de-130">Meer informatie</span><span class="sxs-lookup"><span data-stu-id="5d6de-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="5d6de-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="5d6de-131">Powershell</span></span>       | <span data-ttu-id="5d6de-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="5d6de-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="5d6de-133">Koppeling</span><span class="sxs-lookup"><span data-stu-id="5d6de-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="5d6de-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="5d6de-134">AdlCopy</span></span>    | <span data-ttu-id="5d6de-135">Azure Data Lake Analytics-eenheden</span><span class="sxs-lookup"><span data-stu-id="5d6de-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="5d6de-136">Koppeling</span><span class="sxs-lookup"><span data-stu-id="5d6de-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="5d6de-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="5d6de-137">DistCp</span></span>            | <span data-ttu-id="5d6de-138">-m (toewijzen)</span><span class="sxs-lookup"><span data-stu-id="5d6de-138">-m (mapper)</span></span>   | [<span data-ttu-id="5d6de-139">Koppeling</span><span class="sxs-lookup"><span data-stu-id="5d6de-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="5d6de-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="5d6de-140">Azure Data Factory</span></span>| <span data-ttu-id="5d6de-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="5d6de-141">parallelCopies</span></span>    | [<span data-ttu-id="5d6de-142">Koppeling</span><span class="sxs-lookup"><span data-stu-id="5d6de-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="5d6de-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="5d6de-143">Sqoop</span></span>           | <span data-ttu-id="5d6de-144">FS.Azure.Block.Size, -m (toewijzen)</span><span class="sxs-lookup"><span data-stu-id="5d6de-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="5d6de-145">Koppeling</span><span class="sxs-lookup"><span data-stu-id="5d6de-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="5d6de-146">Structuur van uw gegevensset</span><span class="sxs-lookup"><span data-stu-id="5d6de-146">Structure your data set</span></span>

<span data-ttu-id="5d6de-147">Wanneer gegevens worden opgeslagen in Data Lake Store, de grootte van Hallo aantal bestanden en de mappenstructuur van invloed zijn op de prestaties.</span><span class="sxs-lookup"><span data-stu-id="5d6de-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="5d6de-148">Hallo bevat volgende sectie aanbevelingen in de volgende gebieden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="5d6de-149">Bestandsgrootte</span><span class="sxs-lookup"><span data-stu-id="5d6de-149">File size</span></span>

<span data-ttu-id="5d6de-150">Analytics-engines zoals HDInsight en Azure Data Lake Analytics hebben doorgaans een overhead per bestand.</span><span class="sxs-lookup"><span data-stu-id="5d6de-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="5d6de-151">Als u uw gegevens zo veel kleine bestanden opslaat, kan dit de prestaties negatief beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="5d6de-152">Uw gegevens in het algemeen zijn ingedeeld in grotere grootte bestanden voor betere prestaties.</span><span class="sxs-lookup"><span data-stu-id="5d6de-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="5d6de-153">Als een vuistregel organiseert gegevenssets in bestanden van 256MB of hoger.</span><span class="sxs-lookup"><span data-stu-id="5d6de-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="5d6de-154">In sommige gevallen, zoals afbeeldingen en binaire gegevens, is het niet mogelijk tooprocess ze parallel.</span><span class="sxs-lookup"><span data-stu-id="5d6de-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="5d6de-155">In deze gevallen is wordt het tookeep afzonderlijke bestanden dan 2GB aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="5d6de-156">Soms beperkt gegevenspijplijnen besturen Hallo onbewerkte gegevens met een groot aantal kleine bestanden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="5d6de-157">Het verdient aanbeveling toohave een proces voor 'koken' die groter genereert bestanden toouse voor downstream-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="5d6de-158">Time Series-gegevens in mappen ordenen</span><span class="sxs-lookup"><span data-stu-id="5d6de-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="5d6de-159">Hive en ADLA werkbelastingen kunt partitie verwijderen van de tijdreeks gegevens enkele query's bij het lezen van slechts een subset van gegevens op Hallo die zorgt voor betere prestaties.</span><span class="sxs-lookup"><span data-stu-id="5d6de-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="5d6de-160">Deze pijplijnen die timeseries gegevens opnemen, plaatst u vaak hun bestanden met een zeer gestructureerd naamgeving voor bestanden en mappen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="5d6de-161">Hieronder vindt u een voorbeeld van een zeer gangbaar zien we voor gegevens die is geordend op datum:</span><span class="sxs-lookup"><span data-stu-id="5d6de-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="5d6de-162">U ziet dat Hallo datetime-gegevens worden weergegeven als de mappen en in Hallo bestandsnaam.</span><span class="sxs-lookup"><span data-stu-id="5d6de-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="5d6de-163">Voor datum en tijd Hallo Hier volgt een algemene patroon</span><span class="sxs-lookup"><span data-stu-id="5d6de-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="5d6de-164">Hallo keuze met Hallo map- en organisatie moet opnieuw optimaliseren voor de bestandsgrootte Hallo en een redelijke aantal bestanden in elke map.</span><span class="sxs-lookup"><span data-stu-id="5d6de-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="5d6de-165">I/o-intensieve taken op de werkbelastingen voor Hadoop en Spark in HDInsight optimaliseren</span><span class="sxs-lookup"><span data-stu-id="5d6de-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="5d6de-166">Taken kunnen worden onderverdeeld in een van de volgende drie categorieën Hallo:</span><span class="sxs-lookup"><span data-stu-id="5d6de-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="5d6de-167">**CPU-intensief.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-167">**CPU intensive.**</span></span>  <span data-ttu-id="5d6de-168">Deze taken zijn lang berekening tijdstippen met minimale i/o-tijden.</span><span class="sxs-lookup"><span data-stu-id="5d6de-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="5d6de-169">Voorbeelden zijn machine learning en natuurlijke taal taken verwerken.</span><span class="sxs-lookup"><span data-stu-id="5d6de-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="5d6de-170">**Geheugenintensief.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-170">**Memory intensive.**</span></span>  <span data-ttu-id="5d6de-171">Deze taken veel geheugen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5d6de-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="5d6de-172">Voorbeelden zijn PageRank en realtime analytics-taken.</span><span class="sxs-lookup"><span data-stu-id="5d6de-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="5d6de-173">**I/o-intensieve.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-173">**I/O intensive.**</span></span>  <span data-ttu-id="5d6de-174">Deze taken te besteden aan de meeste van de tijd die tijdens het doorzoeken van i/o.</span><span class="sxs-lookup"><span data-stu-id="5d6de-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="5d6de-175">Een veelvoorkomend voorbeeld is een kopieertaak die alleen lezen en schrijfbewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="5d6de-176">Andere voorbeelden zijn onder meer gegevens voorbereiding taken die grote hoeveelheden gegevens lezen, voert een aantal gegevenstransformatie en vervolgens schrijfbewerkingen Hallo back toohello gegevensarchief.</span><span class="sxs-lookup"><span data-stu-id="5d6de-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="5d6de-177">Hallo richtlijnen te volgen is alleen van toepassing tooI/O-intensieve taken.</span><span class="sxs-lookup"><span data-stu-id="5d6de-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="5d6de-178">Algemene overwegingen voor een HDInsight-cluster</span><span class="sxs-lookup"><span data-stu-id="5d6de-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="5d6de-179">**HDInsight-versies.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-179">**HDInsight versions.**</span></span> <span data-ttu-id="5d6de-180">Gebruik de nieuwste versie Hallo van HDInsight voor de beste prestaties.</span><span class="sxs-lookup"><span data-stu-id="5d6de-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="5d6de-181">**Regio's.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-181">**Regions.**</span></span> <span data-ttu-id="5d6de-182">Hallo Data Lake Store in Hallo plaatsen dezelfde regio bevinden als Hallo HDInsight-cluster.</span><span class="sxs-lookup"><span data-stu-id="5d6de-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="5d6de-183">Een HDInsight-cluster bestaat uit twee hoofdknooppunten en een aantal worker-knooppunten.</span><span class="sxs-lookup"><span data-stu-id="5d6de-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="5d6de-184">Elk werkrolknooppunt biedt een aantal kernen en het geheugen dat wordt bepaald door Hallo VM-type.</span><span class="sxs-lookup"><span data-stu-id="5d6de-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="5d6de-185">Wanneer een taak wordt uitgevoerd, is YARN Hallo resource onderhandelaar waarmee Hallo beschikbaar geheugen en kernen toocreate containers worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="5d6de-186">Elke container uitvoert Hallo taken benodigde toocomplete Hallo taak.</span><span class="sxs-lookup"><span data-stu-id="5d6de-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="5d6de-187">Snel uitvoeren containers in parallelle tooprocess taken.</span><span class="sxs-lookup"><span data-stu-id="5d6de-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="5d6de-188">Daarom wordt de prestaties verbeterd door het uitvoeren van parallelle-containers zoveel mogelijk.</span><span class="sxs-lookup"><span data-stu-id="5d6de-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="5d6de-189">Er zijn drie lagen in een HDInsight-cluster die afgestemd tooincrease worden kunnen Hallo aantal containers en gebruikmaken van alle beschikbare doorvoer.</span><span class="sxs-lookup"><span data-stu-id="5d6de-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="5d6de-190">**Fysieke laag**</span><span class="sxs-lookup"><span data-stu-id="5d6de-190">**Physical layer**</span></span>
* <span data-ttu-id="5d6de-191">**YARN-laag**</span><span class="sxs-lookup"><span data-stu-id="5d6de-191">**YARN layer**</span></span>
* <span data-ttu-id="5d6de-192">**Laag van de werkbelasting**</span><span class="sxs-lookup"><span data-stu-id="5d6de-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="5d6de-193">Fysieke laag</span><span class="sxs-lookup"><span data-stu-id="5d6de-193">Physical Layer</span></span>

<span data-ttu-id="5d6de-194">**Voer een cluster met meer knooppunten en/of groter formaat virtuele machines.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="5d6de-195">Een groter cluster kunt u toorun meer YARN-containers zoals weergegeven in volgende Hallo-afbeelding.</span><span class="sxs-lookup"><span data-stu-id="5d6de-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Data Lake Store-prestaties](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="5d6de-197">**Virtuele machines met meer netwerkbandbreedte gebruiken.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="5d6de-198">Hallo hoeveelheid netwerkbandbreedte kan een knelpunt zijn als er minder netwerkbandbreedte dan een Data Lake Store-doorvoer.</span><span class="sxs-lookup"><span data-stu-id="5d6de-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="5d6de-199">Andere virtuele machines hebben verschillende grootten voor netwerk-bandbreedte.</span><span class="sxs-lookup"><span data-stu-id="5d6de-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="5d6de-200">Kies een VM-type die Hallo grootste mogelijke netwerkbandbreedte heeft.</span><span class="sxs-lookup"><span data-stu-id="5d6de-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="5d6de-201">YARN-laag</span><span class="sxs-lookup"><span data-stu-id="5d6de-201">YARN Layer</span></span>

<span data-ttu-id="5d6de-202">**Kleinere YARN-containers gebruiken.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="5d6de-203">Hallo-grootte van elke container YARN toocreate meer containers met Hallo verkleinen dezelfde hoeveelheid resources.</span><span class="sxs-lookup"><span data-stu-id="5d6de-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Data Lake Store-prestaties](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="5d6de-205">Afhankelijk van uw werkbelasting moet altijd er een YARN container minimumgrootte die nodig is.</span><span class="sxs-lookup"><span data-stu-id="5d6de-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="5d6de-206">Als u een container te klein kiest, worden de taken worden uitgevoerd in-geheugen problemen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="5d6de-207">Doorgaans moet YARN containers niet kleiner zijn dan 1GB.</span><span class="sxs-lookup"><span data-stu-id="5d6de-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="5d6de-208">Het is algemene toosee 3GB YARN containers.</span><span class="sxs-lookup"><span data-stu-id="5d6de-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="5d6de-209">Voor sommige werkbelastingen moet u grotere YARN-containers.</span><span class="sxs-lookup"><span data-stu-id="5d6de-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="5d6de-210">**Kernen per YARN-container verhogen.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="5d6de-211">Het aantal kernen tooeach container tooincrease Hallo aantal toegewezen parallelle taken die worden uitgevoerd in elke container Hallo verhogen.</span><span class="sxs-lookup"><span data-stu-id="5d6de-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="5d6de-212">Dit werkt voor toepassingen zoals Spark die meerdere taken per container worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5d6de-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="5d6de-213">Voor toepassingen zoals Hive welke uitvoeren die een enkele thread in elke container is een betere toohave meer containers in plaats van meer kernen per container.</span><span class="sxs-lookup"><span data-stu-id="5d6de-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="5d6de-214">Laag van de werkbelasting</span><span class="sxs-lookup"><span data-stu-id="5d6de-214">Workload Layer</span></span>

<span data-ttu-id="5d6de-215">**Alle beschikbare containers gebruiken.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-215">**Use all available containers.**</span></span>  <span data-ttu-id="5d6de-216">Het aantal taken toobe Hallo gelijk of groter dan het aantal beschikbare containers Hallo zo instellen dat alle resources worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="5d6de-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Data Lake Store-prestaties](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="5d6de-218">**Mislukte taken zijn kostbaar.**</span><span class="sxs-lookup"><span data-stu-id="5d6de-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="5d6de-219">Als u elke taak heeft een grote hoeveelheid gegevens tooprocess, vervolgens resulteert mislukken van een taak in een dure probeer het opnieuw.</span><span class="sxs-lookup"><span data-stu-id="5d6de-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="5d6de-220">Daarom is het beter toocreate meer taken, die elk een kleine hoeveelheid gegevens verwerkt.</span><span class="sxs-lookup"><span data-stu-id="5d6de-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="5d6de-221">In aanvulling toohello algemene richtlijnen hierboven heeft elke toepassing beschikbaar tootune verschillende parameters voor de specifieke toepassing.</span><span class="sxs-lookup"><span data-stu-id="5d6de-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="5d6de-222">Hallo in de volgende tabel vindt u enkele van Hallo parameters en koppelingen tooget met prestaties afstemmen voor elke toepassing is gestart.</span><span class="sxs-lookup"><span data-stu-id="5d6de-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="5d6de-223">Workload</span><span class="sxs-lookup"><span data-stu-id="5d6de-223">Workload</span></span>               | <span data-ttu-id="5d6de-224">Parameter tooset taken</span><span class="sxs-lookup"><span data-stu-id="5d6de-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="5d6de-225">Spark in HDInisight</span><span class="sxs-lookup"><span data-stu-id="5d6de-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="5d6de-226">NUM Executor</span><span class="sxs-lookup"><span data-stu-id="5d6de-226">Num-executors</span></span></li><li><span data-ttu-id="5d6de-227">Executor-geheugen</span><span class="sxs-lookup"><span data-stu-id="5d6de-227">Executor-memory</span></span></li><li><span data-ttu-id="5d6de-228">Executor kernen</span><span class="sxs-lookup"><span data-stu-id="5d6de-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="5d6de-229">Hive in HDInsight</span><span class="sxs-lookup"><span data-stu-id="5d6de-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="5d6de-230">hive.tez.container.Size</span><span class="sxs-lookup"><span data-stu-id="5d6de-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="5d6de-231">MapReduce in HDInsight</span><span class="sxs-lookup"><span data-stu-id="5d6de-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="5d6de-232">mapreduce.map.Memory</span><span class="sxs-lookup"><span data-stu-id="5d6de-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="5d6de-233">Mapreduce.job.Maps</span><span class="sxs-lookup"><span data-stu-id="5d6de-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="5d6de-234">mapreduce.reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="5d6de-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="5d6de-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="5d6de-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="5d6de-236">Storm op HDInsight</span><span class="sxs-lookup"><span data-stu-id="5d6de-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="5d6de-237">Aantal werkprocessen</span><span class="sxs-lookup"><span data-stu-id="5d6de-237">Number of worker processes</span></span></li><li><span data-ttu-id="5d6de-238">Aantal exemplaren van spout executor</span><span class="sxs-lookup"><span data-stu-id="5d6de-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="5d6de-239">Aantal exemplaren van bolt executor</span><span class="sxs-lookup"><span data-stu-id="5d6de-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="5d6de-240">Aantal spout taken</span><span class="sxs-lookup"><span data-stu-id="5d6de-240">Number of spout tasks</span></span></li><li><span data-ttu-id="5d6de-241">Aantal bolt taken</span><span class="sxs-lookup"><span data-stu-id="5d6de-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="5d6de-242">Zie ook</span><span class="sxs-lookup"><span data-stu-id="5d6de-242">See also</span></span>
* [<span data-ttu-id="5d6de-243">Overzicht van Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="5d6de-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="5d6de-244">Aan de slag met Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="5d6de-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
