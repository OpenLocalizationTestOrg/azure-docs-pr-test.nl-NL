---
title: Data Lake Store Spark prestaties afstemmen richtlijnen aaaAzure | Microsoft Docs
description: Azure Data Lake Store Spark prestaties afstemmen richtlijnen
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: da1d172e9cb1199ad95605ea1718e78559f79650
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="d2cc8-103">Prestaties afstemmen richtlijnen voor Spark in HDInsight en Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="d2cc8-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="d2cc8-104">Wanneer op de prestaties van Spark afstemmen, moet u tooconsider Hallo aantal apps dat wordt uitgevoerd op uw cluster.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-104">When tuning performance on Spark, you need tooconsider hello number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="d2cc8-105">Standaard kunt u 4 uitvoeren apps gelijktijdig op uw HDI-cluster (Opmerking: Hallo standaardinstelling is onderwerp toochange).</span><span class="sxs-lookup"><span data-stu-id="d2cc8-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: hello default setting is subject toochange).</span></span>  <span data-ttu-id="d2cc8-106">Kunt u beslissen toouse minder apps zodat u kunt de standaardinstellingen Hallo overschrijven en meer van de cluster hello voor deze apps gebruiken.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-106">You may decide toouse fewer apps so you can override hello default settings and use more of hello cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="d2cc8-107">Vereisten</span><span class="sxs-lookup"><span data-stu-id="d2cc8-107">Prerequisites</span></span>

* <span data-ttu-id="d2cc8-108">**Een Azure-abonnement**.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-108">**An Azure subscription**.</span></span> <span data-ttu-id="d2cc8-109">Zie [Gratis proefversie van Azure ophalen](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="d2cc8-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="d2cc8-110">**Een Azure Data Lake Store-account**.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="d2cc8-111">Voor instructies over het toocreate één, Zie [aan de slag met Azure Data Lake Store](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="d2cc8-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="d2cc8-112">**Azure HDInsight-cluster** met toegang tooa Data Lake Store-account.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-112">**Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="d2cc8-113">Zie [een HDInsight-cluster maken met Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d2cc8-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="d2cc8-114">Zorg ervoor dat u extern bureaublad inschakelen voor Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="d2cc8-115">**Spark-cluster uitgevoerd op Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="d2cc8-116">Zie voor meer informatie [gebruik HDInsight Spark-cluster tooanalyze gegevens in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="d2cc8-116">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="d2cc8-117">**Prestaties afstemmen richtlijnen op ADLS**.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="d2cc8-118">Raadpleeg voor algemene prestaties concepten, [Data Lake Store prestaties afstemmen richtlijnen](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="d2cc8-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="d2cc8-119">Parameters</span><span class="sxs-lookup"><span data-stu-id="d2cc8-119">Parameters</span></span>

<span data-ttu-id="d2cc8-120">Wanneer Spark van taken wordt uitgevoerd, moet u hier Hallo meest belangrijke instellingen die afgestemd tooincrease op de prestaties van ADLS worden kunnen zijn:</span><span class="sxs-lookup"><span data-stu-id="d2cc8-120">When running Spark jobs, here are hello most important settings that can be tuned tooincrease performance on ADLS:</span></span>

* <span data-ttu-id="d2cc8-121">**NUM Executor** -Hallo aantal gelijktijdige taken die kunnen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-121">**Num-executors** - hello number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="d2cc8-122">**Executor geheugen** -Hallo en de hoeveelheid geheugen tooeach executor toegewezen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-122">**Executor-memory** - hello amount of memory allocated tooeach executor.</span></span>

* <span data-ttu-id="d2cc8-123">**Executor kernen** -Hallo aantal kernen tooeach executor toegewezen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-123">**Executor-cores** - hello number of cores allocated tooeach executor.</span></span>                     

<span data-ttu-id="d2cc8-124">**NUM Executor** Num Executor stelt Hallo kunt u het maximum aantal taken dat parallel kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-124">**Num-executors** Num-executors will set hello maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="d2cc8-125">Hallo werkelijke aantal taken dat parallel kan worden uitgevoerd, wordt begrensd door Hallo geheugen en CPU-resources in uw cluster.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-125">hello actual number of tasks that can run in parallel is bounded by hello memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="d2cc8-126">**Executor geheugen** dit Hallo hoeveelheid geheugen die momenteel wordt gereserveerd tooeach executor is.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-126">**Executor-memory** This is hello amount of memory that is being allocated tooeach executor.</span></span>  <span data-ttu-id="d2cc8-127">Hallo geheugen dat nodig is voor elke executor is afhankelijk van het Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-127">hello memory needed for each executor is dependent on hello job.</span></span>  <span data-ttu-id="d2cc8-128">Voor complexe bewerkingen moet Hallo geheugen toobe hoger.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-128">For complex operations, hello memory needs toobe higher.</span></span>  <span data-ttu-id="d2cc8-129">Voor eenvoudige bewerkingen zoals lezen en schrijven geheugenvereisten niet lager zijn.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="d2cc8-130">Hallo hoeveelheid geheugen voor elke executor kan worden weergegeven in de Ambari.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-130">hello amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="d2cc8-131">In de Ambari, tooSpark navigeren en Hallo Configs tabblad bekijkt.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-131">In Ambari, navigate tooSpark and view hello Configs tab.</span></span>  

<span data-ttu-id="d2cc8-132">**Executor kernen** Hiermee stelt u Hallo hoeveelheid kernen per executor waarmee wordt bepaald Hallo aantal parallelle threads dat kan worden uitgevoerd per executor gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-132">**Executor-cores** This sets hello amount of cores used per executor, which determines hello number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="d2cc8-133">Bijvoorbeeld, als executor kernen = 2, en vervolgens elk executor 2 parallelle taken in Hallo executor kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in hello executor.</span></span>  <span data-ttu-id="d2cc8-134">Hallo executor-kernen nodig zijn afhankelijk van het Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-134">hello executor-cores needed will be dependent on hello job.</span></span>  <span data-ttu-id="d2cc8-135">I/o-intensief taken hoeven niet een grote hoeveelheid geheugen per taak, zodat elke executor meer parallelle taken kan verwerken.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="d2cc8-136">Standaard worden twee virtuele YARN cores gedefinieerd voor elke fysieke kernen bij het uitvoeren van Spark in HDInsight.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="d2cc8-137">Dit nummer biedt een goede balans van concurrecy en hoeveelheid context overschakelen vanuit meerdere threads.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="d2cc8-138">Richtlijnen</span><span class="sxs-lookup"><span data-stu-id="d2cc8-138">Guidance</span></span>

<span data-ttu-id="d2cc8-139">Tijdens het uitvoeren van Spark analytische workloads toowork met gegevens in Data Lake Store is het raadzaam dat u Hallo meest recente HDInsight versie tooget Hallo optimale prestaties met Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-139">While running Spark analytic workloads toowork with data in Data Lake Store, we recommend that you use hello most recent HDInsight version tooget hello best performance with Data Lake Store.</span></span> <span data-ttu-id="d2cc8-140">Wanneer de taak meer i/o-intensieve is, kunnen bepaalde parameters geconfigureerde tooimprove prestaties zijn.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-140">When your job is more I/O intensive, then certain parameters can be configured tooimprove performance.</span></span>  <span data-ttu-id="d2cc8-141">Azure Data Lake Store is een uiterst schaalbare opslag platform dat maximale doorvoer kan verwerken.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="d2cc8-142">Als Hallo taak hoofdzakelijk uit lees- of schrijfbewerkingen bestaat, kan vervolgens concurrency voor i/o-tooand van Azure Data Lake Store vergroot, prestaties.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-142">If hello job mainly consists of read or writes, then increasing concurrency for I/O tooand from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="d2cc8-143">Er zijn enkele algemene manieren tooincrease gelijktijdigheid van taken voor i/o-intensieve taken.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-143">There are a few general ways tooincrease concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="d2cc8-144">**Stap 1: Bepalen hoeveel apps worden uitgevoerd op uw cluster** – u moet weten hoe veel apps worden uitgevoerd op Hallo cluster Hallo huidige inclusief.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on hello cluster including hello current one.</span></span>  <span data-ttu-id="d2cc8-145">Hallo standaardwaarden voor elke Spark instelling wordt ervan uitgegaan dat er 4 apps tegelijkertijd worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-145">hello default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="d2cc8-146">Daarom hebt u alleen 25% van Hallo cluster beschikbaar is voor elke app.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-146">Therefore, you will only have 25% of hello cluster available for each app.</span></span>  <span data-ttu-id="d2cc8-147">tooget betere prestaties, kunt u Hallo standaardwaarden overschrijven door het aantal Executor hello te wijzigen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-147">tooget better performance, you can override hello defaults by changing hello number of executors.</span></span>  

<span data-ttu-id="d2cc8-148">**Stap 2: Stel executor geheugen** – hello eerst te beginnen tooset Hallo executor-geheugen is.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-148">**Step 2: Set executor-memory** – hello first thing tooset is hello executor-memory.</span></span>  <span data-ttu-id="d2cc8-149">Hallo geheugen zijn afhankelijk van het Hallo-taak dat u gaat toorun zijn.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-149">hello memory will be dependent on hello job that you are going toorun.</span></span>  <span data-ttu-id="d2cc8-150">U kunt gelijktijdigheid vergroten door minder geheugen per executor toewijzen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="d2cc8-151">Als u buiten geheugen uitzonderingen ziet wanneer u uw taak uitvoert, moet u Hallo-waarde voor deze parameter verhogen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-151">If you see out of memory exceptions when you run your job, then you should increase hello value for this parameter.</span></span>  <span data-ttu-id="d2cc8-152">Een alternatief is tooget meer geheugen met behulp van een cluster met hogere hoeveelheden geheugen of Hallo vergroten van het cluster.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-152">One alternative is tooget more memory by using a cluster that has higher amounts of memory or increasing hello size of your cluster.</span></span>  <span data-ttu-id="d2cc8-153">Meer geheugen toe te voegen meer Executor toobe gebruikt, wat betekent meer gelijktijdigheid van taken dat.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-153">More memory will enable more executors toobe used, which means more concurrency.</span></span>

<span data-ttu-id="d2cc8-154">**Stap 3: Stel executor kernen** – voor i/o-intensieve werkbelastingen die geen complexe bewerkingen, is het goed toostart met een groot aantal executor kernen tooincrease Hallo aantal parallelle taken per executor.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good toostart with a high number of executor-cores tooincrease hello number of parallel tasks per executor.</span></span>  <span data-ttu-id="d2cc8-155">Instelling executor kernen too4 is een goede start.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-155">Setting executor-cores too4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="d2cc8-156">Hallo executor kernen aantal te verhogen, krijgt u meer parallelle uitvoering zodat u met verschillende executor-kernen experimenteren kunt.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-156">Increasing hello number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="d2cc8-157">Voor taken die u meer complexe bewerkingen hebt, moet u het aantal kernen per executor Hallo verminderen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-157">For jobs that have more complex operations, you should reduce hello number of cores per executor.</span></span>  <span data-ttu-id="d2cc8-158">Als executor kernen kan hoger zijn dan 4, vervolgens garbagecollection inefficiënt en de prestaties nadelig beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="d2cc8-159">**Stap 4: YARN-geheugen van de cluster bepalen** – deze informatie is beschikbaar in Ambari.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="d2cc8-160">Navigeer tooYARN en Hallo Configs tabblad bekijkt.  Hallo YARN geheugen wordt weergegeven in dit venster.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-160">Navigate tooYARN and view hello Configs tab.  hello YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="d2cc8-161">Opmerking: wanneer u zich in Hallo-venster, u ziet ook YARN Hallo-container standaardgrootte.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-161">Note: while you are in hello window, you can also see hello default YARN container size.</span></span>  <span data-ttu-id="d2cc8-162">Hallo YARN container grootte is hetzelfde als geheugen per executor parameter Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-162">hello YARN container size is hello same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="d2cc8-163">**Stap 5: Num Executor berekenen**</span><span class="sxs-lookup"><span data-stu-id="d2cc8-163">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="d2cc8-164">**Geheugen-beperking berekenen** -Hallo num Executor parameter wordt begrensd door geheugen of CPU.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-164">**Calculate memory constraint** - hello num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="d2cc8-165">Hallo geheugen beperking wordt bepaald door de hoeveelheid beschikbare YARN-geheugen voor uw toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-165">hello memory constraint is determined by hello amount of available YARN memory for your application.</span></span>  <span data-ttu-id="d2cc8-166">U moet nemen totale YARN-geheugen en die wordt gedeeld door executor-geheugen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-166">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="d2cc8-167">Hallo-beperking moet ongedaan worden geschaald voor Hallo aantal apps, zodat we door het aantal apps Hallo delen toobe.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-167">hello constraint needs toobe de-scaled for hello number of apps so we divide by hello number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="d2cc8-168">**CPU-beperking berekenen** -Hallo CPU-beperking wordt berekend als het totale aantal virtuele kernen gedeeld door het aantal kernen per executor Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-168">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total virtual cores divided by hello number of cores per executor.</span></span>  <span data-ttu-id="d2cc8-169">Er zijn 2 virtuele kernen voor elke fysieke kernen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-169">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="d2cc8-170">Vergelijkbare toohello geheugen beperking, hebben we delen door het aantal apps Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-170">Similar toohello memory constraint, we have divide by hello number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="d2cc8-171">**Num Executor ingesteld** – Hallo num Executor parameter wordt bepaald door het duurt minimaal Hallo geheugen de beperkingen en Hallo CPU Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-171">**Set num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="d2cc8-172">Hoe hoger de waarde van getal Executor stijgt niet per se prestaties.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-172">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="d2cc8-173">U moet rekening houden met het toevoegen van meer Executor wordt toegevoegd extra overhead voor elke extra executor die u kunt mogelijk de prestaties verslechteren.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-173">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="d2cc8-174">NUM Executor wordt begrensd door Hallo clusterbronnen.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-174">Num-executors is bounded by hello cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="d2cc8-175">Voorbeeld van de berekening</span><span class="sxs-lookup"><span data-stu-id="d2cc8-175">Example Calculation</span></span>

<span data-ttu-id="d2cc8-176">Stel dat u hebt momenteel een cluster bestaan uit 8 D4v2 knooppunten dat actief 2 apps Hallo waaronder u één toorun gaat.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-176">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including hello one you are going toorun.</span></span>  

<span data-ttu-id="d2cc8-177">**Stap 1: Bepalen hoeveel apps worden uitgevoerd op uw cluster** – u weet dat u 2 hebt apps op uw cluster, inclusief Hallo een u toorun gaat.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-177">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including hello one you are going toorun.</span></span>  

<span data-ttu-id="d2cc8-178">**Stap 2: Stel executor geheugen** – voor dit voorbeeld we bepalen 6 GB executor-geheugen is geschikt voor i/o-intensieve taak.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-178">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="d2cc8-179">**Stap 3: Stel executor kernen** – omdat dit een i/o-intensieve taak is, kunnen we Hallo aantal kernen voor elke too4 executor ingesteld.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-179">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set hello number of cores for each executor too4.</span></span>  <span data-ttu-id="d2cc8-180">Instelling kernen per executor toolarger dan 4 garbagecollection verzameling problemen kan veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-180">Setting cores per executor toolarger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="d2cc8-181">**Stap 4: YARN-geheugen van de cluster bepalen** – We tooAmbari toofind uit dat elke D4v2 25 GB geheugen YARN heeft navigeren.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-181">**Step 4: Determine amount of YARN memory in cluster** – We navigate tooAmbari toofind out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="d2cc8-182">Aangezien er 8 knooppunten, kan geheugen YARN Hallo 8 wordt vermenigvuldigd.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-182">Since there are 8 nodes, hello available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="d2cc8-183">**Stap 5: Berekenen num Executor** – Hallo num Executor parameter wordt bepaald door het duurt minimaal Hallo geheugen de beperkingen en Hallo CPU gedeeld door Hallo Hallo # van apps die worden uitgevoerd op Spark.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-183">**Step 5: Calculate num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint divided by hello # of apps running on Spark.</span></span>    

<span data-ttu-id="d2cc8-184">**Geheugen-beperking berekenen** – Hallo geheugen beperking wordt berekend als Hallo totale YARN geheugen gedeeld door Hallo geheugen per executor.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-184">**Calculate memory constraint** – hello memory constraint is calculated as hello total YARN memory divided by hello memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="d2cc8-185">**CPU-beperking berekenen** -Hallo CPU-beperking wordt berekend als totale yarn kernen gedeeld door het aantal kernen per executor Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2cc8-185">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total yarn cores divided by hello number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="d2cc8-186">**Set num-Executor**</span><span class="sxs-lookup"><span data-stu-id="d2cc8-186">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

