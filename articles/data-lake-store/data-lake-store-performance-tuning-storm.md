---
title: aaaAzure Data Lake Store Storm prestaties afstemmen richtlijnen | Microsoft Docs
description: Azure Data Lake Store Storm prestaties afstemmen richtlijnen
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: 5412fd46cf2373f5877030913df4fe1fc6f5473a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-storm-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="b073b-103">Prestaties afstemmen richtlijnen voor Storm op HDInsight en Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b073b-103">Performance tuning guidance for Storm on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="b073b-104">Begrijpen factoren Hallo die u overwegen moeten wanneer u Hallo prestaties van een Azure-Storm-topologie afstemmen.</span><span class="sxs-lookup"><span data-stu-id="b073b-104">Understand hello factors that should be considered when you tune hello performance of an Azure Storm topology.</span></span> <span data-ttu-id="b073b-105">Bijvoorbeeld, is het belangrijk toounderstand Hallo kenmerken van Hallo-werk dat door Hallo spouts en Hallo bolts (of werk Hallo is voor i/o- of geheugenintensief).</span><span class="sxs-lookup"><span data-stu-id="b073b-105">For example, it's important toounderstand hello characteristics of hello work done by hello spouts and hello bolts (whether hello work is I/O or memory intensive).</span></span> <span data-ttu-id="b073b-106">In dit artikel bevat informatie over een reeks prestaties afstemmen richtlijnen over het oplossen van veelvoorkomende problemen.</span><span class="sxs-lookup"><span data-stu-id="b073b-106">This article covers a range of performance tuning guidelines, including troubleshooting common issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b073b-107">Vereisten</span><span class="sxs-lookup"><span data-stu-id="b073b-107">Prerequisites</span></span>

* <span data-ttu-id="b073b-108">**Een Azure-abonnement**.</span><span class="sxs-lookup"><span data-stu-id="b073b-108">**An Azure subscription**.</span></span> <span data-ttu-id="b073b-109">Zie [Gratis proefversie van Azure ophalen](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="b073b-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="b073b-110">**Een Azure Data Lake Store-account**.</span><span class="sxs-lookup"><span data-stu-id="b073b-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="b073b-111">Voor instructies over het toocreate één, Zie [aan de slag met Azure Data Lake Store](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b073b-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md).</span></span>
* <span data-ttu-id="b073b-112">**Een Azure HDInsight-cluster** met toegang tooa Data Lake Store-account.</span><span class="sxs-lookup"><span data-stu-id="b073b-112">**An Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="b073b-113">Zie [een HDInsight-cluster maken met Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b073b-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="b073b-114">Zorg ervoor dat u extern bureaublad inschakelen voor Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="b073b-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="b073b-115">**Een Storm-cluster op Data Lake Store met**.</span><span class="sxs-lookup"><span data-stu-id="b073b-115">**Running a Storm cluster on Data Lake Store**.</span></span> <span data-ttu-id="b073b-116">Zie voor meer informatie [Storm op HDInsight](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-storm-overview).</span><span class="sxs-lookup"><span data-stu-id="b073b-116">For more information, see [Storm on HDInsight](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-storm-overview).</span></span>
* <span data-ttu-id="b073b-117">**Prestaties afstemmen richtlijnen voor het Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="b073b-117">**Performance tuning guidelines on Data Lake Store**.</span></span>  <span data-ttu-id="b073b-118">Raadpleeg voor algemene prestaties concepten, [Data Lake Store prestaties afstemmen richtlijnen](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance).</span><span class="sxs-lookup"><span data-stu-id="b073b-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance).</span></span>  

## <a name="tune-hello-parallelism-of-hello-topology"></a><span data-ttu-id="b073b-119">Hallo parallelle uitvoering van de topologie Hallo afstemmen</span><span class="sxs-lookup"><span data-stu-id="b073b-119">Tune hello parallelism of hello topology</span></span>

<span data-ttu-id="b073b-120">Mogelijk kunnen tooimprove prestaties door toenemende Hallo gelijktijdigheid van Hallo i/o-tooand van Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b073b-120">You might be able tooimprove performance by increasing hello concurrency of hello I/O tooand from Data Lake Store.</span></span> <span data-ttu-id="b073b-121">Een Storm-topologie bevat een set met configuraties die Hallo parallelle uitvoering bepalen:</span><span class="sxs-lookup"><span data-stu-id="b073b-121">A Storm topology has a set of configurations that determine hello parallelism:</span></span>
* <span data-ttu-id="b073b-122">Het aantal werkprocessen (Hallo werknemers worden evenredig verdeeld over Hallo VM's).</span><span class="sxs-lookup"><span data-stu-id="b073b-122">Number of worker processes (hello workers are evenly distributed across hello VMs).</span></span>
* <span data-ttu-id="b073b-123">Aantal spout executor exemplaren.</span><span class="sxs-lookup"><span data-stu-id="b073b-123">Number of spout executor instances.</span></span>
* <span data-ttu-id="b073b-124">Aantal bolt executor exemplaren.</span><span class="sxs-lookup"><span data-stu-id="b073b-124">Number of bolt executor instances.</span></span>
* <span data-ttu-id="b073b-125">Aantal spout taken.</span><span class="sxs-lookup"><span data-stu-id="b073b-125">Number of spout tasks.</span></span>
* <span data-ttu-id="b073b-126">Het aantal taken dat bolt.</span><span class="sxs-lookup"><span data-stu-id="b073b-126">Number of bolt tasks.</span></span>

<span data-ttu-id="b073b-127">Denk bijvoorbeeld op een cluster met 4 VM's en 4 werkprocessen, 32 spout Executor en 32 spout taken en 256 bolt Executor en 512 bolt taken, Hallo volgende:</span><span class="sxs-lookup"><span data-stu-id="b073b-127">For example, on a cluster with 4 VMs and 4 worker processes, 32 spout executors and 32 spout tasks, and 256 bolt executors and 512 bolt tasks, consider hello following:</span></span>

<span data-ttu-id="b073b-128">Elke supervisor, dat een werkrolknooppunt is, heeft één werknemer proces van de virtuele machine (JVM) Java.</span><span class="sxs-lookup"><span data-stu-id="b073b-128">Each supervisor, which is a worker node, has a single worker Java virtual machine (JVM) process.</span></span> <span data-ttu-id="b073b-129">Dit proces JVM beheert 4 spout threads en 64 bolt threads.</span><span class="sxs-lookup"><span data-stu-id="b073b-129">This JVM process manages 4 spout threads and 64 bolt threads.</span></span> <span data-ttu-id="b073b-130">Binnen elke thread worden taken worden opeenvolgend uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b073b-130">Within each thread, tasks are run sequentially.</span></span> <span data-ttu-id="b073b-131">Elke thread spout is 1 taak met Hallo voorafgaand aan de configuratie, en elke thread bolt 2 taken heeft.</span><span class="sxs-lookup"><span data-stu-id="b073b-131">With hello preceding configuration, each spout thread has 1 task, and each bolt thread has 2 tasks.</span></span>

<span data-ttu-id="b073b-132">In Storm, hier verschillende onderdelen die zijn betrokken zijn hello en hoe ze invloed hebben op Hallo niveau van parallelle uitvoering die u hebt:</span><span class="sxs-lookup"><span data-stu-id="b073b-132">In Storm, here are hello various components involved, and how they affect hello level of parallelism you have:</span></span>
* <span data-ttu-id="b073b-133">Hallo-hoofdknooppunt (aangeroepen Nimbus in Storm) is gebruikte toosubmit en beheren van taken.</span><span class="sxs-lookup"><span data-stu-id="b073b-133">hello head node (called Nimbus in Storm) is used toosubmit and manage jobs.</span></span> <span data-ttu-id="b073b-134">Deze knooppunten hebben geen invloed op Hallo mate van parallelle uitvoering.</span><span class="sxs-lookup"><span data-stu-id="b073b-134">These nodes have no impact on hello degree of parallelism.</span></span>
* <span data-ttu-id="b073b-135">Hallo supervisor knooppunten.</span><span class="sxs-lookup"><span data-stu-id="b073b-135">hello supervisor nodes.</span></span> <span data-ttu-id="b073b-136">In HDInsight, komt dit overeen tooa werkrolknooppunt Azure VM.</span><span class="sxs-lookup"><span data-stu-id="b073b-136">In HDInsight, this corresponds tooa worker node Azure VM.</span></span>
* <span data-ttu-id="b073b-137">Hallo worker taken zijn Storm processen in Hallo virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="b073b-137">hello worker tasks are Storm processes running in hello VMs.</span></span> <span data-ttu-id="b073b-138">Elke taak worker correspondeert tooa JVM-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="b073b-138">Each worker task corresponds tooa JVM instance.</span></span> <span data-ttu-id="b073b-139">Storm distribueert Hallo-nummer van werkprocessen u toohello worker-knooppunten opgeven zo gelijkmatig mogelijk.</span><span class="sxs-lookup"><span data-stu-id="b073b-139">Storm distributes hello number of worker processes you specify toohello worker nodes as evenly as possible.</span></span>
* <span data-ttu-id="b073b-140">Spout en Bolts executor-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="b073b-140">Spout and bolt executor instances.</span></span> <span data-ttu-id="b073b-141">Elk exemplaar executor komt overeen tooa thread is uitgevoerd binnen Hallo werknemers (JVMs).</span><span class="sxs-lookup"><span data-stu-id="b073b-141">Each executor instance corresponds tooa thread running within hello workers (JVMs).</span></span>
* <span data-ttu-id="b073b-142">Storm-taken.</span><span class="sxs-lookup"><span data-stu-id="b073b-142">Storm tasks.</span></span> <span data-ttu-id="b073b-143">Dit zijn logische taken dat elk van deze threads uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b073b-143">These are logical tasks that each of these threads run.</span></span> <span data-ttu-id="b073b-144">Hierdoor niet gewijzigd Hallo van parallelle uitvoering, zodat u evalueren moet als u meerdere taken per executor of niet nodig.</span><span class="sxs-lookup"><span data-stu-id="b073b-144">This does not change hello level of parallelism, so you should evaluate if you need multiple tasks per executor or not.</span></span>

### <a name="get-hello-best-performance-from-data-lake-store"></a><span data-ttu-id="b073b-145">De beste prestaties Hallo ophalen uit Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b073b-145">Get hello best performance from Data Lake Store</span></span>

<span data-ttu-id="b073b-146">Als u werkt met Data Lake Store, krijgt u de beste prestaties Hallo als u het volgende Hallo:</span><span class="sxs-lookup"><span data-stu-id="b073b-146">When working with Data Lake Store, you get hello best performance if you do hello following:</span></span>
* <span data-ttu-id="b073b-147">Coalesce uw kleine voegt in grotere (bij voorkeur 4 MB).</span><span class="sxs-lookup"><span data-stu-id="b073b-147">Coalesce your small appends into larger sizes (ideally 4 MB).</span></span>
* <span data-ttu-id="b073b-148">Als veel gelijktijdige aanvragen, zoals u kunt doen.</span><span class="sxs-lookup"><span data-stu-id="b073b-148">Do as many concurrent requests as you can.</span></span> <span data-ttu-id="b073b-149">Omdat elke thread bolt blokkerende leest doet, wilt u toohave ergens in Hallo bereik van 8-12-threads per core.</span><span class="sxs-lookup"><span data-stu-id="b073b-149">Because each bolt thread is doing blocking reads, you want toohave somewhere in hello range of 8-12 threads per core.</span></span> <span data-ttu-id="b073b-150">Dit houdt Hallo NIC en Hallo CPU goed worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="b073b-150">This keeps hello NIC and hello CPU well utilized.</span></span> <span data-ttu-id="b073b-151">Een grotere virtuele machine kunt meer gelijktijdige aanvragen.</span><span class="sxs-lookup"><span data-stu-id="b073b-151">A larger VM enables more concurrent requests.</span></span>  

### <a name="example-topology"></a><span data-ttu-id="b073b-152">Voorbeeldtopologie</span><span class="sxs-lookup"><span data-stu-id="b073b-152">Example topology</span></span>

<span data-ttu-id="b073b-153">Stel dat u hebt een 8 worker-knooppunten met een D13v2 Azure VM.</span><span class="sxs-lookup"><span data-stu-id="b073b-153">Let’s assume you have an 8 worker node cluster with a D13v2 Azure VM.</span></span> <span data-ttu-id="b073b-154">Deze VM is 8 kernen, dus tussen Hallo 8 worker-knooppunten, hebt u de 64-totaal aantal kernen.</span><span class="sxs-lookup"><span data-stu-id="b073b-154">This VM has 8 cores, so among hello 8 worker nodes, you have 64 total cores.</span></span>

<span data-ttu-id="b073b-155">Stel, dat we 8 bolt threads per core doen.</span><span class="sxs-lookup"><span data-stu-id="b073b-155">Let’s say we do 8 bolt threads per core.</span></span> <span data-ttu-id="b073b-156">Gegeven 64 kernen betekent dit dat we willen 512 totale bolt executor exemplaren (dat wil zeggen, threads).</span><span class="sxs-lookup"><span data-stu-id="b073b-156">Given 64 cores, that means we want 512 total bolt executor instances (that is, threads).</span></span> <span data-ttu-id="b073b-157">Stel dat in dit geval we beginnen met een JVM per VM en hoofdzakelijk gebruiken Hallo thread gelijktijdigheid binnen Hallo JVM tooachieve gelijktijdigheid van taken.</span><span class="sxs-lookup"><span data-stu-id="b073b-157">In this case, let’s say we start with one JVM per VM, and mainly use hello thread concurrency within hello JVM tooachieve concurrency.</span></span> <span data-ttu-id="b073b-158">Dit betekent dat moet 8 worker-taken (één per virtuele machine van Azure) en 512 bolt Executor.</span><span class="sxs-lookup"><span data-stu-id="b073b-158">That means we need 8 worker tasks (one per Azure VM), and 512 bolt executors.</span></span> <span data-ttu-id="b073b-159">In deze configuratie probeert Storm toodistribute de werknemers Hallo gelijkmatig over worker-knooppunten (ook wel bekend als supervisor knooppunten), zodat elk werkrolknooppunt 1 JVM.</span><span class="sxs-lookup"><span data-stu-id="b073b-159">Given this configuration, Storm tries toodistribute hello workers evenly across worker nodes (also known as supervisor nodes), giving each worker node 1 JVM.</span></span> <span data-ttu-id="b073b-160">Nu binnen Hallo toezichthouders, Storm toodistribute Hallo Executor gelijkmatig tussen toezichthouders probeert, threads geeft elke supervisor (dat wil zeggen, JVM) 8 elk.</span><span class="sxs-lookup"><span data-stu-id="b073b-160">Now within hello supervisors, Storm tries toodistribute hello executors evenly between supervisors, giving each supervisor (that is, JVM) 8 threads each.</span></span>

## <a name="tune-additional-parameters"></a><span data-ttu-id="b073b-161">Extra parameters optimaliseren</span><span class="sxs-lookup"><span data-stu-id="b073b-161">Tune additional parameters</span></span>
<span data-ttu-id="b073b-162">Nadat u de basistopologie Hallo hebt, kunt u overwegen of u wilt dat tootweak Hallo parameters:</span><span class="sxs-lookup"><span data-stu-id="b073b-162">After you have hello basic topology, you can consider whether you want tootweak any of hello parameters:</span></span>
* <span data-ttu-id="b073b-163">**Aantal JVMs per werkrolknooppunt.**</span><span class="sxs-lookup"><span data-stu-id="b073b-163">**Number of JVMs per worker node.**</span></span> <span data-ttu-id="b073b-164">Als er een grote hoeveelheden gegevensstructuur (bijvoorbeeld een opzoektabel) is een afzonderlijk exemplaar in die u als host fungeren in elke JVM-geheugen vereist.</span><span class="sxs-lookup"><span data-stu-id="b073b-164">If you have a large data structure (for example, a lookup table) that you host in memory, each JVM requires a separate copy.</span></span> <span data-ttu-id="b073b-165">U kunt ook kunt u Hallo gegevensstructuur in veel threads hebt u minder JVMs.</span><span class="sxs-lookup"><span data-stu-id="b073b-165">Alternatively, you can use hello data structure across many threads if you have fewer JVMs.</span></span> <span data-ttu-id="b073b-166">Voor Hallo bolt van i/o maakt het aantal JVMs Hallo geen zoveel mogelijk van een verschil als het aantal threads dat is toegevoegd via deze JVMs Hallo.</span><span class="sxs-lookup"><span data-stu-id="b073b-166">For hello bolt’s I/O, hello number of JVMs does not make as much of a difference as hello number of threads added across those JVMs.</span></span> <span data-ttu-id="b073b-167">Eenvoud, is het een goed idee toohave een JVM per worker.</span><span class="sxs-lookup"><span data-stu-id="b073b-167">For simplicity, it's a good idea toohave one JVM per worker.</span></span> <span data-ttu-id="b073b-168">Afhankelijk van wat uw bolt doet of welke toepassingen u verwerking vereist, hoewel u toochange dit nummer wellicht.</span><span class="sxs-lookup"><span data-stu-id="b073b-168">Depending on what your bolt is doing or what application processing you require, though, you may need toochange this number.</span></span>
* <span data-ttu-id="b073b-169">**Het aantal spout Executor.**</span><span class="sxs-lookup"><span data-stu-id="b073b-169">**Number of spout executors.**</span></span> <span data-ttu-id="b073b-170">Omdat hello voorgaande voorbeeld bolts gebruikt voor het schrijven van tooData Lake Store, wordt het aantal spouts Hallo is niet rechtstreeks relevante toohello bolt prestaties.</span><span class="sxs-lookup"><span data-stu-id="b073b-170">Because hello preceding example uses bolts for writing tooData Lake Store, hello number of spouts is not directly relevant toohello bolt performance.</span></span> <span data-ttu-id="b073b-171">Echter, afhankelijk van Hallo hoeveelheid verwerking of i/o-gebeurt er in Hallo spout, is het een goed idee spouts tootune hello voor de beste prestaties.</span><span class="sxs-lookup"><span data-stu-id="b073b-171">However, depending on hello amount of processing or I/O happening in hello spout, it's a good idea tootune hello spouts for best performance.</span></span> <span data-ttu-id="b073b-172">Zorg ervoor dat er voldoende spouts toobe kunnen tookeep Hallo bolts bezet.</span><span class="sxs-lookup"><span data-stu-id="b073b-172">Ensure that you have enough spouts toobe able tookeep hello bolts busy.</span></span> <span data-ttu-id="b073b-173">Hallo uitvoer frequenties van Hallo spouts moeten overeenkomen met de Hallo doorvoer van Hallo bolts.</span><span class="sxs-lookup"><span data-stu-id="b073b-173">hello output rates of hello spouts should match hello throughput of hello bolts.</span></span> <span data-ttu-id="b073b-174">Hallo werkelijke configuratie, is afhankelijk van Hallo spout.</span><span class="sxs-lookup"><span data-stu-id="b073b-174">hello actual configuration depends on hello spout.</span></span>
* <span data-ttu-id="b073b-175">**Het aantal taken.**</span><span class="sxs-lookup"><span data-stu-id="b073b-175">**Number of tasks.**</span></span> <span data-ttu-id="b073b-176">Elke bolt wordt uitgevoerd met één thread.</span><span class="sxs-lookup"><span data-stu-id="b073b-176">Each bolt runs as a single thread.</span></span> <span data-ttu-id="b073b-177">Extra taken per bolt bieden niet extra gelijktijdigheid van taken.</span><span class="sxs-lookup"><span data-stu-id="b073b-177">Additional tasks per bolt don't provide any additional concurrency.</span></span> <span data-ttu-id="b073b-178">Hallo enige keer dat ze van het voordeel zijn is als het proces van het Hallo-tuple zijn bevestigd dat een groot deel van uw uitvoeringstijd bolt.</span><span class="sxs-lookup"><span data-stu-id="b073b-178">hello only time they are of benefit is if your process of acknowledging hello tuple takes a large proportion of your bolt execution time.</span></span> <span data-ttu-id="b073b-179">Het is een goed idee toogroup die veel tuples in een grotere toevoegen voordat u een bevestiging vanuit Hallo bolt verzenden.</span><span class="sxs-lookup"><span data-stu-id="b073b-179">It's a good idea toogroup many tuples into a larger append before you send an acknowledgement from hello bolt.</span></span> <span data-ttu-id="b073b-180">In de meeste gevallen dus bieden meerdere taken geen extra voordelen.</span><span class="sxs-lookup"><span data-stu-id="b073b-180">So, in most cases, multiple tasks provide no additional benefit.</span></span>
* <span data-ttu-id="b073b-181">**Lokaal of groepering in willekeurige volgorde.**</span><span class="sxs-lookup"><span data-stu-id="b073b-181">**Local or shuffle grouping.**</span></span> <span data-ttu-id="b073b-182">Wanneer deze instelling is ingeschakeld, tuples toobolts binnen Hallo worden verzonden hetzelfde werkproces.</span><span class="sxs-lookup"><span data-stu-id="b073b-182">When this setting is enabled, tuples are sent toobolts within hello same worker process.</span></span> <span data-ttu-id="b073b-183">Dit vermindert tussen processen aanroepen voor communicatie en netwerken.</span><span class="sxs-lookup"><span data-stu-id="b073b-183">This reduces inter-process communication and network calls.</span></span> <span data-ttu-id="b073b-184">Dit wordt aanbevolen voor de meeste topologieën.</span><span class="sxs-lookup"><span data-stu-id="b073b-184">This is recommended for most topologies.</span></span>

<span data-ttu-id="b073b-185">Dit eenvoudige scenario is een goed uitgangspunt.</span><span class="sxs-lookup"><span data-stu-id="b073b-185">This basic scenario is a good starting point.</span></span> <span data-ttu-id="b073b-186">Testen door uw eigen gegevens tootweak hello voorafgaand aan parameters tooachieve optimale prestaties.</span><span class="sxs-lookup"><span data-stu-id="b073b-186">Test with your own data tootweak hello preceding parameters tooachieve optimal performance.</span></span>

## <a name="tune-hello-spout"></a><span data-ttu-id="b073b-187">Hallo spout afstemmen</span><span class="sxs-lookup"><span data-stu-id="b073b-187">Tune hello spout</span></span>

<span data-ttu-id="b073b-188">Hallo instellingen tootune hello spout te volgen, kunt u wijzigen.</span><span class="sxs-lookup"><span data-stu-id="b073b-188">You can modify hello following settings tootune hello spout.</span></span>

- <span data-ttu-id="b073b-189">**Tuple time-out: topology.message.timeout.secs**.</span><span class="sxs-lookup"><span data-stu-id="b073b-189">**Tuple timeout: topology.message.timeout.secs**.</span></span> <span data-ttu-id="b073b-190">Deze instelling bepaalt Hallo hoeveelheid duurt voordat een bericht toocomplete en bevestiging, ontvangen voordat het wordt beschouwd als mislukt.</span><span class="sxs-lookup"><span data-stu-id="b073b-190">This setting determines hello amount of time a message takes toocomplete, and receive acknowledgement, before it is considered failed.</span></span>

- <span data-ttu-id="b073b-191">**Maximaal geheugen per werkproces: worker.childopts**.</span><span class="sxs-lookup"><span data-stu-id="b073b-191">**Max memory per worker process: worker.childopts**.</span></span> <span data-ttu-id="b073b-192">Deze instelling kunt u aanvullende opdrachtregelparameters toohello Java werknemers opgeven.</span><span class="sxs-lookup"><span data-stu-id="b073b-192">This setting lets you specify additional command-line parameters toohello Java workers.</span></span> <span data-ttu-id="b073b-193">Hallo meest gebruikte instelling hier is XmX waarmee wordt bepaald Hallo maximaal geheugen toegewezen tooa JVM van heap.</span><span class="sxs-lookup"><span data-stu-id="b073b-193">hello most commonly used setting here is XmX, which determines hello maximum memory allocated tooa JVM’s heap.</span></span>

- <span data-ttu-id="b073b-194">**Maximum aantal spout in behandeling: topology.max.spout.pending**.</span><span class="sxs-lookup"><span data-stu-id="b073b-194">**Max spout pending: topology.max.spout.pending**.</span></span> <span data-ttu-id="b073b-195">Deze instelling bepaalt het aantal tuples die in vlucht (nog niet op alle knooppunten op Hallo topologie bevestigd) per thread spout op elk gewenst moment Hallo.</span><span class="sxs-lookup"><span data-stu-id="b073b-195">This setting determines hello number of tuples that can in be flight (not yet acknowledged at all nodes in hello topology) per spout thread at any time.</span></span>

 <span data-ttu-id="b073b-196">Een goede berekening toodo is tooestimate Hallo grootte van elk van uw tuples.</span><span class="sxs-lookup"><span data-stu-id="b073b-196">A good calculation toodo is tooestimate hello size of each of your tuples.</span></span> <span data-ttu-id="b073b-197">Vervolgens bepalen hoeveel geheugen een spout thread heeft.</span><span class="sxs-lookup"><span data-stu-id="b073b-197">Then figure out how much memory one spout thread has.</span></span> <span data-ttu-id="b073b-198">Hallo Totaal geheugen toegewezen tooa thread, gedeeld door deze waarde geeft de bovengrens Hallo voor Hallo max spout in behandeling zijnde parameter.</span><span class="sxs-lookup"><span data-stu-id="b073b-198">hello total memory allocated tooa thread, divided by this value, should give you hello upper bound for hello max spout pending parameter.</span></span>

## <a name="tune-hello-bolt"></a><span data-ttu-id="b073b-199">Hallo bolt afstemmen</span><span class="sxs-lookup"><span data-stu-id="b073b-199">Tune hello bolt</span></span>
<span data-ttu-id="b073b-200">Wanneer u tooData Lake Store schrijft, een synchronisatiebeleid grootte (buffer aan clientzijde Hallo) ingesteld too4 MB.</span><span class="sxs-lookup"><span data-stu-id="b073b-200">When you're writing tooData Lake Store, set a size sync policy (buffer on hello client side) too4 MB.</span></span> <span data-ttu-id="b073b-201">Een domeincontrollerlocaties leeg of hsync() wordt vervolgens alleen uitgevoerd wanneer de buffergrootte Hallo Hallo op deze waarde is.</span><span class="sxs-lookup"><span data-stu-id="b073b-201">A flushing or hsync() is then performed only when hello buffer size is hello at this value.</span></span> <span data-ttu-id="b073b-202">Hallo Data Lake Store-stuurprogramma op Hallo worker VM komt automatisch deze buffering, tenzij u expliciet een hsync() uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="b073b-202">hello Data Lake Store driver on hello worker VM automatically does this buffering, unless you explicitly perform an hsync().</span></span>

<span data-ttu-id="b073b-203">Hallo default Data Lake Store Storm bolt heeft een grootte sync Beleidsparameter (fileBufferSize), die gebruikt tootune worden kan deze parameter.</span><span class="sxs-lookup"><span data-stu-id="b073b-203">hello default Data Lake Store Storm bolt has a size sync policy parameter (fileBufferSize) that can be used tootune this parameter.</span></span>

<span data-ttu-id="b073b-204">In de I/O-intensieve topologieën, is het een goed idee toohave elke thread bolt tooits eigen bestands- en tooset een bestand rotatie-beleid schrijven (fileRotationSize).</span><span class="sxs-lookup"><span data-stu-id="b073b-204">In I/O-intensive topologies, it's a good idea toohave each bolt thread write tooits own file, and tooset a file rotation policy (fileRotationSize).</span></span> <span data-ttu-id="b073b-205">Hallo-bestand een bepaalde grootte bereikt, Hallo stroom wordt automatisch gewist als een nieuw bestand wordt geschreven naar.</span><span class="sxs-lookup"><span data-stu-id="b073b-205">When hello file reaches a certain size, hello stream is automatically flushed and a new file is written to.</span></span> <span data-ttu-id="b073b-206">Hallo aanbevolen grootte voor rotatie is 1 GB.</span><span class="sxs-lookup"><span data-stu-id="b073b-206">hello recommended file size for rotation is 1 GB.</span></span>

### <a name="handle-tuple-data"></a><span data-ttu-id="b073b-207">Tuple gegevens verwerken</span><span class="sxs-lookup"><span data-stu-id="b073b-207">Handle tuple data</span></span>

<span data-ttu-id="b073b-208">In de Storm bevat een spout op tooa tuple totdat het expliciet is bevestigd door Hallo bolt.</span><span class="sxs-lookup"><span data-stu-id="b073b-208">In Storm, a spout holds on tooa tuple until it is explicitly acknowledged by hello bolt.</span></span> <span data-ttu-id="b073b-209">Als een tuple door Hallo bolt is gelezen, maar is niet zijn bevestigd, Hallo spout mogelijk niet hebben permanent opgeslagen in Data Lake Store back-end.</span><span class="sxs-lookup"><span data-stu-id="b073b-209">If a tuple has been read by hello bolt but has not been acknowledged yet, hello spout might not have persisted into Data Lake Store back end.</span></span> <span data-ttu-id="b073b-210">Nadat een tuple is bevestigd, Hallo spout persistentie kan worden gegarandeerd door Hallo bolt en kunt Hallo brongegevens vervolgens verwijderen uit welke bron is het lezen van.</span><span class="sxs-lookup"><span data-stu-id="b073b-210">After a tuple is acknowledged, hello spout can be guaranteed persistence by hello bolt, and can then delete hello source data from whatever source it is reading from.</span></span>  

<span data-ttu-id="b073b-211">Voor optimale prestaties op Data Lake Store, hebt u Hallo bolt buffer is 4 MB aan gegevens van de tuple.</span><span class="sxs-lookup"><span data-stu-id="b073b-211">For best performance on Data Lake Store, have hello bolt buffer 4 MB of tuple data.</span></span> <span data-ttu-id="b073b-212">Vervolgens schrijven toohello Data Lake Store weer beëindigen als één 4 MB geheugen schrijven.</span><span class="sxs-lookup"><span data-stu-id="b073b-212">Then write toohello Data Lake Store back end as one 4-MB write.</span></span> <span data-ttu-id="b073b-213">Nadat de Hallo gegevens zijn met succes geschreven toohello store (door de aanroepende hflush()) hello bolt kunt erken Hallo gegevens back toohello spout.</span><span class="sxs-lookup"><span data-stu-id="b073b-213">After hello data has been successfully written toohello store (by calling hflush()), hello bolt can acknowledge hello data back toohello spout.</span></span> <span data-ttu-id="b073b-214">Dit is wat voorbeeld Hallo Bolts opgegeven hier heeft.</span><span class="sxs-lookup"><span data-stu-id="b073b-214">This is what hello example bolt supplied here does.</span></span> <span data-ttu-id="b073b-215">Het is ook acceptabele toohold een groter aantal tuples voordat Hallo hflush() aanroep en Hallo tuples bevestigd.</span><span class="sxs-lookup"><span data-stu-id="b073b-215">It is also acceptable toohold a larger number of tuples before hello hflush() call is made and hello tuples acknowledged.</span></span> <span data-ttu-id="b073b-216">Dit verhoogt echter Hallo aantal tuples in vlucht dat Hallo spout toohold moet en daarom toeneemt Hallo per JVM vereiste hoeveelheid geheugen.</span><span class="sxs-lookup"><span data-stu-id="b073b-216">However, this increases hello number of tuples in flight that hello spout needs toohold, and therefore increases hello amount of memory required per JVM.</span></span>

> [!NOTE]
<span data-ttu-id="b073b-217">Toepassingen hebben een vereiste tooacknowledge tuples vaker (op gegevensgroottes minder dan 4 MB) om andere redenen voor slechte prestaties.</span><span class="sxs-lookup"><span data-stu-id="b073b-217">Applications might have a requirement tooacknowledge tuples more frequently (at data sizes less than 4 MB) for other non-performance reasons.</span></span> <span data-ttu-id="b073b-218">Echter, die invloed kunnen zijn op Hallo i/o doorvoer toohello opslag de back-end.</span><span class="sxs-lookup"><span data-stu-id="b073b-218">However, that might affect hello I/O throughput toohello storage back end.</span></span> <span data-ttu-id="b073b-219">Weeg zorgvuldig deze afweging tegen Hallo bolt van i/o-prestaties.</span><span class="sxs-lookup"><span data-stu-id="b073b-219">Carefully weigh this tradeoff against hello bolt’s I/O performance.</span></span>

<span data-ttu-id="b073b-220">Hallo frequentie van binnenkomst van tuples niet groot zodat Hallo 4 MB buffer een toofill lang duurt, dan kunt u dit door beperkende:</span><span class="sxs-lookup"><span data-stu-id="b073b-220">If hello incoming rate of tuples is not high, so hello 4-MB buffer takes a long time toofill, consider mitigating this by:</span></span>
* <span data-ttu-id="b073b-221">Minder buffers toofill vermindert het aantal bolts hello, dus er zijn.</span><span class="sxs-lookup"><span data-stu-id="b073b-221">Reducing hello number of bolts, so there are fewer buffers toofill.</span></span>
* <span data-ttu-id="b073b-222">Elke x leegmaakacties of elk y milliseconden met een beleid op basis van tijd of het aantal is gebaseerd, waarbij een hflush() is geactiveerd en Hallo tuples samengevoegd tot nu toe back zijn bevestigd.</span><span class="sxs-lookup"><span data-stu-id="b073b-222">Having a time-based or count-based policy, where an hflush() is triggered every x flushes or every y milliseconds, and hello tuples accumulated so far are acknowledged back.</span></span>

<span data-ttu-id="b073b-223">Houd er rekening mee dat Hallo doorvoer in dit geval lager is, maar met een langzame snelheid van gebeurtenissen, maximale doorvoer niet de grootste doelstelling Hallo toch is.</span><span class="sxs-lookup"><span data-stu-id="b073b-223">Note that hello throughput in this case is lower, but with a slow rate of events, maximum throughput is not hello biggest objective anyway.</span></span> <span data-ttu-id="b073b-224">Deze oplossingen te beperken Hallo totale tijd die het duurt voordat een tuple tooflow via toohello store.</span><span class="sxs-lookup"><span data-stu-id="b073b-224">These mitigations help you reduce hello total time that it takes for a tuple tooflow through toohello store.</span></span> <span data-ttu-id="b073b-225">Dit kan van belang als u wilt dat een realtime pijplijn zelfs met een snelheid van de lage gebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="b073b-225">This might matter if you want a real-time pipeline even with a low event rate.</span></span> <span data-ttu-id="b073b-226">Ook Opmerking Als uw tuple frequentie van binnenkomst laag is, aan te Hallo topology.message.timeout_secs parameter, passen moet zodat Hallo tuples geen time-out terwijl ze in de buffer opgeslagen of verwerkt.</span><span class="sxs-lookup"><span data-stu-id="b073b-226">Also note that if your incoming tuple rate is low, you should adjust hello topology.message.timeout_secs parameter, so hello tuples don’t time out while they are getting buffered or processed.</span></span>

## <a name="monitor-your-topology-in-storm"></a><span data-ttu-id="b073b-227">Uw Storm-topologie bewaken</span><span class="sxs-lookup"><span data-stu-id="b073b-227">Monitor your topology in Storm</span></span>  
<span data-ttu-id="b073b-228">Terwijl uw topologie wordt uitgevoerd, kunt u het bewaken in Hallo Storm-gebruikersinterface.</span><span class="sxs-lookup"><span data-stu-id="b073b-228">While your topology is running, you can monitor it in hello Storm user interface.</span></span> <span data-ttu-id="b073b-229">Hier volgen Hallo belangrijkste parameters toolook op:</span><span class="sxs-lookup"><span data-stu-id="b073b-229">Here are hello main parameters toolook at:</span></span>

* <span data-ttu-id="b073b-230">**Latentie van totale proces worden uitgevoerd.**</span><span class="sxs-lookup"><span data-stu-id="b073b-230">**Total process execution latency.**</span></span> <span data-ttu-id="b073b-231">Dit is de gemiddelde tijd Hallo tuple voor tuple toobe verzonden door Hallo spout duurt, verwerkt door de bolt hello en bevestigd.</span><span class="sxs-lookup"><span data-stu-id="b073b-231">This is hello average time one tuple takes toobe emitted by hello spout, processed by hello bolt, and acknowledged.</span></span>

* <span data-ttu-id="b073b-232">**Totaal aantal bolt proces latentie.**</span><span class="sxs-lookup"><span data-stu-id="b073b-232">**Total bolt process latency.**</span></span> <span data-ttu-id="b073b-233">Dit is Hallo van de gemiddelde tijd besteed aan het Hallo-tuple van Hallo bolt totdat het ontvangt een bevestiging.</span><span class="sxs-lookup"><span data-stu-id="b073b-233">This is hello average time spent by hello tuple at hello bolt until it receives an acknowledgement.</span></span>

* <span data-ttu-id="b073b-234">**Totaal aantal bolt uitvoeren latentie.**</span><span class="sxs-lookup"><span data-stu-id="b073b-234">**Total bolt execute latency.**</span></span> <span data-ttu-id="b073b-235">Dit is Hallo gemiddelde tijd besteed door Hallo bolt in Hallo methode uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="b073b-235">This is hello average time spent by hello bolt in hello execute method.</span></span>

* <span data-ttu-id="b073b-236">**Aantal fouten.**</span><span class="sxs-lookup"><span data-stu-id="b073b-236">**Number of failures.**</span></span> <span data-ttu-id="b073b-237">Dit verwijst aantal tuples die niet volledig verwerkt voordat ze time-out toobe toohello.</span><span class="sxs-lookup"><span data-stu-id="b073b-237">This refers toohello number of tuples that failed toobe fully processed before they timed out.</span></span>

* <span data-ttu-id="b073b-238">**De capaciteit.**</span><span class="sxs-lookup"><span data-stu-id="b073b-238">**Capacity.**</span></span> <span data-ttu-id="b073b-239">Dit is een meting van hoeveel van uw systeem is.</span><span class="sxs-lookup"><span data-stu-id="b073b-239">This is a measure of how busy your system is.</span></span> <span data-ttu-id="b073b-240">Als dit nummer 1 is, worden uw bolts snel ze kunnen werken.</span><span class="sxs-lookup"><span data-stu-id="b073b-240">If this number is 1, your bolts are working as fast as they can.</span></span> <span data-ttu-id="b073b-241">Als deze kleiner dan 1 is, verhoogt u Hallo parallelle uitvoering.</span><span class="sxs-lookup"><span data-stu-id="b073b-241">If it is less than 1, increase hello parallelism.</span></span> <span data-ttu-id="b073b-242">Als deze groter dan 1 is, verlaagt u Hallo parallelle uitvoering.</span><span class="sxs-lookup"><span data-stu-id="b073b-242">If it is greater than 1, reduce hello parallelism.</span></span>

## <a name="troubleshoot-common-problems"></a><span data-ttu-id="b073b-243">Algemene problemen</span><span class="sxs-lookup"><span data-stu-id="b073b-243">Troubleshoot common problems</span></span>
<span data-ttu-id="b073b-244">Hier volgen enkele algemene probleemoplossing-scenario's.</span><span class="sxs-lookup"><span data-stu-id="b073b-244">Here are a few common troubleshooting scenarios.</span></span>
* <span data-ttu-id="b073b-245">**Er zijn veel tuples time-out opgetreden.** Elk knooppunt in het Hallo-topologie toodetermine kijken waar Hallo knelpunt is.</span><span class="sxs-lookup"><span data-stu-id="b073b-245">**Many tuples are timing out.** Look at each node in hello topology toodetermine where hello bottleneck is.</span></span> <span data-ttu-id="b073b-246">Hallo meest voorkomende reden hiervoor is dat Hallo bolts niet kunnen tookeep up met Hallo spouts zijn.</span><span class="sxs-lookup"><span data-stu-id="b073b-246">hello most common reason for this is that hello bolts are not able tookeep up with hello spouts.</span></span> <span data-ttu-id="b073b-247">Dit leidt tootuples vertraging Hallo interne buffers tijdens het wachten op toobe verwerkt.</span><span class="sxs-lookup"><span data-stu-id="b073b-247">This leads tootuples clogging hello internal buffers while waiting toobe processed.</span></span> <span data-ttu-id="b073b-248">Overweeg het Hallo-time-outwaarde oplopende of aflopende volgorde van maximale spout Hallo in behandeling.</span><span class="sxs-lookup"><span data-stu-id="b073b-248">Consider increasing hello timeout value or decreasing hello max spout pending.</span></span>

* <span data-ttu-id="b073b-249">**Er is een latentie van hoge totale proces worden uitgevoerd, maar een proces bolt lage latentie.**</span><span class="sxs-lookup"><span data-stu-id="b073b-249">**There is a high total process execution latency, but a low bolt process latency.**</span></span> <span data-ttu-id="b073b-250">In dit geval is het mogelijk dat Hallo tuples worden niet wordt bevestigd snel genoeg.</span><span class="sxs-lookup"><span data-stu-id="b073b-250">In this case, it is possible that hello tuples are not being acknowledged fast enough.</span></span> <span data-ttu-id="b073b-251">Controleer of er een voldoende aantal acknowledgers zijn.</span><span class="sxs-lookup"><span data-stu-id="b073b-251">Check that there are a sufficient number of acknowledgers.</span></span> <span data-ttu-id="b073b-252">Een andere mogelijkheid is dat ze nog in de wachtrij hello te lang voordat Hallo bolts start deze worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="b073b-252">Another possibility is that they are waiting in hello queue for too long before hello bolts start processing them.</span></span> <span data-ttu-id="b073b-253">Hallo max spout in behandeling zijnde afnemen.</span><span class="sxs-lookup"><span data-stu-id="b073b-253">Decrease hello max spout pending.</span></span>

* <span data-ttu-id="b073b-254">**Er is een bolt hoge latentie uitvoeren.**</span><span class="sxs-lookup"><span data-stu-id="b073b-254">**There is a high bolt execute latency.**</span></span> <span data-ttu-id="b073b-255">Dit betekent dat Hallo execute() methode van uw bolt duurt te lang is.</span><span class="sxs-lookup"><span data-stu-id="b073b-255">This means that hello execute() method of your bolt is taking too long.</span></span> <span data-ttu-id="b073b-256">Hallo-code optimaliseren of bekijk schrijven grootten en gedrag leegmaken.</span><span class="sxs-lookup"><span data-stu-id="b073b-256">Optimize hello code, or look at write sizes and flush behavior.</span></span>

### <a name="data-lake-store-throttling"></a><span data-ttu-id="b073b-257">Beperking van Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b073b-257">Data Lake Store throttling</span></span>
<span data-ttu-id="b073b-258">Als u op Hallo limieten van de bandbreedte die worden geleverd door de Data Lake Store, kunt u taakfouten ziet.</span><span class="sxs-lookup"><span data-stu-id="b073b-258">If you hit hello limits of bandwidth provided by Data Lake Store, you might see task failures.</span></span> <span data-ttu-id="b073b-259">Controleer de logboeken van de taak voor de beperking van fouten.</span><span class="sxs-lookup"><span data-stu-id="b073b-259">Check task logs for throttling errors.</span></span> <span data-ttu-id="b073b-260">U kunt Hallo parallelle uitvoering verlagen door het vergroten van de container.</span><span class="sxs-lookup"><span data-stu-id="b073b-260">You can decrease hello parallelism by increasing container size.</span></span>    

<span data-ttu-id="b073b-261">toocheck als u ophalen beperkt, Hallo foutopsporing aan clientzijde Hallo logboekregistratie inschakelen:</span><span class="sxs-lookup"><span data-stu-id="b073b-261">toocheck if you are getting throttled, enable hello debug logging on hello client side:</span></span>

1. <span data-ttu-id="b073b-262">In **Ambari** > **Storm** > **Config** > **geavanceerde storm-worker-log4j**, wijzigen  **&lt;root niveau = 'info'&gt;**  te**&lt;root niveau = 'debug'&gt;**.</span><span class="sxs-lookup"><span data-stu-id="b073b-262">In **Ambari** > **Storm** > **Config** > **Advanced storm-worker-log4j**, change **&lt;root level="info"&gt;** too**&lt;root level=”debug”&gt;**.</span></span> <span data-ttu-id="b073b-263">Alle Hallo knooppunten/service Hallo configuratie tootake effect opnieuw starten.</span><span class="sxs-lookup"><span data-stu-id="b073b-263">Restart all hello nodes/service for hello configuration tootake effect.</span></span>
2. <span data-ttu-id="b073b-264">Monitor Hallo Storm-topologie logboeken op de worker-knooppunten (onder /var/log/storm/worker-artifacts /&lt;TopologyName&gt;/&lt;poort&gt;/worker.log) voor Data Lake Store uitzonderingen beperking.</span><span class="sxs-lookup"><span data-stu-id="b073b-264">Monitor hello Storm topology logs on worker nodes (under /var/log/storm/worker-artifacts/&lt;TopologyName&gt;/&lt;port&gt;/worker.log) for Data Lake Store throttling exceptions.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b073b-265">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="b073b-265">Next steps</span></span>
<span data-ttu-id="b073b-266">Aanvullende prestaties afstemmen voor Storm in kan worden verwezen [deze blog](https://blogs.msdn.microsoft.com/shanyu/2015/05/14/performance-tuning-for-hdinsight-storm-and-microsoft-azure-eventhubs/).</span><span class="sxs-lookup"><span data-stu-id="b073b-266">Additional performance tuning for Storm can be referenced in [this blog](https://blogs.msdn.microsoft.com/shanyu/2015/05/14/performance-tuning-for-hdinsight-storm-and-microsoft-azure-eventhubs/).</span></span>

<span data-ttu-id="b073b-267">Zie voor een toorun nog een voorbeeld [zo'n op GitHub](https://github.com/hdinsight/storm-performance-automation).</span><span class="sxs-lookup"><span data-stu-id="b073b-267">For an additional example toorun, see [this one on GitHub](https://github.com/hdinsight/storm-performance-automation).</span></span>
