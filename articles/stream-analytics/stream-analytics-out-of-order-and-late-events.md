---
title: Verwerken van gebeurtenis volgorde en lateness met Azure Stream Analytics | Microsoft Docs
description: Meer informatie over de werking van Stream Analytics met out volgorde of laat gebeurtenissen in gegevensstromen.
keywords: volgorde, laat, gebeurtenissen
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: a48e48c5fc65d0ffbb7c23f426a4b06dcd568821
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="30c74-104">Azure Stream Analytics volgorde gebeurtenisverwerking</span><span class="sxs-lookup"><span data-stu-id="30c74-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="30c74-105">Elke gebeurtenis is vastgelegd in een tijdelijke gegevensstroom van gebeurtenissen met de tijd dat de gebeurtenis is ontvangen.</span><span class="sxs-lookup"><span data-stu-id="30c74-105">In a temporal data stream of events, each event is recorded with the time that the event is received.</span></span> <span data-ttu-id="30c74-106">Een aantal voorwaarden kunnen ertoe leiden dat gebeurtenisstromen ontvangt u af en sommige gebeurtenissen in een andere volgorde dan waarop ze zijn verzonden.</span><span class="sxs-lookup"><span data-stu-id="30c74-106">Some conditions might cause event streams to occasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="30c74-107">Een eenvoudige TCP retransmit of zelfs een tijdsverschil tussen de verzendende apparaat en de ontvangende event hub kan mogelijk niet wilt dat dit gebeurt.</span><span class="sxs-lookup"><span data-stu-id="30c74-107">A simple TCP retransmit, or even a clock skew between the sending device and the receiving event hub might cause this to occur.</span></span> <span data-ttu-id="30c74-108">'Leestekens' gebeurtenissen worden ook toegevoegd aan de ontvangen gebeurtenisstromen om door te gaan van de tijd in het ontbreken van gebeurtenis ontvangsten.</span><span class="sxs-lookup"><span data-stu-id="30c74-108">“Punctuation” events also are added to received event streams, to advance the time in the absence of event arrivals.</span></span> <span data-ttu-id="30c74-109">Deze zijn nodig in scenario's zoals "Waarschuw mij een e-mail wanneer geen aanmeldingen uitgevoerd voor de 3 minuten."</span><span class="sxs-lookup"><span data-stu-id="30c74-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="30c74-110">Invoer stromen die zich niet in volgorde zijn:</span><span class="sxs-lookup"><span data-stu-id="30c74-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="30c74-111">Gesorteerd (en dus **vertraagd**).</span><span class="sxs-lookup"><span data-stu-id="30c74-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="30c74-112">Aangepast door het systeem volgens een door de gebruiker opgegeven beleid.</span><span class="sxs-lookup"><span data-stu-id="30c74-112">Adjusted by the system, according to a user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="30c74-113">Lateness tolerantie</span><span class="sxs-lookup"><span data-stu-id="30c74-113">Lateness tolerance</span></span>
<span data-ttu-id="30c74-114">Stream Analytics maximaal dit soort scenario's wordt toegestaan.</span><span class="sxs-lookup"><span data-stu-id="30c74-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="30c74-115">Stream Analytics heeft de verwerking van gebeurtenissen 'out volgorde' en 'late'.</span><span class="sxs-lookup"><span data-stu-id="30c74-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="30c74-116">Deze gebeurtenissen worden verwerkt in de volgende manieren:</span><span class="sxs-lookup"><span data-stu-id="30c74-116">It handles these events in the following ways:</span></span>

* <span data-ttu-id="30c74-117">Gebeurtenissen die volgorde maar binnen de tolerantie set binnenkomen zijn **opnieuw geordend door tijdstempel**.</span><span class="sxs-lookup"><span data-stu-id="30c74-117">Events that arrive out of order but within the set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="30c74-118">Gebeurtenissen die hoger is dan de tolerantie binnenkomen zijn **verwijderd of aangepast**.</span><span class="sxs-lookup"><span data-stu-id="30c74-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="30c74-119">**Aangepast**: aangepast, zodat deze lijkt te zijn ontvangen op de laatste toegestane tijd.</span><span class="sxs-lookup"><span data-stu-id="30c74-119">**Adjusted**: Adjusted to appear to have arrived at the latest acceptable time.</span></span>
    * <span data-ttu-id="30c74-120">**Verwijderd**: verwijderd.</span><span class="sxs-lookup"><span data-stu-id="30c74-120">**Dropped**: Discarded.</span></span>

![Stream Analytics gebeurtenisverwerking](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-the-number-of-out-of-order-events"></a><span data-ttu-id="30c74-122">Verminder het aantal out volgorde gebeurtenissen</span><span class="sxs-lookup"><span data-stu-id="30c74-122">Reduce the number of out-of-order events</span></span>

<span data-ttu-id="30c74-123">Omdat de Stream Analytics is een tijdelijke transformatie van toepassing bij de verwerking van inkomende gebeurtenissen (bijvoorbeeld voor functies in vensters of tijdelijke joins), worden binnenkomende gebeurtenissen in Stream Analytics gesorteerd op volgorde timestamp.</span><span class="sxs-lookup"><span data-stu-id="30c74-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="30c74-124">Wanneer het sleutelwoord 'tijdstempel door' is **niet** gebruikt, wordt de wachtrij plaatsen van Azure Event Hubs gebeurtenistijd standaard gebruikt.</span><span class="sxs-lookup"><span data-stu-id="30c74-124">When the “timestamp by” keyword is **not** used, the Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="30c74-125">Event Hubs wordt gegarandeerd dat monotonicity van de tijdstempel op elke partitie van de event hub.</span><span class="sxs-lookup"><span data-stu-id="30c74-125">Event Hubs guarantees monotonicity of the timestamp on each partition of the event hub.</span></span> <span data-ttu-id="30c74-126">Ook wordt hiermee gegarandeerd dat gebeurtenissen van alle partities in volgorde van de timestamp worden samengevoegd.</span><span class="sxs-lookup"><span data-stu-id="30c74-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="30c74-127">Deze twee Event Hubs garanties Zorg ervoor dat er geen gebeurtenissen out volgorde.</span><span class="sxs-lookup"><span data-stu-id="30c74-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="30c74-128">Soms is het belangrijk dat u gebruikt de timestamp van de afzender.</span><span class="sxs-lookup"><span data-stu-id="30c74-128">Sometimes, it’s important for you to use the sender’s timestamp.</span></span> <span data-ttu-id="30c74-129">In dat geval is een tijdstempel van de nettolading gekozen met behulp van 'tijdstempel door'.</span><span class="sxs-lookup"><span data-stu-id="30c74-129">In that case, a timestamp from the event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="30c74-130">In deze scenario's mogelijk zijn een of meer bronnen van de gebeurtenis misorder worden geïntroduceerd:</span><span class="sxs-lookup"><span data-stu-id="30c74-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="30c74-131">Gebeurtenis producenten hebben klok laat.</span><span class="sxs-lookup"><span data-stu-id="30c74-131">Event producers have clock skews.</span></span> <span data-ttu-id="30c74-132">Dit is gebruikelijk producenten afkomstig zijn van verschillende computers werkt, zodat ze verschillende klokken hebben.</span><span class="sxs-lookup"><span data-stu-id="30c74-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="30c74-133">Er is een vertraging van de bron van de gebeurtenissen in het netwerk naar de bestemming event hub.</span><span class="sxs-lookup"><span data-stu-id="30c74-133">There's a network delay from the source of the events to the destination event hub.</span></span>
* <span data-ttu-id="30c74-134">Klok laat bestaan tussen event hub-partities.</span><span class="sxs-lookup"><span data-stu-id="30c74-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="30c74-135">Gebeurtenissen van alle partities van de event hub stream Analytics eerst worden gesorteerd gebeurtenistijd in de wachtrij plaatsen.</span><span class="sxs-lookup"><span data-stu-id="30c74-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="30c74-136">Vervolgens wordt de gegevensstroom voor misordered gebeurtenissen gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="30c74-136">Then, it examines the data stream for misordered events.</span></span>

<span data-ttu-id="30c74-137">Op het tabblad configuratie ziet u de volgende standaardinstellingen:</span><span class="sxs-lookup"><span data-stu-id="30c74-137">On the configuration tab, you see the following defaults:</span></span>

![Stream Analytics out volgorde verwerking](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="30c74-139">Als u 0 seconden als in het venster out volgorde tolerantie gebruikt, bent u aantonen dat alle gebeurtenissen order voortdurend zijn.</span><span class="sxs-lookup"><span data-stu-id="30c74-139">If you use 0 seconds as the out-of-order tolerance window, you are asserting that all events are in order all the time.</span></span> <span data-ttu-id="30c74-140">Gezien de drie bronnen van gebeurtenissen misordered, is het onwaarschijnlijk dat deze ingesteld op true is.</span><span class="sxs-lookup"><span data-stu-id="30c74-140">Given the three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="30c74-141">Als Stream Analytics om op te lossen een gebeurtenis misorder zijn toegestaan, kunt u een tolerantieperiode voor niet-nul out volgorde opgeven.</span><span class="sxs-lookup"><span data-stu-id="30c74-141">To allow Stream Analytics to correct an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="30c74-142">Stream Analytics buffert gebeurtenissen tot dit venster en worden ze met behulp van de tijdstempel die u hebt gekozen.</span><span class="sxs-lookup"><span data-stu-id="30c74-142">Stream Analytics buffers events up to that window, and then reorders them by using the timestamp you chose.</span></span> <span data-ttu-id="30c74-143">Vervolgens wordt de tijdelijke transformatie die wordt toegepast.</span><span class="sxs-lookup"><span data-stu-id="30c74-143">It then applies the temporal transformation.</span></span> <span data-ttu-id="30c74-144">U kunt beginnen met een venster 3 seconden en de waarde van Verminder het aantal gebeurtenissen die tijd aangepast zijn afstemmen.</span><span class="sxs-lookup"><span data-stu-id="30c74-144">You can start with a 3-second window, and tune the value to reduce the number of events that are time-adjusted.</span></span> 

<span data-ttu-id="30c74-145">Een neveneffect van de buffer is dat de uitvoer **vertraagd met dezelfde hoeveelheid tijd**.</span><span class="sxs-lookup"><span data-stu-id="30c74-145">A side effect of the buffering is that the output is **delayed by the same amount of time**.</span></span> <span data-ttu-id="30c74-146">U kunt de waarde om te beperken het aantal out volgorde gebeurtenissen afstemmen en houd de taak latentie laag.</span><span class="sxs-lookup"><span data-stu-id="30c74-146">You can tune the value to reduce the number of out-of-order events, and keep the job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="30c74-147">Help opvragen</span><span class="sxs-lookup"><span data-stu-id="30c74-147">Get help</span></span>
<span data-ttu-id="30c74-148">Voor meer informatie en ondersteuning kunt u proberen onze [Azure Stream Analytics-forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="30c74-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="30c74-149">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="30c74-149">Next steps</span></span>
* [<span data-ttu-id="30c74-150">Inleiding tot Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="30c74-150">Introduction to Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="30c74-151">Aan de slag met Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="30c74-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="30c74-152">Stream Analytics-taken schalen</span><span class="sxs-lookup"><span data-stu-id="30c74-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="30c74-153">Naslaggids voor stream Analytics query</span><span class="sxs-lookup"><span data-stu-id="30c74-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="30c74-154">Stream Analytics management REST API-referentiemateriaal</span><span class="sxs-lookup"><span data-stu-id="30c74-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)