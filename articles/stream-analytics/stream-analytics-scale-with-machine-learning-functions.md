---
title: aaaJob schaling mogelijk met Azure Stream Analytics & AzureML functies | Microsoft Docs
description: Meer informatie over hoe tooproperly schalen Stream Analytics-taken (partitioneren, SU hoeveelheid en meer) bij gebruik van Azure Machine Learning-functies.
keywords: 
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 47ce7c5e-1de1-41ca-9a26-b5ecce814743
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: jeffstok
ms.openlocfilehash: 3fbdfaf7e8e86896c56f1d18bbde3a10bd3dca04
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="scale-your-stream-analytics-job-with-azure-machine-learning-functions"></a><span data-ttu-id="70cc9-103">Schalen van uw Stream Analytics-taak met Azure Machine Learning-functies</span><span class="sxs-lookup"><span data-stu-id="70cc9-103">Scale your Stream Analytics job with Azure Machine Learning functions</span></span>
<span data-ttu-id="70cc9-104">Het is vaak vrij eenvoudig tooset van een Stream Analytics-taak en voorbeeldgegevens doorlopen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-104">It is often quite easy tooset up an Stream Analytics job and run some sample data through it.</span></span> <span data-ttu-id="70cc9-105">Wat moet er doen als we toorun moeten dezelfde job met hogere gegevensvolume Hallo?</span><span class="sxs-lookup"><span data-stu-id="70cc9-105">What should we do when we need toorun hello same job with higher data volume?</span></span> <span data-ttu-id="70cc9-106">Hiervoor moeten ons toounderstand hoe tooconfigure Hallo Stream Analytics taak zodat deze kunnen worden geschaald.</span><span class="sxs-lookup"><span data-stu-id="70cc9-106">It requires us toounderstand how tooconfigure hello Stream Analytics job so that it will scale.</span></span> <span data-ttu-id="70cc9-107">In dit document gaan we in op Hallo bijzondere aspecten van vergroten/verkleinen Stream Analytics jobs met Machine Learning-functies.</span><span class="sxs-lookup"><span data-stu-id="70cc9-107">In this document, we will focus on hello special aspects of scaling Stream Analytics jobs with Machine Learning functions.</span></span> <span data-ttu-id="70cc9-108">Voor informatie over hoe tooscale Stream Analytics-taken in het algemeen Hallo artikel zien [taken schalen](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="70cc9-108">For information on how tooscale Stream Analytics jobs in general see hello article [Scaling jobs](stream-analytics-scale-jobs.md).</span></span>

## <a name="what-is-an-azure-machine-learning-function-in-stream-analytics"></a><span data-ttu-id="70cc9-109">Wat is een Azure Machine Learning-functie in Stream Analytics?</span><span class="sxs-lookup"><span data-stu-id="70cc9-109">What is an Azure Machine Learning function in Stream Analytics?</span></span>
<span data-ttu-id="70cc9-110">Een Machine Learning-functie in Stream Analytics kan worden gebruikt als een reguliere functieaanroep in Hallo querytaal van Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="70cc9-110">A Machine Learning function in Stream Analytics can be used like a regular function call in hello Stream Analytics query language.</span></span> <span data-ttu-id="70cc9-111">Hallo-functieaanroepen zijn echter achter Hallo-scènes daadwerkelijk Azure Machine Learning-webservice-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-111">However, behind hello scene, hello function calls are actually Azure Machine Learning Web Service requests.</span></span> <span data-ttu-id="70cc9-112">Machine Learning-webservices ondersteuning 'batchverwerking' meerdere rijen die Mini batch wordt genoemd, en in Hallo dezelfde service API-aanroep tooimprove totale doorvoer.</span><span class="sxs-lookup"><span data-stu-id="70cc9-112">Machine Learning web services support “batching” multiple rows, which is called mini-batch, in hello same web service API call, tooimprove overall throughput.</span></span> <span data-ttu-id="70cc9-113">Zie de volgende artikelen voor meer informatie; Hallo [Azure Machine Learning-functies in Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) en [Azure Machine Learning-webservices](../machine-learning/machine-learning-consume-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="70cc9-113">Please see hello following articles for more details; [Azure Machine Learning functions in Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) and [Azure Machine Learning Web Services](../machine-learning/machine-learning-consume-web-services.md).</span></span>

## <a name="configure-a-stream-analytics-job-with-machine-learning-functions"></a><span data-ttu-id="70cc9-114">Configureren van een Stream Analytics-taak met Machine Learning-functies</span><span class="sxs-lookup"><span data-stu-id="70cc9-114">Configure a Stream Analytics job with Machine Learning functions</span></span>
<span data-ttu-id="70cc9-115">Bij het configureren van een Machine Learning-functie voor Stream Analytics-taak, zijn er twee parameters tooconsider, batchgrootte Hallo van Machine Learning-functieaanroepen Hallo en Hallo streaming-eenheden (SUs) ingericht voor Hallo Stream Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="70cc9-115">When configuring a Machine Learning function for Stream Analytics job, there are two parameters tooconsider, hello batch size of hello Machine Learning function calls, and hello streaming units (SUs) provisioned for hello Stream Analytics job.</span></span> <span data-ttu-id="70cc9-116">toodetermine hello juiste waarden voor deze, eerst een beslissing moet worden gemaakt tussen latentie en doorvoer, dat wil zeggen, latentie van Hallo Stream Analytics-taak en de doorvoer van elke SU.</span><span class="sxs-lookup"><span data-stu-id="70cc9-116">toodetermine hello appropriate values for these, first a decision must be made between latency and throughput, that is, latency of hello Stream Analytics job, and throughput of each SU.</span></span> <span data-ttu-id="70cc9-117">SUs kunnen altijd worden toegevoegd tooa taak tooincrease doorvoer van een goed gepartitioneerde Stream Analytics query, hoewel aanvullende SUs verhoogt Hallo kosten van het actieve Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="70cc9-117">SUs may always be added tooa job tooincrease throughput of a well partitioned Stream Analytics query, although additional SUs increases hello cost of running hello job.</span></span>

<span data-ttu-id="70cc9-118">Daarom is het belangrijk toodetermine hello *tolerantie* van latentie in een Stream Analytics-taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="70cc9-118">Therefore it is important toodetermine hello *tolerance* of latency in running a Stream Analytics job.</span></span> <span data-ttu-id="70cc9-119">Extra latentie Azure Machine Learning-serviceaanvragen worden uitgevoerd verhoogd met de batchgrootte, die wordt samengesteld Hallo latentie van de Stream Analytics-taak Hallo natuurlijk.</span><span class="sxs-lookup"><span data-stu-id="70cc9-119">Additional latency from running Azure Machine Learning service requests will naturally increase with batch size, which will compound hello latency of hello Stream Analytics job.</span></span> <span data-ttu-id="70cc9-120">Hallo daarentegen vergroten met de batch kan Hallo Stream Analytics-taak tooprocess * meer gebeurtenissen met de Hallo *hetzelfde nummer* van Machine Learning web serviceaanvragen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-120">On hello other hand, increasing batch size allows hello Stream Analytics job tooprocess *more events with hello *same number* of Machine Learning web service requests.</span></span> <span data-ttu-id="70cc9-121">Vaak Hallo toename van Machine Learning web service latentie is toohello subplan lineaire toename van batchgrootte dus is het belangrijk tooconsider Hallo meest voordelige batch-grootte voor een Machine Learning-webservice in een situatie met opgegeven.</span><span class="sxs-lookup"><span data-stu-id="70cc9-121">Often hello increase of Machine Learning web service latency is sub-linear toohello increase of batch size so it is important tooconsider hello most cost-efficient batch size for a Machine Learning web service in any given situation.</span></span> <span data-ttu-id="70cc9-122">Hallo standaardbatchgrootte voor Hallo-webservice-aanvragen is 1000 en kunnen worden gewijzigd met behulp van Hallo [Stream Analytics REST-API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST-API") of Hallo [PowerShell-client voor Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "PowerShell-client voor Stream Analytics").</span><span class="sxs-lookup"><span data-stu-id="70cc9-122">hello default batch size for hello web service requests is 1000 and may be modified either by using hello [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") or hello [PowerShell client for Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "PowerShell client for Stream Analytics").</span></span>

<span data-ttu-id="70cc9-123">Zodra een batchgrootte is bepaald, Hallo hoeveelheid streaming-eenheden (SUs) kunnen worden bepaald, gebaseerd op Hallo aantal gebeurtenissen dat Hallo-functie tooprocess per seconde moet.</span><span class="sxs-lookup"><span data-stu-id="70cc9-123">Once a batch size has been determined, hello amount of streaming units (SUs) can be determined, based on hello number of events that hello function needs tooprocess per second.</span></span> <span data-ttu-id="70cc9-124">Zie voor meer informatie over het streaming-eenheden, [Stream Analytics taken schalen](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="70cc9-124">For more information about streaming units, see [Stream Analytics scale jobs](stream-analytics-scale-jobs.md).</span></span>

<span data-ttu-id="70cc9-125">In het algemeen zijn zijn er 20 gelijktijdige verbindingen toohello Machine Learning-webservice voor elke 6 SUs, behalve dat 1 SU-taken en 3 SU taken 20 gelijktijdige verbindingen ook krijgen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-125">In general, there are 20 concurrent connections toohello Machine Learning web service for every 6 SUs, except that 1 SU jobs and 3 SU jobs will get 20 concurrent connections also.</span></span>  <span data-ttu-id="70cc9-126">Als Hallo invoergegevens snelheid 200.000 gebeurtenissen per seconde en Hallo batchgrootte blijft is standaard toohello van 1000 Hallo resulterende web service latentie met 1000 gebeurtenissen Mini batch interval van 200.</span><span class="sxs-lookup"><span data-stu-id="70cc9-126">For example, if hello input data rate is 200,000 events per second and hello batch size is left toohello default of 1000 hello resulting web service latency with 1000 events mini-batch is 200ms.</span></span> <span data-ttu-id="70cc9-127">Dit betekent dat elke verbinding kan maken 5 aanvragen toohello Machine Learning-webservice in een tweede.</span><span class="sxs-lookup"><span data-stu-id="70cc9-127">This means every connection can make 5 requests toohello Machine Learning web service in a second.</span></span> <span data-ttu-id="70cc9-128">Bij 20 verbindingen verwerken Hallo Stream Analytics-taak 20.000 gebeurtenissen in een interval van 200 en daarom 100.000 gebeurtenissen gedurende een seconde.</span><span class="sxs-lookup"><span data-stu-id="70cc9-128">With 20 connections, hello Stream Analytics job can process 20,000 events in 200ms  and therefore 100,000 events in a second.</span></span> <span data-ttu-id="70cc9-129">Dus tooprocess 200.000 gebeurtenissen per seconde, Hallo Stream Analytics-taak moet 40 gelijktijdige verbindingen, die afkomstig uit too12 SUs is.</span><span class="sxs-lookup"><span data-stu-id="70cc9-129">So tooprocess 200,000 events per second, hello Stream Analytics job needs 40 concurrent connections, which comes out too12 SUs.</span></span> <span data-ttu-id="70cc9-130">Hallo-diagram hieronder ziet u Hallo aanvragen van Hallo Stream Analytics-taak toohello Machine Learning web service-eindpunt: elke 6 SUs heeft 20 gelijktijdige verbindingen tooMachine Learning-webservice op max.</span><span class="sxs-lookup"><span data-stu-id="70cc9-130">hello diagram below illustrates hello requests from hello Stream Analytics job toohello Machine Learning web service endpoint – Every 6 SUs has 20 concurrent connections tooMachine Learning web service at max.</span></span>

<span data-ttu-id="70cc9-131">![Stream Analytics schalen met Machine Learning functies 2 taak voorbeeld](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Scale Stream Analytics met Machine Learning functies 2 taak voorbeeld")</span><span class="sxs-lookup"><span data-stu-id="70cc9-131">![Scale Stream Analytics with Machine Learning Functions 2 job example](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Scale Stream Analytics with Machine Learning Functions 2 job example")</span></span>

<span data-ttu-id="70cc9-132">In het algemeen ***B*** voor batchgrootte, ***L*** voor Hallo web service latentieperiode batchgrootte B in milliseconden, Hallo doorvoer van een Stream Analytics-taak met ***N*** SUs is:</span><span class="sxs-lookup"><span data-stu-id="70cc9-132">In general, ***B*** for batch size, ***L*** for hello web service latency at batch size B in milliseconds, hello throughput of an Stream Analytics job with ***N*** SUs is:</span></span>

<span data-ttu-id="70cc9-133">![Stream Analytics met Machine Learning functies formule schalen](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Stream Analytics met Machine Learning functies formule schalen")</span><span class="sxs-lookup"><span data-stu-id="70cc9-133">![Scale Stream Analytics with Machine Learning Functions Formula](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Scale Stream Analytics with Machine Learning Functions Formula")</span></span>

<span data-ttu-id="70cc9-134">Een extra aandacht mogelijk Hallo 'maximumaantal gelijktijdige aanroepen' op Hallo Machine Learning web service aan clientzijde, verdient het aanbeveling tooset deze toohello maximumwaarde (momenteel 200).</span><span class="sxs-lookup"><span data-stu-id="70cc9-134">An additional consideration may be hello 'max concurrent calls' on hello Machine Learning web service side, it’s recommended tooset this toohello maximum value (200 currently).</span></span>

<span data-ttu-id="70cc9-135">Raadpleeg voor meer informatie over deze instelling Hallo [voor Machine Learning-webservices schalen artikel](../machine-learning/machine-learning-scaling-webservice.md).</span><span class="sxs-lookup"><span data-stu-id="70cc9-135">For more information on this setting please review hello [Scaling article for Machine Learning Web Services](../machine-learning/machine-learning-scaling-webservice.md).</span></span>

## <a name="example--sentiment-analysis"></a><span data-ttu-id="70cc9-136">Voorbeeld: gevoel analyse</span><span class="sxs-lookup"><span data-stu-id="70cc9-136">Example – Sentiment Analysis</span></span>
<span data-ttu-id="70cc9-137">Hallo volgende voorbeeld bevat een Stream Analytics-taak met de Hallo gevoel analysis Machine Learning-functie, zoals beschreven in Hallo [Stream Analytics, Machine Learning-integratie zelfstudie](stream-analytics-machine-learning-integration-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="70cc9-137">hello following example includes a Stream Analytics job with hello sentiment analysis Machine Learning function, as described in hello [Stream Analytics Machine Learning integration tutorial](stream-analytics-machine-learning-integration-tutorial.md).</span></span>

<span data-ttu-id="70cc9-138">Hallo-query is een eenvoudige volledig gepartitioneerde query gevolgd door Hallo **gevoel** functioneren, zoals hieronder wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="70cc9-138">hello query is a simple fully partitioned query followed by hello **sentiment** function, as shown below:</span></span>

    WITH subquery AS (
        SELECT text, sentiment(text) as result from input
    )

    Select text, result.[Score]
    Into output
    From subquery

<span data-ttu-id="70cc9-139">Houd rekening met Hallo volgen scenario; met een doorvoersnelheid van 10.000 tweets per seconde moet een Stream Analytics-taak tooperform gevoel analyse van Hallo tweets (gebeurtenissen) worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="70cc9-139">Consider hello following scenario; with a throughput of 10,000 tweets per second a Stream Analytics job must be created tooperform sentiment analysis of hello tweets (events).</span></span> <span data-ttu-id="70cc9-140">1 SU gebruikt, kan deze Stream Analytics-taak worden kunnen toohandle Hallo verkeer?</span><span class="sxs-lookup"><span data-stu-id="70cc9-140">Using 1 SU, could this Stream Analytics job be able toohandle hello traffic?</span></span> <span data-ttu-id="70cc9-141">Met Hallo standaardbatchgrootte van 1000 Hallo taak moet kunnen tookeep up met Hallo-invoer.</span><span class="sxs-lookup"><span data-stu-id="70cc9-141">Using hello default batch size of 1000 hello job should be able tookeep up with hello input.</span></span> <span data-ttu-id="70cc9-142">Verdere Hallo toegevoegd aan Machine Learning-functie niet meer dan een seconde van latentie, namelijk Hallo algemeen standaard latentie van Hallo gevoel analyse Machine Learning-webservice (met een standaardbatchgrootte 1000) moet worden gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="70cc9-142">Further hello added Machine Learning function should generate no more than a second of latency, which is hello general default latency of hello sentiment analysis Machine Learning web service (with a default batch size of 1000).</span></span> <span data-ttu-id="70cc9-143">Hallo Stream Analytics-taak van **algehele** of latentie end-to-end doorgaans een paar seconden.</span><span class="sxs-lookup"><span data-stu-id="70cc9-143">hello Stream Analytics job’s **overall** or end-to-end latency would typically be a few seconds.</span></span> <span data-ttu-id="70cc9-144">Meer gedetailleerde verdiepen in deze Stream Analytics-taak *vooral* Hallo Machine Learning-functieaanroepen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-144">Take a more detailed look into this Stream Analytics job, *especially* hello Machine Learning function calls.</span></span> <span data-ttu-id="70cc9-145">Hallo batchgrootte 1000 hebben, duurt een doorvoer van 10.000 gebeurtenissen ongeveer 10 aanvragen tooweb service.</span><span class="sxs-lookup"><span data-stu-id="70cc9-145">Having hello batch size as 1000, a throughput of 10,000 events will take about 10 requests tooweb service.</span></span> <span data-ttu-id="70cc9-146">Zelfs met 1 SU, er zijn onvoldoende tooaccommodate gelijktijdige verbindingen dit verkeer invoer.</span><span class="sxs-lookup"><span data-stu-id="70cc9-146">Even with 1 SU, there are enough concurrent connections tooaccommodate this input traffic.</span></span>

<span data-ttu-id="70cc9-147">Wat gebeurt er als Hallo invoergebeurtenis tarief wordt verhoogd door 100 x maar Hallo Stream Analytics-taak moet nu tooprocess 1.000.000 tweets per seconde?</span><span class="sxs-lookup"><span data-stu-id="70cc9-147">But what if hello input event rate increases by 100x and now hello Stream Analytics job needs tooprocess 1,000,000 tweets per second?</span></span> <span data-ttu-id="70cc9-148">Er zijn twee opties:</span><span class="sxs-lookup"><span data-stu-id="70cc9-148">There are two options:</span></span>

1. <span data-ttu-id="70cc9-149">Batchgrootte hello, verhogen of</span><span class="sxs-lookup"><span data-stu-id="70cc9-149">Increase hello batch size, or</span></span>
2. <span data-ttu-id="70cc9-150">Partitie Hallo invoerstroom tooprocess Hallo gebeurtenissen parallel</span><span class="sxs-lookup"><span data-stu-id="70cc9-150">Partition hello input stream tooprocess hello events in parallel</span></span>

<span data-ttu-id="70cc9-151">Met de eerste optie Hallo Hallo taak **latentie** wordt verhoogd.</span><span class="sxs-lookup"><span data-stu-id="70cc9-151">With hello first option, hello job **latency** will increase.</span></span>

<span data-ttu-id="70cc9-152">Met de tweede optie hello, zou meer SUs moet toobe ingericht en daarom genereren meer gelijktijdige aanvragen van Machine Learning web service.</span><span class="sxs-lookup"><span data-stu-id="70cc9-152">With hello second option, more SUs would need toobe provisioned and therefore generate more concurrent Machine Learning web service requests.</span></span> <span data-ttu-id="70cc9-153">Dit betekent dat de taak Hallo **kosten** wordt verhoogd.</span><span class="sxs-lookup"><span data-stu-id="70cc9-153">This means hello job **cost** will increase.</span></span>

<span data-ttu-id="70cc9-154">Wordt ervan uitgegaan dat Hallo latentie van Hallo gevoel analysis Machine Learning-webservice is interval van 200 voor batches van 1000 gebeurtenissen of hieronder 250ms voor 5.000 gebeurtenis batches, 300ms voor batches van 10.000 gebeurtenissen of 500ms voor batches 25.000-gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="70cc9-154">Assume hello latency of hello sentiment analysis Machine Learning web service is 200ms for 1000-event batches or below, 250ms for 5,000-event batches, 300ms for 10,000-event batches or 500ms for 25,000-event batches.</span></span>

1. <span data-ttu-id="70cc9-155">Met behulp van de eerste optie hello (**niet** meer SUs inrichting), batchgrootte hello te kan worden verhoogd**25.000**.</span><span class="sxs-lookup"><span data-stu-id="70cc9-155">Using hello first option, (**not** provisioning more SUs), hello batch size could be increased too**25,000**.</span></span> <span data-ttu-id="70cc9-156">Op zijn beurt Hierdoor kan Hallo taak tooprocess 1.000.000 gebeurtenissen met 20 gelijktijdige verbindingen toohello Machine Learning-webservice (met een latentie van 500ms per aanroep).</span><span class="sxs-lookup"><span data-stu-id="70cc9-156">This in turn would allow hello job tooprocess 1,000,000 events with 20 concurrent connections toohello Machine Learning web service (with a latency of 500ms per call).</span></span> <span data-ttu-id="70cc9-157">Dus Hallo extra latentie van de Stream Analytics-taak Hallo vanwege toohello gevoel functie aanvragen op basis van Machine Learning webserviceaanvragen zou worden verhoogd van Hallo **interval van 200** te**500ms**.</span><span class="sxs-lookup"><span data-stu-id="70cc9-157">So hello additional latency of hello Stream Analytics job due toohello sentiment function requests against hello Machine Learning web service requests would be increased from **200ms** too**500ms**.</span></span> <span data-ttu-id="70cc9-158">Bedenk wel dat batchgrootte **kan niet** oneindig worden verhoogd als hello Machine Learning-webservices vereist Hallo nettolading grootte van een aanvraag worden 4 MB of kleiner web service aanvragen time-out na 100 seconden van bewerking.</span><span class="sxs-lookup"><span data-stu-id="70cc9-158">However, note that batch size **cannot** be increased infinitely as hello Machine Learning web services requires hello payload size of a request be 4MB or smaller web service requests timeout after 100 seconds of operation.</span></span>
2. <span data-ttu-id="70cc9-159">Met behulp van de tweede optie Hallo Hallo batchgrootte is links op 1000, met een interval van 200 web service latentie, elke webservice van 20 gelijktijdige verbindingen toohello zou kunnen tooprocess 1000 * 20 * 5 gebeurtenissen = 100.000 per seconde.</span><span class="sxs-lookup"><span data-stu-id="70cc9-159">Using hello second option, hello batch size is left at 1000, with 200ms web service latency, every 20 concurrent connections toohello web service would be able tooprocess 1000 * 20 * 5 events = 100,000 per second.</span></span> <span data-ttu-id="70cc9-160">Tooprocess 1.000.000 gebeurtenissen per seconde, Hallo-taak moet dus 60 SUs.</span><span class="sxs-lookup"><span data-stu-id="70cc9-160">So tooprocess 1,000,000 events per second, hello job would need 60 SUs.</span></span> <span data-ttu-id="70cc9-161">Vergeleken toohello eerste optie, Stream Analytics-taak zouden meer op zijn beurt web service batchaanvragen, het genereren van een extra kosten.</span><span class="sxs-lookup"><span data-stu-id="70cc9-161">Compared toohello first option, Stream Analytics job would make more web service batch requests, in turn generating an increased cost.</span></span>

<span data-ttu-id="70cc9-162">Hieronder vindt u een tabel voor Hallo doorvoer van Hallo Stream Analytics-taak voor verschillende SUs en batch grootte (in het aantal gebeurtenissen per seconde).</span><span class="sxs-lookup"><span data-stu-id="70cc9-162">Below is a table for hello throughput of hello Stream Analytics job for different SUs and batch sizes (in number of events per second).</span></span>

| <span data-ttu-id="70cc9-163">Batchgrootte (ML latentie)</span><span class="sxs-lookup"><span data-stu-id="70cc9-163">batch size (ML latency)</span></span> | <span data-ttu-id="70cc9-164">500 (interval van 200)</span><span class="sxs-lookup"><span data-stu-id="70cc9-164">500 (200ms)</span></span> | <span data-ttu-id="70cc9-165">1000 (interval van 200)</span><span class="sxs-lookup"><span data-stu-id="70cc9-165">1,000 (200ms)</span></span> | <span data-ttu-id="70cc9-166">5.000 (250ms)</span><span class="sxs-lookup"><span data-stu-id="70cc9-166">5,000 (250ms)</span></span> | <span data-ttu-id="70cc9-167">10.000 (300ms)</span><span class="sxs-lookup"><span data-stu-id="70cc9-167">10,000 (300ms)</span></span> | <span data-ttu-id="70cc9-168">25.000 (500ms)</span><span class="sxs-lookup"><span data-stu-id="70cc9-168">25,000 (500ms)</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="70cc9-169">**1 SU**</span><span class="sxs-lookup"><span data-stu-id="70cc9-169">**1 SU**</span></span> |<span data-ttu-id="70cc9-170">2,500</span><span class="sxs-lookup"><span data-stu-id="70cc9-170">2,500</span></span> |<span data-ttu-id="70cc9-171">5,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-171">5,000</span></span> |<span data-ttu-id="70cc9-172">20,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-172">20,000</span></span> |<span data-ttu-id="70cc9-173">30,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-173">30,000</span></span> |<span data-ttu-id="70cc9-174">50,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-174">50,000</span></span> |
| <span data-ttu-id="70cc9-175">**SUs 3**</span><span class="sxs-lookup"><span data-stu-id="70cc9-175">**3 SUs**</span></span> |<span data-ttu-id="70cc9-176">2,500</span><span class="sxs-lookup"><span data-stu-id="70cc9-176">2,500</span></span> |<span data-ttu-id="70cc9-177">5,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-177">5,000</span></span> |<span data-ttu-id="70cc9-178">20,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-178">20,000</span></span> |<span data-ttu-id="70cc9-179">30,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-179">30,000</span></span> |<span data-ttu-id="70cc9-180">50,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-180">50,000</span></span> |
| <span data-ttu-id="70cc9-181">**6 SUs**</span><span class="sxs-lookup"><span data-stu-id="70cc9-181">**6 SUs**</span></span> |<span data-ttu-id="70cc9-182">2,500</span><span class="sxs-lookup"><span data-stu-id="70cc9-182">2,500</span></span> |<span data-ttu-id="70cc9-183">5,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-183">5,000</span></span> |<span data-ttu-id="70cc9-184">20,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-184">20,000</span></span> |<span data-ttu-id="70cc9-185">30,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-185">30,000</span></span> |<span data-ttu-id="70cc9-186">50,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-186">50,000</span></span> |
| <span data-ttu-id="70cc9-187">**SUs 12**</span><span class="sxs-lookup"><span data-stu-id="70cc9-187">**12 SUs**</span></span> |<span data-ttu-id="70cc9-188">5,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-188">5,000</span></span> |<span data-ttu-id="70cc9-189">10.000</span><span class="sxs-lookup"><span data-stu-id="70cc9-189">10,000</span></span> |<span data-ttu-id="70cc9-190">40,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-190">40,000</span></span> |<span data-ttu-id="70cc9-191">60,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-191">60,000</span></span> |<span data-ttu-id="70cc9-192">100,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-192">100,000</span></span> |
| <span data-ttu-id="70cc9-193">**18 SUs**</span><span class="sxs-lookup"><span data-stu-id="70cc9-193">**18 SUs**</span></span> |<span data-ttu-id="70cc9-194">7,500</span><span class="sxs-lookup"><span data-stu-id="70cc9-194">7,500</span></span> |<span data-ttu-id="70cc9-195">15,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-195">15,000</span></span> |<span data-ttu-id="70cc9-196">60,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-196">60,000</span></span> |<span data-ttu-id="70cc9-197">90,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-197">90,000</span></span> |<span data-ttu-id="70cc9-198">150,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-198">150,000</span></span> |
| <span data-ttu-id="70cc9-199">**24 SUs**</span><span class="sxs-lookup"><span data-stu-id="70cc9-199">**24 SUs**</span></span> |<span data-ttu-id="70cc9-200">10.000</span><span class="sxs-lookup"><span data-stu-id="70cc9-200">10,000</span></span> |<span data-ttu-id="70cc9-201">20,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-201">20,000</span></span> |<span data-ttu-id="70cc9-202">80,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-202">80,000</span></span> |<span data-ttu-id="70cc9-203">120,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-203">120,000</span></span> |<span data-ttu-id="70cc9-204">200.000</span><span class="sxs-lookup"><span data-stu-id="70cc9-204">200,000</span></span> |
| <span data-ttu-id="70cc9-205">**…**</span><span class="sxs-lookup"><span data-stu-id="70cc9-205">**…**</span></span> |<span data-ttu-id="70cc9-206">…</span><span class="sxs-lookup"><span data-stu-id="70cc9-206">…</span></span> |<span data-ttu-id="70cc9-207">…</span><span class="sxs-lookup"><span data-stu-id="70cc9-207">…</span></span> |<span data-ttu-id="70cc9-208">…</span><span class="sxs-lookup"><span data-stu-id="70cc9-208">…</span></span> |<span data-ttu-id="70cc9-209">…</span><span class="sxs-lookup"><span data-stu-id="70cc9-209">…</span></span> |<span data-ttu-id="70cc9-210">…</span><span class="sxs-lookup"><span data-stu-id="70cc9-210">…</span></span> |
| <span data-ttu-id="70cc9-211">**60 SUs**</span><span class="sxs-lookup"><span data-stu-id="70cc9-211">**60 SUs**</span></span> |<span data-ttu-id="70cc9-212">25,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-212">25,000</span></span> |<span data-ttu-id="70cc9-213">50,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-213">50,000</span></span> |<span data-ttu-id="70cc9-214">200.000</span><span class="sxs-lookup"><span data-stu-id="70cc9-214">200,000</span></span> |<span data-ttu-id="70cc9-215">300,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-215">300,000</span></span> |<span data-ttu-id="70cc9-216">500,000</span><span class="sxs-lookup"><span data-stu-id="70cc9-216">500,000</span></span> |

<span data-ttu-id="70cc9-217">Nu moet u al een goed begrip van de werking van Machine Learning-functies in Stream Analytics hebben.</span><span class="sxs-lookup"><span data-stu-id="70cc9-217">By now, you should already have a good understanding of how Machine Learning functions in Stream Analytics work.</span></span> <span data-ttu-id="70cc9-218">U waarschijnlijk begrijpen ook dat de Stream Analytics-taken 'pull' gegevens van gegevensbronnen en elke 'pull' retourneert een reeks gebeurtenissen voor Stream Analytics-taak tooprocess Hallo.</span><span class="sxs-lookup"><span data-stu-id="70cc9-218">You likely also understand that Stream Analytics jobs “pull” data from data sources and each “pull” returns a batch of events for hello Stream Analytics job tooprocess.</span></span> <span data-ttu-id="70cc9-219">Hoe beïnvloedt dit pullmodel Hallo Machine Learning web serviceaanvragen</span><span class="sxs-lookup"><span data-stu-id="70cc9-219">How does this pull model impact hello Machine Learning web service requests?</span></span>

<span data-ttu-id="70cc9-220">Hallo batchgrootte die we ingesteld voor Machine Learning-functies niet normaal gesproken exact worden gedeeld door het aantal gebeurtenissen dat is geretourneerd door elke Stream Analytics-taak 'pull' Hallo.</span><span class="sxs-lookup"><span data-stu-id="70cc9-220">Normally, hello batch size we set for Machine Learning functions won’t exactly be divisible by hello number of events returned by each Stream Analytics job “pull”.</span></span> <span data-ttu-id="70cc9-221">Dit gebeurt wanneer Hallo Machine Learning-webservice wordt aangeroepen met 'gedeeltelijke' batches.</span><span class="sxs-lookup"><span data-stu-id="70cc9-221">When this occurs hello Machine Learning web service will be called with “partial” batches.</span></span> <span data-ttu-id="70cc9-222">Dit wordt gedaan toonot extra taak latentie overhead in samenvoegen gebeurtenissen van pull-toopull rekening worden gebracht.</span><span class="sxs-lookup"><span data-stu-id="70cc9-222">This is done toonot incur additional job latency overhead in coalescing events from pull toopull.</span></span>

## <a name="new-function-related-monitoring-metrics"></a><span data-ttu-id="70cc9-223">Nieuwe functie-gerelateerde bewaking metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="70cc9-223">New function-related monitoring metrics</span></span>
<span data-ttu-id="70cc9-224">In het gebied van de Monitor van een Stream Analytics-taak hello, zijn drie extra functie-gerelateerde statistieken toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="70cc9-224">In hello Monitor area of a Stream Analytics job, three additional function-related metrics have been added.</span></span> <span data-ttu-id="70cc9-225">Dit zijn de aanvragen van functie, gebeurtenissen voor de functie en MISLUKTE functie aanvragen, zoals wordt weergegeven in onderstaande afbeelding voor Hallo.</span><span class="sxs-lookup"><span data-stu-id="70cc9-225">They are FUNCTION REQUESTS, FUNCTION EVENTS and FAILED FUNCTION REQUESTS, as shown in hello graphic below.</span></span>

<span data-ttu-id="70cc9-226">![Stream Analytics met Machine Learning functies metrische gegevens schalen](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "schalen Stream Analytics met Machine Learning functies metrische gegevens")</span><span class="sxs-lookup"><span data-stu-id="70cc9-226">![Scale Stream Analytics with Machine Learning Functions Metrics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "Scale Stream Analytics with Machine Learning Functions Metrics")</span></span>

<span data-ttu-id="70cc9-227">Hallo zijn als volgt gedefinieerd:</span><span class="sxs-lookup"><span data-stu-id="70cc9-227">hello are defined as follows:</span></span>

<span data-ttu-id="70cc9-228">**AANVRAGEN van functie**: het aantal aanvragen van functie Hallo.</span><span class="sxs-lookup"><span data-stu-id="70cc9-228">**FUNCTION REQUESTS**: hello number of function requests.</span></span>

<span data-ttu-id="70cc9-229">**GEBEURTENISSEN voor de functie**: Hallo aantal gebeurtenissen in Hallo werken aanvragen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-229">**FUNCTION EVENTS**: hello number events in hello function requests.</span></span>

<span data-ttu-id="70cc9-230">**MISLUKTE aanvragen voor de functie**: Hallo aantal mislukte functie aanvragen.</span><span class="sxs-lookup"><span data-stu-id="70cc9-230">**FAILED FUNCTION REQUESTS**: hello number of failed function requests.</span></span>

## <a name="key-takeaways"></a><span data-ttu-id="70cc9-231">Sleutel Takeaways</span><span class="sxs-lookup"><span data-stu-id="70cc9-231">Key Takeaways</span></span>
<span data-ttu-id="70cc9-232">toosummarize hello belangrijkste punten in de volgorde tooscale een Stream Analytics-taak met Machine Learning-functies, hello volgende items moeten worden beschouwd:</span><span class="sxs-lookup"><span data-stu-id="70cc9-232">toosummarize hello main points, in order tooscale an Stream Analytics job with Machine Learning functions, hello following items must be considered:</span></span>

1. <span data-ttu-id="70cc9-233">snelheid van de invoer gebeurtenissen Hallo</span><span class="sxs-lookup"><span data-stu-id="70cc9-233">hello input event rate</span></span>
2. <span data-ttu-id="70cc9-234">Hallo verdragen latentie voor Hallo Stream Analytics-taak uitgevoerd (en dus batchgrootte Hallo van Hallo Machine Learning-webservice-aanvragen)</span><span class="sxs-lookup"><span data-stu-id="70cc9-234">hello tolerated latency for hello running Stream Analytics job (and thus hello batch size of hello Machine Learning web service requests)</span></span>
3. <span data-ttu-id="70cc9-235">Hallo ingericht Stream Analytics SUs en Hallo aantal Machine Learning web service-aanvragen (Hallo aanvullende functie-gerelateerde kosten)</span><span class="sxs-lookup"><span data-stu-id="70cc9-235">hello provisioned Stream Analytics SUs and hello number of Machine Learning web service requests (hello additional function-related costs)</span></span>

<span data-ttu-id="70cc9-236">Een voorbeeld is een volledig gepartitioneerde Stream Analytics query gebruikt.</span><span class="sxs-lookup"><span data-stu-id="70cc9-236">A fully partitioned Stream Analytics query was used as an example.</span></span> <span data-ttu-id="70cc9-237">Wanneer u een complexere query nodig hebt Hallo [Azure Stream Analytics-forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) is een zeer waardevolle resource voor aanvullende hulp vragen aan Hallo Stream Analytics-team.</span><span class="sxs-lookup"><span data-stu-id="70cc9-237">If a more complex query is needed hello [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) is a great resource for getting additional help from hello Stream Analytics team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="70cc9-238">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="70cc9-238">Next steps</span></span>
<span data-ttu-id="70cc9-239">toolearn meer informatie over Stream Analytics, Zie:</span><span class="sxs-lookup"><span data-stu-id="70cc9-239">toolearn more about Stream Analytics, see:</span></span>

* [<span data-ttu-id="70cc9-240">Aan de slag met Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="70cc9-240">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="70cc9-241">Azure Stream Analytics-taken schalen</span><span class="sxs-lookup"><span data-stu-id="70cc9-241">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="70cc9-242">Naslaggids voor Azure Stream Analytics Query</span><span class="sxs-lookup"><span data-stu-id="70cc9-242">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="70cc9-243">REST API-naslaggids voor Azure Stream Analytics Management</span><span class="sxs-lookup"><span data-stu-id="70cc9-243">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
