---
title: de uitvoer aaaJSON voor Stream Analytics | Microsoft Docs
description: Meer informatie over hoe Stream Analytics doel Azure Cosmos DB voor de JSON-uitvoer, voor het archiveren van gegevens en lage latentie query's op niet-gestructureerde JSON-gegevens.
keywords: JSON-uitvoer
documentationcenter: 
services: stream-analytics,documentdb
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: 5d2a61a6-0dbf-4f1b-80af-60a80eb25dd1
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: fa717818c839ecd7a60fcee33d22011990fd5878
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="target-azure-cosmos-db-for-json-output-from-stream-analytics"></a><span data-ttu-id="16caf-104">Azure Cosmos Doeldatabase voor JSON-uitvoer van de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="16caf-104">Target Azure Cosmos DB for JSON output from Stream Analytics</span></span>
<span data-ttu-id="16caf-105">Stream Analytics kunt richten [Azure Cosmos DB](https://azure.microsoft.com/services/documentdb/) inschakelen voor JSON-uitvoer, lage latentie en archiveren gegevensquery op niet-gestructureerde JSON-gegevens.</span><span class="sxs-lookup"><span data-stu-id="16caf-105">Stream Analytics can target [Azure Cosmos DB](https://azure.microsoft.com/services/documentdb/) for JSON output, enabling data archiving and low-latency queries on unstructured JSON data.</span></span> <span data-ttu-id="16caf-106">Dit document bevat informatie over enkele aanbevolen procedures voor het implementeren van deze configuratie.</span><span class="sxs-lookup"><span data-stu-id="16caf-106">This document covers some best practices for implementing this configuration.</span></span>

<span data-ttu-id="16caf-107">Voor gebruikers die niet bekend met Cosmos DB bent, Bekijk [leertraject voor Azure Cosmos DB](https://azure.microsoft.com/documentation/learning-paths/documentdb/) tooget gestart.</span><span class="sxs-lookup"><span data-stu-id="16caf-107">For those who are unfamiliar with Cosmos DB, take a look at [Azure Cosmos DB’s learning path](https://azure.microsoft.com/documentation/learning-paths/documentdb/) tooget started.</span></span> 

<span data-ttu-id="16caf-108">Opmerking: Mongo DB API gebaseerd Cosmos DB verzamelingen wordt momenteel niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="16caf-108">Note: Mongo DB API based Cosmos DB collections is currently not supported.</span></span> 

## <a name="basics-of-cosmos-db-as-an-output-target"></a><span data-ttu-id="16caf-109">Basisprincipes van Cosmos-database als een output-doel</span><span class="sxs-lookup"><span data-stu-id="16caf-109">Basics of Cosmos DB as an output target</span></span>
<span data-ttu-id="16caf-110">Hello Azure DB die Cosmos-uitvoer in Stream Analytics kunt schrijven uw stream resultaten als JSON-uitvoer in uw verzameling(en) Cosmos DB verwerken.</span><span class="sxs-lookup"><span data-stu-id="16caf-110">hello Azure Cosmos DB output in Stream Analytics enables writing your stream processing results as JSON output into your Cosmos DB collection(s).</span></span> <span data-ttu-id="16caf-111">Stream Analytics maakt geen verzamelingen in uw database, zodat u in plaats daarvan hoeft toocreate ze tevoren betaalt.</span><span class="sxs-lookup"><span data-stu-id="16caf-111">Stream Analytics does not create collections in your database, instead requiring you toocreate them upfront.</span></span> <span data-ttu-id="16caf-112">Dit is zodat Hallo facturering kosten van Cosmos DB verzamelingen transparante tooyou zijn en zodat u Hallo-prestaties afstemmen kunt, consistentie en capaciteit van uw verzamelingen direct met Hallo [Cosmos DB-API's](https://msdn.microsoft.com/library/azure/dn781481.aspx).</span><span class="sxs-lookup"><span data-stu-id="16caf-112">This is so that hello billing costs of Cosmos DB collections are transparent tooyou, and so that you can tune hello performance, consistency and capacity of your collections directly using hello [Cosmos DB APIs](https://msdn.microsoft.com/library/azure/dn781481.aspx).</span></span> <span data-ttu-id="16caf-113">Wordt u aangeraden een Cosmos-DB-Database per taak toologically afzonderlijke streaming uw verzamelingen voor streaming-taak.</span><span class="sxs-lookup"><span data-stu-id="16caf-113">We recommend using one Cosmos DB Database per streaming job toologically separate your collections for a streaming job.</span></span>

<span data-ttu-id="16caf-114">Sommige opties voor het verzamelen van Cosmos DB Hallo worden hieronder beschreven.</span><span class="sxs-lookup"><span data-stu-id="16caf-114">Some of hello Cosmos DB collection options are detailed below.</span></span>

## <a name="tune-consistency-availability-and-latency"></a><span data-ttu-id="16caf-115">Consistentie, beschikbaarheid en latentie afstemmen</span><span class="sxs-lookup"><span data-stu-id="16caf-115">Tune consistency, availability, and latency</span></span>
<span data-ttu-id="16caf-116">toomatch uw vereisten van webtoepassingen Cosmos DB kunt u toofine afstemmen Hallo database en verzamelingen en controleer verschillen tussen de consistentie, beschikbaarheid en latentie.</span><span class="sxs-lookup"><span data-stu-id="16caf-116">toomatch your application requirements, Cosmos DB allows you toofine tune hello database and collections and make trade-offs between consistency, availability and latency.</span></span> <span data-ttu-id="16caf-117">Afhankelijk van welke mate van lezen van consistentie op basis van de behoeften van uw scenario lezen en schrijven latentie, dat kunt u een consistentiecontrole-niveau voor het databaseaccount van uw.</span><span class="sxs-lookup"><span data-stu-id="16caf-117">Depending on what levels of read consistency your scenario needs against read and write latency, you can choose a consistency level on your database account.</span></span> <span data-ttu-id="16caf-118">Standaard kunnen Cosmos DB ook synchrone indexeren op elke verzameling CRUD bewerking tooyour.</span><span class="sxs-lookup"><span data-stu-id="16caf-118">Also by default, Cosmos DB enables synchronous indexing on each CRUD operation tooyour collection.</span></span> <span data-ttu-id="16caf-119">Dit is een andere optie nuttig toocontrol Hallo schrijven leestijd prestaties in Cosmos-DB.</span><span class="sxs-lookup"><span data-stu-id="16caf-119">This is another useful option toocontrol hello write/read performance in Cosmos DB.</span></span> <span data-ttu-id="16caf-120">Raadpleeg voor meer informatie over dit onderwerp Hallo [wijzigen van uw database en query consistentieniveaus](../documentdb/documentdb-consistency-levels.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="16caf-120">For further information on this topic, review hello [change your database and query consistency levels](../documentdb/documentdb-consistency-levels.md) article.</span></span>

## <a name="upserts-from-stream-analytics"></a><span data-ttu-id="16caf-121">Upserts vanuit Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="16caf-121">Upserts from Stream Analytics</span></span>
<span data-ttu-id="16caf-122">Stream Analytics-integratie met Cosmos DB, kunt u tooinsert of update-records in uw Cosmos-DB-verzameling op basis van een bepaalde Document-ID-kolom.</span><span class="sxs-lookup"><span data-stu-id="16caf-122">Stream Analytics integration with Cosmos DB allows you tooinsert or update records in your Cosmos DB collection based on a given Document ID column.</span></span> <span data-ttu-id="16caf-123">Dit is ook bedoeld tooas een *Upsert*.</span><span class="sxs-lookup"><span data-stu-id="16caf-123">This is also referred tooas an *Upsert*.</span></span>

<span data-ttu-id="16caf-124">Stream Analytics maakt gebruik van een optimistische Upsert benadering, waarbij de updates worden alleen uitgevoerd als invoegen is mislukt vanwege een conflict van tooa Document-ID.</span><span class="sxs-lookup"><span data-stu-id="16caf-124">Stream Analytics utilizes an optimistic Upsert approach, where updates are only done when insert fails due tooa Document ID conflict.</span></span> <span data-ttu-id="16caf-125">Deze update wordt uitgevoerd door de Stream Analytics als een PATCH, zodat u kunt gedeeltelijke updates toohello document, dat wil zeggen het toevoegen van nieuwe eigenschappen of het vervangen van die een bestaande eigenschap incrementeel wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="16caf-125">This update is performed by Stream Analytics as a PATCH, so it enables partial updates toohello document, i.e. addition of new properties or replacing an existing property is performed incrementally.</span></span> <span data-ttu-id="16caf-126">Houd er rekening mee dat wijzigingen in waarden van Matrixeigenschappen in de JSON-document Hallo leiden tot volledige Hallo-matrix ophalen overschreven, dat wil zeggen Hallo matrix niet worden samengevoegd.</span><span class="sxs-lookup"><span data-stu-id="16caf-126">Note that changes in hello values of array properties in your JSON document result in hello entire array getting overwritten, i.e. hello array is not merged.</span></span>

## <a name="data-partitioning-in-cosmos-db"></a><span data-ttu-id="16caf-127">Partitioneren van gegevens in Cosmos-DB</span><span class="sxs-lookup"><span data-stu-id="16caf-127">Data partitioning in Cosmos DB</span></span>
<span data-ttu-id="16caf-128">Cosmos DB [gepartitioneerde verzamelingen](../cosmos-db/partition-data.md) Hallo aanbevolen benadering voor het partitioneren van uw gegevens zijn.</span><span class="sxs-lookup"><span data-stu-id="16caf-128">Cosmos DB [partitioned collections](../cosmos-db/partition-data.md) are hello recommended approach for partitioning your data.</span></span> 

<span data-ttu-id="16caf-129">Verzamelingen met één Cosmos DB kunt Stream Analytics nog steeds u voor uw gegevens op basis van Hallo querypatronen en prestatiebehoeften van uw toepassing toopartition.</span><span class="sxs-lookup"><span data-stu-id="16caf-129">For single Cosmos DB collections, Stream Analytics still allows you toopartition your data based on both hello query patterns and performance needs of your application.</span></span> <span data-ttu-id="16caf-130">Elke verzameling mogelijk up too10GB van gegevens (maximaal) en op dit moment er geen manier tooscale up is bevatten (of overloop) een verzameling.</span><span class="sxs-lookup"><span data-stu-id="16caf-130">Each collection may contain up too10GB of data (maximum) and currently there is no way tooscale up (or overflow) a collection.</span></span> <span data-ttu-id="16caf-131">Voor het uitbreiden, Stream Analytics kunt u toowrite toomultiple verzamelingen met een gegeven voorvoegsel (Zie onderstaande details van gebruik).</span><span class="sxs-lookup"><span data-stu-id="16caf-131">For scaling out, Stream Analytics allows you toowrite toomultiple collections with a given prefix (see usage details below).</span></span> <span data-ttu-id="16caf-132">Stream Analytics maakt gebruik van consistente Hallo [Hash partitie Resolver](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.partitioning.hashpartitionresolver.aspx) strategie op basis van gebruiker Hallo opgegeven PartitionKey kolom toopartition de uitvoer-records.</span><span class="sxs-lookup"><span data-stu-id="16caf-132">Stream Analytics uses hello consistent [Hash Partition Resolver](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.partitioning.hashpartitionresolver.aspx) strategy based on hello user provided PartitionKey column toopartition its output records.</span></span> <span data-ttu-id="16caf-133">Hallo aantal verzamelingen met Hallo voorvoegsel gegeven op Hallo streaming begintijd van taak wordt gebruikt als Hallo uitvoer partitie aantal toowhich Hallo taak schrijft tooin parallel (Cosmos DB verzamelingen = uitvoer partities).</span><span class="sxs-lookup"><span data-stu-id="16caf-133">hello number of collections with hello given prefix at hello streaming job’s start time is used as hello output partition count, toowhich hello job writes tooin parallel (Cosmos DB Collections = Output Partitions).</span></span> <span data-ttu-id="16caf-134">Voor één verzameling met de vertraagde indexering doen alleen ingevoegd, over 0,4 schrijfbewerkingen MB/s kan worden verwacht.</span><span class="sxs-lookup"><span data-stu-id="16caf-134">For a single collection with lazy indexing doing only inserts, about 0.4 MB/s write throughput can be expected.</span></span> <span data-ttu-id="16caf-135">Met behulp van meerdere verzamelingen, kunt u tooachieve hogere doorvoer en verbeterde capaciteit.</span><span class="sxs-lookup"><span data-stu-id="16caf-135">Using multiple collections can allow you tooachieve higher throughput and increased capacity.</span></span>

<span data-ttu-id="16caf-136">Als u van plan aantal tooincrease Hallo-partities in toekomstige hello bent, moet u mogelijk toostop de taak opnieuw partitioneren Hallo gegevens van uw bestaande verzamelingen in nieuwe verzamelingen en vervolgens opnieuw opstarten Hallo Stream Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="16caf-136">If you intend tooincrease hello partition count in hello future, you may need toostop your job, repartition hello data from your existing collections into new collections and then restart hello Stream Analytics job.</span></span> <span data-ttu-id="16caf-137">Meer informatie over het gebruik van PartitionResolver en opnieuw partitioneren samen met voorbeeldcode, worden opgenomen in een vervolgzelfstudie post.</span><span class="sxs-lookup"><span data-stu-id="16caf-137">More details on using PartitionResolver and re-partitioning along with sample code, will be included in a follow-up post.</span></span> <span data-ttu-id="16caf-138">Hallo artikel [partitionering en schalen in Cosmos DB](../documentdb/documentdb-partition-data.md) biedt ook informatie over dit.</span><span class="sxs-lookup"><span data-stu-id="16caf-138">hello article [Partitioning and scaling in Cosmos DB](../documentdb/documentdb-partition-data.md) also provides details on this.</span></span>

## <a name="cosmos-db-settings-for-json-output"></a><span data-ttu-id="16caf-139">Cosmos DB-instellingen voor JSON-uitvoer</span><span class="sxs-lookup"><span data-stu-id="16caf-139">Cosmos DB settings for JSON output</span></span>
<span data-ttu-id="16caf-140">Maken van de Cosmos-DB als uitvoer in Stream Analytics genereert een prompt voor meer informatie, zoals hieronder wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16caf-140">Creating Cosmos DB as an output in Stream Analytics generates a prompt for information as seen below.</span></span> <span data-ttu-id="16caf-141">Deze sectie bevat een uitleg van Hallo eigenschappen definitie.</span><span class="sxs-lookup"><span data-stu-id="16caf-141">This section provides an explanation of hello properties definition.</span></span>

<span data-ttu-id="16caf-142">Gepartitioneerde verzameling</span><span class="sxs-lookup"><span data-stu-id="16caf-142">Partitioned Collection</span></span> | <span data-ttu-id="16caf-143">Verzamelingen met meerdere 'Één partitie'</span><span class="sxs-lookup"><span data-stu-id="16caf-143">Multiple “Single Partition” collections</span></span>
---|---
![documentdb stream analytics uitvoerscherm](media/stream-analytics-documentdb-output/stream-analytics-documentdb-output-1.png) |  ![documentdb stream analytics uitvoerscherm](media/stream-analytics-documentdb-output/stream-analytics-documentdb-output-2.png)


  
> [!NOTE]
> <span data-ttu-id="16caf-146">Hallo **meerdere verzamelingen met 'Één partitie'** scenario vereist een partitiesleutel en configuratie wel wordt ondersteund.</span><span class="sxs-lookup"><span data-stu-id="16caf-146">hello **Multiple “Single Partition” collections** scenario requires a partition key and is a supported configuration.</span></span> 

* <span data-ttu-id="16caf-147">**Uitvoer Alias** – een alias toorefer dit uitvoer in uw query ASA</span><span class="sxs-lookup"><span data-stu-id="16caf-147">**Output Alias** – An alias toorefer this output in your ASA query</span></span>  
* <span data-ttu-id="16caf-148">**De accountnaam** – Hallo-naam of het eindpunt-URI van Hallo Cosmos-DB-account.</span><span class="sxs-lookup"><span data-stu-id="16caf-148">**Account Name** – hello name or endpoint URI of hello Cosmos DB account.</span></span>  
* <span data-ttu-id="16caf-149">**Account van de sleutel** – Hallo gedeelde toegangssleutel voor Hallo Cosmos-DB-account.</span><span class="sxs-lookup"><span data-stu-id="16caf-149">**Account Key** – hello shared access key for hello Cosmos DB account.</span></span>  
* <span data-ttu-id="16caf-150">**Database** – hello Cosmos DB databasenaam.</span><span class="sxs-lookup"><span data-stu-id="16caf-150">**Database** – hello Cosmos DB database name.</span></span>  
* <span data-ttu-id="16caf-151">**Verzameling naampatroon** – Hallo verzamelingsnaam of hun patroon voor Hallo verzamelingen toobe gebruikt.</span><span class="sxs-lookup"><span data-stu-id="16caf-151">**Collection Name Pattern** – hello collection name or their pattern for hello collections toobe used.</span></span> <span data-ttu-id="16caf-152">indeling van de verzameling Hallo kan worden samengesteld met Hallo optionele {partition}-token, waarbij partities beginnen bij 0.</span><span class="sxs-lookup"><span data-stu-id="16caf-152">hello collection name format can be constructed using hello optional {partition} token, where partitions start from 0.</span></span> <span data-ttu-id="16caf-153">Hieronder vindt u voorbeeld geldige invoer:</span><span class="sxs-lookup"><span data-stu-id="16caf-153">Following are sample valid inputs:</span></span>  
  <span data-ttu-id="16caf-154">1\) MyCollection: een verzameling met de naam 'MyCollection' moet aanwezig zijn.</span><span class="sxs-lookup"><span data-stu-id="16caf-154">1\) MyCollection – One collection named “MyCollection” must exist.</span></span>  
  <span data-ttu-id="16caf-155">2\) MyCollection {partition} – deze verzamelingen moeten bestaan – 'MyCollection0', 'MyCollection1', 'MyCollection2', enzovoort.</span><span class="sxs-lookup"><span data-stu-id="16caf-155">2\) MyCollection{partition} – Such collections must exist– "MyCollection0”, “MyCollection1”, “MyCollection2” and so on.</span></span>  
* <span data-ttu-id="16caf-156">**Partitie-sleutel** : optioneel.</span><span class="sxs-lookup"><span data-stu-id="16caf-156">**Partition Key** – Optional.</span></span> <span data-ttu-id="16caf-157">Dit is alleen nodig als u een token {partitie} in het patroon van de naam van verzameling.</span><span class="sxs-lookup"><span data-stu-id="16caf-157">This is only needed if you are using a {parition} token in your collection name pattern.</span></span> <span data-ttu-id="16caf-158">de naam van de Hallo van Hallo veld in de uitvoer gebeurtenissen die worden gebruikt toospecify Hallo sleutel voor het partitioneren van uitvoer in collecties.</span><span class="sxs-lookup"><span data-stu-id="16caf-158">hello name of hello field in output events used toospecify hello key for partitioning output across collections.</span></span> <span data-ttu-id="16caf-159">Voor één verzameling uitvoer, elke willekeurige uitvoerkolom kan worden gebruikt, bijvoorbeeld PartitionId.</span><span class="sxs-lookup"><span data-stu-id="16caf-159">For single collection output, any arbitrary output column can be used e.g. PartitionId.</span></span>  
* <span data-ttu-id="16caf-160">**ID-document** : optioneel.</span><span class="sxs-lookup"><span data-stu-id="16caf-160">**Document ID** – Optional.</span></span> <span data-ttu-id="16caf-161">Hallo-naam van Hallo veld in uitvoergebeurtenissen gebruikt toospecify Hallo primaire sleutel op welke insert of update bewerkingen zijn gebaseerd.</span><span class="sxs-lookup"><span data-stu-id="16caf-161">hello name of hello field in output events used toospecify hello primary key on which insert or update operations are based.</span></span>  
