# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="7928a-101">Aan de slag met Azure Stream Analytics: realtime-fraudedetectie</span><span class="sxs-lookup"><span data-stu-id="7928a-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="7928a-102">Deze zelfstudie biedt een end-to-end-afbeelding van het gebruik van Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="7928a-102">This tutorial provides an end-to-end illustration of how to use Azure Stream Analytics.</span></span> <span data-ttu-id="7928a-103">Procedures voor:</span><span class="sxs-lookup"><span data-stu-id="7928a-103">You learn how to:</span></span> 

* <span data-ttu-id="7928a-104">Breng streaming-gebeurtenissen in een exemplaar van Azure Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="7928a-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="7928a-105">In deze zelfstudie gebruikt u een app die wij verstrekken die een stream van records met metagegevens van de mobiele telefoon simuleert.</span><span class="sxs-lookup"><span data-stu-id="7928a-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="7928a-106">SQL-achtige Stream Analytics query's voor het omzetten van gegevens, informatie verzamelen of patronen zoekt schrijven.</span><span class="sxs-lookup"><span data-stu-id="7928a-106">Write SQL-like Stream Analytics queries to transform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="7928a-107">Hier ziet u hoe u een query naar de stroom inkomende onderzoeken en zoekt u naar aanroepen die mogelijk frauduleuze.</span><span class="sxs-lookup"><span data-stu-id="7928a-107">You will see how to use a query to examine the incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="7928a-108">De resultaten verzenden naar uitvoerlocatie (opslag) die u voor extra inzichten kunt analyseren.</span><span class="sxs-lookup"><span data-stu-id="7928a-108">Send the results to an output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="7928a-109">In dit geval hebt u de verdachte aanroepgegevens verzenden naar Azure Blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="7928a-109">In this case, you'll send the suspicious call data to Azure Blob storage.</span></span>

<span data-ttu-id="7928a-110">In deze zelfstudie gebruiken we het voorbeeld van realtime-fraudedetectie, op basis van gegevens voor telefoongesprek.</span><span class="sxs-lookup"><span data-stu-id="7928a-110">In  this tutorial, we use the example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="7928a-111">Maar de techniek die laten we zien is ook geschikt voor andere soorten fraude te detecteren, zoals creditcard fraude of identiteitsdiefstal.</span><span class="sxs-lookup"><span data-stu-id="7928a-111">But the technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="7928a-112">Scenario: Telecommunicatie en SIM fraudedetectie in realtime</span><span class="sxs-lookup"><span data-stu-id="7928a-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="7928a-113">Een bedrijf telecommunicatie heeft een grote hoeveelheid gegevens naar binnenkomende oproepen.</span><span class="sxs-lookup"><span data-stu-id="7928a-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="7928a-114">Het bedrijf wil voor het detecteren van frauduleus aanroepen in realtime, zodat ze kunnen klanten informeren of -service voor een bepaald aantal afgesloten.</span><span class="sxs-lookup"><span data-stu-id="7928a-114">The company wants to detect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="7928a-115">Een type SIM fraude omvat meerdere aanroepen uit dezelfde identiteit rond dezelfde tijd, maar in geografisch verschillende locaties.</span><span class="sxs-lookup"><span data-stu-id="7928a-115">One type of SIM fraud involves multiple calls from the same identity around the same time but in geographically different locations.</span></span> <span data-ttu-id="7928a-116">Om te detecteren dit soort fraude, moet het bedrijf binnenkomende phone records controleren en te zoeken naar specifieke patronen: in dit geval voor oproepen rond dezelfde tijd in andere landen.</span><span class="sxs-lookup"><span data-stu-id="7928a-116">To detect this type of fraud, the company needs to examine incoming phone records and look for specific patterns—in this case, for calls made around the same time in different countries.</span></span> <span data-ttu-id="7928a-117">Telefoon records die in deze categorie vallen worden geschreven naar de opslag voor analyse.</span><span class="sxs-lookup"><span data-stu-id="7928a-117">Any phone records that fall into this category are written to storage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7928a-118">Vereisten</span><span class="sxs-lookup"><span data-stu-id="7928a-118">Prerequisites</span></span>

<span data-ttu-id="7928a-119">In deze zelfstudie hebt u telefonische oproep gegevens met behulp van een client-app die voorbeeld telefoongesprek metagegevens genereert simuleren.</span><span class="sxs-lookup"><span data-stu-id="7928a-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="7928a-120">Aantal records die de app produceert eruitzien als frauduleus aanroepen.</span><span class="sxs-lookup"><span data-stu-id="7928a-120">Some of the records that the app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="7928a-121">Voordat u begint, zorg er dan voor dat u hebt het volgende:</span><span class="sxs-lookup"><span data-stu-id="7928a-121">Before you start, make sure you have the following:</span></span>

* <span data-ttu-id="7928a-122">Een Azure-account.</span><span class="sxs-lookup"><span data-stu-id="7928a-122">An Azure account.</span></span>
* <span data-ttu-id="7928a-123">De aanroep-gebeurtenis generator-app.</span><span class="sxs-lookup"><span data-stu-id="7928a-123">The call-event generator app.</span></span> <span data-ttu-id="7928a-124">U kunt dit ophalen door het downloaden van de [TelcoGenerator.zip bestand](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) uit het Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="7928a-124">You can get this by downloading the [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from the Microsoft Download Center.</span></span> <span data-ttu-id="7928a-125">Pak het pakket naar een map op uw computer.</span><span class="sxs-lookup"><span data-stu-id="7928a-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="7928a-126">Als u wilt de bron code en voer de app in een foutopsporingsprogramma wilt zien, kunt u de bron-code van de app downloaden [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="7928a-126">If you want to see the source code and run the app in a debugger, you can get the app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="7928a-127">Windows kan het gedownloade ZIP-bestand blokkeren.</span><span class="sxs-lookup"><span data-stu-id="7928a-127">Windows might block the downloaded .zip file.</span></span> <span data-ttu-id="7928a-128">Als u deze kan niet uitpakken, met de rechtermuisknop op het bestand en selecteer **eigenschappen**.</span><span class="sxs-lookup"><span data-stu-id="7928a-128">If you can't unzip it, right-click the file and select **Properties**.</span></span> <span data-ttu-id="7928a-129">Als u het bericht 'dit bestand afkomstig zijn van een andere computer en mogelijk geblokkeerd om deze computer te beschermen' ziet, selecteert u de **blokkering** optie en klik vervolgens op **toepassen**.</span><span class="sxs-lookup"><span data-stu-id="7928a-129">If you see the "This file came from another computer and might be blocked to help protect this computer" message, select the **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="7928a-130">Als u onderzoeken van de resultaten van de Streaming Analytics-taak wilt, moet u ook een hulpprogramma voor het weergeven van de inhoud van een Azure Blob Storage-container.</span><span class="sxs-lookup"><span data-stu-id="7928a-130">If you want to examine the results of the Streaming Analytics job, you also need a tool for viewing the contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="7928a-131">Als u Visual Studio gebruikt, kunt u [Azure-Tools voor Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) of [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="7928a-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="7928a-132">U kunt ook zelfstandige hulpprogramma's zoals installeren [Azure Opslagverkenner](http://storageexplorer.com/) of [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="7928a-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-to-ingest-events"></a><span data-ttu-id="7928a-133">Maken van een Azure event hubs om op te nemen van gebeurtenissen</span><span class="sxs-lookup"><span data-stu-id="7928a-133">Create an Azure event hubs to ingest events</span></span>

<span data-ttu-id="7928a-134">Voor het analyseren van een gegevensstroom u *opnemen* in Azure.</span><span class="sxs-lookup"><span data-stu-id="7928a-134">To analyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="7928a-135">Een gangbare manier voor het opnemen van gegevens is met [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), waarmee u miljoenen gebeurtenissen per seconde opnemen, en vervolgens verwerken en opslaan van gegevens van de gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="7928a-135">A typical way to ingest data is to use [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store the event information.</span></span> <span data-ttu-id="7928a-136">Voor deze zelfstudie een event hub maken en vervolgens de aanroep-gebeurtenis-generator-app aanroepgegevens verzenden naar event hub hebt.</span><span class="sxs-lookup"><span data-stu-id="7928a-136">For this tutorial, you create an event hub and then have the call-event generator app send call data to that event hub.</span></span> <span data-ttu-id="7928a-137">Zie voor meer informatie over event hubs de [Azure Service Bus-documentatie](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="7928a-137">For more about event hubs, see the [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="7928a-138">Zie voor een meer gedetailleerde versie van deze procedure [een Event Hubs-naamruimte en een event hub met de Azure portal maken](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="7928a-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using the Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="7928a-139">Een naamruimte en event hub maken</span><span class="sxs-lookup"><span data-stu-id="7928a-139">Create a namespace and event hub</span></span>
<span data-ttu-id="7928a-140">In deze procedure maakt u eerst een event hub-naamruimte maken en vervolgens het toevoegen van een event hub aan die namepsace.</span><span class="sxs-lookup"><span data-stu-id="7928a-140">In this procedure, you first create an event hub namespace, and then you add an event hub to that namepsace.</span></span> <span data-ttu-id="7928a-141">Event hub-naamruimten worden gebruikt voor het gerelateerde gebeurtenis bus exemplaren logisch groeperen.</span><span class="sxs-lookup"><span data-stu-id="7928a-141">Event hub namespaces are used to logically group related event bus instances.</span></span> 

1. <span data-ttu-id="7928a-142">Meld u aan bij de Azure-portal en klikt u op **nieuw** > **Internet der dingen** > **Event Hub**.</span><span class="sxs-lookup"><span data-stu-id="7928a-142">Log  into the Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="7928a-143">In de **naamruimte maken** blade, voer de naam van een naamruimte zoals `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="7928a-143">In the **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="7928a-144">U kunt een naam voor de naamruimte, maar de naam moet geldig zijn voor een URL en deze uniek zijn binnen Azure.</span><span class="sxs-lookup"><span data-stu-id="7928a-144">You can use any name for the namespace, but the name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="7928a-145">Selecteer een abonnement maken of een resourcegroep kiezen, en klikt u op **maken**.</span><span class="sxs-lookup"><span data-stu-id="7928a-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Een event hub-naamruimte maken](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="7928a-147">Wanneer de naamruimte is voltooid implementeren, moet u de event hub-naamruimte vinden in uw lijst met Azure-resources.</span><span class="sxs-lookup"><span data-stu-id="7928a-147">When the namespace has finished deploying, find the event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="7928a-148">Klik op de nieuwe naamruimte en klik op de blade naamruimte  **+ &nbsp;Event Hub**.</span><span class="sxs-lookup"><span data-stu-id="7928a-148">Click the new namespace, and in the namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="7928a-149">De knop toevoegen Event Hub voor het maken van nieuwe event hub</span><span class="sxs-lookup"><span data-stu-id="7928a-149">The Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="7928a-150">Naam van de nieuwe event hub `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="7928a-150">Name the new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="7928a-151">U kunt een andere naam gebruiken.</span><span class="sxs-lookup"><span data-stu-id="7928a-151">You can use a different name.</span></span> <span data-ttu-id="7928a-152">Als u dit doet, noteer, omdat u de naam van de later nodig.</span><span class="sxs-lookup"><span data-stu-id="7928a-152">If you do, make a note of it, because you need the name later.</span></span> <span data-ttu-id="7928a-153">U hoeft niet alle andere opties voor de event hub nu instellen.</span><span class="sxs-lookup"><span data-stu-id="7928a-153">You don't need to set any other options for the event hub right now.</span></span>

    ![Blade voor het maken van nieuwe event hub](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="7928a-155">Klik op **Create**.</span><span class="sxs-lookup"><span data-stu-id="7928a-155">Click **Create**.</span></span>
### <a name="grant-access-to-the-event-hub-and-get-a-connection-string"></a><span data-ttu-id="7928a-156">Toegang verlenen tot de event hub en een verbindingsreeks ophalen</span><span class="sxs-lookup"><span data-stu-id="7928a-156">Grant access to the event hub and get a connection string</span></span>

<span data-ttu-id="7928a-157">Voordat een proces gegevens naar een event hub verzenden kan, moet een beleid waarmee u de juiste toegang hebben in de event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-157">Before a process can send data to an event hub, the event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="7928a-158">Het toegangsbeleid produceert een verbindingsreeks die autorisatie-informatie bevat.</span><span class="sxs-lookup"><span data-stu-id="7928a-158">The access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="7928a-159">Klik op de blade gebeurtenis naamruimte **Event Hubs** en klik vervolgens op de naam van uw nieuwe event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-159">In the event namespace blade, click **Event Hubs** and then click the name of your new event hub.</span></span>

2.  <span data-ttu-id="7928a-160">Klik in de hubblade gebeurtenis **gedeeld toegangsbeleid** en klik vervolgens op  **+ &nbsp;toevoegen**.</span><span class="sxs-lookup"><span data-stu-id="7928a-160">In the event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="7928a-161">Zorg ervoor dat u werkt met de event hub, niet de event hub-naamruimte.</span><span class="sxs-lookup"><span data-stu-id="7928a-161">Make sure you're working with the event hub, not the event hub namespace.</span></span>

3.  <span data-ttu-id="7928a-162">Een beleid met de naam toevoegen `sa-policy-manage-demo` en voor **Claim**, selecteer **beheren**.</span><span class="sxs-lookup"><span data-stu-id="7928a-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Blade voor een nieuwe event hub-beleid maken](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="7928a-164">Klik op **Create**.</span><span class="sxs-lookup"><span data-stu-id="7928a-164">Click **Create**.</span></span>

5.  <span data-ttu-id="7928a-165">Nadat het beleid is geïmplementeerd, klikt u op het in de lijst met beleidsregels voor gedeelde toegang.</span><span class="sxs-lookup"><span data-stu-id="7928a-165">After the policy has been deployed, click it in the list of shared access policies.</span></span>

6.  <span data-ttu-id="7928a-166">In het vak **CONNECTION STRING-primaire sleutel** en klik op de knop kopiëren naast de verbindingsreeks.</span><span class="sxs-lookup"><span data-stu-id="7928a-166">Find the box labeled **CONNECTION STRING-PRIMARY KEY** and click the copy button next to the connection string.</span></span> 
    
    ![Kopiëren van de primaire verbinding string-sleutel van het toegangsbeleid](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="7928a-168">De verbindingsreeks in een teksteditor plakken.</span><span class="sxs-lookup"><span data-stu-id="7928a-168">Paste the connection string into a text editor.</span></span> <span data-ttu-id="7928a-169">U moet deze verbindingsreeks voor de volgende sectie, nadat u een aantal kleine wijzigingen aangebracht.</span><span class="sxs-lookup"><span data-stu-id="7928a-169">You need this connection string for the next section, after you make some small edits to it.</span></span>

    <span data-ttu-id="7928a-170">De verbindingsreeks ziet er als volgt:</span><span class="sxs-lookup"><span data-stu-id="7928a-170">The connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="7928a-171">U ziet dat de verbindingsreeks meerdere sleutel / waarde-paren bevat, gescheiden door puntkomma's: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, en `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="7928a-171">Notice that the connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-the-event-generator-application"></a><span data-ttu-id="7928a-172">Configureren en starten van de gebeurtenis generator-toepassing</span><span class="sxs-lookup"><span data-stu-id="7928a-172">Configure and start the event generator application</span></span>

<span data-ttu-id="7928a-173">Voordat u de app TelcoGenerator, configureren u deze zo dat deze aanroep records wordt verzonden naar de event hub die u zojuist hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="7928a-173">Before you start the TelcoGenerator app, you configure it so that it will send call records to the event hub you just created.</span></span>

### <a name="configure-the-telcogeneratorapp"></a><span data-ttu-id="7928a-174">De TelcoGeneratorapp configureren</span><span class="sxs-lookup"><span data-stu-id="7928a-174">Configure the TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="7928a-175">In de editor waar u de verbindingsreeks hebt gekopieerd, noteert u de `EntityPath` waarde, en verwijder vervolgens de `EntityPath` paar (Vergeet niet om te verwijderen van de voorafgaande puntkomma).</span><span class="sxs-lookup"><span data-stu-id="7928a-175">In the editor where you copied the connection string, make a note of the `EntityPath` value, and then remove the `EntityPath` pair (don't forget to remove the semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="7928a-176">In de map waar u het bestand TelcoGenerator.zip zijn uitgepakt, open het bestand telcodatagen.exe.config in een teksteditor.</span><span class="sxs-lookup"><span data-stu-id="7928a-176">In the folder where you unzipped the TelcoGenerator.zip file, open the telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="7928a-177">(Er is meer dan een .config-bestand, dus wees zeker dat u de juiste is geopend).</span><span class="sxs-lookup"><span data-stu-id="7928a-177">(There is more than one .config file, so be sure that you open the right one.)</span></span>

3.  <span data-ttu-id="7928a-178">In de `<appSettings>` element dit doen:</span><span class="sxs-lookup"><span data-stu-id="7928a-178">In the `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="7928a-179">Stel de waarde van de `EventHubName` sleutel op de naam van de event hub (dat wil zeggen, met de waarde van de entiteit-pad).</span><span class="sxs-lookup"><span data-stu-id="7928a-179">Set the value of the `EventHubName` key to the event hub name (that is, to the value of the entity path).</span></span>
    * <span data-ttu-id="7928a-180">Stel de waarde van de `Microsoft.ServiceBus.ConnectionString` sleutel op de verbindingsreeks.</span><span class="sxs-lookup"><span data-stu-id="7928a-180">Set the value of the `Microsoft.ServiceBus.ConnectionString` key to the connection string.</span></span> 

    <span data-ttu-id="7928a-181">De `<appSettings>` sectie eruit als in het volgende voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="7928a-181">The `<appSettings>` section will look like the following example.</span></span> <span data-ttu-id="7928a-182">(Voor de duidelijkheid we ingepakt de regels en bepaalde tekens verwijderd uit het verificatietoken.)</span><span class="sxs-lookup"><span data-stu-id="7928a-182">(For clarity, we wrapped the lines and removed some characters from the authorization token.)</span></span>

    ![App-configuratiebestand voor de TelcoGenerator weergegeven van de event hub en de verbindingsreeks](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="7928a-184">Sla het bestand op.</span><span class="sxs-lookup"><span data-stu-id="7928a-184">Save the file.</span></span> 

### <a name="start-the-app"></a><span data-ttu-id="7928a-185">De app te starten</span><span class="sxs-lookup"><span data-stu-id="7928a-185">Start the app</span></span>
1.  <span data-ttu-id="7928a-186">Open een opdrachtvenster en Ga naar de map waar de app TelcoGenerator uitgepakt is.</span><span class="sxs-lookup"><span data-stu-id="7928a-186">Open a command window and change to the folder where the TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="7928a-187">Voer de volgende opdracht in:</span><span class="sxs-lookup"><span data-stu-id="7928a-187">Enter the following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="7928a-188">De parameters zijn:</span><span class="sxs-lookup"><span data-stu-id="7928a-188">The parameters are:</span></span> 

    * <span data-ttu-id="7928a-189">Aantal CDR per uur.</span><span class="sxs-lookup"><span data-stu-id="7928a-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="7928a-190">SIM-kaart fraude waarschijnlijkheid: Hoe vaak als een percentage van alle aanroepen, dat de app een aanroep van frauduleuze te simuleren.</span><span class="sxs-lookup"><span data-stu-id="7928a-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that the app should simulate a fraudulent call.</span></span> <span data-ttu-id="7928a-191">De waarde.2 betekent dat ongeveer 20% van de aanroep van records eruit frauduleuze.</span><span class="sxs-lookup"><span data-stu-id="7928a-191">The value .2 means that about 20% of the call records will look fraudulent.</span></span>
    * <span data-ttu-id="7928a-192">De duur in uren.</span><span class="sxs-lookup"><span data-stu-id="7928a-192">Duration in hours.</span></span> <span data-ttu-id="7928a-193">Het aantal uren dat de app moet worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-193">The number of hours that the app should run.</span></span> <span data-ttu-id="7928a-194">U kunt ook de app elk gewenst moment stoppen door op Ctrl + C drukken op de opdrachtregel.</span><span class="sxs-lookup"><span data-stu-id="7928a-194">You can also stop the app any time by pressing Ctrl+C at the command line.</span></span>

    <span data-ttu-id="7928a-195">Na enkele seconden, wordt de app gestart telefoongesprek records weergeven op het scherm, zoals het zendt deze naar de event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-195">After a few seconds, the app starts displaying phone call records on the screen as it sends them to the event hub.</span></span>

<span data-ttu-id="7928a-196">Enkele van de sleutelvelden die u in deze toepassing realtime fraude-detectie gebruiken wilt zijn de volgende:</span><span class="sxs-lookup"><span data-stu-id="7928a-196">Some of the key fields that you will be using in this real-time fraud detection application are the following:</span></span>

|<span data-ttu-id="7928a-197">**Record**</span><span class="sxs-lookup"><span data-stu-id="7928a-197">**Record**</span></span>|<span data-ttu-id="7928a-198">**Definitie**</span><span class="sxs-lookup"><span data-stu-id="7928a-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="7928a-199">Het tijdstempel voor de aanroep van de begintijd.</span><span class="sxs-lookup"><span data-stu-id="7928a-199">The timestamp for the call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="7928a-200">De telefoon switch waarmee verbinding wordt gemaakt de aanroep.</span><span class="sxs-lookup"><span data-stu-id="7928a-200">The telephone switch used to connect the call.</span></span> <span data-ttu-id="7928a-201">In dit voorbeeld zijn de switches tekenreeksen die staan voor het land van oorsprong (VS, China, UK, Duitsland of Australië).</span><span class="sxs-lookup"><span data-stu-id="7928a-201">For this example, the switches are strings that represent the country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="7928a-202">Het telefoonnummer van de aanroepfunctie.</span><span class="sxs-lookup"><span data-stu-id="7928a-202">The phone number of the caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="7928a-203">De International Mobile Subscriber Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="7928a-203">The International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="7928a-204">Dit is de unieke id van de aanroepfunctie.</span><span class="sxs-lookup"><span data-stu-id="7928a-204">This is the Unique identifier of the caller.</span></span> |
|`CalledNum`|<span data-ttu-id="7928a-205">Het telefoonnummer van de ontvanger aanroep.</span><span class="sxs-lookup"><span data-stu-id="7928a-205">The phone number of the call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="7928a-206">International Mobile Subscriber Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="7928a-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="7928a-207">Dit is de unieke id van de ontvanger.</span><span class="sxs-lookup"><span data-stu-id="7928a-207">This is the unique identifier of the call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-to-manage-streaming-data"></a><span data-ttu-id="7928a-208">Maken van een Stream Analytics-taak voor het beheren van streaminggegevens</span><span class="sxs-lookup"><span data-stu-id="7928a-208">Create a Stream Analytics job to manage streaming data</span></span>

<span data-ttu-id="7928a-209">Nu dat u een stream van de aanroep van gebeurtenissen hebt, kunt u een Stream Analytics-taak instellen.</span><span class="sxs-lookup"><span data-stu-id="7928a-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="7928a-210">De taak leest de gegevens van de event hub die u hebt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="7928a-210">The job will read data from the event hub that you set up.</span></span> 

### <a name="create-the-job"></a><span data-ttu-id="7928a-211">De taak maken</span><span class="sxs-lookup"><span data-stu-id="7928a-211">Create the job</span></span> 

1. <span data-ttu-id="7928a-212">Klik in de Azure-portal op **nieuw** > **Internet der dingen** > **Stream Analytics-taak**.</span><span class="sxs-lookup"><span data-stu-id="7928a-212">In the Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="7928a-213">Naam van de taak `sa_frauddetection_job_demo`, een abonnement, resourcegroep en locatie opgeven.</span><span class="sxs-lookup"><span data-stu-id="7928a-213">Name the job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="7928a-214">Het is een goed idee om de taak en de event hub plaatsen in dezelfde regio voor de beste prestaties en betaalt u niet aan het overbrengen van gegevens tussen regio's.</span><span class="sxs-lookup"><span data-stu-id="7928a-214">It's a good idea to place the job and the event hub in the same region for best performance and so that you don't pay to transfer data between regions.</span></span>

    ![Nieuwe Stream Analytics-taak maken](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="7928a-216">Klik op **Create**.</span><span class="sxs-lookup"><span data-stu-id="7928a-216">Click **Create**.</span></span>

    <span data-ttu-id="7928a-217">De taak is gemaakt en de portal geeft taakdetails weer.</span><span class="sxs-lookup"><span data-stu-id="7928a-217">The job is created and the portal displays job details.</span></span> <span data-ttu-id="7928a-218">Er is niets echter nog wordt uitgevoerd: u moet de taak configureren voordat deze kan worden gestart.</span><span class="sxs-lookup"><span data-stu-id="7928a-218">Nothing is running yet, though—you have to configure the job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="7928a-219">Taak invoer configureren</span><span class="sxs-lookup"><span data-stu-id="7928a-219">Configure job input</span></span>

1. <span data-ttu-id="7928a-220">In het dashboard of de **alle resources** blade, zoeken en selecteert u de `sa_frauddetection_job_demo` Stream Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="7928a-220">In the dashboard or the **All resources** blade, find and select the `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="7928a-221">In de **taak topologie** sectie van de blade Stream Analytics-taak klikt u op de **invoer** vak.</span><span class="sxs-lookup"><span data-stu-id="7928a-221">In the **Job Topology** section of the Stream Analytics job blade, click the **Input** box.</span></span>

    ![Invoervak onder topologie in de blade Streaming Analytics-taak](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="7928a-223">Klik op  **+ &nbsp;toevoegen** en vult u de blade met deze waarden:</span><span class="sxs-lookup"><span data-stu-id="7928a-223">Click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="7928a-224">**Invoeralias**: Gebruik de naam `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="7928a-224">**Input alias**: Use the name `CallStream`.</span></span> <span data-ttu-id="7928a-225">Als u een andere naam gebruikt, noteer het omdat u hebt deze later nodig.</span><span class="sxs-lookup"><span data-stu-id="7928a-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="7928a-226">**Gegevensbrontype**: Selecteer **gegevensstroom**.</span><span class="sxs-lookup"><span data-stu-id="7928a-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="7928a-227">(**Referentiegegevens** verwijst naar statische lookup-gegevens, die u in deze zelfstudie niet gebruikt.)</span><span class="sxs-lookup"><span data-stu-id="7928a-227">(**Reference data** refers to static lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="7928a-228">**Bron**: Selecteer **Event hub**.</span><span class="sxs-lookup"><span data-stu-id="7928a-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="7928a-229">**Optie importeren**: Selecteer **gebruik event hub uit het huidige abonnement**.</span><span class="sxs-lookup"><span data-stu-id="7928a-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="7928a-230">**Service bus-naamruimte**: Selecteer de event hub-naamruimte die u eerder hebt gemaakt (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="7928a-230">**Service bus namespace**: Select the event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="7928a-231">**Event hub**: Selecteer de event hub die u eerder hebt gemaakt (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="7928a-231">**Event hub**: Select the event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="7928a-232">**Naam Event hub beleid**: Selecteer het beleid dat u eerder hebt gemaakt (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="7928a-232">**Event hub policy name**: Select the access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Nieuwe invoer voor Streaming Analytics-taak maken](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="7928a-234">Klik op **Create**.</span><span class="sxs-lookup"><span data-stu-id="7928a-234">Click **Create**.</span></span>

## <a name="create-queries-to-transform-real-time-data"></a><span data-ttu-id="7928a-235">Query's voor het transformeren van real-time gegevens maken</span><span class="sxs-lookup"><span data-stu-id="7928a-235">Create queries to transform real-time data</span></span>

<span data-ttu-id="7928a-236">U hebt op dit moment een Stream Analytics-taak lezen van een binnenkomende gegevensstroom instellen.</span><span class="sxs-lookup"><span data-stu-id="7928a-236">At this point, you have a Stream Analytics job set up to read an incoming data stream.</span></span> <span data-ttu-id="7928a-237">De volgende stap is het maken van een transformatie waarin de gegevens in realtime worden geanalyseerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-237">The next step is to create a transformation that analyzes the data in real time.</span></span> <span data-ttu-id="7928a-238">U doen dit door een query te maken.</span><span class="sxs-lookup"><span data-stu-id="7928a-238">You do this by creating a query.</span></span> <span data-ttu-id="7928a-239">Stream Analytics ondersteunt een eenvoudig, declaratief querymodel die transformaties voor realtime-verwerking beschrijft.</span><span class="sxs-lookup"><span data-stu-id="7928a-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="7928a-240">De query's een SQL-achtige taal gebruiken die bepaalde extensies die specifiek zijn voor stream analytics heeft.</span><span class="sxs-lookup"><span data-stu-id="7928a-240">The queries use a SQL-like language that has some extensions specific to stream analytics.</span></span> 

<span data-ttu-id="7928a-241">Een zeer eenvoudige query eventueel gewoon de binnenkomende gegevens lezen.</span><span class="sxs-lookup"><span data-stu-id="7928a-241">A very simple query might simply read all the incoming data.</span></span> <span data-ttu-id="7928a-242">U maken vaak echter query's die eruit voor specifieke gegevens of relaties in de gegevens zien.</span><span class="sxs-lookup"><span data-stu-id="7928a-242">However, you often create queries that look for specific data or for relationships in the data.</span></span> <span data-ttu-id="7928a-243">In deze sectie van de zelfstudie wordt u maken en testen van meerdere query's voor meer informatie over een aantal manieren waarop u kunt een invoerstroom voor analyse te transformeren.</span><span class="sxs-lookup"><span data-stu-id="7928a-243">In this section of the tutorial, you will create and test several queries to learn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="7928a-244">De query's die u hier maakt, wordt alleen de getransformeerde gegevens naar het scherm weergeven.</span><span class="sxs-lookup"><span data-stu-id="7928a-244">The queries you create here will just display the transformed data to the screen.</span></span> <span data-ttu-id="7928a-245">In een volgende sectie configureert u uitvoerlocatie en een query die de getransformeerde gegevens naar die sink schrijft.</span><span class="sxs-lookup"><span data-stu-id="7928a-245">In a later section, you'll configure an output sink and a query that writes the transformed data to that sink.</span></span>

<span data-ttu-id="7928a-246">Zie voor meer informatie over de taal, de [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="7928a-246">To learn more about the language, see the [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="7928a-247">Voorbeeldgegevens ophalen voor het testen van query 's</span><span class="sxs-lookup"><span data-stu-id="7928a-247">Get sample data for testing queries</span></span>

<span data-ttu-id="7928a-248">De app TelcoGenerator aanroep records verzendt naar de event hub en uw Stream Analytics-taak is geconfigureerd voor het lezen van de event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-248">The TelcoGenerator app is sending call records to the event hub, and your Stream Analytics job is configured to read from the event hub.</span></span> <span data-ttu-id="7928a-249">U kunt een query voor het testen van de taak om ervoor te zorgen dat deze correct wordt gelezen.</span><span class="sxs-lookup"><span data-stu-id="7928a-249">You can use a query to test the job to make sure that it's reading correctly.</span></span> <span data-ttu-id="7928a-250">Als u wilt testen een query in de Azure-console, moet u voorbeeldgegevens.</span><span class="sxs-lookup"><span data-stu-id="7928a-250">To  test a query in the Azure console, you need sample data.</span></span> <span data-ttu-id="7928a-251">Voor dit scenario moet u voorbeeldgegevens extraheren uit de stroom die afkomstig is in de event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-251">For this walkthrough, you'll extract sample data from the stream that's coming into the event hub.</span></span>

1. <span data-ttu-id="7928a-252">Zorg ervoor dat de app TelcoGenerator wordt uitgevoerd en aanroep records produceren.</span><span class="sxs-lookup"><span data-stu-id="7928a-252">Make sure that the TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="7928a-253">Terug naar de blade Streaming Analytics-taak in de portal.</span><span class="sxs-lookup"><span data-stu-id="7928a-253">In the portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="7928a-254">(Als u de blade hebt gesloten, zoekt u naar `sa_frauddetection_job_demo` in de **alle resources** blade.)</span><span class="sxs-lookup"><span data-stu-id="7928a-254">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
3. <span data-ttu-id="7928a-255">Klik op de **Query** vak.</span><span class="sxs-lookup"><span data-stu-id="7928a-255">Click the **Query** box.</span></span> <span data-ttu-id="7928a-256">Azure geeft een lijst van de invoer en uitvoer die zijn geconfigureerd voor de taak en kunt u een query maken die u de invoerstroom Transformeren kunt zoals deze wordt verzonden naar de uitvoer.</span><span class="sxs-lookup"><span data-stu-id="7928a-256">Azure lists the inputs and outputs that are configured for the job, and lets you create a query that lets you transform the input stream as it is sent to the output.</span></span>
4. <span data-ttu-id="7928a-257">In de **Query** blade, klik op de puntjes naast de `CallStream` invoer- en selecteer vervolgens **voorbeeldgegevens uit invoer**.</span><span class="sxs-lookup"><span data-stu-id="7928a-257">In the **Query** blade, click the dots next to the `CallStream` input and then select **Sample data from input**.</span></span>

    ![Menuopties met voorbeeldgegevens voor de vermelding van de Streaming Analytics-taak met 'Voorbeeldgegevens uit invoer' geselecteerd](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="7928a-259">Hiermee opent u een blade die u opgeven hoeveel voorbeeldgegevens ophalen kunt, gedefinieerd in termen van hoe lang de invoerstroom lezen.</span><span class="sxs-lookup"><span data-stu-id="7928a-259">This opens a blade that lets you specify how much sample data to get, defined in terms of how long to read the input stream.</span></span>

5. <span data-ttu-id="7928a-260">Stel **minuten** 3 en klik vervolgens op **OK**.</span><span class="sxs-lookup"><span data-stu-id="7928a-260">Set **Minutes** to 3 and then click **OK**.</span></span> 
    
    ![Opties voor de steekproef van de invoerstroom met '3 minuten' geselecteerd.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="7928a-262">Azure 3 minuten aan gegevens uit de invoerstroom voorbeelden en waarschuwt u als de voorbeeldgegevens gereed is.</span><span class="sxs-lookup"><span data-stu-id="7928a-262">Azure samples 3 minutes' worth of data from the input stream and notifies you when the sample data is ready.</span></span> <span data-ttu-id="7928a-263">(Dit duurt even.)</span><span class="sxs-lookup"><span data-stu-id="7928a-263">(This takes a short while.)</span></span> 

<span data-ttu-id="7928a-264">De voorbeeldgegevens worden tijdelijk opgeslagen en is beschikbaar wanneer u hebt de queryvenster geopend.</span><span class="sxs-lookup"><span data-stu-id="7928a-264">The sample data is stored temporarily and is available while you have the query window open.</span></span> <span data-ttu-id="7928a-265">Als u het query-venster sluit, wordt de voorbeeldgegevens worden genegeerd en hebt u een nieuwe set met voorbeeldgegevens.</span><span class="sxs-lookup"><span data-stu-id="7928a-265">If you close the query window, the sample data is discarded, and you'll have to create a new set of sample data.</span></span> 

<span data-ttu-id="7928a-266">Als alternatief kunt u een .json-bestand met voorbeeldgegevens erin krijgen [vanuit GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), en vervolgens uploaden dat .json-bestand te gebruiken als u voorbeeldgegevens voor de `CallStream` invoer.</span><span class="sxs-lookup"><span data-stu-id="7928a-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file to use as sample data for the `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="7928a-267">Testen met behulp van een Pass Through-query</span><span class="sxs-lookup"><span data-stu-id="7928a-267">Test using a pass-through query</span></span>

<span data-ttu-id="7928a-268">Als u archiveren van elke gebeurtenis wilt, kunt u een Pass Through-query om te lezen van de velden in de nettolading van de gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="7928a-268">If you want to archive every event, you can use a pass-through query to read all the fields in the payload of the event.</span></span>

1. <span data-ttu-id="7928a-269">Voer deze query in het queryvenster:</span><span class="sxs-lookup"><span data-stu-id="7928a-269">In the query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="7928a-270">Net als bij SQL, trefwoorden zijn niet hoofdlettergevoelig en maakt niet uit witruimte.</span><span class="sxs-lookup"><span data-stu-id="7928a-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="7928a-271">In deze query `CallStream` is de alias die u hebt opgegeven toen u de invoer hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="7928a-271">In this query, `CallStream` is the alias that you specified when you created the input.</span></span> <span data-ttu-id="7928a-272">Als u een andere alias gebruikt, gebruikt u de naam.</span><span class="sxs-lookup"><span data-stu-id="7928a-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="7928a-273">Klik op **Test**.</span><span class="sxs-lookup"><span data-stu-id="7928a-273">Click **Test**.</span></span>

    <span data-ttu-id="7928a-274">De Stream Analytics-taak wordt de query uitgevoerd op de voorbeeldgegevens en de uitvoer wordt weergegeven aan de onderkant van het venster.</span><span class="sxs-lookup"><span data-stu-id="7928a-274">The Stream Analytics job runs the query against the sample data and displays the output at the bottom of the window.</span></span> <span data-ttu-id="7928a-275">Dit geeft aan of de event hub en de Streaming Analytics-taak juist zijn geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-275">This tells you that the event hub and the Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="7928a-276">(Zoals is aangegeven, later maakt u uitvoerlocatie dat de query kan gegevens te schrijven.)</span><span class="sxs-lookup"><span data-stu-id="7928a-276">(As noted, later you'll create an output sink that the query can write data to.)</span></span>

    ![Stream Analytics-taak uitvoer geproduceerd, 73 records die zijn gegenereerd worden weergegeven](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="7928a-278">Het exacte aantal records dat er afhankelijk van hoeveel records zijn opgenomen in uw voorbeeld 3 minuten.</span><span class="sxs-lookup"><span data-stu-id="7928a-278">The exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-the-number-of-fields-using-a-column-projection"></a><span data-ttu-id="7928a-279">Verminder het aantal velden met behulp van een kolom-projectie</span><span class="sxs-lookup"><span data-stu-id="7928a-279">Reduce the number of fields using a column projection</span></span>

<span data-ttu-id="7928a-280">In veel gevallen hoeft uw analyse niet alle kolommen uit de invoerstroom.</span><span class="sxs-lookup"><span data-stu-id="7928a-280">In many cases, your analysis doesn't need all the columns from the input stream.</span></span> <span data-ttu-id="7928a-281">U kunt een query gebruiken om een kleiner aantal geretourneerde velden dan in de Pass Through-query te projecteren.</span><span class="sxs-lookup"><span data-stu-id="7928a-281">You can use a query to project a smaller set of returned fields than in the pass-through query.</span></span>

1. <span data-ttu-id="7928a-282">De query in de code-editor wijzigen in het volgende:</span><span class="sxs-lookup"><span data-stu-id="7928a-282">Change the query in the code editor to the following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="7928a-283">Klik op **Test** opnieuw.</span><span class="sxs-lookup"><span data-stu-id="7928a-283">Click **Test** again.</span></span> 

    ![Stream Analytics-taak uitvoer geproduceerd voor projectie, met 25 records die zijn gegenereerd](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="7928a-285">Aantal binnenkomende aanroepen per regio: tumblingvenster met aggregatie</span><span class="sxs-lookup"><span data-stu-id="7928a-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="7928a-286">Stel dat u wilt het aantal inkomende aanroepen per regio.</span><span class="sxs-lookup"><span data-stu-id="7928a-286">Suppose you want to count the number of incoming calls per region.</span></span> <span data-ttu-id="7928a-287">Wanneer u uitvoeren van statistische functies wilt zoals telling, in het streamen van gegevens, moet u de stroom segmenteren in tijdelijke eenheden (omdat de gegevensstroom zelf effectief eindeloze is).</span><span class="sxs-lookup"><span data-stu-id="7928a-287">In streaming data, when you want to perform aggregate functions like counting, you need to segment the stream into temporal units (since the data stream itself is effectively endless).</span></span> <span data-ttu-id="7928a-288">Hiervoor gebruikt een Streaming Analytics [venster functie](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="7928a-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="7928a-289">Vervolgens kunt u werken met de gegevens in dit venster als eenheid.</span><span class="sxs-lookup"><span data-stu-id="7928a-289">You can then work with the data inside that window as a unit.</span></span>

<span data-ttu-id="7928a-290">Voor deze transformatie die u wilt een reeks van tijdelijke windows die elkaar niet overlappen, elk venster heeft een aparte set gegevens die u kunt groeperen en statistische functie.</span><span class="sxs-lookup"><span data-stu-id="7928a-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="7928a-291">Dit type venster wordt aangeduid als een *tumblingvenster* .</span><span class="sxs-lookup"><span data-stu-id="7928a-291">This type of window is referred to as a *Tumbling window* .</span></span> <span data-ttu-id="7928a-292">Binnen de tumblingvenster krijgt u een aantal van de binnenkomende oproepen gegroepeerd op `SwitchNum`, die staat voor het land waar de oproep afkomstig is.</span><span class="sxs-lookup"><span data-stu-id="7928a-292">Within the Tumbling window, you can get a count of the incoming calls grouped by `SwitchNum`, which represents the country where the call originated.</span></span> 

1. <span data-ttu-id="7928a-293">De query in de code-editor wijzigen in het volgende:</span><span class="sxs-lookup"><span data-stu-id="7928a-293">Change the query in the code editor to the following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="7928a-294">Deze query gebruikt de `Timestamp By` -sleutelwoord in de `FROM` component om op te geven welk tijdstempelveld in de invoerstroom moet worden gebruikt voor het definiëren van de tumblingvenster.</span><span class="sxs-lookup"><span data-stu-id="7928a-294">This query uses the `Timestamp By` keyword in the `FROM` clause to specify which timestamp field in the input stream to use to define the Tumbling window.</span></span> <span data-ttu-id="7928a-295">In dit geval de gegevens in het venster wordt verdeeld in segmenten door de `CallRecTime` veld in elke record.</span><span class="sxs-lookup"><span data-stu-id="7928a-295">In this case, the window divides the data into segments by the `CallRecTime` field in each record.</span></span> <span data-ttu-id="7928a-296">(Als er is geen veld is opgegeven, wordt de windowing-bewerking wordt de tijd dat elke gebeurtenis op de event hub binnenkomt.</span><span class="sxs-lookup"><span data-stu-id="7928a-296">(If no field is specified, the windowing operation uses the time that each event arrives at the event hub.</span></span> <span data-ttu-id="7928a-297">Zie 'Tijd tegenover toepassing aankomsttijd' in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="7928a-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="7928a-298">De projectie omvat `System.Timestamp`, die een tijdstempel voor het einde van elke venster retourneert.</span><span class="sxs-lookup"><span data-stu-id="7928a-298">The projection includes `System.Timestamp`, which returns a timestamp for the end of each window.</span></span> 

    <span data-ttu-id="7928a-299">Als u wilt opgeven dat u wilt gebruiken een tumblingvenster, gebruikt u de [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) werken in de `GROUP BY `component.</span><span class="sxs-lookup"><span data-stu-id="7928a-299">To specify that you want to use a Tumbling window, you use the [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in the `GROUP BY `clause.</span></span> <span data-ttu-id="7928a-300">In de functie geeft u een tijdseenheid (van een microseconden naar een dag) en een venstergrootte (hoeveel units).</span><span class="sxs-lookup"><span data-stu-id="7928a-300">In the function, you specify a time unit (anywhere from a microsecond to a day) and a window size (how many units).</span></span> <span data-ttu-id="7928a-301">In dit voorbeeld wordt bestaat de tumblingvenster uit 5 seconden intervallen, zodat u een telling per land voor elke vijf seconden aan aanroepen krijgt.</span><span class="sxs-lookup"><span data-stu-id="7928a-301">In this example, the Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="7928a-302">Klik op **Test** opnieuw.</span><span class="sxs-lookup"><span data-stu-id="7928a-302">Click **Test** again.</span></span> <span data-ttu-id="7928a-303">U ziet dat in de resultaten van de tijdstempels onder **WindowEnd** in stappen van 5 seconden zijn.</span><span class="sxs-lookup"><span data-stu-id="7928a-303">In the results, notice that the timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Stream Analytics-taak uitvoer geproduceerd voor aggregatie, met 13 records die zijn gegenereerd](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="7928a-305">Met behulp van een self-join SIM-fraude te detecteren</span><span class="sxs-lookup"><span data-stu-id="7928a-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="7928a-306">In dit voorbeeld kunt we frauduleuze gebruik aanroepen die afkomstig van dezelfde gebruiker, maar in verschillende locaties binnen 5 seconden van elkaar zijn worden overwegen.</span><span class="sxs-lookup"><span data-stu-id="7928a-306">For this example, we can consider fraudulent usage to be calls that originate from the same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="7928a-307">Bijvoorbeeld, kan niet dezelfde gebruiker daadwerkelijk moet een aanroep van de Verenigde Staten en Australië op hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="7928a-307">For example, the same user can't legitimately make a call from the US and Australia at the same time.</span></span> 

<span data-ttu-id="7928a-308">Om te controleren of deze gevallen, kunt u een self-join van de streaminggegevens toevoegen aan de stroom op basis van de `CallRecTime` waarde.</span><span class="sxs-lookup"><span data-stu-id="7928a-308">To check for these cases, you can use a self-join of the streaming data to join the stream to itself based on the `CallRecTime` value.</span></span> <span data-ttu-id="7928a-309">U kunt vervolgens zoeken aanroep registreert waar de `CallingIMSI` waarde (het oorspronkelijke aantal) is hetzelfde, maar de `SwitchNum` waarde (land van oorsprong) is niet hetzelfde.</span><span class="sxs-lookup"><span data-stu-id="7928a-309">You can then look for call records where the `CallingIMSI` value (the originating number) is the same, but the `SwitchNum` value (country of origin) is not the same.</span></span>

<span data-ttu-id="7928a-310">Wanneer u een join gebruikt met het streamen van gegevens, moet de join bieden dat een aantal beperkingen met betrekking tot hoe ver overeenkomende rijen in de tijd kunnen worden gescheiden.</span><span class="sxs-lookup"><span data-stu-id="7928a-310">When you use a join with streaming data, the join must provide some limits on how far the matching rows can be separated in time.</span></span> <span data-ttu-id="7928a-311">(Zoals eerder opgemerkt, de streaminggegevens is effectief eindeloze.) De grenzen van de tijd voor de relatie zijn opgegeven in de `ON` -component van de join, met behulp van de `DATEDIFF` functie.</span><span class="sxs-lookup"><span data-stu-id="7928a-311">(As noted earlier, the streaming data is effectively endless.) The time bounds for the relationship are specified inside the `ON` clause of the join, using the `DATEDIFF` function .</span></span> <span data-ttu-id="7928a-312">In dit geval is de join gebaseerd op een interval van 5 seconden van de van aanroepgegevens.</span><span class="sxs-lookup"><span data-stu-id="7928a-312">In this case, the join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="7928a-313">De query in de code-editor wijzigen in het volgende:</span><span class="sxs-lookup"><span data-stu-id="7928a-313">Change the query in the code editor to the following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="7928a-314">Deze query is vergelijkbaar met een SQL-join behalve voor de `DATEDIFF` functie in de join.</span><span class="sxs-lookup"><span data-stu-id="7928a-314">This query is like any SQL join except for the `DATEDIFF` function in the join.</span></span> <span data-ttu-id="7928a-315">Dit is een versie van `DATEDIFF` die specifiek zijn voor de Streaming Analytics, en deze moet worden weergegeven de `ON...BETWEEN` component.</span><span class="sxs-lookup"><span data-stu-id="7928a-315">This is a version of `DATEDIFF` that's specific to Streaming Analytics, and it must appear in the `ON...BETWEEN` clause.</span></span> <span data-ttu-id="7928a-316">De parameters zijn een tijdseenheid (seconden in dit voorbeeld) en de aliassen van de twee bronnen voor de join.</span><span class="sxs-lookup"><span data-stu-id="7928a-316">The parameters are a time unit (seconds in this example) and the aliases of the two sources for the join.</span></span> <span data-ttu-id="7928a-317">(Dit verschilt van de standaard SQL `DATEDIFF` functie.)</span><span class="sxs-lookup"><span data-stu-id="7928a-317">(This is different from the standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="7928a-318">De `WHERE` -component bevat de conditie van de aanroep van frauduleuze vlaggen: de oorspronkelijke switches komen niet overeen.</span><span class="sxs-lookup"><span data-stu-id="7928a-318">The `WHERE` clause includes the condition that flags the fraudulent call: the originating switches are not the same.</span></span> 

2. <span data-ttu-id="7928a-319">Klik op **Test** opnieuw.</span><span class="sxs-lookup"><span data-stu-id="7928a-319">Click **Test** again.</span></span> 

    ![Stream Analytics-taak uitvoer geproduceerd voor self-join, zichtbaar 6 records gegenereerd](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="7928a-321">Klik op **Opslaan**.</span><span class="sxs-lookup"><span data-stu-id="7928a-321">Click **Save**.</span></span> <span data-ttu-id="7928a-322">Dit bespaart de zelf join-query als onderdeel van de Streaming Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="7928a-322">This saves the self-join query as part of the Streaming Analytics job.</span></span> <span data-ttu-id="7928a-323">(Deze niet de voorbeeldgegevens opslaan.)</span><span class="sxs-lookup"><span data-stu-id="7928a-323">(It doesn't save the sample data.)</span></span>

    ![Opslaan van Stream Analytics-taak](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-to-store-transformed-data"></a><span data-ttu-id="7928a-325">Uitvoerlocatie voor het opslaan van de getransformeerde gegevens maken</span><span class="sxs-lookup"><span data-stu-id="7928a-325">Create an output sink to store transformed data</span></span>

<span data-ttu-id="7928a-326">Een stroom gebeurtenissen, een event hub als invoer gebruikt voor het opnemen van gebeurtenissen en een query uit te voeren van een transformatie via de stroom die u hebt gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-326">You've defined an event stream, an event hub input to ingest events, and a query to perform a transformation over the stream.</span></span> <span data-ttu-id="7928a-327">De laatste stap is het definiëren van de uitvoerlocatie voor de taak, dat wil zeggen, een plaats de getransformeerde stroom te schrijven.</span><span class="sxs-lookup"><span data-stu-id="7928a-327">The last step is to define an output sink for the job—that is, a place to write the transformed stream to.</span></span> 

<span data-ttu-id="7928a-328">U kunt veel resources gebruiken als uitvoer put: een SQL Server-database, -tabelopslag Data Lake storage, Power BI en zelfs een ander event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="7928a-329">Voor deze zelfstudie hebt u de stroom schrijven naar Azure Blob Storage, een typische keuze is voor het verzamelen van gebeurtenisgegevens voor latere analyse, omdat het is geschikt voor niet-gestructureerde gegevens.</span><span class="sxs-lookup"><span data-stu-id="7928a-329">For this tutorial, you'll write the stream to Azure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="7928a-330">Als u een bestaande blob storage-account hebt, kunt u die kunt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="7928a-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="7928a-331">Voor deze zelfstudie leert u hoe u een nieuw opslagaccount voor deze zelfstudie maakt.</span><span class="sxs-lookup"><span data-stu-id="7928a-331">For this tutorial, we'll show you how to create a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="7928a-332">Een Azure Blob Storage-account maken</span><span class="sxs-lookup"><span data-stu-id="7928a-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="7928a-333">Terug naar de blade Streaming Analytics-taak in de Azure portal.</span><span class="sxs-lookup"><span data-stu-id="7928a-333">In the Azure portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="7928a-334">(Als u de blade hebt gesloten, zoekt u naar `sa_frauddetection_job_demo` in de **alle resources** blade.)</span><span class="sxs-lookup"><span data-stu-id="7928a-334">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
2. <span data-ttu-id="7928a-335">In de **taak topologie** sectie, klikt u op de **uitvoer** vak.</span><span class="sxs-lookup"><span data-stu-id="7928a-335">In the **Job Topology** section, click the **Output** box.</span></span> 
3. <span data-ttu-id="7928a-336">In de **uitvoer** blade, klikt u op  **+ &nbsp;toevoegen** en vult u de blade met deze waarden:</span><span class="sxs-lookup"><span data-stu-id="7928a-336">In the **Outputs** blade, click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="7928a-337">**Uitvoeraliassen**: Gebruik de naam `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="7928a-337">**Output alias**: Use the name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="7928a-338">**Sink**: Selecteer **Blob storage**.</span><span class="sxs-lookup"><span data-stu-id="7928a-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="7928a-339">**Opties voor het importeren**: Selecteer **gebruik blob storage uit het huidige abonnement**.</span><span class="sxs-lookup"><span data-stu-id="7928a-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="7928a-340">**Storage-account**.</span><span class="sxs-lookup"><span data-stu-id="7928a-340">**Storage account**.</span></span> <span data-ttu-id="7928a-341">Selecteer **nieuw opslagaccount maken.**</span><span class="sxs-lookup"><span data-stu-id="7928a-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="7928a-342">**Storage-account** (tweede vak).</span><span class="sxs-lookup"><span data-stu-id="7928a-342">**Storage account** (second box).</span></span> <span data-ttu-id="7928a-343">Voer `YOURNAMEsademo`, waarbij `YOURNAME` uw naam of een andere unieke tekenreeks is.</span><span class="sxs-lookup"><span data-stu-id="7928a-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="7928a-344">De naam kan alleen kleine letters en cijfers gebruiken en deze uniek zijn binnen Azure.</span><span class="sxs-lookup"><span data-stu-id="7928a-344">The name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="7928a-345">**Container**.</span><span class="sxs-lookup"><span data-stu-id="7928a-345">**Container**.</span></span> <span data-ttu-id="7928a-346">Voer `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="7928a-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="7928a-347">De naam van het opslagaccount en de containernaam worden samen gebruikt voor een URI voor de blobopslag, als volgt:</span><span class="sxs-lookup"><span data-stu-id="7928a-347">The storage account name and container name are used together to provide a URI for the blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    !['Nieuw uitvoer' blade voor Stream Analytics-taak](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="7928a-349">Klik op **Create**.</span><span class="sxs-lookup"><span data-stu-id="7928a-349">Click **Create**.</span></span> 

    <span data-ttu-id="7928a-350">Azure storage-account maakt en een sleutel automatisch wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-350">Azure creates the storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="7928a-351">Sluit de **uitvoer** blade.</span><span class="sxs-lookup"><span data-stu-id="7928a-351">Close the **Outputs** blade.</span></span> 

## <a name="start-the-streaming-analytics-job"></a><span data-ttu-id="7928a-352">Start de Streaming Analytics-taak</span><span class="sxs-lookup"><span data-stu-id="7928a-352">Start the Streaming Analytics job</span></span>

<span data-ttu-id="7928a-353">De taak is nu geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-353">The job is now configured.</span></span> <span data-ttu-id="7928a-354">U hebt opgegeven invoer (de event hub), een transformatie (de query voor het zoeken naar frauduleuze aanroepen) en uitvoer (blobopslag).</span><span class="sxs-lookup"><span data-stu-id="7928a-354">You've specified an input (the event hub), a transformation (the query to look for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="7928a-355">U kunt nu de taak starten.</span><span class="sxs-lookup"><span data-stu-id="7928a-355">You can now start the job.</span></span> 

1. <span data-ttu-id="7928a-356">Zorg ervoor dat de app TelcoGenerator wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="7928a-356">Make sure the TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="7928a-357">Klik op de taakblade **Start**.</span><span class="sxs-lookup"><span data-stu-id="7928a-357">In the job blade, click **Start**.</span></span>

    ![De Stream Analytics-taak starten](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="7928a-359">In de **starttaak** blade voor de taak uitvoer begintijd, selecteer **nu**.</span><span class="sxs-lookup"><span data-stu-id="7928a-359">In the **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="7928a-360">Klik op **Start**.</span><span class="sxs-lookup"><span data-stu-id="7928a-360">Click **Start**.</span></span> 

    ![Blade 'Start de taak' voor de Stream Analytics-taak](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="7928a-362">Azure waarschuwt u als de taak is gestart en op de taakblade de status wordt weergegeven als **met**.</span><span class="sxs-lookup"><span data-stu-id="7928a-362">Azure notifies you when the job has started, and in the job blade, the status is displayed as **Running**.</span></span>

    ![Stream Analytics-taakstatus 'Actief' wordt weergegeven](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-the-transformed-data"></a><span data-ttu-id="7928a-364">De getransformeerde gegevens controleren</span><span class="sxs-lookup"><span data-stu-id="7928a-364">Examine the transformed data</span></span>

<span data-ttu-id="7928a-365">U hebt nu een volledige Streaming Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="7928a-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="7928a-366">De taak is vindt u in een stream van telefoongesprek metagegevens van frauduleuze telefoongesprekken in realtime zoekt en informatie over deze frauduleuze aanroepen naar opslag schrijven.</span><span class="sxs-lookup"><span data-stu-id="7928a-366">The job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls to storage.</span></span> 

<span data-ttu-id="7928a-367">Deze zelfstudie is het raadzaam om te kijken naar de gegevens die door de Streaming Analytics-taak wordt vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="7928a-367">To complete this tutorial, you might want to look at the data being captured by the Streaming Analytics job.</span></span> <span data-ttu-id="7928a-368">De gegevens wordt geschreven naar Azure Blog van Storage in segmenten (bestanden).</span><span class="sxs-lookup"><span data-stu-id="7928a-368">The data is being written to Azure Blog Storage in chunks (files).</span></span> <span data-ttu-id="7928a-369">U kunt elk hulpprogramma dat Azure Blob Storage gebruiken.</span><span class="sxs-lookup"><span data-stu-id="7928a-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="7928a-370">Zoals beschreven in de sectie vereisten, kunt u Azure-extensies in Visual Studio of kunt u een hulpprogramma zoals [Azure Opslagverkenner](http://storageexplorer.com/) of [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="7928a-370">As noted in the Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="7928a-371">Wanneer u de inhoud van een bestand in blob storage bekijkt, ziet u ongeveer als volgt:</span><span class="sxs-lookup"><span data-stu-id="7928a-371">When you examine the contents of a file in blob storage, you see something like the following :</span></span>

![Azure blob storage met Streaming Analytics-uitvoer](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="7928a-373">Resources opschonen</span><span class="sxs-lookup"><span data-stu-id="7928a-373">Clean up resources</span></span>

<span data-ttu-id="7928a-374">We hebben meer artikelen die doorgaan met het detecteren van fraude scenario en die gebruikmaken van de resources die u in deze zelfstudie hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="7928a-374">We have additional articles that continue with the fraud-detection scenario and that use the resources that you've created in this tutorial.</span></span> <span data-ttu-id="7928a-375">Als u doorgaan wilt, raadpleegt u de suggesties onder **Vervolgstappen** later.</span><span class="sxs-lookup"><span data-stu-id="7928a-375">If you want to continue, see the suggestions under **Next steps** later.</span></span>

<span data-ttu-id="7928a-376">Als u bent klaar en u hoeft niet de resources die u hebt gemaakt, kunt u echter verwijderen ze zodat u geen onnodige Azure kosten.</span><span class="sxs-lookup"><span data-stu-id="7928a-376">However, if you're done and you don't need the resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="7928a-377">In dat geval is het raadzaam dat u het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="7928a-377">In that case, we suggest that you do the following:</span></span>

1. <span data-ttu-id="7928a-378">Stop de Streaming Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="7928a-378">Stop the Streaming Analytics job.</span></span> <span data-ttu-id="7928a-379">In de **taken** blade, klikt u op **stoppen** aan de bovenkant.</span><span class="sxs-lookup"><span data-stu-id="7928a-379">In the **Jobs** blade, click **Stop** at the top.</span></span>
2. <span data-ttu-id="7928a-380">Stop de Telco Generator-app.</span><span class="sxs-lookup"><span data-stu-id="7928a-380">Stop the Telco Generator app.</span></span> <span data-ttu-id="7928a-381">In het opdrachtvenster waar u de app gestart, drukt u op Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="7928a-381">In the command window where you started the app, press Ctrl+C.</span></span>
3. <span data-ttu-id="7928a-382">Als u een blob storage-account voor deze zelfstudie hebt gemaakt, verwijderen.</span><span class="sxs-lookup"><span data-stu-id="7928a-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="7928a-383">Verwijder de Streaming Analytics-taak.</span><span class="sxs-lookup"><span data-stu-id="7928a-383">Delete the Streaming Analytics job.</span></span>
5. <span data-ttu-id="7928a-384">Verwijder de event hub.</span><span class="sxs-lookup"><span data-stu-id="7928a-384">Delete the event hub.</span></span>
6. <span data-ttu-id="7928a-385">Verwijder de event hub-naamruimte.</span><span class="sxs-lookup"><span data-stu-id="7928a-385">Delete the event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="7928a-386">Ondersteuning krijgen</span><span class="sxs-lookup"><span data-stu-id="7928a-386">Get support</span></span>

<span data-ttu-id="7928a-387">Voor verdere hulp kunt u proberen onze [Azure Stream Analytics-forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="7928a-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7928a-388">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="7928a-388">Next steps</span></span>

<span data-ttu-id="7928a-389">U kunt doorgaan met deze zelfstudie in de volgende artikelen:</span><span class="sxs-lookup"><span data-stu-id="7928a-389">You can continue this tutorial with the following articles:</span></span>

* <span data-ttu-id="7928a-390">[Stream Analytics en Power BI: een realtime analytics-dashboard voor het streamen van gegevens](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="7928a-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="7928a-391">In dit artikel leest u hoe de TelCo uitvoer van de Stream Analytics-taak verzenden naar Power BI voor realtime visualisatie en analyse.</span><span class="sxs-lookup"><span data-stu-id="7928a-391">This article shows you how to send the TelCo output of the Stream Analytics job to Power BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="7928a-392">[Het opslaan van gegevens uit Azure Stream Analytics in een Azure Redis-Cache met behulp van Azure Functions](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="7928a-392">[How to store data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="7928a-393">In dit artikel laat zien hoe Azure Functions gebruiken om te schrijven van frauduleuze aanroepen naar een Azure Redis-cache via een Service Bus-wachtrij.</span><span class="sxs-lookup"><span data-stu-id="7928a-393">This article shows how to use Azure Functions to write fraudulent calls to an Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="7928a-394">Voor meer informatie over Stream Analytics in het algemeen proberen deze artikelen:</span><span class="sxs-lookup"><span data-stu-id="7928a-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="7928a-395">Inleiding tot Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="7928a-395">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="7928a-396">Azure Stream Analytics-taken schalen</span><span class="sxs-lookup"><span data-stu-id="7928a-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="7928a-397">Naslaggids voor Azure Stream Analytics Query</span><span class="sxs-lookup"><span data-stu-id="7928a-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="7928a-398">REST API-naslaggids voor Azure Stream Analytics Management</span><span class="sxs-lookup"><span data-stu-id="7928a-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
