---
title: Verwerken van sensorgegevens vehicle met Apache Storm op HDInsight | Microsoft Docs
description: Informatie over het verwerken van sensorgegevens vehicle van Event Hubs met behulp van Apache Storm op HDInsight. Modelgegevens toevoegen via Azure Cosmos DB en uitvoer naar de opslag op te slaan.
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8e8ebc724e1c70e8fcd56312adef5da2342373ea
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="2b3a2-104">Vehicle sensorgegevens uit Azure Event Hubs met Apache Storm op HDInsight verwerken</span><span class="sxs-lookup"><span data-stu-id="2b3a2-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="2b3a2-105">Informatie over het verwerken van sensorgegevens vehicle uit Azure Event Hubs met Apache Storm op HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-105">Learn how to process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="2b3a2-106">In dit voorbeeld leest sensorgegevens uit Azure Event Hubs, verrijkt de gegevens door te verwijzen naar gegevens die zijn opgeslagen in Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-106">This example reads sensor data from Azure Event Hubs, enriches the data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="2b3a2-107">De gegevens worden opgeslagen in Azure Storage met Hadoop File System (HDFS).</span><span class="sxs-lookup"><span data-stu-id="2b3a2-107">The data is stored into Azure Storage using the Hadoop File System (HDFS).</span></span>

![HDInsight en -Architectuurdiagram van het Internet der dingen (IoT)](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="2b3a2-109">Overzicht</span><span class="sxs-lookup"><span data-stu-id="2b3a2-109">Overview</span></span>

<span data-ttu-id="2b3a2-110">Sensoren aan voertuigen toe te voegen, kunt u apparatuur problemen op basis van historische gegevens, trends te voorspellen.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-110">Adding sensors to vehicles allows you to predict equipment problems based on historical data trends.</span></span> <span data-ttu-id="2b3a2-111">Ook kunt u verbeteringen in toekomstige versies op basis van gebruiksanalyse patroon.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-111">It also allows you to make improvements to future versions based on usage pattern analysis.</span></span> <span data-ttu-id="2b3a2-112">U moet kunnen snel en efficiënt laden van de gegevens van alle voertuigen in Hadoop voordat MapReduce-verwerking kan plaatsvinden.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-112">You must be able to quickly and efficiently load the data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="2b3a2-113">Mogelijk wilt u daarnaast analyses voor kritieke fout paden (temperatuur motor, remmen, enzovoort) in realtime.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-113">Additionally, you may wish to do analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="2b3a2-114">Azure Event Hubs is gebouwd voor het afhandelen van de grote hoeveelheid gegevens die worden gegenereerd door sensoren.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-114">Azure Event Hubs is built to handle the massive volume of data generated by sensors.</span></span> <span data-ttu-id="2b3a2-115">Apache Storm kan worden gebruikt om te laden en de gegevens verwerken voordat deze wordt opgeslagen in HDFS.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-115">Apache Storm can be used to load and process the data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="2b3a2-116">Oplossing</span><span class="sxs-lookup"><span data-stu-id="2b3a2-116">Solution</span></span>

<span data-ttu-id="2b3a2-117">Telemetriegegevens voor engine temperatuur, temperatuur en vehicle snelheid wordt vastgelegd door sensoren.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="2b3a2-118">Gegevens worden vervolgens verzonden naar Event Hubs samen met de auto Vehicle-id-nummer (VIN) en een tijdstempel.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-118">Data is then sent to Event Hubs along with the car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="2b3a2-119">Processen erdoor en slaat ze op in HDFS van daaruit een Storm-topologie uitgevoerd op een Apache Storm op HDInsight-cluster leest de gegevens.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads the data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="2b3a2-120">Tijdens de verwerking wordt het Chassisnummer gebruikt voor het ophalen van informatie over model van de Cosmos-database.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-120">During processing, the VIN is used to retrieve model information from Cosmos DB.</span></span> <span data-ttu-id="2b3a2-121">Deze gegevens is toegevoegd aan de gegevensstroom voordat deze is opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-121">This data is added to the data stream before it is stored.</span></span>

<span data-ttu-id="2b3a2-122">De onderdelen die worden gebruikt in de Storm-topologie zijn:</span><span class="sxs-lookup"><span data-stu-id="2b3a2-122">The components used in the Storm Topology are:</span></span>

* <span data-ttu-id="2b3a2-123">**EventHubSpout** -leest de gegevens uit Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="2b3a2-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="2b3a2-124">**TypeConversionBolt** -JSON-tekenreeks van Event Hubs converteert naar een tuple met de volgende sensorgegevens:</span><span class="sxs-lookup"><span data-stu-id="2b3a2-124">**TypeConversionBolt** - converts the JSON string from Event Hubs into a tuple containing the following sensor data:</span></span>
    * <span data-ttu-id="2b3a2-125">Engine temperatuur</span><span class="sxs-lookup"><span data-stu-id="2b3a2-125">Engine temperature</span></span>
    * <span data-ttu-id="2b3a2-126">Temperatuur</span><span class="sxs-lookup"><span data-stu-id="2b3a2-126">Ambient temperature</span></span>
    * <span data-ttu-id="2b3a2-127">Snelheid</span><span class="sxs-lookup"><span data-stu-id="2b3a2-127">Speed</span></span>
    * <span data-ttu-id="2b3a2-128">CHASSISNUMMER</span><span class="sxs-lookup"><span data-stu-id="2b3a2-128">VIN</span></span>
    * <span data-ttu-id="2b3a2-129">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="2b3a2-129">Timestamp</span></span>
* <span data-ttu-id="2b3a2-130">**DataReferencBolt** -Hiermee zoekt u het model drager van de Cosmos-database met behulp van het Chassisnummer</span><span class="sxs-lookup"><span data-stu-id="2b3a2-130">**DataReferencBolt** - looks up the vehicle model from Cosmos DB using the VIN</span></span>
* <span data-ttu-id="2b3a2-131">**WasbStoreBolt** -slaat de gegevens naar HDFS (Azure-opslag)</span><span class="sxs-lookup"><span data-stu-id="2b3a2-131">**WasbStoreBolt** - stores the data to HDFS (Azure Storage)</span></span>

<span data-ttu-id="2b3a2-132">De volgende afbeelding ziet u een diagram van deze oplossing:</span><span class="sxs-lookup"><span data-stu-id="2b3a2-132">The following image is a diagram of this solution:</span></span>

![storm-topologie](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="2b3a2-134">Implementatie</span><span class="sxs-lookup"><span data-stu-id="2b3a2-134">Implementation</span></span>

<span data-ttu-id="2b3a2-135">Een complete geautomatiseerde oplossing voor dit scenario is beschikbaar als onderdeel van de [HDInsight-Storm-voorbeelden](https://github.com/hdinsight/hdinsight-storm-examples) opslagplaats op GitHub.</span><span class="sxs-lookup"><span data-stu-id="2b3a2-135">A complete, automated solution for this scenario is available as part of the [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="2b3a2-136">Volg de stappen in dit voorbeeld kunt gebruiken, de [IoTExample README. MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="2b3a2-136">To use this example, follow the steps in the [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2b3a2-137">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="2b3a2-137">Next Steps</span></span>

<span data-ttu-id="2b3a2-138">Zie voor meer voorbeeld Storm-topologieën [voorbeeldtopologieën van Storm op HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="2b3a2-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>

