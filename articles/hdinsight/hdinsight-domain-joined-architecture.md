---
title: Azure HDInsight-architectuur die lid zijn van aaaDomain | Microsoft Docs
description: Meer informatie over hoe tooplan domein HDInsight.
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 1c3ecedf3739b4f8fa54160225be9c1d6e2ca6cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="b5b88-103">Azure Hadoop-clusters in aan domein gekoppelde HDInsight plannen</span><span class="sxs-lookup"><span data-stu-id="b5b88-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="b5b88-104">Hallo is traditionele Hadoop een cluster met één gebruiker.</span><span class="sxs-lookup"><span data-stu-id="b5b88-104">hello traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="b5b88-105">Dit is geschikt voor de meeste bedrijven met kleinere toepassingsteams die workloads met veel gegevens maken.</span><span class="sxs-lookup"><span data-stu-id="b5b88-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="b5b88-106">Naarmate Hadoop populairder wordt, stappen veel bedrijven over op een model waarin clusters worden beheerd door IT-teams en meerdere toepassingsteams clusters delen.</span><span class="sxs-lookup"><span data-stu-id="b5b88-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="b5b88-107">Dus Hallo functies met betrekking tot clusters met meerdere gebruikers zijn een van de meest aangevraagde functies in Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b5b88-107">Thus, functionalities involving multiuser clusters are among hello most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="b5b88-108">In plaats van het bouwen van een eigen voor meerdere gebruikers verificatie en autorisatie is HDInsight is afhankelijk van Hallo populairste id-provider--Active Directory (AD).</span><span class="sxs-lookup"><span data-stu-id="b5b88-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on hello most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="b5b88-109">Hallo krachtige beveiliging functie in AD kan worden gebruikt voor meerdere gebruikers autorisatie gebruikte toomanage in HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b5b88-109">hello powerful security functionality in AD can be used toomanage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="b5b88-110">Door te integreren HDInsight met AD, kunt u communiceren met Hallo clusters met behulp van uw AD-referenties.</span><span class="sxs-lookup"><span data-stu-id="b5b88-110">By integrating HDInsight with AD, you can communicate with hello clusters by using your AD credentials.</span></span> <span data-ttu-id="b5b88-111">HDInsight een AD gebruiker tooa lokale Hadoop gebruiker toegewezen, zodat alle services die worden uitgevoerd op HDInsight Hallo (Ambari, Hive-server, Zwerver, Spark thrift-server en andere) werken naadloos voor Hallo geverifieerde gebruiker.</span><span class="sxs-lookup"><span data-stu-id="b5b88-111">HDInsight maps an AD user tooa local Hadoop user, so all hello services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for hello authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="b5b88-112">HDInsight integreren met AD- en AD op IaaS VM</span><span class="sxs-lookup"><span data-stu-id="b5b88-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="b5b88-113">Door te integreren HDInsight met Azure AD of AD op Iaas VM, zijn Hallo HDInsight clusterknooppunten van een domein tooa domein.</span><span class="sxs-lookup"><span data-stu-id="b5b88-113">By integrating HDInsight with Azure AD or AD on Iaas VM, hello HDInsight cluster nodes are domain-joined tooa domain.</span></span> <span data-ttu-id="b5b88-114">HDInsight Hadoop-services uitgevoerd op Hallo cluster voor service-principals voor het Hallo maakt en binnen een opgegeven organisatie-eenheid (OE) in Azure AD of AD op IaaS VM geplaatst.</span><span class="sxs-lookup"><span data-stu-id="b5b88-114">HDInsight creates service principals for hello Hadoop services running on hello cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="b5b88-115">HDInsight maakt ook omgekeerde DNS-toewijzingen in domein voor Hallo Hallo IP-adressen van Hallo knooppunten die lid toohello domein.</span><span class="sxs-lookup"><span data-stu-id="b5b88-115">HDInsight also creates reverse DNS mappings in hello domain for hello IP addresses of hello nodes that are joined toohello domain.</span></span>

<span data-ttu-id="b5b88-116">U kunt deze configuratie bereiken met behulp van verschillende architecturen.</span><span class="sxs-lookup"><span data-stu-id="b5b88-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="b5b88-117">U kunt kiezen uit Hallo architecturen te volgen.</span><span class="sxs-lookup"><span data-stu-id="b5b88-117">You can choose from hello following architectures.</span></span>

<span data-ttu-id="b5b88-118">**HDInsight is geïntegreerd met AD uitgevoerd op Azure IaaS**</span><span class="sxs-lookup"><span data-stu-id="b5b88-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="b5b88-119">Dit is de eenvoudigste architectuur Hallo voor HDInsight integreren met Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b5b88-119">This is hello simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="b5b88-120">Hallo AD-domeincontroller wordt uitgevoerd op een (of meerdere) virtuele machines (VM's) in Azure.</span><span class="sxs-lookup"><span data-stu-id="b5b88-120">hello AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="b5b88-121">Deze VM's bevinden zich meestal in een virtueel netwerk.</span><span class="sxs-lookup"><span data-stu-id="b5b88-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="b5b88-122">U instellen een ander virtueel netwerk voor Hallo HDInsight-cluster.</span><span class="sxs-lookup"><span data-stu-id="b5b88-122">You set up another virtual network for hello HDInsight cluster.</span></span> <span data-ttu-id="b5b88-123">Voor HDInsight toohave een regel zicht tooActive Directory, moet u toopeer deze virtuele netwerken met behulp van [VNet-naar-VNet-peering](../virtual-network/virtual-network-create-peering.md).</span><span class="sxs-lookup"><span data-stu-id="b5b88-123">For HDInsight toohave a line of sight tooActive Directory, you need toopeer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="b5b88-124">Als u Active Directory in ARM, Hallo vervolgens kunt u Hallo Active Directory en HDInsight in hetzelfde VNet Hallo en hoeft u geen toodo peering.</span><span class="sxs-lookup"><span data-stu-id="b5b88-124">If you create hello Active Directory in ARM, then you can create hello Active Directory and HDInsight in hello same VNet and you don't need toodo peering.</span></span> 

![Topologie van aan domein gekoppeld HDInsight-cluster](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="b5b88-126">In deze architectuur kunt u Azure Data Lake Store niet gebruiken met Hallo HDInsight-cluster.</span><span class="sxs-lookup"><span data-stu-id="b5b88-126">In this architecture, you cannot use Azure Data Lake Store with hello HDInsight cluster.</span></span>


<span data-ttu-id="b5b88-127">Vereisten voor Active Directory:</span><span class="sxs-lookup"><span data-stu-id="b5b88-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="b5b88-128">Een [organisatie-eenheid](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) moet worden gemaakt in die u plaatsen Hallo HDInsight-cluster virtuele machines en service-principals die zijn gebruikt door de cluster Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="b5b88-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="b5b88-129">[Lightweight Directory Access protocollen](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) moeten worden ingesteld voor communicatie met AD.</span><span class="sxs-lookup"><span data-stu-id="b5b88-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="b5b88-130">Hallo certificaat gebruikt tooset up LDAPS moet een echte certificaat (niet een zelfondertekend certificaat).</span><span class="sxs-lookup"><span data-stu-id="b5b88-130">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="b5b88-131">Omgekeerde DNS-zones moeten worden gemaakt op Hallo domein voor Hallo IP-adresbereik van Hallo HDInsight subnet (bijvoorbeeld 10.2.0.0/24 in de vorige afbeelding Hallo).</span><span class="sxs-lookup"><span data-stu-id="b5b88-131">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="b5b88-132">Een service-account of gebruikersaccount is vereist.</span><span class="sxs-lookup"><span data-stu-id="b5b88-132">A service account or a user account is needed.</span></span> <span data-ttu-id="b5b88-133">Gebruik dit account toocreate hello HDInsight-cluster.</span><span class="sxs-lookup"><span data-stu-id="b5b88-133">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="b5b88-134">Dit account moet beschikken over Hallo volgende machtigingen:</span><span class="sxs-lookup"><span data-stu-id="b5b88-134">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="b5b88-135">Machtigingen toocreate service principal en machineobjecten binnen de organisatie-eenheid Hallo</span><span class="sxs-lookup"><span data-stu-id="b5b88-135">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="b5b88-136">Machtigingen toocreate omgekeerde DNS-proxy regels</span><span class="sxs-lookup"><span data-stu-id="b5b88-136">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="b5b88-137">Machtigingen toojoin machines toohello Active Directory-domein</span><span class="sxs-lookup"><span data-stu-id="b5b88-137">Permissions toojoin machines toohello Active Directory domain</span></span>

<span data-ttu-id="b5b88-138">**HDInsight geïntegreerd met een alleen-cloud Azure AD**</span><span class="sxs-lookup"><span data-stu-id="b5b88-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="b5b88-139">Configureer een domeincontroller voor alleen-cloud Azure AD, zodat HDInsight kan worden geïntegreerd met Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b5b88-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="b5b88-140">Dit wordt bereikt door middel [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="b5b88-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="b5b88-141">Azure AD DS domain controller machines op Hallo cloud maken en IP-adressen voor deze biedt.</span><span class="sxs-lookup"><span data-stu-id="b5b88-141">Azure AD DS creates domain controller machines on hello cloud and provides IP addresses for them.</span></span> <span data-ttu-id="b5b88-142">Voor maximale beschikbaarheid worden er twee domeincontrollers gemaakt.</span><span class="sxs-lookup"><span data-stu-id="b5b88-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="b5b88-143">Azure AD DS bestaat op dit moment alleen in klassieke virtuele netwerken.</span><span class="sxs-lookup"><span data-stu-id="b5b88-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="b5b88-144">Dit is alleen toegankelijk via Hallo klassieke Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="b5b88-144">It is only accessible by using hello Azure classic portal.</span></span> <span data-ttu-id="b5b88-145">Hallo HDInsight virtueel netwerk bestaat in hello Azure-portal, die toobe moet brengen met Hallo klassiek virtueel netwerk met behulp van VNet-naar-VNet-peering.</span><span class="sxs-lookup"><span data-stu-id="b5b88-145">hello HDInsight virtual network exists in hello Azure portal, which needs toobe peered with hello classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="b5b88-146">Peering tussen een klassiek virtueel netwerk en een Azure Resource Manager virtueel netwerk is vereist dat beide virtuele netwerken zich in dezelfde regio Hallo en Hallo onder dezelfde Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="b5b88-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in hello same region and under hello same Azure subscription.</span></span>

![Topologie van aan domein gekoppeld HDInsight-cluster](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="b5b88-148">Vereisten voor Azure AD:</span><span class="sxs-lookup"><span data-stu-id="b5b88-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="b5b88-149">Een [organisatie-eenheid](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) moet worden gemaakt binnen die u plaatsen Hallo HDInsight-cluster virtuele machines en service-principals die zijn gebruikt door de cluster Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="b5b88-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="b5b88-150">Tijdens de configuratie van Azure AD DS moet [LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) worden ingesteld.</span><span class="sxs-lookup"><span data-stu-id="b5b88-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="b5b88-151">Hallo certificaat gebruikt tooset up LDAPS moet een echte certificaat (niet een zelfondertekend certificaat).</span><span class="sxs-lookup"><span data-stu-id="b5b88-151">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="b5b88-152">Omgekeerde DNS-zones moeten worden gemaakt op Hallo domein voor Hallo IP-adresbereik van Hallo HDInsight subnet (bijvoorbeeld 10.2.0.0/24 in de vorige afbeelding Hallo).</span><span class="sxs-lookup"><span data-stu-id="b5b88-152">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="b5b88-153">[Wachtwoord-hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) moet worden gesynchroniseerd vanuit Azure AD tooAzure AD DS.</span><span class="sxs-lookup"><span data-stu-id="b5b88-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD tooAzure AD DS.</span></span>
* <span data-ttu-id="b5b88-154">Een service-account of gebruikersaccount is vereist.</span><span class="sxs-lookup"><span data-stu-id="b5b88-154">A service account or a user account is needed.</span></span> <span data-ttu-id="b5b88-155">Gebruik dit account toocreate hello HDInsight-cluster.</span><span class="sxs-lookup"><span data-stu-id="b5b88-155">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="b5b88-156">Dit account moet beschikken over Hallo volgende machtigingen:</span><span class="sxs-lookup"><span data-stu-id="b5b88-156">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="b5b88-157">Machtigingen toocreate service principal en machineobjecten binnen de organisatie-eenheid Hallo</span><span class="sxs-lookup"><span data-stu-id="b5b88-157">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="b5b88-158">Machtigingen toocreate omgekeerde DNS-proxy regels</span><span class="sxs-lookup"><span data-stu-id="b5b88-158">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="b5b88-159">Machtigingen toojoin machines toohello Azure AD-domein</span><span class="sxs-lookup"><span data-stu-id="b5b88-159">Permissions toojoin machines toohello Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="b5b88-160">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="b5b88-160">Next steps</span></span>
* <span data-ttu-id="b5b88-161">Zie voor een domein HDInsight-cluster tooconfigure [HDInsight-clusters domein configureren](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="b5b88-161">tooconfigure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="b5b88-162">toomanage domein HDInsight-clusters, Zie [domein HDInsight-clusters beheren](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b5b88-162">toomanage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="b5b88-163">Zie tooconfigure Hive-beleid en voer Hive-query's [configureren Hive-beleid voor HDInsight-clusters domein](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="b5b88-163">tooconfigure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="b5b88-164">Zie toorun Hive-query's met behulp van SSH op HDInsight-clusters domein [SSH gebruiken met HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="b5b88-164">toorun Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
