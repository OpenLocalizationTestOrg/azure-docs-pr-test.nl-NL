---
title: Gebruik Azure AD-verificatie voor toegang tot Azure Media Services-API met REST | Microsoft Docs
description: Informatie over het openen van Azure Media Services-API met Azure Active Directory-verificatie met behulp van de REST.
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 1c62857699fb29b3583363e1c6f2dc7874635f40
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="use-azure-ad-authentication-to-access-the-azure-media-services-api-with-rest"></a><span data-ttu-id="f40d5-103">Azure AD-verificatie gebruiken voor toegang tot de Azure Media Services-API met REST</span><span class="sxs-lookup"><span data-stu-id="f40d5-103">Use Azure AD authentication to access the Azure Media Services API with REST</span></span>

<span data-ttu-id="f40d5-104">Het Azure Media Services-team heeft Azure Active Directory (Azure AD) authenticatie biedt ondersteuning voor Azure Media Services toegang uitgebracht.</span><span class="sxs-lookup"><span data-stu-id="f40d5-104">The Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="f40d5-105">Deze ook plannen voor verificatie van Azure Access Control-service voor Media Services toegang afschaffen aangekondigd.</span><span class="sxs-lookup"><span data-stu-id="f40d5-105">It also announced plans to deprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="f40d5-106">Omdat elke Azure-abonnement en elke Media Services-account is gekoppeld aan een Azure AD-tenant, biedt ondersteuning voor Azure AD-verificatie veel voordelen voor beveiliging.</span><span class="sxs-lookup"><span data-stu-id="f40d5-106">Because every Azure subscription, and every Media Services account, is attached to an Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="f40d5-107">Zie de volgende blogberichten en artikelen voor meer informatie over deze wijziging en de migratie (als u Media Services .NET SDK voor uw app gebruiken):</span><span class="sxs-lookup"><span data-stu-id="f40d5-107">For details about this change and migration (if you use the Media Services .NET SDK for your app), see the following blog posts and articles:</span></span>

- [<span data-ttu-id="f40d5-108">Azure Media Services introduceert ondersteuning voor Azure AD en afschaffing van toegangsbeheer verificatie</span><span class="sxs-lookup"><span data-stu-id="f40d5-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="f40d5-109">Toegang tot Azure Media Services-API met behulp van Azure AD-verificatie</span><span class="sxs-lookup"><span data-stu-id="f40d5-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="f40d5-110">Azure AD-verificatie gebruiken om Azure Media Services-API toegang met behulp van Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="f40d5-110">Use Azure AD authentication to access Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="f40d5-111">Aan de slag met Azure AD-verificatie met behulp van de Azure-portal</span><span class="sxs-lookup"><span data-stu-id="f40d5-111">Getting started with Azure AD authentication by using the Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="f40d5-112">Sommige klanten nodig voor het ontwikkelen van hun oplossingen Media Services onder de volgende beperkingen:</span><span class="sxs-lookup"><span data-stu-id="f40d5-112">Some customers need to develop their Media Services solutions under the following constraints:</span></span>

*   <span data-ttu-id="f40d5-113">Gebruik van een programmeertaal die geen Microsoft .NET of C# of de runtime-omgeving is niet Windows.</span><span class="sxs-lookup"><span data-stu-id="f40d5-113">They use a programming language that is not Microsoft .NET or C#, or the runtime environment is not Windows.</span></span>
*   <span data-ttu-id="f40d5-114">Azure AD-bibliotheken, zoals Active Directory Authentication Libraries zijn niet beschikbaar voor de programmeertaal of kunnen niet worden gebruikt voor hun runtimeomgeving.</span><span class="sxs-lookup"><span data-stu-id="f40d5-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for the programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="f40d5-115">Sommige klanten hebben toepassingen ontwikkeld met behulp van REST-API voor toegangsbeheer, verificatie en Azure Media Services-toegang.</span><span class="sxs-lookup"><span data-stu-id="f40d5-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="f40d5-116">Voor deze klanten moet u een manier om alleen de REST-API voor Azure AD-verificatie en daaropvolgende toegang van Azure Media Services gebruiken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-116">For these customers, you need a way to use only the REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="f40d5-117">U moet niet vertrouwen op een van de Azure AD-bibliotheken of op de Media Services .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="f40d5-117">You need to not rely on any of the Azure AD libraries or on the Media Services .NET SDK.</span></span> <span data-ttu-id="f40d5-118">In dit artikel we wordt beschreven een oplossing en voorbeeldcode in dit scenario.</span><span class="sxs-lookup"><span data-stu-id="f40d5-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="f40d5-119">Omdat de code alle REST-API-aanroepen, met geen afhankelijkheid van een Azure AD of Azure Media Services-bibliotheek, de code eenvoudig naar andere programmeertalen kan worden omgezet.</span><span class="sxs-lookup"><span data-stu-id="f40d5-119">Because the code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, the code can easily be translated to any other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f40d5-120">Media Services ondersteunt momenteel, het model van Azure Access Control-services-verificatie.</span><span class="sxs-lookup"><span data-stu-id="f40d5-120">Currently, Media Services supports the Azure Access Control services authentication model.</span></span> <span data-ttu-id="f40d5-121">Access Control-verificatie wordt echter 1 juni 2018 afgeschaft.</span><span class="sxs-lookup"><span data-stu-id="f40d5-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="f40d5-122">Het is raadzaam om te migreren naar het model van Azure AD authentication zo snel mogelijk.</span><span class="sxs-lookup"><span data-stu-id="f40d5-122">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="f40d5-123">Ontwerpen</span><span class="sxs-lookup"><span data-stu-id="f40d5-123">Design</span></span>

<span data-ttu-id="f40d5-124">In dit artikel gebruiken we het ontwerp van de volgende verificatie en autorisatie:</span><span class="sxs-lookup"><span data-stu-id="f40d5-124">In this article, we use the following authentication and authorization design:</span></span>

*  <span data-ttu-id="f40d5-125">Autorisatie protocol: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f40d5-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="f40d5-126">OAuth 2.0 is een Webstandaard die betrekking heeft op zowel de verificatie en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="f40d5-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="f40d5-127">Dit wordt ondersteund door Google, Microsoft, Facebook en PayPal-nummer.</span><span class="sxs-lookup"><span data-stu-id="f40d5-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="f40d5-128">Het is oktober 2012 bekrachtigd.</span><span class="sxs-lookup"><span data-stu-id="f40d5-128">It was ratified October 2012.</span></span> <span data-ttu-id="f40d5-129">Microsoft ondersteunt goed OAuth 2.0 en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="f40d5-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="f40d5-130">Beide van deze standaarden worden ondersteund in meerdere services en clientbibliotheken, waaronder Azure Active Directory, Open Web Interface voor .NET (OWIN)-Katana en Azure AD-bibliotheken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="f40d5-131">Type verlenen: clientreferenties type verlenen.</span><span class="sxs-lookup"><span data-stu-id="f40d5-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="f40d5-132">Clientreferenties is een van de vier grant-typen in OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="f40d5-132">Client credentials is one of the four grant types in OAuth 2.0.</span></span> <span data-ttu-id="f40d5-133">Dit wordt vaak gebruikt voor toegang tot Azure AD Microsoft Graph API.</span><span class="sxs-lookup"><span data-stu-id="f40d5-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="f40d5-134">Verificatiemodus: Service-principal.</span><span class="sxs-lookup"><span data-stu-id="f40d5-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="f40d5-135">De verificatiemodus is gebruiker of interactieve verificatie.</span><span class="sxs-lookup"><span data-stu-id="f40d5-135">The other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="f40d5-136">Een totaal van vier toepassingen of services, betrokken zijn bij de Azure AD-verificatie en autorisatie stroom voor het gebruik van Media Services.</span><span class="sxs-lookup"><span data-stu-id="f40d5-136">A total of four applications or services are involved in the Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="f40d5-137">De toepassingen en -services en de stroom worden in de volgende tabel beschreven:</span><span class="sxs-lookup"><span data-stu-id="f40d5-137">The applications and services, and the flow, are described in the following table:</span></span>

|<span data-ttu-id="f40d5-138">Toepassingstype</span><span class="sxs-lookup"><span data-stu-id="f40d5-138">Application type</span></span> |<span data-ttu-id="f40d5-139">Toepassing</span><span class="sxs-lookup"><span data-stu-id="f40d5-139">Application</span></span> |<span data-ttu-id="f40d5-140">Stroom</span><span class="sxs-lookup"><span data-stu-id="f40d5-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="f40d5-141">Client</span><span class="sxs-lookup"><span data-stu-id="f40d5-141">Client</span></span> | <span data-ttu-id="f40d5-142">Klant-app of oplossing</span><span class="sxs-lookup"><span data-stu-id="f40d5-142">Customer app or solution</span></span> | <span data-ttu-id="f40d5-143">Deze app (daadwerkelijk, de proxy) is geregistreerd in de Azure AD-tenant waarin de Azure-abonnement en het serviceaccount van de media bevinden.</span><span class="sxs-lookup"><span data-stu-id="f40d5-143">This app (actually, its proxy) is registered in the Azure AD tenant in which the Azure subscription and the media service account reside.</span></span> <span data-ttu-id="f40d5-144">De service-principal van de geregistreerde app wordt vervolgens met de eigenaar of bijdrager rol in de Access Control (IAM) van het serviceaccount van de media verleend.</span><span class="sxs-lookup"><span data-stu-id="f40d5-144">The service principal of the registered app is then granted with Owner or Contributor role in the Access Control (IAM) of the media service account.</span></span> <span data-ttu-id="f40d5-145">De service-principal wordt vertegenwoordigd door het app-ID en client clientgeheim.</span><span class="sxs-lookup"><span data-stu-id="f40d5-145">The service principal is represented by the app client ID and client secret.</span></span> |
|<span data-ttu-id="f40d5-146">ID-Provider (IDP)</span><span class="sxs-lookup"><span data-stu-id="f40d5-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="f40d5-147">Azure AD als IDP</span><span class="sxs-lookup"><span data-stu-id="f40d5-147">Azure AD as IDP</span></span> | <span data-ttu-id="f40d5-148">De geregistreerde app service-principal (client-ID en clientgeheim) is geverifieerd door Azure AD als de IDP.</span><span class="sxs-lookup"><span data-stu-id="f40d5-148">The registered app service principal (client ID and client secret) is authenticated by Azure AD as the IDP.</span></span> <span data-ttu-id="f40d5-149">Deze verificatie wordt uitgevoerd, intern en impliciet.</span><span class="sxs-lookup"><span data-stu-id="f40d5-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="f40d5-150">De client is geverifieerd als in clientreferentiestroom, in plaats van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="f40d5-150">As in client credentials flow, the client is authenticated instead of the user.</span></span> |
|<span data-ttu-id="f40d5-151">Secure Token Service (STS) / OAuth-server</span><span class="sxs-lookup"><span data-stu-id="f40d5-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="f40d5-152">Azure AD als STS</span><span class="sxs-lookup"><span data-stu-id="f40d5-152">Azure AD as STS</span></span> | <span data-ttu-id="f40d5-153">Na verificatie door de IDP (of de OAuth-Server in termen van OAuth 2.0), een toegangstoken of JSON Web Token (JWT) is uitgegeven door Azure AD als STS/OAuth-Server voor toegang tot de bron voor de middelste laag: in ons geval het Media Services REST-API-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="f40d5-153">After authentication by the IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access to the middle-tier resource: in our case, the Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="f40d5-154">Resource</span><span class="sxs-lookup"><span data-stu-id="f40d5-154">Resource</span></span> | <span data-ttu-id="f40d5-155">Media Services REST-API</span><span class="sxs-lookup"><span data-stu-id="f40d5-155">Media Services REST API</span></span> | <span data-ttu-id="f40d5-156">Elke Media Services REST API-aanroep is geautoriseerd door een toegangstoken dat is uitgegeven door Azure AD als STS of de OAuth-server.</span><span class="sxs-lookup"><span data-stu-id="f40d5-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or the OAuth server.</span></span> |

<span data-ttu-id="f40d5-157">Als u de voorbeeldcode uitvoeren en vastleggen van een JWT of een toegangstoken, heeft de JWT de volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="f40d5-157">If you run the sample code and capture a JWT or an access token, the JWT has the following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="f40d5-158">Hier volgen de toewijzingen tussen de kenmerken in de JWT en de vier toepassingen of services in de voorgaande tabel:</span><span class="sxs-lookup"><span data-stu-id="f40d5-158">Here are the mappings between the attributes in the JWT and the four applications or services in the preceding table:</span></span>

|<span data-ttu-id="f40d5-159">Toepassingstype</span><span class="sxs-lookup"><span data-stu-id="f40d5-159">Application type</span></span> |<span data-ttu-id="f40d5-160">Toepassing</span><span class="sxs-lookup"><span data-stu-id="f40d5-160">Application</span></span> |<span data-ttu-id="f40d5-161">JWT-kenmerk</span><span class="sxs-lookup"><span data-stu-id="f40d5-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="f40d5-162">Client</span><span class="sxs-lookup"><span data-stu-id="f40d5-162">Client</span></span> |<span data-ttu-id="f40d5-163">Klant-app of oplossing</span><span class="sxs-lookup"><span data-stu-id="f40d5-163">Customer app or solution</span></span> |<span data-ttu-id="f40d5-164">toepassings-id: '02ed1e8e-af8b-477e-af3d-7e7219a99ac6'.</span><span class="sxs-lookup"><span data-stu-id="f40d5-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="f40d5-165">De client-ID van een toepassing die u bij Azure AD in de volgende sectie registreren wilt.</span><span class="sxs-lookup"><span data-stu-id="f40d5-165">The client ID of an application you will register to Azure AD in the next section.</span></span> |
|<span data-ttu-id="f40d5-166">ID-Provider (IDP)</span><span class="sxs-lookup"><span data-stu-id="f40d5-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="f40d5-167">Azure AD als IDP</span><span class="sxs-lookup"><span data-stu-id="f40d5-167">Azure AD as IDP</span></span> |<span data-ttu-id="f40d5-168">IDP: 'https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/'.</span><span class="sxs-lookup"><span data-stu-id="f40d5-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="f40d5-169">De GUID is de tenant-ID van Microsoft (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f40d5-169">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f40d5-170">Elke tenant heeft zijn eigen, unieke ID.</span><span class="sxs-lookup"><span data-stu-id="f40d5-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="f40d5-171">Secure Token Service (STS) / OAuth-server</span><span class="sxs-lookup"><span data-stu-id="f40d5-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="f40d5-172">Azure AD als STS</span><span class="sxs-lookup"><span data-stu-id="f40d5-172">Azure AD as STS</span></span> | <span data-ttu-id="f40d5-173">iss: 'https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/'.</span><span class="sxs-lookup"><span data-stu-id="f40d5-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="f40d5-174">De GUID is de tenant-ID van Microsoft (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f40d5-174">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="f40d5-175">Resource</span><span class="sxs-lookup"><span data-stu-id="f40d5-175">Resource</span></span> | <span data-ttu-id="f40d5-176">Media Services REST-API</span><span class="sxs-lookup"><span data-stu-id="f40d5-176">Media Services REST API</span></span> |<span data-ttu-id="f40d5-177">AUD: 'https://rest.media.azure.net'.</span><span class="sxs-lookup"><span data-stu-id="f40d5-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="f40d5-178">De ontvanger of de doelgroep van het toegangstoken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-178">The recipient or audience of the access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="f40d5-179">Stappen voor installatie</span><span class="sxs-lookup"><span data-stu-id="f40d5-179">Steps for setup</span></span>

<span data-ttu-id="f40d5-180">Om te registreren en een Azure AD-toepassing voor Azure AD-verificatie instellen en ophalen van een toegangstoken voor het aanroepen van het eindpunt van de REST-API van Azure Media Services, kunt u de volgende stappen:</span><span class="sxs-lookup"><span data-stu-id="f40d5-180">To register and set up an Azure AD application for Azure AD authentication, and to obtain an access token for calling the Azure Media Services REST API endpoint, complete the following steps:</span></span>

1.  <span data-ttu-id="f40d5-181">In de [klassieke Azure-portal](http://go.microsoft.com/fwlink/?LinkID=213885), een Azure AD-toepassing (bijvoorbeeld wzmediaservice) registreren bij de Azure AD-tenant (bijvoorbeeld microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="f40d5-181">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) to the Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="f40d5-182">Het maakt niet uit of u geregistreerd als web-app of systeemeigen app.</span><span class="sxs-lookup"><span data-stu-id="f40d5-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="f40d5-183">U kunt ook kiezen eventuele aanmeldings-URL en de antwoord-URL (bijvoorbeeld http://wzmediaservice.com voor beide).</span><span class="sxs-lookup"><span data-stu-id="f40d5-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="f40d5-184">In de [klassieke Azure-portal](http://go.microsoft.com/fwlink/?LinkID=213885), gaat u naar de **configureren** tabblad van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="f40d5-184">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go to the **Configure** tab of your application.</span></span> <span data-ttu-id="f40d5-185">Opmerking de **client-ID**.</span><span class="sxs-lookup"><span data-stu-id="f40d5-185">Note the **client ID**.</span></span> <span data-ttu-id="f40d5-186">Klik vervolgens onder **sleutels**, genereren een **clientsleutel** (clientgeheim).</span><span class="sxs-lookup"><span data-stu-id="f40d5-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="f40d5-187">Let op het clientgeheim.</span><span class="sxs-lookup"><span data-stu-id="f40d5-187">Take note of the client secret.</span></span> <span data-ttu-id="f40d5-188">Deze worden niet meer weergegeven.</span><span class="sxs-lookup"><span data-stu-id="f40d5-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="f40d5-189">In de [Azure-portal](http://ms.portal.azure.com), gaat u naar de Media Services-account.</span><span class="sxs-lookup"><span data-stu-id="f40d5-189">In the [Azure portal](http://ms.portal.azure.com), go to the Media Services account.</span></span> <span data-ttu-id="f40d5-190">Selecteer de **toegangsbeheer** deelvenster (IAM).</span><span class="sxs-lookup"><span data-stu-id="f40d5-190">Select the **Access Control** (IAM) pane.</span></span> <span data-ttu-id="f40d5-191">Een nieuw lid met de eigenaar of de rol Inzender toevoegt.</span><span class="sxs-lookup"><span data-stu-id="f40d5-191">Add a new member that has either the Owner or the Contributor role.</span></span> <span data-ttu-id="f40d5-192">Zoek op de naam van de toepassing die u in stap 1 (in dit voorbeeld wzmediaservice) geregistreerd voor de principal.</span><span class="sxs-lookup"><span data-stu-id="f40d5-192">For the principal, search for the application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-to-collect"></a><span data-ttu-id="f40d5-193">Gegevens verzamelen</span><span class="sxs-lookup"><span data-stu-id="f40d5-193">Info to collect</span></span>

<span data-ttu-id="f40d5-194">Als u wilt voorbereiden REST coderen, verzamelt de volgende gegevenspunten in de code op te nemen:</span><span class="sxs-lookup"><span data-stu-id="f40d5-194">To prepare REST coding, collect the following data points to include in the code:</span></span>

*   <span data-ttu-id="f40d5-195">Azure AD als een STS-eindpunt: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="f40d5-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="f40d5-196">Van dit eindpunt, wordt een toegangstoken JWT aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="f40d5-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="f40d5-197">Naast het fungeren als een IDP, fungeert Azure AD ook als een STS.</span><span class="sxs-lookup"><span data-stu-id="f40d5-197">In addition to serving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="f40d5-198">Azure AD geeft een JWT voor toegang tot bedrijfsbronnen (een toegangstoken).</span><span class="sxs-lookup"><span data-stu-id="f40d5-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="f40d5-199">Een JWT-token heeft verschillende claims.</span><span class="sxs-lookup"><span data-stu-id="f40d5-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="f40d5-200">Azure Media Services REST-API als resource of doelgroep: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="f40d5-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="f40d5-201">Client-ID: Zie stap 2 in [stappen voor het installatieprogramma](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f40d5-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f40d5-202">Clientgeheim: Zie stap 2 in [stappen voor het installatieprogramma](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="f40d5-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="f40d5-203">Uw Media Services account REST-API-eindpunt in de volgende indeling:</span><span class="sxs-lookup"><span data-stu-id="f40d5-203">Your Media Services account REST API endpoint in the following format:</span></span>

    <span data-ttu-id="f40d5-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="f40d5-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="f40d5-205">Dit is het eindpunt met welke alle REST API voor Media Services in uw toepassing worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="f40d5-205">This is the endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="f40d5-206">Bijvoorbeeld: https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="f40d5-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="f40d5-207">Vervolgens kunt u deze vijf parameters plaatsen in het bestand web.config of app.config te gebruiken in uw code.</span><span class="sxs-lookup"><span data-stu-id="f40d5-207">You can then put these five parameters in your web.config or app.config file, to use in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="f40d5-208">Voorbeeldcode</span><span class="sxs-lookup"><span data-stu-id="f40d5-208">Sample code</span></span>

<span data-ttu-id="f40d5-209">U vindt de voorbeeldcode in [Azure AD-verificatie voor Azure Media Services toegang: beide via REST-API](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="f40d5-209">You can find the sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="f40d5-210">De voorbeeldcode bestaat uit twee delen:</span><span class="sxs-lookup"><span data-stu-id="f40d5-210">The sample code has two parts:</span></span>

*   <span data-ttu-id="f40d5-211">Een bibliotheek-project voor het DLL-bestand dat de REST-API-code voor Azure AD-verificatie en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="f40d5-211">A DLL library project that has all the REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="f40d5-212">Er wordt ook een methode voor het maken van de REST API-aanroepen met het Media Services REST-API-eindpunt met het toegangstoken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-212">It also has a method for making REST API calls to the Media Services REST API endpoint, with the access token.</span></span>
*   <span data-ttu-id="f40d5-213">Een console testclient, die Azure AD authentication initieert en verschillende Media Services REST-API-aanroepen.</span><span class="sxs-lookup"><span data-stu-id="f40d5-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="f40d5-214">Het voorbeeldproject heeft drie functies:</span><span class="sxs-lookup"><span data-stu-id="f40d5-214">The sample project has three features:</span></span>

*   <span data-ttu-id="f40d5-215">Azure AD-verificaties via de clientreferenties verlenen door met alleen de REST-API.</span><span class="sxs-lookup"><span data-stu-id="f40d5-215">Azure AD authentications via the client credentials grant by using only the REST API.</span></span>
*   <span data-ttu-id="f40d5-216">Azure Media Services-toegang met alleen de REST-API.</span><span class="sxs-lookup"><span data-stu-id="f40d5-216">Azure Media Services access by using only the REST API.</span></span>
*   <span data-ttu-id="f40d5-217">Azure Storage-toegang met behulp van alleen de REST-API (zoals gebruikt voor het maken van een Media Services-account met behulp van REST-API).</span><span class="sxs-lookup"><span data-stu-id="f40d5-217">Azure Storage access by using only the REST API (as used to create a Media Services account, by using REST API).</span></span>


## <a name="where-is-the-refresh-token"></a><span data-ttu-id="f40d5-218">Waar bevindt zich het vernieuwingstoken?</span><span class="sxs-lookup"><span data-stu-id="f40d5-218">Where is the refresh token?</span></span>

<span data-ttu-id="f40d5-219">Sommige lezers kunnen vragen: waar zich het vernieuwingstoken?</span><span class="sxs-lookup"><span data-stu-id="f40d5-219">Some readers might ask: Where is the refresh token?</span></span> <span data-ttu-id="f40d5-220">Waarom niet hier een vernieuwingstoken gebruiken?</span><span class="sxs-lookup"><span data-stu-id="f40d5-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="f40d5-221">Het doel van een vernieuwingstoken is niet aan het vernieuwen van een toegangstoken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-221">The purpose of a refresh token is not to refresh an access token.</span></span> <span data-ttu-id="f40d5-222">Het is in plaats daarvan ontworpen tussenkomst van de eindgebruiker verificatie of gebruiker negeren en een geldig toegangstoken nog steeds wanneer een eerder token is verlopen.</span><span class="sxs-lookup"><span data-stu-id="f40d5-222">Instead, it is designed to bypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="f40d5-223">Een betere naam voor een vernieuwingstoken mogelijk iets zoals 'opnieuw-sign-in-gebruikerstoken overslaan'.</span><span class="sxs-lookup"><span data-stu-id="f40d5-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="f40d5-224">Als u het OAuth 2.0 autorisatie verlenen stroom (gebruikersnaam en wachtwoord, fungeert namens een gebruiker) gebruikt, wordt er een vernieuwingstoken helpt u bij een vernieuwde toegangstoken ophalen zonder tussenkomst van de gebruiker vraagt.</span><span class="sxs-lookup"><span data-stu-id="f40d5-224">If you use the OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="f40d5-225">Echter, voor OAuth 2.0 clientreferenties verlenen stroom die in dit artikel worden beschreven, de client fungeert voor eigen rekening.</span><span class="sxs-lookup"><span data-stu-id="f40d5-225">However, for the OAuth 2.0 client credentials grant flow that we describe in this article, the client acts on its own behalf.</span></span> <span data-ttu-id="f40d5-226">U tussenkomst van de gebruiker helemaal niet nodig, en de autorisatie-server niet nodig (en won't) geeft u een vernieuwingstoken.</span><span class="sxs-lookup"><span data-stu-id="f40d5-226">You don't need user intervention at all, and the authorization server doesn't need to (and won't) give you a refresh token.</span></span> <span data-ttu-id="f40d5-227">Als u fouten opsporen in de **GetUrlEncodedJWT** methode, merkt u dat de reactie van het eindpunt van het token een toegangstoken, maar er is geen vernieuwingstoken heeft.</span><span class="sxs-lookup"><span data-stu-id="f40d5-227">If you debug the **GetUrlEncodedJWT** method, you notice that the response from the token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f40d5-228">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="f40d5-228">Next steps</span></span>

<span data-ttu-id="f40d5-229">Aan de slag met [bestanden uploaden naar uw account](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="f40d5-229">Get started with [uploading files to your account](media-services-dotnet-upload-files.md).</span></span>
