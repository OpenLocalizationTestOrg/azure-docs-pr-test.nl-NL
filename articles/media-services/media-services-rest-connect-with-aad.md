---
title: Azure AD authentication tooaccess Azure Media Services-API met REST aaaUse | Microsoft Docs
description: Meer informatie over hoe tooaccess API voor Azure Media Services met Azure Active Directory-verificatie met behulp van REST.
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="d6e7f-103">Gebruik Azure AD authentication tooaccess hello Azure Media Services-API met REST</span><span class="sxs-lookup"><span data-stu-id="d6e7f-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="d6e7f-104">Hello Azure Media Services-team heeft Azure Active Directory (Azure AD) authenticatie biedt ondersteuning voor Azure Media Services toegang uitgebracht.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="d6e7f-105">Deze ook heeft plannen toodeprecate Azure Access Control service-verificatie voor Media Services toegang.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="d6e7f-106">Omdat elke Azure-abonnement en elke Media Services-account aangesloten tooan Azure AD-tenant is, biedt ondersteuning voor Azure AD-verificatie veel voordelen voor beveiliging.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="d6e7f-107">Zie voor meer informatie over deze wijziging en de migratie (als u Hallo Media Services .NET SDK voor uw app gebruiken), Hallo volgende blog plaatst en artikelen:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="d6e7f-108">Azure Media Services introduceert ondersteuning voor Azure AD en afschaffing van toegangsbeheer verificatie</span><span class="sxs-lookup"><span data-stu-id="d6e7f-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="d6e7f-109">Toegang tot Azure Media Services-API met behulp van Azure AD-verificatie</span><span class="sxs-lookup"><span data-stu-id="d6e7f-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="d6e7f-110">Azure AD authentication tooaccess Azure Media Services-API met behulp van Microsoft .NET te gebruiken</span><span class="sxs-lookup"><span data-stu-id="d6e7f-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="d6e7f-111">Aan de slag met Azure AD-verificatie met behulp van hello Azure-portal</span><span class="sxs-lookup"><span data-stu-id="d6e7f-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="d6e7f-112">Sommige klanten moeten toodevelop hun oplossingen Media Services onder Hallo volgende beperkingen:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="d6e7f-113">Gebruik van een programmeertaal die geen Microsoft .NET of C# of Hallo runtime-omgeving is niet Windows.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="d6e7f-114">Azure AD-bibliotheken, zoals Active Directory Authentication Libraries zijn niet beschikbaar voor Hallo programmeertaal of kunnen niet worden gebruikt voor hun runtimeomgeving.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="d6e7f-115">Sommige klanten hebben toepassingen ontwikkeld met behulp van REST-API voor toegangsbeheer, verificatie en Azure Media Services-toegang.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="d6e7f-116">Voor deze klanten, moet u een manier toouse alleen Hallo REST-API voor Azure AD-verificatie en daaropvolgende Azure Media Services toegang tot.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="d6e7f-117">U moet toonot vertrouwen op een van de bibliotheken hello Azure AD of op Hallo Media Services .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="d6e7f-118">In dit artikel we wordt beschreven een oplossing en voorbeeldcode in dit scenario.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="d6e7f-119">Omdat Hallo code alle REST-API-aanroepen, met geen afhankelijkheid van een Azure AD of Azure Media Services-bibliotheek Hallo code kan eenvoudig worden vertaalde tooany andere programmeertaal.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d6e7f-120">Media Services ondersteunt momenteel hello Azure Access Control-servicemodel voor verificatie.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="d6e7f-121">Access Control-verificatie wordt echter 1 juni 2018 afgeschaft.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="d6e7f-122">U wordt aangeraden toohello Azure AD authentication model zo snel mogelijk te migreren.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="d6e7f-123">Ontwerpen</span><span class="sxs-lookup"><span data-stu-id="d6e7f-123">Design</span></span>

<span data-ttu-id="d6e7f-124">In dit artikel gebruiken we Hallo na verificatie en autorisatie-ontwerp:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="d6e7f-125">Autorisatie protocol: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="d6e7f-126">OAuth 2.0 is een Webstandaard die betrekking heeft op zowel de verificatie en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="d6e7f-127">Dit wordt ondersteund door Google, Microsoft, Facebook en PayPal-nummer.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="d6e7f-128">Het is oktober 2012 bekrachtigd.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-128">It was ratified October 2012.</span></span> <span data-ttu-id="d6e7f-129">Microsoft ondersteunt goed OAuth 2.0 en OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="d6e7f-130">Beide van deze standaarden worden ondersteund in meerdere services en clientbibliotheken, waaronder Azure Active Directory, Open Web Interface voor .NET (OWIN)-Katana en Azure AD-bibliotheken.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="d6e7f-131">Type verlenen: clientreferenties type verlenen.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="d6e7f-132">Clientreferenties is een van de Hallo grant vier typen in OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="d6e7f-133">Dit wordt vaak gebruikt voor toegang tot Azure AD Microsoft Graph API.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="d6e7f-134">Verificatiemodus: Service-principal.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="d6e7f-135">Hallo is andere verificatiemodus gebruiker of interactieve verificatie.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="d6e7f-136">Een totaal van vier toepassingen of services, betrokken zijn bij hello Azure AD- en autorisatiestroom voor het gebruik van Media Services.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="d6e7f-137">Hallo-toepassingen en -services en Hallo-stroom worden beschreven in de volgende tabel Hallo:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="d6e7f-138">Toepassingstype</span><span class="sxs-lookup"><span data-stu-id="d6e7f-138">Application type</span></span> |<span data-ttu-id="d6e7f-139">Toepassing</span><span class="sxs-lookup"><span data-stu-id="d6e7f-139">Application</span></span> |<span data-ttu-id="d6e7f-140">Stroom</span><span class="sxs-lookup"><span data-stu-id="d6e7f-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="d6e7f-141">Client</span><span class="sxs-lookup"><span data-stu-id="d6e7f-141">Client</span></span> | <span data-ttu-id="d6e7f-142">Klant-app of oplossing</span><span class="sxs-lookup"><span data-stu-id="d6e7f-142">Customer app or solution</span></span> | <span data-ttu-id="d6e7f-143">Deze app (daadwerkelijk, de proxy) is geregistreerd in Azure AD-tenant Hallo in welke hello Azure-abonnement en Hallo media serviceaccount zich bevinden.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="d6e7f-144">Hallo service-principal van Hallo geregistreerd app vervolgens krijgt met de rol van eigenaar of bijdrager in Hallo Access Control (IAM) van Hallo media service-account.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="d6e7f-145">Hallo-service-principal wordt vertegenwoordigd door Hallo app-ID en client clientgeheim.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="d6e7f-146">ID-Provider (IDP)</span><span class="sxs-lookup"><span data-stu-id="d6e7f-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="d6e7f-147">Azure AD als IDP</span><span class="sxs-lookup"><span data-stu-id="d6e7f-147">Azure AD as IDP</span></span> | <span data-ttu-id="d6e7f-148">Hallo geregistreerde app service-principal (client-ID en clientgeheim) is geverifieerd door Azure AD als Hallo IDP.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="d6e7f-149">Deze verificatie wordt uitgevoerd, intern en impliciet.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="d6e7f-150">Net zoals in de clientreferentiestroom, Hallo-client in plaats van Hallo gebruiker geverifieerd.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="d6e7f-151">Secure Token Service (STS) / OAuth-server</span><span class="sxs-lookup"><span data-stu-id="d6e7f-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="d6e7f-152">Azure AD als STS</span><span class="sxs-lookup"><span data-stu-id="d6e7f-152">Azure AD as STS</span></span> | <span data-ttu-id="d6e7f-153">Na verificatie door Hallo IDP (of de OAuth-Server in termen van OAuth 2.0), een JSON Web Token (JWT) of een toegangstoken is uitgegeven door Azure AD als STS/OAuth-Server voor toegang tot toohello middelste laag resource: in ons geval Hallo Media Services REST API-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="d6e7f-154">Resource</span><span class="sxs-lookup"><span data-stu-id="d6e7f-154">Resource</span></span> | <span data-ttu-id="d6e7f-155">Media Services REST-API</span><span class="sxs-lookup"><span data-stu-id="d6e7f-155">Media Services REST API</span></span> | <span data-ttu-id="d6e7f-156">Elke Media Services REST API-aanroep is geautoriseerd door een toegangstoken dat is uitgegeven door Azure AD als STS of Hallo OAuth-server.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="d6e7f-157">Als u de voorbeeldcode Hallo uitvoeren en vastleggen van een JWT of een toegangstoken, heeft Hallo JWT Hallo volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="d6e7f-158">Hier volgen Hallo toewijzingen tussen Hallo kenmerken in de Hallo JWT en Hallo vier toepassingen of services in de voorgaande tabel Hallo:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="d6e7f-159">Toepassingstype</span><span class="sxs-lookup"><span data-stu-id="d6e7f-159">Application type</span></span> |<span data-ttu-id="d6e7f-160">Toepassing</span><span class="sxs-lookup"><span data-stu-id="d6e7f-160">Application</span></span> |<span data-ttu-id="d6e7f-161">JWT-kenmerk</span><span class="sxs-lookup"><span data-stu-id="d6e7f-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="d6e7f-162">Client</span><span class="sxs-lookup"><span data-stu-id="d6e7f-162">Client</span></span> |<span data-ttu-id="d6e7f-163">Klant-app of oplossing</span><span class="sxs-lookup"><span data-stu-id="d6e7f-163">Customer app or solution</span></span> |<span data-ttu-id="d6e7f-164">toepassings-id: '02ed1e8e-af8b-477e-af3d-7e7219a99ac6'.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="d6e7f-165">Hallo client-ID van een toepassing wordt u tooAzure AD registreren in de volgende sectie Hallo.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="d6e7f-166">ID-Provider (IDP)</span><span class="sxs-lookup"><span data-stu-id="d6e7f-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="d6e7f-167">Azure AD als IDP</span><span class="sxs-lookup"><span data-stu-id="d6e7f-167">Azure AD as IDP</span></span> |<span data-ttu-id="d6e7f-168">IDP: 'https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/'.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="d6e7f-169">Hallo GUID is Hallo-ID van Microsoft-tenant (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="d6e7f-170">Elke tenant heeft zijn eigen, unieke ID.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="d6e7f-171">Secure Token Service (STS) / OAuth-server</span><span class="sxs-lookup"><span data-stu-id="d6e7f-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="d6e7f-172">Azure AD als STS</span><span class="sxs-lookup"><span data-stu-id="d6e7f-172">Azure AD as STS</span></span> | <span data-ttu-id="d6e7f-173">iss: 'https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/'.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="d6e7f-174">Hallo GUID is Hallo-ID van Microsoft-tenant (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="d6e7f-175">Resource</span><span class="sxs-lookup"><span data-stu-id="d6e7f-175">Resource</span></span> | <span data-ttu-id="d6e7f-176">Media Services REST-API</span><span class="sxs-lookup"><span data-stu-id="d6e7f-176">Media Services REST API</span></span> |<span data-ttu-id="d6e7f-177">AUD: 'https://rest.media.azure.net'.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="d6e7f-178">Hallo ontvanger of doelgroep van het toegangstoken Hallo.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="d6e7f-179">Stappen voor installatie</span><span class="sxs-lookup"><span data-stu-id="d6e7f-179">Steps for setup</span></span>

<span data-ttu-id="d6e7f-180">tooregister en stelt u een Azure AD-toepassing voor Azure AD-verificatie en tooobtain een toegangstoken voor het aanroepen van Hallo REST-API van Azure Media Services-eindpunt, volledige Hallo stappen te volgen:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="d6e7f-181">In Hallo [klassieke Azure-portal](http://go.microsoft.com/fwlink/?LinkID=213885), registreren van een Azure AD-toepassing (bijvoorbeeld wzmediaservice) toohello Azure AD-tenant (bijvoorbeeld microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="d6e7f-182">Het maakt niet uit of u geregistreerd als web-app of systeemeigen app.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="d6e7f-183">U kunt ook kiezen eventuele aanmeldings-URL en de antwoord-URL (bijvoorbeeld http://wzmediaservice.com voor beide).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="d6e7f-184">In Hallo [klassieke Azure-portal](http://go.microsoft.com/fwlink/?LinkID=213885), gaat u toohello **configureren** tabblad van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="d6e7f-185">Opmerking Hallo **client-ID**.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-185">Note hello **client ID**.</span></span> <span data-ttu-id="d6e7f-186">Klik vervolgens onder **sleutels**, genereren een **clientsleutel** (clientgeheim).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="d6e7f-187">Let op Hallo clientgeheim.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-187">Take note of hello client secret.</span></span> <span data-ttu-id="d6e7f-188">Deze worden niet meer weergegeven.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="d6e7f-189">In Hallo [Azure-portal](http://ms.portal.azure.com), gaat u toohello Media Services-account.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="d6e7f-190">Selecteer Hallo **toegangsbeheer** deelvenster (IAM).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="d6e7f-191">Een nieuw lid Hallo eigenaar of de rol Inzender Hallo toevoegt.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="d6e7f-192">Zoek op de naam van de toepassing hello die u in stap 1 (in dit voorbeeld wzmediaservice) geregistreerd voor Hallo-principal.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="d6e7f-193">Info toocollect</span><span class="sxs-lookup"><span data-stu-id="d6e7f-193">Info toocollect</span></span>

<span data-ttu-id="d6e7f-194">tooprepare REST-codering, verzamelen Hallo gegevenspunten tooinclude in Hallo code te volgen:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="d6e7f-195">Azure AD als een STS-eindpunt: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="d6e7f-196">Van dit eindpunt, wordt een toegangstoken JWT aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="d6e7f-197">Bovendien tooserving als een IDP Azure AD fungeert ook als een STS.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="d6e7f-198">Azure AD geeft een JWT voor toegang tot bedrijfsbronnen (een toegangstoken).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="d6e7f-199">Een JWT-token heeft verschillende claims.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="d6e7f-200">Azure Media Services REST-API als resource of doelgroep: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="d6e7f-201">Client-ID: Zie stap 2 in [stappen voor het installatieprogramma](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="d6e7f-202">Clientgeheim: Zie stap 2 in [stappen voor het installatieprogramma](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="d6e7f-203">REST-API eindpunt van uw Media Services-account in de volgende indeling Hallo:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="d6e7f-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="d6e7f-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="d6e7f-205">Dit is Hallo-eindpunt met welke alle REST API voor Media Services in uw toepassing worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="d6e7f-206">Bijvoorbeeld: https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="d6e7f-207">Vervolgens kunt u deze vijf parameters plaatsen in uw web.config of app.config-bestand toouse in uw code.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="d6e7f-208">Voorbeeldcode</span><span class="sxs-lookup"><span data-stu-id="d6e7f-208">Sample code</span></span>

<span data-ttu-id="d6e7f-209">U vindt de voorbeeldcode Hallo in [Azure AD-verificatie voor Azure Media Services toegang: beide via REST-API](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="d6e7f-210">Hallo voorbeeldcode bestaat uit twee delen:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="d6e7f-211">Een bibliotheek-project voor het DLL-bestand met alle Hallo REST-API-code voor Azure AD-verificatie en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="d6e7f-212">Er wordt ook een methode voor het maken van de REST-API-aanroepen toohello Media Services REST API-eindpunt, met Hallo toegangstoken.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="d6e7f-213">Een console testclient, die Azure AD authentication initieert en verschillende Media Services REST-API-aanroepen.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="d6e7f-214">Hallo-voorbeeldproject heeft drie functies:</span><span class="sxs-lookup"><span data-stu-id="d6e7f-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="d6e7f-215">Azure AD-verificaties via Hallo clientreferenties verleent met behulp van alleen Hallo REST-API.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="d6e7f-216">Azure Media Services-toegang met behulp van alleen Hallo REST-API.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="d6e7f-217">REST-API toegang tot Azure Storage met behulp van alleen Hallo (als gebruikte toocreate een Media Services-account met behulp van REST-API).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="d6e7f-218">Waar bevindt zich Hallo vernieuwingstoken?</span><span class="sxs-lookup"><span data-stu-id="d6e7f-218">Where is hello refresh token?</span></span>

<span data-ttu-id="d6e7f-219">Sommige lezers kunnen vragen: waar zich het vernieuwingstoken Hallo?</span><span class="sxs-lookup"><span data-stu-id="d6e7f-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="d6e7f-220">Waarom niet hier een vernieuwingstoken gebruiken?</span><span class="sxs-lookup"><span data-stu-id="d6e7f-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="d6e7f-221">Hallo-doel van een vernieuwingstoken is niet toorefresh een toegangstoken.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="d6e7f-222">In plaats daarvan is ontworpen toobypass tussenkomst van de eindgebruiker verificatie of de gebruiker en een geldig toegangstoken nog steeds wanneer een eerdere token is verlopen.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="d6e7f-223">Een betere naam voor een vernieuwingstoken mogelijk iets zoals 'opnieuw-sign-in-gebruikerstoken overslaan'.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="d6e7f-224">Als u Hallo OAuth 2.0 autorisatie verlenen stroom (gebruikersnaam en wachtwoord, fungeert namens een gebruiker) gebruikt, wordt er een vernieuwingstoken helpt u bij een vernieuwde toegangstoken ophalen zonder tussenkomst van de gebruiker vraagt.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="d6e7f-225">Echter voor Hallo OAuth 2.0 clientreferenties verlenen stroom die in dit artikel worden beschreven, fungeert Hallo client voor eigen rekening.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="d6e7f-226">U tussenkomst van de gebruiker helemaal niet nodig en Hallo autorisatie server hoeft niet te (en won't) kunt u een vernieuwingstoken.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="d6e7f-227">Als u fouten Hallo opsporen **GetUrlEncodedJWT** methode, merkt u dat antwoord Hallo van token Hallo-eindpunt een toegangstoken, maar er is geen vernieuwingstoken heeft.</span><span class="sxs-lookup"><span data-stu-id="d6e7f-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d6e7f-228">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="d6e7f-228">Next steps</span></span>

<span data-ttu-id="d6e7f-229">Aan de slag met [tooyour account uploaden van bestanden](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="d6e7f-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
