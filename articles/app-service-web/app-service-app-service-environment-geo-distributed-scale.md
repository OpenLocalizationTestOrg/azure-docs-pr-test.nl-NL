---
title: Geografisch gedistribueerde schaal met App Service-omgevingen
description: Informatie over het horizontaal schalen apps met behulp van geo-distributie met Traffic Manager en App Service-omgevingen.
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 505301b2650c9b8bafdad352055f30e55148ab0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="d37de-103">Geografisch gedistribueerde schaal met App Service-omgevingen</span><span class="sxs-lookup"><span data-stu-id="d37de-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="d37de-104">Overzicht</span><span class="sxs-lookup"><span data-stu-id="d37de-104">Overview</span></span>
<span data-ttu-id="d37de-105">Toepassingsscenario's waarvoor zeer grote schaal kunnen de resource rekencapaciteit beschikbaar is voor een implementatie van een app overschrijden.</span><span class="sxs-lookup"><span data-stu-id="d37de-105">Application scenarios which require very high scale can exceed the compute resource capacity available to a single deployment of an app.</span></span>  <span data-ttu-id="d37de-106">Uw stem toepassingen, zijn sportevenementen en televisie entertainment gebeurtenissen alle voorbeelden van scenario's waarvoor zeer grote schaal.</span><span class="sxs-lookup"><span data-stu-id="d37de-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="d37de-107">Grote schaal vereisten kan worden voldaan door apps, horizontaal uitbreiden met meerdere app-implementaties wordt uitgevoerd in één regio, evenals tussen regio's, voor het verwerken van de vereisten voor het extreme laden.</span><span class="sxs-lookup"><span data-stu-id="d37de-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, to handle extreme load requirements.</span></span>

<span data-ttu-id="d37de-108">App Service-omgevingen zijn een ideaal platform voor horizontale scale-out.</span><span class="sxs-lookup"><span data-stu-id="d37de-108">App Service Environments are an ideal platform for horizontal scale out.</span></span>  <span data-ttu-id="d37de-109">Eenmaal een App-serviceomgeving configuratie is geselecteerd die ondersteuning voor een bekende aanvraagsnelheid biedt, ontwikkelaars kunnen implementeren aanvullende App Service-omgevingen in 'deegvorm' manier om een gewenste piek load capaciteit bereiken.</span><span class="sxs-lookup"><span data-stu-id="d37de-109">Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion to attain a desired peak load capacity.</span></span>

<span data-ttu-id="d37de-110">Stel bijvoorbeeld dat een app uitgevoerd op de configuratie van een App Service-omgeving is getest om te verwerken 20K-aanvragen per seconde (RPS).</span><span class="sxs-lookup"><span data-stu-id="d37de-110">For example suppose an app running on an App Service Environment configuration has been tested to handle 20K requests per second (RPS).</span></span>  <span data-ttu-id="d37de-111">Als de gewenste piek load capaciteit 100K RPS is, worden vervolgens vijf (5)-App Service-omgevingen gemaakt en geconfigureerd om te controleren of dat de toepassing de maximale verwachte belasting kan verwerken.</span><span class="sxs-lookup"><span data-stu-id="d37de-111">If the desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured to ensure the application can handle the maximum projected load.</span></span>

<span data-ttu-id="d37de-112">Aangezien klanten is doorgaans toegang krijgen apps met behulp van een aangepast (of vanity)-domein tot, moeten ontwikkelaars een manier om de app aanvragen verdelen over alle van de exemplaren van de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d37de-112">Since customers typically access apps using a custom (or vanity) domain, developers need a way to distribute app requests across all of the App Service Environment instances.</span></span>  <span data-ttu-id="d37de-113">Een uitstekende manier om dit te bereiken is om op te lossen het aangepaste domein met behulp van een [Azure Traffic Manager-profiel][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="d37de-113">A great way to accomplish this is to resolve the custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="d37de-114">Traffic Manager-profiel kan worden geconfigureerd dat alle afzonderlijke App Service-omgevingen.</span><span class="sxs-lookup"><span data-stu-id="d37de-114">The Traffic Manager profile can be configured to point at all of the individual App Service Environments.</span></span>  <span data-ttu-id="d37de-115">Traffic Manager verwerkt automatisch door de distributie klanten voor alle van de App Service-omgevingen op basis van de instellingen in het Traffic Manager-profiel voor taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="d37de-115">Traffic Manager will automatically handle distributing customers across all of the App Service Environments based on the load balancing settings in the Traffic Manager profile.</span></span>  <span data-ttu-id="d37de-116">Deze methode werkt ongeacht of alle van de App Service-omgevingen zijn geïmplementeerd in één Azure-regio, of wereldwijd over meerdere Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="d37de-116">This approach works regardless of whether all of the App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="d37de-117">Klanten zich niet bewust zijn van het aantal App Service-omgevingen met een app, zelfs nadat u klanten toegang krijgen tot apps via het vanity-domein.</span><span class="sxs-lookup"><span data-stu-id="d37de-117">Furthermore, since customers access apps through the vanity domain, customers are unaware of the number of App Service Environments running an app.</span></span>  <span data-ttu-id="d37de-118">Als gevolg hiervan kunnen ontwikkelaars snel en eenvoudig toevoegen en verwijderen, App Service-omgevingen op basis van waargenomen belasting.</span><span class="sxs-lookup"><span data-stu-id="d37de-118">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="d37de-119">Het conceptuele diagram hieronder ziet u een app horizontaal uitgebreid tussen de drie App Service-omgevingen in één regio.</span><span class="sxs-lookup"><span data-stu-id="d37de-119">The conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![Conceptionele architectuur][ConceptualArchitecture] 

<span data-ttu-id="d37de-121">De rest van dit onderwerp wordt begeleid bij de stappen die betrokken zijn bij het instellen van een gedistribueerde topologie voor de voorbeeld-app met behulp van meerdere App Service-omgevingen.</span><span class="sxs-lookup"><span data-stu-id="d37de-121">The remainder of this topic walks through the steps involved with setting up a distributed topology for the sample app using multiple App Service Environments.</span></span>

## <a name="planning-the-topology"></a><span data-ttu-id="d37de-122">De topologie plannen</span><span class="sxs-lookup"><span data-stu-id="d37de-122">Planning the Topology</span></span>
<span data-ttu-id="d37de-123">Voordat u het opzetten van een gedistribueerde app footprint, is het nuttig om er zijn enkele softwareonderdelen gegevens tevoren.</span><span class="sxs-lookup"><span data-stu-id="d37de-123">Before building out a distributed app footprint, it helps to have a few pieces information ahead of time.</span></span>

* <span data-ttu-id="d37de-124">**Aangepast domein voor de app:** wat is de aangepaste domeinnaam die klanten gebruiken voor toegang tot de app?</span><span class="sxs-lookup"><span data-stu-id="d37de-124">**Custom domain for the app:**  What is the custom domain name that customers will use to access the app?</span></span>  <span data-ttu-id="d37de-125">Voor de voorbeeld-app de aangepaste domeinnaam is *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="d37de-125">For the sample app the custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="d37de-126">**Traffic Manager-domein:** een domeinnaam moet worden gekozen bij het maken van een [Azure Traffic Manager-profiel][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="d37de-126">**Traffic Manager domain:**  A domain name needs to be chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="d37de-127">Deze naam wordt gecombineerd met de *trafficmanager.net* achtervoegsel voor het registreren van een domein-vermelding die wordt beheerd door Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="d37de-127">This name will be combined with the *trafficmanager.net* suffix to register a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="d37de-128">De gekozen naam is voor de voorbeeld-app *schaalbare-as-omgeving-demo*.</span><span class="sxs-lookup"><span data-stu-id="d37de-128">For the sample app, the name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="d37de-129">Als gevolg hiervan de volledige domeinnaam die wordt beheerd door Traffic Manager is *schaalbare op as-omgeving demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="d37de-129">As a result the full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="d37de-130">**Strategie voor de voetafdruk van de app schalen:** de voetafdruk van de toepassing worden verdeeld over meerdere App Service-omgevingen in één regio?</span><span class="sxs-lookup"><span data-stu-id="d37de-130">**Strategy for scaling the app footprint:**  Will the application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="d37de-131">Meerdere regio's?</span><span class="sxs-lookup"><span data-stu-id="d37de-131">Multiple regions?</span></span>  <span data-ttu-id="d37de-132">Een combinatie-and-match van beide benaderingen?</span><span class="sxs-lookup"><span data-stu-id="d37de-132">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="d37de-133">De beslissing moet worden gebaseerd op de verwachtingen van waar het klantverkeer van de worden verzonden, evenals hoe goed de rest van de back-endinfrastructuur voor ondersteuning van een app kan worden geschaald.</span><span class="sxs-lookup"><span data-stu-id="d37de-133">The decision should be based on expectations of where customer traffic will originate, as well as how well the rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="d37de-134">Bijvoorbeeld, met een stateless toepassing 100% kan een app worden massively uitgebreid met een combinatie van meerdere App Service-omgevingen per Azure-regio, vermenigvuldigd met App Service-omgevingen is geïmplementeerd op meerdere Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="d37de-134">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="d37de-135">Met 15 + openbare Azure-regio's kunt kiezen, kunnen klanten echt een footprint wereldwijd hyperschaal toepassing bouwen.</span><span class="sxs-lookup"><span data-stu-id="d37de-135">With 15+ public Azure regions available to choose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="d37de-136">Voor de voorbeeld-app gebruikt voor dit artikel, zijn de drie App Service-omgevingen in één Azure-regio (Zuid-centraal VS) gemaakt.</span><span class="sxs-lookup"><span data-stu-id="d37de-136">For the sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="d37de-137">**Naamgevingsregels voor de App Service-omgevingen:** elke App Service-omgeving vereist een unieke naam op.</span><span class="sxs-lookup"><span data-stu-id="d37de-137">**Naming convention for the App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="d37de-138">Afgezien van één of twee App Service-omgevingen is het handig om een naamconventie om elke App Service-omgeving te identificeren.</span><span class="sxs-lookup"><span data-stu-id="d37de-138">Beyond one or two App Service Environments it is helpful to have a naming convention to help identify each App Service Environment.</span></span>  <span data-ttu-id="d37de-139">Een eenvoudige naamconventie is voor de voorbeeld-app gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d37de-139">For the sample app a simple naming convention was used.</span></span>  <span data-ttu-id="d37de-140">De namen van de drie App Service-omgevingen zijn *fe1ase*, *fe2ase*, en *fe3ase*.</span><span class="sxs-lookup"><span data-stu-id="d37de-140">The names of the three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="d37de-141">**Naamgevingsregels voor de apps:** omdat meerdere exemplaren van de app wordt geïmplementeerd, een naam voor elk exemplaar van de geïmplementeerde app is vereist.</span><span class="sxs-lookup"><span data-stu-id="d37de-141">**Naming convention for the apps:**  Since multiple instances of the app will be deployed, a name is needed for each instance of the deployed app.</span></span>  <span data-ttu-id="d37de-142">Eén weinig bekende maar zeer handige functie van App Service-omgevingen is dat dezelfde naam van de app kan worden gebruikt in meerdere omgevingen van App Service.</span><span class="sxs-lookup"><span data-stu-id="d37de-142">One little-known but very convenient feature of App Service Environments is that the same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="d37de-143">Aangezien elke App Service-omgeving een unieke domeinachtervoegsel heeft, kunt ontwikkelaars exact dezelfde naam van de app opnieuw te gebruiken in elke omgeving.</span><span class="sxs-lookup"><span data-stu-id="d37de-143">Since each App Service Environment has a unique domain suffix, developers can choose to re-use the exact same app name in each environment.</span></span>  <span data-ttu-id="d37de-144">Zo zou een ontwikkelaar apps als volgt met de naam kan hebben: *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, enzovoort.  Voor de voorbeeld-app al elk exemplaar van de app ook een unieke naam heeft.</span><span class="sxs-lookup"><span data-stu-id="d37de-144">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For the sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="d37de-145">De namen van de app-exemplaar gebruikt *webfrontend1*, *webfrontend2*, en *webfrontend3*.</span><span class="sxs-lookup"><span data-stu-id="d37de-145">The app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-the-traffic-manager-profile"></a><span data-ttu-id="d37de-146">Instellen van het Traffic Manager-profiel</span><span class="sxs-lookup"><span data-stu-id="d37de-146">Setting up the Traffic Manager Profile</span></span>
<span data-ttu-id="d37de-147">Als meerdere exemplaren van een app zijn geïmplementeerd op meerdere App Service-omgevingen, kunnen de exemplaren van de afzonderlijke app met Traffic Manager zijn geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="d37de-147">Once multiple instances of an app are deployed on multiple App Service Environments, the  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="d37de-148">Voor de voorbeeld-app een Traffic Manager-profiel is nodig voor *schaalbare op as-omgeving demo.trafficmanager.net* die klanten met een van de volgende exemplaren van de geïmplementeerde app kunt versturen:</span><span class="sxs-lookup"><span data-stu-id="d37de-148">For the sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers to any of the following deployed app instances:</span></span>

* <span data-ttu-id="d37de-149">**webfrontend1.fe1ase.p.azurewebsites.NET:** een exemplaar van de voorbeeld-app geïmplementeerd op de eerste App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d37de-149">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of the sample app deployed on the first App Service Environment.</span></span>
* <span data-ttu-id="d37de-150">**webfrontend2.fe2ase.p.azurewebsites.NET:** een exemplaar van de voorbeeld-app geïmplementeerd op de tweede App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d37de-150">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of the sample app deployed on the second App Service Environment.</span></span>
* <span data-ttu-id="d37de-151">**webfrontend3.fe3ase.p.azurewebsites.NET:** een exemplaar van de voorbeeld-app geïmplementeerd op de derde App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d37de-151">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of the sample app deployed on the third App Service Environment.</span></span>

<span data-ttu-id="d37de-152">De eenvoudigste manier om het registreren van meerdere Azure App Service-eindpunten, alle actieve in de **dezelfde** Azure-regio, wordt met de Powershell [ondersteuning van Azure Resource Manager Traffic Manager][ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="d37de-152">The easiest way to register multiple Azure App Service endpoints, all running in the **same** Azure region, is with the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="d37de-153">De eerste stap is om een Azure Traffic Manager-profiel te maken.</span><span class="sxs-lookup"><span data-stu-id="d37de-153">The first step is to create an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="d37de-154">De onderstaande code ziet u hoe het profiel is gemaakt voor de voorbeeld-app:</span><span class="sxs-lookup"><span data-stu-id="d37de-154">The code below shows how the profile was created for the sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="d37de-155">U ziet hoe de *RelativeDnsName* parameter is ingesteld op *schaalbare-as-omgeving-demo*.</span><span class="sxs-lookup"><span data-stu-id="d37de-155">Notice how the *RelativeDnsName* parameter was set to *scalable-ase-demo*.</span></span>  <span data-ttu-id="d37de-156">Dit is hoe de domeinnaam *schaalbare op as-omgeving demo.trafficmanager.net* is gemaakt en gekoppeld aan een Traffic Manager-profiel.</span><span class="sxs-lookup"><span data-stu-id="d37de-156">This is how the domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="d37de-157">De *TrafficRoutingMethod* parameter definieert het beleid Traffic Manager wordt gebruikt om te bepalen hoe de belasting van klanten verdeeld over alle beschikbare eindpunten van taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="d37de-157">The *TrafficRoutingMethod* parameter defines the load balancing policy Traffic Manager will use to determine how to spread customer load across all of the available endpoints.</span></span>  <span data-ttu-id="d37de-158">In dit voorbeeld de *gewogen* methode hebt gekozen.</span><span class="sxs-lookup"><span data-stu-id="d37de-158">In this example the *Weighted* method was chosen.</span></span>  <span data-ttu-id="d37de-159">Dit leidt ertoe dat de aanvragen van klanten wordt verdeeld over alle van de geregistreerde toepassing eindpunten op basis van het relatieve gewicht die is gekoppeld aan elk eindpunt.</span><span class="sxs-lookup"><span data-stu-id="d37de-159">This will result in customer requests being spread across all of the registered application endpoints based on the relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="d37de-160">Met het profiel dat is gemaakt, wordt elk exemplaar van de app toegevoegd aan het profiel als systeemeigen Azure-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="d37de-160">With the profile created, each app instance is added to the profile as a native Azure endpoint.</span></span>  <span data-ttu-id="d37de-161">De onderstaande code een verwijzing naar elke front-end web-app kan worden opgehaald en worden vervolgens elke app toegevoegd als een Traffic Manager-eindpunt van de *TargetResourceId* parameter.</span><span class="sxs-lookup"><span data-stu-id="d37de-161">The code below fetches a reference to each front end web app, and then adds each app as a Traffic Manager endpoint by way of the *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="d37de-162">U ziet hoe er wordt een aanroep naar *toevoegen AzureTrafficManagerEndpointConfig* voor elke afzonderlijke app-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="d37de-162">Notice how there is one call to *Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="d37de-163">De *TargetResourceId* parameter in elke Powershell-opdracht verwijst naar een van de drie geïmplementeerde app-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="d37de-163">The *TargetResourceId* parameter in each Powershell command references one of the three deployed app instances.</span></span>  <span data-ttu-id="d37de-164">Traffic Manager-profiel wordt load verdeeld over alle drie eindpunten geregistreerd in het profiel.</span><span class="sxs-lookup"><span data-stu-id="d37de-164">The Traffic Manager profile will spread load across all three endpoints registered in the profile.</span></span>

<span data-ttu-id="d37de-165">Alle van de drie eindpunten dezelfde waarde (10) gebruiken voor de *gewicht* parameter.</span><span class="sxs-lookup"><span data-stu-id="d37de-165">All of the three endpoints use the same value (10) for the *Weight* parameter.</span></span>  <span data-ttu-id="d37de-166">Dit resulteert in Traffic Manager verspreiding klantaanvragen over alle exemplaren van de drie app relatief gelijkmatig.</span><span class="sxs-lookup"><span data-stu-id="d37de-166">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-the-apps-custom-domain-at-the-traffic-manager-domain"></a><span data-ttu-id="d37de-167">Aangepast domein van de App op het Traffic Manager-domein aan te wijzen</span><span class="sxs-lookup"><span data-stu-id="d37de-167">Pointing the App's Custom Domain at the Traffic Manager Domain</span></span>
<span data-ttu-id="d37de-168">De laatste stap nodig is voor het aangepaste domein van de app op het Traffic Manager-domein.</span><span class="sxs-lookup"><span data-stu-id="d37de-168">The final step necessary is to point the custom domain of the app at the Traffic Manager domain.</span></span>  <span data-ttu-id="d37de-169">Voor de voorbeeld-app betekent dit dat wijzen *www.scalableasedemo.com* op *schaalbare op as-omgeving demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="d37de-169">For the sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="d37de-170">Deze stap moet worden voltooid met de domeinregistrar dat het aangepaste domein beheert.</span><span class="sxs-lookup"><span data-stu-id="d37de-170">This step needs to be completed with the domain registrar that manages the custom domain.</span></span>  

<span data-ttu-id="d37de-171">Met behulp van uw registrar domein beheerhulpprogramma's, registreert een CNAME moet worden gemaakt die wijst het aangepaste domein in het Traffic Manager-domein.</span><span class="sxs-lookup"><span data-stu-id="d37de-171">Using your registrar's domain management tools, a CNAME records needs to be created which points the custom domain at the Traffic Manager domain.</span></span>  <span data-ttu-id="d37de-172">De volgende afbeelding toont een voorbeeld van hoe deze configuratie CNAME uitziet:</span><span class="sxs-lookup"><span data-stu-id="d37de-172">The picture below shows an example of what this CNAME configuration looks like:</span></span>

![CNAME voor een aangepast domein][CNAMEforCustomDomain] 

<span data-ttu-id="d37de-174">Hoewel het niet wordt gedekt in dit onderwerp, houd er rekening mee dat elk exemplaar van de afzonderlijke Apps moet zijn van het aangepaste domein dat is geregistreerd bij deze ook.</span><span class="sxs-lookup"><span data-stu-id="d37de-174">Although not covered in this topic, remember that each individual app instance needs to have the custom domain registered with it as well.</span></span>  <span data-ttu-id="d37de-175">Anders als een aanvraag voor een app-exemplaar gemaakt en de toepassing niet het aangepaste domein dat is geregistreerd bij de app heeft, mislukt de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="d37de-175">Otherwise if a request makes it to an app instance, and the application does not have the custom domain registered with the app, the request will fail.</span></span>  

<span data-ttu-id="d37de-176">In dit voorbeeld het aangepaste domein is *www.scalableasedemo.com*, en elk toepassingsexemplaar heeft het aangepaste domein is gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="d37de-176">In this example the custom domain is *www.scalableasedemo.com*, and each application instance has the custom domain associated with it.</span></span>

![Aangepast domain][CustomDomain] 

<span data-ttu-id="d37de-178">Zie voor een samenvatting van een aangepast domein registreren met Azure App Service-apps, het volgende artikel op [registreren van aangepaste domeinen][RegisterCustomDomain].</span><span class="sxs-lookup"><span data-stu-id="d37de-178">For a recap of of registering a custom domain with Azure App Service apps, see the following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-the-distributed-topology"></a><span data-ttu-id="d37de-179">De gedistribueerde topologie uitprobeert</span><span class="sxs-lookup"><span data-stu-id="d37de-179">Trying out the Distributed Topology</span></span>
<span data-ttu-id="d37de-180">Het eindresultaat van de Traffic Manager- en DNS-configuratie is die aanvragen voor *www.scalableasedemo.com* worden overgebracht via de volgende volgorde:</span><span class="sxs-lookup"><span data-stu-id="d37de-180">The end result of the Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through the following sequence:</span></span>

1. <span data-ttu-id="d37de-181">Een browser of een apparaat wordt een DNS-zoekopdracht maken voor *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="d37de-181">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="d37de-182">De CNAME-vermelding bij de domeinregistrar zorgt ervoor dat de DNS-zoekopdracht wordt omgeleid naar Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="d37de-182">The CNAME entry at the domain registrar causes the DNS lookup to be redirected to Azure Traffic Manager.</span></span>
3. <span data-ttu-id="d37de-183">Een DNS-zoekopdracht wordt uitgevoerd voor *schaalbare op as-omgeving demo.trafficmanager.net* tegen een van de Azure Traffic Manager-DNS-servers.</span><span class="sxs-lookup"><span data-stu-id="d37de-183">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of the Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="d37de-184">Op basis van het beleid voor taakverdeling (de *TrafficRoutingMethod* parameter eerder gebruikt bij het maken van Traffic Manager-profiel), Traffic Manager Selecteer een van de geconfigureerde eindpunten en de FQDN-naam van dat eindpunt terug naar de browser of het apparaat.</span><span class="sxs-lookup"><span data-stu-id="d37de-184">Based on the load balancing policy (the *TrafficRoutingMethod* parameter used earlier when creating the Traffic Manager profile), Traffic Manager will select one of the configured endpoints and return the FQDN of that endpoint to the browser or device.</span></span>
5. <span data-ttu-id="d37de-185">Aangezien de FQDN-naam van het eindpunt de Url van een app-exemplaar op een App Service-omgeving is, vraagt de browser of het apparaat een Microsoft Azure DNS-server de FQDN-naam omzetten in een IP-adres.</span><span class="sxs-lookup"><span data-stu-id="d37de-185">Since the FQDN of the endpoint is the Url of an app instance running on an App Service Environment, the browser or device will ask a Microsoft Azure DNS server to resolve the FQDN to an IP address.</span></span> 
6. <span data-ttu-id="d37de-186">De browser of het apparaat stuurt de aanvraag HTTP/S naar het IP-adres.</span><span class="sxs-lookup"><span data-stu-id="d37de-186">The browser or device will send the HTTP/S request to the IP address.</span></span>  
7. <span data-ttu-id="d37de-187">De aanvraag aankomt in één van de app-exemplaren uitgevoerd op een van de App Service-omgevingen.</span><span class="sxs-lookup"><span data-stu-id="d37de-187">The request will arrive at one of the app instances running on one of the App Service Environments.</span></span>

<span data-ttu-id="d37de-188">De console van de volgende afbeelding ziet u een DNS-zoekopdracht voor een aangepast domein van de voorbeeld-app met succes te herleiden tot een app-exemplaar op een van de drie voorbeeld-App Service-omgevingen (in dit geval de seconde van de drie App Service-omgevingen):</span><span class="sxs-lookup"><span data-stu-id="d37de-188">The console picture below shows a DNS lookup for the sample app's custom domain successfully resolving to an app instance running on one of the three sample App Service Environments (in this case the second of the three App Service Environments):</span></span>

![DNS-zoekopdracht][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="d37de-190">Aanvullende koppelingen en informatie</span><span class="sxs-lookup"><span data-stu-id="d37de-190">Additional Links and Information</span></span>
<span data-ttu-id="d37de-191">Alle artikelen en hoe-aan de voor App Service-omgevingen zijn beschikbaar in de [Leesmij-bestand voor Toepassingsserviceomgevingen](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="d37de-191">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="d37de-192">Documentatie over de Powershell [ondersteuning van Azure Resource Manager Traffic Manager][ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="d37de-192">Documentation on the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
