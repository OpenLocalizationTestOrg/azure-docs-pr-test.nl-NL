---
title: Gegevens in de netwerkconfiguratie voor het werken met Express Route
description: Gegevens in de netwerkconfiguratie voor het uitvoeren van App Service-omgevingen in een virtuele netwerken zijn verbonden aan een ExpressRoute-Circuit.
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: de1d998ee86c127149dee18e9df577705054ddb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="d3dac-103">Netwerkconfiguratiedetails voor App Service-omgevingen met ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="d3dac-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="d3dac-104">Overzicht</span><span class="sxs-lookup"><span data-stu-id="d3dac-104">Overview</span></span>
<span data-ttu-id="d3dac-105">Klanten kunnen verbinding maken met een [Azure ExpressRoute] [ ExpressRoute] circuit met hun virtuele netwerkinfrastructuur, waardoor hun on-premises netwerk uitbreiden naar Azure.</span><span class="sxs-lookup"><span data-stu-id="d3dac-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit to their virtual network infrastructure, thus extending their on-premises network to Azure.</span></span>  <span data-ttu-id="d3dac-106">Een App Service-omgeving kunnen worden gemaakt in een subnet van deze [virtueel netwerk] [ virtualnetwork] infrastructuur.</span><span class="sxs-lookup"><span data-stu-id="d3dac-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="d3dac-107">Apps die worden uitgevoerd op de App Service-omgeving kunnen vervolgens alleen via de ExpressRoute-verbinding tot stand brengen beveiligde verbindingen met back-end-resources die toegankelijk is.</span><span class="sxs-lookup"><span data-stu-id="d3dac-107">Apps running on the App Service Environment can then establish secure connections to back-end resources accessible only over the ExpressRoute connection.</span></span>  

<span data-ttu-id="d3dac-108">Een App Service-omgeving kunnen worden gemaakt in **beide** een virtueel netwerk van Azure Resource Manager, **of** classic deployment model virtueel netwerk.</span><span class="sxs-lookup"><span data-stu-id="d3dac-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="d3dac-109">Met een recente wijziging in juni 2016, kunnen ASEs nu ook worden geïmplementeerd in virtuele netwerken die gebruikmaken van openbare-adresbereiken of RFC1918 adresruimten (dat wil zeggen</span><span class="sxs-lookup"><span data-stu-id="d3dac-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="d3dac-110">particuliere adressen).</span><span class="sxs-lookup"><span data-stu-id="d3dac-110">private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="d3dac-111">Vereiste netwerkverbinding</span><span class="sxs-lookup"><span data-stu-id="d3dac-111">Required Network Connectivity</span></span>
<span data-ttu-id="d3dac-112">Er zijn verbindingsproblemen netwerkvereisten voor App Service-omgevingen die niet in eerste instantie kan worden voldaan in een virtueel netwerk is verbonden met een ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d3dac-112">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected to an ExpressRoute.</span></span>  <span data-ttu-id="d3dac-113">App Service-omgevingen moeten alle volgende juist werken als:</span><span class="sxs-lookup"><span data-stu-id="d3dac-113">App Service Environments require all of the following in order to function properly:</span></span>

* <span data-ttu-id="d3dac-114">Uitgaande netwerkverbinding met Azure Storage-eindpunten die wereldwijd zijn op beide poorten 80 en 443.</span><span class="sxs-lookup"><span data-stu-id="d3dac-114">Outbound network connectivity to Azure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="d3dac-115">Dit omvat eindpunten zich in dezelfde regio bevinden als de App Service-omgeving, evenals de storage-eindpunten zich in **andere** Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="d3dac-115">This includes endpoints located in the same region as the App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="d3dac-116">Azure Storage-eindpunten omgezet onder de volgende DNS-domeinen: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* en *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="d3dac-116">Azure Storage endpoints resolve under the following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="d3dac-117">Uitgaande netwerkverbinding met de service Azure-bestanden op poort 445.</span><span class="sxs-lookup"><span data-stu-id="d3dac-117">Outbound network connectivity to the Azure Files service on port 445.</span></span>
* <span data-ttu-id="d3dac-118">Uitgaande netwerkverbinding met Sql DB-eindpunten zich in dezelfde regio bevinden als de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-118">Outbound network connectivity to Sql DB endpoints located in the same region as the App Service Environment.</span></span>  <span data-ttu-id="d3dac-119">Eindpunten van de SQL-database los onder het volgende domein: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="d3dac-119">Sql DB endpoints resolve under the following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="d3dac-120">Hiervoor moet de toegang tot poorten 1433, 11000 11999 en 14000 14999 openen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-120">This requires opening access to ports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="d3dac-121">Zie voor meer informatie [in dit artikel over het gebruik van Sql Database V12-poort van](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="d3dac-121">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="d3dac-122">Uitgaande netwerkverbinding met de Azure management vlak eindpunten (ASM- en ARM-eindpunten).</span><span class="sxs-lookup"><span data-stu-id="d3dac-122">Outbound network connectivity to the Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="d3dac-123">Dit omvat uitgaande verbinding met zowel *management.core.windows.net* en *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="d3dac-123">This includes outbound connectivity to both *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="d3dac-124">Uitgaande netwerkverbinding met *ocsp.msocsp.com*, *mscrl.microsoft.com* en *crl.microsoft.com*.</span><span class="sxs-lookup"><span data-stu-id="d3dac-124">Outbound network connectivity to *ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.</span></span>  <span data-ttu-id="d3dac-125">Dit is nodig om SSL-functionaliteit te ondersteunen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-125">This is needed to support SSL functionality.</span></span>
* <span data-ttu-id="d3dac-126">De DNS-configuratie voor het virtuele netwerk moet geschikt is voor het oplossen van alle eindpunten en domeinen die worden vermeld in de eerdere punten.</span><span class="sxs-lookup"><span data-stu-id="d3dac-126">The DNS configuration for the virtual network must be capable of resolving all of the endpoints and domains mentioned in the earlier points.</span></span>  <span data-ttu-id="d3dac-127">Als deze eindpunten kunnen niet worden omgezet, mislukken pogingen tot het maken van App Service-omgeving en bestaande App Service-omgevingen worden gemarkeerd als beschadigd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-127">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="d3dac-128">Uitgaand verkeer op poort 53 is vereist voor communicatie met de DNS-servers.</span><span class="sxs-lookup"><span data-stu-id="d3dac-128">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="d3dac-129">Als een aangepaste DNS-server op het andere einde van een VPN-gateway bestaat, moet de DNS-server bereikbaar zijn vanaf het subnet met de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-129">If a custom DNS server exists on the other end of a VPN gateway, the DNS server must be reachable from the subnet containing the App Service Environment.</span></span> 
* <span data-ttu-id="d3dac-130">Het uitgaande pad kan niet worden getransporteerd via interne zakelijke proxy's en niet kan worden geforceerd worden via een tunnel met on-premises.</span><span class="sxs-lookup"><span data-stu-id="d3dac-130">The outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled to on-premises.</span></span>  <span data-ttu-id="d3dac-131">In dat geval het effectieve NAT-adres van uitgaand netwerkverkeer wordt gewijzigd van App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-131">Doing so changes the effective NAT address of outbound network traffic from the App Service Environment.</span></span>  <span data-ttu-id="d3dac-132">Het NAT-adres van een App Service-omgeving uitgaand netwerkverkeer wijzigt, worden verbindingsproblemen op-veel van de eindpunten die hierboven worden genoemd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-132">Changing the NAT address of an App Service Environment's outbound network traffic will cause connectivity failures to many of the endpoints listed above.</span></span>  <span data-ttu-id="d3dac-133">Dit leidt tot mislukte pogingen voor App Service-omgeving maken, evenals eerder orde App Service-omgevingen worden gemarkeerd als beschadigd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-133">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="d3dac-134">Inkomende netwerktoegang tot de vereiste poorten voor App Service-omgevingen moet worden toegestaan, zoals beschreven in dit [artikel][requiredports].</span><span class="sxs-lookup"><span data-stu-id="d3dac-134">Inbound network access to required ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="d3dac-135">De DNS-vereisten kunnen worden voldaan door te zorgen voor een geldig DNS-infrastructuur is geconfigureerd en onderhouden voor het virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="d3dac-135">The DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for the virtual network.</span></span>  <span data-ttu-id="d3dac-136">Als voor een bepaalde reden worden de DNS-configuratie is gewijzigd nadat een App-serviceomgeving is gemaakt, kunnen ontwikkelaars een App Service-omgeving naar de nieuwe DNS-configuratie worden opgepikt afdwingen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-136">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="d3dac-137">Activering van rolling omgeving opgestart met het pictogram "Restart" zich boven aan de blade voor het beheer van App Service-omgeving in de [Azure-portal] [ NewPortal] , wordt de omgeving voor de nieuwe DNS-configuratie worden opgepikt.</span><span class="sxs-lookup"><span data-stu-id="d3dac-137">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="d3dac-138">De netwerkvereisten voor binnenkomende toegang kunnen worden voldaan door het configureren van een [netwerkbeveiligingsgroep] [ NetworkSecurityGroups] op subnet van de App Service-omgeving om toe te staan de vereiste toegang zoals is beschreven in dit [artikel][requiredports].</span><span class="sxs-lookup"><span data-stu-id="d3dac-138">The inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on the App Service Environment's subnet to allow the required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="d3dac-139">Uitgaande netwerkverbinding inschakelen voor een App Service-omgeving</span><span class="sxs-lookup"><span data-stu-id="d3dac-139">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="d3dac-140">Een nieuwe ExpressRoute-circuit kondigt standaard een standaardroute waarmee uitgaande internetverbinding.</span><span class="sxs-lookup"><span data-stu-id="d3dac-140">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="d3dac-141">Met deze configuratie is een App-serviceomgeving verbinding kunnen maken met andere Azure-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="d3dac-141">With this configuration an App Service Environment will be able to connect to other Azure endpoints.</span></span>

<span data-ttu-id="d3dac-142">Een algemene configuratie van de klant is echter voor het definiëren van hun eigen standaardroute (0.0.0.0/0), waardoor uitgaand internetverkeer in plaats daarvan lokale stromen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-142">However a common customer configuration is to define their own default route (0.0.0.0/0) which forces outbound Internet traffic to instead flow on-premises.</span></span>  <span data-ttu-id="d3dac-143">App Service-omgevingen verbroken dit netwerkverkeer altijd omdat het uitgaande verkeer geblokkeerd on-premises wordt of NAT zou een onherkenbare set adressen die niet langer met verschillende Azure-eindpunten werken.</span><span class="sxs-lookup"><span data-stu-id="d3dac-143">This traffic flow invariably breaks App Service Environments because the outbound traffic is either blocked on-premises, or NAT'd to an unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="d3dac-144">De oplossing is voor het definiëren van een (of meer) door de gebruiker gedefinieerde routes (udr's) op het subnet waarin de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-144">The solution is to define one (or more) user defined routes (UDRs) on the subnet that contains the App Service Environment.</span></span>  <span data-ttu-id="d3dac-145">Een UDR definieert subnet-specifieke routes die in plaats van de standaardroute gehonoreerd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-145">A UDR defines subnet-specific routes that will be honored instead of the default route.</span></span>

<span data-ttu-id="d3dac-146">Het verdient indien mogelijk, gebruik de volgende configuratie:</span><span class="sxs-lookup"><span data-stu-id="d3dac-146">If possible, it is recommended to use the following configuration:</span></span>

* <span data-ttu-id="d3dac-147">Configuratie van de ExpressRoute kondigt 0.0.0.0/0 en standaard force alle uitgaande verkeer lokale tunnels.</span><span class="sxs-lookup"><span data-stu-id="d3dac-147">The ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="d3dac-148">De UDR toegepast op het subnet met de App-serviceomgeving definieert 0.0.0.0/0 met een volgend hoptype Internet (een voorbeeld hiervan is verder omlaag in dit artikel).</span><span class="sxs-lookup"><span data-stu-id="d3dac-148">The UDR applied to the subnet containing the App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="d3dac-149">Het gecombineerde effect van deze stappen is dat subnetniveau UDR voorrang boven de ExpressRoute geforceerde tunneling, zodat uitgaande toegang tot Internet van de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-149">The combined effect of these steps is that the subnet level UDR will take precedence over the ExpressRoute forced tunneling, thus ensuring outbound Internet access from the App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d3dac-150">De routes die zijn gedefinieerd in een UDR **moet** specifiek genoeg is, hebben voorrang boven alle routes die worden geadverteerd door de ExpressRoute-configuratie.</span><span class="sxs-lookup"><span data-stu-id="d3dac-150">The routes defined in a UDR **must** be specific enough to  take precedence over any routes advertised by the ExpressRoute configuration.</span></span>  <span data-ttu-id="d3dac-151">Het onderstaande voorbeeld het adresbereik brede 0.0.0.0/0 gebruikt en als zodanig kan mogelijk worden per ongeluk genegeerd door route-advertisements met behulp van specifieke adresbereiken.</span><span class="sxs-lookup"><span data-stu-id="d3dac-151">The example below uses the broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="d3dac-152">App Service-omgevingen worden niet ondersteund met ExpressRoute-configuraties die **cross adverteert routes van het pad voor openbare peering naar het pad voor persoonlijke peering**.</span><span class="sxs-lookup"><span data-stu-id="d3dac-152">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from the public peering path to the private peering path**.</span></span>  <span data-ttu-id="d3dac-153">ExpressRoute-configuraties waarvoor openbare peering is geconfigureerd, ontvangen route-advertisements van Microsoft voor een groot aantal Microsoft Azure-IP-adresbereiken.</span><span class="sxs-lookup"><span data-stu-id="d3dac-153">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="d3dac-154">Als deze adresbereiken cross aangekondigd op het pad voor persoonlijke peering, wordt het eindresultaat is dat alle uitgaande pakketten van de App Service-omgeving subnet zal force-tunneled van een klant on-premises netwerkinfrastructuur.</span><span class="sxs-lookup"><span data-stu-id="d3dac-154">If these address ranges are cross-advertised on the private peering path, the end result is that all outbound network packets from the App Service Environment's subnet will be force-tunneled to a customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="d3dac-155">Deze stroom netwerk wordt momenteel niet ondersteund met App Service-omgevingen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-155">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="d3dac-156">Er is een oplossing voor dit probleem cross-adverteert routes van het pad voor openbare peering naar het pad voor persoonlijke peering stoppen.</span><span class="sxs-lookup"><span data-stu-id="d3dac-156">One solution to this problem is to stop cross-advertising routes from the public peering path to the private peering path.</span></span>
> 
> 

<span data-ttu-id="d3dac-157">Achtergrondinformatie over de gebruiker gedefinieerde routes zijn beschikbaar in deze [overzicht][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="d3dac-157">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="d3dac-158">Meer informatie over het maken en configureren van de gebruiker gedefinieerde routes zijn beschikbaar in deze [hoe naar handleiding][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="d3dac-158">Details on creating and configuring user defined routes is available in this [How To Guide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="d3dac-159">Voorbeeld UDR configuratie voor een App Service-omgeving</span><span class="sxs-lookup"><span data-stu-id="d3dac-159">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="d3dac-160">**Vereisten**</span><span class="sxs-lookup"><span data-stu-id="d3dac-160">**Pre-requisites**</span></span>

1. <span data-ttu-id="d3dac-161">Installeer Azure Powershell uit de [pagina Azure Downloads] [ AzureDownloads] (met de datum juni 2015 of hoger).</span><span class="sxs-lookup"><span data-stu-id="d3dac-161">Install Azure Powershell from the [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="d3dac-162">Onder "Opdrachtregelprogramma's" is er een koppeling 'Install' onder 'Windows Powershell' waarop de meest recente Powershell-cmdlets wordt geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-162">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install the latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="d3dac-163">Het is raadzaam een uniek subnet wordt gemaakt voor exclusief gebruik door een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-163">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="d3dac-164">Dit zorgt ervoor dat de udr's toegepast op het subnet alleen uitgaand verkeer voor de App Service-omgeving wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="d3dac-164">This ensures that the UDRs applied to the subnet will only open outbound traffic for the App Service Environment.</span></span>
3. <span data-ttu-id="d3dac-165">**Belangrijke**: implementeer de App-serviceomgeving tot geen **nadat** de volgende configuratiestappen uit worden gevolgd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-165">**Important**:  do not deploy the App Service Environment until **after** the following configuration steps are followed.</span></span>  <span data-ttu-id="d3dac-166">Dit zorgt ervoor dat de uitgaande netwerkverbinding beschikbaar is voordat u een App Service-omgeving te implementeren.</span><span class="sxs-lookup"><span data-stu-id="d3dac-166">This ensures that outbound network connectivity is available before attempting to deploy an App Service Environment.</span></span>

<span data-ttu-id="d3dac-167">**Stap 1: Een benoemde routetabel maken**</span><span class="sxs-lookup"><span data-stu-id="d3dac-167">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="d3dac-168">Het volgende codefragment maakt een routetabel met de naam 'DirectInternetRouteTable' in de regio West ons Azure:</span><span class="sxs-lookup"><span data-stu-id="d3dac-168">The following snippet creates a route table called "DirectInternetRouteTable" in the West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="d3dac-169">**Stap 2: Een of meer routes in de routetabel maken**</span><span class="sxs-lookup"><span data-stu-id="d3dac-169">**Step 2:  Create one or more routes in the route table**</span></span>

<span data-ttu-id="d3dac-170">U moet een of meer routes toevoegen aan de routetabel om in te schakelen uitgaande toegang tot Internet.</span><span class="sxs-lookup"><span data-stu-id="d3dac-170">You will need to add one or more routes to the route table in order to enable outbound Internet access.</span></span>  

<span data-ttu-id="d3dac-171">De aanbevolen aanpak voor het configureren van uitgaande toegang tot het Internet is voor het definiëren van een route voor 0.0.0.0/0 zoals hieronder wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="d3dac-171">The recommended approach for configuring outbound access to the Internet is to define a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="d3dac-172">Houd er rekening mee dat 0.0.0.0/0 is een breed bereik, en als zodanig wordt overschreven door meer specifieke adresbereiken die zijn aangekondigd door de ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d3dac-172">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by the ExpressRoute.</span></span>  <span data-ttu-id="d3dac-173">Als u wilt herhalen opnieuw de eerdere aanbeveling, moet een UDR met een route 0.0.0.0/0 worden gebruikt in combinatie met een configuratie voor ExressRoute die alleen ook 0.0.0.0/0 kondigt.</span><span class="sxs-lookup"><span data-stu-id="d3dac-173">To re-iterate the earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="d3dac-174">Als alternatief kunt kunt u een uitgebreide en bijgewerkte lijst met CIDR-bereiken in gebruik door Azure downloaden.</span><span class="sxs-lookup"><span data-stu-id="d3dac-174">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="d3dac-175">Het Xml-bestand met alle van de Azure-IP-adresbereiken is beschikbaar via de [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="d3dac-175">The Xml file containing all of the Azure IP address ranges is available from the [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="d3dac-176">Let echter deze bereiken wijzigen gedurende een periode, dus waardoor periodieke handmatige updates voor de gebruiker gedefinieerde routes om synchroon te houden.</span><span class="sxs-lookup"><span data-stu-id="d3dac-176">Note though that these ranges change over time, thus necessitating periodic manual updates to the user defined routes to keep in sync.</span></span>  <span data-ttu-id="d3dac-177">Bovendien moet u de Azure-IP-adresbereiken om aan te passen binnen de limiet van 100 route 'samenvatten' omdat er een standaard bovenlimiet van 100 routes in een enkel UDR, houd in gedachten dat UDR routes moeten specifieker zijn dan de routes gedefinieerd geadverteerd door uw ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d3dac-177">Also, since there is a default upper limit of 100 routes in a single UDR, you will need to "summarize" the Azure IP address ranges to fit within the 100 route limit, keeping in mind that UDR defined routes need to be more specific than the routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="d3dac-178">**Stap 3: De routetabel aan het subnet met de App Service-omgeving koppelen**</span><span class="sxs-lookup"><span data-stu-id="d3dac-178">**Step 3:  Associate the route table to the subnet containing the App Service Environment**</span></span>

<span data-ttu-id="d3dac-179">De laatste stap in de configuratie is om te koppelen van de routetabel aan het subnet waarop de App Service-omgeving wordt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="d3dac-179">The last  configuration step is to associate the route table to the subnet where the App Service Environment will be deployed.</span></span>  <span data-ttu-id="d3dac-180">De volgende opdracht wordt gekoppeld aan 'DirectInternetRouteTable' aan de 'ASESubnet' waarin u uiteindelijk een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="d3dac-180">The following command associates the "DirectInternetRouteTable" to the "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="d3dac-181">**Stap 4: Laatste stappen**</span><span class="sxs-lookup"><span data-stu-id="d3dac-181">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="d3dac-182">Zodra de routetabel is gebonden aan het subnet, is het raadzaam eerst te testen en Bevestig het gewenste effect.</span><span class="sxs-lookup"><span data-stu-id="d3dac-182">Once the route table is bound to the subnet, it is recommended to first test and confirm the intended effect.</span></span>  <span data-ttu-id="d3dac-183">Bijvoorbeeld: een virtuele machine implementeren in het subnet en Bevestig dat:</span><span class="sxs-lookup"><span data-stu-id="d3dac-183">For example, deploy a virtual machine into the subnet and confirm that:</span></span>

* <span data-ttu-id="d3dac-184">Uitgaand verkeer naar de Azure- en niet-Azure-eindpunten vermeld eerder in dit artikel is **niet** stromende omlaag het ExpressRoute-circuit.</span><span class="sxs-lookup"><span data-stu-id="d3dac-184">Outbound traffic to both Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down the ExpressRoute circuit.</span></span>  <span data-ttu-id="d3dac-185">Het is belangrijk om te controleren of dit gedrag omdat als uitgaand verkeer van het subnet is nog steeds gedwongen via een tunnel on-premises App Service-omgeving altijd het maken mislukt.</span><span class="sxs-lookup"><span data-stu-id="d3dac-185">It is very important to verify this behavior, since if outbound traffic from the subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="d3dac-186">DNS-zoekacties voor de eindpunten eerder zijn alle correct kan omzetten.</span><span class="sxs-lookup"><span data-stu-id="d3dac-186">DNS lookups for the endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="d3dac-187">Zodra de bovenstaande stappen zijn bevestigd, moet u de virtuele machine niet verwijderen omdat het subnet moet 'leeg' op het moment dat de App Service-omgeving wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="d3dac-187">Once the above steps are confirmed, you will need to delete the virtual machine because the subnet needs to be "empty" at the time the App Service Environment is created.</span></span>

<span data-ttu-id="d3dac-188">Ga vervolgens verder met het maken van een App-serviceomgeving!</span><span class="sxs-lookup"><span data-stu-id="d3dac-188">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="d3dac-189">Aan de slag</span><span class="sxs-lookup"><span data-stu-id="d3dac-189">Getting started</span></span>
<span data-ttu-id="d3dac-190">Alle artikelen en hoe-aan de voor App Service-omgevingen zijn beschikbaar in de [Leesmij-bestand voor Toepassingsserviceomgevingen](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="d3dac-190">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="d3dac-191">Om aan de slag met App Service-omgevingen, Zie [Inleiding tot de App Service-omgeving][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="d3dac-191">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="d3dac-192">Zie voor meer informatie over het Azure App Service-platform [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="d3dac-192">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
