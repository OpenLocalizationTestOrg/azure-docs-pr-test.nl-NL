---
title: Het inkomende verkeer naar een App Service-omgeving beheren
description: Meer informatie over het configureren van netwerk-beveiligingsregels voor binnenkomend verkeer naar een App Service-omgeving beheren.
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: ee0a2248a1cd5d76f87b280de05410b94f96c8af
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-control-inbound-traffic-to-an-app-service-environment"></a><span data-ttu-id="8bc8f-103">Het inkomende verkeer naar een App Service-omgeving beheren</span><span class="sxs-lookup"><span data-stu-id="8bc8f-103">How To Control Inbound Traffic to an App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="8bc8f-104">Overzicht</span><span class="sxs-lookup"><span data-stu-id="8bc8f-104">Overview</span></span>
<span data-ttu-id="8bc8f-105">Een App Service-omgeving kunnen worden gemaakt in **beide** een virtueel netwerk van Azure Resource Manager, **of** een klassieke implementatiemodel [virtueel netwerk] [ virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="8bc8f-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="8bc8f-106">Een nieuw virtueel netwerk en een nieuw subnet kunnen worden gedefinieerd op het moment dat een App Service-omgeving wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-106">A new virtual network and new subnet can be defined at the time an App Service Environment is created.</span></span>  <span data-ttu-id="8bc8f-107">U kunt ook kunnen een App Service-omgeving worden gemaakt in een bestaand virtueel netwerk en de bestaande subnet.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="8bc8f-108">Met een wijziging in juni 2016, kan ASEs ook worden ge√Ømplementeerd in virtuele netwerken die gebruikmaken van openbare-adresbereiken of RFC1918 adresruimten (dat wil zeggen</span><span class="sxs-lookup"><span data-stu-id="8bc8f-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e.</span></span> <span data-ttu-id="8bc8f-109">particuliere adressen).</span><span class="sxs-lookup"><span data-stu-id="8bc8f-109">private addresses).</span></span>  <span data-ttu-id="8bc8f-110">Zie voor meer informatie over het maken van een App-serviceomgeving [het maken van een App-serviceomgeving][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="8bc8f-110">For more details on creating an App Service Environment see [How To Create an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="8bc8f-111">Een App-serviceomgeving moet altijd worden gemaakt binnen een subnet omdat een subnet een netwerkgrens bevindt die kan worden gebruikt biedt voor binnenkomend verkeer achter upstream apparaten en services vergrendelen zodat HTTP en HTTPS-verkeer alleen wordt geaccepteerd vanuit specifieke stroomopwaarts IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-111">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used to lock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="8bc8f-112">Binnenkomende en uitgaande netwerkverkeer op een subnet wordt beheerd met behulp van een [netwerkbeveiligingsgroep][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="8bc8f-112">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="8bc8f-113">Binnenkomend verkeer te beheren is vereist in een netwerkbeveiligingsgroep netwerkbeveiligingsregels maakt en vervolgens de netwerkbeveiliging toe te wijzen groep het subnet met de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-113">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning the network security group the subnet containing the App Service Environment.</span></span>

<span data-ttu-id="8bc8f-114">Zodra een netwerkbeveiligingsgroep aan een subnet is toegewezen, wordt binnenkomend verkeer naar apps in App Service-omgeving is toegestaan/geblokkeerd op basis van de toestaan en weigeren van regels die zijn gedefinieerd in de netwerkbeveiligingsgroep.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-114">Once a network security group is assigned to a subnet, inbound traffic to apps in the App Service Environment is allowed/blocked based on the allow and deny rules defined in the network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="8bc8f-115">Inkomende netwerkpoorten worden gebruikt in een App Service-omgeving</span><span class="sxs-lookup"><span data-stu-id="8bc8f-115">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="8bc8f-116">Voordat het vergrendelen van binnenkomend netwerkverkeer koppelen aan een netwerkbeveiligingsgroep, is het belangrijk te weten van de reeks vereiste en optionele netwerkpoorten die wordt gebruikt door een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-116">Before locking down inbound network traffic with a network security group, it is important to know the set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="8bc8f-117">Per ongeluk uit het verkeer naar bepaalde poorten sluiten, kan dit leiden tot verlies aan functionaliteit in een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-117">Accidentally closing off traffic to some ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="8bc8f-118">Hier volgt een lijst met poorten die worden gebruikt door een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-118">The following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="8bc8f-119">Alle poorten zijn **TCP**, tenzij anders wordt duidelijk vermeld:</span><span class="sxs-lookup"><span data-stu-id="8bc8f-119">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="8bc8f-120">454: **poort vereist** gebruikt door de Azure-infrastructuur voor het beheren en onderhouden van App Service-omgevingen met SSL-beveiliging.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-120">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="8bc8f-121">Geen verkeer blokkeert dat naar deze poort.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-121">Do not block traffic to this port.</span></span>  <span data-ttu-id="8bc8f-122">Deze poort is altijd gebonden aan het openbare VIP van een as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-122">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="8bc8f-123">455: **poort vereist** gebruikt door de Azure-infrastructuur voor het beheren en onderhouden van App Service-omgevingen met SSL-beveiliging.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-123">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="8bc8f-124">Geen verkeer blokkeert dat naar deze poort.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-124">Do not block traffic to this port.</span></span>  <span data-ttu-id="8bc8f-125">Deze poort is altijd gebonden aan het openbare VIP van een as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-125">This port is always bound to the public VIP of an ASE.</span></span>
* <span data-ttu-id="8bc8f-126">80: standaard poort voor inkomende HTTP-verkeer naar apps die worden uitgevoerd in App Service-plannen in een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-126">80:  Default port for inbound HTTP traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="8bc8f-127">Op een as ingeschakeld met een ILB-omgeving, worden deze poort is gebonden aan het ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-127">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="8bc8f-128">443: standaard poort voor inkomende SSL-verkeer naar apps die worden uitgevoerd in App Service-plannen in een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-128">443: Default port for inbound SSL traffic to apps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="8bc8f-129">Op een as ingeschakeld met een ILB-omgeving, worden deze poort is gebonden aan het ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-129">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="8bc8f-130">21: besturingskanaal voor FTP.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-130">21:  Control channel for FTP.</span></span>  <span data-ttu-id="8bc8f-131">Deze poort kan veilig worden geblokkeerd als FTP niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-131">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="8bc8f-132">Op een as ingeschakeld met een ILB-omgeving, kan deze poort worden gebonden aan het adres ILB voor een as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-132">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="8bc8f-133">990: besturingskanaal voor FTPS.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-133">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="8bc8f-134">Deze poort kan veilig worden geblokkeerd als FTPS niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-134">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="8bc8f-135">Op een as ingeschakeld met een ILB-omgeving, kan deze poort worden gebonden aan het adres ILB voor een as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-135">On an ILB-enabled ASE, this port can be bound to the ILB address for an ASE.</span></span>
* <span data-ttu-id="8bc8f-136">10001 10020: kanalen voor FTP-gegevens.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-136">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="8bc8f-137">Net als bij het besturingskanaal kunnen deze poorten worden veilig geblokkeerd als FTP niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-137">As with the control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="8bc8f-138">Op een as ingeschakeld met een ILB-omgeving, kan deze poort worden gebonden aan de ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-138">On an ILB-enabled ASE, this port can be bound to the ASE's ILB address.</span></span>
* <span data-ttu-id="8bc8f-139">4016: gebruikt voor foutopsporing op afstand met Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-139">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="8bc8f-140">Deze poort kan veilig worden geblokkeerd als de functie niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-140">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="8bc8f-141">Op een as ingeschakeld met een ILB-omgeving, worden deze poort is gebonden aan het ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-141">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="8bc8f-142">4018: gebruikt voor foutopsporing op afstand met Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-142">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="8bc8f-143">Deze poort kan veilig worden geblokkeerd als de functie niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-143">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="8bc8f-144">Op een as ingeschakeld met een ILB-omgeving, worden deze poort is gebonden aan het ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-144">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>
* <span data-ttu-id="8bc8f-145">4020: gebruikt voor foutopsporing op afstand met Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-145">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="8bc8f-146">Deze poort kan veilig worden geblokkeerd als de functie niet wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-146">This port can be safely blocked if the feature is not being used.</span></span>  <span data-ttu-id="8bc8f-147">Op een as ingeschakeld met een ILB-omgeving, worden deze poort is gebonden aan het ILB-adres van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-147">On an ILB-enabled ASE, this port is bound to the ILB address of the ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="8bc8f-148">Uitgaande verbinding en DNS-vereisten</span><span class="sxs-lookup"><span data-stu-id="8bc8f-148">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="8bc8f-149">Voor een App Service-omgeving te laten functioneren, moet deze ook uitgaande toegang tot verschillende eindpunten vereist.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-149">For an App Service Environment to function properly, it also requires outbound access to various endpoints.</span></span> <span data-ttu-id="8bc8f-150">Een volledige lijst met de externe eindpunten die worden gebruikt door een as-omgeving is in de sectie 'Netwerkverbinding vereist' van de [netwerkconfiguratie voor ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) artikel.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-150">A full list of the external endpoints used by an ASE is in the "Required Network Connectivity" section of the [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="8bc8f-151">App Service-omgevingen moeten een geldige DNS-infrastructuur is geconfigureerd voor het virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-151">App Service Environments require a valid DNS infrastructure configured for the virtual network.</span></span>  <span data-ttu-id="8bc8f-152">Als voor een bepaalde reden worden de DNS-configuratie is gewijzigd nadat een App-serviceomgeving is gemaakt, kunnen ontwikkelaars een App Service-omgeving naar de nieuwe DNS-configuratie worden opgepikt afdwingen.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-152">If for any reason the DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment to pick up the new DNS configuration.</span></span>  <span data-ttu-id="8bc8f-153">Activering van rolling omgeving opgestart met het pictogram "Restart" zich boven aan de blade voor het beheer van App Service-omgeving in de [Azure-portal] [ NewPortal] , wordt de omgeving voor de nieuwe DNS-configuratie worden opgepikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-153">Triggering a rolling environment reboot using the "Restart" icon located at the top of the App Service Environment management blade in the [Azure portal][NewPortal] will cause the environment to pick up the new DNS configuration.</span></span>

<span data-ttu-id="8bc8f-154">Het is ook raadzaam dat alle aangepaste DNS-servers op het vnet ingesteld worden voordat u een App-serviceomgeving tevoren.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-154">It is also recommended that any custom DNS servers on the vnet be setup ahead of time prior to creating an App Service Environment.</span></span>  <span data-ttu-id="8bc8f-155">Als een virtueel netwerk DNS-configuratie wordt gewijzigd terwijl een App Service-omgeving wordt gemaakt, wordt die leiden tot het mislukken van de App Service-omgeving maken van het proces.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-155">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in the App Service Environment creation process failing.</span></span>  <span data-ttu-id="8bc8f-156">In een vergelijkbare vein als een aangepaste DNS-server op het andere einde van een VPN-gateway bestaat en de DNS-server onbereikbaar is of niet beschikbaar is, is mislukt het proces voor het maken van App Service-omgeving ook.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-156">In a similar vein, if a custom DNS server exists on the other end of a VPN gateway, and the DNS server is unreachable or unavailable, the App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="8bc8f-157">Een Netwerkbeveiligingsgroep maken</span><span class="sxs-lookup"><span data-stu-id="8bc8f-157">Creating a Network Security Group</span></span>
<span data-ttu-id="8bc8f-158">Voor volledige informatie over hoe netwerk werk beveiligingsgroepen raadpleegt u de volgende [informatie][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="8bc8f-158">For full details on how network security groups work see the following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="8bc8f-159">Het onderstaande voorbeeld raakt op Azure-servicebeheer licht van netwerkbeveiligingsgroepen en een focus over het configureren en toepassen van een netwerkbeveiligingsgroep aan een subnet met een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-159">The Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group to a subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="8bc8f-160">**Opmerking:** netwerkbeveiligingsgroepen kunnen worden geconfigureerd grafisch weergegeven met de [Azure Portal](https://portal.azure.com) of via Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-160">**Note:** Network security groups can be configured graphically using the [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="8bc8f-161">Netwerkbeveiligingsgroepen worden eerst gemaakt als een zelfstandige entiteit die is gekoppeld aan een abonnement.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-161">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="8bc8f-162">Aangezien netwerkbeveiligingsgroepen in een Azure-regio worden gemaakt, moet u ervoor dat de netwerkbeveiligingsgroep is gemaakt in dezelfde regio bevinden als de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-162">Since network security groups are created in an Azure region, ensure that the network security group is created in the same region as the App Service Environment.</span></span>

<span data-ttu-id="8bc8f-163">Het volgende voorbeeld toont een netwerkbeveiligingsgroep maken:</span><span class="sxs-lookup"><span data-stu-id="8bc8f-163">The following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="8bc8f-164">Zodra een netwerkbeveiligingsgroep is gemaakt, zijn een of meer netwerkbeveiligingsregels toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-164">Once a network security group is created, one or more network security rules are added to it.</span></span>  <span data-ttu-id="8bc8f-165">Aangezien de set regels kan worden gewijzigd na verloop van tijd, wordt u aangeraden om de nummering dat wordt gebruikt voor prioriteiten om gemakkelijk extra regels invoegen na verloop van tijd.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-165">Since the set of rules may change over time, it is recommended to space out the numbering scheme used for rule priorities to make it easy to insert additional rules over time.</span></span>

<span data-ttu-id="8bc8f-166">Het volgende voorbeeld ziet u een regel die expliciet toegang tot de poorten die nodig is voor de Azure-infrastructuur verleent te beheren en onderhouden van een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-166">The example below shows a rule that explicitly grants access to the management ports needed by the Azure infrastructure to manage and maintain an App Service Environment.</span></span>  <span data-ttu-id="8bc8f-167">Houd er rekening mee dat alle beheerverkeer via SSL loopt en wordt beveiligd door clientcertificaten, zodat zelfs als de poorten zijn geopend ze niet toegankelijk door een andere entiteit dan Azure beheerinfrastructuur zijn.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-167">Note that all management traffic flows over SSL and is secured by client certificates, so even though the ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="8bc8f-168">Wanneer het vergrendelen van toegang tot poort 80 en 443 ' verbergen ' een App-serviceomgeving achter upstream apparaten of services, moet u de upstream IP-adres op te geven.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-168">When locking down access to port 80 and 443 to "hide" an App Service Environment behind upstream devices or services, you will need to know the upstream IP address.</span></span>  <span data-ttu-id="8bc8f-169">Bijvoorbeeld, als u gebruikmaakt van een web application firewall (WAF), de WAF heeft een eigen IP-adres (of adressen) die worden gebruikt bij via een proxy-verkeer naar een downstream-App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-169">For example, if you are using a web application firewall (WAF), the WAF will have its own IP address (or addresses) which it uses when proxying traffic to a downstream App Service Environment.</span></span>  <span data-ttu-id="8bc8f-170">U moet deze IP-adres in de *SourceAddressPrefix* parameter van een netwerkbeveiligingsregel.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-170">You will need to use this IP address in the *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="8bc8f-171">In het onderstaande voorbeeld is binnenkomend verkeer van een specifiek IP-adres upstream expliciet toegestaan.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-171">In the example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="8bc8f-172">Het adres *1.2.3.4* wordt gebruikt als een tijdelijke aanduiding voor de IP-adres van een upstream WAF.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-172">The address *1.2.3.4* is used as a placeholder for the IP address of an upstream WAF.</span></span>  <span data-ttu-id="8bc8f-173">Wijzig de waarde zodat deze overeenkomt met het adres dat wordt gebruikt door een upstream-apparaat of service.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-173">Change the value to match the address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="8bc8f-174">Als u FTP-ondersteuning, kunnen de volgende regels worden gebruikt als een sjabloon om toegang te verlenen tot de FTP-besturingselement poort en de gegevens channel-poorten.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-174">If FTP support is desired, the following rules can be used as a template to grant access to the FTP control port and data channel ports.</span></span>  <span data-ttu-id="8bc8f-175">Omdat FTP een stateful protocol, kunt u mogelijk geen FTP-verkeer routeren via een traditionele HTTP/HTTPS-firewall of proxyserver apparaat.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-175">Since FTP is a stateful protocol, you may not be able to route FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="8bc8f-176">In dit geval moet u om in te stellen de *SourceAddressPrefix* op een andere waarde - bijvoorbeeld het IP-adresbereik van ontwikkelaars of implementatie machines op waarmee FTP-clients worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-176">In this case you will need to set the *SourceAddressPrefix* to a different value - for example the IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="8bc8f-177">(**Opmerking:** de gegevenskanaalpoortbereik kan worden gewijzigd tijdens de preview-periode.)</span><span class="sxs-lookup"><span data-stu-id="8bc8f-177">(**Note:**  the data channel port range may change during the preview period.)</span></span>

<span data-ttu-id="8bc8f-178">Als u foutopsporing op afstand met Visual Studio gebruikt, ziet u de volgende regels hoe om toegang te verlenen.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-178">If remote debugging with Visual Studio is used, the following rules demonstrate how to grant access.</span></span>  <span data-ttu-id="8bc8f-179">Er is een afzonderlijke regel voor elke ondersteunde versie van Visual Studio aangezien elke versie een andere poort voor foutopsporing op afstand gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-179">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="8bc8f-180">Net zoals bij FTP-toegang mogelijk niet correct externe foutopsporing verkeer stromen via een traditionele WAF of de proxyapparaat.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-180">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="8bc8f-181">De *SourceAddressPrefix* in plaats daarvan kan worden ingesteld op het IP-adresbereik van Visual Studio developer machines.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-181">The *SourceAddressPrefix* can instead be set to the IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-to-a-subnet"></a><span data-ttu-id="8bc8f-182">Een Netwerkbeveiligingsgroep toewijzen aan een Subnet</span><span class="sxs-lookup"><span data-stu-id="8bc8f-182">Assigning a Network Security Group to a Subnet</span></span>
<span data-ttu-id="8bc8f-183">Een netwerkbeveiligingsgroep heeft een standaardbeveiligingsregel die de toegang aan alle externe verkeer weigert.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-183">A network security group has a default security rule which denies access to all external traffic.</span></span>  <span data-ttu-id="8bc8f-184">Het resultaat van het combineren van de beveiligingsregels voor netwerken die hierboven worden beschreven en de standaardregel voor beveiliging blokkeren van binnenkomend verkeer is dat alleen het verkeer van de bron-adresbereiken die zijn gekoppeld aan een *toestaan* actie kunnen verzenden het verkeer naar apps die worden uitgevoerd in een App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-184">The result from combining the network security rules described above, and the default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able to send traffic to apps running in an App Service Environment.</span></span>

<span data-ttu-id="8bc8f-185">Nadat een netwerkbeveiligingsgroep is gevuld met beveiligingsregels, moet deze worden toegewezen aan het subnet met de App Service-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-185">After a network security group is populated with security rules, it needs to be assigned to the subnet containing the App Service Environment.</span></span>  <span data-ttu-id="8bc8f-186">De opdracht toewijzing verwijst naar zowel de naam van het virtuele netwerk waarin de App Service-omgeving zich bevindt, evenals de naam van het subnet waarin de App-serviceomgeving is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-186">The assignment command references both the name of the virtual network where the App Service Environment resides, as well as the name of the subnet where the App Service Environment was created.</span></span>  

<span data-ttu-id="8bc8f-187">Het volgende voorbeeld ziet een netwerkbeveiligingsgroep wordt toegewezen aan een subnet en het virtuele netwerk:</span><span class="sxs-lookup"><span data-stu-id="8bc8f-187">The example below shows a network security group being assigned to a subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="8bc8f-188">Zodra de groepstoewijzing voor netwerk-beveiliging is geslaagd (de toewijzing is van een langlopende bewerkingen en kan een paar minuten duren), alleen inkomend verkeer die overeenkomt met *toestaan* regels wordt met succes bereiken apps in App Service -Omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-188">Once the network security group assignment succeeds (the assignment is a long-running operations and can take a few minutes to complete), only inbound traffic matching *Allow* rules will successfully reach apps in the App Service Environment.</span></span>

<span data-ttu-id="8bc8f-189">Het volgende voorbeeld ziet voor de volledigheid verwijderen en de netwerkbeveiligingsgroep van het subnet dus reke‚Äë koppelen:</span><span class="sxs-lookup"><span data-stu-id="8bc8f-189">For completeness the following example shows how to remove and thus dis-associate the network security group from the subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="8bc8f-190">Speciale overwegingen voor expliciete IP-SSL</span><span class="sxs-lookup"><span data-stu-id="8bc8f-190">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="8bc8f-191">Als een app is geconfigureerd met een expliciete SSL IP-adres (toepasselijke *alleen* naar ASEs waarvoor een openbare VIP), in plaats van het standaard IP-adres van de App Service-omgeving, HTTP en HTTPS-verkeer stroomt in het subnet via een andere set van poorten dan de poorten 80 en 443.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-191">If an app is configured with an explicit IP-SSL address (applicable *only* to ASEs that have a public VIP), instead of using the default IP address of the App Service Environment, both HTTP and HTTPS traffic flows into the subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="8bc8f-192">Het paar afzonderlijke van poorten gebruikt door elk IP-SSL-adres gevonden in de portal-gebruikersinterface van de App Service-omgeving details UX-blade.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-192">The individual pair of ports used by each IP-SSL address can be found in the portal user interface from the App Service Environment's details UX blade.</span></span>  <span data-ttu-id="8bc8f-193">Selecteer 'alle instellingen'--> 'IP-adressen'.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-193">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="8bc8f-194">Het tabblad 'IP-adressen' bevat een tabel met alle expliciet geconfigureerd IP-SSL-adressen voor de App Service-omgeving, samen met het paar speciale poort die wordt gebruikt voor het routeren van HTTP en HTTPS-verkeer die zijn gekoppeld aan elk IP-SSL-adres.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-194">The "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for the App Service Environment, along with the special port pair that is used to route HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="8bc8f-195">Deze poort toe dat worden gebruikt voor de parameters DestinationPortRange moet bij het configureren van regels in een netwerkbeveiligingsgroep is.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-195">It is this port pair that needs to be used for the DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="8bc8f-196">Wanneer een app op een as-omgeving is geconfigureerd voor gebruik van IP-SSL, is externe klanten niet zien en hoeft niet te hoeven maken over het toewijzen van de paar speciale poort.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-196">When an app on an ASE is configured to use IP-SSL, external customers will not see and do not need to worry about the special port pair mapping.</span></span>  <span data-ttu-id="8bc8f-197">Het verkeer naar de apps worden normaal gesproken overgebracht naar de geconfigureerde IP-SSL-adres.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-197">Traffic to the apps will flow normally to the configured IP-SSL address.</span></span>  <span data-ttu-id="8bc8f-198">De vertaling naar het paar speciale poort automatisch gebeurt intern tijdens de laatste fase van het routeren van verkeer in het subnet met de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="8bc8f-198">The translation to the special port pair automatically happens internally during the final leg of routing traffic into the subnet containing the ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="8bc8f-199">Aan de slag</span><span class="sxs-lookup"><span data-stu-id="8bc8f-199">Getting started</span></span>
<span data-ttu-id="8bc8f-200">Om aan de slag met App Service-omgevingen, Zie [Inleiding tot de App Service-omgeving][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="8bc8f-200">To get started with App Service Environments, see [Introduction to App Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="8bc8f-201">Alle artikelen en hoe-aan de voor App Service-omgevingen zijn beschikbaar in de [Leesmij-bestand voor Toepassingsserviceomgevingen](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="8bc8f-201">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="8bc8f-202">Zie voor meer informatie om apps veilig verbinding maakt met back-end-bron van een App-serviceomgeving [veilig verbinding probeert te maken met back-endresources van een App-serviceomgeving][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="8bc8f-202">For details around apps securely connecting to backend resource from an App Service Environment, see [Securely connecting to Backend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="8bc8f-203">Zie voor meer informatie over het Azure App Service-platform [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="8bc8f-203">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

