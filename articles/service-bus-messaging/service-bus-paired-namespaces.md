---
title: Azure Service Bus gekoppeld naamruimten | Microsoft Docs
description: Implementatiegegevens gekoppelde naamruimte en de kosten
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: a200ea7937b9f5296c743928a9408897adfba428
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="175aa-103">Implementatiegegevens naamruimte gekoppeld en de gevolgen kosten</span><span class="sxs-lookup"><span data-stu-id="175aa-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="175aa-104">De [PairNamespaceAsync] [ PairNamespaceAsync] methode, met behulp van een [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] exemplaar, zichtbaar taken worden uitgevoerd op uw naam.</span><span class="sxs-lookup"><span data-stu-id="175aa-104">The [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="175aa-105">Omdat er worden kosten overwegingen wanneer u de functie gebruikt, is het handig om te begrijpen die taken zodat u het gedrag verwachten wanneer dit gebeurt.</span><span class="sxs-lookup"><span data-stu-id="175aa-105">Because there are cost considerations when using the feature, it is useful to understand those tasks so that you expect the behavior when it happens.</span></span> <span data-ttu-id="175aa-106">De API stelt de volgende automatische gedrag namens jou:</span><span class="sxs-lookup"><span data-stu-id="175aa-106">The API engages the following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="175aa-107">Het maken van achterstand wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="175aa-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="175aa-108">Het maken van een [MessageSender] [ MessageSender] -object dat wordt gesproken naar wachtrijen en onderwerpen.</span><span class="sxs-lookup"><span data-stu-id="175aa-108">Creation of a [MessageSender][MessageSender] object that talks to queues or topics.</span></span>
* <span data-ttu-id="175aa-109">Wanneer een Berichtentiteit niet beschikbaar is, ping verzendt berichten naar de entiteit in een poging om te detecteren die entiteit weer beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="175aa-109">When a messaging entity becomes unavailable, sends ping messages to the entity in an attempt to detect when that entity becomes available again.</span></span>
* <span data-ttu-id="175aa-110">Optioneel wordt gemaakt van een reeks 'bericht pompen' verplaatsen van berichten uit de wachtrij achterstand in de primaire wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="175aa-110">Optionally creates of a set of “message pumps” that move messages from the backlog queues to the primary queues.</span></span>
* <span data-ttu-id="175aa-111">Coördineert/afgesloten sluiten van de primaire en secundaire [MessagingFactory] [ MessagingFactory] exemplaren.</span><span class="sxs-lookup"><span data-stu-id="175aa-111">Coordinates closing/faulting of the primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="175aa-112">Op een hoog niveau de functie werkt als volgt: wanneer de primaire entiteit in orde is, er geen gedragswijzigingen doorgevoerd.</span><span class="sxs-lookup"><span data-stu-id="175aa-112">At a high level, the feature works as follows: when the primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="175aa-113">Wanneer de [FailoverInterval] [ FailoverInterval] duur is verstreken, en de primaire entiteit ziet niet geslaagde verzendt na een tijdelijke [MessagingException] [ MessagingException] of een [TimeoutException][TimeoutException], gebeurt het volgende:</span><span class="sxs-lookup"><span data-stu-id="175aa-113">When the [FailoverInterval][FailoverInterval] duration elapses, and the primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], the following behavior occurs:</span></span>

1. <span data-ttu-id="175aa-114">Verzenden naar de primaire entiteit zijn uitgeschakeld en het systeem pingt de primaire entiteit totdat pings kunnen worden bezorgd.</span><span class="sxs-lookup"><span data-stu-id="175aa-114">Send operations to the primary entity are disabled and the system pings the primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="175aa-115">Een wachtrij willekeurige achterstand is geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="175aa-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="175aa-116">[BrokeredMessage] [ BrokeredMessage] objecten worden doorgestuurd naar de wachtrij gekozen achterstand.</span><span class="sxs-lookup"><span data-stu-id="175aa-116">[BrokeredMessage][BrokeredMessage] objects are routed to the chosen backlog queue.</span></span>
4. <span data-ttu-id="175aa-117">Als een verzendbewerking naar de wachtrij gekozen achterstand mislukt, die wachtrij opgehaald uit de draaihoek en een nieuwe wachtrij is geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="175aa-117">If a send operation to the chosen backlog queue fails, that queue is pulled from the rotation and a new queue is selected.</span></span> <span data-ttu-id="175aa-118">Alle afzenders op de [MessagingFactory] [ MessagingFactory] exemplaar meer van de fout.</span><span class="sxs-lookup"><span data-stu-id="175aa-118">All senders on the [MessagingFactory][MessagingFactory] instance learn of the failure.</span></span>

<span data-ttu-id="175aa-119">De volgende afbeeldingen weer de reeks.</span><span class="sxs-lookup"><span data-stu-id="175aa-119">The following figures depict the sequence.</span></span> <span data-ttu-id="175aa-120">De afzender verzendt eerst berichten.</span><span class="sxs-lookup"><span data-stu-id="175aa-120">First, the sender sends messages.</span></span>

![Gekoppelde naamruimten][0]

<span data-ttu-id="175aa-122">Bij een fout te verzenden naar de primaire wachtrij van de afzender begint het verzenden van berichten naar een willekeurig gekozen achterstand wachtrij.</span><span class="sxs-lookup"><span data-stu-id="175aa-122">Upon failure to send to the primary queue, the sender begins sending messages to a randomly chosen backlog queue.</span></span> <span data-ttu-id="175aa-123">Tegelijk, wordt er een ping-taak gestart.</span><span class="sxs-lookup"><span data-stu-id="175aa-123">Simultaneously, it starts a ping task.</span></span>

![Gekoppelde naamruimten][1]

<span data-ttu-id="175aa-125">De berichten die op dit moment worden nog steeds in de secundaire wachtrij en niet naar de primaire wachtrij zijn geleverd.</span><span class="sxs-lookup"><span data-stu-id="175aa-125">At this point the messages are still in the secondary queue and have not been delivered to the primary queue.</span></span> <span data-ttu-id="175aa-126">Zodra de primaire wachtrij weer in orde is, moet ten minste één proces de syphon worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="175aa-126">Once the primary queue is healthy again, at least one process should be running the syphon.</span></span> <span data-ttu-id="175aa-127">De syphon biedt de berichten van de verschillende achterstand wachtrijen op de juiste bestemming entiteiten (wachtrijen en onderwerpen).</span><span class="sxs-lookup"><span data-stu-id="175aa-127">The syphon delivers the messages from all the various backlog queues to the proper destination entities (queues and topics).</span></span>

![Gekoppelde naamruimten][2]

<span data-ttu-id="175aa-129">De rest van dit onderwerp wordt de specifieke details over de werking van deze onderdelen beschreven.</span><span class="sxs-lookup"><span data-stu-id="175aa-129">The remainder of this topic discusses the specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="175aa-130">Maken van wachtrijen achterstand</span><span class="sxs-lookup"><span data-stu-id="175aa-130">Creation of backlog queues</span></span>
<span data-ttu-id="175aa-131">De [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] -object doorgegeven aan de [PairNamespaceAsync] [ PairNamespaceAsync] methode geeft het aantal achterstand wachtrijen die u wilt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="175aa-131">The [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed to the [PairNamespaceAsync][PairNamespaceAsync] method indicates the number of backlog queues you want to use.</span></span> <span data-ttu-id="175aa-132">Elke wachtrij achterstand wordt vervolgens gemaakt met de volgende eigenschappen expliciet ingesteld (alle andere waarden zijn ingesteld op de [QueueDescription] [ QueueDescription] standaardwaarden):</span><span class="sxs-lookup"><span data-stu-id="175aa-132">Each backlog queue is then created with the following properties explicitly set (all other values are set to the [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="175aa-133">Pad</span><span class="sxs-lookup"><span data-stu-id="175aa-133">Path</span></span> | <span data-ttu-id="175aa-134">[primaire namespace] / x-servicebus-overdracht / [index] waarbij [index] is een waarde in [0, BacklogQueueCount)</span><span class="sxs-lookup"><span data-stu-id="175aa-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="175aa-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="175aa-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="175aa-136">5120</span><span class="sxs-lookup"><span data-stu-id="175aa-136">5120</span></span> |
| <span data-ttu-id="175aa-137">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="175aa-137">MaxDeliveryCount</span></span> |<span data-ttu-id="175aa-138">int zijn. MaxValue</span><span class="sxs-lookup"><span data-stu-id="175aa-138">int.MaxValue</span></span> |
| <span data-ttu-id="175aa-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="175aa-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="175aa-140">TimeSpan.MaxValue op</span><span class="sxs-lookup"><span data-stu-id="175aa-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="175aa-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="175aa-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="175aa-142">TimeSpan.MaxValue op</span><span class="sxs-lookup"><span data-stu-id="175aa-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="175aa-143">LockDuration</span><span class="sxs-lookup"><span data-stu-id="175aa-143">LockDuration</span></span> |<span data-ttu-id="175aa-144">1 minuut</span><span class="sxs-lookup"><span data-stu-id="175aa-144">1 minute</span></span> |
| <span data-ttu-id="175aa-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="175aa-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="175aa-146">De waarde True</span><span class="sxs-lookup"><span data-stu-id="175aa-146">true</span></span> |
| <span data-ttu-id="175aa-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="175aa-147">EnableBatchedOperations</span></span> |<span data-ttu-id="175aa-148">De waarde True</span><span class="sxs-lookup"><span data-stu-id="175aa-148">true</span></span> |

<span data-ttu-id="175aa-149">Bijvoorbeeld de eerste achterstand wachtrij gemaakt voor naamruimte **contoso** heet `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="175aa-149">For example, the first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="175aa-150">Bij het maken van de wachtrijen, de code eerst gecontroleerd of deze wachtrij bestaat.</span><span class="sxs-lookup"><span data-stu-id="175aa-150">When creating the queues, the code first checks to see if such a queue exists.</span></span> <span data-ttu-id="175aa-151">De wachtrij wordt gemaakt als de wachtrij niet bestaat.</span><span class="sxs-lookup"><span data-stu-id="175aa-151">If the queue does not exist, then the queue is created.</span></span> <span data-ttu-id="175aa-152">De code niet opschonen 'extra' achterstand wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="175aa-152">The code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="175aa-153">In het bijzonder als de toepassing met de primaire naamruimte **contoso** aanvragen vijf achterstand wachtrijen, maar een achterstand wachtrij met het pad `contoso/x-servicebus-transfer/7` bestaat, die extra achterstand wachtrij nog steeds aanwezig is, maar wordt niet gebruikt.</span><span class="sxs-lookup"><span data-stu-id="175aa-153">Specifically, if the application with the primary namespace **contoso** requests five backlog queues but a backlog queue with the path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="175aa-154">Het systeem kan expliciet extra achterstand wachtrijen bestaan die niet worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="175aa-154">The system explicitly allows extra backlog queues to exist that would not be used.</span></span> <span data-ttu-id="175aa-155">Als de eigenaar van de naamruimte bent u verantwoordelijk voor het opschonen van ongebruikte/ongewenste achterstand wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="175aa-155">As the namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="175aa-156">De reden voor deze beslissing is dat Service Bus kan niet weet welke doelen voor alle wachtrijen in uw naamruimte bestaat.</span><span class="sxs-lookup"><span data-stu-id="175aa-156">The reason for this decision is that Service Bus cannot know what purposes exist for all the queues in your namespace.</span></span> <span data-ttu-id="175aa-157">Bovendien, als een wachtrij met de gegeven naam bestaat, maar niet aan de veronderstelde voldoet [QueueDescription][QueueDescription], en vervolgens uw redenen zijn uw eigen voor het standaardgedrag wijzigen.</span><span class="sxs-lookup"><span data-stu-id="175aa-157">Furthermore, if a queue exists with the given name but does not meet the assumed [QueueDescription][QueueDescription], then your reasons are your own for changing the default behavior.</span></span> <span data-ttu-id="175aa-158">Er zijn geen garanties worden gemaakt om de wijzigingen in de wachtrijen achterstand door uw code.</span><span class="sxs-lookup"><span data-stu-id="175aa-158">No guarantees are made for modifications to the backlog queues by your code.</span></span> <span data-ttu-id="175aa-159">Zorg ervoor dat uw wijzigingen grondig te testen.</span><span class="sxs-lookup"><span data-stu-id="175aa-159">Make sure to test your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="175aa-160">Aangepaste MessageSender</span><span class="sxs-lookup"><span data-stu-id="175aa-160">Custom MessageSender</span></span>
<span data-ttu-id="175aa-161">Wanneer u verzendt, gaat u alle berichten via een interne [MessageSender] [ MessageSender] -object dat normaal gedraagt zich als alles werkt en wordt omgeleid naar de achterstand in de wachtrij geplaatst wanneer dingen 'verbreekt."</span><span class="sxs-lookup"><span data-stu-id="175aa-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects to the backlog queues when things "break."</span></span> <span data-ttu-id="175aa-162">Bij ontvangst van een tijdelijke fout, wordt een timer gestart.</span><span class="sxs-lookup"><span data-stu-id="175aa-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="175aa-163">Na een [TimeSpan] [ TimeSpan] periode die bestaan uit de [FailoverInterval] [ FailoverInterval] eigenschapswaarde waarover geen geslaagde berichten worden verzonden, de failover is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="175aa-163">After a [TimeSpan][TimeSpan] period consisting of the [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, the failover is engaged.</span></span> <span data-ttu-id="175aa-164">Op dit punt wordt plaats het volgende voor elke entiteit:</span><span class="sxs-lookup"><span data-stu-id="175aa-164">At this point, the following things happen for each entity:</span></span>

* <span data-ttu-id="175aa-165">Een ping-taak wordt uitgevoerd elke [PingPrimaryInterval] [ PingPrimaryInterval] om te controleren of de entiteit beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="175aa-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] to check if the entity is available.</span></span> <span data-ttu-id="175aa-166">Wanneer deze taak is voltooid, wordt alle clientcode die gebruikmaakt van de entiteit onmiddellijk gestart nieuwe berichten verzenden naar de primaire naamruimte.</span><span class="sxs-lookup"><span data-stu-id="175aa-166">Once this task succeeds, all client code that uses the entity immediately starts sending new messages to the primary namespace.</span></span>
* <span data-ttu-id="175aa-167">Toekomstige aanvragen verzenden die dezelfde entiteit van een andere afzenders leidt ertoe dat de [BrokeredMessage] [ BrokeredMessage] worden gewijzigd om ze te zitten in de wachtrij achterstand worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="175aa-167">Future requests to send to that same entity from any other senders will result in the [BrokeredMessage][BrokeredMessage] being sent to be modified to sit in the backlog queue.</span></span> <span data-ttu-id="175aa-168">De wijziging wordt verwijderd van sommige eigenschappen van de [BrokeredMessage] [ BrokeredMessage] object en slaat ze op elders.</span><span class="sxs-lookup"><span data-stu-id="175aa-168">The modification removes some properties from the [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="175aa-169">De volgende eigenschappen zijn uitgeschakeld en wordt toegevoegd onder een nieuwe alias, zodat de Service Bus en de SDK om berichten te verwerken op uniforme wijze:</span><span class="sxs-lookup"><span data-stu-id="175aa-169">The following properties are cleared and added under a new alias, allowing Service Bus and the SDK to process messages uniformly:</span></span>

| <span data-ttu-id="175aa-170">Oude naam van eigenschap</span><span class="sxs-lookup"><span data-stu-id="175aa-170">Old Property Name</span></span> | <span data-ttu-id="175aa-171">Nieuwe naam van eigenschap</span><span class="sxs-lookup"><span data-stu-id="175aa-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="175aa-172">sessie-id</span><span class="sxs-lookup"><span data-stu-id="175aa-172">SessionId</span></span> |<span data-ttu-id="175aa-173">x-ms-sessie-id</span><span class="sxs-lookup"><span data-stu-id="175aa-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="175aa-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="175aa-174">TimeToLive</span></span> |<span data-ttu-id="175aa-175">x-ms-timetolive</span><span class="sxs-lookup"><span data-stu-id="175aa-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="175aa-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="175aa-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="175aa-177">x-ms-pad</span><span class="sxs-lookup"><span data-stu-id="175aa-177">x-ms-path</span></span> |

<span data-ttu-id="175aa-178">Het oorspronkelijke doelpad wordt ook opgeslagen in het bericht als een eigenschap met de naam x-ms-path.</span><span class="sxs-lookup"><span data-stu-id="175aa-178">The original destination path is also stored within the message as a property named x-ms-path.</span></span> <span data-ttu-id="175aa-179">Dit ontwerp kunt berichten voor veel entiteiten worden gecombineerd in een wachtrij één achterstand.</span><span class="sxs-lookup"><span data-stu-id="175aa-179">This design allows messages for many entities to coexist in a single backlog queue.</span></span> <span data-ttu-id="175aa-180">De eigenschappen worden weer met de syphon omgezet.</span><span class="sxs-lookup"><span data-stu-id="175aa-180">The properties are translated back by the syphon.</span></span>

<span data-ttu-id="175aa-181">De aangepaste [MessageSender] [ MessageSender] object problemen kan optreden wanneer berichten benadering de limiet van 256 KB en failover is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="175aa-181">The custom [MessageSender][MessageSender] object can encounter issues when messages approach the 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="175aa-182">De aangepaste [MessageSender] [ MessageSender] object berichten voor alle wachtrijen en onderwerpen samen in de wachtrijen achterstand worden opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="175aa-182">The custom [MessageSender][MessageSender] object stores messages for all queues and topics together in the backlog queues.</span></span> <span data-ttu-id="175aa-183">Dit object combineert berichten van veel primaire samen in de wachtrijen achterstand.</span><span class="sxs-lookup"><span data-stu-id="175aa-183">This object mixes messages from many primaries together within the backlog queues.</span></span> <span data-ttu-id="175aa-184">Voor het afhandelen van taakverdeling tussen veel clients die elkaar niet kent de SDK willekeurig kiest een achterstand wachtrij voor elk [QueueClient] [ QueueClient] of [TopicClient] [ TopicClient] u in code maken.</span><span class="sxs-lookup"><span data-stu-id="175aa-184">To handle load balancing among many clients that do not know each other, the SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="175aa-185">Pings</span><span class="sxs-lookup"><span data-stu-id="175aa-185">Pings</span></span>
<span data-ttu-id="175aa-186">Een ping-bericht is een lege [BrokeredMessage] [ BrokeredMessage] met de [ContentType] [ ContentType] eigenschap is ingesteld op application/vnd.ms-servicebus-ping en een [TimeToLive] [ TimeToLive] waarde van 1 seconde.</span><span class="sxs-lookup"><span data-stu-id="175aa-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set to application/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="175aa-187">Deze ping is een speciaal kenmerk in de Service Bus: de server biedt een ping nooit wanneer elk aanroepend aanvraagt een [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="175aa-187">This ping has one special characteristic in Service Bus: the server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="175aa-188">U moet dus nooit de informatie over het ontvangen en deze berichten genegeerd.</span><span class="sxs-lookup"><span data-stu-id="175aa-188">Thus, you never have to learn how to receive and ignore these messages.</span></span> <span data-ttu-id="175aa-189">Elke entiteit (unieke wachtrij of onderwerp) per [MessagingFactory] [ MessagingFactory] exemplaar per client zal worden gepingd wanneer deze worden beschouwd als niet beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="175aa-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered to be unavailable.</span></span> <span data-ttu-id="175aa-190">Standaard is dit gebeurt eenmaal per minuut.</span><span class="sxs-lookup"><span data-stu-id="175aa-190">By default, this happens once per minute.</span></span> <span data-ttu-id="175aa-191">Ping-berichten worden beschouwd als gewone Service Bus-berichten en kunnen leiden tot de kosten van bandbreedte en berichten.</span><span class="sxs-lookup"><span data-stu-id="175aa-191">Ping messages are considered to be regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="175aa-192">Als de clients detecteren dat het systeem beschikbaar is, stopt de berichten.</span><span class="sxs-lookup"><span data-stu-id="175aa-192">As soon as the clients detect that the system is available, the messages stop.</span></span>

## <a name="the-syphon"></a><span data-ttu-id="175aa-193">De syphon</span><span class="sxs-lookup"><span data-stu-id="175aa-193">The syphon</span></span>
<span data-ttu-id="175aa-194">Ten minste één uitvoerbaar programma in de toepassing moet actief zijn de syphon.</span><span class="sxs-lookup"><span data-stu-id="175aa-194">At least one executable program in the application should be actively running the syphon.</span></span> <span data-ttu-id="175aa-195">De syphon voert een long poll ontvangen die 15 minuten duurt.</span><span class="sxs-lookup"><span data-stu-id="175aa-195">The syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="175aa-196">Wanneer alle entiteiten beschikbaar zijn en hebt u 10 achterstand wachtrijen, roept de toepassing die als host fungeert voor de syphon de ontvangstbewerking 40 keer per uur, 960 keer per dag en 28800 keer in 30 dagen.</span><span class="sxs-lookup"><span data-stu-id="175aa-196">When all entities are available and you have 10 backlog queues, the application that hosts the syphon calls the receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="175aa-197">Wanneer de syphon actief berichten van de achterstand naar de primaire wachtrij verplaatst is, krijgt elk bericht met de volgende kosten (standaard kosten voor de grootte van het bericht en de bandbreedte van toepassing in alle fasen):</span><span class="sxs-lookup"><span data-stu-id="175aa-197">When the syphon is actively moving messages from the backlog to the primary queue, each message experiences the following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="175aa-198">Verzenden naar de achterstand.</span><span class="sxs-lookup"><span data-stu-id="175aa-198">Send to the backlog.</span></span>
2. <span data-ttu-id="175aa-199">Ontvangen van de achterstand.</span><span class="sxs-lookup"><span data-stu-id="175aa-199">Receive from the backlog.</span></span>
3. <span data-ttu-id="175aa-200">Verzenden naar de primaire.</span><span class="sxs-lookup"><span data-stu-id="175aa-200">Send to the primary.</span></span>
4. <span data-ttu-id="175aa-201">Ontvangen van de primaire.</span><span class="sxs-lookup"><span data-stu-id="175aa-201">Receive from the primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="175aa-202">Sluit/fout gedrag</span><span class="sxs-lookup"><span data-stu-id="175aa-202">Close/fault behavior</span></span>
<span data-ttu-id="175aa-203">In een toepassing die als host fungeert voor de syphon, nadat de primaire of secundaire [MessagingFactory] [ MessagingFactory] bedrijfsstoringen of wordt afgesloten zonder de partner die ook wordt een fout opgetreden/gesloten en de syphon deze toestand is detecteert, de syphon fungeert.</span><span class="sxs-lookup"><span data-stu-id="175aa-203">Within an application that hosts the syphon, once the primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and the syphon detects this state, the syphon acts.</span></span> <span data-ttu-id="175aa-204">Als de andere [MessagingFactory] [ MessagingFactory] is niet afgesloten binnen 5 seconden, wordt de syphon nog steeds openen fault- [MessagingFactory][MessagingFactory].</span><span class="sxs-lookup"><span data-stu-id="175aa-204">If the other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, the syphon will fault the still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="175aa-205">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="175aa-205">Next steps</span></span>
<span data-ttu-id="175aa-206">Zie [asynchrone messaging-patronen en hoge beschikbaarheid] [ Asynchronous messaging patterns and high availability] voor een gedetailleerde bespreking van de asynchrone Service Bus-berichtenservice.</span><span class="sxs-lookup"><span data-stu-id="175aa-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png
