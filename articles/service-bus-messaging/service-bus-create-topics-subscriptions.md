---
title: aaaCreate toepassingen die gebruikmaken van Azure Service Bus-onderwerpen en abonnementen | Microsoft Docs
description: Inleiding toohello voor publiceren / abonneren mogelijkheden die worden aangeboden door Service Bus-onderwerpen en abonnementen.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="9aa98-103">Toepassingen die gebruikmaken van Service Bus-onderwerpen en abonnementen maken</span><span class="sxs-lookup"><span data-stu-id="9aa98-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="9aa98-104">Azure Service Bus ondersteunt een set van cloud-gebaseerde, bericht georiënteerd middleware-technologieën waaronder betrouwbare message Queuing- en duurzame publiceren/abonneren messaging.</span><span class="sxs-lookup"><span data-stu-id="9aa98-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="9aa98-105">In dit artikel is gebaseerd op Hallo informatie in [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md) en biedt een inleiding toohello publiceren/abonneren mogelijkheden die worden aangeboden door Service Bus-onderwerpen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="9aa98-106">Zich ontwikkelende retail-scenario</span><span class="sxs-lookup"><span data-stu-id="9aa98-106">Evolving retail scenario</span></span>
<span data-ttu-id="9aa98-107">In dit artikel blijft Hallo retail-scenario gebruikt in [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="9aa98-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="9aa98-108">Intrekken verkoopgegevens uit afzonderlijke punt van verkooppunten (POS)-aansluitingen moet gerouteerde tooan inventaris beheersysteem dat gebruikmaakt van die gegevens toodetermine wanneer stock toobe aangevuld heeft.</span><span class="sxs-lookup"><span data-stu-id="9aa98-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="9aa98-109">Elke POS-terminal rapporteert de verkoopgegevens door het verzenden van berichten toohello **DataCollectionQueue** wachtrij, waar ze blijven totdat ze worden ontvangen door het beheersysteem Hallo-inventaris, zoals hier wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="9aa98-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![Servicebus 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="9aa98-111">Dit scenario wordt een nieuwe vereiste is tooevolve toohello system toegevoegd: Hallo winkeleigenaar wil toobe kunnen toomonitor hoe Hallo store in realtime presteert.</span><span class="sxs-lookup"><span data-stu-id="9aa98-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="9aa98-112">tooaddress deze vereiste Hallo system moet 'Tik op"uitgeschakeld Hallo verkoopgegevens stroom.</span><span class="sxs-lookup"><span data-stu-id="9aa98-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="9aa98-113">We willen nog steeds dat elk bericht verzonden door Hallo POS aansluitingen toobe toohello inventaris beheersysteem als voordat verzonden, maar we willen dat een ander exemplaar van elk bericht dat we toopresent Hallo dashboard weergave toohello winkeleigenaar kunnen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9aa98-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="9aa98-114">In een situatie zoals deze, waarin u elk bericht toobe verbruikt door meerdere partijen nodig kunt u Service Bus *onderwerpen*.</span><span class="sxs-lookup"><span data-stu-id="9aa98-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="9aa98-115">Onderwerpen bevatten een patroon voor publiceren/abonneren waarin elk gepubliceerde bericht tooone beschikbaar wordt gesteld of meer abonnementen die zijn geregistreerd bij Hallo onderwerp.</span><span class="sxs-lookup"><span data-stu-id="9aa98-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="9aa98-116">In tegenstelling met wachtrijen wordt elk bericht ontvangen door een enkele gebruiker.</span><span class="sxs-lookup"><span data-stu-id="9aa98-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="9aa98-117">Tooa onderwerp-berichten worden verzonden in Hallo dezelfde manier als ze tooa wachtrij worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="9aa98-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="9aa98-118">Echter worden berichten niet ontvangen van Hallo onderwerp rechtstreeks; ze worden ontvangen van abonnementen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="9aa98-119">U kunt een abonnement tooa onderwerp beschouwen als een virtuele wachtrij die kopieën van Hallo-berichten die worden verzonden toothat onderwerp ontvangt.</span><span class="sxs-lookup"><span data-stu-id="9aa98-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="9aa98-120">Berichten worden ontvangen van een abonnement Hallo op dezelfde manier als ze worden ontvangen van een wachtrij.</span><span class="sxs-lookup"><span data-stu-id="9aa98-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="9aa98-121">Als u terugkeert toohello retail-scenario, Hallo wachtrij wordt vervangen door een onderwerp en een abonnement wordt toegevoegd, welke systeemonderdeel Hallo inventaris management kunt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9aa98-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="9aa98-122">Hallo system verschijnt nu als volgt:</span><span class="sxs-lookup"><span data-stu-id="9aa98-122">hello system now appears as follows:</span></span>

![Servicebus 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="9aa98-124">Hallo configuratie hier voert dezelfde toohello vorige op basis van een wachtrij ontwerp.</span><span class="sxs-lookup"><span data-stu-id="9aa98-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="9aa98-125">Dat wil zeggen toohello onderwerp verzonden berichten worden gerouteerd toohello **inventaris** abonnement, van welke Hallo **voorraadbeheer** ze worden verbruikt.</span><span class="sxs-lookup"><span data-stu-id="9aa98-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="9aa98-126">In de volgorde toosupport Hallo management dashboard maken we een tweede abonnement op Hallo onderwerp, zoals hier wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="9aa98-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![Servicebus 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="9aa98-128">Met deze configuratie bestaat elk bericht van Hallo POS-aansluitingen beschikbaar tooboth hello **Dashboard** en **inventaris** abonnementen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="9aa98-129">Hallo code weergeven</span><span class="sxs-lookup"><span data-stu-id="9aa98-129">Show me hello code</span></span>
<span data-ttu-id="9aa98-130">Hallo artikel [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md) wordt beschreven hoe toosign voor een Azure-account en een Servicenaamruimte maken.</span><span class="sxs-lookup"><span data-stu-id="9aa98-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="9aa98-131">Hallo gemakkelijkste manier tooreference Service Bus-afhankelijkheden tooinstall Hallo Service Bus is [Nuget-pakket](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="9aa98-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="9aa98-132">U kunt ook Hallo Service Bus-bibliotheken vinden als onderdeel van hello Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="9aa98-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="9aa98-133">Hallo downloaden is beschikbaar op Hallo [-SDK van Azure-downloadpagina](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="9aa98-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="9aa98-134">Hallo-onderwerp en abonnementen maken</span><span class="sxs-lookup"><span data-stu-id="9aa98-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="9aa98-135">Beheerbewerkingen voor Service Bus messaging-entiteiten (wachtrijen en publiceren/abonneren onderwerpen) worden uitgevoerd via Hallo [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasse.</span><span class="sxs-lookup"><span data-stu-id="9aa98-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="9aa98-136">Juiste referenties vereist zijn in de volgorde toocreate een **NamespaceManager** exemplaar voor een bepaalde naamruimte.</span><span class="sxs-lookup"><span data-stu-id="9aa98-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="9aa98-137">Service Bus maakt gebruik van een [Shared Access Signature (SAS)](service-bus-sas.md) op basis van het beveiligingsmodel.</span><span class="sxs-lookup"><span data-stu-id="9aa98-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="9aa98-138">Hallo [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) klasse vertegenwoordigt een beveiligingstokenprovider met ingebouwde factorymethoden retourneren sommige bekende token providers.</span><span class="sxs-lookup"><span data-stu-id="9aa98-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="9aa98-139">We gebruiken een [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) methode toohold Hallo SAS-referenties.</span><span class="sxs-lookup"><span data-stu-id="9aa98-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="9aa98-140">Hallo [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) exemplaar vervolgens met het basisadres van Hallo Service Bus-naamruimte en de tokenprovider Hallo Hallo is samengesteld.</span><span class="sxs-lookup"><span data-stu-id="9aa98-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="9aa98-141">Hallo [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasse biedt methoden toocreate, opsommen en verwijderen van berichtentiteiten.</span><span class="sxs-lookup"><span data-stu-id="9aa98-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="9aa98-142">code die hier wordt weergegeven ziet hoe Hallo Hallo **NamespaceManager** exemplaar is gemaakt en gebruikt toocreate hello **DataCollectionTopic** onderwerp.</span><span class="sxs-lookup"><span data-stu-id="9aa98-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="9aa98-143">Houd er rekening mee dat er overloads van Hallo zijn [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) methode waarmee u tooset eigenschappen van Hallo onderwerp.</span><span class="sxs-lookup"><span data-stu-id="9aa98-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="9aa98-144">U kunt bijvoorbeeld instellen dat Hallo time to live (TTL) standaardwaarde voor toohello onderwerp verzonden berichten.</span><span class="sxs-lookup"><span data-stu-id="9aa98-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="9aa98-145">Vervolgens voegt u Hallo **inventaris** en **Dashboard** abonnementen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="9aa98-146">Verzenden van berichten toohello onderwerp</span><span class="sxs-lookup"><span data-stu-id="9aa98-146">Send messages toohello topic</span></span>
<span data-ttu-id="9aa98-147">Voor runtime-bewerkingen voor Service Bus-entiteiten; bijvoorbeeld, verzenden en ontvangen berichten, een toepassing moet eerst maken een [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span><span class="sxs-lookup"><span data-stu-id="9aa98-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="9aa98-148">Vergelijkbare toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) klasse hello **MessagingFactory** exemplaar uit het basisadres van Hallo-Servicenaamruimte en tokenprovider Hallo Hallo is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="9aa98-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="9aa98-149">Verzonden berichten tooand ontvangen van Service Bus-onderwerpen, zijn exemplaren van Hallo [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) klasse.</span><span class="sxs-lookup"><span data-stu-id="9aa98-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="9aa98-150">Deze klasse bestaat uit een aantal standaardeigenschappen (zoals [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) en [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), een woordenlijst die wordt gebruikt toohold toepassingseigenschappen en een hoofdtekst met willekeurige toepassingsgegevens.</span><span class="sxs-lookup"><span data-stu-id="9aa98-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="9aa98-151">Een toepassing hello instantie worden ingesteld door door te geven in elk serialiseerbaar object (hello volgende voorbeeld wordt doorgegeven een **SalesData** -object met Hallo verkoopgegevens uit Hallo POS terminal), worden met bepaalde Hallo [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize Hallo-object.</span><span class="sxs-lookup"><span data-stu-id="9aa98-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="9aa98-152">U kunt ook een [stroom](https://msdn.microsoft.com/library/system.io.stream.aspx) object kan worden opgegeven.</span><span class="sxs-lookup"><span data-stu-id="9aa98-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="9aa98-153">Hallo gemakkelijkste manier toosend berichten toohello onderwerp is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate een [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object rechtstreeks vanuit Hallo [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) exemplaar:</span><span class="sxs-lookup"><span data-stu-id="9aa98-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="9aa98-154">Berichten ontvangen van een abonnement</span><span class="sxs-lookup"><span data-stu-id="9aa98-154">Receive messages from a subscription</span></span>
<span data-ttu-id="9aa98-155">Vergelijkbare toousing wachtrijen, tooreceive berichten van een abonnement kunt u een [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) -object dat u rechtstreeks vanuit Hallo maken [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) met [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="9aa98-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="9aa98-156">U kunt een Hallo twee verschillende modi ontvangen (**ReceiveAndDelete** en **PeekLock**), zoals beschreven in [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="9aa98-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="9aa98-157">Houd er rekening mee dat bij het maken van een **MessageReceiver** voor abonnementen, Hallo *entityPath* parameter is van het formulier Hallo `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="9aa98-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="9aa98-158">Daarom toocreate een **MessageReceiver** voor Hallo **inventaris** abonnement Hallo **DataCollectionTopic** onderwerp *entityPath*te moet worden ingesteld`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="9aa98-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="9aa98-159">Hallo code er als volgt:</span><span class="sxs-lookup"><span data-stu-id="9aa98-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="9aa98-160">Abonnementsfilters</span><span class="sxs-lookup"><span data-stu-id="9aa98-160">Subscription filters</span></span>
<span data-ttu-id="9aa98-161">Tot nu toe, in dit scenario alle berichten die verstuurd toohello onderwerp bestaan abonnementen beschikbaar tooall geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="9aa98-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="9aa98-162">Hallo hier sleutel zinsnede worden 'beschikbaar gesteld."</span><span class="sxs-lookup"><span data-stu-id="9aa98-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="9aa98-163">Bij het Service Bus-abonnementen Zie alle berichten die verstuurd toohello onderwerp, kunt u alleen een subset van deze wachtrij berichten toohello virtuele abonnement kunt kopiëren.</span><span class="sxs-lookup"><span data-stu-id="9aa98-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="9aa98-164">Dit wordt uitgevoerd met behulp van abonnement *filters*.</span><span class="sxs-lookup"><span data-stu-id="9aa98-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="9aa98-165">Wanneer u een abonnement maakt, kunt u opgeven dat een filterexpressie Hallo vorm van een style-predikaat van SQL92 wordt geïmplementeerd dat via het Hallo-eigenschappen van het Hallo-bericht werkt, beide Systeemeigenschappen Hallo (bijvoorbeeld [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) en de toepassing hello eigenschappen, zoals **StoreName** in het vorige voorbeeld Hallo.</span><span class="sxs-lookup"><span data-stu-id="9aa98-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="9aa98-166">Hallo scenario tooillustrate in ontwikkeling dit, is een tweede archief toobe toegevoegde tooour retail-scenario.</span><span class="sxs-lookup"><span data-stu-id="9aa98-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="9aa98-167">Verkoopgegevens uit alle Hallo POS-aansluitingen van beide winkels nog steeds toobe gerouteerd toohello gecentraliseerde inventaris management-systeem, maar een winkelmanager met Hallo dashboard hulpprogramma is alleen geïnteresseerd in Hallo prestaties van dat archief.</span><span class="sxs-lookup"><span data-stu-id="9aa98-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="9aa98-168">U kunt filteren tooachieve dit abonnement.</span><span class="sxs-lookup"><span data-stu-id="9aa98-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="9aa98-169">Wanneer Hallo POS-aansluitingen berichten publiceert, ze in te stellen Hallo **StoreName** eigenschap van toepassing op het Hallo-bericht.</span><span class="sxs-lookup"><span data-stu-id="9aa98-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="9aa98-170">Bijvoorbeeld twee winkels gegeven **Redmond** en **Seattle**, Hallo POS-aansluitingen in Hallo Redmond opslaan stempel hun verkoopgegevens met berichten een **StoreName** gelijk zijn aan te **Redmond**, terwijl Hallo Seattle opslaan POS aansluitingen gebruik een **StoreName** gelijk zijn aan te**Seattle**.</span><span class="sxs-lookup"><span data-stu-id="9aa98-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="9aa98-171">de winkelmanager Hallo Hallo Redmond alleen opslaan wil toosee gegevens uit de POS-aansluitingen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="9aa98-172">Hallo-systeem weergegeven als volgt:</span><span class="sxs-lookup"><span data-stu-id="9aa98-172">hello system appears as follows:</span></span>

![Service-Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="9aa98-174">tooset deze routering geïnstalleerd, hebt u Hallo **Dashboard** abonnement als volgt:</span><span class="sxs-lookup"><span data-stu-id="9aa98-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="9aa98-175">Met deze [abonnementfilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), alleen berichten met Hallo **StoreName** eigenschappenset te**Redmond** worden virtuele wachtrij van de gekopieerde toohello voor Hallo **Dashboard** abonnement.</span><span class="sxs-lookup"><span data-stu-id="9aa98-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="9aa98-176">Er is veel meer toosubscription filteren, maar.</span><span class="sxs-lookup"><span data-stu-id="9aa98-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="9aa98-177">Toepassingen kunnen meerdere filterregels voor de per abonnement bij toevoeging toohello mogelijkheid toomodify Hallo eigenschappen van een bericht hebben het doorgeven van het abonnement tooa virtuele wachtrij.</span><span class="sxs-lookup"><span data-stu-id="9aa98-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="9aa98-178">Samenvatting</span><span class="sxs-lookup"><span data-stu-id="9aa98-178">Summary</span></span>
<span data-ttu-id="9aa98-179">Alle Hallo redenen toouse queuing beschreven in [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md) tootopics, ook specifiek van toepassing:</span><span class="sxs-lookup"><span data-stu-id="9aa98-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="9aa98-180">Tijdelijke ontkoppeling – bericht producenten en consumenten hebben geen toobe online op Hallo hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="9aa98-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="9aa98-181">Herverdeling van – pieken in load zijn vloeiend moeten worden gemaakt door Hallo onderwerp inschakelen in beslag neemt toepassingen toobe ingericht voor gemiddelde belasting in plaats van piekbelasting.</span><span class="sxs-lookup"><span data-stu-id="9aa98-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="9aa98-182">Taakverdeling: vergelijkbare tooa wachtrij, u kunt meerdere concurrerende consumenten luistert op één abonnement, met elk bericht doorgegeven tooonly van Hallo consumenten, waardoor taakverdeling hebben.</span><span class="sxs-lookup"><span data-stu-id="9aa98-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="9aa98-183">Losse koppeling – u kunt ontwikkelen Hallo messaging-netwerk zonder bestaande eindpunten; bijvoorbeeld, u abonnementen toevoegt of filters tooa onderwerp tooallow wijzigen voor nieuwe gebruikers.</span><span class="sxs-lookup"><span data-stu-id="9aa98-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9aa98-184">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9aa98-184">Next steps</span></span>

<span data-ttu-id="9aa98-185">Zie [maken van toepassingen die gebruikmaken van Service Bus-wachtrijen](service-bus-create-queues.md) voor meer informatie over hoe toouse in Hallo POS retail-scenario wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="9aa98-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

