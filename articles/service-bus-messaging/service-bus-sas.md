---
title: Azure Service Bus-verificatie met handtekeningen voor gedeelde toegang | Microsoft Docs
description: Overzicht van Service Bus-verificatie met behulp van handtekeningen voor gedeelde toegang-overzicht, informatie over SAS-verificatie met Azure Service Bus.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: a2760072acb7c62204759f3ec0d3cb9899460f2d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="8c40b-103">Service Bus-verificatie met handtekeningen voor gedeelde toegang</span><span class="sxs-lookup"><span data-stu-id="8c40b-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="8c40b-104">*Shared Access Signatures* (SAS) zijn de primaire beveiligingsmechanisme voor Service Bus-berichtenservice.</span><span class="sxs-lookup"><span data-stu-id="8c40b-104">*Shared Access Signatures* (SAS) are the primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="8c40b-105">Dit artikel wordt beschreven SAS, hoe deze werken en hoe ze te gebruiken op een manier platform networkdirect.</span><span class="sxs-lookup"><span data-stu-id="8c40b-105">This article discusses SAS, how they work, and how to use them in a platform-agnostic way.</span></span>

<span data-ttu-id="8c40b-106">SAS-verificatie kan toepassingen te verifiëren bij Service Bus met behulp van een toegangssleutel die is geconfigureerd op de naamruimte of op de Berichtentiteit (wachtrij of onderwerp) waaraan de specifieke rechten zijn gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="8c40b-106">SAS authentication enables applications to authenticate to Service Bus using an access key configured on the namespace, or on the messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="8c40b-107">U kunt deze sleutel vervolgens gebruiken voor het genereren van een SAS-token die clients op hun beurt gebruiken kunnen om Service Bus te verifiëren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-107">You can then use this key to generate a SAS token that clients can in turn use to authenticate to Service Bus.</span></span>

<span data-ttu-id="8c40b-108">Ondersteuning voor SAS-verificatie is opgenomen in de Azure SDK versie 2.0 en hoger.</span><span class="sxs-lookup"><span data-stu-id="8c40b-108">SAS authentication support is included in the Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="8c40b-109">Overzicht van de SAS</span><span class="sxs-lookup"><span data-stu-id="8c40b-109">Overview of SAS</span></span>

<span data-ttu-id="8c40b-110">Handtekeningen voor gedeelde toegang zijn een verificatiemethode op basis van beveiligde SHA-256-hashes of URI's.</span><span class="sxs-lookup"><span data-stu-id="8c40b-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="8c40b-111">SAS is een zeer krachtig mechanisme dat wordt gebruikt door alle Service Bus-services.</span><span class="sxs-lookup"><span data-stu-id="8c40b-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="8c40b-112">In het werkelijke gebruik SAS bestaat uit twee onderdelen: een *gedeeld toegangsbeleid* en een *Shared Access Signature* (vaak genoemd een *token*).</span><span class="sxs-lookup"><span data-stu-id="8c40b-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="8c40b-113">SAS-verificatie in Service Bus omvat de configuratie van een cryptografische sleutel met de gekoppelde rechten van een Service Bus-resource.</span><span class="sxs-lookup"><span data-stu-id="8c40b-113">SAS authentication in Service Bus involves the configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="8c40b-114">Clients claim toegang tot de Service Bus-resources in de vorm van een SAS-token.</span><span class="sxs-lookup"><span data-stu-id="8c40b-114">Clients claim access to Service Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="8c40b-115">Dit token bestaat uit de bron-URI wordt geopend en een verloopdatum die zijn ondertekend met de geconfigureerde sleutel.</span><span class="sxs-lookup"><span data-stu-id="8c40b-115">This token consists of the resource URI being accessed, and an expiry signed with the configured key.</span></span>

<span data-ttu-id="8c40b-116">U kunt de Shared Access Signature-autorisatieregels configureren op Service Bus [doorstuurt](service-bus-fundamentals-hybrid-solutions.md#relays), [wachtrijen](service-bus-fundamentals-hybrid-solutions.md#queues), en [onderwerpen](service-bus-fundamentals-hybrid-solutions.md#topics).</span><span class="sxs-lookup"><span data-stu-id="8c40b-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="8c40b-117">SAS verificatie maakt gebruik van de volgende elementen:</span><span class="sxs-lookup"><span data-stu-id="8c40b-117">SAS authentication uses the following elements:</span></span>

* <span data-ttu-id="8c40b-118">[Gedeelde toegang autorisatieregel](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bits primaire cryptografische sleutel in Base64-weergave, een optionele secundaire sleutel en een sleutelnaam en gekoppelde rechten (een verzameling van *luisteren*, *verzenden*, of *beheren* rechten).</span><span class="sxs-lookup"><span data-stu-id="8c40b-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="8c40b-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: met het HMAC-SHA256 van een resourcetekenreeks die bestaat uit de URI van de resource die wordt geopend en een verloopbewerking met de cryptografische sleutel gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="8c40b-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using the HMAC-SHA256 of a resource string, consisting of the URI of the resource that is accessed and an expiry, with the cryptographic key.</span></span> <span data-ttu-id="8c40b-120">De handtekening en andere elementen in de volgende secties wordt beschreven, worden opgemaakt in een tekenreeks om het SAS-token.</span><span class="sxs-lookup"><span data-stu-id="8c40b-120">The signature and other elements described in the following sections are formatted into a string to form the SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="8c40b-121">Beleid voor gedeelde toegang</span><span class="sxs-lookup"><span data-stu-id="8c40b-121">Shared access policy</span></span>

<span data-ttu-id="8c40b-122">Een belangrijkste leert over SAS is dat deze met een beleid begint.</span><span class="sxs-lookup"><span data-stu-id="8c40b-122">An important thing to understand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="8c40b-123">Voor elk beleid dat u besluit op drie soorten informatie: **naam**, **bereik**, en **machtigingen**.</span><span class="sxs-lookup"><span data-stu-id="8c40b-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="8c40b-124">De **naam** is slechts; een unieke naam binnen dit bereik.</span><span class="sxs-lookup"><span data-stu-id="8c40b-124">The **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="8c40b-125">Het bereik is eenvoudig genoeg: de URI van de betreffende resource is.</span><span class="sxs-lookup"><span data-stu-id="8c40b-125">The scope is easy enough: it's the URI of the resource in question.</span></span> <span data-ttu-id="8c40b-126">Voor een Service Bus-naamruimte is het bereik de volledig gekwalificeerde domeinnaam (FQDN), zoals `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="8c40b-126">For a Service Bus namespace, the scope is the fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="8c40b-127">De beschikbare machtigingen voor een beleid zijn grotendeels spreken voor zich:</span><span class="sxs-lookup"><span data-stu-id="8c40b-127">The available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="8c40b-128">Verzenden</span><span class="sxs-lookup"><span data-stu-id="8c40b-128">Send</span></span>
* <span data-ttu-id="8c40b-129">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-129">Listen</span></span>
* <span data-ttu-id="8c40b-130">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-130">Manage</span></span>

<span data-ttu-id="8c40b-131">Nadat u het beleid hebt gemaakt, krijgt het een *primaire sleutel* en een *secundaire sleutel*.</span><span class="sxs-lookup"><span data-stu-id="8c40b-131">After you create the policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="8c40b-132">Dit zijn cryptografisch sterke sleutels.</span><span class="sxs-lookup"><span data-stu-id="8c40b-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="8c40b-133">Geen verliezen ze of ze lekken - ze moet altijd beschikbaar zijn in de [Azure-portal][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="8c40b-133">Don't lose them or leak them - they'll always be available in the [Azure portal][Azure portal].</span></span> <span data-ttu-id="8c40b-134">U kunt een van de gegenereerde sleutels gebruiken en u ze op elk gewenst moment kunt opnieuw genereren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-134">You can use either of the generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="8c40b-135">Als u opnieuw genereren of de primaire sleutel in het beleid wijzigt, worden er handtekeningen voor gedeelde toegang gemaakt op basis van het ongeldig.</span><span class="sxs-lookup"><span data-stu-id="8c40b-135">However, if you regenerate or change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="8c40b-136">Wanneer u een Service Bus-naamruimte maakt, een beleid wordt automatisch gemaakt voor de gehele naamruimte aangeroepen **RootManageSharedAccessKey**, en alle machtigingen voor dit beleid heeft.</span><span class="sxs-lookup"><span data-stu-id="8c40b-136">When you create a Service Bus namespace, a policy is automatically created for the entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="8c40b-137">U niet aanmelden als **hoofdmap**, zodat dit beleid niet gebruiken tenzij er een goede reden.</span><span class="sxs-lookup"><span data-stu-id="8c40b-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="8c40b-138">Kunt u extra beleidsregels in de **configureren** tabblad voor de naamruimte in de portal.</span><span class="sxs-lookup"><span data-stu-id="8c40b-138">You can create additional policies in the **Configure** tab for the namespace in the portal.</span></span> <span data-ttu-id="8c40b-139">Het is belangrijk te weten een niveau één tree in Service Bus (naamruimte, wachtrij, enz.) kan alleen gekoppeld aan het beleid voor maximaal 12 hebben.</span><span class="sxs-lookup"><span data-stu-id="8c40b-139">It's important to note that a single tree level in Service Bus (namespace, queue, etc.) can only have up to 12 policies attached to it.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="8c40b-140">Configuratie voor Shared Access Signature-verificatie</span><span class="sxs-lookup"><span data-stu-id="8c40b-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="8c40b-141">U kunt de [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) -regel op de Service Bus-naamruimten, wachtrijen en onderwerpen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-141">You can configure the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="8c40b-142">Configureren van een [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) in een Service Bus abonnement wordt momenteel niet ondersteund, maar u kunt regels geconfigureerd op een naamruimte of het onderwerp gebruiken om toegang aan abonnementen, te beveiligen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic to secure access to subscriptions.</span></span> <span data-ttu-id="8c40b-143">Zie voor een werkende-voorbeeldtoepassing die u ziet u deze procedure, de [met behulp van Shared Access Signature (SAS)-verificatie met Service Bus abonnementen](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="8c40b-143">For a working sample that illustrates this procedure, see the [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="8c40b-144">Maximaal 12 dergelijke regels kan worden geconfigureerd op een Service Bus-naamruimte, wachtrij of onderwerp.</span><span class="sxs-lookup"><span data-stu-id="8c40b-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="8c40b-145">Regels die zijn geconfigureerd op een Service Bus-naamruimte van toepassing op alle entiteiten in waarmee de naamruimte.</span><span class="sxs-lookup"><span data-stu-id="8c40b-145">Rules that are configured on a Service Bus namespace apply to all entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="8c40b-147">In deze afbeelding is de *manageRuleNS*, *sendRuleNS*, en *listenRuleNS* autorisatieregels van toepassing op wachtrij W1 en onderwerp T1, terwijl *listenRuleQ*  en *sendRuleQ* gelden alleen voor wachtrij W1 en *sendRuleT* geldt alleen voor onderwerp T1.</span><span class="sxs-lookup"><span data-stu-id="8c40b-147">In this figure, the *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply to both queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only to queue Q1 and *sendRuleT* applies only to topic T1.</span></span>

<span data-ttu-id="8c40b-148">De belangrijkste parameters van een [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) zijn als volgt:</span><span class="sxs-lookup"><span data-stu-id="8c40b-148">The key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="8c40b-149">Parameter</span><span class="sxs-lookup"><span data-stu-id="8c40b-149">Parameter</span></span> | <span data-ttu-id="8c40b-150">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="8c40b-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8c40b-151">*Sleutelnaam*</span><span class="sxs-lookup"><span data-stu-id="8c40b-151">*KeyName*</span></span> |<span data-ttu-id="8c40b-152">Een tekenreeks die de autorisatieregel beschrijft.</span><span class="sxs-lookup"><span data-stu-id="8c40b-152">A string that describes the authorization rule.</span></span> |
| <span data-ttu-id="8c40b-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="8c40b-153">*PrimaryKey*</span></span> |<span data-ttu-id="8c40b-154">Een base64-gecodeerd 256-bits primaire sleutel voor ondertekening en valideren van de SAS-token.</span><span class="sxs-lookup"><span data-stu-id="8c40b-154">A base64-encoded 256-bit primary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="8c40b-155">*Secundaire sleutel*</span><span class="sxs-lookup"><span data-stu-id="8c40b-155">*SecondaryKey*</span></span> |<span data-ttu-id="8c40b-156">Een base64-gecodeerd 256-bits secundaire sleutel voor ondertekening en valideren van de SAS-token.</span><span class="sxs-lookup"><span data-stu-id="8c40b-156">A base64-encoded 256-bit secondary key for signing and validating the SAS token.</span></span> |
| <span data-ttu-id="8c40b-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="8c40b-157">*AccessRights*</span></span> |<span data-ttu-id="8c40b-158">Een lijst met rechten verleend door de autorisatieregel.</span><span class="sxs-lookup"><span data-stu-id="8c40b-158">A list of access rights granted by the authorization rule.</span></span> <span data-ttu-id="8c40b-159">Deze rechten kunnen worden van een verzameling van rechten luisteren, verzenden en beheren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="8c40b-160">Wanneer een Service Bus-naamruimte is ingericht, een [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), met [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) ingesteld op **RootManageSharedAccessKey**, wordt standaard gemaakt.</span><span class="sxs-lookup"><span data-stu-id="8c40b-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set to **RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="8c40b-161">Genereren van een Shared Access Signature (token)</span><span class="sxs-lookup"><span data-stu-id="8c40b-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="8c40b-162">Het beleid zelf is niet het toegangstoken voor Service Bus.</span><span class="sxs-lookup"><span data-stu-id="8c40b-162">The policy itself is not the access token for Service Bus.</span></span> <span data-ttu-id="8c40b-163">Het object op basis waarvan het toegangstoken is gegenereerd - met de primaire of secundaire sleutel is.</span><span class="sxs-lookup"><span data-stu-id="8c40b-163">It is the object from which the access token is generated - using either the primary or secondary key.</span></span> <span data-ttu-id="8c40b-164">De SAS-token kan worden gegenereerd door een client die toegang tot de ondertekeningssleutels die is opgegeven in de autorisatieregel voor gedeelde toegang heeft.</span><span class="sxs-lookup"><span data-stu-id="8c40b-164">Any client that has access to the signing keys specified in the shared access authorization rule can generate the SAS token.</span></span> <span data-ttu-id="8c40b-165">Het token wordt gegenereerd door zorgvuldig een tekenreeks in de volgende indeling:</span><span class="sxs-lookup"><span data-stu-id="8c40b-165">The token is generated by carefully crafting a string in the following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="8c40b-166">Waar `signature-string` is de SHA-256-hash van het bereik van het token (**bereik** zoals beschreven in de vorige sectie) met een CRLF toegevoegd en een verlooptijd (in seconden sinds de epoche: `00:00:00 UTC` op 1 januari 1970).</span><span class="sxs-lookup"><span data-stu-id="8c40b-166">Where `signature-string` is the SHA-256 hash of the scope of the token (**scope** as described in the previous section) with a CRLF appended and an expiry time (in seconds since the epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="8c40b-167">Om te voorkomen dat een toegangstoken korte tijd, wordt het aanbevolen het coderen van de tijdwaarde verstrijken als ten minste een 32-bits geheel getal zonder teken of bij voorkeur een geheel getal zijn lange (64-bits).</span><span class="sxs-lookup"><span data-stu-id="8c40b-167">To avoid a short token expiry time, it is recommended that you encode the expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="8c40b-168">De hash lijkt op de volgende pseudocode en retourneert 32 bytes.</span><span class="sxs-lookup"><span data-stu-id="8c40b-168">The hash looks similar to the following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="8c40b-169">De niet-hashing-waarden zijn de **SharedAccessSignature** string, zodat de ontvanger kan de hash met dezelfde parameters, om ervoor te zorgen dat deze als resultaat geeft hetzelfde resultaat berekenen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-169">The non-hashed values are in the **SharedAccessSignature** string so that the recipient can compute the hash with the same parameters, to be sure that it returns the same result.</span></span> <span data-ttu-id="8c40b-170">De URI geeft u het bereik en de sleutelnaam identificeert het beleid moet worden gebruikt voor het berekenen van de hash.</span><span class="sxs-lookup"><span data-stu-id="8c40b-170">The URI specifies the scope, and the key name identifies the policy to be used to compute the hash.</span></span> <span data-ttu-id="8c40b-171">Dit is belangrijk uit veiligheidsoverwegingen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-171">This is important from a security standpoint.</span></span> <span data-ttu-id="8c40b-172">Als de handtekening komt niet overeen met wat de ontvanger (Service Bus) wordt berekend, is toegang geweigerd.</span><span class="sxs-lookup"><span data-stu-id="8c40b-172">If the signature doesn't match that which the recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="8c40b-173">Op dit moment kunt u ervoor dat de afzender toegang had tot de sleutel en de rechten die zijn opgegeven in het beleid moet worden verleend zijn.</span><span class="sxs-lookup"><span data-stu-id="8c40b-173">At this point you can be sure that the sender had access to the key and should be granted the rights specified in the policy.</span></span>

<span data-ttu-id="8c40b-174">Houd er rekening mee dat u de gecodeerde bron-URI voor deze bewerking gebruiken moet.</span><span class="sxs-lookup"><span data-stu-id="8c40b-174">Note that you should use the encoded resource URI for this operation.</span></span> <span data-ttu-id="8c40b-175">De bron-URI is de volledige URI van de Service Bus-bron waartoe toegang wordt geclaimd.</span><span class="sxs-lookup"><span data-stu-id="8c40b-175">The resource URI is the full URI of the Service Bus resource to which access is claimed.</span></span> <span data-ttu-id="8c40b-176">Bijvoorbeeld: `http://<namespace>.servicebus.windows.net/<entityPath>` of `sb://<namespace>.servicebus.windows.net/<entityPath>`; dat wil zeggen, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="8c40b-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="8c40b-177">De autorisatieregel voor gedeelde toegang gebruikt voor de ondertekening moet worden geconfigureerd op de entiteit opgegeven door deze URI of door een van de hiërarchische bovenliggende items.</span><span class="sxs-lookup"><span data-stu-id="8c40b-177">The shared access authorization rule used for signing must be configured on the entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="8c40b-178">Bijvoorbeeld: `http://contoso.servicebus.windows.net/contosoTopics/T1` of `http://contoso.servicebus.windows.net` in het vorige voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="8c40b-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in the previous example.</span></span>

<span data-ttu-id="8c40b-179">Een SAS-token is geldig voor alle resources onder de `<resourceURI>` gebruikt in de `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="8c40b-179">A SAS token is valid for all resources under the `<resourceURI>` used in the `signature-string`.</span></span>

<span data-ttu-id="8c40b-180">De [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in de SAS token verwijst naar de **keyName** van de autorisatieregel voor gedeelde toegang gebruikt voor het genereren van het token.</span><span class="sxs-lookup"><span data-stu-id="8c40b-180">The [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in the SAS token refers to the **keyName** of the shared access authorization rule used to generate the token.</span></span>

<span data-ttu-id="8c40b-181">De *URL-codering resourceURI* moet hetzelfde zijn als de URI die wordt gebruikt in de tekenreeks voor aanmelding bij de berekening van de handtekening.</span><span class="sxs-lookup"><span data-stu-id="8c40b-181">The *URL-encoded-resourceURI* must be the same as the URI used in the string-to-sign during the computation of the signature.</span></span> <span data-ttu-id="8c40b-182">Deze moet [procent gecodeerd](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="8c40b-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="8c40b-183">Het is raadzaam dat u de sleutels die worden gebruikt regelmatig opnieuw genereert de [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span><span class="sxs-lookup"><span data-stu-id="8c40b-183">It is recommended that you periodically regenerate the keys used in the [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="8c40b-184">Toepassingen in het algemeen moeten gebruikmaken van de [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) om een SAS-token te genereren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-184">Applications should generally use the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) to generate a SAS token.</span></span> <span data-ttu-id="8c40b-185">Wanneer de sleutels opnieuw genereren, vervangt u de [secundaire sleutel](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) met de oude primaire sleutel en een nieuwe sleutel als de nieuwe primaire sleutel genereren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-185">When regenerating the keys, you should replace the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with the old primary key, and generate a new key as the new primary key.</span></span> <span data-ttu-id="8c40b-186">Hiermee kunt u doorgaan met het gebruik van tokens voor autorisatie die zijn uitgegeven met de oude primaire sleutel en die nog niet zijn verlopen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-186">This enables you to continue using tokens for authorization that were issued with the old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="8c40b-187">Als een sleutel is geknoeid en u voor het intrekken van de sleutels hebt, kunt u beide genereren de [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) en de [secundaire sleutel](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) van een [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule)en vervang ze met nieuwe sleutels.</span><span class="sxs-lookup"><span data-stu-id="8c40b-187">If a key is compromised and you have to revoke the keys, you can regenerate both the [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and the [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="8c40b-188">Deze procedure ongeldig alle tokens die zijn ondertekend met de oude sleutels.</span><span class="sxs-lookup"><span data-stu-id="8c40b-188">This procedure invalidates all tokens signed with the old keys.</span></span>

## <a name="how-to-use-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="8c40b-189">Het gebruik van Shared Access Signature-verificatie met Service Bus</span><span class="sxs-lookup"><span data-stu-id="8c40b-189">How to use Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="8c40b-190">De volgende scenario's zijn de configuratie van autorisatieregels, het genereren van SAS-tokens en Clientautorisatie.</span><span class="sxs-lookup"><span data-stu-id="8c40b-190">The following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="8c40b-191">Voor een volledige werkende voorbeeld van een Service Bus-toepassing die laat zien van de configuratie en maakt gebruik van SAS-autorisatie Zie [Shared Access Signature-verificatie met Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="8c40b-191">For a full working sample of a Service Bus application that illustrates the configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="8c40b-192">Een gerelateerde voorbeeldtoepassing die u ziet u het gebruik van SAS-autorisatieregels geconfigureerd voor naamruimten of onderwerpen voor het beveiligen van Service Bus-abonnementen is hier beschikbaar: [met behulp van Shared Access Signature (SAS)-verificatie met Service Bus abonnementen](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="8c40b-192">A related sample that illustrates the use of SAS authorization rules configured on namespaces or topics to secure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="8c40b-193">Toegang tot gedeelde toegang autorisatieregels voor een naamruimte</span><span class="sxs-lookup"><span data-stu-id="8c40b-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="8c40b-194">Bewerkingen op basis van de Service Bus-naamruimte vereist verificatie via certificaat.</span><span class="sxs-lookup"><span data-stu-id="8c40b-194">Operations on the Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="8c40b-195">U moet een beheercertificaat uploaden voor uw Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="8c40b-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="8c40b-196">Volg de stappen voor het uploaden van een beheercertificaat [hier](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), waarbij de [Azure-portal][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="8c40b-196">To upload a management certificate, follow the steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using the [Azure portal][Azure portal].</span></span> <span data-ttu-id="8c40b-197">Zie voor meer informatie over Azure-beheercertificaten de [overzicht van Azure-certificaten](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="8c40b-197">For more information about Azure management certificates, see the [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="8c40b-198">Het eindpunt voor toegang tot autorisatieregels voor gedeelde toegang voor een Service Bus-naamruimte is als volgt:</span><span class="sxs-lookup"><span data-stu-id="8c40b-198">The endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="8c40b-199">Maken van een [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object op een Service Bus-naamruimte, voert u een POST-bewerking op dit eindpunt met de regelgegevens geserialiseerd als JSON of XML.</span><span class="sxs-lookup"><span data-stu-id="8c40b-199">To create a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with the rule information serialized as JSON or XML.</span></span> <span data-ttu-id="8c40b-200">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="8c40b-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on the Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access the management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on the baseAddress above to create an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="8c40b-201">Op dezelfde manier gebruiken een GET-bewerking op het eindpunt te lezen van de autorisatieregels die is geconfigureerd op de naamruimte.</span><span class="sxs-lookup"><span data-stu-id="8c40b-201">Similarly, use a GET operation on the endpoint to read the authorization rules configured on the namespace.</span></span>

<span data-ttu-id="8c40b-202">Als u wilt bijwerken of verwijderen van een specifieke autorisatieregel, gebruikt u het volgende eindpunt:</span><span class="sxs-lookup"><span data-stu-id="8c40b-202">To update or delete a specific authorization rule, use the following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="8c40b-203">Toegang tot gedeelde toegang autorisatieregels voor een entiteit</span><span class="sxs-lookup"><span data-stu-id="8c40b-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="8c40b-204">U hebt toegang tot een [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object is geconfigureerd voor een Service Bus-wachtrij of onderwerp via de [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) verzameling in de bijbehorende [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) of [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="8c40b-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through the [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in the corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="8c40b-205">De volgende code laat zien hoe de autorisatieregels voor een wachtrij toevoegen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-205">The following code shows how to add authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for the operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it to the queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it to the queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create the queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="8c40b-206">Shared Access Signature-verificatie gebruiken</span><span class="sxs-lookup"><span data-stu-id="8c40b-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="8c40b-207">Toepassingen met behulp van de Azure .NET SDK met de Service Bus .NET-bibliotheken kunnen gebruiken autorisatie via SAS de [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) klasse.</span><span class="sxs-lookup"><span data-stu-id="8c40b-207">Applications using the Azure .NET SDK with the Service Bus .NET libraries can use SAS authorization through the [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="8c40b-208">De volgende code ziet u het gebruik van de tokenprovider om berichten te verzenden naar een Service Bus-wachtrij.</span><span class="sxs-lookup"><span data-stu-id="8c40b-208">The following code illustrates the use of the token provider to send messages to a Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message to queue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="8c40b-209">Toepassingen kunnen ook SAS gebruiken voor verificatie met behulp van een SAS-verbindingsreeks in de methoden die verbindingsreeksen accepteren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="8c40b-210">Houd er rekening mee dat voor het gebruik van SAS-autorisatie met Service Bus relays, kunt u SAS-sleutels die zijn geconfigureerd op de Service Bus-naamruimte.</span><span class="sxs-lookup"><span data-stu-id="8c40b-210">Note that to use SAS authorization with Service Bus relays, you can use SAS keys configured on the Service Bus namespace.</span></span> <span data-ttu-id="8c40b-211">Als u expliciet een relay op de naamruimte maakt ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) met een [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription))-object, kunt u de SAS-regels alleen voor die relay instellen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-211">If you explicitly create a relay on the namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set the SAS rules just for that relay.</span></span> <span data-ttu-id="8c40b-212">Als u wilt gebruiken autorisatie SAS met Service Bus-abonnementen, kunt u SAS-sleutels die zijn geconfigureerd op een Service Bus-naamruimte of op een onderwerp.</span><span class="sxs-lookup"><span data-stu-id="8c40b-212">To use SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-the-shared-access-signature-at-http-level"></a><span data-ttu-id="8c40b-213">Gebruik de Shared Access Signature (op http-niveau)</span><span class="sxs-lookup"><span data-stu-id="8c40b-213">Use the Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="8c40b-214">Nu u weet hoe handtekeningen voor gedeelde toegang maken voor alle entiteiten in Service Bus, bent u klaar voor het uitvoeren van een HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="8c40b-214">Now that you know how to create Shared Access Signatures for any entities in Service Bus, you are ready to perform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="8c40b-215">Denk eraan dat dit werkt voor alles.</span><span class="sxs-lookup"><span data-stu-id="8c40b-215">Remember, this works for everything.</span></span> <span data-ttu-id="8c40b-216">U kunt een SAS maken voor een wachtrij, onderwerp of abonnement.</span><span class="sxs-lookup"><span data-stu-id="8c40b-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="8c40b-217">U geeft een afzender of de client een SAS-token, hebben niet de sleutel rechtstreeks als ze niet de hash voor het ongedaan maken.</span><span class="sxs-lookup"><span data-stu-id="8c40b-217">If you give a sender or client a SAS token, they don't have the key directly, and they cannot reverse the hash to obtain it.</span></span> <span data-ttu-id="8c40b-218">Hierdoor hebt u controle over wat ze kunnen openen en hoe lang.</span><span class="sxs-lookup"><span data-stu-id="8c40b-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="8c40b-219">Een belangrijkste te onthouden is als u de primaire sleutel in het beleid wijzigt, wordt alle handtekeningen voor gedeelde toegang gemaakt op basis van het ongeldig.</span><span class="sxs-lookup"><span data-stu-id="8c40b-219">An important thing to remember is that if you change the primary key in the policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-the-shared-access-signature-at-amqp-level"></a><span data-ttu-id="8c40b-220">Gebruik de Shared Access Signature (op AMQP niveau)</span><span class="sxs-lookup"><span data-stu-id="8c40b-220">Use the Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="8c40b-221">In de vorige sectie hebt u gezien hoe u de SAS-token met een HTTP POST-aanvraag voor het verzenden van gegevens naar de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="8c40b-221">In the previous section, you saw how to use the SAS token with an HTTP POST request for sending data to the Service Bus.</span></span> <span data-ttu-id="8c40b-222">Als u weet, kunt u Service Bus met behulp van de geavanceerde Message Queuing-Protocol (AMQP) die het voorkeursprotocol voor gebruik voor betere prestaties in veel scenario's te openen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-222">As you know, you can access Service Bus using the Advanced Message Queuing Protocol (AMQP) that is the preferred protocol to use for performance reasons, in many scenarios.</span></span> <span data-ttu-id="8c40b-223">Het SAS-token gebruik met AMQP wordt beschreven in het document [AMQP Claim-Based Security versie 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) die in werkende concept sinds 2013 maar goed ondersteund door Azure vandaag.</span><span class="sxs-lookup"><span data-stu-id="8c40b-223">The SAS token usage with AMQP is described in the document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="8c40b-224">Voordat u begint met het verzenden van gegevens naar Service Bus, is de uitgever moet het SAS-token binnen een AMQP-bericht te verzenden naar een goed gedefinieerde AMQP-knooppunt met de naam **$cbs** (u kunt zien als een 'speciale' wachtrij gebruikt door de service te verkrijgen en valideren van de SAS tokens).</span><span class="sxs-lookup"><span data-stu-id="8c40b-224">Before starting to send data to Service Bus, the publisher must send the SAS token inside an AMQP message to a well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by the service to acquire and validate all the SAS tokens).</span></span> <span data-ttu-id="8c40b-225">De uitgever moet opgeven de **ReplyTo** veld in het bericht AMQP; dit is het knooppunt waarin antwoorden op de service met de publisher met het resultaat van de validatie van tokens (een eenvoudige aanvraag/antwoordbewerking patroon tussen publisher en de service ).</span><span class="sxs-lookup"><span data-stu-id="8c40b-225">The publisher must specify the **ReplyTo** field inside the AMQP message; this is the node in which the service replies to the publisher with the result of the token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="8c40b-226">Dit antwoord-knooppunt wordt gemaakt 'onderweg,' over 'dynamische maken van het externe knooppunt' spreken, zoals beschreven in de AMQP 1.0-specificatie.</span><span class="sxs-lookup"><span data-stu-id="8c40b-226">This reply node is created "on the fly," speaking about "dynamic creation of remote node" as described by the AMQP 1.0 specification.</span></span> <span data-ttu-id="8c40b-227">Nadat u hebt gecontroleerd of het SAS-token geldig is, de uitgever vooruit en gegevens verzenden naar de service start.</span><span class="sxs-lookup"><span data-stu-id="8c40b-227">After checking that the SAS token is valid, the publisher can go forward and start to send data to the service.</span></span>

<span data-ttu-id="8c40b-228">De volgende stappen ziet u hoe u de SAS-token met het gebruik van een AMQP-protocol verzendt de [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="8c40b-228">The following steps show how to send the SAS token with AMQP protocol using the [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="8c40b-229">Dit is handig als u niet de officiële Service Bus-SDK gebruiken (bijvoorbeeld op WinRT, .net Compact Framework, .net Framework Micro en Mono) ontwikkeling in C\#.</span><span class="sxs-lookup"><span data-stu-id="8c40b-229">This is useful if you can't use the official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="8c40b-230">Deze bibliotheek is natuurlijk nuttig voor meer informatie over hoe op claims gebaseerde beveiliging op het niveau van AMQP werkt zoals u hebt gezien hoe het werkt op het niveau van HTTP (met een HTTP POST-aanvraag en de SAS-token verzonden binnen de koptekst 'Verificatie').</span><span class="sxs-lookup"><span data-stu-id="8c40b-230">Of course, this library is useful to help understand how claims-based security works at the AMQP level, as you saw how it works at the HTTP level (with an HTTP POST request and the SAS token sent inside the "Authorization" header).</span></span> <span data-ttu-id="8c40b-231">Als u niet grondige kennis over AMQP hoeft, kunt u de officiële Service Bus-SDK gebruiken met .net Framework-toepassingen, wat het voor u doen.</span><span class="sxs-lookup"><span data-stu-id="8c40b-231">If you don't need such deep knowledge about AMQP, you can use the official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="8c40b-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="8c40b-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) to send</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct the put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive the response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // the sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="8c40b-233">De `PutCbsToken()` methode ontvangt de *verbinding* (AMQP verbinding klasse-instantie worden geleverd door de [AMQP .NET Lite-bibliotheek](https://github.com/Azure/amqpnetlite)) die staat voor de TCP-verbinding naar de service en de *sasToken* parameter die de SAS-token om te verzenden.</span><span class="sxs-lookup"><span data-stu-id="8c40b-233">The `PutCbsToken()` method receives the *connection* (AMQP connection class instance as provided by the [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents the TCP connection to the service and the *sasToken* parameter that is the SAS token to send.</span></span> 

> [!NOTE]
> <span data-ttu-id="8c40b-234">Het is belangrijk dat de verbinding is gemaakt met **SASL verificatiemechanisme instellen op externe** (en niet de standaard zonder opmaak met gebruikersnaam en wachtwoord dat wordt gebruikt wanneer u hoeft niet te verzenden van het SAS-token).</span><span class="sxs-lookup"><span data-stu-id="8c40b-234">It's important that the connection is created with **SASL authentication mechanism set to EXTERNAL** (and not the default PLAIN with username and password used when you don't need to send the SAS token).</span></span>
> 
> 

<span data-ttu-id="8c40b-235">Vervolgens maakt de uitgever van de twee AMQP koppelingen voor de SAS-token verzenden en ontvangen van het antwoord (het resultaat van de validatie van tokens) van de service.</span><span class="sxs-lookup"><span data-stu-id="8c40b-235">Next, the publisher creates two AMQP links for sending the SAS token and receiving the reply (the token validation result) from the service.</span></span>

<span data-ttu-id="8c40b-236">Het AMQP-bericht bevat een set eigenschappen en meer informatie dan een eenvoudige bericht.</span><span class="sxs-lookup"><span data-stu-id="8c40b-236">The AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="8c40b-237">De SAS-token is de hoofdtekst van het bericht (met behulp van de constructor).</span><span class="sxs-lookup"><span data-stu-id="8c40b-237">The SAS token is the body of the message (using its constructor).</span></span> <span data-ttu-id="8c40b-238">De **'ReplyTo'** eigenschap is ingesteld op de naam van het knooppunt voor het ontvangen van het validatieresultaat op de koppeling van de ontvanger (u kunt de naam wijzigen als u wilt en het dynamisch door de service gemaakt wordt).</span><span class="sxs-lookup"><span data-stu-id="8c40b-238">The **"ReplyTo"** property is set to the node name for receiving the validation result on the receiver link (you can change its name if you want, and it will be created dynamically by the service).</span></span> <span data-ttu-id="8c40b-239">De laatste drie toepassing/aangepaste eigenschappen worden gebruikt door de service om aan te geven wat voor soort bewerking niet uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="8c40b-239">The last three application/custom properties are used by the service to indicate what kind of operation it has to execute.</span></span> <span data-ttu-id="8c40b-240">Zoals beschreven in de ontwerp-specificatie van CBS, moeten ze de **bewerkingsnaam** ('put-token'), de **type token** (in dit geval een ' servicebus.windows.net:sastoken'), en de **'naam' van het de doelgroep** waarop het token van toepassing is (de hele entiteit).</span><span class="sxs-lookup"><span data-stu-id="8c40b-240">As described by the CBS draft specification, they must be the **operation name** ("put-token"), the **type of token** (in this case, a "servicebus.windows.net:sastoken"), and the **"name" of the audience** to which the token applies (the entire entity).</span></span>

<span data-ttu-id="8c40b-241">Na het verzenden van het SAS-token op de koppeling van de afzender, moet de uitgever lezen van het antwoord op de koppeling van de ontvanger.</span><span class="sxs-lookup"><span data-stu-id="8c40b-241">After sending the SAS token on the sender link, the publisher must read the reply on the receiver link.</span></span> <span data-ttu-id="8c40b-242">Het antwoord is een eenvoudige AMQP-bericht met de eigenschap van een toepassing met de naam **'statuscode'** die dezelfde waarden als een HTTP-statuscode kan bevatten.</span><span class="sxs-lookup"><span data-stu-id="8c40b-242">The reply is a simple AMQP message with an application property named **"status-code"** that can contain the same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="8c40b-243">Rechten die vereist zijn voor Service Bus-bewerkingen</span><span class="sxs-lookup"><span data-stu-id="8c40b-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="8c40b-244">De volgende tabel toont de toegangsrechten nodig zijn voor verschillende bewerkingen voor Service Bus-resources.</span><span class="sxs-lookup"><span data-stu-id="8c40b-244">The following table shows the access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="8c40b-245">Bewerking</span><span class="sxs-lookup"><span data-stu-id="8c40b-245">Operation</span></span> | <span data-ttu-id="8c40b-246">Claim vereist</span><span class="sxs-lookup"><span data-stu-id="8c40b-246">Claim Required</span></span> | <span data-ttu-id="8c40b-247">Claim-bereik</span><span class="sxs-lookup"><span data-stu-id="8c40b-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8c40b-248">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="8c40b-248">**Namespace**</span></span> | | |
| <span data-ttu-id="8c40b-249">Verificatieregel configureren op een naamruimte</span><span class="sxs-lookup"><span data-stu-id="8c40b-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="8c40b-250">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-250">Manage</span></span> |<span data-ttu-id="8c40b-251">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-251">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-252">**Service-register**</span><span class="sxs-lookup"><span data-stu-id="8c40b-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="8c40b-253">Beleid voor persoonlijke opsommen</span><span class="sxs-lookup"><span data-stu-id="8c40b-253">Enumerate Private Policies</span></span> |<span data-ttu-id="8c40b-254">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-254">Manage</span></span> |<span data-ttu-id="8c40b-255">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-255">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-256">Beginnen met luisteren op een naamruimte</span><span class="sxs-lookup"><span data-stu-id="8c40b-256">Begin listening on a namespace</span></span> |<span data-ttu-id="8c40b-257">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-257">Listen</span></span> |<span data-ttu-id="8c40b-258">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-258">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-259">Berichten verzenden naar een listener op een naamruimte</span><span class="sxs-lookup"><span data-stu-id="8c40b-259">Send messages to a listener at a namespace</span></span> |<span data-ttu-id="8c40b-260">Verzenden</span><span class="sxs-lookup"><span data-stu-id="8c40b-260">Send</span></span> |<span data-ttu-id="8c40b-261">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-261">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-262">**Wachtrij**</span><span class="sxs-lookup"><span data-stu-id="8c40b-262">**Queue**</span></span> | | |
| <span data-ttu-id="8c40b-263">Een wachtrij maken</span><span class="sxs-lookup"><span data-stu-id="8c40b-263">Create a queue</span></span> |<span data-ttu-id="8c40b-264">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-264">Manage</span></span> |<span data-ttu-id="8c40b-265">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-265">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-266">Een wachtrij verwijderen</span><span class="sxs-lookup"><span data-stu-id="8c40b-266">Delete a queue</span></span> |<span data-ttu-id="8c40b-267">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-267">Manage</span></span> |<span data-ttu-id="8c40b-268">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-268">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-269">Wachtrijen opsommen</span><span class="sxs-lookup"><span data-stu-id="8c40b-269">Enumerate queues</span></span> |<span data-ttu-id="8c40b-270">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-270">Manage</span></span> |<span data-ttu-id="8c40b-271">Map resources/wachtrijen</span><span class="sxs-lookup"><span data-stu-id="8c40b-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="8c40b-272">De beschrijving van de wachtrij ophalen</span><span class="sxs-lookup"><span data-stu-id="8c40b-272">Get the queue description</span></span> |<span data-ttu-id="8c40b-273">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-273">Manage</span></span> |<span data-ttu-id="8c40b-274">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-274">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-275">Autorisatieregel voor een wachtrij configureren</span><span class="sxs-lookup"><span data-stu-id="8c40b-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="8c40b-276">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-276">Manage</span></span> |<span data-ttu-id="8c40b-277">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-277">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-278">In naar de wachtrij verzenden</span><span class="sxs-lookup"><span data-stu-id="8c40b-278">Send into to the queue</span></span> |<span data-ttu-id="8c40b-279">Verzenden</span><span class="sxs-lookup"><span data-stu-id="8c40b-279">Send</span></span> |<span data-ttu-id="8c40b-280">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-280">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-281">Berichten ontvangen uit een wachtrij</span><span class="sxs-lookup"><span data-stu-id="8c40b-281">Receive messages from a queue</span></span> |<span data-ttu-id="8c40b-282">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-282">Listen</span></span> |<span data-ttu-id="8c40b-283">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-283">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-284">Afbreken of volledige berichten na de ontvangst van het bericht in de modus peek vergrendelen</span><span class="sxs-lookup"><span data-stu-id="8c40b-284">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="8c40b-285">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-285">Listen</span></span> |<span data-ttu-id="8c40b-286">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-286">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-287">Een bericht voor later gebruik stellen</span><span class="sxs-lookup"><span data-stu-id="8c40b-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="8c40b-288">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-288">Listen</span></span> |<span data-ttu-id="8c40b-289">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-289">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-290">Wachtrij voor onbestelbare een bericht</span><span class="sxs-lookup"><span data-stu-id="8c40b-290">Deadletter a message</span></span> |<span data-ttu-id="8c40b-291">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-291">Listen</span></span> |<span data-ttu-id="8c40b-292">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-292">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-293">De status is gekoppeld aan een sessie van de wachtrij bericht ophalen</span><span class="sxs-lookup"><span data-stu-id="8c40b-293">Get the state associated with a message queue session</span></span> |<span data-ttu-id="8c40b-294">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-294">Listen</span></span> |<span data-ttu-id="8c40b-295">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-295">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-296">De status is gekoppeld aan een sessie van de wachtrij bericht instellen</span><span class="sxs-lookup"><span data-stu-id="8c40b-296">Set the state associated with a message queue session</span></span> |<span data-ttu-id="8c40b-297">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-297">Listen</span></span> |<span data-ttu-id="8c40b-298">Geldige wachtrij-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-298">Any valid queue address</span></span> |
| <span data-ttu-id="8c40b-299">**Onderwerp**</span><span class="sxs-lookup"><span data-stu-id="8c40b-299">**Topic**</span></span> | | |
| <span data-ttu-id="8c40b-300">Een onderwerp maken</span><span class="sxs-lookup"><span data-stu-id="8c40b-300">Create a topic</span></span> |<span data-ttu-id="8c40b-301">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-301">Manage</span></span> |<span data-ttu-id="8c40b-302">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-302">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-303">Een onderwerp verwijderen</span><span class="sxs-lookup"><span data-stu-id="8c40b-303">Delete a topic</span></span> |<span data-ttu-id="8c40b-304">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-304">Manage</span></span> |<span data-ttu-id="8c40b-305">Elk adres ongeldig onderwerp</span><span class="sxs-lookup"><span data-stu-id="8c40b-305">Any valid topic address</span></span> |
| <span data-ttu-id="8c40b-306">Onderwerpen over opsommen</span><span class="sxs-lookup"><span data-stu-id="8c40b-306">Enumerate topics</span></span> |<span data-ttu-id="8c40b-307">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-307">Manage</span></span> |<span data-ttu-id="8c40b-308">Resources: map/onderwerpen</span><span class="sxs-lookup"><span data-stu-id="8c40b-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="8c40b-309">De beschrijving van het onderwerp ophalen</span><span class="sxs-lookup"><span data-stu-id="8c40b-309">Get the topic description</span></span> |<span data-ttu-id="8c40b-310">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-310">Manage</span></span> |<span data-ttu-id="8c40b-311">Elk adres ongeldig onderwerp</span><span class="sxs-lookup"><span data-stu-id="8c40b-311">Any valid topic address</span></span> |
| <span data-ttu-id="8c40b-312">Autorisatieregel voor een onderwerp configureren</span><span class="sxs-lookup"><span data-stu-id="8c40b-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="8c40b-313">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-313">Manage</span></span> |<span data-ttu-id="8c40b-314">Elk adres ongeldig onderwerp</span><span class="sxs-lookup"><span data-stu-id="8c40b-314">Any valid topic address</span></span> |
| <span data-ttu-id="8c40b-315">Verzenden naar het onderwerp</span><span class="sxs-lookup"><span data-stu-id="8c40b-315">Send to the topic</span></span> |<span data-ttu-id="8c40b-316">Verzenden</span><span class="sxs-lookup"><span data-stu-id="8c40b-316">Send</span></span> |<span data-ttu-id="8c40b-317">Elk adres ongeldig onderwerp</span><span class="sxs-lookup"><span data-stu-id="8c40b-317">Any valid topic address</span></span> |
| <span data-ttu-id="8c40b-318">**Abonnement**</span><span class="sxs-lookup"><span data-stu-id="8c40b-318">**Subscription**</span></span> | | |
| <span data-ttu-id="8c40b-319">Een abonnement maken</span><span class="sxs-lookup"><span data-stu-id="8c40b-319">Create a subscription</span></span> |<span data-ttu-id="8c40b-320">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-320">Manage</span></span> |<span data-ttu-id="8c40b-321">Een naamruimte-adres</span><span class="sxs-lookup"><span data-stu-id="8c40b-321">Any namespace address</span></span> |
| <span data-ttu-id="8c40b-322">Abonnement verwijderen</span><span class="sxs-lookup"><span data-stu-id="8c40b-322">Delete subscription</span></span> |<span data-ttu-id="8c40b-323">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-323">Manage</span></span> |<span data-ttu-id="8c40b-324">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-325">Abonnementen opsommen</span><span class="sxs-lookup"><span data-stu-id="8c40b-325">Enumerate subscriptions</span></span> |<span data-ttu-id="8c40b-326">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-326">Manage</span></span> |<span data-ttu-id="8c40b-327">.. / myTopic/abonnementen</span><span class="sxs-lookup"><span data-stu-id="8c40b-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="8c40b-328">Beschrijving van het abonnement ophalen</span><span class="sxs-lookup"><span data-stu-id="8c40b-328">Get subscription description</span></span> |<span data-ttu-id="8c40b-329">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-329">Manage</span></span> |<span data-ttu-id="8c40b-330">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-331">Afbreken of volledige berichten na de ontvangst van het bericht in de modus peek vergrendelen</span><span class="sxs-lookup"><span data-stu-id="8c40b-331">Abandon or complete messages after receiving the message in peek-lock mode</span></span> |<span data-ttu-id="8c40b-332">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-332">Listen</span></span> |<span data-ttu-id="8c40b-333">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-334">Een bericht voor later gebruik stellen</span><span class="sxs-lookup"><span data-stu-id="8c40b-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="8c40b-335">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-335">Listen</span></span> |<span data-ttu-id="8c40b-336">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-337">Wachtrij voor onbestelbare een bericht</span><span class="sxs-lookup"><span data-stu-id="8c40b-337">Deadletter a message</span></span> |<span data-ttu-id="8c40b-338">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-338">Listen</span></span> |<span data-ttu-id="8c40b-339">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-340">De status is gekoppeld aan een sessie onderwerp ophalen</span><span class="sxs-lookup"><span data-stu-id="8c40b-340">Get the state associated with a topic session</span></span> |<span data-ttu-id="8c40b-341">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-341">Listen</span></span> |<span data-ttu-id="8c40b-342">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-343">De status is gekoppeld aan een sessie voor onderwerp instellen</span><span class="sxs-lookup"><span data-stu-id="8c40b-343">Set the state associated with a topic session</span></span> |<span data-ttu-id="8c40b-344">Luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-344">Listen</span></span> |<span data-ttu-id="8c40b-345">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-346">**Regels**</span><span class="sxs-lookup"><span data-stu-id="8c40b-346">**Rules**</span></span> | | |
| <span data-ttu-id="8c40b-347">Een regel maken</span><span class="sxs-lookup"><span data-stu-id="8c40b-347">Create a rule</span></span> |<span data-ttu-id="8c40b-348">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-348">Manage</span></span> |<span data-ttu-id="8c40b-349">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-350">Een regel verwijderen</span><span class="sxs-lookup"><span data-stu-id="8c40b-350">Delete a rule</span></span> |<span data-ttu-id="8c40b-351">Beheren</span><span class="sxs-lookup"><span data-stu-id="8c40b-351">Manage</span></span> |<span data-ttu-id="8c40b-352">.. /myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="8c40b-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="8c40b-353">Regels opsommen</span><span class="sxs-lookup"><span data-stu-id="8c40b-353">Enumerate rules</span></span> |<span data-ttu-id="8c40b-354">Beheren of luisteren</span><span class="sxs-lookup"><span data-stu-id="8c40b-354">Manage or Listen</span></span> |<span data-ttu-id="8c40b-355">.. /myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="8c40b-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="8c40b-356">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="8c40b-356">Next steps</span></span>

<span data-ttu-id="8c40b-357">Zie de volgende onderwerpen voor meer informatie over de Service Bus-berichtenservice</span><span class="sxs-lookup"><span data-stu-id="8c40b-357">To learn more about Service Bus messaging, see the following topics.</span></span>

* [<span data-ttu-id="8c40b-358">Grondbeginselen van Service Bus</span><span class="sxs-lookup"><span data-stu-id="8c40b-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="8c40b-359">Service Bus-wachtrijen, -onderwerpen en -abonnementen</span><span class="sxs-lookup"><span data-stu-id="8c40b-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="8c40b-360">Service Bus-wachtrijen gebruiken</span><span class="sxs-lookup"><span data-stu-id="8c40b-360">How to use Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="8c40b-361">Service Bus-onderwerpen en -abonnementen gebruiken</span><span class="sxs-lookup"><span data-stu-id="8c40b-361">How to use Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com