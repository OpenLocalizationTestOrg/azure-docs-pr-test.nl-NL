---
title: Azure Service Bus-toepassingen aaaInsulating tegen storingen en noodsituaties | Microsoft Docs
description: Hierin wordt beschreven technieken die u kunt toepassingen tooprotect tegen een mogelijke onderbreking van de Service Bus gebruiken.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: tysonn
ms.assetid: fd9fa8ab-f4c4-43f7-974f-c876df1614d4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/12/2017
ms.author: sethm
ms.openlocfilehash: 349b4968456c9f15375753d83495246f5a3ddfdb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-insulating-applications-against-service-bus-outages-and-disasters"></a><span data-ttu-id="6fb30-103">Aanbevolen procedures voor de isolatie van toepassingen tegen storingen van de Service Bus en noodsituaties</span><span class="sxs-lookup"><span data-stu-id="6fb30-103">Best practices for insulating applications against Service Bus outages and disasters</span></span>
<span data-ttu-id="6fb30-104">Bedrijfskritieke toepassingen moeten continu, zelfs in Hallo aanwezigheid van niet-geplande storingen of noodsituaties werken.</span><span class="sxs-lookup"><span data-stu-id="6fb30-104">Mission-critical applications must operate continuously, even in hello presence of unplanned outages or disasters.</span></span> <span data-ttu-id="6fb30-105">Dit onderwerp wordt beschreven technieken kunt u tooprotect Service Bus-toepassingen op basis van een mogelijke onderbreking van deze service of na noodgevallen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-105">This topic describes techniques you can use tooprotect Service Bus applications against a potential service outage or disaster.</span></span>

<span data-ttu-id="6fb30-106">Een storing wordt gedefinieerd als Hallo tijdelijke onbeschikbaarheid van Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="6fb30-106">An outage is defined as hello temporary unavailability of Azure Service Bus.</span></span> <span data-ttu-id="6fb30-107">Hallo storing, kan sommige onderdelen van Service Bus, zoals een berichten-store of zelfs Hallo gehele datacenter be√Ønvloeden.</span><span class="sxs-lookup"><span data-stu-id="6fb30-107">hello outage can affect some components of Service Bus, such as a messaging store, or even hello entire datacenter.</span></span> <span data-ttu-id="6fb30-108">Nadat het Hallo-probleem is verholpen, weer Service Bus beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="6fb30-108">After hello problem has been fixed, Service Bus becomes available again.</span></span> <span data-ttu-id="6fb30-109">Normaal gesproken veroorzaakt een storing geen verlies van berichten of andere gegevens.</span><span class="sxs-lookup"><span data-stu-id="6fb30-109">Typically, an outage does not cause loss of messages or other data.</span></span> <span data-ttu-id="6fb30-110">Een voorbeeld van een onderdeelfout is Hallo ontbreken van een bepaalde berichten-store.</span><span class="sxs-lookup"><span data-stu-id="6fb30-110">An example of a component failure is hello unavailability of a particular messaging store.</span></span> <span data-ttu-id="6fb30-111">Een voorbeeld van een onderbreking van de hele datacenter is een stroomstoring van Hallo datacenter of een netwerkswitch defecte datacenter.</span><span class="sxs-lookup"><span data-stu-id="6fb30-111">An example of a datacenter-wide outage is a power failure of hello datacenter, or a faulty datacenter network switch.</span></span> <span data-ttu-id="6fb30-112">Een storing kan de laatste van een paar minuten tooa paar dagen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-112">An outage can last from a few minutes tooa few days.</span></span>

<span data-ttu-id="6fb30-113">Een noodgeval wordt gedefinieerd als Hallo permanent verlies van een Service Bus-schaaleenheid of datacenter.</span><span class="sxs-lookup"><span data-stu-id="6fb30-113">A disaster is defined as hello permanent loss of a Service Bus scale unit or datacenter.</span></span> <span data-ttu-id="6fb30-114">Hallo datacenter kan of kan niet weer beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="6fb30-114">hello datacenter may or may not become available again.</span></span> <span data-ttu-id="6fb30-115">Doorgaans verloren een noodgeval enkele of alle berichten of andere gegevens.</span><span class="sxs-lookup"><span data-stu-id="6fb30-115">Typically a disaster causes loss of some or all messages or other data.</span></span> <span data-ttu-id="6fb30-116">Voorbeelden van noodsituaties zijn gestart, die het overspoelen of aardbeving.</span><span class="sxs-lookup"><span data-stu-id="6fb30-116">Examples of disasters are fire, flooding, or earthquake.</span></span>

## <a name="current-architecture"></a><span data-ttu-id="6fb30-117">Huidige architectuur</span><span class="sxs-lookup"><span data-stu-id="6fb30-117">Current architecture</span></span>
<span data-ttu-id="6fb30-118">Service Bus maakt gebruik van meerdere messaging winkels toostore-berichten dat tooqueues of onderwerpen worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="6fb30-118">Service Bus uses multiple messaging stores toostore messages that are sent tooqueues or topics.</span></span> <span data-ttu-id="6fb30-119">Een niet-gepartitioneerde wachtrij of onderwerp toegewezen tooone messaging-store.</span><span class="sxs-lookup"><span data-stu-id="6fb30-119">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="6fb30-120">Als deze berichten-store niet beschikbaar is, mislukt de alle bewerkingen voor de wachtrij of onderwerp.</span><span class="sxs-lookup"><span data-stu-id="6fb30-120">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span>

<span data-ttu-id="6fb30-121">Alle Service Bus messaging-entiteiten (wachtrijen, onderwerpen, relays) zich bevinden in een service-naamruimte die is gekoppeld aan een datacenter.</span><span class="sxs-lookup"><span data-stu-id="6fb30-121">All Service Bus messaging entities (queues, topics, relays) reside in a service namespace, which is affiliated with a datacenter.</span></span> <span data-ttu-id="6fb30-122">Service Bus kunnen niet automatisch geo-replicatie van gegevens, noch het staat een naamruimte toospan meerdere datacenters.</span><span class="sxs-lookup"><span data-stu-id="6fb30-122">Service Bus does not enable automatic geo-replication of data, nor does it allow a namespace toospan multiple datacenters.</span></span>

## <a name="protecting-against-acs-outages"></a><span data-ttu-id="6fb30-123">Bescherming tegen storingen van ACS</span><span class="sxs-lookup"><span data-stu-id="6fb30-123">Protecting against ACS outages</span></span>
<span data-ttu-id="6fb30-124">Als u van referenties voor ACS gebruikmaakt en ACS niet meer beschikbaar is, kunnen clients niet langer tokens verkrijgen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-124">If you are using ACS credentials, and ACS becomes unavailable, clients can no longer obtain tokens.</span></span> <span data-ttu-id="6fb30-125">Clients die een token hebt gelijktijdig Hallo die ACS uitvalt kunnen toouse Service Bus blijven totdat Hallo tokens verlopen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-125">Clients that have a token at hello time ACS goes down can continue toouse Service Bus until hello tokens expire.</span></span> <span data-ttu-id="6fb30-126">token standaardlevensduur Hallo is drie uur.</span><span class="sxs-lookup"><span data-stu-id="6fb30-126">hello default token lifetime is 3 hours.</span></span>

<span data-ttu-id="6fb30-127">tooprotect tegen storingen is ACS gebruikt Shared Access Signature (SAS)-tokens.</span><span class="sxs-lookup"><span data-stu-id="6fb30-127">tooprotect against ACS outages, use Shared Access Signature (SAS) tokens.</span></span> <span data-ttu-id="6fb30-128">In dit geval verifieert Hallo client rechtstreeks met Service Bus met een zelf minted token-ondertekening met een geheime sleutel.</span><span class="sxs-lookup"><span data-stu-id="6fb30-128">In this case, hello client authenticates directly with Service Bus by signing a self-minted token with a secret key.</span></span> <span data-ttu-id="6fb30-129">Aanroepen tooACS zijn niet langer vereist.</span><span class="sxs-lookup"><span data-stu-id="6fb30-129">Calls tooACS are no longer required.</span></span> <span data-ttu-id="6fb30-130">Zie voor meer informatie over SAS-tokens [Service Bus verificatie][Service Bus authentication].</span><span class="sxs-lookup"><span data-stu-id="6fb30-130">For more information about SAS tokens, see [Service Bus authentication][Service Bus authentication].</span></span>

## <a name="protecting-queues-and-topics-against-messaging-store-failures"></a><span data-ttu-id="6fb30-131">Beveiligen van wachtrijen en onderwerpen tegen storingen store messaging</span><span class="sxs-lookup"><span data-stu-id="6fb30-131">Protecting queues and topics against messaging store failures</span></span>
<span data-ttu-id="6fb30-132">Een niet-gepartitioneerde wachtrij of onderwerp toegewezen tooone messaging-store.</span><span class="sxs-lookup"><span data-stu-id="6fb30-132">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="6fb30-133">Als deze berichten-store niet beschikbaar is, mislukt de alle bewerkingen voor de wachtrij of onderwerp.</span><span class="sxs-lookup"><span data-stu-id="6fb30-133">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span> <span data-ttu-id="6fb30-134">Een wachtrij op Hallo daarentegen gepartitioneerd, bestaat uit meerdere fragmenten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-134">A partitioned queue, on hello other hand, consists of multiple fragments.</span></span> <span data-ttu-id="6fb30-135">Elke fragment wordt opgeslagen in een andere berichten-store.</span><span class="sxs-lookup"><span data-stu-id="6fb30-135">Each fragment is stored in a different messaging store.</span></span> <span data-ttu-id="6fb30-136">Wanneer een bericht wordt verzonden tooa gepartitioneerde wachtrij of onderwerp, toegewezen Service Bus Hallo-bericht tooone van Hallo fragmenten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-136">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="6fb30-137">Hallo bijbehorende berichten-store niet beschikbaar is, Service Bus schrijft Hallo-bericht tooa verschillende fragment, indien mogelijk.</span><span class="sxs-lookup"><span data-stu-id="6fb30-137">If hello corresponding messaging store is unavailable, Service Bus writes hello message tooa different fragment, if possible.</span></span> <span data-ttu-id="6fb30-138">Zie voor meer informatie over gepartitioneerde entiteiten [gepartitioneerde berichtentiteiten][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="6fb30-138">For more information about partitioned entities, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

## <a name="protecting-against-datacenter-outages-or-disasters"></a><span data-ttu-id="6fb30-139">Bescherming tegen storingen van datacenter of rampen</span><span class="sxs-lookup"><span data-stu-id="6fb30-139">Protecting against datacenter outages or disasters</span></span>
<span data-ttu-id="6fb30-140">tooallow voor een failover tussen twee datacentra, kunt u een Service Bus-Servicenaamruimte maken in elk datacenter.</span><span class="sxs-lookup"><span data-stu-id="6fb30-140">tooallow for a failover between two datacenters, you can create a Service Bus service namespace in each datacenter.</span></span> <span data-ttu-id="6fb30-141">Bijvoorbeeld, Hallo Service Bus-Servicenaamruimte **contosoPrimary.servicebus.windows.net** zich mogelijk in de regio van de Verenigde Staten Noord/centraal hello, en **contosoSecondary.servicebus.windows.net**zich mogelijk in Hallo ons Zuid/centraal regio.</span><span class="sxs-lookup"><span data-stu-id="6fb30-141">For example, hello Service Bus service namespace **contosoPrimary.servicebus.windows.net** might be located in hello United States North/Central region, and **contosoSecondary.servicebus.windows.net** might be located in hello US South/Central region.</span></span> <span data-ttu-id="6fb30-142">Als een Service Bus-berichtenservice entiteit blijven toegankelijk in Hallo aanwezigheid van een storing in datacenter zijn moet, kunt u die entiteit maken in beide naamruimten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-142">If a Service Bus messaging entity must remain accessible in hello presence of a datacenter outage, you can create that entity in both namespaces.</span></span>

<span data-ttu-id="6fb30-143">Zie voor meer informatie, Hallo '-fout van Servicebus binnen een Azure-datacenter in sectie [asynchrone messaging-patronen en hoge beschikbaarheid][Asynchronous messaging patterns and high availability].</span><span class="sxs-lookup"><span data-stu-id="6fb30-143">For more information, see hello "Failure of Service Bus within an Azure datacenter" section in [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability].</span></span>

## <a name="protecting-relay-endpoints-against-datacenter-outages-or-disasters"></a><span data-ttu-id="6fb30-144">Beveiligen van eindpunten relay tegen storingen van datacenter of rampen</span><span class="sxs-lookup"><span data-stu-id="6fb30-144">Protecting relay endpoints against datacenter outages or disasters</span></span>
<span data-ttu-id="6fb30-145">Geo-replicatie van de relay-eindpunten kan een service waarmee een bereikbaar in Hallo aanwezigheid van uitval van Service Bus relay-eindpunt toobe.</span><span class="sxs-lookup"><span data-stu-id="6fb30-145">Geo-replication of relay endpoints allows a service that exposes a relay endpoint toobe reachable in hello presence of Service Bus outages.</span></span> <span data-ttu-id="6fb30-146">tooachieve geo-replicatie, Hallo-service moet twee relay-eindpunten maken in verschillende naamruimten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-146">tooachieve geo-replication, hello service must create two relay endpoints in different namespaces.</span></span> <span data-ttu-id="6fb30-147">Hallo-naamruimten moet zich bevinden in verschillende datacenters en de twee eindpunten Hallo moeten verschillende namen hebben.</span><span class="sxs-lookup"><span data-stu-id="6fb30-147">hello namespaces must reside in different datacenters and hello two endpoints must have different names.</span></span> <span data-ttu-id="6fb30-148">Bijvoorbeeld: een primaire eindpunt kan worden bereikt onder **contosoPrimary.servicebus.windows.net/myPrimaryService**, terwijl het bijbehorende secundaire server kan worden bereikt onder **contosoSecondary.servicebus.windows.net /mySecondaryService**.</span><span class="sxs-lookup"><span data-stu-id="6fb30-148">For example, a primary endpoint can be reached under **contosoPrimary.servicebus.windows.net/myPrimaryService**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span></span>

<span data-ttu-id="6fb30-149">Hallo-service vervolgens luistert op beide eindpunten en een client-service op de eindpunten Hallo kunt aanroepen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-149">hello service then listens on both endpoints, and a client can invoke hello service via either endpoint.</span></span> <span data-ttu-id="6fb30-150">Een clienttoepassing willekeurig een van de Hallo relays hervat als primaire eindpunt Hallo en stuurt de aanvraag toohello actief eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-150">A client application randomly picks one of hello relays as hello primary endpoint, and sends its request toohello active endpoint.</span></span> <span data-ttu-id="6fb30-151">Als het Hallo-bewerking is mislukt met foutcode, wordt deze fout geeft aan dat Hallo relay-eindpunt is niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="6fb30-151">If hello operation fails with an error code, this failure indicates that hello relay endpoint is not available.</span></span> <span data-ttu-id="6fb30-152">Hallo-toepassing opent een kanaal toohello back-eindpunt en databasebron moet worden gestuurd Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="6fb30-152">hello application opens a channel toohello backup endpoint and reissues hello request.</span></span> <span data-ttu-id="6fb30-153">Op dat moment overschakelen rollen hello active- en back-eindpunten Hallo: Hallo clienttoepassing beschouwt Hallo oude actief eindpunt toobe Hallo nieuwe back-eindpunt en de oude back-upeindpunt toobe Hallo Hallo nieuwe actief eindpunt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-153">At that point hello active and hello backup endpoints switch roles: hello client application considers hello old active endpoint toobe hello new backup endpoint, and hello old backup endpoint toobe hello new active endpoint.</span></span> <span data-ttu-id="6fb30-154">Als beide mislukken verzendt, Hallo-rollen van de twee entiteiten Hallo blijven ongewijzigd en wordt een fout geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="6fb30-154">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="6fb30-155">Hallo [Geo-replicatie met Service Bus relayed berichten] [ Geo-replication with Service Bus relayed Messages] voorbeeld laat zien hoe tooreplicate doorstuurt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-155">hello [Geo-replication with Service Bus relayed messages][Geo-replication with Service Bus relayed Messages] sample demonstrates how tooreplicate relays.</span></span>

## <a name="protecting-queues-and-topics-against-datacenter-outages-or-disasters"></a><span data-ttu-id="6fb30-156">Wachtrijen en onderwerpen tegen storingen van datacenter of noodsituaties beveiligen</span><span class="sxs-lookup"><span data-stu-id="6fb30-156">Protecting queues and topics against datacenter outages or disasters</span></span>
<span data-ttu-id="6fb30-157">tooachieve herstelmogelijkheden tegen storingen van datacenter wanneer met behulp van brokered messaging, Service Bus ondersteunt twee methoden: *active* en *passieve* replicatie.</span><span class="sxs-lookup"><span data-stu-id="6fb30-157">tooachieve resilience against datacenter outages when using brokered messaging, Service Bus supports two approaches: *active* and *passive* replication.</span></span> <span data-ttu-id="6fb30-158">Voor elke methode als een bepaalde wachtrij of onderwerp toegankelijk in Hallo aanwezigheid van een storing in een datacenter blijven moet, kunt u dit maken in beide naamruimten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-158">For each approach, if a given queue or topic must remain accessible in hello presence of a datacenter outage, you can create it in both namespaces.</span></span> <span data-ttu-id="6fb30-159">Beide entiteiten kunnen Hallo hebben dezelfde naam.</span><span class="sxs-lookup"><span data-stu-id="6fb30-159">Both entities can have hello same name.</span></span> <span data-ttu-id="6fb30-160">Bijvoorbeeld: een primaire wachtrij kan worden bereikt onder **contosoPrimary.servicebus.windows.net/myQueue**, terwijl het bijbehorende secundaire server kan worden bereikt onder **contosoSecondary.servicebus.windows.net/myQueue**.</span><span class="sxs-lookup"><span data-stu-id="6fb30-160">For example, a primary queue can be reached under **contosoPrimary.servicebus.windows.net/myQueue**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/myQueue**.</span></span>

<span data-ttu-id="6fb30-161">Als de toepassing hello permanente afzender naar ontvanger communicatie niet vereist, kunt Hallo toepassing een duurzame clientzijde wachtrij tooprevent verlies en tooshield Hallo afzender van een tijdelijke fouten met Service Bus implementeren.</span><span class="sxs-lookup"><span data-stu-id="6fb30-161">If hello application does not require permanent sender-to-receiver communication, hello application can implement a durable client-side queue tooprevent message loss and tooshield hello sender from any transient Service Bus errors.</span></span>

## <a name="active-replication"></a><span data-ttu-id="6fb30-162">Actieve replicatie</span><span class="sxs-lookup"><span data-stu-id="6fb30-162">Active replication</span></span>
<span data-ttu-id="6fb30-163">Actieve replicatie maakt gebruik van entiteiten in beide naamruimten voor elke bewerking.</span><span class="sxs-lookup"><span data-stu-id="6fb30-163">Active replication uses entities in both namespaces for every operation.</span></span> <span data-ttu-id="6fb30-164">Een client die u een bericht verzendt verzendt twee exemplaren van Hallo hetzelfde bericht.</span><span class="sxs-lookup"><span data-stu-id="6fb30-164">Any client that sends a message sends two copies of hello same message.</span></span> <span data-ttu-id="6fb30-165">de eerste kopie Hallo toohello primaire entiteit wordt verzonden (bijvoorbeeld **contosoPrimary.servicebus.windows.net/sales**), en Hallo tweede kopie van het Hallo-bericht verzonden toohello secundaire entiteit (bijvoorbeeld  **contosoSecondary.servicebus.windows.net/sales**).</span><span class="sxs-lookup"><span data-stu-id="6fb30-165">hello first copy is sent toohello primary entity (for example, **contosoPrimary.servicebus.windows.net/sales**), and hello second copy of hello message is sent toohello secondary entity (for example, **contosoSecondary.servicebus.windows.net/sales**).</span></span>

<span data-ttu-id="6fb30-166">Een client ontvangt berichten van beide wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-166">A client receives messages from both queues.</span></span> <span data-ttu-id="6fb30-167">Hallo ontvanger processen Hallo eerste kopie van een bericht en de tweede kopie Hallo wordt onderdrukt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-167">hello receiver processes hello first copy of a message, and hello second copy is suppressed.</span></span> <span data-ttu-id="6fb30-168">dubbele berichten toosuppress Hallo afzender moet elk bericht met een unieke identificatie labelen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-168">toosuppress duplicate messages, hello sender must tag each message with a unique identifier.</span></span> <span data-ttu-id="6fb30-169">Beide kopie√´n van het Hallo-bericht moeten worden gemarkeerd met Hallo dezelfde id.</span><span class="sxs-lookup"><span data-stu-id="6fb30-169">Both copies of hello message must be tagged with hello same identifier.</span></span> <span data-ttu-id="6fb30-170">U kunt Hallo [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] of [BrokeredMessage.Label] [ BrokeredMessage.Label] eigenschappen of een aangepaste eigenschap tootag Hallo Bericht.</span><span class="sxs-lookup"><span data-stu-id="6fb30-170">You can use hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] or [BrokeredMessage.Label][BrokeredMessage.Label] properties, or a custom property tootag hello message.</span></span> <span data-ttu-id="6fb30-171">Hallo ontvanger moet een lijst met berichten die al zijn ontvangen onderhouden.</span><span class="sxs-lookup"><span data-stu-id="6fb30-171">hello receiver must maintain a list of messages that it has already received.</span></span>

<span data-ttu-id="6fb30-172">Hallo [Geo-replicatie met Service Bus Brokered berichten] [ Geo-replication with Service Bus Brokered Messages] ziet u het actieve replicatie van berichtentiteiten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-172">hello [Geo-replication with Service Bus Brokered Messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates active replication of messaging entities.</span></span>

> [!NOTE]
> <span data-ttu-id="6fb30-173">Hallo actieve replicatie benadering wordt het aantal bewerkingen Hallo verdubbeld, dus deze benadering toohigher kosten kan leiden.</span><span class="sxs-lookup"><span data-stu-id="6fb30-173">hello active replication approach doubles hello number of operations, therefore this approach can lead toohigher cost.</span></span>
> 
> 

## <a name="passive-replication"></a><span data-ttu-id="6fb30-174">Passieve replicatie</span><span class="sxs-lookup"><span data-stu-id="6fb30-174">Passive replication</span></span>
<span data-ttu-id="6fb30-175">In geval veroorzaakt gratis Hallo passieve replicatie maakt gebruik van slechts √©√©n van de twee berichtentiteiten Hallo.</span><span class="sxs-lookup"><span data-stu-id="6fb30-175">In hello fault-free case, passive replication uses only one of hello two messaging entities.</span></span> <span data-ttu-id="6fb30-176">Een client verzendt Hallo-bericht toohello active entiteit.</span><span class="sxs-lookup"><span data-stu-id="6fb30-176">A client sends hello message toohello active entity.</span></span> <span data-ttu-id="6fb30-177">Als het Hallo-bewerking op de actieve entiteit Hallo mislukt met de foutcode die aangeeft Hallo datacenter hosts Hallo active entiteit mogelijk niet beschikbaar, verzendt Hallo-client een kopie van het Hallo-bericht toohello back-entiteit.</span><span class="sxs-lookup"><span data-stu-id="6fb30-177">If hello operation on hello active entity fails with an error code that indicates hello datacenter that hosts hello active entity might be unavailable, hello client sends a copy of hello message toohello backup entity.</span></span> <span data-ttu-id="6fb30-178">Op dat moment overschakelen rollen hello active- en back-upentiteiten Hallo: Hallo verzendende client beschouwt Hallo oude active entiteit toobe Hallo nieuwe back-entiteit en Hallo oude back-entiteit is hello nieuwe active entiteit.</span><span class="sxs-lookup"><span data-stu-id="6fb30-178">At that point hello active and hello backup entities switch roles: hello sending client considers hello old active entity toobe hello new backup entity, and hello old backup entity is hello new active entity.</span></span> <span data-ttu-id="6fb30-179">Als beide mislukken verzendt, Hallo-rollen van de twee entiteiten Hallo blijven ongewijzigd en wordt een fout geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="6fb30-179">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="6fb30-180">Een client ontvangt berichten van beide wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="6fb30-180">A client receives messages from both queues.</span></span> <span data-ttu-id="6fb30-181">Omdat er een kans is die ontvanger Hallo twee kopie√´n van dezelfde-, Hallo bericht Hallo ontvangt ontvanger dubbele berichten moet onderdrukken.</span><span class="sxs-lookup"><span data-stu-id="6fb30-181">Because there is a chance that hello receiver receives two copies of hello same message, hello receiver must suppress duplicate messages.</span></span> <span data-ttu-id="6fb30-182">U kunt onderdrukken dubbele items in Hallo dezelfde manier zoals beschreven voor actieve replicatie.</span><span class="sxs-lookup"><span data-stu-id="6fb30-182">You can suppress duplicates in hello same way as described for active replication.</span></span>

<span data-ttu-id="6fb30-183">Passieve replicatie is in het algemeen goedkoper dan actieve replicatie omdat in de meeste gevallen slechts √©√©n bewerking wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="6fb30-183">In general, passive replication is more economical than active replication because in most cases only one operation is performed.</span></span> <span data-ttu-id="6fb30-184">Latentie, doorvoer en kosten zijn identiek toohello niet-gerepliceerde scenario.</span><span class="sxs-lookup"><span data-stu-id="6fb30-184">Latency, throughput, and monetary cost are identical toohello non-replicated scenario.</span></span>

<span data-ttu-id="6fb30-185">Als u passieve replicatie gebruikt, in Hallo kunnen volgende scenario's berichten zoekraken of worden twee keer ontvangen:</span><span class="sxs-lookup"><span data-stu-id="6fb30-185">When using passive replication, in hello following scenarios messages can be lost or received twice:</span></span>

* <span data-ttu-id="6fb30-186">**Bericht vertraging of verlies**: wordt ervan uitgegaan dat Hallo afzender een m1 toohello primaire berichtenwachtrij verzonden en vervolgens Hallo wachtrij uitvalt voordat Hallo ontvanger m1 ontvangt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-186">**Message delay or loss**: Assume that hello sender successfully sent a message m1 toohello primary queue, and then hello queue becomes unavailable before hello receiver receives m1.</span></span> <span data-ttu-id="6fb30-187">Hallo afzender verzendt een daaropvolgende m2 toohello secundaire berichtenwachtrij.</span><span class="sxs-lookup"><span data-stu-id="6fb30-187">hello sender sends a subsequent message m2 toohello secondary queue.</span></span> <span data-ttu-id="6fb30-188">Als de primaire wachtrij Hallo tijdelijk niet beschikbaar is is, ontvangt Hallo ontvanger m1 nadat Hallo wachtrij weer beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="6fb30-188">If hello primary queue is temporarily unavailable, hello receiver receives m1 after hello queue becomes available again.</span></span> <span data-ttu-id="6fb30-189">Als er een ramp optreedt ontvangt Hallo ontvanger mogelijk nooit m1.</span><span class="sxs-lookup"><span data-stu-id="6fb30-189">In case of a disaster, hello receiver may never receive m1.</span></span>
* <span data-ttu-id="6fb30-190">**Dubbele ontvangst**: wordt ervan uitgegaan dat Hallo afzender verzendt een m toohello primaire berichtenwachtrij.</span><span class="sxs-lookup"><span data-stu-id="6fb30-190">**Duplicate reception**: Assume that hello sender sends a message m toohello primary queue.</span></span> <span data-ttu-id="6fb30-191">Service Bus m verwerkt is, maar toosend een antwoord is mislukt.</span><span class="sxs-lookup"><span data-stu-id="6fb30-191">Service Bus successfully processes m but fails toosend a response.</span></span> <span data-ttu-id="6fb30-192">Nadat Hallo verzenden time-out bij bewerking, stuurt Hallo afzender een identieke kopie van m toohello secundaire wachtrij.</span><span class="sxs-lookup"><span data-stu-id="6fb30-192">After hello send operation times out, hello sender sends an identical copy of m toohello secondary queue.</span></span> <span data-ttu-id="6fb30-193">Als ontvanger Hallo kunnen tooreceive Hallo eerste kopie van m voordat Hallo primaire wachtrij niet meer beschikbaar is, Hallo ontvanger beide kopie√´n van m op ongeveer Hallo ontvangt hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="6fb30-193">If hello receiver is able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver receives both copies of m at approximately hello same time.</span></span> <span data-ttu-id="6fb30-194">Als Hallo ontvanger niet kunnen tooreceive Hallo eerste kopie van m voordat Hallo primaire wachtrij niet meer beschikbaar is, worden Hallo ontvanger in eerste instantie ontvangt alleen Hallo tweede kopie van m, maar ontvangt vervolgens een tweede exemplaar van m zodra Hallo primaire wachtrij beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="6fb30-194">If hello receiver is not able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver initially receives only hello second copy of m, but then receives a second copy of m when hello primary queue becomes available.</span></span>

<span data-ttu-id="6fb30-195">Hallo [Geo-replicatie met Service Bus brokered berichten] [ Geo-replication with Service Bus Brokered Messages] voorbeeld demonstreert passieve replicatie van berichtentiteiten.</span><span class="sxs-lookup"><span data-stu-id="6fb30-195">hello [Geo-replication with Service Bus brokered messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates passive replication of messaging entities.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6fb30-196">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="6fb30-196">Next steps</span></span>
<span data-ttu-id="6fb30-197">toolearn meer informatie over herstel na noodgevallen, Zie de volgende artikelen:</span><span class="sxs-lookup"><span data-stu-id="6fb30-197">toolearn more about disaster recovery, see these articles:</span></span>

* <span data-ttu-id="6fb30-198">[Azure SQL Database Business Continuity][Azure SQL Database Business Continuity]</span><span class="sxs-lookup"><span data-stu-id="6fb30-198">[Azure SQL Database Business Continuity][Azure SQL Database Business Continuity]</span></span>
* <span data-ttu-id="6fb30-199">[Robuuste toepassingen voor Azure ontwerpen][Azure resiliency technical guidance]</span><span class="sxs-lookup"><span data-stu-id="6fb30-199">[Designing resilient applications for Azure][Azure resiliency technical guidance]</span></span>

[Service Bus Authentication]: service-bus-authentication-and-authorization.md
[Partitioned messaging entities]: service-bus-partitioning.md
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md#failure-of-service-bus-within-an-azure-datacenter
[Geo-replication with Service Bus Relayed Messages]: http://code.msdn.microsoft.com/Geo-replication-with-16dbfecd
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[BrokeredMessage.Label]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label
[Geo-replication with Service Bus Brokered Messages]: http://code.msdn.microsoft.com/Geo-replication-with-f5688664
[Azure SQL Database Business Continuity]: ../sql-database/sql-database-business-continuity.md
[Azure resiliency technical guidance]: /azure/architecture/resiliency
