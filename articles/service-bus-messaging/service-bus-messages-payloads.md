---
title: Azure Service Bus-berichten, nettoladingen en serialisatie | Microsoft Docs
description: Overzicht van Service Bus bericht nettoladingen
services: service-bus-messaging
documentationcenter: 
author: clemensv
manager: timlt
editor: 
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/28/2017
ms.author: sethm
ms.openlocfilehash: 7c18cc4a0e6a8dbf3a47c146707666c5538ff7c3
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/11/2017
---
# <a name="messages-payloads-and-serialization"></a>Berichten, nettoladingen en serialisatie

Microsoft Azure Service Bus verwerkt berichten. Berichten voert een nettolading, evenals de metagegevens in de vorm van sleutel / waarde-paar eigenschappen, met een beschrijving van de nettolading en met een verwerking instructies voor Service Bus en toepassingen. In sommige gevallen kan alleen metagegevens zijn voldoende voor het transport van de informatie die de afzender wil communiceren met ontvangers en de nettolading van de leeg blijft.

Het objectmodel officiële Service Bus-clients voor .NET en Java weerspiegelen de samenvatting van Service Bus berichtstructuur, die is toegewezen en naar de kabel protocollen Service Bus ondersteunt.
 
Een Service Bus-bericht bestaat uit een binaire nettoladingsectie van die Service Bus nooit in een formulier op de servicezijde en twee sets eigenschappen verwerkt. De *eigenschappen broker* zijn vooraf gedefinieerd door het systeem. Deze vooraf gedefinieerde eigenschappen ofwel berichtniveau functionaliteit binnen de broker bepalen of deze worden toegewezen aan de algemene en gestandaardiseerde metagegevensitems. De *gebruikerseigenschappen* zijn van een verzameling van sleutel-waardeparen die kunnen worden gedefinieerd en ingesteld door de toepassing.
 
Eigenschappen van de vooraf gedefinieerde broker worden in de volgende tabel weergegeven. De namen worden gebruikt met alle officiële client-API's en ook in de [BrokerProperties](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Properties_) JSON-object van de toewijzing van HTTP-protocol.
 
De equivalente namen die op het niveau van het protocol AMQP staan tussen haakjes. 

| De naam van eigenschap                         | Beschrijving                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) (inhoud-type)           | Eventueel beschrijft de nettolading van het bericht met een descriptor na de indeling van RFC2045, sectie 5, bijvoorbeeld `application/json`.                                                                                                                                                                                                                                                                                             |
|  [CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid#Microsoft_Azure_ServiceBus_Message_CorrelationId) (correlatie-id)       | Kan een toepassing om op te geven van een context voor het bericht voor de doeleinden van CORRELATIE, bijvoorbeeld als gevolg van de **MessageId** van een bericht dat wordt beantwoord.                                                                                                                                                                                                                                                                  |
| [DeadLetterSource](/dotnet/api/microsoft.azure.servicebus.message.deadlettersource)                      | Alleen in berichten die onbestelbare lettered en vervolgens automatisch doorgestuurd vanuit de wachtrij voor onbestelbare berichten naar een andere entiteit zijn ingesteld. Hiermee geeft u de entiteit waarin het bericht onbestelbare lettered is. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                  |
| [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount)                         | Het aantal leveringen waartoe voor dit bericht. Het aantal wordt verhoogd wanneer een vergrendeling van het bericht is verlopen of het bericht expliciet is afgebroken door de ontvanger. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                  |
| [EnqueuedSequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedsequencenumber)                | Deze eigenschap weerspiegelt voor berichten die automatisch doorgestuurd zijn, het volgnummer dat was eerst is toegewezen aan het bericht op de oorspronkelijke tijdstip van verzending. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                                |
| [EnqueuedTimeUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedtimeutc)                       | De UTC-instant waarmee het bericht is geaccepteerd en opgeslagen in de entiteit. Deze waarde kan worden gebruikt als een bindende en neutrale aankomst tijdindicator wanneer de ontvanger niet wilt vertrouwen van de afzender klok. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                   |
|  [ExpiresAtUtc](/dotnet/api/microsoft.azure.servicebus.message.expiresatutc) (absolute verstrijken tijd) | De UTC-instant waarop het bericht gemarkeerd voor verwijdering en niet langer beschikbaar voor het ophalen van de entiteit vanwege het verlopen van is. Verloopdatum wordt bepaald door de **TimeToLive** eigenschap en deze eigenschap wordt berekend op basis van EnqueuedTimeUtc + TimeToLive. Deze eigenschap is alleen-lezen.                                                                                                                                                                           |
| [ForcePersistence](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.forcepersistence)                      | Voor wachtrijen of onderwerpen die u hebt de [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress?view=azureservicebus-4.1.1#Microsoft_ServiceBus_Messaging_QueueDescription_EnableExpress) vlag ingesteld, kan deze eigenschap worden ingesteld om aan te geven dat het bericht moet worden vastgehouden op schijf voordat deze is bevestigd. Dit is het standaardgedrag voor alle niet-express-entiteiten.                                                                                                                                                                                                         |
| [Label](/dotnet/api/microsoft.azure.servicebus.message.label) (onderwerp)                       | Deze eigenschap kan de toepassing het doel van het bericht dat de ontvanger op een gestandaardiseerde manier, vergelijkbaar met een e-onderwerpregel aangegeven.                                                                                                                                                                                                                                                                                  |
| [LockedUntilUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.lockeduntilutc)                        | Voor berichten die zijn opgehaald onder een vergrendeling (modus, niet vooraf afgewikkeld peek vergrendeling ontvangen) deze eigenschap weerspiegelt de UTC instant tot wanneer het bericht wordt vastgehouden vergrendeld in de wachtrij /-abonnement. Wanneer de vergrendeling verloopt, de [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount) wordt verhoogd en het bericht is opnieuw beschikbaar voor ophalen. Deze eigenschap is alleen-lezen.                                                                                                                         |
| [LockToken](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.locktoken)                             | Het Vergrendelingstoken is een verwijzing naar de vergrendeling die wordt vastgehouden door de broker in *peek vergrendeling* modus ontvangen. Het token kan worden gebruikt vastmaken van de vergrendeling permanent via de [uitgestelde](message-deferral.md) API en met die in het bericht uit de stroom van de status reguliere levering. Deze eigenschap is alleen-lezen.                                                                                                                                                               |
| [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid) (bericht-id)                | De bericht-id is een toepassing gedefinieerde waarde die een unieke identificatie van het bericht en de nettolading. De id is een tekenreeks en kan betrekking hebben op een GUID of een id die is afgeleid van de context van de toepassing. Indien ingeschakeld, de [detectie van duplicaten](duplicate-detection.md) functie identificeert en verwijdert u de tweede en meer voorbeelden van berichten met dezelfde **MessageId**.                                                                |
| [PartitionKey](/dotnet/api/microsoft.azure.servicebus.message.partitionkey)                          | Voor [gepartitioneerde entiteiten](service-bus-partitioning.md), als u deze waarde kunt toewijzen verwante berichten naar dezelfde partitie interne zodat de volgorde van de verzending is correct geregistreerd. De partitie een hash-functie op deze waarde wordt gekozen en kan niet rechtstreeks worden gekozen. Sessie-bewuste entiteiten de **SessionId** eigenschap overschrijft deze waarde.                                                                                                       |
| [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto) (antwoord tot)                    | Deze waarde optioneel en toepassingsspecifieke is de gebruikelijke manier om een antwoord-pad voor de ontvanger van het bericht. Wanneer een afzender een antwoord verwacht, wordt de waarde ingesteld op het absolute of relatieve pad van de wachtrij of onderwerp die verwacht het antwoord wordt verzonden dat naar.                                                                                                                                           |
| [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid) (antwoord-naar-groep-id)  | Deze waarde verbetert de **ReplyTo** informatie en geeft aan welk **SessionId** moet worden ingesteld voor het antwoord wanneer ze worden verzonden naar de entiteit van het antwoord.                                                                                                                                                                                                                                                                            |
| [ScheduledEnqueueTimeUtc](/dotnet/api/microsoft.azure.servicebus.message.scheduledenqueuetimeutc)               | Deze eigenschap definieert voor berichten die alleen beschikbaar zijn voor herstel na een vertraging, UTC instant waarmee het bericht logisch samengevoegd in wachtrij gezet worden wordt, geordend en daarom beschikbaar gesteld voor ophalen.                                                                                                                                                                                                                 |
| [SequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sequencenumber)                        | Het volgnummer is een uniek 64-bits geheel getal toegewezen aan een bericht wanneer ze worden geaccepteerd en door de broker en functies als de waarde true id opgeslagen. Gepartitioneerde entiteiten weerspiegelen de bovenste 16-bits de partitie-id. Volgnummers gestaag verhogen en zonder pauzes zijn. Ze overschakelen naar 0 als het bereik 48 64-bits is verbruikt. Deze eigenschap is alleen-lezen.                                                                |
| [Sessie-id](/dotnet/api/microsoft.azure.servicebus.message.sessionid) (groep-id)                  | Deze toepassing gedefinieerde waarde voor sessie-bewuste entiteiten Hiermee geeft u het lidmaatschap van de sessie van het bericht. Berichten met dezelfde sessie-id zijn onderworpen aan samenvatting vergrendelen en exacte in volgorde verwerken en demultiplexing inschakelen. Deze waarde wordt genegeerd voor sessie niet bewust entiteiten.                                                                                                                                     |
| [Grootte](/dotnet/api/microsoft.azure.servicebus.message.size)                                  | Weergave van de opgeslagen van het bericht in het logboek broker als het aantal bytes, als dit naar de opslaglimiet geteld. Deze eigenschap is alleen-lezen.                                                                                                                                                                                                                                                                                                       |
| [Status](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.state)                                 | Geeft de status van het bericht in het logboek. Deze eigenschap is alleen relevant tijdens bericht bladeren door ('peek') om te bepalen of een bericht 'active' en beschikbaar voor ophalen omdat het de bovenkant van de wachtrij bereikt, ongeacht of deze wordt uitgesteld of wacht om te worden gepland. Deze eigenschap is alleen-lezen.                                                                                                                                           |
| [TimeToLive](/dotnet/api/microsoft.azure.servicebus.message.timetolive)                            | Deze waarde is de relatieve duur, waarna het bericht verloopt, starten vanaf het moment van het bericht is geaccepteerd en opgeslagen door de broker zoals vastgelegd in **EnqueueTimeUtc**. Wanneer niet expliciet is ingesteld, is uitgegaan van de waarde de **DefaultTimeToLive** voor de betreffende wachtrij of onderwerp. Een bericht-niveau **TimeToLive** waarde mag niet langer zijn dan de entiteit **DefaultTimeToLive** instelling en achtergrond wordt aangepast als dat zo is. |
| [Naar](/dotnet/api/microsoft.azure.servicebus.message.to) (tot)                               | Deze eigenschap is gereserveerd voor toekomstig gebruik in scenario's voor Routering en die momenteel worden genegeerd door de broker zelf. Toepassingen kunnen deze waarde in chaining scenario's voor een automatisch doorsturen op basis van bedrijfsregels gebruiken om aan te geven van de logische bestemming van het bericht.                                                                                                                                                                                   |
| [ViaPartitionKey](/dotnet/api/microsoft.azure.servicebus.message.viapartitionkey)                       | Als een bericht wordt verzonden via een wachtrij in het bereik van een transactie, selecteert u deze waarde de overdracht wachtrij-partitie.                                                                                                                                                                                                                                                                                                                 |

Het model abstracte bericht kunt een bericht naar een wachtrij via HTTP (daadwerkelijk altijd HTTPS) worden gepost, en kan worden opgehaald via AMQP. Het bericht ziet er in beide gevallen normale in de context van het betreffende protocol. Eigenschappen van de broker worden vertaald naar behoefte, en de gebruikerseigenschappen worden toegewezen aan de meest geschikte locatie op het betreffende protocol bericht-model. In HTTP-, eigenschappen van de gebruiker rechtstreeks naar en van HTTP-headers; toewijzen in AMQP ze wijzen naar en uit de **eigenschappen van application** kaart.

## <a name="message-routing-and-correlation"></a>Berichtroutering en correlatie

Een subset van de eigenschappen van de broker beschreven eerder, specifiek [naar](/dotnet/api/microsoft.azure.servicebus.message.to), [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto), [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid), [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid), [ CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid), en [SessionId](/dotnet/api/microsoft.azure.servicebus.message.sessionid), worden gebruikt voor het routeren van berichten toepassingen naar bepaalde bestemmingen. Houd rekening met een paar patronen ter illustratie:

- **Eenvoudige aanvraag/antwoordbewerking**: een uitgever verzendt een bericht in een wachtrij en een antwoord van de berichtenconsument verwacht. Voor het ontvangen van het antwoord, de uitgever van de eigenaar is van een wachtrij waarin deze antwoorden moet worden geleverd verwacht. Het adres van deze wachtrij wordt uitgedrukt in het uitgaande bericht **ReplyTo** eigenschap. Wanneer de consument reageert, kopieert de **MessageId** van het bericht verwerkt in de **CorrelationId** eigenschap van het antwoordbericht en levert het bericht naar de bestemming door de aangegeven**ReplyTo** eigenschap. Een bericht kan meerdere antwoorden, afhankelijk van de context van de toepassing opleveren.
- **Multicast-aanvragen/antwoorden**: als een variant van het vorige patroon van de uitgever het bericht verzendt naar een onderwerp en meerdere abonnees in aanmerking komen voor het bericht in beslag nemen. Elk van de abonnees kan reageren op de wijze die eerder zijn beschreven. Dit patroon wordt gebruikt in scenario's voor detectie of de aanroep van de rol en hij doorgaans identificeert zichzelf met een eigenschap of binnen de nettolading. Als **ReplyTo** verwijst naar een onderwerp, zoals een set van detectie antwoorden kunnen worden gedistribueerd naar een doelgroep.
- **Multiplex**: met deze functie sessie kunt multiplex van streams verwante berichten via een enkele wachtrij of een abonnement, zodat elke sessie (of groep) Verwante berichten, geïdentificeerd door overeenkomende **SessionId**waarden, worden doorgestuurd naar een specifieke ontvanger terwijl de ontvanger heeft de sessie onder vergrendelen. Meer informatie over de details van sessies [hier](message-sessions.md).
- **Aanvragen/antwoorden multiplex**: met deze functie sessie kunt multiplex antwoorden, zodat verschillende uitgevers delen van een antwoordenwachtrij. Door in te stellen **ReplyToSessionId**, de uitgever ervoor zorgen dat de consumer(s) kopiëren die waarde in de **SessionId** eigenschap van het antwoordbericht. De publicerende wachtrij of onderwerp bevat geen sessie-Houd er rekening mee. Het bericht is verzonden, de uitgever kan specifiek wacht voor een sessie met de opgegeven **SessionId** om aan te geven aan in de wachtrij voorwaardelijk accepteert de ontvanger van een sessie. 

Routering binnen een Service Bus-naamruimte kan worden gerealiseerd met behulp van automatische forward chaining en onderwerp abonnementsregels. Routeren tussen naamruimten kan worden gerealiseerd [met behulp van Azure LogicApps](https://azure.microsoft.com/services/logic-apps/). Zoals aangegeven in de vorige lijst de **naar** eigenschap is gereserveerd voor toekomstig gebruik en uiteindelijk kan worden geïnterpreteerd door de broker met een speciaal ingeschakelde functie. Toepassingen die u wilt implementeren routering moeten doen zodat op basis van gebruikersgegevens en niet lean op de **naar** eigenschap; echter nu doet leidt niet tot problemen met de compatibiliteit.

## <a name="payload-serialization"></a>De nettolading van serialisatie

Wanneer tijdens de overdracht of opgeslagen op de Service Bus, de nettolading is altijd een ondoorzichtige, binaire blok. De [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) eigenschap kunt u toepassingen voor het beschrijven van de nettolading, met de voorgestelde indeling voor de eigenschapswaarden wordt een beschrijving van de MIME-inhoudstype volgens IETF RFC2045; bijvoorbeeld `application/json;charset=utf-8`.

In tegenstelling tot de varianten Java of .NET standaard ondersteunt de .NET Framework-versie van de Service Bus-API maken **BrokeredMessage** exemplaren door willekeurige .NET-objecten aan de constructor doorgeven. 

Wanneer u de verouderde SBMP-protocol gebruikt, worden deze objecten vervolgens geserialiseerd met de binaire serializer standaard of met een serialisatiefunctie die extern worden verstrekt. Wanneer u het AMQP-protocol gebruikt, is het object wordt geserialiseerd in een AMQP-object. De ontvanger kan ophalen die objecten met de [GetBody<T>()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.getbody#Microsoft_ServiceBus_Messaging_BrokeredMessage_GetBody__1) methode, levert het verwachte type; met AMQP, de objecten worden geserialiseerd in een grafiek AMQP van **ArrayList** en **IDictionary < tekenreeks, object >** objecten en kan worden verkregen door een AMQP-client. 

Hoewel deze verborgen serialisatie-magic handige, moeten toepassingen nemen expliciete object serialisatie en hun objectgrafieken omzetten in streams voordat ze in een bericht en de omgekeerde aan de kant van de ontvanger doen. Dit oplevert interoperabel resultaten. Er moet ook worden opgemerkt, terwijl u AMQP heeft een krachtige binaire codering model, is deze aan het messaging ecosysteem van AMQP gebonden en HTTP-clients hebben problemen met het decoderen van dergelijke nettoladingen. 

In het algemeen wordt aangeraden JSON en Apache Avro als nettolading indelingen voor gestructureerde gegevens.

De standaard .NET en Java API-varianten accepteert alleen byte matrices, wat betekent dat de toepassing object serialisatie-besturingselement moet verwerken. 

## <a name="next-steps"></a>Volgende stappen

Zie voor meer informatie over Service Bus-berichtenservice, de volgende onderwerpen:

* [Grondbeginselen van Service Bus](service-bus-fundamentals-hybrid-solutions.md)
* [Service Bus-wachtrijen, -onderwerpen en -abonnementen](service-bus-queues-topics-subscriptions.md)
* [Aan de slag met Service Bus-wachtrijen](service-bus-dotnet-get-started-with-queues.md)
* [Service Bus-onderwerpen en -abonnementen gebruiken](service-bus-dotnet-how-to-use-topics-subscriptions.md)