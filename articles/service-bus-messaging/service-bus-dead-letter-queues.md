---
title: Service Bus-wachtrijen voor onbestelbare berichten | Microsoft Docs
description: Overzicht van Azure Service Bus-wachtrijen voor onbestelbare berichten
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 68b2aa38-dba7-491a-9c26-0289bc15d397
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/17/2017
ms.author: clemensv;sethm
ms.openlocfilehash: c16bcf30ab96f79e59404a41852e4cd227e28b08
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="overview-of-service-bus-dead-letter-queues"></a><span data-ttu-id="53853-103">Overzicht van Service Bus-wachtrijen voor onbestelbare berichten</span><span class="sxs-lookup"><span data-stu-id="53853-103">Overview of Service Bus dead-letter queues</span></span>

<span data-ttu-id="53853-104">Service Bus-wachtrijen en onderwerpabonnementen bieden u een secundaire onderliggende wachtrij aangeroepen een *wachtrij voor onbestelbare berichten* (DLQ).</span><span class="sxs-lookup"><span data-stu-id="53853-104">Service Bus queues and topic subscriptions provide a secondary sub-queue, called a *dead-letter queue* (DLQ).</span></span> <span data-ttu-id="53853-105">De wachtrij voor onbestelbare berichten hoeft niet expliciet worden gemaakt en kan niet worden verwijderd of anders beheerd onafhankelijk van de belangrijkste entiteit.</span><span class="sxs-lookup"><span data-stu-id="53853-105">The dead-letter queue does not need to be explicitly created and cannot be deleted or otherwise managed independent of the main entity.</span></span>

<span data-ttu-id="53853-106">Dit artikel wordt beschreven wachtrijen voor onbestelbare berichten in de Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="53853-106">This article discusses dead-letter queues in Azure Service Bus.</span></span> <span data-ttu-id="53853-107">Veel van de bespreking van de wordt geïllustreerd door het [wachtrijen voor onbestelbare berichten voorbeeld](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) op GitHub.</span><span class="sxs-lookup"><span data-stu-id="53853-107">Much of the discussion is illustrated by the [Dead-Letter Queues sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) on GitHub.</span></span>
 
## <a name="the-dead-letter-queue"></a><span data-ttu-id="53853-108">De wachtrij voor onbestelbare berichten</span><span class="sxs-lookup"><span data-stu-id="53853-108">The dead-letter queue</span></span>

<span data-ttu-id="53853-109">Het doel van de wachtrij voor onbestelbare berichten is voor het opslaan van berichten die naar een ontvanger kunnen niet worden bezorgd of berichten die niet kunnen worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="53853-109">The purpose of the dead-letter queue is to hold messages that cannot be delivered to any receiver, or messages that could not be processed.</span></span> <span data-ttu-id="53853-110">Berichten kunnen vervolgens worden verwijderd uit de DLQ en gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="53853-110">Messages can then be removed from the DLQ and inspected.</span></span> <span data-ttu-id="53853-111">Een toepassing kan met behulp van een operator wordt oplossen van problemen en verzend het bericht opnieuw, meld het feit dat er een fout is en corrigerende maatregelen nemen.</span><span class="sxs-lookup"><span data-stu-id="53853-111">An application might, with help of an operator, correct issues and resubmit the message, log the fact that there was an error, and take corrective action.</span></span> 

<span data-ttu-id="53853-112">Vanuit een perspectief API en het protocol is voornamelijk de DLQ vergelijkbaar met de wachtrij, behalve dat berichten kunnen alleen worden verzonden via de onbestelbare gebaar van de bovenliggende entiteit.</span><span class="sxs-lookup"><span data-stu-id="53853-112">From an API and protocol perspective, the DLQ is mostly similar to any other queue, except that messages can only be submitted via the dead-letter gesture of the parent entity.</span></span> <span data-ttu-id="53853-113">Bovendien time to live is niet-naleving en u kunt een bericht van een DLQ onbestelbare niet.</span><span class="sxs-lookup"><span data-stu-id="53853-113">In addition, time-to-live is not observed, and you can't dead-letter a message from a DLQ.</span></span> <span data-ttu-id="53853-114">Volledige ondersteuning voor de wachtrij voor onbestelbare berichten peek vergrendeling levering en transactionele bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="53853-114">The dead-letter queue fully supports peek-lock delivery and transactional operations.</span></span>

<span data-ttu-id="53853-115">Houd er rekening mee dat er geen automatische opschoning van de DLQ is.</span><span class="sxs-lookup"><span data-stu-id="53853-115">Note that there is no automatic cleanup of the DLQ.</span></span> <span data-ttu-id="53853-116">Berichten blijven in de DLQ totdat u ze expliciet uit de DLQ en aanroep ophaalt [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) voor het bericht met onbestelbare berichten.</span><span class="sxs-lookup"><span data-stu-id="53853-116">Messages remain in the DLQ until you explicitly retrieve them from the DLQ and call [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) on the dead-letter message.</span></span>

## <a name="moving-messages-to-the-dlq"></a><span data-ttu-id="53853-117">Verplaatsen van berichten naar de DLQ</span><span class="sxs-lookup"><span data-stu-id="53853-117">Moving messages to the DLQ</span></span>

<span data-ttu-id="53853-118">Er zijn verschillende activiteiten in de Service Bus die ertoe leiden dat berichten naar de DLQ uit binnen de messaging-engine zelf ophalen gepusht.</span><span class="sxs-lookup"><span data-stu-id="53853-118">There are several activities in Service Bus that cause messages to get pushed to the DLQ from within the messaging engine itself.</span></span> <span data-ttu-id="53853-119">Een toepassing kunt u ook expliciet berichten verplaatsen naar de DLQ.</span><span class="sxs-lookup"><span data-stu-id="53853-119">An application can also explicitly move messages to the DLQ.</span></span> 

<span data-ttu-id="53853-120">Als het bericht wordt verplaatst met de broker, twee eigenschappen worden toegevoegd aan het bericht wanneer de broker de interne versie van roept de [wachtrij voor onbestelbare](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) methode voor het bericht: `DeadLetterReason` en `DeadLetterErrorDescription`.</span><span class="sxs-lookup"><span data-stu-id="53853-120">As the message gets moved by the broker, two properties are added to the message as the broker calls its internal version of the [DeadLetter](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) method on the message: `DeadLetterReason` and `DeadLetterErrorDescription`.</span></span>

<span data-ttu-id="53853-121">Toepassingen kunnen hun eigen codes definiëren voor de `DeadLetterReason` eigenschap, maar het systeem stelt u de volgende waarden.</span><span class="sxs-lookup"><span data-stu-id="53853-121">Applications can define their own codes for the `DeadLetterReason` property, but the system sets the following values.</span></span>

| <span data-ttu-id="53853-122">Voorwaarde</span><span class="sxs-lookup"><span data-stu-id="53853-122">Condition</span></span> | <span data-ttu-id="53853-123">DeadLetterReason</span><span class="sxs-lookup"><span data-stu-id="53853-123">DeadLetterReason</span></span> | <span data-ttu-id="53853-124">DeadLetterErrorDescription</span><span class="sxs-lookup"><span data-stu-id="53853-124">DeadLetterErrorDescription</span></span> |
| --- | --- | --- |
| <span data-ttu-id="53853-125">Altijd</span><span class="sxs-lookup"><span data-stu-id="53853-125">Always</span></span> |<span data-ttu-id="53853-126">HeaderSizeExceeded</span><span class="sxs-lookup"><span data-stu-id="53853-126">HeaderSizeExceeded</span></span> |<span data-ttu-id="53853-127">De grootte voor deze stroom is overschreden.</span><span class="sxs-lookup"><span data-stu-id="53853-127">The size quota for this stream has been exceeded.</span></span> |
| <span data-ttu-id="53853-128">! TopicDescription.</span><span class="sxs-lookup"><span data-stu-id="53853-128">!TopicDescription.</span></span><br /><span data-ttu-id="53853-129">EnableFilteringMessagesBeforePublishing en SubscriptionDescription.</span><span class="sxs-lookup"><span data-stu-id="53853-129">EnableFilteringMessagesBeforePublishing and SubscriptionDescription.</span></span><br /><span data-ttu-id="53853-130">EnableDeadLetteringOnFilterEvaluationExceptions</span><span class="sxs-lookup"><span data-stu-id="53853-130">EnableDeadLetteringOnFilterEvaluationExceptions</span></span> |<span data-ttu-id="53853-131">uitzondering. GetType(). Naam</span><span class="sxs-lookup"><span data-stu-id="53853-131">exception.GetType().Name</span></span> |<span data-ttu-id="53853-132">uitzondering. Bericht</span><span class="sxs-lookup"><span data-stu-id="53853-132">exception.Message</span></span> |
| <span data-ttu-id="53853-133">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="53853-133">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="53853-134">TTLExpiredException</span><span class="sxs-lookup"><span data-stu-id="53853-134">TTLExpiredException</span></span> |<span data-ttu-id="53853-135">Het bericht is verlopen en dode is lettered.</span><span class="sxs-lookup"><span data-stu-id="53853-135">The message expired and was dead lettered.</span></span> |
| <span data-ttu-id="53853-136">SubscriptionDescription.RequiresSession</span><span class="sxs-lookup"><span data-stu-id="53853-136">SubscriptionDescription.RequiresSession</span></span> |<span data-ttu-id="53853-137">Sessie-id is null.</span><span class="sxs-lookup"><span data-stu-id="53853-137">Session id is null.</span></span> |<span data-ttu-id="53853-138">Sessie ingeschakeld entiteit is niet mogelijk een bericht waarvan sessie-id null is.</span><span class="sxs-lookup"><span data-stu-id="53853-138">Session enabled entity doesn't allow a message whose session identifier is null.</span></span> |
| <span data-ttu-id="53853-139">! wachtrij voor onbestelbare berichten</span><span class="sxs-lookup"><span data-stu-id="53853-139">!dead letter queue</span></span> |<span data-ttu-id="53853-140">MaxTransferHopCountExceeded</span><span class="sxs-lookup"><span data-stu-id="53853-140">MaxTransferHopCountExceeded</span></span> |<span data-ttu-id="53853-141">Null</span><span class="sxs-lookup"><span data-stu-id="53853-141">Null</span></span> |
| <span data-ttu-id="53853-142">Toepassing expliciete dode lettering</span><span class="sxs-lookup"><span data-stu-id="53853-142">Application explicit dead lettering</span></span> |<span data-ttu-id="53853-143">Opgegeven door toepassing</span><span class="sxs-lookup"><span data-stu-id="53853-143">Specified by application</span></span> |<span data-ttu-id="53853-144">Opgegeven door toepassing</span><span class="sxs-lookup"><span data-stu-id="53853-144">Specified by application</span></span> |

## <a name="exceeding-maxdeliverycount"></a><span data-ttu-id="53853-145">Meer dan MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="53853-145">Exceeding MaxDeliveryCount</span></span>
<span data-ttu-id="53853-146">Wachtrijen en abonnementen hebben een [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) en [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) eigenschap respectievelijk; de standaardwaarde is 10.</span><span class="sxs-lookup"><span data-stu-id="53853-146">Queues and subscriptions each have a [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) and [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) property respectively; the default value is 10.</span></span> <span data-ttu-id="53853-147">Wanneer een bericht is bezorgd onder een vergrendeling ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), maar is een expliciet verlaten of de vergrendeling is verlopen, wordt het bericht [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is verhoogd.</span><span class="sxs-lookup"><span data-stu-id="53853-147">Whenever a message has been delivered under a lock ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), but has been either explicitly abandoned or the lock has expired, the message's [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is incremented.</span></span> <span data-ttu-id="53853-148">Wanneer [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) overschrijdt [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), het bericht is verplaatst naar de DLQ geven de `MaxDeliveryCountExceeded` redencode.</span><span class="sxs-lookup"><span data-stu-id="53853-148">When [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) exceeds [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), the message is moved to the DLQ, specifying the `MaxDeliveryCountExceeded` reason code.</span></span>

<span data-ttu-id="53853-149">Dit gedrag kan niet worden uitgeschakeld, maar u kunt instellen [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) met een zeer groot aantal.</span><span class="sxs-lookup"><span data-stu-id="53853-149">This behavior cannot be disabled, but you can set [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) to a very large number.</span></span>

## <a name="exceeding-timetolive"></a><span data-ttu-id="53853-150">TimeToLive overschrijdt</span><span class="sxs-lookup"><span data-stu-id="53853-150">Exceeding TimeToLive</span></span>
<span data-ttu-id="53853-151">Wanneer de [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) of [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) eigenschap is ingesteld op **waar** (de standaardwaarde is **false**), alle verlopende berichten worden verplaatst naar de DLQ geven de `TTLExpiredException` redencode.</span><span class="sxs-lookup"><span data-stu-id="53853-151">When the [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) or [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) property is set to **true** (the default is **false**), all expiring messages are moved to the DLQ, specifying the  `TTLExpiredException` reason code.</span></span>

<span data-ttu-id="53853-152">Houd er rekening mee dat verlopen berichten worden alleen opgeschoond en daarom naar de DLQ verplaatst wanneer er ten minste één actieve ontvanger binnenhalen op de hoofdwachtrij of abonnement. Dit gedrag is inherent aan het ontwerp.</span><span class="sxs-lookup"><span data-stu-id="53853-152">Note that expired messages are only purged and therefore moved to the DLQ when there is at least one active receiver pulling on the main queue or subscription; that behavior is by design.</span></span>

## <a name="errors-while-processing-subscription-rules"></a><span data-ttu-id="53853-153">Fouten tijdens het verwerken van abonnementsregels</span><span class="sxs-lookup"><span data-stu-id="53853-153">Errors while processing subscription rules</span></span>
<span data-ttu-id="53853-154">Wanneer de [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) eigenschap voor een abonnement is ingeschakeld, eventuele fouten die zich voordoen tijdens een abonnement SQL filterregel wordt uitgevoerd in de DLQ langs worden vastgelegd met de strijdige bericht.</span><span class="sxs-lookup"><span data-stu-id="53853-154">When the [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) property is enabled for a subscription, any errors that occur while a subscription's SQL filter rule executes are captured in the DLQ along with the offending message.</span></span>

## <a name="application-level-dead-lettering"></a><span data-ttu-id="53853-155">Op toepassingsniveau verwerking van onbestelbare berichten</span><span class="sxs-lookup"><span data-stu-id="53853-155">Application-level dead-lettering</span></span>
<span data-ttu-id="53853-156">Naast de verwerking van onbestelbare berichten systeem geleverde functies toepassingen de DLQ gebruiken voor het expliciet weigeren onaanvaardbaar berichten.</span><span class="sxs-lookup"><span data-stu-id="53853-156">In addition to the system-provided dead-lettering features, applications can use the DLQ to explicitly reject unacceptable messages.</span></span> <span data-ttu-id="53853-157">Dit omvat mogelijk berichten die correct kunnen niet worden verwerkt vanwege een of andere vorm van een systeemprobleem, berichten waarin een verkeerd ingedeelde nettoladingen of berichten die niet door de verificatie als sommige berichtniveau beveiligingsschema wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="53853-157">This may include messages that cannot be properly processed due to any sort of system issue, messages that hold malformed payloads, or messages that fail authentication when some message-level security scheme is used.</span></span>

## <a name="dead-lettering-in-forwardto-or-sendvia-scenarios"></a><span data-ttu-id="53853-158">Verwerking van onbestelbare berichten in scenario's ForwardTo of SendVia</span><span class="sxs-lookup"><span data-stu-id="53853-158">Dead-lettering in ForwardTo or SendVia scenarios</span></span>

<span data-ttu-id="53853-159">Berichten worden verzonden naar de wachtrij onbestelbare berichten in de volgende omstandigheden:</span><span class="sxs-lookup"><span data-stu-id="53853-159">Messages will be sent to the transfer dead-letter queue under the following conditions:</span></span>

- <span data-ttu-id="53853-160">Een bericht wordt doorgegeven via meer dan 3 wachtrijen of onderwerpen die [aaneengeschakeld](service-bus-auto-forwarding.md).</span><span class="sxs-lookup"><span data-stu-id="53853-160">A message passes through more than 3 queues or topics that are [chained together](service-bus-auto-forwarding.md).</span></span>
- <span data-ttu-id="53853-161">De doelwachtrij of onderwerp is uitgeschakeld of verwijderd.</span><span class="sxs-lookup"><span data-stu-id="53853-161">The destination queue or topic is disabled or deleted.</span></span>
- <span data-ttu-id="53853-162">De doelwachtrij of onderwerp wordt de maximale entiteit overschrijdt.</span><span class="sxs-lookup"><span data-stu-id="53853-162">The destination queue or topic exceeds the maximum entity size.</span></span>

<span data-ttu-id="53853-163">Voor het ophalen van deze lettered van onbestelbare berichten, kunt u een ontvanger met behulp van de [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) hulpprogramma methode.</span><span class="sxs-lookup"><span data-stu-id="53853-163">To retrieve these dead-lettered messages, you can create a receiver using the [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) utility method.</span></span>

## <a name="example"></a><span data-ttu-id="53853-164">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="53853-164">Example</span></span>
<span data-ttu-id="53853-165">Het volgende codefragment maakt een bericht ontvanger.</span><span class="sxs-lookup"><span data-stu-id="53853-165">The following code snippet creates a message receiver.</span></span> <span data-ttu-id="53853-166">In de receive-lus voor de hoofdwachtrij, de code haalt het bericht met [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), waarin wordt gevraagd de broker onmiddellijk retourneren elk bericht direct beschikbaar, of om te retourneren met geen resultaat.</span><span class="sxs-lookup"><span data-stu-id="53853-166">In the receive loop for the main queue, the code retrieves the message with [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), which asks the broker to instantly return any message readily available, or to return with no result.</span></span> <span data-ttu-id="53853-167">Als de code wordt een bericht ontvangt, het onmiddellijk verlaat deze welke stappen de `DeliveryCount`.</span><span class="sxs-lookup"><span data-stu-id="53853-167">If the code receives a message, it immediately abandons it, which increments the  `DeliveryCount`.</span></span> <span data-ttu-id="53853-168">Zodra het bericht wordt verplaatst naar de DLQ het systeem, de hoofdwachtrij leeg is en dat de lus wordt afgesloten, als [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) retourneert **null**.</span><span class="sxs-lookup"><span data-stu-id="53853-168">Once the system moves the message to the DLQ, the main queue is empty and the loop exits, as [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returns **null**.</span></span>

```csharp
var receiver = await receiverFactory.CreateMessageReceiverAsync(queueName, ReceiveMode.PeekLock);
while(true)
{
    var msg = await receiver.ReceiveAsync(TimeSpan.Zero);
    if (msg != null)
    {
        Console.WriteLine("Picked up message; DeliveryCount {0}", msg.DeliveryCount);
        await msg.AbandonAsync();
    }
    else
    {
        break;
    }
}
```

## <a name="next-steps"></a><span data-ttu-id="53853-169">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="53853-169">Next steps</span></span>
<span data-ttu-id="53853-170">Zie de volgende artikelen voor meer informatie over Service Bus-wachtrijen:</span><span class="sxs-lookup"><span data-stu-id="53853-170">See the following articles for more information about Service Bus queues:</span></span>

* [<span data-ttu-id="53853-171">Aan de slag met Service Bus-wachtrijen</span><span class="sxs-lookup"><span data-stu-id="53853-171">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="53853-172">Azure-wachtrijen en Service Bus-wachtrijen vergeleken</span><span class="sxs-lookup"><span data-stu-id="53853-172">Azure Queues and Service Bus queues compared</span></span>](service-bus-azure-and-service-bus-queues-compared-contrasted.md)

