---
title: Een Azure App Service-omgeving maken met een Resource Manager-sjabloon
description: Wordt uitgelegd hoe u een externe of ILB Azure App Service-omgeving maken met een Resource Manager-sjabloon
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 6eb7d43d-e820-4a47-818c-80ff7d3b6f8e
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.openlocfilehash: e6b21086488352c1da914b4656ad1d216fd6de85
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="create-an-ase-by-using-an-azure-resource-manager-template"></a><span data-ttu-id="6b895-103">Een as-omgeving maken met een Azure Resource Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="6b895-103">Create an ASE by using an Azure Resource Manager template</span></span>

## <a name="overview"></a><span data-ttu-id="6b895-104">Overzicht</span><span class="sxs-lookup"><span data-stu-id="6b895-104">Overview</span></span>
<span data-ttu-id="6b895-105">Azure App Service-omgevingen (ASEs) kunnen worden gemaakt met een eindpunt toegankelijk is via het internet of een eindpunt op een intern adres in een Azure-netwerk (VNet).</span><span class="sxs-lookup"><span data-stu-id="6b895-105">Azure App Service environments (ASEs) can be created with an internet-accessible endpoint or an endpoint on an internal address in an Azure virtual network (VNet).</span></span> <span data-ttu-id="6b895-106">Wanneer dit wordt gemaakt met een interne eindpunt, wordt dat eindpunt wordt verstrekt door een Azure onderdeel een interne load balancer (ILB) genoemd.</span><span class="sxs-lookup"><span data-stu-id="6b895-106">When created with an internal endpoint, that endpoint is provided by an Azure component called an internal load balancer (ILB).</span></span> <span data-ttu-id="6b895-107">De as-omgeving op een interne IP-adres, heet een ILB-as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-107">The ASE on an internal IP address is called an ILB ASE.</span></span> <span data-ttu-id="6b895-108">De as-omgeving met een openbaar eindpunt heet een externe as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-108">The ASE with a public endpoint is called an External ASE.</span></span> 

<span data-ttu-id="6b895-109">Een as-omgeving kan worden gemaakt met behulp van de Azure-portal of een Azure Resource Manager-sjabloon.</span><span class="sxs-lookup"><span data-stu-id="6b895-109">An ASE can be created by using the Azure portal or an Azure Resource Manager template.</span></span> <span data-ttu-id="6b895-110">In dit artikel wordt uitgelegd welke stappen en de syntaxis die u moet een externe as-omgeving of ILB as-omgeving maken met Resource Manager-sjablonen.</span><span class="sxs-lookup"><span data-stu-id="6b895-110">This article walks through the steps and syntax you need to create an External ASE or ILB ASE with Resource Manager templates.</span></span> <span data-ttu-id="6b895-111">Zie voor meer informatie over het maken van een as-omgeving in de Azure portal, [maken van een externe as-omgeving] [ MakeExternalASE] of [maken van een as-omgeving voor de ILB][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="6b895-111">To learn how to create an ASE in the Azure portal, see [Make an External ASE][MakeExternalASE] or [Make an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="6b895-112">Wanneer u een as-omgeving in de Azure portal maakt, kunt u uw VNet maken op hetzelfde moment of kies een bestaande VNet te implementeren in.</span><span class="sxs-lookup"><span data-stu-id="6b895-112">When you create an ASE in the Azure portal, you can create your VNet at the same time or choose a preexisting VNet to deploy into.</span></span> <span data-ttu-id="6b895-113">Wanneer u een as-omgeving van een sjabloon maakt, moet u beginnen met:</span><span class="sxs-lookup"><span data-stu-id="6b895-113">When you create an ASE from a template, you must start with:</span></span> 

* <span data-ttu-id="6b895-114">Een Resource Manager VNet.</span><span class="sxs-lookup"><span data-stu-id="6b895-114">A Resource Manager VNet.</span></span>
* <span data-ttu-id="6b895-115">Een subnet in dit VNet.</span><span class="sxs-lookup"><span data-stu-id="6b895-115">A subnet in that VNet.</span></span> <span data-ttu-id="6b895-116">De grootte van een as-omgeving van het is raadzaam `/25` met 128 adressen biedt bij toekomstige groei.</span><span class="sxs-lookup"><span data-stu-id="6b895-116">We recommend an ASE subnet size of `/25` with 128 addresses to accomodate future growth.</span></span> <span data-ttu-id="6b895-117">Nadat de as-omgeving is gemaakt, kunt u de grootte niet wijzigen.</span><span class="sxs-lookup"><span data-stu-id="6b895-117">After the ASE is created, you can't change the size.</span></span>
* <span data-ttu-id="6b895-118">De resource-ID van uw VNet.</span><span class="sxs-lookup"><span data-stu-id="6b895-118">The resource ID from your VNet.</span></span> <span data-ttu-id="6b895-119">U kunt deze informatie vinden vanuit de Azure-portal onder de eigenschappen van uw virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="6b895-119">You can get this information from the Azure portal under your virtual network properties.</span></span>
* <span data-ttu-id="6b895-120">Het abonnement dat u implementeren wilt in.</span><span class="sxs-lookup"><span data-stu-id="6b895-120">The subscription you want to deploy into.</span></span>
* <span data-ttu-id="6b895-121">De locatie die u implementeren wilt in.</span><span class="sxs-lookup"><span data-stu-id="6b895-121">The location you want to deploy into.</span></span>

<span data-ttu-id="6b895-122">Voor het automatiseren van uw as-omgeving maken:</span><span class="sxs-lookup"><span data-stu-id="6b895-122">To automate your ASE creation:</span></span>

1. <span data-ttu-id="6b895-123">De as-omgeving met een sjabloon maken.</span><span class="sxs-lookup"><span data-stu-id="6b895-123">Create the ASE from a template.</span></span> <span data-ttu-id="6b895-124">Als u een externe as-omgeving maakt, bent u klaar na deze stap.</span><span class="sxs-lookup"><span data-stu-id="6b895-124">If you create an External ASE, you're finished after this step.</span></span> <span data-ttu-id="6b895-125">Als u een ILB-as-omgeving maakt, zijn er enkele aanvullende zaken te doen.</span><span class="sxs-lookup"><span data-stu-id="6b895-125">If you create an ILB ASE, there are a few more things to do.</span></span>

2. <span data-ttu-id="6b895-126">Nadat u uw as ILB-omgeving is gemaakt, wordt een SSL-certificaat dat overeenkomt met uw domein ILB as-omgeving geüpload.</span><span class="sxs-lookup"><span data-stu-id="6b895-126">After your ILB ASE is created, an SSL certificate that matches your ILB ASE domain is uploaded.</span></span>

3. <span data-ttu-id="6b895-127">Het geüploade SSL-certificaat is toegewezen aan de as-omgeving voor de ILB als de 'standaard' SSL-certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-127">The uploaded SSL certificate is assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="6b895-128">Dit certificaat wordt gebruikt voor SSL-verkeer voor apps op de as ILB-omgeving wanneer ze het algemene hoofddomein dat toegewezen aan de as-omgeving (bijvoorbeeld https://someapp.mycustomrootcomain.com) gebruiken.</span><span class="sxs-lookup"><span data-stu-id="6b895-128">This certificate is used for SSL traffic to apps on the ILB ASE when they use the common root domain that's assigned to the ASE (for example, https://someapp.mycustomrootcomain.com).</span></span>


## <a name="create-the-ase"></a><span data-ttu-id="6b895-129">De as-omgeving maken</span><span class="sxs-lookup"><span data-stu-id="6b895-129">Create the ASE</span></span>
<span data-ttu-id="6b895-130">Resource Manager-sjabloon die u een as-omgeving en de bijbehorende parameters-bestand maakt is beschikbaar [in een voorbeeld] [ quickstartasev2create] op GitHub.</span><span class="sxs-lookup"><span data-stu-id="6b895-130">A Resource Manager template that creates an ASE and its associated parameters file is available [in an example][quickstartasev2create] on GitHub.</span></span>

<span data-ttu-id="6b895-131">Als u maken van een as ILB-omgeving wilt, gebruikt u deze Resource Manager-sjabloon [voorbeelden][quickstartilbasecreate].</span><span class="sxs-lookup"><span data-stu-id="6b895-131">If you want to make an ILB ASE, use these Resource Manager template [examples][quickstartilbasecreate].</span></span> <span data-ttu-id="6b895-132">Ze voorzien in dat geval gebruiken.</span><span class="sxs-lookup"><span data-stu-id="6b895-132">They cater to that use case.</span></span> <span data-ttu-id="6b895-133">De meeste van de parameters in de *azuredeploy.parameters.json* bestand voor het maken van ILB ASEs en externe ASEs gelden.</span><span class="sxs-lookup"><span data-stu-id="6b895-133">Most of the parameters in the *azuredeploy.parameters.json* file are common to the creation of ILB ASEs and External ASEs.</span></span> <span data-ttu-id="6b895-134">De volgende lijst illustreert parameters van speciale opmerking of die uniek zijn, zijn bij het maken van een as ILB-omgeving:</span><span class="sxs-lookup"><span data-stu-id="6b895-134">The following list calls out parameters of special note, or that are unique, when you create an ILB ASE:</span></span>

* <span data-ttu-id="6b895-135">*interalLoadBalancingMode*: Stel deze optie om 3, wat betekent dat zowel HTTPS-verkeer op poort 80/443 en de controlegegevens channel-poorten te hebben geluisterd naar door de FTP-service op de as-omgeving In de meeste gevallen wordt gebonden aan een ILB-toegewezen virtueel netwerk interne adres.</span><span class="sxs-lookup"><span data-stu-id="6b895-135">*interalLoadBalancingMode*: In most cases, set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB-allocated virtual network internal address.</span></span> <span data-ttu-id="6b895-136">Als deze eigenschap is ingesteld op 2, worden alleen de FTP-service verwante poorten (zowel besturings- als kanalen) gekoppeld aan een ILB-adres.</span><span class="sxs-lookup"><span data-stu-id="6b895-136">If this property is set to 2, only the FTP service-related ports (both control and data channels) are bound to an ILB address.</span></span> <span data-ttu-id="6b895-137">Het HTTP/HTTPS-verkeer blijft op het openbare VIP.</span><span class="sxs-lookup"><span data-stu-id="6b895-137">The HTTP/HTTPS traffic remains on the public VIP.</span></span>
* <span data-ttu-id="6b895-138">*dnsSuffix*: deze parameter bepaalt het hoofddomein standaard die toegewezen aan de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-138">*dnsSuffix*: This parameter defines the default root domain that's assigned to the ASE.</span></span> <span data-ttu-id="6b895-139">In de openbare variatie van Azure App Service, het hoofddomein standaard voor alle web-apps is *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="6b895-139">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span> <span data-ttu-id="6b895-140">Omdat een ILB-as-omgeving is voor intern gebruik voor het virtuele netwerk van een klant, niet dat u de openbare dienst standaard hoofddomein gebruiken.</span><span class="sxs-lookup"><span data-stu-id="6b895-140">Because an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span> <span data-ttu-id="6b895-141">Een as ILB-omgeving moet in plaats daarvan een standaard-hoofddomein die zinvol voor gebruik binnen een bedrijf intern virtueel netwerk hebben.</span><span class="sxs-lookup"><span data-stu-id="6b895-141">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span> <span data-ttu-id="6b895-142">Bijvoorbeeld, Contoso Corporation gebruiken een hoofddomein standaard van *interne contoso.com* voor apps die zijn bedoeld om te worden omgezet en toegankelijk zijn alleen binnen het virtuele netwerk van Contoso.</span><span class="sxs-lookup"><span data-stu-id="6b895-142">For example, Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to be resolvable and accessible only within Contoso's virtual network.</span></span> 
* <span data-ttu-id="6b895-143">*ipSslAddressCount*: deze parameter automatisch wordt standaard ingesteld op een waarde van 0 in de *azuredeploy.json* bestand omdat ILB ASEs slechts één ILB-adres hebben.</span><span class="sxs-lookup"><span data-stu-id="6b895-143">*ipSslAddressCount*: This parameter automatically defaults to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span> <span data-ttu-id="6b895-144">Er zijn geen expliciete SSL IP-adressen voor een as ILB-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-144">There are no explicit IP-SSL addresses for an ILB ASE.</span></span> <span data-ttu-id="6b895-145">Daarom kan de IP-SSL-adresgroep voor een as ILB-omgeving moet worden ingesteld op nul.</span><span class="sxs-lookup"><span data-stu-id="6b895-145">Hence, the IP-SSL address pool for an ILB ASE must be set to zero.</span></span> <span data-ttu-id="6b895-146">Anders treedt er een inrichten fout op.</span><span class="sxs-lookup"><span data-stu-id="6b895-146">Otherwise, a provisioning error occurs.</span></span> 

<span data-ttu-id="6b895-147">Na de *azuredeploy.parameters.json* bestand is ingevuld, de as-omgeving maken met behulp van het PowerShell-codefragment.</span><span class="sxs-lookup"><span data-stu-id="6b895-147">After the *azuredeploy.parameters.json* file is filled in, create the ASE by using the PowerShell code snippet.</span></span> <span data-ttu-id="6b895-148">Wijzig de bestandspaden zodat deze overeenkomen met de Resource Manager-sjabloonbestand locaties op uw computer.</span><span class="sxs-lookup"><span data-stu-id="6b895-148">Change the file paths to match the Resource Manager template-file locations on your machine.</span></span> <span data-ttu-id="6b895-149">Vergeet niet uw eigen waarden voor de implementatienaam van Resource Manager en de naam van de resourcegroep opgeven:</span><span class="sxs-lookup"><span data-stu-id="6b895-149">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="6b895-150">Het duurt ongeveer een uur voor de as-omgeving moet worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="6b895-150">It takes about an hour for the ASE to be created.</span></span> <span data-ttu-id="6b895-151">Vervolgens de as-omgeving wordt weergegeven in de portal in de lijst met ASEs voor het abonnement waarmee de implementatie is geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="6b895-151">Then the ASE shows up in the portal in the list of ASEs for the subscription that triggered the deployment.</span></span>

## <a name="upload-and-configure-the-default-ssl-certificate"></a><span data-ttu-id="6b895-152">Uploaden en configureren van het SSL-certificaat voor "default"</span><span class="sxs-lookup"><span data-stu-id="6b895-152">Upload and configure the "default" SSL certificate</span></span>
<span data-ttu-id="6b895-153">Een SSL-certificaat moet worden gekoppeld aan het as-omgeving als het 'standaard' SSL-certificaat dat wordt gebruikt voor SSL-verbindingen met apps.</span><span class="sxs-lookup"><span data-stu-id="6b895-153">An SSL certificate must be associated with the ASE as the "default" SSL certificate that's used to establish SSL connections to apps.</span></span> <span data-ttu-id="6b895-154">Als van de as-omgeving standaard DNS-achtervoegsel *interne contoso.com*, een verbinding met https://some-random-app.internal-contoso.com vereist een SSL-certificaat is geldig voor **.internal contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="6b895-154">If the ASE's default DNS suffix is *internal-contoso.com*, a connection to https://some-random-app.internal-contoso.com requires an SSL certificate that's valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="6b895-155">Een geldig SSL-certificaat ophalen met behulp van de interne CA's, een certificaat aanschaffen van een externe verlener of met behulp van een zelfondertekend certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-155">Obtain a valid SSL certificate by using internal certificate authorities, purchasing a certificate from an external issuer, or using a self-signed certificate.</span></span> <span data-ttu-id="6b895-156">Ongeacht de bron van het SSL-certificaat, moeten de volgende certificaat-kenmerken juist zijn geconfigureerd:</span><span class="sxs-lookup"><span data-stu-id="6b895-156">Regardless of the source of the SSL certificate, the following certificate attributes must be configured properly:</span></span>

* <span data-ttu-id="6b895-157">**Onderwerp**: dit kenmerk moet worden ingesteld op **.your-hoofdmap-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="6b895-157">**Subject**: This attribute must be set to **.your-root-domain-here.com*.</span></span>
* <span data-ttu-id="6b895-158">**Alternatieve onderwerpnaam**: dit kenmerk moet bevatten beide **.your-hoofdmap-domain-here.com* en **.scm.your-hoofdmap-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="6b895-158">**Subject Alternative Name**: This attribute must include both **.your-root-domain-here.com* and **.scm.your-root-domain-here.com*.</span></span> <span data-ttu-id="6b895-159">SSL-verbindingen met de SCM/Kudu-site die is gekoppeld aan elke app een adres van het formulier gebruiken *your-app-name.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="6b895-159">SSL connections to the SCM/Kudu site associated with each app use an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="6b895-160">Met een geldig SSL-certificaat in de hand, worden twee aanvullende voorbereidende stappen uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="6b895-160">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span> <span data-ttu-id="6b895-161">Het SSL-certificaat, converteren/opslaan als een .pfx-bestand.</span><span class="sxs-lookup"><span data-stu-id="6b895-161">Convert/save the SSL certificate as a .pfx file.</span></span> <span data-ttu-id="6b895-162">Houd er rekening mee dat het .pfx-bestand moet alle tussenliggende bevatten en de hoofd-certificaten.</span><span class="sxs-lookup"><span data-stu-id="6b895-162">Remember that the .pfx file must include all intermediate and root certificates.</span></span> <span data-ttu-id="6b895-163">Beveilig deze met een wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="6b895-163">Secure it with a password.</span></span>

<span data-ttu-id="6b895-164">Het pfx-bestand moet worden geconverteerd naar een base64-tekenreeks omdat het SSL-certificaat wordt geüpload met behulp van een Resource Manager-sjabloon.</span><span class="sxs-lookup"><span data-stu-id="6b895-164">The .pfx file needs to be converted into a base64 string because the SSL certificate is uploaded by using a Resource Manager template.</span></span> <span data-ttu-id="6b895-165">Omdat Resource Manager-sjablonen tekstbestanden zijn, kan het pfx-bestand moet worden geconverteerd naar een base64-tekenreeks.</span><span class="sxs-lookup"><span data-stu-id="6b895-165">Because Resource Manager templates are text files, the .pfx file must be converted into a base64 string.</span></span> <span data-ttu-id="6b895-166">Op deze manier kan zijn opgenomen als een parameter van de sjabloon.</span><span class="sxs-lookup"><span data-stu-id="6b895-166">This way it can be included as a parameter of the template.</span></span>

<span data-ttu-id="6b895-167">Gebruik de volgende PowerShell-codefragment aan:</span><span class="sxs-lookup"><span data-stu-id="6b895-167">Use the following PowerShell code snippet to:</span></span>

* <span data-ttu-id="6b895-168">Een zelfondertekend certificaat genereren.</span><span class="sxs-lookup"><span data-stu-id="6b895-168">Generate a self-signed certificate.</span></span>
* <span data-ttu-id="6b895-169">Het certificaat exporteren als een .pfx-bestand.</span><span class="sxs-lookup"><span data-stu-id="6b895-169">Export the certificate as a .pfx file.</span></span>
* <span data-ttu-id="6b895-170">Het pfx-bestand worden geconverteerd naar een base64-gecodeerde tekenreeks.</span><span class="sxs-lookup"><span data-stu-id="6b895-170">Convert the .pfx file into a base64-encoded string.</span></span>
* <span data-ttu-id="6b895-171">Sla de base64-gecodeerde tekenreeks naar een afzonderlijk bestand.</span><span class="sxs-lookup"><span data-stu-id="6b895-171">Save the base64-encoded string to a separate file.</span></span> 

<span data-ttu-id="6b895-172">Deze PowerShell-code voor base64-codering is gebaseerd op de [PowerShell scripts blog][examplebase64encoding]:</span><span class="sxs-lookup"><span data-stu-id="6b895-172">This PowerShell code for base64 encoding was adapted from the [PowerShell scripts blog][examplebase64encoding]:</span></span>

        $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

        $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
        $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

        $fileName = "exportedcert.pfx"
        Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

        $fileContentBytes = get-content -encoding byte $fileName
        $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
        $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="6b895-173">Nadat het SSL-certificaat is gegenereerd en geconverteerd naar een base64-gecodeerde tekenreeks, gebruikt u de voorbeeld-Resource Manager-sjabloon [de standaard SSL-certificaat configureren] [ quickstartconfiguressl] op GitHub.</span><span class="sxs-lookup"><span data-stu-id="6b895-173">After the SSL certificate is successfully generated and converted to a base64-encoded string, use the example Resource Manager template [Configure the default SSL certificate][quickstartconfiguressl] on GitHub.</span></span> 

<span data-ttu-id="6b895-174">De parameters in de *azuredeploy.parameters.json* bestand worden hier vermeld:</span><span class="sxs-lookup"><span data-stu-id="6b895-174">The parameters in the *azuredeploy.parameters.json* file are listed here:</span></span>

* <span data-ttu-id="6b895-175">*appServiceEnvironmentName*: de naam van de as ILB-omgeving wordt geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="6b895-175">*appServiceEnvironmentName*: The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="6b895-176">*existingAseLocation*: tekenreeks met de Azure-regio waar de as ILB-omgeving is geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="6b895-176">*existingAseLocation*: Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="6b895-177">Bijvoorbeeld: 'Zuid-centraal VS'.</span><span class="sxs-lookup"><span data-stu-id="6b895-177">For example: "South Central US".</span></span>
* <span data-ttu-id="6b895-178">*pfxBlobString*: de based64-gecodeerde tekenreeksrepresentatie van het pfx-bestand.</span><span class="sxs-lookup"><span data-stu-id="6b895-178">*pfxBlobString*: The based64-encoded string representation of the .pfx file.</span></span> <span data-ttu-id="6b895-179">Gebruik het bovenstaande codefragment en kopieer de tekenreeks in 'exportedcert.pfx.b64'.</span><span class="sxs-lookup"><span data-stu-id="6b895-179">Use the code snippet shown earlier and copy the string contained in "exportedcert.pfx.b64".</span></span> <span data-ttu-id="6b895-180">Plak deze in als de waarde van de *pfxBlobString* kenmerk.</span><span class="sxs-lookup"><span data-stu-id="6b895-180">Paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="6b895-181">*wachtwoord*: het wachtwoord dat wordt gebruikt voor het beveiligen van het pfx-bestand.</span><span class="sxs-lookup"><span data-stu-id="6b895-181">*password*: The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="6b895-182">*certificateThumbprint*: vingerafdruk van het certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-182">*certificateThumbprint*: The certificate's thumbprint.</span></span> <span data-ttu-id="6b895-183">Als u deze waarde wordt opgehaald uit PowerShell (bijvoorbeeld *$certificate. Vingerafdruk* van het vorige codefragment), kunt u de waarde is.</span><span class="sxs-lookup"><span data-stu-id="6b895-183">If you retrieve this value from PowerShell (for example, *$certificate.Thumbprint* from the earlier code snippet), you can use the value as is.</span></span> <span data-ttu-id="6b895-184">Als u de waarde van het dialoogvenster Windows-certificaat kopieert, moet u het verwijderen van overbodige spaties.</span><span class="sxs-lookup"><span data-stu-id="6b895-184">If you copy the value from the Windows certificate dialog box, remember to strip out the extraneous spaces.</span></span> <span data-ttu-id="6b895-185">De *certificateThumbprint* ziet er ongeveer als AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="6b895-185">The *certificateThumbprint* should look something like  AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span></span>
* <span data-ttu-id="6b895-186">*Certificaatnaam*: een beschrijvende tekenreeks-id van uw eigen keuze die worden gebruikt voor de identiteit van het certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-186">*certificateName*: A friendly string identifier of your own choosing used to identity the certificate.</span></span> <span data-ttu-id="6b895-187">De naam wordt gebruikt als onderdeel van de unieke id van de Resource Manager voor de *Microsoft.Web/certificates* entiteit die staat voor het SSL-certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-187">The name is used as part of the unique Resource Manager identifier for the *Microsoft.Web/certificates* entity that represents the SSL certificate.</span></span> <span data-ttu-id="6b895-188">De naam van de *moet* eindigen met het volgende achtervoegsel: \_yourASENameHere_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="6b895-188">The name *must* end with the following suffix: \_yourASENameHere_InternalLoadBalancingASE.</span></span> <span data-ttu-id="6b895-189">De Azure-portal gebruikt dit achtervoegsel als een indicatie dat het certificaat wordt gebruikt voor het beveiligen van een as ingeschakeld met een ILB-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-189">The Azure portal uses this suffix as an indicator that the certificate is used to secure an ILB-enabled ASE.</span></span>

<span data-ttu-id="6b895-190">Een afgekorte voorbeeld van *azuredeploy.parameters.json* Hier wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="6b895-190">An abbreviated example of *azuredeploy.parameters.json* is shown here:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="6b895-191">Na de *azuredeploy.parameters.json* bestand is ingevuld, wordt het standaard SSL-certificaat configureren met behulp van het PowerShell-codefragment.</span><span class="sxs-lookup"><span data-stu-id="6b895-191">After the *azuredeploy.parameters.json* file is filled in, configure the default SSL certificate by using the PowerShell code snippet.</span></span> <span data-ttu-id="6b895-192">Wijzig de bestandspaden aan waar de Resource Manager-sjabloon-bestanden bevinden zich op uw computer.</span><span class="sxs-lookup"><span data-stu-id="6b895-192">Change the file paths to match where the Resource Manager template files are located on your machine.</span></span> <span data-ttu-id="6b895-193">Vergeet niet uw eigen waarden voor de implementatienaam van Resource Manager en de naam van de resourcegroep opgeven:</span><span class="sxs-lookup"><span data-stu-id="6b895-193">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

     $templatePath="PATH\azuredeploy.json"
     $parameterPath="PATH\azuredeploy.parameters.json"

     New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="6b895-194">Het duurt ongeveer 40 minuten per as-omgeving front-end de wijziging toepassen.</span><span class="sxs-lookup"><span data-stu-id="6b895-194">It takes roughly 40 minutes per ASE front end to apply the change.</span></span> <span data-ttu-id="6b895-195">Voor een standaardformaat as-omgeving die gebruikmaakt van twee front-ends, duurt de sjabloon bijvoorbeeld ongeveer één uur en 20 minuten om te voltooien.</span><span class="sxs-lookup"><span data-stu-id="6b895-195">For example, for a default-sized ASE that uses two front ends, the template takes around one hour and 20 minutes to complete.</span></span> <span data-ttu-id="6b895-196">Terwijl de sjabloon die wordt uitgevoerd, kan niet de schaal van de as-omgeving.</span><span class="sxs-lookup"><span data-stu-id="6b895-196">While the template is running, the ASE can't scale.</span></span>  

<span data-ttu-id="6b895-197">Nadat de sjabloon is voltooid, kan apps op de as ILB-omgeving kunnen worden benaderd via HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6b895-197">After the template finishes, apps on the ILB ASE can be accessed over HTTPS.</span></span> <span data-ttu-id="6b895-198">De verbindingen zijn beveiligd met behulp van het standaard SSL-certificaat.</span><span class="sxs-lookup"><span data-stu-id="6b895-198">The connections are secured by using the default SSL certificate.</span></span> <span data-ttu-id="6b895-199">Het standaard SSL-certificaat wordt gebruikt wanneer de apps op de as ILB-omgeving worden aangepakt met behulp van een combinatie van naam van de toepassing plus de standaardnaam van de host.</span><span class="sxs-lookup"><span data-stu-id="6b895-199">The default SSL certificate is used when apps on the ILB ASE are addressed by using a combination of the application name plus the default host name.</span></span> <span data-ttu-id="6b895-200">Https://mycustomapp.internal-contoso.com gebruikt bijvoorbeeld de standaard SSL-certificaat voor **.internal contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="6b895-200">For example, https://mycustomapp.internal-contoso.com uses the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="6b895-201">Ontwikkelaars kunnen echter net als bij apps die worden uitgevoerd op de openbare multitenant-service, configureren aangepaste hostnamen voor afzonderlijke apps.</span><span class="sxs-lookup"><span data-stu-id="6b895-201">However, just like apps that run on the public multitenant service, developers can configure custom host names for individual apps.</span></span> <span data-ttu-id="6b895-202">Ze kunnen ook unieke SNI-SSL-certificaatbindingen voor afzonderlijke apps configureren.</span><span class="sxs-lookup"><span data-stu-id="6b895-202">They also can configure unique SNI SSL certificate bindings for individual apps.</span></span>

## <a name="app-service-environment-v1"></a><span data-ttu-id="6b895-203">App Service-omgeving v1</span><span class="sxs-lookup"><span data-stu-id="6b895-203">App Service Environment v1</span></span> ##
<span data-ttu-id="6b895-204">App Service-omgeving zijn er twee versies: ASEv1 en ASEv2.</span><span class="sxs-lookup"><span data-stu-id="6b895-204">App Service Environment has two versions: ASEv1 and ASEv2.</span></span> <span data-ttu-id="6b895-205">De voorgaande informatie is gebaseerd op ASEv2.</span><span class="sxs-lookup"><span data-stu-id="6b895-205">The preceding information was based on ASEv2.</span></span> <span data-ttu-id="6b895-206">Deze sectie leest u de verschillen tussen ASEv1 en ASEv2.</span><span class="sxs-lookup"><span data-stu-id="6b895-206">This section shows you the differences between ASEv1 and ASEv2.</span></span>

<span data-ttu-id="6b895-207">In ASEv1 beheert u alle resources handmatig.</span><span class="sxs-lookup"><span data-stu-id="6b895-207">In ASEv1, you manage all of the resources manually.</span></span> <span data-ttu-id="6b895-208">Dat betekent onder meer de front-ends, werknemers en IP-adressen gebruikt voor SSL op basis van IP.</span><span class="sxs-lookup"><span data-stu-id="6b895-208">That includes the front ends, workers, and IP addresses used for IP-based SSL.</span></span> <span data-ttu-id="6b895-209">Voordat u uw App Service-abonnement uitbreiden kunt, moet u de worker-groep die u wilt deze hosten uitschalen.</span><span class="sxs-lookup"><span data-stu-id="6b895-209">Before you can scale out your App Service plan, you must scale out the worker pool that you want to host it.</span></span>

<span data-ttu-id="6b895-210">ASEv1 maakt gebruik van een andere prijscategorie model uit ASEv2.</span><span class="sxs-lookup"><span data-stu-id="6b895-210">ASEv1 uses a different pricing model from ASEv2.</span></span> <span data-ttu-id="6b895-211">In ASEv1 betaalt u voor elke core toegewezen.</span><span class="sxs-lookup"><span data-stu-id="6b895-211">In ASEv1, you pay for each core allocated.</span></span> <span data-ttu-id="6b895-212">Dat betekent onder meer kernen die worden gebruikt voor de front-ends of workers die werkbelastingen worden niet als host.</span><span class="sxs-lookup"><span data-stu-id="6b895-212">That includes cores that are used for front ends or workers that aren't hosting any workloads.</span></span> <span data-ttu-id="6b895-213">Grootte van de maximale schaal van een as-omgeving is in ASEv1, 55 totale hosts.</span><span class="sxs-lookup"><span data-stu-id="6b895-213">In ASEv1, the default maximum-scale size of an ASE is 55 total hosts.</span></span> <span data-ttu-id="6b895-214">Die bevat werknemers en -front-ends.</span><span class="sxs-lookup"><span data-stu-id="6b895-214">That includes workers and front ends.</span></span> <span data-ttu-id="6b895-215">Een voordeel ASEv1 is dat deze kan worden geïmplementeerd in een klassiek virtueel netwerk en een virtueel netwerk van Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6b895-215">One advantage to ASEv1 is that it can be deployed in a classic virtual network and a Resource Manager virtual network.</span></span> <span data-ttu-id="6b895-216">Zie voor meer informatie over ASEv1, [App Service-omgeving v1 inleiding][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="6b895-216">To learn more about ASEv1, see [App Service Environment v1 introduction][ASEv1Intro].</span></span>

<span data-ttu-id="6b895-217">Zie voor informatie over het maken van een ASEv1 met behulp van een Resource Manager-sjabloon [een v1 ILB as-omgeving maken met Resource Manager-sjabloon][ILBASEv1Template].</span><span class="sxs-lookup"><span data-stu-id="6b895-217">To create an ASEv1 by using a Resource Manager template, see [Create an ILB ASE v1 with a Resource Manager template][ILBASEv1Template].</span></span>


<!--Links-->
[quickstartilbasecreate]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-ilb-create
[quickstartasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-create
[quickstartconfiguressl]: http://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl
[quickstartwebapponasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asp-app-on-asev2-create
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ILBASEv1Template]: ../../app-service-web/app-service-app-service-environment-create-ilb-ase-resourcemanager.md
