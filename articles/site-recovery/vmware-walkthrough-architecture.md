---
title: aaaReview hello architectuur voor VMware replicatie tooAzure | Microsoft Docs
description: In dit artikel biedt een overzicht van de onderdelen en de architectuur die wordt gebruikt bij het repliceren van de lokale virtuele VMware-machines tooAzure Hello Azure Site Recovery-service
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27.017
ms.author: raynew
ms.openlocfilehash: 7acb1d8e83a846dca79e175fd1af9324f2c31e65
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="step-1-review-hello-architecture-for-vmware-replication-tooazure"></a><span data-ttu-id="06106-103">Stap 1: Bekijk Hallo-architectuur voor VMware replicatie tooAzure</span><span class="sxs-lookup"><span data-stu-id="06106-103">Step 1: Review hello architecture for VMware replication tooAzure</span></span>

<span data-ttu-id="06106-104">Dit artikel wordt beschreven Hallo-onderdelen en -processen die worden gebruikt bij het repliceren van lokale VMware virtuele machines tooAzure Hallo met [Azure Site Recovery](site-recovery-overview.md) service.</span><span class="sxs-lookup"><span data-stu-id="06106-104">This article describes hello components and processes used when replicating on-premises VMware virtual machines tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="06106-105">Eventuele opmerkingen onder Hallo van dit artikel plaatsen of vragen in Hallo [Azure Recovery Services-Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="06106-105">Post any comments at hello bottom of this article, or ask questions in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="06106-106">Architectuuronderdelen</span><span class="sxs-lookup"><span data-stu-id="06106-106">Architectural components</span></span>

<span data-ttu-id="06106-107">Hallo-tabel ziet u Hallo-onderdelen die u nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="06106-107">hello table summarizes hello components you need.</span></span>

<span data-ttu-id="06106-108">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="06106-108">**Component**</span></span> | <span data-ttu-id="06106-109">**Vereiste**</span><span class="sxs-lookup"><span data-stu-id="06106-109">**Requirement**</span></span> | <span data-ttu-id="06106-110">**Details**</span><span class="sxs-lookup"><span data-stu-id="06106-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="06106-111">**Azure**</span><span class="sxs-lookup"><span data-stu-id="06106-111">**Azure**</span></span> | <span data-ttu-id="06106-112">U moet een Azure-abonnement, Azure storage-account en een Azure-netwerk.</span><span class="sxs-lookup"><span data-stu-id="06106-112">You need an Azure subscription, an Azure storage account, and an Azure network.</span></span> | <span data-ttu-id="06106-113">Gerepliceerde gegevens worden opgeslagen in Hallo storage-account.</span><span class="sxs-lookup"><span data-stu-id="06106-113">Replicated data is stored in hello storage account.</span></span> <span data-ttu-id="06106-114">Virtuele machines in Azure worden gemaakt met de Hallo gerepliceerde gegevens bij een storing van uw on-premises site.</span><span class="sxs-lookup"><span data-stu-id="06106-114">Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span> <span data-ttu-id="06106-115">Hallo virtuele Azure-machines verbinding toohello virtuele Azure-netwerk maken wanneer ze worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="06106-115">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="06106-116">**Configuratieserver**</span><span class="sxs-lookup"><span data-stu-id="06106-116">**Configuration server**</span></span> | <span data-ttu-id="06106-117">Een enkel lokale beheerserver (VMware VM) die wordt uitgevoerd van alle Hallo lokale onderdelen van Site Recovery voor Hallo-implementatie.</span><span class="sxs-lookup"><span data-stu-id="06106-117">A single on-premises management server (VMware VM) that runs all hello on-premises Site Recovery components for hello deployment.</span></span> <span data-ttu-id="06106-118">Het gaat hierbij om een configuratieserver, de processerver, de hoofddoelserver.</span><span class="sxs-lookup"><span data-stu-id="06106-118">These include a configuration server, process server, master target server.</span></span> | <span data-ttu-id="06106-119">Hallo configuratieserveronderdeel coördineert de communicatie tussen de on-premises en Azure en beheert gegevensreplicatie.</span><span class="sxs-lookup"><span data-stu-id="06106-119">hello configuration server component coordinates communications between on-premises and Azure, and manages data replication.</span></span>
 <span data-ttu-id="06106-120">**Processerver**:</span><span class="sxs-lookup"><span data-stu-id="06106-120">**Process server**:</span></span>  | <span data-ttu-id="06106-121">Op de configuratieserver Hallo standaard geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="06106-121">Installed by default on hello configuration server.</span></span> | <span data-ttu-id="06106-122">Fungeert als replicatiegateway.</span><span class="sxs-lookup"><span data-stu-id="06106-122">Acts as a replication gateway.</span></span> <span data-ttu-id="06106-123">Replicatiegegevens ontvangt, optimaliseert met caching, compressie en codering en verzendt het tooAzure opslag.</span><span class="sxs-lookup"><span data-stu-id="06106-123">Receives replication data, optimizes it with caching, compression, and encryption, and sends it tooAzure storage.</span></span><br/><br/> <span data-ttu-id="06106-124">Hallo processerver ook push-installatie van de machines tooprotected Hallo Mobility-service verwerkt en wordt automatische detectie van virtuele VMware-machines uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="06106-124">hello process server also handles push installation of hello Mobility service tooprotected machines, and performs automatic discovery of VMware VMs.</span></span><br/><br/> <span data-ttu-id="06106-125">Naarmate uw implementatie groeit, kunt u extra, afzonderlijk toegewezen proces servers toohandle grotere hoeveelheden replicatieverkeer kunt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="06106-125">As your deployment grows you can add additional separate dedicated process servers toohandle increasing volumes of replication traffic.</span></span>
 <span data-ttu-id="06106-126">**Hoofddoelserver**</span><span class="sxs-lookup"><span data-stu-id="06106-126">**Master target server**</span></span> | <span data-ttu-id="06106-127">Standaard geïnstalleerd op Hallo lokale configuratie-server.</span><span class="sxs-lookup"><span data-stu-id="06106-127">Installed by default on hello on-premises configuration server.</span></span> | <span data-ttu-id="06106-128">Hier worden de replicatiegegevens tijdens de failback vanuit Azure afgehandeld.</span><span class="sxs-lookup"><span data-stu-id="06106-128">Handles replication data during failback from Azure.</span></span><br/><br/> <span data-ttu-id="06106-129">Als de hoeveelheid failbackverkeer hoog is, kunt u een afzonderlijke hoofddoelserver voor failback implementeren.</span><span class="sxs-lookup"><span data-stu-id="06106-129">If volumes of failback traffic are high, you can deploy a separate master target server for failback.</span></span>
<span data-ttu-id="06106-130">**VMware-servers**</span><span class="sxs-lookup"><span data-stu-id="06106-130">**VMware servers**</span></span> | <span data-ttu-id="06106-131">Virtuele VMware-machines worden gehost op vSphere ESXi-servers en het is raadzaam een vCenter server toomanage Hallo-hosts.</span><span class="sxs-lookup"><span data-stu-id="06106-131">VMware VMs are hosted on vSphere ESXi servers, and we recommend a vCenter server toomanage hello hosts.</span></span> | <span data-ttu-id="06106-132">U toevoegen VMware servers tooyour Recovery Services-kluis.</span><span class="sxs-lookup"><span data-stu-id="06106-132">You add VMware servers tooyour Recovery Services vault.</span></span>
<span data-ttu-id="06106-133">**Gerepliceerde machines**</span><span class="sxs-lookup"><span data-stu-id="06106-133">**Replicated machines**</span></span> | <span data-ttu-id="06106-134">Hallo Mobility-service wordt geïnstalleerd op elke VMware VM die u wilt repliceren.</span><span class="sxs-lookup"><span data-stu-id="06106-134">hello Mobility service will be installed on each VMware VM you replicate.</span></span> <span data-ttu-id="06106-135">Dit kan handmatig worden geïnstalleerd op elke computer of met een push-installatie van de processerver Hallo.</span><span class="sxs-lookup"><span data-stu-id="06106-135">It can be installed manually on each machine, or with a push installation from hello process server.</span></span>

<span data-ttu-id="06106-136">**Afbeelding 1: VMware tooAzure onderdelen**</span><span class="sxs-lookup"><span data-stu-id="06106-136">**Figure 1: VMware tooAzure components**</span></span>

![Onderdelen](./media/vmware-walkthrough-architecture/arch-enhanced.png)

## <a name="replication-process"></a><span data-ttu-id="06106-138">Replicatieproces</span><span class="sxs-lookup"><span data-stu-id="06106-138">Replication process</span></span>

1. <span data-ttu-id="06106-139">U instellen kunt het Hallo-implementatie, met inbegrip van on-premises en Azure onderdelen.</span><span class="sxs-lookup"><span data-stu-id="06106-139">You set up hello deployment, including on-premises and Azure components.</span></span> <span data-ttu-id="06106-140">In de Recovery Services-kluis hello geeft u Hallo replicatiebron en doel, instellen van de configuratieserver hello, maak een replicatiebeleid voor, Hallo Mobility-service implementeren, replicatie inschakelen en een testfailover uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="06106-140">In hello Recovery Services vault, you specify hello replication source and target, set up hello configuration server, create a replication policy, deploy hello Mobility service, enable replication, and run a test failover.</span></span>
2. <span data-ttu-id="06106-141">Machines repliceren volgens de Hallo replicatiebeleid en een initiële kopie van het Hallo-gegevens is tooAzure gerepliceerde opslag.</span><span class="sxs-lookup"><span data-stu-id="06106-141">Machines replicate in accordance with hello replication policy, and an initial copy of hello data is replicated tooAzure storage.</span></span>
3. <span data-ttu-id="06106-142">Nadat de initiële replicatie is voltooid, begint de replicatie van verschillen wijzigingen tooAzure.</span><span class="sxs-lookup"><span data-stu-id="06106-142">After initial replication finishes, replication of delta changes tooAzure begins.</span></span> <span data-ttu-id="06106-143">Bijgehouden wijzigingen voor een machine worden opgeslagen in een .hrl-bestand.</span><span class="sxs-lookup"><span data-stu-id="06106-143">Tracked changes for a machine are held in a .hrl file.</span></span>
    - <span data-ttu-id="06106-144">Replicerende machines communiceren met de configuratieserver Hallo op poort 443 voor HTTPS binnenkomend verkeer voor replicatiebeheer.</span><span class="sxs-lookup"><span data-stu-id="06106-144">Replicating machines communicate with hello configuration server on port HTTPS 443 inbound, for replication management.</span></span>
    - <span data-ttu-id="06106-145">Replicerende machines verzenden replicatie gegevens toohello processerver op poort HTTPS 9443 binnenkomende (kan worden aangepast).</span><span class="sxs-lookup"><span data-stu-id="06106-145">Replicating machines send replication data toohello process server on port HTTPS 9443 inbound (can be modified).</span></span>
    - <span data-ttu-id="06106-146">Hallo configuratieserver ingedeeld replicatiebeheer met Azure via poort 443 voor HTTPS uitgaand.</span><span class="sxs-lookup"><span data-stu-id="06106-146">hello configuration server orchestrates replication management with Azure over port HTTPS 443 outbound.</span></span>
    - <span data-ttu-id="06106-147">Hallo processerver ontvangt gegevens van bronmachines, optimaliseert versleutelt en verzendt het tooAzure opslag via poort 443 uitgaand.</span><span class="sxs-lookup"><span data-stu-id="06106-147">hello process server receives data from source machines, optimizes and encrypts it, and sends it tooAzure storage over port 443 outbound.</span></span>
    - <span data-ttu-id="06106-148">Als u de consistentie tussen meerdere VM's inschakelt, klikt u vervolgens communiceren machines in replicatiegroep Hallo met elkaar via poort 20004.</span><span class="sxs-lookup"><span data-stu-id="06106-148">If you enable multi-VM consistency, then machines in hello replication group communicate with each other over port 20004.</span></span> <span data-ttu-id="06106-149">Meerdere VM’s worden gebruikt als u meerdere machines groepeert in de replicatiegroepen die crashconsistent en app-consistent herstelpunten delen bij failover.</span><span class="sxs-lookup"><span data-stu-id="06106-149">Multi-VM is used if you group multiple machines into replication groups that share crash-consistent and app-consistent recovery points when they fail over.</span></span> <span data-ttu-id="06106-150">Dit is handig als machines worden uitgevoerd Hallo dezelfde werkbelasting en toobe consistent nodig.</span><span class="sxs-lookup"><span data-stu-id="06106-150">This is useful if machines are running hello same workload and need toobe consistent.</span></span>
4. <span data-ttu-id="06106-151">Verkeer tooAzure gerepliceerde opslag openbare eindpunten, is afgelopen Hallo internet.</span><span class="sxs-lookup"><span data-stu-id="06106-151">Traffic is replicated tooAzure storage public endpoints, over hello internet.</span></span> <span data-ttu-id="06106-152">U kunt ook [openbare peering](../expressroute/expressroute-circuit-peerings.md#public-peering) van Azure ExpressRoute gebruiken.</span><span class="sxs-lookup"><span data-stu-id="06106-152">Alternately, you can use Azure ExpressRoute [public peering](../expressroute/expressroute-circuit-peerings.md#public-peering).</span></span> <span data-ttu-id="06106-153">Het repliceren van verkeer via een VPN site-naar-site van een lokale site tooAzure wordt niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="06106-153">Replicating traffic over a site-to-site VPN from an on-premises site tooAzure isn't supported.</span></span>


<span data-ttu-id="06106-154">**Afbeelding 2: VMware tooAzure replicatie**</span><span class="sxs-lookup"><span data-stu-id="06106-154">**Figure 2: VMware tooAzure replication**</span></span>

![Verbeterd](./media/vmware-walkthrough-architecture/v2a-architecture-henry.png)

## <a name="failover-and-failback-process"></a><span data-ttu-id="06106-156">Failover- en failbackproces</span><span class="sxs-lookup"><span data-stu-id="06106-156">Failover and failback process</span></span>

1. <span data-ttu-id="06106-157">Nadat u dat de testfailover werkt verifieert zoals verwacht, kunt u niet-geplande failovers tooAzure uitvoeren zoals vereist.</span><span class="sxs-lookup"><span data-stu-id="06106-157">After you verify that test failover is working as expected, you can run unplanned failovers tooAzure as required.</span></span> <span data-ttu-id="06106-158">Geplande failover wordt niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="06106-158">Planned failover isn't supported.</span></span>
2. <span data-ttu-id="06106-159">U kunt één machine failover of maken [herstelplannen](site-recovery-create-recovery-plans.md), toofail over meerdere virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="06106-159">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md), toofail over multiple VMs.</span></span>
3. <span data-ttu-id="06106-160">Wanneer u een failover uitvoert, worden er replica-VM's gemaakt in Azure.</span><span class="sxs-lookup"><span data-stu-id="06106-160">When you run a failover, replica VMs are created in Azure.</span></span> <span data-ttu-id="06106-161">U doorvoeren een failover toostart toegang tot Hallo werkbelasting van Hallo replica virtuele machine van Azure.</span><span class="sxs-lookup"><span data-stu-id="06106-161">You commit a failover toostart accessing hello workload from hello replica Azure VM.</span></span>
4. <span data-ttu-id="06106-162">Als uw primaire on-premises site weer beschikbaar is, kunt u een failback uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="06106-162">When your primary on-premises site is available again, you can fail back.</span></span> <span data-ttu-id="06106-163">U een failback-infrastructuur instellen, Hallo machine repliceren vanaf primaire Hallo secundaire site-toohello en een niet-geplande failover uitvoeren van de secundaire site Hallo.</span><span class="sxs-lookup"><span data-stu-id="06106-163">You set up a failback infrastructure, start replicating hello machine from hello secondary site toohello primary, and run an unplanned failover from hello secondary site.</span></span> <span data-ttu-id="06106-164">Nadat u deze failover doorvoert, gegevens worden nu back on-premises en moet u tooenable replicatie tooAzure opnieuw.</span><span class="sxs-lookup"><span data-stu-id="06106-164">After you commit this failover, data will be back on-premises, and you need tooenable replication tooAzure again.</span></span> [<span data-ttu-id="06106-165">Meer informatie</span><span class="sxs-lookup"><span data-stu-id="06106-165">Learn more</span></span>](site-recovery-failback-azure-to-vmware.md)

<span data-ttu-id="06106-166">Er zijn enkele vereisten voor een failback:</span><span class="sxs-lookup"><span data-stu-id="06106-166">There are a few failback requirements:</span></span>


- <span data-ttu-id="06106-167">**Tijdelijke processerver in Azure**: als u wilt dat toofail failback vanuit Azure na een failover moet u tooset van een Azure-VM die is geconfigureerd als processerver, toohandle replicatie van Azure.</span><span class="sxs-lookup"><span data-stu-id="06106-167">**Temporary process server in Azure**: If you want toofail back from Azure after failover you'll need tooset up an Azure VM configured as a process server, toohandle replication from Azure.</span></span> <span data-ttu-id="06106-168">U kunt deze virtuele machine verwijderen wanneer de failback is voltooid.</span><span class="sxs-lookup"><span data-stu-id="06106-168">You can delete this VM after failback finishes.</span></span>
- <span data-ttu-id="06106-169">**VPN-verbinding**: voor failback u moet een VPN-verbinding (of Azure ExpressRoute) instellen uit hello Azure toohello lokale netwerksite.</span><span class="sxs-lookup"><span data-stu-id="06106-169">**VPN connection**: For failback you'll need a VPN connection (or Azure ExpressRoute) set up from hello Azure network toohello on-premises site.</span></span>
- <span data-ttu-id="06106-170">**Afzonderlijke on-premises hoofddoelserver**: Hallo lokale hoofddoelserver wordt de failback afgehandeld.</span><span class="sxs-lookup"><span data-stu-id="06106-170">**Separate on-premises master target server**: hello on-premises master target server handles failback.</span></span> <span data-ttu-id="06106-171">Hallo hoofddoelserver wordt standaard op Hallo-beheerserver geïnstalleerd, maar als u failback van grotere hoeveelheden verkeer bent mislukken moet u instellen een afzonderlijke on-premises hoofddoelserver voor dit doel.</span><span class="sxs-lookup"><span data-stu-id="06106-171">hello master target server is installed by default on hello management server, but if you're failing back larger volumes of traffic you should set up a separate on-premises master target server for this purpose.</span></span>
- <span data-ttu-id="06106-172">**Beleid voor failback**: tooreplicate back tooyour lokale site, moet u een beleid voor failback.</span><span class="sxs-lookup"><span data-stu-id="06106-172">**Failback policy**: tooreplicate back tooyour on-premises site, you need a failback policy.</span></span> <span data-ttu-id="06106-173">Dit wordt automatisch gemaakt wanneer u uw replicatiebeleid maakt.</span><span class="sxs-lookup"><span data-stu-id="06106-173">This is automatically created when you created your replication policy.</span></span>
- <span data-ttu-id="06106-174">**VMware-infrastructuur**: U moet een failback uit op tooan lokale VMware VM.</span><span class="sxs-lookup"><span data-stu-id="06106-174">**VMware infrastructure**: You must fail back tooan on-premises VMware VM.</span></span> <span data-ttu-id="06106-175">Dit betekent dat u moet een on-premises VMware-infrastructuur, zelfs als u lokale fysieke servers tooAzure repliceert.</span><span class="sxs-lookup"><span data-stu-id="06106-175">This means you need an on-premises VMware infrastructure, even if you're replicating on-premises physical servers tooAzure.</span></span>

<span data-ttu-id="06106-176">**Afbeelding 3: failback van VMware/fysieke failback**</span><span class="sxs-lookup"><span data-stu-id="06106-176">**Figure 3: VMware/physical failback**</span></span>

![Failback](./media/vmware-walkthrough-architecture/enhanced-failback.png)


## <a name="next-steps"></a><span data-ttu-id="06106-178">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="06106-178">Next steps</span></span>

<span data-ttu-id="06106-179">Ga te[stap 2: Controleer of de vereisten en beperkingen](vmware-walkthrough-prerequisites.md)</span><span class="sxs-lookup"><span data-stu-id="06106-179">Go too[Step 2: Verify prerequisites and limitations](vmware-walkthrough-prerequisites.md)</span></span>
