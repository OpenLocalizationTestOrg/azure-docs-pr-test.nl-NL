---
title: Plannen voor herstel voor failover en herstel maken in Azure Site Recovery | Microsoft Docs
description: Hierin wordt beschreven hoe u maken en aanpassen van herstelplannen in Azure Site Recovery, failover en virtuele machines en fysieke servers herstellen
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 1b0d64cd592c4738311797b826e490639340f92a
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="7e3eb-103">Herstelplannen maken</span><span class="sxs-lookup"><span data-stu-id="7e3eb-103">Create recovery plans</span></span>


<span data-ttu-id="7e3eb-104">Dit artikel bevat informatie over het maken en aanpassen in de herstelplannen [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7e3eb-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="7e3eb-105">U kunt onder aan dit artikel of op het [Azure Recovery Services-forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr) opmerkingen of vragen plaatsen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-105">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="7e3eb-106">Maak herstelplannen het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="7e3eb-106">Create recovery plans to do the following:</span></span>

* <span data-ttu-id="7e3eb-107">Groepen van de machines die samen een failover en start vervolgens samen definiëren.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="7e3eb-108">Model afhankelijkheden tussen machines, door ze te groeperen samen in een recovery plan groep.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="7e3eb-109">Bijvoorbeeld, failover en online zetten van een bepaalde toepassing is, groeperen u alle van de virtuele machines voor de toepassing naar dezelfde recovery plan groep.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-109">For example, to fail over and bring up a specific application, you group all of the VMs for that application into the same recovery plan group.</span></span>
* <span data-ttu-id="7e3eb-110">Een failover uitvoert.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-110">Run a failover.</span></span> <span data-ttu-id="7e3eb-111">U kunt een test, gepland of niet-geplande failover uitvoeren op een herstelplan.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="7e3eb-112">Een herstelplan maken</span><span class="sxs-lookup"><span data-stu-id="7e3eb-112">Create a recovery plan</span></span>

1. <span data-ttu-id="7e3eb-113">Klik op **herstelplannen** > **herstelplan maken**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="7e3eb-114">Geef een naam voor het herstelplan en een bron en doel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-114">Specify a name for the recovery plan, and a source and target.</span></span> <span data-ttu-id="7e3eb-115">De bronlocatie moet virtuele machines hebt die zijn ingeschakeld voor failover en herstel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-115">The source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="7e3eb-116">Selecteer voor VMM naar VMM replicatie **brontype** > **VMM**, en de bron en doel-VMM-servers.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-116">For VMM to VMM replication, select **Source Type** > **VMM**, and the source and target VMM servers.</span></span> <span data-ttu-id="7e3eb-117">Klik op **Hyper-V** om te zien van clouds die zijn beveiligd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-117">Click **Hyper-V** to see clouds that are protected.</span></span>
    - <span data-ttu-id="7e3eb-118">Selecteer voor VMM naar Azure **brontype** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-118">For VMM to Azure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="7e3eb-119">Selecteer de bron-VMM-beheerserver, en **Azure** als doel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-119">Select the source VMM server, and **Azure** as the target.</span></span>
    - <span data-ttu-id="7e3eb-120">Voor Hyper-V-replicatie naar Azure (zonder VMM), selecteer **brontype** > **Hyper-V-site**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-120">For Hyper-V replication to Azure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="7e3eb-121">Selecteer de site als de bron en **Azure** als doel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-121">Select the site as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="7e3eb-122">Voor een VMware-VM of een fysieke on-premises server maken in Azure, selecteert u een configuratieserver als de bron en **Azure** als doel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-122">For a VMware VM or a physical on-premises server to Azure, select a configuration server as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="7e3eb-123">Selecteer een Azure-regio als de bron- en een secundair Azure-regio als het doel voor een herstelplan van Azure naar Azure.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-123">For a Azure to Azure recovery plan, select a Azure region as the source, and a secondary Azure region as the target.</span></span> <span data-ttu-id="7e3eb-124">Secundaire Azure-regio's zijn alleen degenen die virtuele machines worden beveiligd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-124">The secondary Azure regions are only those to which virtual machines are protected.</span></span>
2. <span data-ttu-id="7e3eb-125">In **virtuele machines selecteren**, selecteer de virtuele machines (of replicatiegroep) die u wilt toevoegen aan de standaardgroep (groep 1) in het herstelplan.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-125">In **Select virtual machines**, select the virtual machines (or replication group) that you want to add to the default group (Group 1) in the recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="7e3eb-126">Aanpassen en uitbreiden herstelplannen</span><span class="sxs-lookup"><span data-stu-id="7e3eb-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="7e3eb-127">U kunt aanpassen en uitbreiden herstelplannen:</span><span class="sxs-lookup"><span data-stu-id="7e3eb-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="7e3eb-128">**Nieuwe groepen toevoegen**: aanvullende herstelpunten planningsgroepen (maximaal zeven) toevoegen aan de standaardgroep en voeg vervolgens meer machines of replicatiegroepen aan deze herstelgroepen-plan.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-128">**Add new groups**—Add additional recovery plan groups (up to seven) to the default group, and then add more machines or replication groups to those recovery plan groups.</span></span> <span data-ttu-id="7e3eb-129">Groepen worden genummerd in de volgorde waarin u ze toevoegt.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-129">Groups are numbered in the order in which you add them.</span></span> <span data-ttu-id="7e3eb-130">Een virtuele machine of de replicatiegroep, kan alleen worden opgenomen in één herstelpunt plan groep.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="7e3eb-131">**Toevoegen van een handmatige actie**— u handmatige acties die worden uitgevoerd vóór of na een groep voor gegevensherstel abonnement kunt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="7e3eb-132">Wanneer het herstelplan wordt uitgevoerd, stopt hij op het punt waar u de handmatige actie ingevoegd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-132">When the recovery plan runs, it stops at the point at which you inserted the manual action.</span></span> <span data-ttu-id="7e3eb-133">Een dialoogvenster vraagt u om op te geven dat de handmatige actie is voltooid.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-133">A dialog box prompts you to specify that the manual action was completed.</span></span>
- <span data-ttu-id="7e3eb-134">**Een script toevoegen**— u kunt scripts toevoegen die worden uitgevoerd vóór of na een groep voor gegevensherstel plannen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="7e3eb-135">Wanneer u een script toevoegt, wordt een nieuwe reeks handelingen voor de groep toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-135">When you add a script, it adds a new set of actions for the group.</span></span> <span data-ttu-id="7e3eb-136">Bijvoorbeeld, een reeks vooraf stappen voor het groep 1 wordt gemaakt met de naam: groep 1: vooraf stappen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-136">For example, a set of pre-steps for Group 1 will be created with the name: Group 1: pre-steps.</span></span> <span data-ttu-id="7e3eb-137">Stappen voor alle vooraf wordt vermeld in deze set.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="7e3eb-138">U kunt alleen een script toevoegen op de primaire site hebt u een VMM-server geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-138">You can only add a script on the primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="7e3eb-139">**Toevoegen van Azure-runbooks**— u kunt herstelplannen met Azure runbooks uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="7e3eb-140">Bijvoorbeeld, om taken te automatiseren, of één stap herstel maken.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-140">For example, to automate tasks, or to create single-step recovery.</span></span> <span data-ttu-id="7e3eb-141">[Meer informatie](site-recovery-runbook-automation.md).</span><span class="sxs-lookup"><span data-stu-id="7e3eb-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="7e3eb-142">Voeg scripts toe</span><span class="sxs-lookup"><span data-stu-id="7e3eb-142">Add scripts</span></span>

<span data-ttu-id="7e3eb-143">U kunt de PowerShell-scripts gebruiken in uw plannen voor herstel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="7e3eb-144">Zorg ervoor dat de scripts trycatch-blokken gebruiken zodat de uitzonderingen probleemloos worden afgehandeld.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-144">Ensure that scripts use try-catch blocks so that the exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="7e3eb-145">Er is een uitzondering opgetreden in het script, niet meer wordt uitgevoerd als de taak wordt weergegeven als mislukt.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-145">If there is an exception in the script, it stops running and the task shows as failed.</span></span>
    - <span data-ttu-id="7e3eb-146">Als een fout optreedt, worden eventuele resterende deel van het script niet uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-146">If an error occurs, any remaining part of the script doesn't run.</span></span>
    - <span data-ttu-id="7e3eb-147">Als er een fout optreedt wanneer u een niet-geplande failover uitvoert, blijft het herstelplan.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-147">If an error occurs when you run an unplanned failover, the recovery plan continues.</span></span>
    - <span data-ttu-id="7e3eb-148">Als een fout optreedt wanneer u een geplande failover uitvoert, wordt het herstelplan gestopt.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-148">If an error occurs when you run a planned failover, the recovery plan stops.</span></span> <span data-ttu-id="7e3eb-149">U moet oplossen van het script, Controleer of deze wordt uitgevoerd zoals verwacht en het herstelplan opnieuw uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-149">You need to fix the script, check that it runs as expected, and then run the recovery plan again.</span></span>
- <span data-ttu-id="7e3eb-150">De Write-Host-opdracht werkt niet in een herstelplanscript en het script mislukken.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-150">The Write-Host command doesn’t work in a recovery plan script, and the script will fail.</span></span> <span data-ttu-id="7e3eb-151">Maak een proxyscript dat op zijn beurt uw belangrijkste script wordt uitgevoerd voor het maken van de uitvoer.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-151">To create output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="7e3eb-152">Zorg ervoor dat alle uitvoer wordt doorgegeven om via de >> opdracht.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-152">Make sure that all output is piped out using the >> command.</span></span>
  * <span data-ttu-id="7e3eb-153">Het script wordt geblokkeerd als er binnen 600 seconden wordt niet geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-153">The script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="7e3eb-154">Als is geschreven in STDERR, wordt het script wordt geclassificeerd als is mislukt.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-154">If anything is written out to STDERR, the script is classified as failed.</span></span> <span data-ttu-id="7e3eb-155">Deze informatie wordt weergegeven in de details van de uitvoering van script.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-155">This information is displayed in the script execution details.</span></span>

<span data-ttu-id="7e3eb-156">Als u VMM in uw implementatie:</span><span class="sxs-lookup"><span data-stu-id="7e3eb-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="7e3eb-157">Scripts in een herstelplan worden uitgevoerd in de context van de VMM-serviceaccount.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-157">Scripts in a recovery plan run in the context of the VMM Service account.</span></span> <span data-ttu-id="7e3eb-158">Zorg ervoor dat dit account heeft leesrechten nodig voor de externe share waarop het script zich bevindt.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-158">Make sure this account has Read permissions for the remote share on which the script is located.</span></span> <span data-ttu-id="7e3eb-159">Het script wilt uitvoeren op de VMM-service-account machtigingsniveau testen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-159">Test the script to run at the VMM service account privilege level.</span></span>
* <span data-ttu-id="7e3eb-160">VMM-cmdlets worden in Windows PowerShell-module geleverd.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="7e3eb-161">De module wordt geïnstalleerd wanneer u de VMM-console installeren.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-161">The module is installed when you install the VMM console.</span></span> <span data-ttu-id="7e3eb-162">Het kan in uw script met de volgende opdracht in het script worden geladen:</span><span class="sxs-lookup"><span data-stu-id="7e3eb-162">It can be loaded into your script, using the following command in the script:</span></span>
   - <span data-ttu-id="7e3eb-163">Import-Module-naam beheer voor virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="7e3eb-164">[Meer informatie](https://technet.microsoft.com/library/hh875013.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e3eb-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="7e3eb-165">Zorg ervoor dat er ten minste één bibliotheekserver in uw VMM-implementatie.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="7e3eb-166">Standaard het bibliotheeksharepad voor een VMM-server zich lokaal op de VMM-server met de naam van de map MSCVMMLibrary.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-166">By default, the library share path for a VMM server is located locally on the VMM server, with the folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="7e3eb-167">Als uw bibliotheeksharepad externe (of lokale maar niet gedeeld met MSCVMMLibrary), de share als volgt configureren (met behulp van \\libserver2.contoso.com\share\ als voorbeeld):</span><span class="sxs-lookup"><span data-stu-id="7e3eb-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure the share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="7e3eb-168">Open de Register-Editor en navigeer naar **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-168">Open the Registry Editor and navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="7e3eb-169">Bewerk de waarde **ScriptLibraryPath** en plaats deze als \\libserver2.contoso.com\share\.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-169">Edit the value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="7e3eb-170">Geef de volledige FQDN.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-170">Specify the full FQDN.</span></span> <span data-ttu-id="7e3eb-171">Machtigingen opgeven voor de bestandsshare-locatie.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-171">Provide permissions to the share location.</span></span>
      * <span data-ttu-id="7e3eb-172">Zorg ervoor dat u een gebruikersaccount met dezelfde machtigingen als de VMM-serviceaccount voor het script test.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-172">Ensure that you test the script with a user account that has the same permissions as the VMM service account.</span></span> <span data-ttu-id="7e3eb-173">Controleert dit of zelfstandige scripts uitvoeren op dezelfde manier uit als op de herstelplannen getest.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-173">This checks that standalone tested scripts run in the same way as they will in recovery plans.</span></span> <span data-ttu-id="7e3eb-174">Op de VMM-beheerserver, stel het uitvoerbeleid om over te slaan als volgt:</span><span class="sxs-lookup"><span data-stu-id="7e3eb-174">On the VMM server, set the execution policy to bypass as follows:</span></span>
        * <span data-ttu-id="7e3eb-175">Open de 64-bits Windows PowerShell-console met verhoogde bevoegdheden.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-175">Open the 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="7e3eb-176">Type: **Set-executionpolicy bypass**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="7e3eb-177">[Meer informatie](https://technet.microsoft.com/library/ee176961.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e3eb-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-to-a-plan"></a><span data-ttu-id="7e3eb-178">Een script of handmatige actie toevoegen aan een plan</span><span class="sxs-lookup"><span data-stu-id="7e3eb-178">Add a script or manual action to a plan</span></span>

<span data-ttu-id="7e3eb-179">Nadat u hebt toegevoegd virtuele machines of replicatiegroepen en het plan gemaakt, kunt u een script toevoegen aan de standaardgroep voor het plannen van herstel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-179">You can add a script to the default recovery plan group after you've added VMs or replication groups to it, and created the plan.</span></span>

1. <span data-ttu-id="7e3eb-180">Open het herstelplan.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-180">Open the recovery plan.</span></span>
2. <span data-ttu-id="7e3eb-181">Klik op een item in de **stap** lijst en klik vervolgens op **Script** of **handmatige actie**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-181">Click an item in the **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="7e3eb-182">Geef op of het script of actie vóór of na het geselecteerde item wilt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-182">Specify whether to want to add the script or action before or after the selected item.</span></span> <span data-ttu-id="7e3eb-183">Gebruik de **omhoog** en **omlaag** knoppen op de positie van het script omhoog of omlaag verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-183">Use the **Move Up** and **Move Down**  buttons, to move the position of the script up or down.</span></span>
4. <span data-ttu-id="7e3eb-184">Als u een VMM-script toevoegen, selecteert u **Failover naar VMM script**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-184">If you add a VMM script, select **Failover to VMM script**.</span></span> <span data-ttu-id="7e3eb-185">In **scriptpad**, typ het relatieve pad naar de share.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-185">In **Script Path**, type the relative path to the share.</span></span> <span data-ttu-id="7e3eb-186">In het onderstaande voorbeeld VMM geeft u het pad: **\RPScripts\RPScript.PS1**.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-186">In the VMM example below, you specify the path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="7e3eb-187">Als u een Azure automation-boek uitvoeren toevoegt, geef de Azure Automation-account waarin het runbook zich bevindt en het juiste Azure runbookscript te selecteren.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-187">If you add an Azure automation run book, specify the Azure Automation account in which the runbook is located, and select the appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="7e3eb-188">Voer een failover van het herstelplan om ervoor te zorgen dat het script werkt zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-188">Do a failover of the recovery plan, to make sure the script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="7e3eb-189">Een VMM-script toevoegen</span><span class="sxs-lookup"><span data-stu-id="7e3eb-189">Add a VMM script</span></span>

<span data-ttu-id="7e3eb-190">Hebt u een VMM-bronsite, kunt u een script op de VMM-beheerserver maken en deze opnemen in uw plan voor herstel.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-190">If you have a VMM source site, you can create a script on the VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="7e3eb-191">Maak een nieuwe map in de bibliotheekshare.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-191">Create a new folder in the library share.</span></span> <span data-ttu-id="7e3eb-192">Bijvoorbeeld: \<VMMServerName > \MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="7e3eb-193">Plaats het op de bron en doel van de VMM-servers.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-193">Place it on the source and target VMM servers.</span></span>
2. <span data-ttu-id="7e3eb-194">Het script (bijvoorbeeld RPScript) maken en controleren van de dat test werkt zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-194">Create the script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="7e3eb-195">Het script op de locatie plaatsen \<VMMServerName > \MSSCVMMLibrary op de bron en doel-VMM-servers.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-195">Place the script in the location \<VMMServerName>\MSSCVMMLibrary, on the source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="7e3eb-196">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="7e3eb-196">Next steps</span></span>

<span data-ttu-id="7e3eb-197">[Meer informatie](site-recovery-failover.md) over het uitvoeren van failovers.</span><span class="sxs-lookup"><span data-stu-id="7e3eb-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>
