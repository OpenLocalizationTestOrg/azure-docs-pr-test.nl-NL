---
ms.assetid: 
title: Azure Sleutelkluis voorlopig verwijderen | Microsoft Docs
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: c873b153ef9c7d5f55672a5918c9dc4fb7256701
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="6d1bb-102">Overzicht van Azure Sleutelkluis voorlopig verwijderen</span><span class="sxs-lookup"><span data-stu-id="6d1bb-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="6d1bb-103">Functie van de voorlopig verwijderen van de Sleutelkluis kunt herstel van de verwijderde kluizen en objecten van de kluis, bekend als voorlopig verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-103">Key Vault's soft delete feature allows recovery of the deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="6d1bb-104">In het bijzonder houden we de volgende scenario's:</span><span class="sxs-lookup"><span data-stu-id="6d1bb-104">Specifically, we address the following scenarios:</span></span>

- <span data-ttu-id="6d1bb-105">Ondersteuning voor herstelbare verwijdering van een sleutelkluis</span><span class="sxs-lookup"><span data-stu-id="6d1bb-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="6d1bb-106">Ondersteuning voor herstelbare verwijderen van sleutelkluis-objecten (ex.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="6d1bb-107">sleutels, geheimen, certificaten)</span><span class="sxs-lookup"><span data-stu-id="6d1bb-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="6d1bb-108">Interfaces ondersteunen</span><span class="sxs-lookup"><span data-stu-id="6d1bb-108">Supporting interfaces</span></span>

<span data-ttu-id="6d1bb-109">De functie voor voorlopig verwijderen is in eerste instantie beschikbaar via de REST, .NET / C# en PowerShell-interfaces.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-109">The soft-delete feature is initially available through the REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="6d1bb-110">Raadpleeg de verwijzingen van deze voor meer informatie [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="6d1bb-110">Refer to the references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="6d1bb-111">Scenario's</span><span class="sxs-lookup"><span data-stu-id="6d1bb-111">Scenarios</span></span>

<span data-ttu-id="6d1bb-112">Azure sleutel kluizen worden bijgehouden resources, beheerd door Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="6d1bb-113">Azure Resource Manager bevat ook een goed gedefinieerde gedrag voor verwijdering, die vereist dat een geslaagde verwijderbewerking moet resulteren in die resource niet meer wordt toegankelijk.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="6d1bb-114">De functie voor voorlopig verwijderen heeft betrekking op het herstel van het verwijderde object of de verwijdering per ongeluk of opzettelijk is.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-114">The soft-delete feature addresses the recovery of the deleted object, whether the deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="6d1bb-115">In het typische scenario, een gebruiker mogelijk per ongeluk verwijderd een sleutelkluis of een sleutelkluis-object. Als die sleutel kluis of sleutel kluis object zou worden hersteld voor een vooraf bepaalde periode, de gebruiker kan de verwijdering ongedaan maken en hun gegevens herstellen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-115">In the typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were to be recoverable for a predetermined period, the user may undo the deletion and recover their data.</span></span>

2. <span data-ttu-id="6d1bb-116">Een malafide gebruiker kan in een ander scenario proberen om een sleutelkluis of een object van de sleutelkluis, zoals een sleutel in een kluis, om te leiden tot een onderbreking van de zakelijke te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-116">In a different scenario, a rogue user may attempt to delete a key vault or a key vault object, such as a key inside a vault, to cause a business disruption.</span></span> <span data-ttu-id="6d1bb-117">Het verwijderen van de sleutelkluis-object van de sleutelkluis of scheiden van de werkelijke verwijdering van de onderliggende gegevens kan worden gebruikt als veiligheidsmaatregel door, bijvoorbeeld rol beperken van machtigingen voor het verwijderen van de gegevens naar een andere vertrouwde.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-117">Separating the deletion of the key vault or key vault object from the actual deletion of the underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion to a different, trusted role.</span></span> <span data-ttu-id="6d1bb-118">Deze benadering vergt effectief quorum voor een bewerking die anders in een onmiddellijke gegevensverlies resulteert mogelijk.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="6d1bb-119">Gedrag voor voorlopig verwijderen</span><span class="sxs-lookup"><span data-stu-id="6d1bb-119">Soft-delete behavior</span></span>

<span data-ttu-id="6d1bb-120">Met deze functie is de DELETE-bewerking op een sleutelkluis of sleutelkluis object een voorlopig verwijderen, de resources effectief te houden voor een bepaalde bewaartermijn tijdens het doorgeven van de weergave of het object is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-120">With this feature, the DELETE operation on a key vault or key vault object is a soft-delete, effectively holding the resources for a given retention period, while giving the appearance that the object is deleted.</span></span> <span data-ttu-id="6d1bb-121">De service verder biedt een mechanisme voor het herstellen van het verwijderde object, de verwijdering in wezen ongedaan te maken.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-121">The service further provides a mechanism for recovering the deleted object, essentially undoing the deletion.</span></span> 

<span data-ttu-id="6d1bb-122">Voorlopig verwijderen is een optionele Sleutelkluis gedrag en is **niet standaard ingeschakeld** in deze release.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="6d1bb-123">Zie voor meer informatie over het inschakelen van voorlopig verwijderen voor uw sleutelkluis, de specifieke instructies in de documentatie voor de interface van uw keuze [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="6d1bb-123">For details on enabling soft-delete for your key vault, see the specific guidance in the reference for the interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="6d1bb-124">Sleutelkluis-herstel</span><span class="sxs-lookup"><span data-stu-id="6d1bb-124">Key vault recovery</span></span>

<span data-ttu-id="6d1bb-125">Bij een sleutelkluis te verwijderen, maakt de service een middel proxy onder het abonnement toe te voegen voldoende metagegevens voor herstel.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-125">Upon deleting a key vault, the service creates a proxy resource under the subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="6d1bb-126">De proxy-bron is een opgeslagen object beschikbaar zijn in dezelfde locatie als de verwijderde sleutelkluis.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-126">The proxy resource is a stored object, available in the same location as the deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="6d1bb-127">Sleutelkluis objectherstel</span><span class="sxs-lookup"><span data-stu-id="6d1bb-127">Key vault object recovery</span></span>

<span data-ttu-id="6d1bb-128">Bij het verwijderen van een object van de sleutelkluis, zoals een sleutel en plaatst de service het object in een verwijderde staat bevindt, waardoor deze niet toegankelijk voor alle bewerkingen voor het ophalen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-128">Upon deleting a key vault object, such as a key, the service will place the object in a deleted state, thus making it inaccessible to any retrieval operations.</span></span> <span data-ttu-id="6d1bb-129">In deze toestand is, kan de sleutelkluis-object alleen worden weergegeven, herstelde of geforceerd/permanent verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-129">While in this state, the key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="6d1bb-130">Sleutelkluis wordt de verwijdering van de onderliggende gegevens voor de sleutelkluis-object voor uitvoering na een vooraf vastgestelde retentie-interval van de verwijderde sleutelkluis of gepland op hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-130">At the same time, Key Vault will schedule the deletion of the underlying data corresponding to the deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="6d1bb-131">De DNS-record die overeenkomt met de kluis is ook behouden voor de duur van de retentie-interval.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-131">The DNS record corresponding to the vault is also retained for the duration of the retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="6d1bb-132">Bewaarperiode voor voorlopig verwijderen</span><span class="sxs-lookup"><span data-stu-id="6d1bb-132">Soft-delete retention period</span></span>

<span data-ttu-id="6d1bb-133">Voorlopig verwijderde bronnen worden bewaard gedurende een bepaalde tijd, 90 dagen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="6d1bb-134">Tijdens het voorlopig verwijderen retentie-interval, de volgende van toepassing:</span><span class="sxs-lookup"><span data-stu-id="6d1bb-134">During the soft-delete retention interval, the following apply:</span></span>

- <span data-ttu-id="6d1bb-135">U kunt alle sleutelkluizen en sleutelkluis-objecten in de voorlopig verwijderen voor uw abonnement, evenals de verwijdering en herstel informatie over deze aanbieden.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-135">You may list all of the key vaults and key vault objects in the soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="6d1bb-136">Alleen gebruikers met speciale machtigingen kunnen verwijderde kluizen aanbieden.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="6d1bb-137">U kunt het beste onze gebruikers een aangepaste beveiligingsrol maken met deze speciale machtigingen voor de verwerking van verwijderde kluizen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="6d1bb-138">Een sleutelkluis met dezelfde naam kan niet worden gemaakt op dezelfde locatie; : een sleutelkluis-object kan niet worden gemaakt in een kluis gegeven als dat sleutelkluis bevat een object met dezelfde naam en deze bevindt zich in een verwijderde staat bevindt</span><span class="sxs-lookup"><span data-stu-id="6d1bb-138">A key vault with the same name cannot be created in the same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with the same name and which is in a deleted state</span></span> 
- <span data-ttu-id="6d1bb-139">Alleen een specifiek bevoegde gebruiker mogelijk een sleutelkluis of sleutelkluis object hersteld door een opdracht herstellen op de overeenkomende resource in de proxy.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on the corresponding proxy resource.</span></span>
    - <span data-ttu-id="6d1bb-140">De gebruiker lid is van de aangepaste rol met de bevoegdheid om een sleutelkluis onder de resourcegroep te maken kunt herstellen de kluis.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-140">The user, member of the custom role, who has the privilege to create a key vault under the resource group can restore the vault.</span></span>
- <span data-ttu-id="6d1bb-141">Alleen een specifiek bevoegde gebruiker mogelijk een sleutelkluis of sleutelkluis-object door uitgifte van een verwijderopdracht op de overeenkomende resource in de proxy geforceerd verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on the corresponding proxy resource.</span></span>

<span data-ttu-id="6d1bb-142">Tenzij een sleutelkluis of sleutelkluis-object is hersteld, aan het einde van de retentie-interval dat de service uitvoert een opschonen van de sleutelkluis voorlopig verwijderde of sleutelkluis-object en de inhoud ervan.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-142">Unless a key vault or key vault object is recovered, at the end of the retention interval the service performs a purge of the soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="6d1bb-143">Verwijderen van de resource kan niet opnieuw worden gepland.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="6d1bb-144">Toegestane opschonen</span><span class="sxs-lookup"><span data-stu-id="6d1bb-144">Permitted purge</span></span>

<span data-ttu-id="6d1bb-145">Permanent verwijderen, verwijderen, wordt een sleutelkluis is mogelijk via een POST-bewerking op de proxy-resource en speciale bevoegdheden vereist.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-145">Permanently deleting, purging, a key vault is possible via a POST operation on the proxy resource and requires special privileges.</span></span> <span data-ttu-id="6d1bb-146">In het algemeen is de eigenaar van het abonnement mogelijk een sleutelkluis verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-146">Generally, only the subscription owner will be able to purge a key vault.</span></span> <span data-ttu-id="6d1bb-147">De POST-bewerking activeert de onmiddellijke en onherstelbare verwijdering van deze kluis.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-147">The POST operation triggers the immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="6d1bb-148">Een uitzondering hierop is het geval wanneer het Azure-abonnement is gemarkeerd als *niet kan*.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-148">An exception to this is the case when the Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="6d1bb-149">In dit geval wordt alleen de service voert de werkelijke verwijdering en als een geplande proces gebeurt.</span><span class="sxs-lookup"><span data-stu-id="6d1bb-149">In this case, only the service may then perform the actual deletion, and does so as a scheduled process.</span></span> 



