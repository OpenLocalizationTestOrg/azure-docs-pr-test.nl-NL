---
title: aaaHigh beschikbaarheid en herstel na noodgevallen van SAP HANA in Azure (grote exemplaren) | Microsoft Docs
description: Tot stand brengen voor hoge beschikbaarheid en plan voor herstel na noodgevallen van SAP HANA in Azure (grote exemplaren).
services: virtual-machines-linux
documentationcenter: 
author: RicksterCDN
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 12/01/2016
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0c0967f54cf29bbb275eb7cda9d36608488add9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-large-instances-high-availability-and-disaster-recovery-on-azure"></a><span data-ttu-id="ba701-103">SAP HANA (grote exemplaren) hoge beschikbaarheid en herstel na noodgevallen in Azure</span><span class="sxs-lookup"><span data-stu-id="ba701-103">SAP HANA (large instances) high availability and disaster recovery on Azure</span></span> 

<span data-ttu-id="ba701-104">Hoge beschikbaarheid en herstel na noodgevallen zijn belangrijke aspecten van uw bedrijfskritieke SAP HANA worden uitgevoerd op Azure (grote exemplaren)-servers.</span><span class="sxs-lookup"><span data-stu-id="ba701-104">High availability and disaster recovery are important aspects of running your mission-critical SAP HANA on Azure (large instances) servers.</span></span> <span data-ttu-id="ba701-105">De belangrijke toowork met SAP, uw system integrator, of Microsoft tooproperly architect en implementeer Hallo rechts high-availability/herstel na noodgevallen-strategie.</span><span class="sxs-lookup"><span data-stu-id="ba701-105">It's important toowork with SAP, your system integrator, or Microsoft tooproperly architect and implement hello right high-availability/disaster-recovery strategy.</span></span> <span data-ttu-id="ba701-106">Het is ook belangrijk tooconsider Hallo beoogd herstelpunt en beoogde hersteltijd, specifieke tooyour omgeving worden.</span><span class="sxs-lookup"><span data-stu-id="ba701-106">It is also important tooconsider hello recovery point objective and recovery time objective, which are specific tooyour environment.</span></span>

## <a name="high-availability"></a><span data-ttu-id="ba701-107">Hoge beschikbaarheid</span><span class="sxs-lookup"><span data-stu-id="ba701-107">High availability</span></span>

<span data-ttu-id="ba701-108">Microsoft ondersteunt SAP HANA hoge beschikbaarheid methoden 'out van Hallo vak' waaronder:</span><span class="sxs-lookup"><span data-stu-id="ba701-108">Microsoft supports SAP HANA high-availability methods "out of hello box," which include:</span></span>

- <span data-ttu-id="ba701-109">**Storage-replicatie:** Hallo van opslagsysteem mogelijkheid tooreplicate alle gegevenslocatie tooanother (binnen of apart, Hallo hetzelfde datacenter).</span><span class="sxs-lookup"><span data-stu-id="ba701-109">**Storage replication:** hello storage system's ability tooreplicate all data tooanother location (within, or separate from, hello same datacenter).</span></span> <span data-ttu-id="ba701-110">SAP HANA werkt onafhankelijk van deze methode.</span><span class="sxs-lookup"><span data-stu-id="ba701-110">SAP HANA operates independently of this method.</span></span>
- <span data-ttu-id="ba701-111">**HANA system replication:** Hallo van replicatie van alle gegevens in SAP HANA tooa afzonderlijke SAP HANA-systeem.</span><span class="sxs-lookup"><span data-stu-id="ba701-111">**HANA system replication:** hello replication of all data in SAP HANA tooa separate SAP HANA system.</span></span> <span data-ttu-id="ba701-112">Hallo beoogde hersteltijd wordt geminimaliseerd door middel van gegevensreplicatie met regelmatige tussenpozen.</span><span class="sxs-lookup"><span data-stu-id="ba701-112">hello recovery time objective is minimized through data replication at regular intervals.</span></span> <span data-ttu-id="ba701-113">SAP HANA ondersteunt asynchrone, synchrone in het geheugen en synchrone modus (alleen aanbevolen voor SAP HANA systemen die binnen hetzelfde datacenter of minder dan 100 KM elkaar Hallo).</span><span class="sxs-lookup"><span data-stu-id="ba701-113">SAP HANA supports asynchronous, synchronous in-memory, and synchronous modes (recommended only for SAP HANA systems that are within hello same datacenter or less than 100 KM apart).</span></span> <span data-ttu-id="ba701-114">In de huidige ontwerp Hallo HANA grote exemplaar stempels, kan de HANA system replicatie voor hoge beschikbaarheid alleen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ba701-114">In hello current design of HANA large-instance stamps, HANA system replication can be used for high availability only.</span></span>
- <span data-ttu-id="ba701-115">**Automatische failover hosten:** een lokale fout herstel oplossing toouse als een alternatieve toosystem-replicatie.</span><span class="sxs-lookup"><span data-stu-id="ba701-115">**Host auto-failover:** A local fault-recovery solution toouse as an alternative toosystem replication.</span></span> <span data-ttu-id="ba701-116">Wanneer Hallo hoofdknooppunt niet meer beschikbaar is, een of meer stand-by SAP HANA-knooppunten zijn geconfigureerd in de modus voor scale-out en SAP HANA automatisch failover tooanother knooppunt wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-116">When hello master node becomes unavailable, one or more standby SAP HANA nodes are configured in scale-out mode and SAP HANA automatically fails over tooanother node.</span></span>

<span data-ttu-id="ba701-117">Zie voor meer informatie over hoge beschikbaarheid voor SAP HANA Hallo SAP-gegevens te volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-117">For more information on SAP HANA high availability, see hello following SAP information:</span></span>

- [<span data-ttu-id="ba701-118">Technisch document SAP HANA hoge beschikbaarheid</span><span class="sxs-lookup"><span data-stu-id="ba701-118">SAP HANA High-Availability Whitepaper</span></span>](http://go.sap.com/documents/2016/05/f8e5eeba-737c-0010-82c7-eda71af511fa.html)
- [<span data-ttu-id="ba701-119">Handleiding voor SAP HANA-beheer</span><span class="sxs-lookup"><span data-stu-id="ba701-119">SAP HANA Administration Guide</span></span>](http://help.sap.com/hana/SAP_HANA_Administration_Guide_en.pdf)
- [<span data-ttu-id="ba701-120">SAP Academy Video voor SAP HANA System replicatie</span><span class="sxs-lookup"><span data-stu-id="ba701-120">SAP Academy Video on SAP HANA System Replication</span></span>](http://scn.sap.com/community/hana-in-memory/blog/2015/05/19/sap-hana-system-replication)
- [<span data-ttu-id="ba701-121">SAP-notitie ondersteuning #1999880: veelgestelde vragen over SAP HANA System Replication</span><span class="sxs-lookup"><span data-stu-id="ba701-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication</span></span>](https://bcs.wdf.sap.corp/sap/support/notes/1999880)
- <span data-ttu-id="ba701-122">[SAP-ondersteuning Opmerking #2165547 – SAP HANA back-up en herstel binnen replicatieomgeving voor SAP HANA-systeem](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span><span class="sxs-lookup"><span data-stu-id="ba701-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span></span>
- <span data-ttu-id="ba701-123">[SAP-notitie ondersteuning #1984882 – met SAP HANA System replicatie voor Hardware-uitwisseling met minimale/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span><span class="sxs-lookup"><span data-stu-id="ba701-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="ba701-124">Herstel na noodgevallen</span><span class="sxs-lookup"><span data-stu-id="ba701-124">Disaster recovery</span></span>

<span data-ttu-id="ba701-125">SAP HANA in Azure (grote exemplaren) wordt aangeboden in twee Azure-regio's in een geopolitieke regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-125">SAP HANA on Azure (large instances) is offered in two Azure regions in a geopolitical region.</span></span> <span data-ttu-id="ba701-126">Is een rechtstreekse netwerkverbinding voor het repliceren van gegevens tijdens herstel na noodgevallen tussen twee grote exemplaar stempels Hallo van twee verschillende regio's.</span><span class="sxs-lookup"><span data-stu-id="ba701-126">Between hello two large-instance stamps of two different regions is a direct network connectivity for replicating data during disaster recovery.</span></span> <span data-ttu-id="ba701-127">Hallo replicatie van gegevens van de Hallo is opslaginfrastructuur op basis van.</span><span class="sxs-lookup"><span data-stu-id="ba701-127">hello replication of hello data is storage-infrastructure based.</span></span> <span data-ttu-id="ba701-128">Hallo-replicatie is niet standaard uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-128">hello replication is not done by default.</span></span> <span data-ttu-id="ba701-129">Dit geldt voor Hallo klant configuraties die besteld Hallo-noodherstel.</span><span class="sxs-lookup"><span data-stu-id="ba701-129">It is done for hello customer configurations that ordered hello disaster recovery.</span></span> <span data-ttu-id="ba701-130">In het huidige ontwerp hello, kunnen HANA system replicatie kan niet worden gebruikt voor herstel na noodgevallen.</span><span class="sxs-lookup"><span data-stu-id="ba701-130">In hello current design, HANA system replication can't be used for disaster recovery.</span></span>

<span data-ttu-id="ba701-131">Echter tootake profiteren van herstel na noodgevallen hello, hoeft u toostart toodesign Hallo network connectivity toohello twee verschillende Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="ba701-131">However, tootake advantage of hello disaster recovery, you need toostart toodesign hello network connectivity toohello two different Azure regions.</span></span> <span data-ttu-id="ba701-132">toodo geval is, moet u een Azure ExpressRoute-circuit-verbinding van on-premises in uw Azure-regio en een andere circuit verbinding van lokale tooyour herstel na noodgevallen regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-132">toodo so, you need an Azure ExpressRoute circuit connection from on-premises in your main Azure region and another circuit connection from on-premises tooyour disaster-recovery region.</span></span> <span data-ttu-id="ba701-133">Deze meting bevat gewoonlijk een situatie waarin een volledige Azure-regio, met inbegrip van een locatie van Microsoft enterprise edge router (MSEE) een probleem heeft.</span><span class="sxs-lookup"><span data-stu-id="ba701-133">This measure would cover a situation in which a complete Azure region, including a Microsoft enterprise edge router (MSEE) location, has an issue.</span></span>

<span data-ttu-id="ba701-134">Als een tweede maat, kunt u alle virtuele Azure-netwerken die verbinding tooSAP HANA in Azure (grote exemplaren maken) in een Hallo regio's tooboth van de ExpressRoute-circuits.</span><span class="sxs-lookup"><span data-stu-id="ba701-134">As a second measure, you can connect all Azure virtual networks that connect tooSAP HANA on Azure (large instances) in one of hello regions tooboth of those ExpressRoute circuits.</span></span> <span data-ttu-id="ba701-135">Deze meting heeft betrekking op een aanvraag waarin slechts één van Hallo MSEE locaties die uw on-premises locatie met Azure verbindt niet actief gaat.</span><span class="sxs-lookup"><span data-stu-id="ba701-135">This measure addresses a case where only one of hello MSEE locations that connects your on-premises location with Azure goes off duty.</span></span>

<span data-ttu-id="ba701-136">Hallo volgende afbeelding ziet u de optimale configuratie Hallo voor herstel na noodgevallen:</span><span class="sxs-lookup"><span data-stu-id="ba701-136">hello following figure shows hello optimal configuration for disaster recovery:</span></span>

![Optimale configuratie voor herstel na noodgevallen](./media/hana-overview-high-availability-disaster-recovery/image1-optimal-configuration.png)

<span data-ttu-id="ba701-138">Hallo wordt optimale voor een configuratie voor herstel na noodgevallen van Hallo netwerk toohave twee ExpressRoute-circuits van lokale toohello twee verschillende Azure-regio's.</span><span class="sxs-lookup"><span data-stu-id="ba701-138">hello optimal case for a disaster-recovery configuration of hello network is toohave two ExpressRoute circuits from on-premises toohello two different Azure regions.</span></span> <span data-ttu-id="ba701-139">Een circuit gaat tooregion #1, met een exemplaar van de productie.</span><span class="sxs-lookup"><span data-stu-id="ba701-139">One circuit goes tooregion #1, running a production instance.</span></span> <span data-ttu-id="ba701-140">de tweede ExpressRoute-circuit Hallo gaat tooregion #2 sommige exemplaren van niet-productieve HANA uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-140">hello second ExpressRoute circuit goes tooregion #2, running some non-production HANA instances.</span></span> <span data-ttu-id="ba701-141">(Dit is belangrijk als een volledige Azure-regio, met inbegrip van hello MSEE- en datumstempel grote exemplaar, gaat Hallo raster uit).</span><span class="sxs-lookup"><span data-stu-id="ba701-141">(This is important if an entire Azure region, including hello MSEE and large-instance stamp, goes off hello grid.)</span></span>

<span data-ttu-id="ba701-142">Als een tweede maat Hallo verschillende virtuele netwerken zijn verbonden toohello verschillende ExpressRoute-circuits die verbonden tooSAP HANA in Azure (grote exemplaren zijn).</span><span class="sxs-lookup"><span data-stu-id="ba701-142">As a second measure, hello various virtual networks are connected toohello various ExpressRoute circuits that are connected tooSAP HANA on Azure (large instances).</span></span> <span data-ttu-id="ba701-143">Hallo locatie waar een MSEE is mislukt, of kunt u het verlagen Hallo beoogde herstelpunt voor herstel na noodgevallen, kunt u overslaan als we later bespreken.</span><span class="sxs-lookup"><span data-stu-id="ba701-143">You can bypass hello location where an MSEE is failing, or you can lower hello recovery point objective for disaster recovery, as we discuss later.</span></span>

<span data-ttu-id="ba701-144">de volgende vereisten Hallo voor een installatie met herstel na noodgevallen zijn:</span><span class="sxs-lookup"><span data-stu-id="ba701-144">hello next requirements for a disaster-recovery setup are:</span></span>

- <span data-ttu-id="ba701-145">U moet een SAP HANA bestellen op SKU's van Azure (grote exemplaren) Hallo hetzelfde formaat als uw productie-SKU's en deze implementeren in Hallo herstel na noodgevallen regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-145">You must order SAP HANA on Azure (large instances) SKUs of hello same size as your production SKUs and deploy them in hello disaster-recovery region.</span></span> <span data-ttu-id="ba701-146">Deze instanties kunnen worden gebruikt toorun test, sandbox of QA HANA exemplaren.</span><span class="sxs-lookup"><span data-stu-id="ba701-146">These instances can be used toorun test, sandbox, or QA HANA instances.</span></span>
- <span data-ttu-id="ba701-147">U moet de volgorde een profiel voor herstel na noodgevallen voor elk van uw SAP HANA op SKU's van Azure (grote exemplaren) dat u wilt dat toorecover op Hallo herstel na noodgevallen site, indien nodig.</span><span class="sxs-lookup"><span data-stu-id="ba701-147">You must order a disaster-recovery profile for each of your SAP HANA on Azure (large instances) SKUs that you want toorecover in hello disaster-recovery site, if necessary.</span></span> <span data-ttu-id="ba701-148">Deze actie leidt toohello toewijzing van opslagvolumes, de Hallo doel van Hallo storage-replicatie van uw productieregio Hallo herstel na noodgevallen regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-148">This action leads toohello allocation of storage volumes, which are hello target of hello storage replication from your production region into hello disaster-recovery region.</span></span>

<span data-ttu-id="ba701-149">Nadat u aan Hallo voorafgaand aan de vereisten voldoet, is uw verantwoordelijkheid toostart Hallo storage-replicatie.</span><span class="sxs-lookup"><span data-stu-id="ba701-149">After you meet hello preceding requirements, it is your responsibility toostart hello storage replication.</span></span> <span data-ttu-id="ba701-150">Hallo op basis van de storage-replicatie is in Hallo opslaginfrastructuur gebruikt voor SAP HANA in Azure (grote exemplaren), opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-150">In hello storage infrastructure used for SAP HANA on Azure (large instances), hello basis of storage replication is storage snapshots.</span></span> <span data-ttu-id="ba701-151">replicatie van toostart Hallo herstel na noodgevallen, moet u tooperform:</span><span class="sxs-lookup"><span data-stu-id="ba701-151">toostart hello disaster-recovery replication, you need tooperform:</span></span>

- <span data-ttu-id="ba701-152">Een momentopname van de opstartinstallatiekopie LUN, zoals eerder beschreven.</span><span class="sxs-lookup"><span data-stu-id="ba701-152">A snapshot of your boot LUN, as described earlier.</span></span>
- <span data-ttu-id="ba701-153">Een momentopname van de volumes HANA-gerelateerde, zoals eerder beschreven.</span><span class="sxs-lookup"><span data-stu-id="ba701-153">A snapshot of your HANA-related volumes, as described earlier.</span></span>

<span data-ttu-id="ba701-154">Nadat u deze momentopnamen worden uitgevoerd, wordt een eerste replica van de volumes Hallo seeding op Hallo van volumes die gekoppeld aan uw profiel herstel na noodgevallen in Hallo herstel na noodgevallen regio zijn.</span><span class="sxs-lookup"><span data-stu-id="ba701-154">After you execute these snapshots, an initial replica of hello volumes is seeded on hello volumes that are associated with your disaster-recovery profile in hello disaster-recovery region.</span></span>

<span data-ttu-id="ba701-155">Vervolgens elk uur wordt gebruikt in de meest recente opslag momentopname Hallo tooreplicate Hallo delta's die op Hallo opslagvolumes ontwikkelen.</span><span class="sxs-lookup"><span data-stu-id="ba701-155">Subsequently, hello most recent storage snapshot is used every hour tooreplicate hello deltas that develop on hello storage volumes.</span></span>

<span data-ttu-id="ba701-156">Hallo beoogd herstelpunt dat wordt gerealiseerd met deze configuratie is van too90 de 60 minuten.</span><span class="sxs-lookup"><span data-stu-id="ba701-156">hello recovery point objective that's achieved with this configuration is from 60 too90 minutes.</span></span> <span data-ttu-id="ba701-157">een betere herstelmogelijkheden tooachieve wijst doelstelling in Hallo herstel na noodgevallen geval kopie Hallo HANA transactielogboekback-ups uit SAP HANA op Azure (grote exemplaren) toohello andere Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-157">tooachieve a better recovery point objective in hello disaster-recovery case, copy hello HANA transaction log backups from SAP HANA on Azure (large instances) toohello other Azure region.</span></span> <span data-ttu-id="ba701-158">tooachieve deze beoogd herstelpunt Hallo te volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-158">tooachieve this recovery point objective, do hello following:</span></span>

1. <span data-ttu-id="ba701-159">Maak een back-up van Hallo HANA transactie Meld u zo vaak mogelijk te/hana/log/back-up.</span><span class="sxs-lookup"><span data-stu-id="ba701-159">Back up hello HANA transaction log as frequently as possible too/hana/log/backup.</span></span>
2. <span data-ttu-id="ba701-160">Kopieer Hallo transactielogboekback-ups wanneer ze klaar tooan Azure virtuele machine (VM), dat zich bevindt in een virtueel netwerk dat toohello SAP HANA op Azure (grote exemplaren)-server is verbonden.</span><span class="sxs-lookup"><span data-stu-id="ba701-160">Copy hello transaction log backups when they are finished tooan Azure virtual machine (VM), which is in a virtual network that's connected toohello SAP HANA on Azure (large instances) server.</span></span>
3. <span data-ttu-id="ba701-161">Kopiëren van die VM Hallo back-tooa virtuele machine die zich in een virtueel netwerk in Hallo herstel na noodgevallen regio.</span><span class="sxs-lookup"><span data-stu-id="ba701-161">From that VM, copy hello backup tooa VM that's in a virtual network in hello disaster-recovery region.</span></span>
4. <span data-ttu-id="ba701-162">Houd Hallo transactie logboekback-ups in deze regio in Hallo VM.</span><span class="sxs-lookup"><span data-stu-id="ba701-162">Keep hello transaction log backups in that region in hello VM.</span></span>

<span data-ttu-id="ba701-163">In noodgevallen nadat Hallo herstel na noodgevallen profiel is geïmplementeerd op een werkelijke-server, kopieert u Hallo transactielogboekback-ups van Hallo VM toohello SAP HANA op primaire server is nu Hallo in Hallo herstel na noodgevallen regio, Azure (grote exemplaren) en Deze back-ups herstellen.</span><span class="sxs-lookup"><span data-stu-id="ba701-163">In case of disaster, after hello disaster-recovery profile has been deployed on an actual server, copy hello transaction log backups from hello VM toohello SAP HANA on Azure (large instances) that is now hello primary server in hello disaster-recovery region, and restore those backups.</span></span> <span data-ttu-id="ba701-164">Dit herstel is mogelijk omdat Hallo status van HANA op Hallo herstel na noodgevallen schijven die van een momentopname HANA.</span><span class="sxs-lookup"><span data-stu-id="ba701-164">This recovery is possible because hello state of HANA on hello disaster-recovery disks is that of a HANA snapshot.</span></span> <span data-ttu-id="ba701-165">Dit is Hallo offset voor verdere herstelprocedures van transactielogboekback-ups.</span><span class="sxs-lookup"><span data-stu-id="ba701-165">This is hello offset point for further restorations of transaction log backups.</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="ba701-166">Back-ups en herstellen</span><span class="sxs-lookup"><span data-stu-id="ba701-166">Backup and restore</span></span>

<span data-ttu-id="ba701-167">Een van de belangrijkste aspecten toooperating-databases Hallo is om ervoor te zorgen hello database kan worden beveiligd vanaf verschillende rampen.</span><span class="sxs-lookup"><span data-stu-id="ba701-167">One of hello most important aspects toooperating databases is making sure hello database can be protected from various catastrophic events.</span></span> <span data-ttu-id="ba701-168">Deze gebeurtenissen kunnen zijn veroorzaakt door alles van natuurramp toosimple gebruikersfouten.</span><span class="sxs-lookup"><span data-stu-id="ba701-168">These events can be caused by anything from natural disasters toosimple user errors.</span></span>

<span data-ttu-id="ba701-169">Maken van back-up van een database met Hallo mogelijkheid toorestore tooany punt in tijd (zoals voordat iemand kritieke gegevens verwijderd), kunt u het herstel van tooa staat die zo dicht mogelijk toohello manier deze was voordat de Hallo onderbreking is opgetreden.</span><span class="sxs-lookup"><span data-stu-id="ba701-169">Backing up a database, with hello ability toorestore it tooany point in time (such as before somebody deleted critical data), allows restoration tooa state that is as close as possible toohello way it was before hello disruption occurred.</span></span>

<span data-ttu-id="ba701-170">Twee soorten back-ups moeten worden uitgevoerd voor de beste resultaten:</span><span class="sxs-lookup"><span data-stu-id="ba701-170">Two types of backups must be performed for best results:</span></span>

- <span data-ttu-id="ba701-171">Databaseback-ups</span><span class="sxs-lookup"><span data-stu-id="ba701-171">Database backups</span></span>
- <span data-ttu-id="ba701-172">Transactielogboekback-ups</span><span class="sxs-lookup"><span data-stu-id="ba701-172">Transaction log backups</span></span>

<span data-ttu-id="ba701-173">Bovendien toofull databaseback-ups op niveau van een toepassing wordt uitgevoerd, u kunt altijd zelfs uitgebreider door het uitvoeren van back-ups met de opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-173">In addition toofull database backups performed at an application-level, you can be even more thorough by performing backups with storage snapshots.</span></span> <span data-ttu-id="ba701-174">Logboekback-ups uitvoeren, is ook belangrijk voor het herstellen van database hello (en tooempty Hallo logboeken van al doorgevoerde transacties).</span><span class="sxs-lookup"><span data-stu-id="ba701-174">Performing log backups is also important for restoring hello database (and tooempty hello logs from already committed transactions).</span></span>

<span data-ttu-id="ba701-175">SAP HANA in Azure (grote exemplaren) biedt twee opties voor back-up en herstel:</span><span class="sxs-lookup"><span data-stu-id="ba701-175">SAP HANA on Azure (large instances) offers two backup and restore options:</span></span>

- <span data-ttu-id="ba701-176">Hiervoor zelf (DIY).</span><span class="sxs-lookup"><span data-stu-id="ba701-176">Do it yourself (DIY).</span></span> <span data-ttu-id="ba701-177">Nadat u tooensure voldoende schijfruimte is berekent, voert u de volledige database en logboekbestanden back-ups met behulp van back-up schijf-methoden (toothose schijven).</span><span class="sxs-lookup"><span data-stu-id="ba701-177">After you calculate tooensure enough disk space, perform full database and log backups by using disk backup methods (toothose disks).</span></span> <span data-ttu-id="ba701-178">Na verloop van tijd Hallo back-ups gekopieerde tooan Azure storage-account (na het instellen van een Azure-bestandsserver met vrijwel onbeperkte opslag) zijn of een Azure Backup-kluis of Azure koude opslag gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ba701-178">Over time, hello backups are copied tooan Azure storage account (after you set up an Azure-based file server with virtually unlimited storage), or use an Azure Backup vault or Azure cold storage.</span></span> <span data-ttu-id="ba701-179">Een andere optie is een hulpprogramma van de beveiliging van derden gegevens toouse zoals Commvault, toostore Hallo back-ups nadat ze zijn gekopieerd tooa storage-account.</span><span class="sxs-lookup"><span data-stu-id="ba701-179">Another option is toouse a third-party data protection tool, such as Commvault, toostore hello backups after they are copied tooa storage account.</span></span> <span data-ttu-id="ba701-180">Hallo ZELFOPLOSSING optie back-up kan ook nodig zijn om gegevens die moeten worden opgeslagen voor langere tijd voor compliancy en controledoeleinden toobe.</span><span class="sxs-lookup"><span data-stu-id="ba701-180">hello DIY backup option might also be necessary for data that needs toobe stored for longer periods for compliancy and auditing purposes.</span></span>
- <span data-ttu-id="ba701-181">Gebruik Hallo back-up en herstellen van de functionaliteit die Hallo onderliggende infrastructuur van SAP HANA in Azure (grote exemplaren) bevat.</span><span class="sxs-lookup"><span data-stu-id="ba701-181">Use hello backup and restore functionality that hello underlying infrastructure of SAP HANA on Azure (large instances) provides.</span></span> <span data-ttu-id="ba701-182">Deze optie wordt voldaan aan Hallo nodig voor back-ups en maakt handmatige back-ups bijna verouderd (met uitzondering van gegevensback-ups indien noodzakelijk zijn voor naleving zijn).</span><span class="sxs-lookup"><span data-stu-id="ba701-182">This option fulfills hello need for backups, and it makes manual backups nearly obsolete (except where data backups are required for compliance purposes).</span></span> <span data-ttu-id="ba701-183">Hallo rest van deze sectie heeft betrekking op Hallo back-up en herstel van functionaliteit die wordt aangeboden met HANA (grote exemplaren).</span><span class="sxs-lookup"><span data-stu-id="ba701-183">hello rest of this section addresses hello backup and restore functionality that's offered with HANA (large instances).</span></span>

> [!NOTE]
> <span data-ttu-id="ba701-184">Hallo momentopnametechnologie die wordt gebruikt door de onderliggende infrastructuur Hallo van HANA (grote exemplaren) heeft een afhankelijkheid voor SAP HANA-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-184">hello snapshot technology that is used by hello underlying infrastructure of HANA (large instances) has a dependency on SAP HANA snapshots.</span></span> <span data-ttu-id="ba701-185">SAP HANA momentopnamen werken niet in combinatie met SAP HANA Multitenant Database Containers.</span><span class="sxs-lookup"><span data-stu-id="ba701-185">SAP HANA snapshots do not work in conjunction with SAP HANA Multitenant Database Containers.</span></span> <span data-ttu-id="ba701-186">Deze methode van back-up kan niet als gevolg hiervan gebruikte toodeploy SAP HANA Multitenant Database Containers zijn.</span><span class="sxs-lookup"><span data-stu-id="ba701-186">As a result, this method of backup cannot be used toodeploy SAP HANA Multitenant Database Containers.</span></span>

### <a name="using-storage-snapshots-of-sap-hana-on-azure-large-instances"></a><span data-ttu-id="ba701-187">Met behulp van opslag-momentopnamen van SAP HANA in Azure (grote exemplaren)</span><span class="sxs-lookup"><span data-stu-id="ba701-187">Using storage snapshots of SAP HANA on Azure (large instances)</span></span>

<span data-ttu-id="ba701-188">Hallo opslaginfrastructuur onderliggende SAP HANA in Azure (grote exemplaren) ondersteunt Hallo begrip van een momentopname van de opslag van volumes.</span><span class="sxs-lookup"><span data-stu-id="ba701-188">hello storage infrastructure underlying SAP HANA on Azure (large instances) supports hello notion of a storage snapshot of volumes.</span></span> <span data-ttu-id="ba701-189">Zowel back-up en herstel van een bepaald volume worden ondersteund met Hallo overwegingen te volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-189">Both backup and restoration of a particular volume are supported, with hello following considerations:</span></span>

- <span data-ttu-id="ba701-190">In plaats van de databaseback-ups, worden opslag volume momentopnamen regelmatig.</span><span class="sxs-lookup"><span data-stu-id="ba701-190">Instead of database backups, storage volume snapshots are taken on a frequent basis.</span></span>
- <span data-ttu-id="ba701-191">Hallo opslag momentopname initieert een momentopname van een SAP HANA voordat deze Hallo opslag momentopname wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-191">hello storage snapshot initiates an SAP HANA snapshot before it executes hello storage snapshot.</span></span> <span data-ttu-id="ba701-192">Deze momentopname met de SAP HANA is Hallo setup voor uiteindelijke logboek herstelbewerkingen kunnen na het herstel van Hallo opslag momentopname.</span><span class="sxs-lookup"><span data-stu-id="ba701-192">This SAP HANA snapshot is hello setup point for eventual log restorations after recovery of hello storage snapshot.</span></span>
- <span data-ttu-id="ba701-193">Op Hallo punt waar Hallo opslag momentopname met succes is uitgevoerd, is Hallo SAP HANA momentopname verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ba701-193">At hello point where hello storage snapshot is executed successfully, hello SAP HANA snapshot is deleted.</span></span>
- <span data-ttu-id="ba701-194">Logboekback-ups zijn vaak gemaakt en opgeslagen in de back-logboekvolume Hallo of in Azure.</span><span class="sxs-lookup"><span data-stu-id="ba701-194">Log backups are taken frequently and stored in hello log backup volume or in Azure.</span></span>
- <span data-ttu-id="ba701-195">Als het Hallo-database moet worden hersteld tooa die bepaalde punt in tijd, een aanvraag wordt gedaan tooMicrosoft ondersteuning van Azure (productie uitval) of SAP HANA op Azure Service Management toorestore tooa bepaalde opslag-momentopnamen (bijvoorbeeld een geplande herstel van een sandbox tooits oorspronkelijke staat).</span><span class="sxs-lookup"><span data-stu-id="ba701-195">If hello database must be restored tooa certain point in time, a request is made tooMicrosoft Azure Support (production outage) or SAP HANA on Azure Service Management toorestore tooa certain storage snapshot (for example, a planned restoration of a sandbox system tooits original state).</span></span>
- <span data-ttu-id="ba701-196">Hallo SAP HANA momentopname die is opgenomen in Hallo opslag momentopname is een offset punt voor het toepassen van logboekback-ups die zijn uitgevoerd en opgeslagen nadat Hallo opslag momentopname werd gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ba701-196">hello SAP HANA snapshot that's included in hello storage snapshot is an offset point for applying log backups that have been executed and stored after hello storage snapshot was taken.</span></span>
- <span data-ttu-id="ba701-197">Deze logboekback-ups worden genomen toorestore Hallo database back tooa bepaalde tijdstip voor herstel.</span><span class="sxs-lookup"><span data-stu-id="ba701-197">These log backups are taken toorestore hello database back tooa certain point in time.</span></span>

<span data-ttu-id="ba701-198">Back-up van opgeven Hallo\_naam maakt een momentopname van Hallo volgende volumes:</span><span class="sxs-lookup"><span data-stu-id="ba701-198">Specifying hello backup\_name creates a snapshot of hello following volumes:</span></span>

- <span data-ttu-id="ba701-199">Hana/gegevens</span><span class="sxs-lookup"><span data-stu-id="ba701-199">hana/data</span></span>
- <span data-ttu-id="ba701-200">Hana/logboek</span><span class="sxs-lookup"><span data-stu-id="ba701-200">hana/log</span></span>
- <span data-ttu-id="ba701-201">Hana/log\_back-up (gekoppeld als back-up in hana/logboek)</span><span class="sxs-lookup"><span data-stu-id="ba701-201">hana/log\_backup (mounted as backup into hana/log)</span></span>
- <span data-ttu-id="ba701-202">Hana/gedeeld</span><span class="sxs-lookup"><span data-stu-id="ba701-202">hana/shared</span></span>

### <a name="storage-snapshot-considerations"></a><span data-ttu-id="ba701-203">Overwegingen met betrekking tot opslag-momentopnamen</span><span class="sxs-lookup"><span data-stu-id="ba701-203">Storage snapshot considerations</span></span>

>[!NOTE]
><span data-ttu-id="ba701-204">Opslag-momentopnamen zijn _niet_ opgegeven gratis, omdat u extra opslagruimte moet worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="ba701-204">Storage snapshots are _not_ provided free of charge, because additional storage space must be allocated.</span></span>

<span data-ttu-id="ba701-205">Hallo specifieke mechanisme van opslag-momentopnamen voor SAP HANA in Azure (grote exemplaren) zijn onder andere:</span><span class="sxs-lookup"><span data-stu-id="ba701-205">hello specific mechanics of storage snapshots for SAP HANA on Azure (large instances) include:</span></span>

- <span data-ttu-id="ba701-206">Een momentopname van een bepaalde opslag (op Hallo punt in tijd waarop deze is gemaakt) verbruikt weinig opslag.</span><span class="sxs-lookup"><span data-stu-id="ba701-206">A specific storage snapshot (at hello point in time when it is taken) consumes very little storage.</span></span>
- <span data-ttu-id="ba701-207">Als inhoud gegevenswijzigingen en het Hallo-inhoud in bestanden worden gewijzigd op Hallo opslagvolume SAP HANA-gegevens, moet Hallo momentopname toostore Hallo oorspronkelijke Blokinhoud.</span><span class="sxs-lookup"><span data-stu-id="ba701-207">As data content changes and hello content in SAP HANA data files change on hello storage volume, hello snapshot needs toostore hello original block content.</span></span>
- <span data-ttu-id="ba701-208">Hallo opslag momentopname wordt vergroot.</span><span class="sxs-lookup"><span data-stu-id="ba701-208">hello storage snapshot increases in size.</span></span> <span data-ttu-id="ba701-209">Hallo langer Hallo momentopname bestaat, Hallo groter Hallo opslag momentopname wordt.</span><span class="sxs-lookup"><span data-stu-id="ba701-209">hello longer hello snapshot exists, hello larger hello storage snapshot becomes.</span></span>
- <span data-ttu-id="ba701-210">Hallo meer wijzigingen toohello SAP HANA-databasevolume tijdens Hallo levensduur van een momentopname van de opslag, Hallo groter Hallo verbruik van schijfruimte van Hallo opslag momentopname wordt.</span><span class="sxs-lookup"><span data-stu-id="ba701-210">hello more changes made toohello SAP HANA database volume over hello lifetime of a storage snapshot, hello larger hello space consumption of hello storage snapshot becomes.</span></span>

<span data-ttu-id="ba701-211">SAP HANA in Azure (grote exemplaren) wordt geleverd met grootten voor Hallo SAP HANA gegevens en logboekbestanden volume vast volume.</span><span class="sxs-lookup"><span data-stu-id="ba701-211">SAP HANA on Azure (large instances) comes with fixed volume sizes for hello SAP HANA data and log volume.</span></span> <span data-ttu-id="ba701-212">Uitvoeren van momentopnamen van de volumes eats in de ruimte op volume zodat u uw verantwoordelijkheid tooschedule opslag-momentopnamen (binnen Hallo SAP HANA op Azure [grote exemplaren]-proces).</span><span class="sxs-lookup"><span data-stu-id="ba701-212">Performing snapshots of those volumes eats into your volume space, so it is your responsibility tooschedule storage snapshots (within hello SAP HANA on Azure [large instances] process).</span></span>

<span data-ttu-id="ba701-213">Hallo bevatten volgende secties informatie voor het uitvoeren van deze momentopnamen, waaronder algemene aanbevelingen:</span><span class="sxs-lookup"><span data-stu-id="ba701-213">hello following sections provide information for performing these snapshots, including general recommendations:</span></span>

- <span data-ttu-id="ba701-214">Hoewel Hallo hardware 255 momentopnamen per volume tolereren kan, wordt ten zeerste aanbevolen ruim onder dit nummer te blijven.</span><span class="sxs-lookup"><span data-stu-id="ba701-214">Though hello hardware can sustain 255 snapshots per volume, we highly recommend that you stay well below this number.</span></span>
- <span data-ttu-id="ba701-215">Voordat u opslag-momentopnamen uitvoert, bewaken en bijhouden vrije ruimte.</span><span class="sxs-lookup"><span data-stu-id="ba701-215">Before you perform storage snapshots, monitor and keep track of free space.</span></span>
- <span data-ttu-id="ba701-216">Minder Hallo van opslag-momentopnamen op basis van de vrije ruimte.</span><span class="sxs-lookup"><span data-stu-id="ba701-216">Lower hello number of storage snapshots based on free space.</span></span> <span data-ttu-id="ba701-217">Mogelijk moet u toolower Hallo aantal momentopnamen die u bijhoudt, of moet u mogelijk tooextend Hallo volumes.</span><span class="sxs-lookup"><span data-stu-id="ba701-217">You might need toolower hello number of snapshots that you keep, or you might need tooextend hello volumes.</span></span> <span data-ttu-id="ba701-218">(U kunt extra opslagruimte bestellen in eenheden van 1 TB.)</span><span class="sxs-lookup"><span data-stu-id="ba701-218">(You can order additional storage in 1-TB units.)</span></span>
- <span data-ttu-id="ba701-219">Tijdens de activiteiten zoals het verplaatsen van gegevens in SAP HANA met systeem hulpprogramma's voor migratie (R3load of door te SAP HANA-databases herstellen vanuit back-ups), raden we u alle opslag-momentopnamen niet uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="ba701-219">During activities such as moving data into SAP HANA with system migration tools (with R3load, or by restoring SAP HANA databases from backups), we highly recommended that you not perform any storage snapshots.</span></span> <span data-ttu-id="ba701-220">(Als de migratie van een systeem is op een nieuw SAP HANA-systeem wordt gedaan, opslag-momentopnamen hoeft dan niet toobe uitgevoerd.)</span><span class="sxs-lookup"><span data-stu-id="ba701-220">(If a system migration is being done on a new SAP HANA system, storage snapshots would not need toobe performed.)</span></span>
- <span data-ttu-id="ba701-221">Tijdens de grotere reorganisaties SAP HANA-tabellen, moeten de opslag-momentopnamen indien mogelijk worden vermeden.</span><span class="sxs-lookup"><span data-stu-id="ba701-221">During larger reorganizations of SAP HANA tables, storage snapshots should be avoided if possible.</span></span>
- <span data-ttu-id="ba701-222">Opslag-momentopnamen zijn een vereiste tooengaging Hallo herstel na noodgevallen mogelijkheden van SAP HANA in Azure (grote exemplaren).</span><span class="sxs-lookup"><span data-stu-id="ba701-222">Storage snapshots are a prerequisite tooengaging hello disaster-recovery capabilities of SAP HANA on Azure (large instances).</span></span>

### <a name="setting-up-storage-snapshots"></a><span data-ttu-id="ba701-223">Instellen van opslag-momentopnamen</span><span class="sxs-lookup"><span data-stu-id="ba701-223">Setting up storage snapshots</span></span>

1. <span data-ttu-id="ba701-224">Zorg ervoor dat Perl in Hallo Linux-besturingssysteem op Hallo HANA (grote exemplaren)-server is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-224">Make sure that Perl is installed in hello Linux operating system on hello HANA (large instances) server.</span></span>
2. <span data-ttu-id="ba701-225">Wijzig/etc/ssh/ssh\_config tooadd Hallo regel _MACs hmac-sha1_.</span><span class="sxs-lookup"><span data-stu-id="ba701-225">Modify /etc/ssh/ssh\_config tooadd hello line _MACs hmac-sha1_.</span></span>
3. <span data-ttu-id="ba701-226">Maak een back-SAP HANA-gebruikersaccount op Hallo hoofdknooppunt voor elk SAP HANA-exemplaar dat u uitvoert (indien van toepassing).</span><span class="sxs-lookup"><span data-stu-id="ba701-226">Create an SAP HANA backup user account on hello master node for each SAP HANA instance you are running (if applicable).</span></span>
4. <span data-ttu-id="ba701-227">Hallo SAP HANA HDB client moet worden geïnstalleerd op alle servers voor SAP HANA (grote exemplaren).</span><span class="sxs-lookup"><span data-stu-id="ba701-227">hello SAP HANA HDB client must be installed on all SAP HANA (large instances) servers.</span></span>
5. <span data-ttu-id="ba701-228">Op Hallo eerste SAP HANA (grote exemplaren)-server van elke regio moet een openbare sleutel tooaccess Hallo onderliggende opslaginfrastructuur die het maken van momentopnamen bepaalt worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ba701-228">On hello first SAP HANA (large instances) server of each region, a public key must be created tooaccess hello underlying storage infrastructure that controls snapshot creation.</span></span>
6. <span data-ttu-id="ba701-229">Kopieer Hallo script azure\_hana\_backup.pl vanuit/scripts toohello locatie van de **hdbsql** Hallo SAP HANA-installatie.</span><span class="sxs-lookup"><span data-stu-id="ba701-229">Copy hello script azure\_hana\_backup.pl from /scripts toohello location of **hdbsql** of hello SAP HANA installation.</span></span>
7. <span data-ttu-id="ba701-230">Bestand kopiëren Hallo HANABackupDetails.txt van/scripts toohello dezelfde locatie als Hallo Perl-script.</span><span class="sxs-lookup"><span data-stu-id="ba701-230">Copy hello HANABackupDetails.txt file from /scripts toohello same location as hello Perl script.</span></span>
8. <span data-ttu-id="ba701-231">Hallo HANABackupDetails.txt bestand die nodig zijn voor de gewenste klant-specificaties Hallo wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ba701-231">Modify hello HANABackupDetails.txt file as necessary for hello appropriate customer specifications.</span></span>

### <a name="step-1-install-sap-hana-hdbclient"></a><span data-ttu-id="ba701-232">Stap 1: SAP HANA HDBClient installeren</span><span class="sxs-lookup"><span data-stu-id="ba701-232">Step 1: Install SAP HANA HDBClient</span></span>

<span data-ttu-id="ba701-233">Hallo Linux is geïnstalleerd op een SAP HANA in Azure (grote exemplaren) bevat Hallo mappen en scripts nodig tooexecute SAP HANA-opslag-momentopnamen voor back-up en herstel na noodgevallen.</span><span class="sxs-lookup"><span data-stu-id="ba701-233">hello Linux installed on SAP HANA on Azure (large instances) includes hello folders and scripts necessary tooexecute SAP HANA storage snapshots for backup and disaster-recovery purposes.</span></span> <span data-ttu-id="ba701-234">Het is echter uw verantwoordelijkheid tooinstall SAP HANA HDBclient tijdens de installatie van SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="ba701-234">However, it is your responsibility tooinstall SAP HANA HDBclient while you are installing SAP HANA.</span></span> <span data-ttu-id="ba701-235">(Microsoft installeert Hallo HDBclient noch SAP HANA.)</span><span class="sxs-lookup"><span data-stu-id="ba701-235">(Microsoft installs neither hello HDBclient nor SAP HANA.)</span></span>

### <a name="step-2-change-etcsshsshconfig"></a><span data-ttu-id="ba701-236">Stap 2: Wijzig/etc/ssh/ssh\_config</span><span class="sxs-lookup"><span data-stu-id="ba701-236">Step 2: Change /etc/ssh/ssh\_config</span></span>

<span data-ttu-id="ba701-237">Wijzig/etc/ssh/ssh\_config door toe te voegen _MACs hmac-sha1_ regel als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="ba701-237">Change /etc/ssh/ssh\_config by adding _MACs hmac-sha1_ line as shown here:</span></span>
```
#   RhostsRSAAuthentication no
#   RSAAuthentication yes
#   PasswordAuthentication yes
#   HostbasedAuthentication no
#   GSSAPIAuthentication no
#   GSSAPIDelegateCredentials no
#   GSSAPIKeyExchange no
#   GSSAPITrustDNS no
#   BatchMode no
#   CheckHostIP yes
#   AddressFamily any
#   ConnectTimeout 0
#   StrictHostKeyChecking ask
#   IdentityFile ~/.ssh/identity
#   IdentityFile ~/.ssh/id_rsa
#   IdentityFile ~/.ssh/id_dsa
#   Port 22
Protocol 2
#   Cipher 3des
#   Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc
#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160
MACs hmac-sha1
#   EscapeChar ~
#   Tunnel no
#   TunnelDevice any:any
#   PermitLocalCommand no
#   VisualHostKey no
#   ProxyCommand ssh -q -W %h:%p gateway.example.com
```

### <a name="step-3-create-a-public-key"></a><span data-ttu-id="ba701-238">Stap 3: Maak een openbare sleutel</span><span class="sxs-lookup"><span data-stu-id="ba701-238">Step 3: Create a public key</span></span>

<span data-ttu-id="ba701-239">Eerste SAP HANA op Azure (grote exemplaren)-server in elk Azure-regio, maak een openbare sleutel toobe gebruikt tooaccess Hallo-opslaginfrastructuur op Hallo zodat u kunt momentopnamen maken.</span><span class="sxs-lookup"><span data-stu-id="ba701-239">On hello first SAP HANA on Azure (large instances) server in each Azure region, create a public key toobe used tooaccess hello storage infrastructure so that you can create snapshots.</span></span> <span data-ttu-id="ba701-240">Hallo openbare sleutel zorgt ervoor dat een wachtwoord niet vereist toosign in toohello opslag is en wachtwoordreferenties worden niet gehandhaafd.</span><span class="sxs-lookup"><span data-stu-id="ba701-240">hello public key ensures that a password is not required toosign in toohello storage and that password credentials are not maintained.</span></span> <span data-ttu-id="ba701-241">Uitvoeren in Linux op Hallo SAP HANA (grote exemplaren) server Hallo opdracht toogenerate Hallo openbare sleutel te volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-241">In Linux on hello SAP HANA (large instances) server, execute hello following command toogenerate hello public key:</span></span>
```
  ssh-keygen –t dsa –b 1024
```
<span data-ttu-id="ba701-242">de nieuwe locatie Hallo is _/root/.ssh/id\_dsa.pub.</span><span class="sxs-lookup"><span data-stu-id="ba701-242">hello new location is _/root/.ssh/id\_dsa.pub.</span></span> <span data-ttu-id="ba701-243">Voer een wachtwoordzin werkelijke niet, anders kunt u zich vereist tooenter Hallo wachtwoordzin telkens wanneer die u zich aanmeldt.</span><span class="sxs-lookup"><span data-stu-id="ba701-243">Do not enter an actual passphrase, or else you will be required tooenter hello passphrase each time you sign in.</span></span> <span data-ttu-id="ba701-244">In plaats daarvan, drukt u op **Enter** tweemaal tooremove Hallo Voer vereiste wachtwoordzin voor het aanmelden.</span><span class="sxs-lookup"><span data-stu-id="ba701-244">Instead, press **Enter** twice tooremove hello enter passphrase requirement for signing in.</span></span>

<span data-ttu-id="ba701-245">Controleer of de openbare sleutel van die Hallo is opgelost zoals werd verwacht in mappen too/root/.ssh/ wijzigen en vervolgens uitvoert Hallo toomake **ls** opdracht.</span><span class="sxs-lookup"><span data-stu-id="ba701-245">Check toomake sure that hello public key was corrected as expected by changing folders too/root/.ssh/ and then executing hello **ls** command.</span></span> <span data-ttu-id="ba701-246">Als de sleutel Hallo aanwezig is, kunt u deze door het uitvoeren van de volgende opdracht Hallo kopiëren:</span><span class="sxs-lookup"><span data-stu-id="ba701-246">If hello key is present, you can copy it by running hello following command:</span></span>

![Openbare sleutel wordt gekopieerd met deze opdracht uit te voeren](./media/hana-overview-high-availability-disaster-recovery/image2-public-key.png)

<span data-ttu-id="ba701-248">Op dit moment Neem contact op met de SAP HANA op Azure-servicebeheer en Hallo sleutel opgeven.</span><span class="sxs-lookup"><span data-stu-id="ba701-248">At this point, contact SAP HANA on Azure Service Management and provide hello key.</span></span> <span data-ttu-id="ba701-249">Hallo klantenservice maakt gebruik van de openbare sleutel tooregister Hallo in Hallo onderliggende opslaginfrastructuur.</span><span class="sxs-lookup"><span data-stu-id="ba701-249">hello service representative uses hello public key tooregister it in hello underlying storage infrastructure.</span></span>

### <a name="step-4-create-an-sap-hana-user-account"></a><span data-ttu-id="ba701-250">Stap 4: Een SAP HANA-gebruikersaccount maken</span><span class="sxs-lookup"><span data-stu-id="ba701-250">Step 4: Create an SAP HANA user account</span></span>

<span data-ttu-id="ba701-251">Maak een SAP HANA-gebruikersaccount in SAP HANA Studio voor back-updoeleinden.</span><span class="sxs-lookup"><span data-stu-id="ba701-251">Create an SAP HANA user account within SAP HANA Studio for backup purposes.</span></span> <span data-ttu-id="ba701-252">Dit account moet hebben Hallo volgende bevoegdheden: _back-up Admin_ en _catalogus_.</span><span class="sxs-lookup"><span data-stu-id="ba701-252">This account must have hello following privileges: _Backup Admin_ and _Catalog Read_.</span></span> <span data-ttu-id="ba701-253">In dit voorbeeld Hallo gebruikersnaam SCADMIN wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ba701-253">In this example, hello username SCADMIN is created.</span></span>

![Maken van een gebruiker in HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image3-creating-user.png)

### <a name="step-5-authorize-hello-sap-hana-user-account"></a><span data-ttu-id="ba701-255">Stap 5: Autoriseren hello SAP HANA-gebruikersaccount</span><span class="sxs-lookup"><span data-stu-id="ba701-255">Step 5: Authorize hello SAP HANA user account</span></span>

<span data-ttu-id="ba701-256">Autoriseren hello SAP HANA-gebruikersaccount (toobe gebruikt door Hallo scripts zonder autorisatie telkens wanneer Hallo script wordt uitgevoerd).</span><span class="sxs-lookup"><span data-stu-id="ba701-256">Authorize hello SAP HANA user account (toobe used by hello scripts without requiring authorization every time hello script is run).</span></span> <span data-ttu-id="ba701-257">Hallo SAP HANA-opdracht `hdbuserstore` Hallo maken van een sleutel voor SAP HANA, die is opgeslagen op een of meer SAP HANA-knooppunten.</span><span class="sxs-lookup"><span data-stu-id="ba701-257">hello SAP HANA command `hdbuserstore` allows hello creation of an SAP HANA user key, which is stored on one or more SAP HANA nodes.</span></span> <span data-ttu-id="ba701-258">Hallo gebruiker tooaccess SAP HANA kan Hallo gebruikerssleutel ook zonder toomanage wachtwoorden van binnen Hallo scripting proces dat later wordt besproken.</span><span class="sxs-lookup"><span data-stu-id="ba701-258">hello user key also allows hello user tooaccess SAP HANA without having toomanage passwords from within hello scripting process that's discussed later.</span></span>

>[!IMPORTANT]
><span data-ttu-id="ba701-259">Voer hello volgende opdracht als `_root_`.</span><span class="sxs-lookup"><span data-stu-id="ba701-259">Run hello following command as `_root_`.</span></span> <span data-ttu-id="ba701-260">Anders kan niet Hallo script correct werken.</span><span class="sxs-lookup"><span data-stu-id="ba701-260">Otherwise, hello script cannot work properly.</span></span>

<span data-ttu-id="ba701-261">Voer Hallo `hdbuserstore` opdracht als volgt:</span><span class="sxs-lookup"><span data-stu-id="ba701-261">Enter hello `hdbuserstore` command as follows:</span></span>

![Voer Hallo hdbuserstore opdracht](./media/hana-overview-high-availability-disaster-recovery/image4-hdbuserstore-command.png)

<span data-ttu-id="ba701-263">In Hallo volgt, waarbij Hallo gebruiker SCADMIN01 en Hallo hostnaam lhanad01, is Hallo-opdracht:</span><span class="sxs-lookup"><span data-stu-id="ba701-263">In hello following example, where hello user is SCADMIN01 and hello hostname is lhanad01, hello command is:</span></span>
```
hdbuserstore set SCADMIN01 lhanad01:30115 <backup username> <password>
```
<span data-ttu-id="ba701-264">Beheer alle scripts van één server voor scale-out HANA exemplaren.</span><span class="sxs-lookup"><span data-stu-id="ba701-264">Manage all scripting from a single server for scale-out HANA instances.</span></span> <span data-ttu-id="ba701-265">In dit voorbeeld Hallo SAP HANA-sleutel die scadmin01 voor elke host op een manier die overeenkomt met Hallo-host die is gerelateerd toohello sleutel moet worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ba701-265">In this example, hello SAP HANA key SCADMIN01 must be altered for each host in a way that reflects hello host that is related toohello key.</span></span> <span data-ttu-id="ba701-266">Dat wil zeggen, Hallo SAP HANA-back-account wordt gewijzigd met Hallo exemplaar aantal Hallo HANA DB, **lhanad**.</span><span class="sxs-lookup"><span data-stu-id="ba701-266">That is, hello SAP HANA backup account is amended with hello instance number of hello HANA DB, **lhanad**.</span></span> <span data-ttu-id="ba701-267">Hallo-sleutel moet beheerdersbevoegdheden hebben op Hallo-host die is toegewezen aan moet, en Hallo back-gebruiker voor scale-out toegang rechten tooall SAP HANA-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="ba701-267">hello key must have administrative privileges on hello host it is assigned to, and hello backup user for scale-out must have access rights tooall SAP HANA instances.</span></span>
```
hdbuserstore set SCADMIN01 lhanad:30015 SCADMIN <password>
hdbuserstore set SCADMIN02 lhanad:30115 SCADMIN <password>
hdbuserstore set SCADMIN03 lhanad:30215 SCADMIN <password>
```

### <a name="step-6-copy-items-from-hello-scripts-folder"></a><span data-ttu-id="ba701-268">Stap 6: Items kopiëren vanuit de map/scripts Hallo</span><span class="sxs-lookup"><span data-stu-id="ba701-268">Step 6: Copy items from hello /scripts folder</span></span>

<span data-ttu-id="ba701-269">Kopiëren Hallo volgende items uit Hallo/map (opgenomen op Hallo gouden installatiekopie van Hallo-installatie) toohello werkmap voor scripts **hdbsql**.</span><span class="sxs-lookup"><span data-stu-id="ba701-269">Copy hello following items from hello /scripts folder (included on hello gold image of hello installation) toohello working directory for **hdbsql**.</span></span> <span data-ttu-id="ba701-270">Deze map is voor installaties van de huidige HANA /hana/shared/D01/exe/linuxx86\_64/hdb.</span><span class="sxs-lookup"><span data-stu-id="ba701-270">For current HANA installations, this directory is /hana/shared/D01/exe/linuxx86\_64/hdb.</span></span>
```
azure\_hana\_backup.pl
testHANAConnection.pl
testStorageSnapshotConnection.pl
removeTestStorageSnapshot.pl
HANABackupCustomerDetails.txt
```
<span data-ttu-id="ba701-271">Hallo volgende items als ze zijn met scale-out- of OLAP-kopiëren:</span><span class="sxs-lookup"><span data-stu-id="ba701-271">Copy hello following items if they are running scale-out or OLAP:</span></span>
```
azure\_hana\_backup\_bw.pl
testHANAConnectionBW.pl
testStorageSnapshotConnectionBW.pl
removeTestStorageSnapshotBW.pl
HANABackupCustomerDetailsBW.txt
```
<span data-ttu-id="ba701-272">Hallo HANABackupCustomerDetails.txt bestand is als volgt voor de implementatie van een scale-up kan worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ba701-272">hello HANABackupCustomerDetails.txt file is modifiable as follows for a scale-up deployment.</span></span> <span data-ttu-id="ba701-273">Het is Hallo beheer- en configuratie-bestand voor Hallo-script dat wordt uitgevoerd Hallo-opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-273">It is hello control and configuration file for hello script that runs hello storage snapshots.</span></span> <span data-ttu-id="ba701-274">U hebt ontvangen Hallo _back-up Opslagnaam_ en _opslag IP-adres_ uit SAP HANA op Azure-servicebeheer wanneer uw exemplaren zijn geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-274">You should have received hello _Storage Backup Name_ and _Storage IP Address_ from SAP HANA on Azure Service Management when your instances were deployed.</span></span> <span data-ttu-id="ba701-275">U Hallo-reeks kan niet wijzigen ordening of afstand van een van de variabelen Hallo of Hallo script werkt niet goed.</span><span class="sxs-lookup"><span data-stu-id="ba701-275">You cannot modify hello sequence, ordering, or spacing of any of hello variables, or hello script does not run properly.</span></span>

<span data-ttu-id="ba701-276">Voor een implementatie omhoog schalen eruit Hallo configuratiebestand als:</span><span class="sxs-lookup"><span data-stu-id="ba701-276">For a scale-up deployment, hello configuration file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Created by customer using hdbuserstore
HANA Backup Name: SCADMIND01
```
<span data-ttu-id="ba701-277">Voor een scale-out-configuratie eruit Hallo HANABackupCustomerDetailsBW.txt bestand als:</span><span class="sxs-lookup"><span data-stu-id="ba701-277">For a scale-out configuration, hello HANABackupCustomerDetailsBW.txt file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Node IP addresses, instance numbers, and HANA backup name
#provided by customer.  HANA backup name created using
#hdbuserstore utility.
Node 1 IP Address: 10.254.15.21
Node 1 HANA instance number: 01
Node 1 HANA Backup Name: SCADMIN01
Node 2 IP Address: 10.254.15.22
Node 2 HANA instance number: 02
Node 2 HANA Backup Name: SCADMIN02
Node 3 IP Address: 10.254.15.23
Node 3 HANA instance number: 03
Node 3 HANA Backup Name: SCADMIN03
Node 4 IP Address: 10.254.15.24
Node 4 HANA instance number: 04
Node 4 HANA Backup Name: SCADMIN04
Node 5 IP Address: 10.254.15.25
Node 5 HANA instance number: 05
Node 5 HANA Backup Name: SCADMIN05
Node 6 IP Address: 10.254.15.26
Node 6 HANA instance number: 06
Node 6 HANA Backup Name: SCADMIN06
Node 7 IP Address: 10.254.15.27
Node 7 HANA instance number: 07
Node 7 HANA Backup Name: SCADMIN07
Node 8 IP Address: 10.254.15.28
Node 8 HANA instance number: 08
Node 8 HANA Backup Name: SCADMIN08
```
>[!NOTE]
><span data-ttu-id="ba701-278">Op dit moment worden alleen gegevens voor knooppunt 1 in Hallo werkelijke HANA opslag momentopname script gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ba701-278">Currently, only Node 1 details are used in hello actual HANA storage snapshot script.</span></span> <span data-ttu-id="ba701-279">Het is raadzaam om de toegang tooor van alle HANA knooppunten te testen, zodat als de back-hoofdknooppunt Hallo ooit wijzigt, al u zorgt dat een ander knooppunt kan worden uitgevoerd zijn doordat Hallo details in het knooppunt 1.</span><span class="sxs-lookup"><span data-stu-id="ba701-279">We recommend that you test access tooor from all HANA nodes so that, if hello master backup node ever changes, you have already ensured that any other node can take its place by modifying hello details in Node 1.</span></span>

<span data-ttu-id="ba701-280">toocheck voor de juiste configuraties Hallo in Hallo-configuratiebestand of de juiste connectiviteit toohello HANA exemplaren een van de volgende scripts Hallo uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="ba701-280">toocheck for hello correct configurations in hello configuration file or proper connectivity toohello HANA instances, run either of hello following scripts:</span></span>
- <span data-ttu-id="ba701-281">Voor een scale-up-configuratie (onafhankelijk van de werkbelasting SAP):</span><span class="sxs-lookup"><span data-stu-id="ba701-281">For a scale-up configuration (independent on SAP workload):</span></span>

 ```
testHANAConnection.pl
```
- <span data-ttu-id="ba701-282">Voor de configuratie van een scale-out:</span><span class="sxs-lookup"><span data-stu-id="ba701-282">For a scale-out configuration:</span></span>

 ```
testHANAConnectionBW.pl
```

<span data-ttu-id="ba701-283">Zorg ervoor dat Hallo master HANA exemplaar HANA-servers voor clienttoegang tooall vereist.</span><span class="sxs-lookup"><span data-stu-id="ba701-283">Ensure that hello master HANA instance has access tooall required HANA servers.</span></span> <span data-ttu-id="ba701-284">Er zijn geen parameters toohello script, maar u moet voltooien Hallo juiste HANABackupCustomerDetails / HANABackupCustomerDetailsBW file voor Hallo script toorun goed.</span><span class="sxs-lookup"><span data-stu-id="ba701-284">There are no parameters toohello script, but you must complete hello appropriate HANABackupCustomerDetails/ HANABackupCustomerDetailsBW file for hello script toorun properly.</span></span> <span data-ttu-id="ba701-285">Omdat alleen Hallo shell opdracht foutcodes worden geretourneerd, is het niet mogelijk voor elke instantie een script tooerror selectievakje Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-285">Because only hello shell command error codes are returned, it is not possible for hello script tooerror-check every instance.</span></span> <span data-ttu-id="ba701-286">Hallo script biedt, zodat sommige nuttige opmerkingen voor toodouble-controle.</span><span class="sxs-lookup"><span data-stu-id="ba701-286">Even so, hello script does provide some helpful comments for you toodouble-check.</span></span>

<span data-ttu-id="ba701-287">toorun hello script:</span><span class="sxs-lookup"><span data-stu-id="ba701-287">toorun hello script:</span></span>
```
 ./testHANAConnection.pl
```
 <span data-ttu-id="ba701-288">Als het script Hallo krijgt met succes Hallo status van Hallo HANA exemplaar, wordt een bericht dat Hallo HANA verbinding geslaagd is.</span><span class="sxs-lookup"><span data-stu-id="ba701-288">If hello script successfully obtains hello status of hello HANA instance, it displays a message that hello HANA connection was successful.</span></span>

<span data-ttu-id="ba701-289">Bovendien is er een tweede type van het script kunt u toocheck Hallo master HANA exemplaar van server mogelijkheid toosign in toohello opslag.</span><span class="sxs-lookup"><span data-stu-id="ba701-289">Additionally, there is a second type of script you can use toocheck hello master HANA instance server's ability toosign in toohello storage.</span></span> <span data-ttu-id="ba701-290">Voordat u hello azure uitvoert\_hana\_back-up (\_bw) .pl script, moet u het volgende script Hallo uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="ba701-290">Before you execute hello azure\_hana\_backup(\_bw).pl script, you must execute hello next script.</span></span> <span data-ttu-id="ba701-291">Als een volume geen momentopnamen bevat, is het onmogelijk toodetermine of Hallo volume gewoon leeg is of er is een ssh mislukte tooobtain Hallo momentopname maken van meer informatie.</span><span class="sxs-lookup"><span data-stu-id="ba701-291">If a volume contains no snapshots, it is impossible toodetermine whether hello volume is simply empty or there is an ssh failure tooobtain hello snapshot details.</span></span> <span data-ttu-id="ba701-292">Hallo script uitvoert om deze reden twee stappen:</span><span class="sxs-lookup"><span data-stu-id="ba701-292">For this reason, hello script executes two steps:</span></span>

- <span data-ttu-id="ba701-293">Er wordt gecontroleerd dat die Hallo-opslag-console is toegankelijk.</span><span class="sxs-lookup"><span data-stu-id="ba701-293">It verifies that hello storage console is accessible.</span></span>
- <span data-ttu-id="ba701-294">Een test- of pop, momentopname voor elk volume wordt gemaakt door HANA-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="ba701-294">It creates a test, or dummy, snapshot for each volume by HANA instance.</span></span>

<span data-ttu-id="ba701-295">Om deze reden wordt Hallo HANA exemplaar opgenomen als een argument.</span><span class="sxs-lookup"><span data-stu-id="ba701-295">For this reason, hello HANA instance is included as an argument.</span></span> <span data-ttu-id="ba701-296">Nogmaals, is niet mogelijk tooprovide foutcontrole voor Hallo opslagverbinding maar Hallo script biedt nuttige tips als Hallo uitvoering mislukt.</span><span class="sxs-lookup"><span data-stu-id="ba701-296">Again, it is not possible tooprovide error checking for hello storage connection, but hello script provides helpful hints if hello execution fails.</span></span>

<span data-ttu-id="ba701-297">Hallo-script wordt uitgevoerd als:</span><span class="sxs-lookup"><span data-stu-id="ba701-297">hello script is run as:</span></span>
```
 ./testStorageSnapshotConnection.pl <hana instance>
```
<span data-ttu-id="ba701-298">Of die wordt uitgevoerd als:</span><span class="sxs-lookup"><span data-stu-id="ba701-298">Or it is run as:</span></span>
```
./testStorageSnapshotConnectionBW.pl <hana instance>
```
<span data-ttu-id="ba701-299">Hallo-script wordt ook een bericht weergegeven dat u kunt toosign in op de juiste wijze tooyour geïmplementeerd opslag-tenant, die is ingedeeld op basis van Hallo LUN's (LUN's) die worden gebruikt door het Hallo-serverexemplaren die u eigenaar bent.</span><span class="sxs-lookup"><span data-stu-id="ba701-299">hello script also displays a message that you are able toosign in appropriately tooyour deployed storage tenant, which is organized around hello logical unit numbers (LUNs) that are used by hello server instances you own.</span></span>

<span data-ttu-id="ba701-300">Voordat u Hallo eerste opslag momentopname back-ups worden uitgevoerd, voert u Hallo volgende scripts toomake of dat die Hallo configuratie juist is.</span><span class="sxs-lookup"><span data-stu-id="ba701-300">Before you execute hello first storage snapshot-based backups, run hello next scripts toomake sure that hello configuration is correct.</span></span>

<span data-ttu-id="ba701-301">U kunt Hallo momentopnamen na het uitvoeren van deze scripts verwijderen door te voeren:</span><span class="sxs-lookup"><span data-stu-id="ba701-301">After running these scripts, you can delete hello snapshots by executing:</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```
<span data-ttu-id="ba701-302">of</span><span class="sxs-lookup"><span data-stu-id="ba701-302">Or</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```

### <a name="step-7-perform-on-demand-snapshots"></a><span data-ttu-id="ba701-303">Stap 7: Momentopnamen op aanvraag uitvoeren</span><span class="sxs-lookup"><span data-stu-id="ba701-303">Step 7: Perform on-demand snapshots</span></span>

<span data-ttu-id="ba701-304">Momentopnamen op aanvraag uitvoeren (evenals regelmatig momentopnamen plannen met behulp van cron) zoals hier wordt beschreven.</span><span class="sxs-lookup"><span data-stu-id="ba701-304">Perform on-demand snapshots (as well as schedule regular snapshots by using cron) as described here.</span></span>

<span data-ttu-id="ba701-305">Configuraties met scale-up uitvoeren Hallo script volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-305">For scale-up configurations, execute hello following script:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="ba701-306">Voor scale-out configuraties uitvoeren Hallo script volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-306">For scale-out configurations, execute hello following script:</span></span>
```
./azure_hana_backup_bw.pl lhanad01 customer 20
```
<span data-ttu-id="ba701-307">Hallo scale-out script doet een aantal aanvullende controle toomake ervoor dat alle HANA servers toegankelijk zijn en alle exemplaren van HANA juiste status van Hallo exemplaar voordat u doorgaat geretourneerde met het maken van momentopnamen voor SAP HANA of opslag.</span><span class="sxs-lookup"><span data-stu-id="ba701-307">hello scale-out script does some additional checking toomake sure that all HANA servers can be accessed, and all HANA instances return appropriate status of hello instance before proceeding with creating SAP HANA or storage snapshots.</span></span>

<span data-ttu-id="ba701-308">Hallo volgende argumenten zijn vereist:</span><span class="sxs-lookup"><span data-stu-id="ba701-308">hello following arguments are required:</span></span>

- <span data-ttu-id="ba701-309">Hallo HANA exemplaar vereisen back-up.</span><span class="sxs-lookup"><span data-stu-id="ba701-309">hello HANA instance requiring backup.</span></span>
- <span data-ttu-id="ba701-310">Hallo momentopname voorvoegsel voor Hallo-opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-310">hello snapshot prefix for hello storage snapshot.</span></span>
- <span data-ttu-id="ba701-311">Hallo aantal momentopnamen toobe voor specifieke voorvoegsel Hallo behouden.</span><span class="sxs-lookup"><span data-stu-id="ba701-311">hello number of snapshots toobe kept for hello specific prefix.</span></span>

```
./azure_hana_backup.pl lhanad01 customer 20
```

<span data-ttu-id="ba701-312">Hallo-uitvoering van Hallo script maakt Hallo opslag momentopname in deze drie afzonderlijke fasen:</span><span class="sxs-lookup"><span data-stu-id="ba701-312">hello execution of hello script creates hello storage snapshot in these three distinct phases:</span></span>

- <span data-ttu-id="ba701-313">Uitvoeren van een momentopname HANA.</span><span class="sxs-lookup"><span data-stu-id="ba701-313">Execute a HANA snapshot.</span></span>
- <span data-ttu-id="ba701-314">Uitvoeren van een momentopname van de opslag.</span><span class="sxs-lookup"><span data-stu-id="ba701-314">Execute a storage snapshot.</span></span>
- <span data-ttu-id="ba701-315">Hallo HANA momentopname worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ba701-315">Remove hello HANA snapshot.</span></span>

<span data-ttu-id="ba701-316">Hallo-script uitvoeren door het aanroepen van Hallo HDB uitvoerbare map die is gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-316">Execute hello script by calling it from hello HDB executable folder that it was copied to.</span></span> <span data-ttu-id="ba701-317">Deze back-ups maakt ten minste Hallo na volumes, maar deze ook back-ups van volumes met Hallo expliciete SAP HANA-exemplaarnaam in Hallo volumenaam.</span><span class="sxs-lookup"><span data-stu-id="ba701-317">It backs up at least hello following volumes, but it also backs up any volume that has hello explicit SAP HANA instance name in hello volume name.</span></span>
```
hana_data_<hana instance>_prod_t020_vol
hana_log_<hana instance>_prod_t020_vol
hana_log_backup_<hana instance>_prod_t020_vol
hana_shared_<hana instance>_prod_t020_vol
```
<span data-ttu-id="ba701-318">Hallo bewaarperiode wordt uitsluitend beheerd met Hallo aantal momentopnamen verzonden als een parameter tijdens het uitvoeren van script hello (zoals 20 eerder weergegeven).</span><span class="sxs-lookup"><span data-stu-id="ba701-318">hello retention period is strictly administered, with hello number of snapshots submitted as a parameter when you execute hello script (such as 20, shown previously).</span></span> <span data-ttu-id="ba701-319">Hallo hoeveelheid tijd is dus een functie van de uitvoering en Hallo aantal momentopnamen in aanroep van Hallo script Hallo Hallo periode.</span><span class="sxs-lookup"><span data-stu-id="ba701-319">So hello amount of time is a function of hello period of execution and hello number of snapshots in hello call of hello script.</span></span> <span data-ttu-id="ba701-320">Als Hallo aantal momentopnamen worden bewaard Hallo aantal die worden genoemd als een parameter in aanroep van Hallo script Hallo overschrijdt, Hallo oudste opslag momentopname van dit label (in ons geval vorige _aangepaste_) is verwijderd voordat een nieuwe momentopname is uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-320">If hello number of snapshots that are kept exceeds hello number that are named as a parameter in hello call of hello script, hello oldest storage snapshot of this label (in our previous case, _custom_) is deleted before a new snapshot is executed.</span></span> <span data-ttu-id="ba701-321">Dit betekent dat Hallo nummer geeft u hello laatste parameter van het Hallo-aanroep is Hallo getal kunt u toocontrol Hallo aantal momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-321">This means hello number you give as hello last parameter of hello call is hello number you can use toocontrol hello number of snapshots.</span></span>

>[!NOTE]
><span data-ttu-id="ba701-322">Zodra u Hallo label wijzigt, Hallo tellen opnieuw gestart.</span><span class="sxs-lookup"><span data-stu-id="ba701-322">As soon as you change hello label, hello counting starts again.</span></span>

<span data-ttu-id="ba701-323">U moet tooinclude Hallo HANA exemplaarnaam die wordt geleverd door SAP HANA op Azure Service Management als een argument als ze bij het maken van momentopnamen in omgevingen met meerdere knooppunten.</span><span class="sxs-lookup"><span data-stu-id="ba701-323">You need tooinclude hello HANA instance name that's provided by SAP HANA on Azure Service Management as an argument if they are creating snapshots in multi-node environments.</span></span> <span data-ttu-id="ba701-324">In omgevingen met één knooppunt, Hallo naam Hallo SAP HANA op Azure (grote exemplaren) eenheid voldoende, maar wordt nog steeds Hallo HANA exemplaarnaam aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="ba701-324">In single-node environments, hello name of hello SAP HANA on Azure (large instances) unit is sufficient, but hello HANA instance name is still recommended.</span></span>

<span data-ttu-id="ba701-325">Bovendien, u kunt back-up volumes\LUNs opstarten met behulp van Hallo dezelfde script.</span><span class="sxs-lookup"><span data-stu-id="ba701-325">Additionally, you can back up boot volumes\LUNs by using hello same script.</span></span> <span data-ttu-id="ba701-326">U moet back-up het opstartvolume ten minste één keer tijdens de eerste uitvoering HANA, hoewel wordt aangeraden een back-upschema voor het opstarten in cron wekelijks of elke nacht.</span><span class="sxs-lookup"><span data-stu-id="ba701-326">You must back up your boot volume at least once when you first run HANA, although we recommend a weekly or nightly backup schedule for booting in cron.</span></span> <span data-ttu-id="ba701-327">In plaats daarvan dan het toevoegen van een SAP HANA-instantienaam, invoegen _boot_ als argument als volgt Hallo in Hallo script:</span><span class="sxs-lookup"><span data-stu-id="ba701-327">Rather than add an SAP HANA instance name, insert _boot_ as hello argument into hello script as follows:</span></span>
```
./azure_hana_backup boot customer 20
```
<span data-ttu-id="ba701-328">Hallo wordt hetzelfde bewaarbeleid geboden ook toohello opstartvolume.</span><span class="sxs-lookup"><span data-stu-id="ba701-328">hello same retention policy is afforded toohello boot volume as well.</span></span> <span data-ttu-id="ba701-329">Op aanvraag momentopnamen, zoals is beschreven voorheen voor bijzondere gevallen, zoals tijdens een upgrade SAP verbetering pakket (EHP), of wanneer u een momentopname van een afzonderlijke opslag toocreate moet gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ba701-329">Use on-demand snapshots, as described previously, for special cases only, such as during an SAP enhancement package (EHP) upgrade, or when you need toocreate a distinct storage snapshot.</span></span>

<span data-ttu-id="ba701-330">We raden u tooperform gepland opslag-momentopnamen met cron en aangeraden Hallo dezelfde script te gebruiken voor alle back-ups en herstel na noodgevallen behoeften (aanpassen Hallo script invoer toomatch hello verschillende aangevraagd back-ups).</span><span class="sxs-lookup"><span data-stu-id="ba701-330">We encourage you tooperform scheduled storage snapshots using cron, and we recommend that you use hello same script for all backups and disaster-recovery needs (modifying hello script inputs toomatch hello various requested backup times).</span></span> <span data-ttu-id="ba701-331">Dit zijn alle anders gepland in cron, afhankelijk van hun uitvoeringstijd: elk uur, 12 uur, dagelijks of wekelijks.</span><span class="sxs-lookup"><span data-stu-id="ba701-331">These are all scheduled differently in cron depending on their execution time: hourly, 12-hour, daily, or weekly.</span></span> <span data-ttu-id="ba701-332">Hallo cron-schema is ontworpen toocreate opslag-momentopnamen die overeenkomen met de eerder besproken Hallo bewaren labels voor lange termijn off-site back-up.</span><span class="sxs-lookup"><span data-stu-id="ba701-332">hello cron schedule is designed toocreate storage snapshots that match hello previously discussed retention labeling for long-term off-site backup.</span></span> <span data-ttu-id="ba701-333">Hallo-script bevat opdrachten tooback van alle productievolumes, afhankelijk van de aangevraagde frequentie (gegevens en logboekbestanden worden back-up gemaakt elk uur, terwijl het opstartvolume Hallo back-up dagelijks).</span><span class="sxs-lookup"><span data-stu-id="ba701-333">hello script includes commands tooback up all production volumes, depending on their requested frequency (data and log files are backed up hourly, whereas hello boot volume is backed up daily).</span></span>

<span data-ttu-id="ba701-334">Hallo vermeldingen in de volgende cron script Hallo elk uur uitgevoerd op Hallo tien minuten, elke 12 uur op Hallo tien minuten en dagelijks op Hallo tien minuten.</span><span class="sxs-lookup"><span data-stu-id="ba701-334">hello entries in hello following cron script run every hour at hello tenth minute, every 12 hours at hello tenth minute, and daily at hello tenth minute.</span></span> <span data-ttu-id="ba701-335">Hallo cron taken worden gemaakt op zodanige wijze die slechts één SAP HANA opslag momentopname plaatsvindt tijdens een bepaald uur zodat hello per uur en dagelijkse back-ups niet worden uitgevoerd op Hallo dat dezelfde tijd (12:10 uur).</span><span class="sxs-lookup"><span data-stu-id="ba701-335">hello cron jobs are created in such a way that only one SAP HANA storage snapshot takes place during any particular hour, so that hello hourly and daily backups do not occur at hello same time (12:10 AM).</span></span> <span data-ttu-id="ba701-336">toohelp optimaliseren uw momentopnamen worden gemaakt en replicatie, SAP HANA op Azure Service Management biedt Hallo aanbevolen voor toorun u uw back-ups.</span><span class="sxs-lookup"><span data-stu-id="ba701-336">toohelp optimize your snapshot creation and replication, SAP HANA on Azure Service Management provides hello recommended time for you toorun your backups.</span></span>

<span data-ttu-id="ba701-337">Hallo standaard cron planning in /etc/crontab is als volgt:</span><span class="sxs-lookup"><span data-stu-id="ba701-337">hello default cron scheduling in /etc/crontab is as follows:</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 14
```
<span data-ttu-id="ba701-338">In vorige cron instructies Hallo ophalen Hallo HANA volumes (zonder opstartvolume) een momentopname met Hallo label uur.</span><span class="sxs-lookup"><span data-stu-id="ba701-338">In hello previous cron instructions, hello HANA volumes (without boot volume) get an hourly snapshot with hello label.</span></span> <span data-ttu-id="ba701-339">Van deze momentopnamen worden 66 bewaard.</span><span class="sxs-lookup"><span data-stu-id="ba701-339">Of these snapshots, 66 are retained.</span></span> <span data-ttu-id="ba701-340">Bovendien worden 14 momentopnamen met Hallo 12 uur label bewaard.</span><span class="sxs-lookup"><span data-stu-id="ba701-340">Additionally, 14 snapshots with hello 12-hour label are retained.</span></span> <span data-ttu-id="ba701-341">Mogelijk krijgt u elk uur momentopnamen voor drie dagen, plus momentopnamen van 12 uur voor een andere vier dagen, waarmee u een hele week van momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-341">You potentially get hourly snapshots for three days, plus 12-hour snapshots for another four days, which gives you an entire week of snapshots.</span></span>

<span data-ttu-id="ba701-342">Planning binnen cron worden lastig, omdat er slechts één script moet worden uitgevoerd op een willekeurig moment tenzij Hallo scripts gespreid door enkele minuten.</span><span class="sxs-lookup"><span data-stu-id="ba701-342">Scheduling within cron can be tricky, because only one script should be executed at any particular time, unless hello scripts are staggered by several minutes.</span></span> <span data-ttu-id="ba701-343">Als u wilt dat dagelijkse back-ups op lange termijn, een dagelijkse momentopname wordt opgeslagen samen met een momentopname 12 uur (met een telling van de bewaartermijn van elke zeven) of Hallo per uur momentopname is gespreid tootake plaats 10 minuten later.</span><span class="sxs-lookup"><span data-stu-id="ba701-343">If you want daily backups for long-term retention, either a daily snapshot is kept along with a 12-hour snapshot (with a retention count of seven each), or hello hourly snapshot is staggered tootake place 10 minutes later.</span></span> <span data-ttu-id="ba701-344">Slechts één dagelijkse momentopname wordt opgeslagen in Hallo productievolume.</span><span class="sxs-lookup"><span data-stu-id="ba701-344">Only one daily snapshot is kept in hello production volume.</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 7
10 0 * * * ./azure_hana_backup.pl lhanad01 daily 7
```
<span data-ttu-id="ba701-345">Hallo frequenties hier vermeld zijn alleen voorbeelden.</span><span class="sxs-lookup"><span data-stu-id="ba701-345">hello frequencies listed here are only examples.</span></span> <span data-ttu-id="ba701-346">tooderive het optimale aantal momentopnamen, gebruik Hallo volgende criteria:</span><span class="sxs-lookup"><span data-stu-id="ba701-346">tooderive your optimum number of snapshots, use hello following criteria:</span></span>

- <span data-ttu-id="ba701-347">De vereisten in de beoogde hersteltijd voor herstel van de punt in tijd.</span><span class="sxs-lookup"><span data-stu-id="ba701-347">Requirements in recovery time objective for point-in-time recovery.</span></span>
- <span data-ttu-id="ba701-348">Gebruik van schijfruimte.</span><span class="sxs-lookup"><span data-stu-id="ba701-348">Space usage.</span></span>
- <span data-ttu-id="ba701-349">Vereisten bij het herstellen van punt doel en de beoogde hersteltijd op mogelijk noodherstel.</span><span class="sxs-lookup"><span data-stu-id="ba701-349">Requirements in recovery point objective and recovery time objective for potential disaster recovery.</span></span>
- <span data-ttu-id="ba701-350">Uiteindelijke uitvoering van HANA volledige databaseback-ups op basis van schijven.</span><span class="sxs-lookup"><span data-stu-id="ba701-350">Eventual execution of HANA full database backups against disks.</span></span> <span data-ttu-id="ba701-351">Wanneer een volledige databaseback-up op basis van schijven, of _backint_ interface, wordt uitgevoerd, Hallo uitvoering van opslag-momentopnamen is mislukt.</span><span class="sxs-lookup"><span data-stu-id="ba701-351">Whenever a full database backup against disks, or _backint_ interface, is performed, hello execution of storage snapshots fails.</span></span> <span data-ttu-id="ba701-352">Als u van plan de volledige databaseback-ups tooexecute boven op de opslag-momentopnamen bent, ervoor zorgen dat de uitvoering van opslag-momentopnamen Hallo gedurende deze tijd is uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="ba701-352">If you plan tooexecute full database backups on top of storage snapshots, make sure that hello execution of storage snapshots is disabled during this time.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="ba701-353">Hallo gebruik van opslag-momentopnamen voor SAP HANA back-ups is alleen geldig wanneer Hallo momentopnamen in combinatie met SAP HANA logboekback-ups worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba701-353">hello use of storage snapshots for SAP HANA backups is valid only when hello snapshots are performed in conjunction with SAP HANA log backups.</span></span> <span data-ttu-id="ba701-354">Deze Meld back-ups moeten toobe kunnen toocover Hallo tijd tussen het Hallo-opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-354">These log backups need toobe able toocover hello time periods between hello storage snapshots.</span></span> <span data-ttu-id="ba701-355">Als u een toousers streven van een punt in tijd herstel van 30 dagen hebt ingesteld, moet u de volgende Hallo:</span><span class="sxs-lookup"><span data-stu-id="ba701-355">If you've set a commitment toousers of a point-in-time recovery of 30 days, you need hello following:</span></span>

- <span data-ttu-id="ba701-356">Mogelijkheid tooaccess momentopname van een opslag is 30 dagen oud.</span><span class="sxs-lookup"><span data-stu-id="ba701-356">Ability tooaccess a storage snapshot that is 30 days old.</span></span>
- <span data-ttu-id="ba701-357">Aaneengesloten logboekback-ups via Hallo afgelopen 30 dagen.</span><span class="sxs-lookup"><span data-stu-id="ba701-357">Contiguous log backups over hello last 30 days.</span></span>

<span data-ttu-id="ba701-358">In het bereik van de Hallo van logboekback-ups, een momentopname maken van back-uplogboek volume ook Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-358">In hello range of log backups, create a snapshot of hello backup log volume as well.</span></span> <span data-ttu-id="ba701-359">Maar ook zeker tooperform normale logboekback-ups zodat u kunt:</span><span class="sxs-lookup"><span data-stu-id="ba701-359">However, be sure tooperform regular log backups so that you can:</span></span>

- <span data-ttu-id="ba701-360">Hallo aaneengesloten logboekback-ups nodig tooperform punt in tijd herstelbewerkingen hebben.</span><span class="sxs-lookup"><span data-stu-id="ba701-360">Have hello contiguous log backups needed tooperform point-in-time recoveries.</span></span>
- <span data-ttu-id="ba701-361">Voorkomen dat Hallo SAP HANA-logboekvolume met de beschikbare ruimte.</span><span class="sxs-lookup"><span data-stu-id="ba701-361">Prevent hello SAP HANA log volume from running out of space.</span></span>

<span data-ttu-id="ba701-362">Een van de laatste stappen Hallo is tooschedule SAP HANA back-uplogboeken in SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="ba701-362">One of hello last steps is tooschedule SAP HANA backup logs in SAP HANA Studio.</span></span> <span data-ttu-id="ba701-363">Hallo SAP HANA back-uplogboek doellocatie is speciaal gemaakt Hallo hana/log\_volume van de back-ups met koppelpunt op Hallo /hana/log/backups.</span><span class="sxs-lookup"><span data-stu-id="ba701-363">hello SAP HANA backup log target destination is hello specially created hana/log\_backups volume with hello mount point of /hana/log/backups.</span></span>

![Back-uplogboeken SAP HANA in SAP HANA Studio plannen](./media/hana-overview-high-availability-disaster-recovery/image5-schedule-backup.png)

<span data-ttu-id="ba701-365">U kunt back-ups die vaker plaatsvinden dan om de 15 minuten zijn.</span><span class="sxs-lookup"><span data-stu-id="ba701-365">You can choose backups that are more frequent than every 15 minutes.</span></span> <span data-ttu-id="ba701-366">Sommige gebruikers zelfs uitvoeren logboekback-ups elke minuut, maar we niet gaat raden _via_ 15 minuten.</span><span class="sxs-lookup"><span data-stu-id="ba701-366">Some users even perform log backups every minute, although we do not recommend going _over_ 15 minutes.</span></span>

<span data-ttu-id="ba701-367">de laatste stap Hallo is een op bestanden gebaseerde tooperform back-up (na de eerste installatie Hallo van SAP HANA) toocreate een afzonderlijke back-post moet bestaan binnen de back-upcatalogus Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-367">hello final step is tooperform a file-based backup (after hello initial installation of SAP HANA) toocreate a single backup entry that must exist within hello backup catalog.</span></span> <span data-ttu-id="ba701-368">SAP HANA kan niet anders uw opgegeven logboekback-ups gestart.</span><span class="sxs-lookup"><span data-stu-id="ba701-368">Otherwise SAP HANA cannot initiate your specified log backups.</span></span>

![Een back-toocreate op basis van bestanden van een enkele back-item maken](./media/hana-overview-high-availability-disaster-recovery/image6-make-backup.png)

### <a name="monitoring-hello-number-and-size-of-snapshots-on-hello-disk-volume"></a><span data-ttu-id="ba701-370">Hallo aantal en de grootte van momentopnamen op Hallo schijfvolume bewaking</span><span class="sxs-lookup"><span data-stu-id="ba701-370">Monitoring hello number and size of snapshots on hello disk volume</span></span>

<span data-ttu-id="ba701-371">U kunt op een bepaalde opslagvolume Hallo aantal momentopnamen en het verbruik van de Hallo opslag van momentopnamen bewaken.</span><span class="sxs-lookup"><span data-stu-id="ba701-371">On a particular storage volume, you can monitor hello number of snapshots and hello storage consumption of snapshots.</span></span> <span data-ttu-id="ba701-372">Hallo `ls` opdracht Hallo momentopname map of bestanden wordt niet weergegeven.</span><span class="sxs-lookup"><span data-stu-id="ba701-372">hello `ls` command doesn't show hello snapshot directory or files.</span></span> <span data-ttu-id="ba701-373">Linux-besturingssysteem opdracht echter Hallo `du` biedt Hello volgende opdrachten:</span><span class="sxs-lookup"><span data-stu-id="ba701-373">However, hello Linux OS command `du` does, with hello following commands:</span></span>

- <span data-ttu-id="ba701-374">`du –sh .snapshot`biedt een totaal van alle momentopnamen binnen Hallo momentopname directory.</span><span class="sxs-lookup"><span data-stu-id="ba701-374">`du –sh .snapshot` provides a total of all snapshots within hello snapshot directory.</span></span>
- <span data-ttu-id="ba701-375">`du –sh --max-depth=1`een lijst met alle momentopnamen die zijn opgeslagen in Hallo .snapshot map en Hallo grootte van elke momentopname.</span><span class="sxs-lookup"><span data-stu-id="ba701-375">`du –sh --max-depth=1` lists all snapshots that are saved in hello .snapshot folder and hello size of each snapshot.</span></span>
- <span data-ttu-id="ba701-376">`du –hc`totale grootte van Hallo gebruikt door alle momentopnamen bevat.</span><span class="sxs-lookup"><span data-stu-id="ba701-376">`du –hc` provides hello total size used by all snapshots.</span></span>

<span data-ttu-id="ba701-377">Gebruik deze opdrachten toomake ervoor dat Hallo momentopnamen die zijn gemaakt en opgeslagen geen alle Hallo opslag op Hallo volumes worden verbruikt.</span><span class="sxs-lookup"><span data-stu-id="ba701-377">Use these commands toomake sure that hello snapshots that are taken and stored are not consuming all hello storage on hello volumes.</span></span>

### <a name="reducing-hello-number-of-snapshots-on-a-server"></a><span data-ttu-id="ba701-378">Hallo aantal momentopnamen op een server verminderen</span><span class="sxs-lookup"><span data-stu-id="ba701-378">Reducing hello number of snapshots on a server</span></span>

<span data-ttu-id="ba701-379">Zoals eerder beschreven, kunt u beperken Hallo aantal bepaalde labels van de momentopnamen die u opslaat.</span><span class="sxs-lookup"><span data-stu-id="ba701-379">As explained earlier, you can reduce hello number of certain labels of snapshots that you store.</span></span> <span data-ttu-id="ba701-380">Hallo de laatste twee parameters van de Hallo opdracht tooinitiate een momentopname is een label en Hallo aantal momentopnamen die u wilt dat tooretain.</span><span class="sxs-lookup"><span data-stu-id="ba701-380">hello last two parameters of hello command tooinitiate a snapshot are a label and hello number of snapshots you want tooretain.</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="ba701-381">In het vorige voorbeeld Hallo Hallo momentopname van het label is _klant_ en het aantal momentopnamen met dit label toobe bewaard Hallo _20_.</span><span class="sxs-lookup"><span data-stu-id="ba701-381">In hello previous example, hello snapshot label is _customer_ and hello number of snapshots with this label toobe retained is _20_.</span></span> <span data-ttu-id="ba701-382">Als u het verbruik van schijfruimte toodisk reageert, kunt u tooreduce Hallo aantal opgeslagen momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-382">As you respond toodisk space consumption, you might want tooreduce hello number of stored snapshots.</span></span> <span data-ttu-id="ba701-383">eenvoudig Hello tooreduce Hallo aantal momentopnamen toorun Hallo script met de laatste parameter set-too5 Hallo is:</span><span class="sxs-lookup"><span data-stu-id="ba701-383">hello easy way tooreduce hello number of snapshots is toorun hello script with hello last parameter set too5:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 5
```
<span data-ttu-id="ba701-384">Als gevolg van het Hallo-script wordt uitgevoerd met deze instelling, Hallo aantal momentopnamen, met inbegrip van de nieuwe opslag Hallo momentopname, wordt _5_.</span><span class="sxs-lookup"><span data-stu-id="ba701-384">As a result of running hello script with this setting, hello number of snapshots, including hello new storage snapshot, is _5_.</span></span>

 >[!NOTE]
 > <span data-ttu-id="ba701-385">Dit script vermindert het aantal momentopnamen Hallo alleen als de meest recente vorige momentopname Hallo meer dan een uur oud is.</span><span class="sxs-lookup"><span data-stu-id="ba701-385">This script reduces hello number of snapshots only if hello most recent previous snapshot is more than one hour old.</span></span> <span data-ttu-id="ba701-386">Hallo script verwijdert niet de momentopnamen die minder dan een uur oud.</span><span class="sxs-lookup"><span data-stu-id="ba701-386">hello script does not delete snapshots that are less than one hour old.</span></span>

<span data-ttu-id="ba701-387">Deze beperkingen zijn verwante toohello optionele noodherstel functionaliteit beschikbaar wordt gesteld.</span><span class="sxs-lookup"><span data-stu-id="ba701-387">These restrictions are related toohello optional disaster-recovery functionality offered.</span></span>

<span data-ttu-id="ba701-388">Als u een set van momentopnamen met voorvoegsel toomaintain niet langer wilt, kunt u Hallo script uitvoeren _0_ zoals hello bewaren number tooremove alle momentopnamen die overeenkomt met dat voorvoegsel.</span><span class="sxs-lookup"><span data-stu-id="ba701-388">If you no longer want toomaintain a set of snapshots with that prefix, you can execute hello script with _0_ as hello retention number tooremove all snapshots matching that prefix.</span></span> <span data-ttu-id="ba701-389">Alle momentopnamen verwijderen kan echter Hallo-mogelijkheden van herstel na noodgevallen beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="ba701-389">However, removing all snapshots can affect hello capabilities of disaster recovery.</span></span>

### <a name="recovering-toohello-most-recent-hana-snapshot"></a><span data-ttu-id="ba701-390">De meest recente HANA momentopname toohello herstellen</span><span class="sxs-lookup"><span data-stu-id="ba701-390">Recovering toohello most recent HANA snapshot</span></span>

<span data-ttu-id="ba701-391">In Hallo gebeurtenis kunnen zich een scenario voor productie-omlaag, Hallo proces van het herstellen van een momentopname van de opslag worden gestart als een klant incident met SAP HANA op Azure Service Management.</span><span class="sxs-lookup"><span data-stu-id="ba701-391">In hello event that you experience a production-down scenario, hello process of recovering from a storage snapshot can be initiated as a customer incident with SAP HANA on Azure Service Management.</span></span> <span data-ttu-id="ba701-392">Een onverwachte scenario mogelijk een hoge urgentie kwestie als gegevens in een productie-systeem en Hallo alleen manier tooretrieve Hallo gegevens toorestore Hallo-productiedatabase is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ba701-392">Such an unexpected scenario might be a high-urgency matter if data was deleted in a production system and hello only way tooretrieve hello data is toorestore hello production database.</span></span>

<span data-ttu-id="ba701-393">Op Hallo daarentegen een punt in tijd herstel kan lage urgentie en geplande dagen van tevoren.</span><span class="sxs-lookup"><span data-stu-id="ba701-393">On hello other hand, a point-in-time recovery could be low urgency and planned for days in advance.</span></span> <span data-ttu-id="ba701-394">U kunt dit herstel met SAP HANA plannen op Azure Service Management in plaats van een probleem met hoge prioriteit verhogen.</span><span class="sxs-lookup"><span data-stu-id="ba701-394">You can plan this recovery with SAP HANA on Azure Service Management instead of raising a high-priority issue.</span></span> <span data-ttu-id="ba701-395">Bijvoorbeeld, u mogelijk mee moet houden tootry een upgrade van Hallo SAP-software door het toepassen van een nieuw pakket in de uitbreiding, en u vervolgens moet toorevert back-tooa momentopname die Hallo status vóór de upgrade Hallo EHP vertegenwoordigt.</span><span class="sxs-lookup"><span data-stu-id="ba701-395">For example, you might be planning tootry an upgrade of hello SAP software by applying a new enhancement package, and you then need toorevert back tooa snapshot that represents hello state before hello EHP upgrade.</span></span>

<span data-ttu-id="ba701-396">Voordat u Hallo aanvraag verzendt, moet u toodo voorbereiding.</span><span class="sxs-lookup"><span data-stu-id="ba701-396">Before you issue hello request, you need toodo some preparation.</span></span> <span data-ttu-id="ba701-397">SAP HANA in Azure Service Management-team kan vervolgens Hallo aanvraag verwerken en geef Hallo hersteld volumes.</span><span class="sxs-lookup"><span data-stu-id="ba701-397">SAP HANA on Azure Service Management team can then handle hello request and provide hello restored volumes.</span></span> <span data-ttu-id="ba701-398">Daarna is tooyou toorestore Hallo HANA-database op basis van Hallo momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-398">Afterward, it is up tooyou toorestore hello HANA database based on hello snapshots.</span></span> <span data-ttu-id="ba701-399">Hier ziet u hoe tooprepare voor Hallo aanvragen:</span><span class="sxs-lookup"><span data-stu-id="ba701-399">Here is how tooprepare for hello request:</span></span>

>[!NOTE]
><span data-ttu-id="ba701-400">De gebruikersinterface kan afwijken van Hallo volgende schermafbeeldingen, afhankelijk van Hallo SAP HANA-versie die u gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ba701-400">Your user interface might vary from hello following screenshots, depending on hello SAP HANA release you are using.</span></span>

1. <span data-ttu-id="ba701-401">Bepaal welke toorestore momentopname.</span><span class="sxs-lookup"><span data-stu-id="ba701-401">Decide which snapshot toorestore.</span></span> <span data-ttu-id="ba701-402">Alleen Hallo hana/gegevensvolume zou worden teruggezet, tenzij anders wordt aangegeven.</span><span class="sxs-lookup"><span data-stu-id="ba701-402">Only hello hana/data volume would be restored unless you are instructed otherwise.</span></span>

2. <span data-ttu-id="ba701-403">Hallo HANA exemplaar afgesloten.</span><span class="sxs-lookup"><span data-stu-id="ba701-403">Shut down hello HANA instance.</span></span>

 ![Hallo HANA exemplaar afsluiten](./media/hana-overview-high-availability-disaster-recovery/image7-shutdown-hana.png)

3. <span data-ttu-id="ba701-405">Ontkoppel de gegevensvolumes Hallo op elk knooppunt HANA-database.</span><span class="sxs-lookup"><span data-stu-id="ba701-405">Unmount hello data volumes on each HANA database node.</span></span> <span data-ttu-id="ba701-406">Hallo-herstellen van de momentopname Hallo mislukt als Hallo gegevensvolumes niet ontkoppeld zijn.</span><span class="sxs-lookup"><span data-stu-id="ba701-406">hello restoration of hello snapshot fails if hello data volumes are not unmounted.</span></span>

 ![Hallo gegevensvolumes ontkoppelen op elk knooppunt HANA-database](./media/hana-overview-high-availability-disaster-recovery/image8-unmount-data-volumes.png)

4. <span data-ttu-id="ba701-408">Open een Azure-ondersteuning aanvraag tooinstruct Hallo herstel van een momentopname van een specifieke.</span><span class="sxs-lookup"><span data-stu-id="ba701-408">Open an Azure support request tooinstruct hello restoration of a specific snapshot.</span></span>

 - <span data-ttu-id="ba701-409">Tijdens het Hallo terugzetten: SAP HANA op Azure Service Management kan u vragen tooattend een telefonische tooensure die geen gegevens ophalen van gaan verloren.</span><span class="sxs-lookup"><span data-stu-id="ba701-409">During hello restoration: SAP HANA on Azure Service Management might ask you tooattend a conference call tooensure that no data is getting lost.</span></span>

 - <span data-ttu-id="ba701-410">Na het herstellen van Hallo: SAP HANA op Azure Service Management waarschuwt u als Hallo opslag momentopname is teruggezet.</span><span class="sxs-lookup"><span data-stu-id="ba701-410">After hello restoration: SAP HANA on Azure Service Management notifies you when hello storage snapshot has been restored.</span></span>

5. <span data-ttu-id="ba701-411">Na het herstellen van Hallo proces is voltooid, opnieuw koppelen van alle gegevensvolumes.</span><span class="sxs-lookup"><span data-stu-id="ba701-411">After hello restoration process is complete, remount all data volumes.</span></span>

 ![Alle gegevensvolumes opnieuw koppelen](./media/hana-overview-high-availability-disaster-recovery/image9-remount-data-volumes.png)

6. <span data-ttu-id="ba701-413">Selecteer herstelopties in SAP HANA Studio als ze niet automatisch afkomstig zijn van wanneer u tooHANA DB met SAP HANA Studio herstelt.</span><span class="sxs-lookup"><span data-stu-id="ba701-413">Select recovery options within SAP HANA Studio, if they do not automatically come up when you reconnect tooHANA DB through SAP HANA Studio.</span></span> <span data-ttu-id="ba701-414">Hallo volgende voorbeeld ziet u een herstelbewerking toohello laatste HANA momentopname.</span><span class="sxs-lookup"><span data-stu-id="ba701-414">hello following example shows a restoration toohello last HANA snapshot.</span></span> <span data-ttu-id="ba701-415">Een momentopname van een HANA opslag momentopnamen en als u de meest recente opslag momentopname toohello herstelt, moet de meest recente HANA momentopname Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-415">A storage snapshot embeds one HANA snapshot, and if you are restoring toohello most recent storage snapshot, it should be hello most recent HANA snapshot.</span></span> <span data-ttu-id="ba701-416">(Als u tooolder opslag-momentopnamen herstellen wilt, moet u toolocate Hallo HANA momentopname is gebaseerd op Hallo tijd Hallo opslag momentopname werd gemaakt.)</span><span class="sxs-lookup"><span data-stu-id="ba701-416">(If you are restoring tooolder storage snapshots, you need toolocate hello HANA snapshot based on hello time hello storage snapshot was taken.)</span></span>

 ![Selecteer de opties herstellen vanuit SAP HANA-Studio](./media/hana-overview-high-availability-disaster-recovery/image10-recover-options-a.png)

7. <span data-ttu-id="ba701-418">Selecteer **herstellen Hallo tooa specifieke gegevens back-up of opslag databasemomentopname**.</span><span class="sxs-lookup"><span data-stu-id="ba701-418">Select **Recover hello database tooa specific data backup or storage snapshot**.</span></span>

 ![Hallo 'Hersteltype opgeven' venster](./media/hana-overview-high-availability-disaster-recovery/image11-recover-options-b.png)

8. <span data-ttu-id="ba701-420">Selecteer **Geef back-up zonder catalogus**.</span><span class="sxs-lookup"><span data-stu-id="ba701-420">Select **Specify backup without catalog**.</span></span>

 ![Hallo 'Back-up locatie opgeven' venster](./media/hana-overview-high-availability-disaster-recovery/image12-recover-options-c.png)

9. <span data-ttu-id="ba701-422">In Hallo **doeltype** selecteert **momentopname**.</span><span class="sxs-lookup"><span data-stu-id="ba701-422">In hello **Destination Type** list, select **Snapshot**.</span></span>

 ![Hallo 'Geef Hallo back-up tooRecover' venster](./media/hana-overview-high-availability-disaster-recovery/image13-recover-options-d.png)

10. <span data-ttu-id="ba701-424">Klik op **voltooien** toostart Hallo herstelproces.</span><span class="sxs-lookup"><span data-stu-id="ba701-424">Click **Finish** toostart hello recovery process.</span></span>

 ![Klik op toostart Hallo herstelproces "Voltooid"](./media/hana-overview-high-availability-disaster-recovery/image14-recover-options-e.png)

11. <span data-ttu-id="ba701-426">Hallo HANA-database is hersteld en toohello HANA momentopname die opgenomen in Hallo opslag momentopname wordt hersteld.</span><span class="sxs-lookup"><span data-stu-id="ba701-426">hello HANA database is restored and recovered toohello HANA snapshot that's included in hello storage snapshot.</span></span>

 ![HANA-database is teruggezet en herstelde toohello HANA momentopname](./media/hana-overview-high-availability-disaster-recovery/image15-recover-options-f.png)

### <a name="recovering-toohello-most-recent-state"></a><span data-ttu-id="ba701-428">Herstellen van de meest recente is toohello</span><span class="sxs-lookup"><span data-stu-id="ba701-428">Recovering toohello most recent state</span></span>

<span data-ttu-id="ba701-429">Hallo herstelt volgende proces Hallo HANA momentopname die is opgenomen in het Hallo-opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-429">hello following process restores hello HANA snapshot that is included in hello storage snapshot.</span></span> <span data-ttu-id="ba701-430">Vervolgens worden Hallo transactie logboek back-ups toohello meest recente toestand van Hallo database hersteld voordat het Hallo opslag momentopname is teruggezet.</span><span class="sxs-lookup"><span data-stu-id="ba701-430">It then restores hello transaction log backups toohello most recent state of hello database before restoring hello storage snapshot.</span></span>

>[!IMPORTANT]
><span data-ttu-id="ba701-431">Voordat u doorgaat, zorg ervoor dat er een volledige en aaneengesloten reeks transactielogboekback-ups.</span><span class="sxs-lookup"><span data-stu-id="ba701-431">Before you proceed, make sure that you have a complete and contiguous chain of transaction log backups.</span></span> <span data-ttu-id="ba701-432">Zonder deze back-ups, kunt u de huidige status Hallo van Hallo-database niet terugzetten.</span><span class="sxs-lookup"><span data-stu-id="ba701-432">Without these backups, you cannot restore hello current state of hello database.</span></span>

1. <span data-ttu-id="ba701-433">Stap 1-6 van de voorgaande procedure in 'Herstellen toohello meest recente HANA momentopname.' hello voltooien</span><span class="sxs-lookup"><span data-stu-id="ba701-433">Complete steps 1-6 of hello preceding procedure in "Recovering toohello most recent HANA snapshot."</span></span>

2. <span data-ttu-id="ba701-434">Selecteer **hello tooits meest recente databasestatus herstellen**.</span><span class="sxs-lookup"><span data-stu-id="ba701-434">Select **Recover hello database tooits most recent state**.</span></span>

 ![Selecteer 'Hello tooits meest recente databasestatus herstellen'](./media/hana-overview-high-availability-disaster-recovery/image16-recover-database-a.png)

3. <span data-ttu-id="ba701-436">Geef de locatie op Hallo van Hallo meest recente HANA logboekback-ups.</span><span class="sxs-lookup"><span data-stu-id="ba701-436">Specify hello location of hello most recent HANA log backups.</span></span> <span data-ttu-id="ba701-437">Hallo-locatie moet toocontain alle HANA transactielogboekback-ups van Hallo HANA momentopname toohello meest recente status.</span><span class="sxs-lookup"><span data-stu-id="ba701-437">hello location needs toocontain all HANA transaction log backups from hello HANA snapshot toohello most recent state.</span></span>

 ![Geef de locatie Hallo van Hallo meest recente HANA logboekback-ups](./media/hana-overview-high-availability-disaster-recovery/image17-recover-database-b.png)

4. <span data-ttu-id="ba701-439">Selecteer een back-up uit welke toorecover Hallo-database.</span><span class="sxs-lookup"><span data-stu-id="ba701-439">Select a backup as a base from which toorecover hello database.</span></span> <span data-ttu-id="ba701-440">In ons voorbeeld is dit Hallo HANA momentopname die is opgenomen in het Hallo-opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-440">In our example, this is hello HANA snapshot that was included in hello storage snapshot.</span></span> <span data-ttu-id="ba701-441">(Alleen een momentopname wordt vermeld in de volgende schermafbeelding Hallo.)</span><span class="sxs-lookup"><span data-stu-id="ba701-441">(Only one snapshot is listed in hello following screenshot.)</span></span>

 ![Selecteer een back-up uit welke toorecover Hallo-database](./media/hana-overview-high-availability-disaster-recovery/image18-recover-database-c.png)

5. <span data-ttu-id="ba701-443">Schakel Hallo **gebruik Delta back-ups** selectievakje in als delta's niet bestaan tussen Hallo-tijd van Hallo HANA momentopname en de meest recente status Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-443">Clear hello **Use Delta Backups** check box if deltas do not exist between hello time of hello HANA snapshot and hello most recent state.</span></span>

 ![Schakel Hallo 'Gebruik Delta back-ups' selectievakje in als er geen delta's bestaan](./media/hana-overview-high-availability-disaster-recovery/image19-recover-database-d.png)

6. <span data-ttu-id="ba701-445">Klik op Samenvatting welkomstscherm **voltooien** toostart Hallo herstelbewerking procedure.</span><span class="sxs-lookup"><span data-stu-id="ba701-445">On hello summary screen, click **Finish** toostart hello restoration procedure.</span></span>

 ![Klik op 'Voltooid' in de samenvatting welkomstscherm](./media/hana-overview-high-availability-disaster-recovery/image20-recover-database-e.png)

### <a name="recovering-tooanother-point-in-time"></a><span data-ttu-id="ba701-447">Herstellende tooanother punt in tijd</span><span class="sxs-lookup"><span data-stu-id="ba701-447">Recovering tooanother point in time</span></span>
<span data-ttu-id="ba701-448">toorecover tooa punt in tijd tussen het Hallo HANA momentopname (opgenomen in Hallo opslag momentopname) en die is hoger dan Hallo HANA momentopname maken van het herstel van een punt in tijd Hallo te volgen:</span><span class="sxs-lookup"><span data-stu-id="ba701-448">toorecover tooa point in time between hello HANA snapshot (included in hello storage snapshot) and one that is later than hello HANA snapshot point-in-time recovery, do hello following:</span></span>

1. <span data-ttu-id="ba701-449">Zorg ervoor dat u alle transactielogboekback-ups van Hallo HANA momentopname toohello tijd die u toorecover wilt hebt.</span><span class="sxs-lookup"><span data-stu-id="ba701-449">Make sure that you have all transaction log backups from hello HANA snapshot toohello time you want toorecover.</span></span>
2. <span data-ttu-id="ba701-450">Begin Hallo procedure onder "Toohello meest recente herstelstatus."</span><span class="sxs-lookup"><span data-stu-id="ba701-450">Begin hello procedure under "Recovering toohello most recent state."</span></span>
3. <span data-ttu-id="ba701-451">In stap 2 van het Hallo-procedure in Hallo **hersteltype opgeven** Selecteer **herstellen Hallo database toohello volgende tijdstip**, geef Hallo punt in tijd en voltooi stap 3-6.</span><span class="sxs-lookup"><span data-stu-id="ba701-451">In step 2 of hello procedure, in hello **Specify Recovery Type** window, select **Recover hello database toohello following point in time**, specify hello point in time, and then complete steps 3-6.</span></span>

## <a name="monitoring-hello-execution-of-snapshots"></a><span data-ttu-id="ba701-452">Bewaking van Hallo uitvoering van momentopnamen</span><span class="sxs-lookup"><span data-stu-id="ba701-452">Monitoring hello execution of snapshots</span></span>

<span data-ttu-id="ba701-453">U moet toomonitor Hallo uitvoering van opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="ba701-453">You need toomonitor hello execution of storage snapshots.</span></span> <span data-ttu-id="ba701-454">Hallo-script dat wordt uitgevoerd een opslag-momentopnamen tooa uitvoerbestand schrijft en slaat deze toohello dezelfde locatie als Hallo Perl-scripts.</span><span class="sxs-lookup"><span data-stu-id="ba701-454">hello script that executes a storage snapshot writes output tooa file and then saves it toohello same location as hello Perl scripts.</span></span> <span data-ttu-id="ba701-455">Een afzonderlijk bestand is geschreven voor elke momentopname.</span><span class="sxs-lookup"><span data-stu-id="ba701-455">A separate file is written for each snapshot.</span></span> <span data-ttu-id="ba701-456">Hallo Hallo-uitvoer van elk bestand duidelijk aangeeft verschillende fasen die Hallo momentopname script wordt uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="ba701-456">hello output of each file clearly shows hello various phases that hello snapshot script executes:</span></span>

- <span data-ttu-id="ba701-457">Hallo-volumes die toocreate moeten zoeken een momentopname</span><span class="sxs-lookup"><span data-stu-id="ba701-457">Finding hello volumes that need toocreate a snapshot</span></span>
- <span data-ttu-id="ba701-458">Hallo momentopnamen die afkomstig zijn uit deze volumes zoeken</span><span class="sxs-lookup"><span data-stu-id="ba701-458">Finding hello snapshots taken from these volumes</span></span>
- <span data-ttu-id="ba701-459">Verwijderen van eventuele bestaande momentopnamen toomatch Hallo aantal momentopnamen die u hebt opgegeven</span><span class="sxs-lookup"><span data-stu-id="ba701-459">Deleting eventual existing snapshots toomatch hello number of snapshots you specified</span></span>
- <span data-ttu-id="ba701-460">Maken van een momentopname HANA</span><span class="sxs-lookup"><span data-stu-id="ba701-460">Creating a HANA snapshot</span></span>
- <span data-ttu-id="ba701-461">Maken van een Hallo opslag momentopname via Hallo volumes</span><span class="sxs-lookup"><span data-stu-id="ba701-461">Creating hello storage snapshot over hello volumes</span></span>
- <span data-ttu-id="ba701-462">Hallo HANA momentopname verwijderen</span><span class="sxs-lookup"><span data-stu-id="ba701-462">Deleting hello HANA snapshot</span></span>
- <span data-ttu-id="ba701-463">Naam van recentste Hallo momentopname te maken van**.0**</span><span class="sxs-lookup"><span data-stu-id="ba701-463">Renaming hello most recent snapshot too**.0**</span></span>

<span data-ttu-id="ba701-464">Hallo belangrijkste deel van het Hallo-script is als volgt:</span><span class="sxs-lookup"><span data-stu-id="ba701-464">hello most important part of hello script is this:</span></span>
```
**********************Creating HANA snapshot**********************
Creating hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data create snapshot"" ...
HANA snapshot created successfully.
**********************Creating Storage snapshot**********************
Taking snapshot hourly.recent for hana_data_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_backup_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_shared_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for sapmnt_lhanad01_t020_vol ...
Snapshot created successfully.
**********************Deleting HANA snapshot**********************
Deleting hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data drop snapshot"" ...
HANA snapshot deletion successfully.
```
<span data-ttu-id="ba701-465">U kunt van dit voorbeeld zien hoe Hallo script records maken van een momentopname van Hallo HANA Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-465">You can see from this sample how hello script records hello creation of hello HANA snapshot.</span></span> <span data-ttu-id="ba701-466">In geval van de scale-out hello, wordt dit proces gestart op Hallo hoofdknooppunt.</span><span class="sxs-lookup"><span data-stu-id="ba701-466">In hello scale-out case, this process is initiated on hello master node.</span></span> <span data-ttu-id="ba701-467">Hallo-hoofdknooppunt initieert Hallo synchrone maken van momentopnamen op elke worker-knooppunten Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="ba701-467">hello master node initiates hello synchronous creation of hello snapshots on each of hello worker nodes.</span></span> <span data-ttu-id="ba701-468">Vervolgens wordt Hallo opslag momentopname gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ba701-468">Then hello storage snapshot is taken.</span></span> <span data-ttu-id="ba701-469">Na de geslaagde uitvoering Hallo van Hallo-opslag-momentopnamen, is Hallo HANA momentopname verwijderd.</span><span class="sxs-lookup"><span data-stu-id="ba701-469">After hello successful execution of hello storage snapshots, hello HANA snapshot is deleted.</span></span>
