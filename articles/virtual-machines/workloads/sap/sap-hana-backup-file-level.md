---
title: aaaSAP HANA Azure back-up op bestandsniveau | Microsoft Docs
description: Er zijn twee primaire back-mogelijkheden voor SAP HANA op virtuele machines in Azure, in dit artikel bevat informatie over SAP HANA Azure Backup op bestandsniveau
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: d5a55de5634ac7724e7fd0fa3760c6c408c3db74
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-azure-backup-on-file-level"></a><span data-ttu-id="94bd6-103">SAP HANA Azure back-up op bestandsniveau</span><span class="sxs-lookup"><span data-stu-id="94bd6-103">SAP HANA Azure Backup on file level</span></span>

## <a name="introduction"></a><span data-ttu-id="94bd6-104">Inleiding</span><span class="sxs-lookup"><span data-stu-id="94bd6-104">Introduction</span></span>

<span data-ttu-id="94bd6-105">Dit maakt deel uit van een reeks drie delen met verwante artikelen op SAP HANA back-up.</span><span class="sxs-lookup"><span data-stu-id="94bd6-105">This is part of a three-part series of related articles on SAP HANA backup.</span></span> <span data-ttu-id="94bd6-106">[Back-handleiding voor SAP HANA op Azure Virtual Machines](./sap-hana-backup-guide.md) biedt een overzicht en informatie over het aan de slag, en [SAP HANA back-up op basis van opslag-momentopnamen](./sap-hana-backup-storage-snapshots.md) dekt Hallo opslag op basis van een momentopname optie back-up.</span><span class="sxs-lookup"><span data-stu-id="94bd6-106">[Backup guide for SAP HANA on Azure Virtual Machines](./sap-hana-backup-guide.md) provides an overview and information on getting started, and [SAP HANA backup based on storage snapshots](./sap-hana-backup-storage-snapshots.md) covers hello storage snapshot-based backup option.</span></span>

<span data-ttu-id="94bd6-107">U bekijkt hello Azure VM-grootten, kunnen zien dat een GS5 64 bijgesloten gegevensschijven toestaat.</span><span class="sxs-lookup"><span data-stu-id="94bd6-107">Looking at hello Azure VM sizes, one can see that a GS5 allows 64 attached data disks.</span></span> <span data-ttu-id="94bd6-108">Voor grote SAP HANA-systemen, mogelijk al een groot aantal schijven worden gebruikt voor gegevens en logboekbestanden, mogelijk in combinatie met software-RAID voor optimale schijf-i/o-doorvoer.</span><span class="sxs-lookup"><span data-stu-id="94bd6-108">For large SAP HANA systems, a significant number of disks might already be taken for data and log files, possibly in combination with software RAID for optimal disk IO throughput.</span></span> <span data-ttu-id="94bd6-109">vervolgens Hallo vraag is waar toostore SAP HANA back-up van bestanden, wat kunnen opvullen Hallo gekoppeld gegevens schijven na verloop van tijd?</span><span class="sxs-lookup"><span data-stu-id="94bd6-109">hello question then is where toostore SAP HANA backup files, which could fill up hello attached data disks over time?</span></span> <span data-ttu-id="94bd6-110">Zie [grootten voor virtuele Linux-machines in Azure](../../linux/sizes.md) voor hello Azure VM-grootte tabellen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-110">See [Sizes for Linux virtual machines in Azure](../../linux/sizes.md) for hello Azure VM size tables.</span></span>

<span data-ttu-id="94bd6-111">Er is geen back-up SAP HANA-integratie met Azure Backup-service beschikbaar op dit moment.</span><span class="sxs-lookup"><span data-stu-id="94bd6-111">There is no SAP HANA backup integration available with Azure Backup service at this time.</span></span> <span data-ttu-id="94bd6-112">Hallo standaardmanier toomanage back-up/herstel op bestandsniveau Hallo met een back-ups via SAP HANA Studio of een SAP HANA-SQL-instructies is.</span><span class="sxs-lookup"><span data-stu-id="94bd6-112">hello standard way toomanage backup/restore at hello file level is with a file-based backup via SAP HANA Studio or via SAP HANA SQL statements.</span></span> <span data-ttu-id="94bd6-113">Zie [SAP HANA SQL en System weergaven verwijzing](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="94bd6-113">See [SAP HANA SQL and System Views Reference](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) for more information.</span></span>

![Deze afbeelding ziet u Hallo dialoogvenster van de back-up menuopdracht Hallo in SAP HANA-Studio](media/sap-hana-backup-file-level/image022.png)

<span data-ttu-id="94bd6-115">Deze afbeelding ziet Hallo dialoogvenster van de back-up menuopdracht Hallo in SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="94bd6-115">This figure shows hello dialog of hello backup menu item in SAP HANA Studio.</span></span> <span data-ttu-id="94bd6-116">Bij het kiezen van type &quot;bestand&quot; een heeft toospecify een pad in Hallo bestandssysteem waar SAP HANA Hallo back-upbestanden schrijft.</span><span class="sxs-lookup"><span data-stu-id="94bd6-116">When choosing type &quot;file,&quot; one has toospecify a path in hello file system where SAP HANA writes hello backup files.</span></span> <span data-ttu-id="94bd6-117">Herstel werkt Hallo dezelfde manier.</span><span class="sxs-lookup"><span data-stu-id="94bd6-117">Restore works hello same way.</span></span>

<span data-ttu-id="94bd6-118">Deze keuze klinkt eenvoudig en eenvoudig, maar er zijn enkele overwegingen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-118">While this choice sounds simple and straight forward, there are some considerations.</span></span> <span data-ttu-id="94bd6-119">Zoals al eerder vermeld, heeft een virtuele machine in Azure een beperking van het aantal gegevensschijven dat kan worden gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="94bd6-119">As mentioned before, an Azure VM has a limitation of number of data disks that can be attached.</span></span> <span data-ttu-id="94bd6-120">Er mogelijk geen capaciteit toostore SAP HANA back-upbestanden op Hallo bestandssystemen Hallo VM, afhankelijk van de grootte Hallo van Hallo database en schijf doorvoer vereisten, waarbij software RAID striping over meerdere schijven gebruiken.</span><span class="sxs-lookup"><span data-stu-id="94bd6-120">There might not be capacity toostore SAP HANA backup files on hello file systems of hello VM, depending on hello size of hello database and disk throughput requirements, which might involve software RAID using striping across multiple data disks.</span></span> <span data-ttu-id="94bd6-121">Verschillende opties voor het verplaatsen van deze back-upbestanden en het beheren van het bestand groottebeperkingen en prestaties bij het verwerken van terabytes aan gegevens, vindt u verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="94bd6-121">Various options for moving these backup files, and managing file size restrictions and performance when handling terabytes of data, are provided later in this article.</span></span>

<span data-ttu-id="94bd6-122">Een andere optie, die meer vrijheid met betrekking tot de totale capaciteit biedt, is Azure blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-122">Another option, which offers more freedom regarding total capacity, is Azure blob storage.</span></span> <span data-ttu-id="94bd6-123">Één blob is ook beperkte too1 TB, is Hallo totale capaciteit van een enkele blob-container momenteel 500 TB.</span><span class="sxs-lookup"><span data-stu-id="94bd6-123">While a single blob is also restricted too1 TB, hello total capacity of a single blob container is currently 500 TB.</span></span> <span data-ttu-id="94bd6-124">Bovendien geeft klanten Hallo choice tooselect zogenaamde &quot;cool&quot; blob-opslag, waarmee een voordeel kosten heeft.</span><span class="sxs-lookup"><span data-stu-id="94bd6-124">Additionally, it gives customers hello choice tooselect so-called &quot;cool&quot; blob storage, which has a cost benefit.</span></span> <span data-ttu-id="94bd6-125">Zie [Azure Blob Storage: Hot en cool opslaglagen](../../../storage/blobs/storage-blob-storage-tiers.md) voor meer informatie over cool blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-125">See [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md) for details about cool blob storage.</span></span>

<span data-ttu-id="94bd6-126">Gebruik een geogerepliceerde storage account toostore Hallo SAP HANA back-ups voor extra veiligheid.</span><span class="sxs-lookup"><span data-stu-id="94bd6-126">For additional safety, use a geo-replicated storage account toostore hello SAP HANA backups.</span></span> <span data-ttu-id="94bd6-127">Zie [Azure Storage-replicatie](../../../storage/common/storage-redundancy.md) voor meer informatie over de storage-account-replicatie.</span><span class="sxs-lookup"><span data-stu-id="94bd6-127">See [Azure Storage replication](../../../storage/common/storage-redundancy.md) for details about storage account replication.</span></span>

<span data-ttu-id="94bd6-128">Een kan toegewezen virtuele harde schijven voor SAP HANA back-ups in een toegewezen back-upopslag-account dat geogerepliceerde plaatsen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-128">One could place dedicated VHDs for SAP HANA backups in a dedicated backup storage account that is geo-replicated.</span></span> <span data-ttu-id="94bd6-129">Anders een Hallo VHD's die Hallo SAP HANA back-ups behouden tooa geogerepliceerde opslagaccount of tooa-opslagaccount die zich in een andere regio kan kopiëren.</span><span class="sxs-lookup"><span data-stu-id="94bd6-129">Or else one could copy hello VHDs that keep hello SAP HANA backups tooa geo-replicated storage account, or tooa storage account that is in a different region.</span></span>

## <a name="azure-backup-agent"></a><span data-ttu-id="94bd6-130">Azure backup-agent</span><span class="sxs-lookup"><span data-stu-id="94bd6-130">Azure backup agent</span></span>

<span data-ttu-id="94bd6-131">Azure backup biedt Hallo optie toonot alleen back-up maken volledige virtuele machines, maar ook bestanden en mappen via Hallo back-agent, die is geïnstalleerd op Hallo gastbesturingssysteem toobe.</span><span class="sxs-lookup"><span data-stu-id="94bd6-131">Azure backup offers hello option toonot only back up complete VMs, but also files and directories via hello backup agent, which has toobe installed on hello guest OS.</span></span> <span data-ttu-id="94bd6-132">Maar deze agent wordt vanaf December 2016 wordt alleen ondersteund op Windows (Zie [Back-up van een Windows Server of client tooAzure met Resource Manager-implementatiemodel Hallo](../../../backup/backup-configure-vault.md)).</span><span class="sxs-lookup"><span data-stu-id="94bd6-132">But as of December 2016, this agent is only supported on Windows (see [Back up a Windows Server or client tooAzure using hello Resource Manager deployment model](../../../backup/backup-configure-vault.md)).</span></span>

<span data-ttu-id="94bd6-133">Een tijdelijke oplossing is toofirst kopie SAP HANA back-upbestanden tooa virtuele Windows-machine in Azure (bijvoorbeeld via SAMBA-share) en gebruik vervolgens hello Azure backup-agent van daaruit.</span><span class="sxs-lookup"><span data-stu-id="94bd6-133">A workaround is toofirst copy SAP HANA backup files tooa Windows VM on Azure (for example, via SAMBA share) and then use hello Azure backup agent from there.</span></span> <span data-ttu-id="94bd6-134">Hoewel het technisch mogelijk is, zou deze complexiteit en vertragen Hallo back-up of herstel van proces nogal vanwege toohello kopiëren tussen hello Linux- en virtuele machine van Windows hello.</span><span class="sxs-lookup"><span data-stu-id="94bd6-134">While it is technically possible, it would add complexity and slow down hello backup or restore process quite a bit due toohello copy between hello Linux and hello Windows VM.</span></span> <span data-ttu-id="94bd6-135">Het is niet aanbevolen toofollow deze benadering.</span><span class="sxs-lookup"><span data-stu-id="94bd6-135">It is not recommended toofollow this approach.</span></span>

## <a name="azure-blobxfer-utility-details"></a><span data-ttu-id="94bd6-136">Azure blobxfer hulpprogramma details</span><span class="sxs-lookup"><span data-stu-id="94bd6-136">Azure blobxfer utility details</span></span>

<span data-ttu-id="94bd6-137">toostore mappen en bestanden op Azure-opslag, kan een CLI of PowerShell gebruiken of ontwikkelt u een hulpprogramma met behulp van een Hallo [Azure SDK's](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="94bd6-137">toostore directories and files on Azure storage, one could use CLI or PowerShell, or develop a tool using one of hello [Azure SDKs](https://azure.microsoft.com/downloads/).</span></span> <span data-ttu-id="94bd6-138">Er is ook een kant-en-klare hulpprogramma, AzCopy, voor het kopiëren van gegevens tooAzure opslag, maar dit is alleen Windows (Zie [gegevensoverdracht met het AzCopy-opdrachtregelprogramma hulpprogramma Hallo](../../../storage/common/storage-use-azcopy.md)).</span><span class="sxs-lookup"><span data-stu-id="94bd6-138">There is also a ready-to-use utility, AzCopy, for copying data tooAzure storage, but it is Windows only (see [Transfer data with hello AzCopy Command-Line Utility](../../../storage/common/storage-use-azcopy.md)).</span></span>

<span data-ttu-id="94bd6-139">Daarom is blobxfer gebruikt voor het kopiëren van de back-upbestanden SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="94bd6-139">Therefore blobxfer was used for copying SAP HANA backup files.</span></span> <span data-ttu-id="94bd6-140">Het is open-source, die wordt gebruikt door veel klanten in een productieomgeving en beschikbaar zijn op [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="94bd6-140">It is open source, used by many customers in production environments, and available on [GitHub](https://github.com/Azure/blobxfer).</span></span> <span data-ttu-id="94bd6-141">Dit hulpprogramma kunt één toocopy gegevens rechtstreeks tooeither Azure blob-opslag- of Azure-bestandsshare.</span><span class="sxs-lookup"><span data-stu-id="94bd6-141">This tool allows one toocopy data directly tooeither Azure blob storage or Azure file share.</span></span> <span data-ttu-id="94bd6-142">Biedt ook een aantal handige functies, zoals md5-hash of automatische parallelle uitvoering bij het kopiëren van een map met meerdere bestanden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-142">It also offers a range of useful features, like md5 hash or automatic parallelism when copying a directory with multiple files.</span></span>

## <a name="sap-hana-backup-performance"></a><span data-ttu-id="94bd6-143">SAP HANA back-upprestaties</span><span class="sxs-lookup"><span data-stu-id="94bd6-143">SAP HANA backup performance</span></span>

![Deze schermafbeelding is van het Hallo SAP HANA-back-console in SAP HANA-Studio](media/sap-hana-backup-file-level/image023.png)

<span data-ttu-id="94bd6-145">Deze schermafbeelding is van het Hallo SAP HANA-back-console in SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="94bd6-145">This screenshot is of hello SAP HANA backup console in SAP HANA Studio.</span></span> <span data-ttu-id="94bd6-146">Geduurd ongeveer 42 minuten toodo Hallo back-up van Hallo 230 GB op een schijf één Azure standard-opslag toohello HANA VM gekoppeld met XFS file system.</span><span class="sxs-lookup"><span data-stu-id="94bd6-146">It took about 42 minutes toodo hello backup of hello 230 GB on a single Azure standard storage disk attached toohello HANA VM using XFS file system.</span></span>

![Deze schermafbeelding is van het YaST op Hallo SAP HANA test-VM](media/sap-hana-backup-file-level/image024.png)

<span data-ttu-id="94bd6-148">Deze schermafbeelding is van YaST op Hallo SAP HANA test-VM.</span><span class="sxs-lookup"><span data-stu-id="94bd6-148">This screenshot is of YaST on hello SAP HANA test VM.</span></span> <span data-ttu-id="94bd6-149">Hallo één schijf voor SAP HANA back-up van 1 TB kunnen zien zoals al eerder vermeld.</span><span class="sxs-lookup"><span data-stu-id="94bd6-149">One can see hello 1-TB single disk for SAP HANA backup as mentioned before.</span></span> <span data-ttu-id="94bd6-150">Het toobackup punt 42 minuten in beslag nam 230 GB.</span><span class="sxs-lookup"><span data-stu-id="94bd6-150">It took about 42 minutes toobackup 230 GB.</span></span> <span data-ttu-id="94bd6-151">Bovendien vijf 200 GB schijven zijn gekoppeld en software-RAID-md0 met striping boven op deze vijf Azure gegevensschijven gemaakt.</span><span class="sxs-lookup"><span data-stu-id="94bd6-151">In addition, five 200-GB disks were attached and software RAID md0 created, with striping on top of these five Azure data disks.</span></span>

![Hallo dezelfde back-up op software-RAID met striping over vijf herhalende gegevensschijven Azure standard-opslag gekoppeld](media/sap-hana-backup-file-level/image025.png)

<span data-ttu-id="94bd6-153">Herhalende Hallo dezelfde back-up op software-RAID met striping over vijf gekoppeld Azure standard-opslag gegevens schijven gebracht Hallo back-uptijd van 42 minuten omlaag too10 minuten.</span><span class="sxs-lookup"><span data-stu-id="94bd6-153">Repeating hello same backup on software RAID with striping across five attached Azure standard storage data disks brought hello backup time from 42 minutes down too10 minutes.</span></span> <span data-ttu-id="94bd6-154">Hallo schijven zijn zonder caching toohello VM gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="94bd6-154">hello disks were attached without caching toohello VM.</span></span> <span data-ttu-id="94bd6-155">Het is daarom duidelijk hoe belangrijk schijf schrijfbewerkingen is voor de back-uptijd Hallo.</span><span class="sxs-lookup"><span data-stu-id="94bd6-155">So it is obvious how important disk write throughput is for hello backup time.</span></span> <span data-ttu-id="94bd6-156">Een kan vervolgens switch tooAzure premium storage toofurther versnellen Hallo-proces voor optimale prestaties.</span><span class="sxs-lookup"><span data-stu-id="94bd6-156">One could then switch tooAzure premium storage toofurther accelerate hello process for optimal performance.</span></span> <span data-ttu-id="94bd6-157">In het algemeen moet Azure premium-opslag worden gebruikt voor productiesystemen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-157">In general, Azure premium storage should be used for production systems.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-blob-storage"></a><span data-ttu-id="94bd6-158">Blob-opslag voor SAP HANA back-upbestanden tooAzure kopiëren</span><span class="sxs-lookup"><span data-stu-id="94bd6-158">Copy SAP HANA backup files tooAzure blob storage</span></span>

<span data-ttu-id="94bd6-159">Zoals December 2016 is Hallo beste is optie tooquickly store SAP HANA back-upbestanden Azure blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-159">As of December 2016, hello best option tooquickly store SAP HANA backup files is Azure blob storage.</span></span> <span data-ttu-id="94bd6-160">Één enkele blob-container kent een limiet van 500 TB, voldoende is voor de meeste SAP HANA-systemen, in een VM GS5 uitgevoerd op Azure, tookeep voldoende SAP HANA-back-ups.</span><span class="sxs-lookup"><span data-stu-id="94bd6-160">One single blob container has a limit of 500 TB, enough for most SAP HANA systems, running in a GS5 VM on Azure, tookeep sufficient SAP HANA backups.</span></span> <span data-ttu-id="94bd6-161">Klanten hebben de keuze tussen Hallo &quot;hot&quot; en &quot;koude&quot; blob-opslag (Zie [Azure Blob Storage: Hot en cool opslaglagen](../../../storage/blobs/storage-blob-storage-tiers.md)).</span><span class="sxs-lookup"><span data-stu-id="94bd6-161">Customers have hello choice between &quot;hot&quot; and &quot;cold&quot; blob storage (see [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md)).</span></span>

<span data-ttu-id="94bd6-162">Hallo blobxfer hulpprogramma is het eenvoudig toocopy Hallo SAP HANA back-upbestanden direct tooAzure blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-162">With hello blobxfer tool, it is easy toocopy hello SAP HANA backup files directly tooAzure blob storage.</span></span>

![Hier ziet een Hallo-bestanden van een volledige SAP HANA bestandsback-up](media/sap-hana-backup-file-level/image026.png)

<span data-ttu-id="94bd6-164">Hier ziet een Hallo-bestanden van een volledige SAP HANA bestandsback-up.</span><span class="sxs-lookup"><span data-stu-id="94bd6-164">Here one can see hello files of a full SAP HANA file backup.</span></span> <span data-ttu-id="94bd6-165">Er zijn vier bestanden en hello grootste heeft ongeveer 230 GB.</span><span class="sxs-lookup"><span data-stu-id="94bd6-165">There are four files and hello biggest one has roughly 230 GB.</span></span>

![Geduurd ongeveer 3000 seconden toocopy Hallo 230 GB account blob-container tooan Azure standard-opslag](media/sap-hana-backup-file-level/image027.png)

<span data-ttu-id="94bd6-167">Md5-hash niet gebruikt in de eerste test hello, geduurd ongeveer 3000 seconden toocopy Hallo 230 GB account blob-container tooan Azure standard-opslag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-167">Not using md5 hash in hello initial test, it took roughly 3000 seconds toocopy hello 230 GB tooan Azure standard storage account blob container.</span></span>

![In deze schermafbeelding kunnen zien hoe het eruit ziet op Hallo Azure-portal](media/sap-hana-backup-file-level/image028.png)

<span data-ttu-id="94bd6-169">In deze schermafbeelding kunnen zien hoe het eruit ziet op Hallo Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="94bd6-169">In this screenshot, one can see how it looks on hello Azure portal.</span></span> <span data-ttu-id="94bd6-170">Een blob-container met de naam &quot;sap-hana-back-ups&quot; is gemaakt en bevat vier Hallo blobs die Hallo SAP HANA-back-upbestanden vertegenwoordigen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-170">A blob container named &quot;sap-hana-backups&quot; was created and includes hello four blobs, which represent hello SAP HANA backup files.</span></span> <span data-ttu-id="94bd6-171">Een van beide heeft een grootte van ongeveer 230 GB.</span><span class="sxs-lookup"><span data-stu-id="94bd6-171">One of them has a size of roughly 230 GB.</span></span>

<span data-ttu-id="94bd6-172">Hallo HANA Studio back-console kan één toorestrict Hallo maximale bestandsgrootte van de back-upbestanden HANA.</span><span class="sxs-lookup"><span data-stu-id="94bd6-172">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="94bd6-173">In de voorbeeld-omgeving Hallo verbeterd deze prestaties doordat het mogelijk toohave meerdere kleinere back-, in plaats van een grote 230 GB-bestand upbestanden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-173">In hello sample environment, it improved performance by making it possible toohave multiple smaller backup files, instead of one large 230-GB file.</span></span>

![Hallo back-upbestand groottelimiet instellen op Hallo HANA aan clientzijde &#39; t Hallo back-uptijd verbeteren](media/sap-hana-backup-file-level/image029.png)

<span data-ttu-id="94bd6-175">Hallo back-upbestand groottelimiet instellen op Hallo HANA aan clientzijde &#39; t Hallo back-uptijd, verbeteren omdat Hallo bestanden opeenvolgend zoals weergegeven in deze afbeelding zijn geschreven.</span><span class="sxs-lookup"><span data-stu-id="94bd6-175">Setting hello backup file size limit on hello HANA side doesn&#39;t improve hello backup time, because hello files are written sequentially as shown in this figure.</span></span> <span data-ttu-id="94bd6-176">maximale bestandsgrootte Hallo is too60 GB, ingesteld zodat Hallo back-up vier grote gegevensbestanden in plaats van Hallo 230 GB één bestand gemaakt.</span><span class="sxs-lookup"><span data-stu-id="94bd6-176">hello file size limit was set too60 GB, so hello backup created four large data files instead of hello 230-GB single file.</span></span>

![tootest parallelle uitvoering van Hallo blobxfer hulpprogramma, Hallo maximale bestandsgrootte voor HANA back-ups is Stel too15 GB](media/sap-hana-backup-file-level/image030.png)

<span data-ttu-id="94bd6-178">tootest parallelle uitvoering van Hallo blobxfer hulpprogramma, Hallo maximale bestandsgrootte voor HANA back-ups is too15 GB, wat tot 19 back-upbestanden leidde wordt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="94bd6-178">tootest parallelism of hello blobxfer tool, hello max file size for HANA backups was then set too15 GB, which resulted in 19 backup files.</span></span> <span data-ttu-id="94bd6-179">Deze configuratie gebracht Hallo tijd voor blobxfer toocopy Hallo 230 GB tooAzure blob storage van 3000 seconden omlaag too875 seconden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-179">This configuration brought hello time for blobxfer toocopy hello 230 GB tooAzure blob storage from 3000 seconds down too875 seconds.</span></span>

<span data-ttu-id="94bd6-180">Dit resultaat is vanwege toohello limiet van 60 MB per seconde voor het schrijven van een Azure-blob.</span><span class="sxs-lookup"><span data-stu-id="94bd6-180">This result is due toohello limit of 60 MB/sec for writing an Azure blob.</span></span> <span data-ttu-id="94bd6-181">Parallelle uitvoering via meerdere blobs Hallo knelpunt is opgelost, maar er is een neerwaartse: deze tooAzure voor de back-upbestanden HANA verhogen van de prestaties van Hallo blobxfer hulpprogramma toocopy plaatst blob-opslag laden op zowel Hallo HANA VM als Hallo-netwerk.</span><span class="sxs-lookup"><span data-stu-id="94bd6-181">Parallelism via multiple blobs solves hello bottleneck, but there is a downside: increasing performance of hello blobxfer tool toocopy all these HANA backup files tooAzure blob storage puts load on both hello HANA VM and hello network.</span></span> <span data-ttu-id="94bd6-182">Werking van HANA systeem wordt beïnvloed.</span><span class="sxs-lookup"><span data-stu-id="94bd6-182">Operation of HANA system becomes impacted.</span></span>

## <a name="blob-copy-of-dedicated-azure-data-disks-in-backup-software-raid"></a><span data-ttu-id="94bd6-183">BLOB-kopie van het toegewezen Azure gegevensschijven in de back-upsoftware RAID</span><span class="sxs-lookup"><span data-stu-id="94bd6-183">Blob copy of dedicated Azure data disks in backup software RAID</span></span>

<span data-ttu-id="94bd6-184">In tegenstelling tot Hallo handmatige VM gegevens schijfback-up, in hiervan een registreert back-up van alle gegevens van Hallo-schijven op een VM toosave Hallo gehele SAP-installatie, inclusief HANA gegevens, HANA niet bestanden en configuratiebestanden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-184">Unlike hello manual VM data disk backup, in this approach one does not back up all hello data disks on a VM toosave hello whole SAP installation, including HANA data, HANA log files, and config files.</span></span> <span data-ttu-id="94bd6-185">In plaats daarvan is Hallo idee toohave-specifieke software-RAID met striping over meerdere Azure-gegevens VHD's voor het opslaan van een volledige SAP HANA bestandsback-up.</span><span class="sxs-lookup"><span data-stu-id="94bd6-185">Instead, hello idea is toohave dedicated software RAID with striping across multiple Azure data VHDs for storing a full SAP HANA file backup.</span></span> <span data-ttu-id="94bd6-186">Een alleen deze schijven, die Hallo SAP HANA back-up hebt gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="94bd6-186">One copies only these disks, which have hello SAP HANA backup.</span></span> <span data-ttu-id="94bd6-187">Ze gemakkelijk kan worden bewaard in een speciale HANA back-storage-account of gekoppeld tooa toegewezen &quot;back-up management VM&quot; voor verdere verwerking.</span><span class="sxs-lookup"><span data-stu-id="94bd6-187">They could easily be kept in a dedicated HANA backup storage account, or attached tooa dedicated &quot;backup management VM&quot; for further processing.</span></span>

![Alle VHD's die zijn betrokken zijn gekopieerd met behulp van Hallo ** start-azurestorageblobcopy ** PowerShell-opdracht](media/sap-hana-backup-file-level/image031.png)

<span data-ttu-id="94bd6-189">Nadat Hallo back-toohello lokale software RAID is voltooid, alle VHD's die zijn betrokken zijn gekopieerd met behulp van Hallo **start azurestorageblobcopy** PowerShell-opdracht (Zie [Start AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span><span class="sxs-lookup"><span data-stu-id="94bd6-189">After hello backup toohello local software RAID was completed, all VHDs involved were copied using hello **start-azurestorageblobcopy** PowerShell command (see [Start-AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span></span> <span data-ttu-id="94bd6-190">Als deze is alleen van invloed op Hallo dedicated bestandssysteem voor het bewaren van back-upbestanden Hallo, zijn er geen opmerkingen over SAP HANA gegevensbestand of logboekbestand bestandsconsistentie op Hallo schijf.</span><span class="sxs-lookup"><span data-stu-id="94bd6-190">As it only affects hello dedicated file system for keeping hello backup files, there are no concerns about SAP HANA data or log file consistency on hello disk.</span></span> <span data-ttu-id="94bd6-191">Een voordeel van deze opdracht is dat deze werkt terwijl Hallo VM online blijft.</span><span class="sxs-lookup"><span data-stu-id="94bd6-191">A benefit of this command is that it works while hello VM stays online.</span></span> <span data-ttu-id="94bd6-192">toobe bepaalde dat er geen proces toohello back-stripe-set, schrijft worden toounmount ervoor dat het eerder Hallo blob kopiëren en daarna opnieuw koppelen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-192">toobe certain that no process writes toohello backup stripe set, be sure toounmount it before hello blob copy, and mount it again afterwards.</span></span> <span data-ttu-id="94bd6-193">Of een geschikte zou kunnen gebruiken voor veel te&quot;blokkeren&quot; Hallo bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="94bd6-193">Or one could use an appropriate way too&quot;freeze&quot; hello file system.</span></span> <span data-ttu-id="94bd6-194">Bijvoorbeeld, via xfs\_blokkeren voor Hallo XFS file system.</span><span class="sxs-lookup"><span data-stu-id="94bd6-194">For example, via xfs\_freeze for hello XFS file system.</span></span>

![Deze schermafbeelding ziet u Hallo lijst met blobs in Hallo VHD-container op Hallo Azure-portal](media/sap-hana-backup-file-level/image032.png)

<span data-ttu-id="94bd6-196">Deze schermafbeelding ziet u Hallo lijst met blobs in Hallo &quot;VHD's&quot; container op Hallo Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="94bd6-196">This screenshot shows hello list of blobs in hello &quot;vhds&quot; container on hello Azure portal.</span></span> <span data-ttu-id="94bd6-197">Hallo schermafbeelding ziet u Hallo vijf VHD's die zijn gekoppeld toohello SAP HANA server VM tooserve als Hallo software RAID tookeep SAP HANA back-upbestanden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-197">hello screenshot shows hello five VHDs, which were attached toohello SAP HANA server VM tooserve as hello software RAID tookeep SAP HANA backup files.</span></span> <span data-ttu-id="94bd6-198">U ziet ook Hallo vijf exemplaren die zijn uitgevoerd via de opdracht voor Hallo blob kopiëren.</span><span class="sxs-lookup"><span data-stu-id="94bd6-198">It also shows hello five copies, which were taken via hello blob copy command.</span></span>

![Voor testdoeleinden zijn Hallo kopieën van Hallo SAP HANA back-upsoftware RAID-schijven aangesloten toohello appserver VM](media/sap-hana-backup-file-level/image033.png)

<span data-ttu-id="94bd6-200">Hallo kopieën van Hallo SAP HANA back-upsoftware RAID-schijven zijn voor testdoeleinden gekoppelde toohello appserver VM.</span><span class="sxs-lookup"><span data-stu-id="94bd6-200">For testing purposes, hello copies of hello SAP HANA backup software RAID disks were attached toohello app server VM.</span></span>

![Hallo appserver VM is tooattach Hallo schijf kopieën afgesloten](media/sap-hana-backup-file-level/image034.png)

<span data-ttu-id="94bd6-202">Hallo appserver VM is afgesloten met kopieën van tooattach Hallo-schijven.</span><span class="sxs-lookup"><span data-stu-id="94bd6-202">hello app server VM was shut down tooattach hello disk copies.</span></span> <span data-ttu-id="94bd6-203">Na het starten van Hallo VM Hallo schijven en Hallo RAID zijn ontdekt correct (gekoppeld via UUID).</span><span class="sxs-lookup"><span data-stu-id="94bd6-203">After starting hello VM, hello disks and hello RAID were discovered correctly (mounted via UUID).</span></span> <span data-ttu-id="94bd6-204">Alleen Hallo koppelpunt ontbreekt, die is gemaakt via Hallo YaST partitioner.</span><span class="sxs-lookup"><span data-stu-id="94bd6-204">Only hello mount point was missing, which was created via hello YaST partitioner.</span></span> <span data-ttu-id="94bd6-205">Daarna Hallo SAP HANA back-upbestand kopieën is geworden zichtbaar op OS-niveau.</span><span class="sxs-lookup"><span data-stu-id="94bd6-205">Afterwards hello SAP HANA backup file copies became visible on OS level.</span></span>

## <a name="copy-sap-hana-backup-files-toonfs-share"></a><span data-ttu-id="94bd6-206">Kopieer de back-upbestanden SAP HANA tooNFS delen</span><span class="sxs-lookup"><span data-stu-id="94bd6-206">Copy SAP HANA backup files tooNFS share</span></span>

<span data-ttu-id="94bd6-207">toolessen hello potentiële impact op Hallo SAP HANA-systeem van een prestatie- of schijfruimte, een overwegen Hallo SAP HANA back-bestanden opslaan op een NFS-share.</span><span class="sxs-lookup"><span data-stu-id="94bd6-207">toolessen hello potential impact on hello SAP HANA system from a performance or disk space perspective, one might consider storing hello SAP HANA backup files on an NFS share.</span></span> <span data-ttu-id="94bd6-208">Technisch werkt, maar het betekent dat als host van de NFS-share Hallo Hallo met behulp van een tweede virtuele Azure-machine.</span><span class="sxs-lookup"><span data-stu-id="94bd6-208">Technically it works, but it means using a second Azure VM as hello host of hello NFS share.</span></span> <span data-ttu-id="94bd6-209">Mag niet een kleine VM-grootte vanwege toohello VM netwerkbandbreedte.</span><span class="sxs-lookup"><span data-stu-id="94bd6-209">It should not be a small VM size, due toohello VM network bandwidth.</span></span> <span data-ttu-id="94bd6-210">Deze zin vervolgens tooshut omlaag dit zouden &quot;back-up van VM&quot; en alleen voor het uitvoeren van back-up van Hallo SAP HANA te brengen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-210">It would make sense then tooshut down this &quot;backup VM&quot; and only bring it up for executing hello SAP HANA backup.</span></span> <span data-ttu-id="94bd6-211">Schrijven op een NFS share plaatst load op Hallo netwerk en effecten Hallo SAP HANA-systeem, maar alleen het beheren van back-upbestanden daarna op Hallo Hallo &quot;back-up van VM&quot; Hallo SAP HANA-systeem niet helemaal zou beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-211">Writing on an NFS share puts load on hello network and impacts hello SAP HANA system, but merely managing hello backup files afterwards on hello &quot;backup VM&quot; would not influence hello SAP HANA system at all.</span></span>

![Een NFS-share van een andere Azure-virtuele machine is gekoppeld toohello SAP HANA server VM](media/sap-hana-backup-file-level/image035.png)

<span data-ttu-id="94bd6-213">tooverify hello NFS gebruiksvoorbeeld, een NFS-share van een andere Azure-virtuele machine gekoppelde toohello SAP HANA server VM is.</span><span class="sxs-lookup"><span data-stu-id="94bd6-213">tooverify hello NFS use case, an NFS share from another Azure VM was mounted toohello SAP HANA server VM.</span></span> <span data-ttu-id="94bd6-214">Er is geen speciale NFS afstemmen toegepast.</span><span class="sxs-lookup"><span data-stu-id="94bd6-214">There was no special NFS tuning applied.</span></span>

![Het heeft back-up van 1 uur en 46 minuten toodo Hallo rechtstreeks](media/sap-hana-backup-file-level/image036.png)

<span data-ttu-id="94bd6-216">Hallo NFS-share is een snelle stripeset, zoals Hallo op Hallo SAP HANA-server.</span><span class="sxs-lookup"><span data-stu-id="94bd6-216">hello NFS share was a fast stripe set, like hello one on hello SAP HANA server.</span></span> <span data-ttu-id="94bd6-217">Niettemin geduurd 1 uur en 46 minuten toodo Hallo back-ups rechtstreeks op Hallo NFS-share in plaats van 10 minuten bij het schrijven van tooa lokale stripe-set.</span><span class="sxs-lookup"><span data-stu-id="94bd6-217">Nevertheless, it took 1 hour and 46 minutes toodo hello backup directly on hello NFS share instead of 10 minutes, when writing tooa local stripe set.</span></span>

![Hallo alternatief is niet veel sneller op 1 uur en 43 minuten](media/sap-hana-backup-file-level/image037.png)

<span data-ttu-id="94bd6-219">Hallo in plaats van een back-tooa lokale stripe-set doen en toohello kopiëren de NFS-share op OS-niveau (een eenvoudige **cp - avr** opdracht) is niet veel sneller.</span><span class="sxs-lookup"><span data-stu-id="94bd6-219">hello alternative of doing a backup tooa local stripe set and copying toohello NFS share on OS level (a simple **cp -avr** command) wasn't much quicker.</span></span> <span data-ttu-id="94bd6-220">1 uur en 43 minuten nodig was.</span><span class="sxs-lookup"><span data-stu-id="94bd6-220">It took 1 hour and 43 minutes.</span></span>

<span data-ttu-id="94bd6-221">Zodat het werkt, maar prestaties is niet geschikt is voor het Hallo 230 GB back-test.</span><span class="sxs-lookup"><span data-stu-id="94bd6-221">So it works, but performance wasn't good for hello 230-GB backup test.</span></span> <span data-ttu-id="94bd6-222">Het eruitziet zelfs slechter voor meerdere terabytes.</span><span class="sxs-lookup"><span data-stu-id="94bd6-222">It would look even worse for multi terabytes.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-file-service"></a><span data-ttu-id="94bd6-223">Kopieer van SAP HANA back-upbestanden tooAzure file-service</span><span class="sxs-lookup"><span data-stu-id="94bd6-223">Copy SAP HANA backup files tooAzure file service</span></span>

<span data-ttu-id="94bd6-224">Het is mogelijk toomount een Azure-bestandsshare binnen een Azure Linux VM.</span><span class="sxs-lookup"><span data-stu-id="94bd6-224">It is possible toomount an Azure file share inside an Azure Linux VM.</span></span> <span data-ttu-id="94bd6-225">Hallo artikel [hoe toouse Azure File storage met Linux](../../../storage/files/storage-how-to-use-files-linux.md) bevat details over het toodo deze.</span><span class="sxs-lookup"><span data-stu-id="94bd6-225">hello article [How toouse Azure File storage with Linux](../../../storage/files/storage-how-to-use-files-linux.md) provides details on how toodo it.</span></span> <span data-ttu-id="94bd6-226">Houd er rekening mee dat er momenteel een quotumlimiet van 5 TB van een Azure-bestandsshare en een maximale grootte van 1 TB per bestand is.</span><span class="sxs-lookup"><span data-stu-id="94bd6-226">Keep in mind that there is currently a 5-TB quota limit of one Azure file share, and a file size limit of 1 TB per file.</span></span> <span data-ttu-id="94bd6-227">Zie [Azure Storage Scalability and Performance Targets](../../../storage/common/storage-scalability-targets.md) voor meer informatie over opslaglimieten.</span><span class="sxs-lookup"><span data-stu-id="94bd6-227">See [Azure Storage Scalability and Performance Targets](../../../storage/common/storage-scalability-targets.md) for information on storage limits.</span></span>

<span data-ttu-id="94bd6-228">Tests is gebleken, maar die niet van SAP HANA-back-up &#39; t momenteel rechtstreeks met dit soort CIFS koppelpunten werkt.</span><span class="sxs-lookup"><span data-stu-id="94bd6-228">Tests have shown, however, that SAP HANA backup doesn&#39;t currently work directly with this kind of CIFS mount.</span></span> <span data-ttu-id="94bd6-229">Het is ook vermeld in de [SAP-notitie 1820529](https://launchpad.support.sap.com/#/notes/1820529) die CIFS wordt niet aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="94bd6-229">It is also stated in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529) that CIFS is not recommended.</span></span>

![Deze afbeelding ziet een fout in de back-dialoogvenster Hallo in SAP HANA-Studio](media/sap-hana-backup-file-level/image038.png)

<span data-ttu-id="94bd6-231">Deze afbeelding ziet u een fout in de back-dialoogvenster Hallo in SAP HANA Studio wanneer u probeert tooback up rechtstreeks tooa CIFS gekoppelde Azure-bestandsshare.</span><span class="sxs-lookup"><span data-stu-id="94bd6-231">This figure shows an error in hello backup dialog in SAP HANA Studio, when trying tooback up directly tooa CIFS-mounted Azure file share.</span></span> <span data-ttu-id="94bd6-232">Zodat een toodo standaard SAP HANA back-up in een VM-bestandssysteem eerst heeft en vervolgens back-upkopie Hallo van er tooAzure bestanden file-service.</span><span class="sxs-lookup"><span data-stu-id="94bd6-232">So one has toodo a standard SAP HANA backup into a VM file system first, and then copy hello backup files from there tooAzure file service.</span></span>

![Deze afbeelding ziet u dat het heeft geduurd over 929 seconden toocopy 19 SAP HANA back-upbestanden](media/sap-hana-backup-file-level/image039.png)

<span data-ttu-id="94bd6-234">Deze afbeelding ziet u dat het heeft geduurd over 929 seconden toocopy 19 SAP HANA back-upbestanden met een totale grootte van ongeveer 230 GB toohello Azure-bestandsshare.</span><span class="sxs-lookup"><span data-stu-id="94bd6-234">This figure shows that it took about 929 seconds toocopy 19 SAP HANA backup files with a total size of roughly 230 GB toohello Azure file share.</span></span>

![Hallo bron-mapstructuur op Hallo SAP HANA VM is gekopieerde toohello Azure-bestandsshare](media/sap-hana-backup-file-level/image040.png)

<span data-ttu-id="94bd6-236">In deze schermafbeelding kunnen zien dat Hallo bron-mapstructuur op Hallo SAP HANA VM gekopieerde toohello Azure-bestandsshare is: één map (hana\_back-\_fsl\_15 gb) en 19 afzonderlijke back-upbestanden.</span><span class="sxs-lookup"><span data-stu-id="94bd6-236">In this screenshot, one can see that hello source directory structure on hello SAP HANA VM was copied toohello Azure file share: one directory (hana\_backup\_fsl\_15gb) and 19 individual backup files.</span></span>

<span data-ttu-id="94bd6-237">Opslaan van back-upbestanden op Azure files SAP HANA mogelijk een interessante optie in toekomstige Hallo wanneer SAP HANA back-ups rechtstreeks ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="94bd6-237">Storing SAP HANA backup files on Azure files could be an interesting option in hello future when SAP HANA file backups support it directly.</span></span> <span data-ttu-id="94bd6-238">Of wanneer deze mogelijk is toomount Azure bestanden via NFS en Hallo limiet aanzienlijk hoger is dan 5 TB.</span><span class="sxs-lookup"><span data-stu-id="94bd6-238">Or when it becomes possible toomount Azure files via NFS and hello maximum quota limit is considerably higher than 5 TB.</span></span>

## <a name="next-steps"></a><span data-ttu-id="94bd6-239">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="94bd6-239">Next steps</span></span>
* <span data-ttu-id="94bd6-240">[Back-handleiding voor SAP HANA op Azure Virtual Machines](sap-hana-backup-guide.md) biedt een overzicht en informatie over aan de slag.</span><span class="sxs-lookup"><span data-stu-id="94bd6-240">[Backup guide for SAP HANA on Azure Virtual Machines](sap-hana-backup-guide.md) gives an overview and information on getting started.</span></span>
* <span data-ttu-id="94bd6-241">[SAP HANA back-up op basis van opslag-momentopnamen](sap-hana-backup-storage-snapshots.md) beschrijft Hallo opslag op basis van een momentopname optie back-up.</span><span class="sxs-lookup"><span data-stu-id="94bd6-241">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="94bd6-242">hoe tooestablish hoge beschikbaarheid en herstel na noodgevallen van SAP HANA plannen in Azure (grote exemplaren), Zie toolearn [SAP HANA (grote exemplaren) hoge beschikbaarheid en herstel na noodgevallen op Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="94bd6-242">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
