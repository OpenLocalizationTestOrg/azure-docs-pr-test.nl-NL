---
title: Back-handleiding voor SAP HANA op Azure Virtual Machines | Microsoft Docs
description: Back-handleiding voor SAP HANA bevat twee belangrijke back-mogelijkheden voor SAP HANA voor virtuele machines in Azure
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: 9e5b124643b753f404ba6012d3df998f567be59a
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="2d831-103">Back-uphandleiding voor SAP HANA op Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="2d831-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="2d831-104">Aan de slag</span><span class="sxs-lookup"><span data-stu-id="2d831-104">Getting Started</span></span>

<span data-ttu-id="2d831-105">De back-handleiding voor SAP HANA uitgevoerd op virtuele Machines in Azure wordt alleen Azure-specifieke onderwerpen beschreven.</span><span class="sxs-lookup"><span data-stu-id="2d831-105">The backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="2d831-106">Raadpleeg voor algemene SAP HANA back-up verwante items, de SAP HANA-documentatie (Zie _back-documentatie voor SAP HANA_ verderop in dit artikel).</span><span class="sxs-lookup"><span data-stu-id="2d831-106">For general SAP HANA backup related items, check the SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="2d831-107">De focus van dit artikel is op twee belangrijke back-mogelijkheden voor SAP HANA op Azure virtuele machines:</span><span class="sxs-lookup"><span data-stu-id="2d831-107">The focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="2d831-108">HANA back-up naar het bestandssysteem in een Azure virtuele Linux-Machine (Zie [SAP HANA Azure Backup op bestandsniveau](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="2d831-108">HANA backup to the file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="2d831-109">HANA back-up op basis van opslag-momentopnamen met behulp van de functie Azure-opslag-blob momentopname handmatig of Azure Backup-Service (Zie [SAP HANA back-up op basis van opslag-momentopnamen](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="2d831-109">HANA backup based on storage snapshots using the Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="2d831-110">SAP HANA biedt een back-up van de API waarmee back-uphulpprogramma's van derden integreren rechtstreeks met SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2d831-110">SAP HANA offers a backup API, which allows third-party backup tools to integrate directly with SAP HANA.</span></span> <span data-ttu-id="2d831-111">(Dat is niet binnen het bereik van deze handleiding.) Er is geen directe integratie van SAP HANA met Azure Backup-service beschikbaar is genomen op basis van deze API.</span><span class="sxs-lookup"><span data-stu-id="2d831-111">(That is not within the scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="2d831-112">SAP HANA officieel op Azure VM-type GS5 wordt ondersteund als één exemplaar met een extra beperking OLAP-werkbelastingen (Zie [vinden gecertificeerd IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) op de website SAP).</span><span class="sxs-lookup"><span data-stu-id="2d831-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction to OLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on the SAP website).</span></span> <span data-ttu-id="2d831-113">In dit artikel wordt bijgewerkt als nieuwe aanbiedingen voor SAP HANA op Azure beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="2d831-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="2d831-114">Er is ook een SAP HANA hybride oplossing beschikbaar in Azure, waarbij SAP HANA waarop niet-gevirtualiseerde fysieke servers.</span><span class="sxs-lookup"><span data-stu-id="2d831-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="2d831-115">Deze back-handleiding voor SAP HANA Azure bestrijkt echter een pure Azure-omgeving waarin SAP HANA wordt uitgevoerd in een virtuele machine van Azure niet SAP HANA waarop &quot;grote exemplaren.&quot; Zie [SAP HANA (grote exemplaren) overzicht en architectuur op Azure](hana-overview-architecture.md) voor meer informatie over deze back-upoplossing op &quot;grote exemplaren&quot; op basis van opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="2d831-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="2d831-116">Algemene informatie over SAP producten die worden ondersteund in Azure vindt u in [SAP-notitie 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="2d831-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="2d831-117">De volgende drie cijfers biedt een overzicht van de SAP HANA back-upopties systeemeigen mogelijkheden van Azure op dit moment gebruikt en drie mogelijke toekomstige back-scenario's worden ook weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2d831-117">The following three figures give an overview of the SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="2d831-118">Verwante artikelen [SAP HANA Azure Backup op bestandsniveau](sap-hana-backup-file-level.md) en [SAP HANA back-up op basis van opslag-momentopnamen](sap-hana-backup-storage-snapshots.md) worden deze opties in meer detail, met inbegrip van grootte- en Prestatieoverwegingen voor SAP HANA back-ups die multi-terabyte groot zijn beschreven.</span><span class="sxs-lookup"><span data-stu-id="2d831-118">The related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Deze afbeelding ziet u twee mogelijkheden voor het opslaan van de huidige status van de virtuele machine](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="2d831-120">Deze afbeelding ziet u de mogelijkheid om de huidige status van virtuele machine, hetzij via Azure Backup-service of handmatige momentopname van de VM-schijven op te slaan.</span><span class="sxs-lookup"><span data-stu-id="2d831-120">This figure shows the possibility of saving the current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="2d831-121">Met deze benadering, één &#39; t hebben voor het beheren van back-ups SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2d831-121">With this approach, one doesn&#39;t have to manage SAP HANA backups.</span></span> <span data-ttu-id="2d831-122">De uitdaging van het scenario voor schijven momentopname is consistentie van het bestandssysteem en de status van een toepassingsconsistente schijf.</span><span class="sxs-lookup"><span data-stu-id="2d831-122">The challenge of the disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="2d831-123">De consistentiecontrole onderwerp wordt besproken in de sectie _SAP HANA gegevensconsistentie bij het maken van opslag-momentopnamen_ verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="2d831-123">The consistency topic is discussed in the section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="2d831-124">Mogelijkheden en beperkingen van Azure Backup-service die betrekking hebben op SAP HANA back-ups worden ook besproken verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="2d831-124">Capabilities and restrictions of Azure Backup service related to SAP HANA backups are also discussed later in this article.</span></span>

![Deze afbeelding ziet u opties voor het maken van een SAP HANA bestandsback-up in de virtuele machine](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="2d831-126">In deze afbeelding ziet u opties voor het nemen van een SAP HANA bestandsback-up in de virtuele machine en vervolgens opslaan van het back-upbestanden HANA ergens anders met verschillende hulpprogramma's.</span><span class="sxs-lookup"><span data-stu-id="2d831-126">This figure shows options for taking an SAP HANA file backup inside the VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="2d831-127">Een HANA back-up duurt langer dan een back-oplossing op basis van een momentopname vereist, maar heeft voordelen ten met betrekking tot de integriteit en consistentie.</span><span class="sxs-lookup"><span data-stu-id="2d831-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="2d831-128">Verderop in dit artikel vindt u meer informatie.</span><span class="sxs-lookup"><span data-stu-id="2d831-128">More details are provided later in this article.</span></span>

![De volgende afbeelding toont een mogelijke toekomstige SAP HANA back-scenario](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="2d831-130">De volgende afbeelding toont een mogelijke toekomstige SAP HANA back-scenario.</span><span class="sxs-lookup"><span data-stu-id="2d831-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="2d831-131">Als SAP HANA toegestaan voor het maken van back-ups van een secundaire replicatie, zou deze extra opties voor back-strategieën toevoegen.</span><span class="sxs-lookup"><span data-stu-id="2d831-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="2d831-132">Het is momenteel niet mogelijk volgens een bericht in de SAP HANA-Wiki:</span><span class="sxs-lookup"><span data-stu-id="2d831-132">Currently it isn't possible according to a post in the SAP HANA Wiki:</span></span>

<span data-ttu-id="2d831-133">_&quot;Is het mogelijk is het nemen van back-ups op de secundaire kant?_</span><span class="sxs-lookup"><span data-stu-id="2d831-133">_&quot;Is it possible to take backups on the secondary side?_</span></span>

<span data-ttu-id="2d831-134">_Nee, momenteel kunnen alleen gegevens en logboekback-ups op de primaire kant. Als automatische back-up is ingeschakeld, na overname secundaire naast de logboekback-ups automatisch er geschreven.&quot;_</span><span class="sxs-lookup"><span data-stu-id="2d831-134">_No, currently you can only take data and log backups on the primary side. If automatic log backup is enabled, after takeover to the secondary side, the log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="2d831-135">SAP-resources voor HANA back-up</span><span class="sxs-lookup"><span data-stu-id="2d831-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="2d831-136">Back-documentatie voor SAP HANA</span><span class="sxs-lookup"><span data-stu-id="2d831-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="2d831-137">Inleiding tot SAP HANA-beheer</span><span class="sxs-lookup"><span data-stu-id="2d831-137">Introduction to SAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="2d831-138">Uw back-up en herstelstrategie plannen</span><span class="sxs-lookup"><span data-stu-id="2d831-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="2d831-139">HANA back-up met behulp van ABAP DBACOCKPIT plannen</span><span class="sxs-lookup"><span data-stu-id="2d831-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="2d831-140">Planning gegevensback-ups (SAP HANA Cockpit)</span><span class="sxs-lookup"><span data-stu-id="2d831-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="2d831-141">Veelgestelde vragen over SAP HANA back-up [SAP-notitie 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="2d831-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="2d831-142">Veelgestelde vragen over SAP HANA-database en -opslag-momentopnamen in [SAP-notitie 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="2d831-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="2d831-143">Bestandssystemen ongeschikt netwerk voor back-up en herstel in [SAP-notitie 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="2d831-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="2d831-144">Waarom SAP HANA back-up?</span><span class="sxs-lookup"><span data-stu-id="2d831-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="2d831-145">Azure storage biedt beschikbaarheid en betrouwbaarheid gebruiksklaar (Zie [Inleiding tot Microsoft Azure Storage](../../../storage/common/storage-introduction.md) voor meer informatie over Azure storage).</span><span class="sxs-lookup"><span data-stu-id="2d831-145">Azure storage offers availability and reliability out of the box (see [Introduction to Microsoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="2d831-146">Het minimum voor &quot;back-&quot; te vertrouwen op de Azure Sla's, de bestanden voor SAP HANA gegevens en logboekbestanden op Azure virtuele harde schijven die zijn gekoppeld aan de server voor SAP HANA VM is.</span><span class="sxs-lookup"><span data-stu-id="2d831-146">The minimum for &quot;backup&quot; is to rely on the Azure SLAs, keeping the SAP HANA data and log files on Azure VHDs attached to the SAP HANA server VM.</span></span> <span data-ttu-id="2d831-147">Deze aanpak bevat informatie over de mislukte VM, maar niet mogelijke beschadiging van de SAP HANA-gegevens en logboekbestanden of logische fouten, zoals het verwijderen van gegevens of bestanden per ongeluk.</span><span class="sxs-lookup"><span data-stu-id="2d831-147">This approach covers VM failures, but not potential damage to the SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="2d831-148">Back-ups zijn ook vereist voor naleving of wettelijke redenen.</span><span class="sxs-lookup"><span data-stu-id="2d831-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="2d831-149">Kortom, is altijd een nodig voor SAP HANA back-ups.</span><span class="sxs-lookup"><span data-stu-id="2d831-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-to-verify-correctness-of-sap-hana-backup"></a><span data-ttu-id="2d831-150">Controleren of de juistheid van SAP HANA back-up</span><span class="sxs-lookup"><span data-stu-id="2d831-150">How to verify correctness of SAP HANA backup</span></span>
<span data-ttu-id="2d831-151">Wanneer u opslag-momentopnamen, wordt een terugzetbewerking test uitgevoerd op een andere site aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="2d831-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="2d831-152">Deze aanpak biedt een manier om ervoor te zorgen dat een back-up correct en interne processen voor back-up en herstel van werken zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="2d831-152">This approach provides a way to ensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="2d831-153">Hoewel dit een aanzienlijke drempel on-premises is het veel eenvoudiger om uit te voeren in de cloud door te geven van de benodigde resources tijdelijk voor dit doel.</span><span class="sxs-lookup"><span data-stu-id="2d831-153">While this is a significant hurdle on-premises, it is much easier to accomplish in the cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="2d831-154">Houd er rekening mee die tijdens het doorzoeken van een eenvoudig terugzetten en controle of HANA actief is en wordt uitgevoerd, is niet voldoende.</span><span class="sxs-lookup"><span data-stu-id="2d831-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="2d831-155">In het ideale geval moet een een consistentiecontrole voor de tabel om er zeker van te zijn dat de herstelde database goed is uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="2d831-155">Ideally, one should run a table consistency check to be sure that the restored database is fine.</span></span> <span data-ttu-id="2d831-156">SAP HANA biedt verschillende soorten consistentiecontroles beschreven in [SAP-notitie 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="2d831-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="2d831-157">Informatie over de consistentiecontrole van de tabel kan worden gevonden op de SAP-website op [tabel en consistentiecontroles catalogus](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="2d831-157">Information about the table consistency check can also be found on the SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="2d831-158">Voor standaardbestandback-ups is een terugzetbewerking test niet nodig.</span><span class="sxs-lookup"><span data-stu-id="2d831-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="2d831-159">Er zijn twee SAP HANA-hulpprogramma's die u helpen te controleren welke back-up kan worden gebruikt om te herstellen: hdbbackupdiag en hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="2d831-159">There are two SAP HANA tools that help to check which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="2d831-160">Zie [handmatig controleren of een herstel is mogelijk](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) voor meer informatie over deze hulpprogramma's.</span><span class="sxs-lookup"><span data-stu-id="2d831-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="2d831-161">Voordelen en nadelen van HANA back-up versus opslag momentopname</span><span class="sxs-lookup"><span data-stu-id="2d831-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="2d831-162">SAP bestaat &#39; t geven de voorkeur aan beide HANA back-up en opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="2d831-162">SAP doesn&#39;t give preference to either HANA backup versus storage snapshot.</span></span> <span data-ttu-id="2d831-163">Geeft de voor- en nadelen, zodat een kan bepalen die wordt gebruikt, afhankelijk van de situatie en de beschikbare opslagruimte-technologie (Zie [plannen van uw back-up- en herstelstrategie](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="2d831-163">It lists their pros and cons, so one can determine which to use depending on the situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="2d831-164">Op Azure, houd rekening met het feit dat de blob van Azure-functie & #39 Snapshot; t garanderen van de consistentie van het bestandssysteem (Zie [Using blob momentopnamen met PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="2d831-164">On Azure, be aware of the fact that the Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="2d831-165">De volgende sectie _SAP HANA gegevensconsistentie bij het maken van opslag-momentopnamen_, enkele overwegingen met betrekking tot deze functie wordt besproken.</span><span class="sxs-lookup"><span data-stu-id="2d831-165">The next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="2d831-166">Bovendien een heeft de facturering implicaties begrijpt vaak werken met blobs momentopnamen, zoals beschreven in dit artikel: [begrijpen hoe momentopnamen doorlopen kosten](/rest/api/storageservices/understanding-how-snapshots-accrue-charges): het &#39; zo duidelijk als het gebruik van Azure virtuele t schijven.</span><span class="sxs-lookup"><span data-stu-id="2d831-166">In addition, one has to understand the billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="2d831-167">SAP HANA gegevensconsistentie bij het maken van opslag-momentopnamen</span><span class="sxs-lookup"><span data-stu-id="2d831-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="2d831-168">Systeem- en consistentie van bestand is een complex probleem bij het maken van opslag-momentopnamen.</span><span class="sxs-lookup"><span data-stu-id="2d831-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="2d831-169">De eenvoudigste manier om problemen te voorkomen dat kan worden afgesloten SAP HANA en mogelijk zelfs de hele virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="2d831-169">The easiest way to avoid problems would be to shut down SAP HANA, or maybe even the whole virtual machine.</span></span> <span data-ttu-id="2d831-170">Afsluiten mogelijk goed met een demo of prototype of zelfs een ontwikkelsysteem, maar is geen optie voor een productiesysteem.</span><span class="sxs-lookup"><span data-stu-id="2d831-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="2d831-171">In Azure, een heeft Houd er rekening mee dat de blob van Azure-functie & #39 Snapshot; t garantie consistentie van het bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="2d831-171">On Azure, one has to keep in mind that the Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="2d831-172">Dit werkt prima echter met behulp van de SAP HANA-functie momentopname, zolang er slechts één virtuele schijf die betrokken zijn is.</span><span class="sxs-lookup"><span data-stu-id="2d831-172">It works fine however by using the SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="2d831-173">Maar zelfs met een enkele schijf extra items moeten worden gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="2d831-173">But even with a single disk, additional items have to be checked.</span></span> <span data-ttu-id="2d831-174">[SAP-notitie 2039883](https://launchpad.support.sap.com/#/notes/2039883) belangrijke informatie over SAP HANA back-ups via opslag-momentopnamen heeft.</span><span class="sxs-lookup"><span data-stu-id="2d831-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="2d831-175">Bijvoorbeeld, noemt dat met het bestandssysteem XFS uitgevoerd is om **xfs\_blokkeren** voordat u een momentopname van de opslag om te consistentie te garanderen (Zie [xfs\_freeze(8) - Linux man pagina ](https://linux.die.net/man/8/xfs_freeze) voor meer informatie over **xfs\_blokkeren**).</span><span class="sxs-lookup"><span data-stu-id="2d831-175">For example, it mentions that, with the XFS file system, it is necessary to run **xfs\_freeze** before starting a storage snapshot to guarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="2d831-176">Het onderwerp van de consistentie wordt nog meer lastig in geval waarbij een enkel bestandssysteem verspreid over meerdere schijven/volumes.</span><span class="sxs-lookup"><span data-stu-id="2d831-176">The topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="2d831-177">Bijvoorbeeld, met behulp mdadm of LVM en te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="2d831-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="2d831-178">De SAP-notitie bovengenoemde statussen:</span><span class="sxs-lookup"><span data-stu-id="2d831-178">The SAP Note mentioned above states:</span></span>

<span data-ttu-id="2d831-179">_&quot;Maar houd er rekening mee dat het opslagsysteem heeft met het i/o-consistentie te garanderen tijdens het maken van een momentopname van de opslag per SAP HANA-gegevensvolume, dat wil zeggen vastleggen van een SAP HANA servicespecifieke gegevensvolume moet een atomic-bewerking.&quot;_</span><span class="sxs-lookup"><span data-stu-id="2d831-179">_&quot;But keep in mind that the storage system has to guarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="2d831-180">Ervan uitgaande dat er een XFS bestandssysteem spanning vier Azure virtuele schijven, bevatten de volgende stappen een consistente momentopname te maken die het gegevensgebied HANA vertegenwoordigt:</span><span class="sxs-lookup"><span data-stu-id="2d831-180">Assuming there is an XFS file system spanning four Azure virtual disks, the following steps provide a consistent snapshot that represents the HANA data area:</span></span>

- <span data-ttu-id="2d831-181">HANA momentopname voorbereiden</span><span class="sxs-lookup"><span data-stu-id="2d831-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="2d831-182">Het bestandssysteem blokkeren (bijvoorbeeld gebruiken **xfs\_blokkeren**)</span><span class="sxs-lookup"><span data-stu-id="2d831-182">Freeze the file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="2d831-183">Alle momentopnamen van de benodigde blob in Azure maken</span><span class="sxs-lookup"><span data-stu-id="2d831-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="2d831-184">Blokkering opheffen, zodat het bestandssysteem</span><span class="sxs-lookup"><span data-stu-id="2d831-184">Unfreeze the file system</span></span>
- <span data-ttu-id="2d831-185">De momentopname HANA bevestigen</span><span class="sxs-lookup"><span data-stu-id="2d831-185">Confirm the HANA snapshot</span></span>

<span data-ttu-id="2d831-186">U wordt aangeraden de bovenstaande procedure gebruiken in alle gevallen moet voor de zekerheid, ongeacht welk bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="2d831-186">Recommendation is to use the procedure above in all cases to be on the safe side, no matter which file system.</span></span> <span data-ttu-id="2d831-187">Of als één schijf of striping via mdadm of LVM over meerdere schijven.</span><span class="sxs-lookup"><span data-stu-id="2d831-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="2d831-188">Het is belangrijk om te bevestigen dat de momentopname HANA.</span><span class="sxs-lookup"><span data-stu-id="2d831-188">It is important to confirm the HANA snapshot.</span></span> <span data-ttu-id="2d831-189">Vanwege de &quot;kopiëren bij schrijven&quot; SAP HANA mogelijk geen extra schijfruimte, terwijl in deze modus momentopname voorbereiden.</span><span class="sxs-lookup"><span data-stu-id="2d831-189">Due to the &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="2d831-190">&#39; ook niet mogelijk is worden nieuwe back-ups gestart totdat de SAP HANA-momentopname is bevestigd.</span><span class="sxs-lookup"><span data-stu-id="2d831-190">It&#39;s also not possible to start new backups until the SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="2d831-191">Azure Backup-service gebruikt Azure VM-extensies voor het behandelen van de consistentie van het bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="2d831-191">Azure Backup service uses Azure VM extensions to take care of the file system consistency.</span></span> <span data-ttu-id="2d831-192">Deze VM-uitbreidingen zijn niet beschikbaar voor zelfstandig gebruik.</span><span class="sxs-lookup"><span data-stu-id="2d831-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="2d831-193">Een heeft nog steeds SAP HANA consistentie te beheren.</span><span class="sxs-lookup"><span data-stu-id="2d831-193">One still has to manage SAP HANA consistency.</span></span> <span data-ttu-id="2d831-194">Zie het artikel gerelateerde [SAP HANA Azure back-up op bestandsniveau](sap-hana-backup-file-level.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="2d831-194">See the related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="2d831-195">SAP HANA-strategie voor back-up plannen</span><span class="sxs-lookup"><span data-stu-id="2d831-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="2d831-196">Het artikel SAP HANA [plannen van uw back-up- en herstelstrategie](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) statussen van een basisniveau om back-ups:</span><span class="sxs-lookup"><span data-stu-id="2d831-196">The SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan to do backups:</span></span>

- <span data-ttu-id="2d831-197">Opslag-momentopnamen (dagelijks)</span><span class="sxs-lookup"><span data-stu-id="2d831-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="2d831-198">Voltooid de back-up met behulp van bestands- of bacint-indeling (één keer per week)</span><span class="sxs-lookup"><span data-stu-id="2d831-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="2d831-199">Automatische logboekback-ups</span><span class="sxs-lookup"><span data-stu-id="2d831-199">Automatic log backups</span></span>

<span data-ttu-id="2d831-200">U kunt desgewenst kan een volledig zonder opslag-momentopnamen; gaan ze kunnen worden vervangen door HANA delta back-ups, zoals incrementele of differentiële back-ups (Zie [Delta back-ups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="2d831-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="2d831-201">De beheerdershandleiding voor HANA biedt een lijst met voorbeelden.</span><span class="sxs-lookup"><span data-stu-id="2d831-201">The HANA Administration guide provides an example list.</span></span> <span data-ttu-id="2d831-202">Dit wijst erop dat een SAP HANA herstellen naar een bepaald punt in tijd met behulp van de volgende volgorde van de back-ups:</span><span class="sxs-lookup"><span data-stu-id="2d831-202">It suggests that one recover SAP HANA to a specific point in time using the following sequence of backups:</span></span>

1. <span data-ttu-id="2d831-203">Volledige back-up</span><span class="sxs-lookup"><span data-stu-id="2d831-203">Full data backup</span></span>
2. <span data-ttu-id="2d831-204">Differentiële back-up</span><span class="sxs-lookup"><span data-stu-id="2d831-204">Differential backup</span></span>
3. <span data-ttu-id="2d831-205">Incrementele back-up 1</span><span class="sxs-lookup"><span data-stu-id="2d831-205">Incremental backup 1</span></span>
4. <span data-ttu-id="2d831-206">Incrementele back-up 2</span><span class="sxs-lookup"><span data-stu-id="2d831-206">Incremental backup 2</span></span>
5. <span data-ttu-id="2d831-207">Logboekback-ups</span><span class="sxs-lookup"><span data-stu-id="2d831-207">Log backups</span></span>

<span data-ttu-id="2d831-208">Met betrekking tot een exacte planning wanneer en hoe vaak een specifieke back-uptype moet gebeuren, het is niet mogelijk om te geven van een algemene richtlijn: het bestand is te klantspecifieke en is afhankelijk van hoeveel gegevenswijzigingen in het systeem optreden.</span><span class="sxs-lookup"><span data-stu-id="2d831-208">Regarding an exact schedule as to when and how often a specific backup type should happen, it is not possible to give a general guideline—it is too customer-specific, and depends on how many data changes occur in the system.</span></span> <span data-ttu-id="2d831-209">Een basic aanbeveling SAP-kant kunnen worden gezien als algemene richtlijnen, is het maken een volledige HANA back-up eenmaal per week.</span><span class="sxs-lookup"><span data-stu-id="2d831-209">One basic recommendation from SAP side, which can be seen as general guidance, is to make one full HANA backup once a week.</span></span>
<span data-ttu-id="2d831-210">Met betrekking tot logboekback-ups, Zie de documentatie van de SAP HANA [logboekback-ups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="2d831-210">Regarding log backups, see the SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="2d831-211">SAP wordt ook aangeraden tijdens het doorzoeken van sommige housekeeping van de back-upcatalogus om te voorkomen dat groeiende oneindig (Zie [huishoudelijke voor back-upcatalogus en back-upopslag](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="2d831-211">SAP also recommends doing some housekeeping of the backup catalog to keep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="2d831-212">SAP HANA-configuratiebestanden</span><span class="sxs-lookup"><span data-stu-id="2d831-212">SAP HANA configuration files</span></span>

<span data-ttu-id="2d831-213">Zoals vermeld in de veelgestelde vragen in [SAP-notitie 1642148](https://launchpad.support.sap.com/#/notes/1642148), de configuratiebestanden voor SAP HANA maken geen deel uit van een standaard HANA back-up.</span><span class="sxs-lookup"><span data-stu-id="2d831-213">As stated in the FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), the SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="2d831-214">Ze zijn niet essentieel is voor het herstellen van een systeem.</span><span class="sxs-lookup"><span data-stu-id="2d831-214">They are not essential to restore a system.</span></span> <span data-ttu-id="2d831-215">De configuratie van de HANA kan handmatig worden gewijzigd na het terugzetten.</span><span class="sxs-lookup"><span data-stu-id="2d831-215">The HANA configuration could be changed manually after the restore.</span></span> <span data-ttu-id="2d831-216">Als een wil ontvangen tijdens het herstelproces dezelfde aangepaste configuratie, is het nodig om back-up van de configuratiebestanden HANA afzonderlijk.</span><span class="sxs-lookup"><span data-stu-id="2d831-216">In case one would like to get the same custom configuration during the restore process, it is necessary to back up the HANA configuration files separately.</span></span>

<span data-ttu-id="2d831-217">Als standaard HANA back-ups eigen HANA back-upbestand systeem gaat zijn, kan een ook de configuratiebestanden kopiëren naar het bestandssysteem voor dezelfde back-up en vervolgens kopieert u alles samen naar de uiteindelijke opslaglocatie zoals cool storage-blob.</span><span class="sxs-lookup"><span data-stu-id="2d831-217">If standard HANA backups are going to a dedicated HANA backup file system, one could also copy the configuration files to the same backup filesystem, and then copy everything together to the final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="2d831-218">SAP HANA Cockpit</span><span class="sxs-lookup"><span data-stu-id="2d831-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="2d831-219">SAP HANA Cockpit biedt de mogelijkheid van controleren en beheren van SAP HANA via een browser.</span><span class="sxs-lookup"><span data-stu-id="2d831-219">SAP HANA Cockpit offers the possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="2d831-220">Het kan ook de verwerking van SAP HANA back-ups en daarom kan worden gebruikt als een alternatief voor SAP HANA Studio en ABAP DBACOCKPIT (Zie [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) voor meer informatie).</span><span class="sxs-lookup"><span data-stu-id="2d831-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative to SAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Deze afbeelding ziet u het scherm SAP HANA Cockpit Database beheer](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="2d831-222">Deze afbeelding ziet u het scherm SAP HANA Cockpit Database beheer en de back-tegel aan de linkerkant.</span><span class="sxs-lookup"><span data-stu-id="2d831-222">This figure shows the SAP HANA Cockpit Database Administration Screen, and the backup tile on the left.</span></span> <span data-ttu-id="2d831-223">De back-tegel ziet juiste gebruikersmachtigingen nodig voor aanmeldingsaccount.</span><span class="sxs-lookup"><span data-stu-id="2d831-223">Seeing the backup tile requires appropriate user permissions for login account.</span></span>

![Back-ups kunnen worden bewaakt in SAP HANA Cockpit zolang deze lopende](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="2d831-225">Back-ups kunnen worden bewaakt in SAP HANA Cockpit terwijl ze voortdurend zijn en zodra dit is voltooid, de back-details beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="2d831-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all the backup details are available.</span></span>

![Een voorbeeld van Firefox op een Azure-VM SLES 12 met Gnome bureaublad](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="2d831-227">De vorige schermafbeeldingen zijn uitgevoerd vanaf een Windows Azure VM.</span><span class="sxs-lookup"><span data-stu-id="2d831-227">The previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="2d831-228">Dit is een voorbeeld Firefox gebruiken op een Azure-VM SLES 12 met Gnome bureaublad.</span><span class="sxs-lookup"><span data-stu-id="2d831-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="2d831-229">De optie voor het definiëren van de back-upschema's SAP HANA in SAP HANA Cockpit worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2d831-229">It shows the option to define SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="2d831-230">Zoals ook zien kunnen, maar er wordt verwezen datum/tijd als een voorvoegsel voor de back-upbestanden.</span><span class="sxs-lookup"><span data-stu-id="2d831-230">As one can also see, it suggests date/time as a prefix for the backup files.</span></span> <span data-ttu-id="2d831-231">SAP HANA Studio de standaardvoorvoegsel is &quot;COMPLETE\_gegevens\_back-&quot; bij het uitvoeren van een volledige back-up.</span><span class="sxs-lookup"><span data-stu-id="2d831-231">In SAP HANA Studio, the default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="2d831-232">Gebruik een uniek voorvoegsel wordt aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="2d831-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="2d831-233">Back-up SAP HANA-versleuteling</span><span class="sxs-lookup"><span data-stu-id="2d831-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="2d831-234">SAP HANA biedt versleuteling van gegevens en logboekbestanden.</span><span class="sxs-lookup"><span data-stu-id="2d831-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="2d831-235">Als voor SAP HANA-gegevens en logboekbestanden worden niet versleuteld, zijn klikt u vervolgens de back-ups ook niet versleuteld.</span><span class="sxs-lookup"><span data-stu-id="2d831-235">If SAP HANA data and log are not encrypted, then the backups are also not encrypted.</span></span> <span data-ttu-id="2d831-236">Het is tot de klant een vorm van de oplossing van derden gebruiken voor het versleutelen van de SAP HANA back-ups.</span><span class="sxs-lookup"><span data-stu-id="2d831-236">It is up to the customer to use some form of third-party solution to encrypt the SAP HANA backups.</span></span> <span data-ttu-id="2d831-237">Zie [gegevens en versleuteling voor volumes van logboek](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) voor meer informatie over SAP HANA-codering.</span><span class="sxs-lookup"><span data-stu-id="2d831-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) to find out more about SAP HANA encryption.</span></span>

<span data-ttu-id="2d831-238">In Microsoft Azure kan een klant gebruiken IaaS VM versleuteling te versleutelen.</span><span class="sxs-lookup"><span data-stu-id="2d831-238">On Microsoft Azure, a customer could use the IaaS VM encryption feature to encrypt.</span></span> <span data-ttu-id="2d831-239">Zo kan een speciale gegevensschijven gekoppeld aan de virtuele machine, die worden gebruikt voor SAP HANA back-ups opslaan en vervolgens kopieën te maken van deze schijven gebruiken.</span><span class="sxs-lookup"><span data-stu-id="2d831-239">For example, one could use dedicated data disks attached to the VM, which are used to store SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="2d831-240">Azure Backup-service kan versleutelde VM's / schijven verwerken (Zie [How to back up en herstel van virtuele machines met Azure Backup versleuteld](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="2d831-240">Azure Backup service can handle encrypted VMs/disks (see [How to back up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="2d831-241">Een andere optie is de SAP HANA-virtuele machine en de schijven zonder versleuteling onderhouden, en de back-upbestanden voor SAP HANA opslaan in een opslagaccount waarvoor versleuteling is ingeschakeld (Zie [Azure Storage Service: versleuteling van gegevens in rust](../../../storage/common/storage-service-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="2d831-241">Another option would be to maintain the SAP HANA VM and its disks without encryption, and store the SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="2d831-242">Test setup</span><span class="sxs-lookup"><span data-stu-id="2d831-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="2d831-243">Test-virtuele Machine in Azure</span><span class="sxs-lookup"><span data-stu-id="2d831-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="2d831-244">Een SAP HANA-installatie in een virtuele machine van Azure GS5 is gebruikt voor de volgende back-up/herstel testen.</span><span class="sxs-lookup"><span data-stu-id="2d831-244">An SAP HANA installation in an Azure GS5 VM was used for the following backup/restore tests.</span></span>

![Deze afbeelding ziet u deel van het overzicht van Azure portal voor de test HANA VM](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="2d831-246">In deze afbeelding ziet deel van het overzicht van Azure portal voor de test HANA VM.</span><span class="sxs-lookup"><span data-stu-id="2d831-246">This figure shows part of the Azure portal overview for the HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="2d831-247">Back-grootte testen</span><span class="sxs-lookup"><span data-stu-id="2d831-247">Test backup size</span></span>

![In deze afbeelding is overgenomen van de back-console in HANA Studio en de grootte van de back-upbestand van 229 GB voor de server van de index HANA toont](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="2d831-249">Een dummy-tabel is gevuld met gegevens een back-grootte van de totale gegevens van meer dan 200 GB worden afgeleid van realistische prestatiegegevens ophalen.</span><span class="sxs-lookup"><span data-stu-id="2d831-249">A dummy table was filled up with data to get a total data backup size of over 200 GB to derive realistic performance data.</span></span> <span data-ttu-id="2d831-250">De afbeelding is overgenomen van de back-console in Studio HANA en geeft de omvang van de back-upbestand van 229 GB voor de server van de index HANA.</span><span class="sxs-lookup"><span data-stu-id="2d831-250">The figure was taken from the backup console in HANA Studio and shows the backup file size of 229 GB for the HANA index server.</span></span> <span data-ttu-id="2d831-251">Bij de tests voor is de back-up standaardvoorvoegsel 'COMPLETE_DATA_BACKUP' in SAP HANA Studio gebruikt.</span><span class="sxs-lookup"><span data-stu-id="2d831-251">For the tests, the default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="2d831-252">In de echte productiesystemen, moet een nuttiger voorvoegsel worden gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="2d831-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="2d831-253">SAP HANA Cockpit stelt datum/tijd.</span><span class="sxs-lookup"><span data-stu-id="2d831-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-to-copy-files-directly-to-azure-storage"></a><span data-ttu-id="2d831-254">Testen van hulpprogramma voor kopiëren van bestanden rechtstreeks naar de Azure-opslag</span><span class="sxs-lookup"><span data-stu-id="2d831-254">Test tool to copy files directly to Azure storage</span></span>

<span data-ttu-id="2d831-255">Om te zetten back-upbestanden voor SAP HANA rechtstreeks naar Azure blob-opslag of Azure-bestandsshares, is het hulpprogramma blobxfer omdat deze ondersteuning biedt voor beide doelen en kunnen eenvoudig worden geïntegreerd in automatiseringsscripts vanwege de opdrachtregelinterface gebruikt.</span><span class="sxs-lookup"><span data-stu-id="2d831-255">To transfer SAP HANA backup files directly to Azure blob storage, or Azure file shares, the blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due to its command-line interface.</span></span> <span data-ttu-id="2d831-256">Het hulpprogramma blobxfer is beschikbaar op [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="2d831-256">The blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="2d831-257">De grootte van de back-schatting testen</span><span class="sxs-lookup"><span data-stu-id="2d831-257">Test backup size estimation</span></span>

<span data-ttu-id="2d831-258">Het is belangrijk om te schatten van de back-grootte van SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="2d831-258">It is important to estimate the backup size of SAP HANA.</span></span> <span data-ttu-id="2d831-259">Deze schatting helpt de prestaties verbeteren door het definiëren van de back-maximale bestandsgrootte voor een aantal back-upbestanden of als gevolg van parallelle uitvoering tijdens het kopiëren van een bestand.</span><span class="sxs-lookup"><span data-stu-id="2d831-259">This estimate helps to improve performance by defining the max backup file size for a number of backup files, due to parallelism during a file copy.</span></span> <span data-ttu-id="2d831-260">(Deze informatie worden verderop in dit artikel uitgelegd.) Een moet ook bepalen of een volledige back-up of een delta-back-up (incrementele of differentiële).</span><span class="sxs-lookup"><span data-stu-id="2d831-260">(Those details are explained later in this article.) One must also decide whether to do a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="2d831-261">Gelukkig is er een eenvoudige SQL-instructie die u maakt een schatting van de grootte van de back-upbestanden: **Selecteer \* van M\_back-\_grootte\_SCHATTINGEN** (Zie [schatting de benodigde ruimte in het bestandssysteem voor een gegevensback-up](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="2d831-261">Fortunately, there is a simple SQL statement that estimates the size of the backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate the Space Needed in the File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![De uitvoer van deze SQL-instructie komt overeen met bijna hetzelfde de werkelijke grootte van de volledige gegevens back-up op schijf](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="2d831-263">De uitvoer van deze SQL-instructie voor het testsysteem komt overeen met bijna hetzelfde de werkelijke grootte van de volledige gegevens back-up op schijf.</span><span class="sxs-lookup"><span data-stu-id="2d831-263">For the test system, the output of this SQL statement matches almost exactly the real size of the full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="2d831-264">Grootte van back-upbestand HANA testen</span><span class="sxs-lookup"><span data-stu-id="2d831-264">Test HANA backup file size</span></span>

![De back-HANA Studio-console kan één tot de maximale bestandsgrootte van de back-upbestanden HANA beperken](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="2d831-266">De back-console HANA Studio kunt een voor de maximale bestandsgrootte van de back-upbestanden HANA beperken.</span><span class="sxs-lookup"><span data-stu-id="2d831-266">The HANA Studio backup console allows one to restrict the max file size of HANA backup files.</span></span> <span data-ttu-id="2d831-267">In de voorbeeldomgeving maakt die functie het mogelijk dat meerdere kleinere back-bestanden in plaats van een back-upbestand van 230 GB.</span><span class="sxs-lookup"><span data-stu-id="2d831-267">In the sample environment, that feature makes it possible to get multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="2d831-268">Kleinere bestanden heeft een aanzienlijke invloed op prestaties (Zie het artikel gerelateerde [SAP HANA Azure back-up op bestandsniveau](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="2d831-268">Smaller file size has a significant impact on performance (see the related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="2d831-269">Samenvatting</span><span class="sxs-lookup"><span data-stu-id="2d831-269">Summary</span></span>

<span data-ttu-id="2d831-270">Op basis van de resultaten van die de volgende tabellen tonen de voordelen en nadelen van oplossingen voor back-up van een SAP HANA-database op Azure virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="2d831-270">Based on the test results the following tables show pros and cons of solutions to back up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="2d831-271">**Back-up SAP HANA naar het bestandssysteem en daarna back-upbestanden naar de laatste back-updoelmap kopiëren**</span><span class="sxs-lookup"><span data-stu-id="2d831-271">**Back up SAP HANA to the file system and copy backup files afterwards to the final backup destination**</span></span>

|<span data-ttu-id="2d831-272">Oplossing</span><span class="sxs-lookup"><span data-stu-id="2d831-272">Solution</span></span>                                           |<span data-ttu-id="2d831-273">Professionals</span><span class="sxs-lookup"><span data-stu-id="2d831-273">Pros</span></span>                                 |<span data-ttu-id="2d831-274">Nadelen</span><span class="sxs-lookup"><span data-stu-id="2d831-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="2d831-275">Behoudt HANA back-ups op VM-schijven</span><span class="sxs-lookup"><span data-stu-id="2d831-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="2d831-276">Er zijn geen extra risicobeheerinspanningen</span><span class="sxs-lookup"><span data-stu-id="2d831-276">No additional management efforts</span></span>     |<span data-ttu-id="2d831-277">Lokale VM schijfruimte vrij eats</span><span class="sxs-lookup"><span data-stu-id="2d831-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="2d831-278">Blobxfer hulpprogramma Back-upbestanden naar blob storage kopiëren</span><span class="sxs-lookup"><span data-stu-id="2d831-278">Blobxfer tool to copy backup files to blob storage</span></span> |<span data-ttu-id="2d831-279">Parallelle uitvoering om meerdere bestanden te kopiëren keuze cool blob storage gebruiken</span><span class="sxs-lookup"><span data-stu-id="2d831-279">Parallelism to copy multiple files, choice to use cool blob storage</span></span> | <span data-ttu-id="2d831-280">Extra hulpprogramma onderhoud en aangepaste scripts</span><span class="sxs-lookup"><span data-stu-id="2d831-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="2d831-281">BLOB kopiëren via Powershell of CLI</span><span class="sxs-lookup"><span data-stu-id="2d831-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="2d831-282">Geen aanvullende hulpprogramma nodig kan worden geconfigureerd via Azure Powershell of CLI</span><span class="sxs-lookup"><span data-stu-id="2d831-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="2d831-283">handmatig proces klant heeft tot het zorgt voor het uitvoeren van scripts en het beheer van de gekopieerde blobs voor terugzetten</span><span class="sxs-lookup"><span data-stu-id="2d831-283">manual process, customer has to take care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="2d831-284">Kopiëren naar de NFS-share</span><span class="sxs-lookup"><span data-stu-id="2d831-284">Copy to NFS share</span></span>                                  |<span data-ttu-id="2d831-285">Na de verwerking van back-upbestanden op andere virtuele machine zonder gevolgen voor de server HANA</span><span class="sxs-lookup"><span data-stu-id="2d831-285">Post-processing of backup files on other VM without impact on the HANA server</span></span>|<span data-ttu-id="2d831-286">Trage kopieerproces</span><span class="sxs-lookup"><span data-stu-id="2d831-286">Slow copy process</span></span>|
|<span data-ttu-id="2d831-287">Blobxfer kopiëren naar Azure File-Service</span><span class="sxs-lookup"><span data-stu-id="2d831-287">Blobxfer copy to Azure File Service</span></span>                |<span data-ttu-id="2d831-288">Geen eat ruimte op de lokale VM-schijven</span><span class="sxs-lookup"><span data-stu-id="2d831-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="2d831-289">Er zijn geen directe ondersteuning door back-up, de grootte van beperking van de bestandsshare dat zich momenteel in 5 TB HANA schrijven</span><span class="sxs-lookup"><span data-stu-id="2d831-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="2d831-290">Azure Backup-Agent</span><span class="sxs-lookup"><span data-stu-id="2d831-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="2d831-291">Zou worden aanbevolen oplossing</span><span class="sxs-lookup"><span data-stu-id="2d831-291">Would be preferred solution</span></span>         | <span data-ttu-id="2d831-292">Momenteel niet beschikbaar op Linux</span><span class="sxs-lookup"><span data-stu-id="2d831-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="2d831-293">**Back-up SAP HANA op basis van opslag-momentopnamen**</span><span class="sxs-lookup"><span data-stu-id="2d831-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="2d831-294">Oplossing</span><span class="sxs-lookup"><span data-stu-id="2d831-294">Solution</span></span>                                           |<span data-ttu-id="2d831-295">Professionals</span><span class="sxs-lookup"><span data-stu-id="2d831-295">Pros</span></span>                                 |<span data-ttu-id="2d831-296">Nadelen</span><span class="sxs-lookup"><span data-stu-id="2d831-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="2d831-297">Azure Backup-Service</span><span class="sxs-lookup"><span data-stu-id="2d831-297">Azure Backup Service</span></span>                               | <span data-ttu-id="2d831-298">Kan back-up van de virtuele machine op basis van de blob-momentopnamen</span><span class="sxs-lookup"><span data-stu-id="2d831-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="2d831-299">Wanneer u geen herstelbewerkingen op bestand, het maken van een nieuwe virtuele machine is vereist voor het herstelproces, die vervolgens de noodzaak van een nieuwe sleutel voor SAP HANA-licentie impliceert</span><span class="sxs-lookup"><span data-stu-id="2d831-299">When not using file level restore, it requires the creation of a new VM for the restore process, which then implies the need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="2d831-300">Handmatige blob momentopnamen</span><span class="sxs-lookup"><span data-stu-id="2d831-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="2d831-301">Flexibiliteit voor het maken en herstellen van specifieke VM-schijven zonder de unieke ID van de virtuele machine wijzigen</span><span class="sxs-lookup"><span data-stu-id="2d831-301">Flexibility to create and restore specific VM disks without changing the unique VM ID</span></span>|<span data-ttu-id="2d831-302">Alle handmatig werk die moet worden uitgevoerd door de klant</span><span class="sxs-lookup"><span data-stu-id="2d831-302">All manual work, which has to be done by the customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="2d831-303">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="2d831-303">Next steps</span></span>
* <span data-ttu-id="2d831-304">[SAP HANA Azure Backup op bestandsniveau](sap-hana-backup-file-level.md) wordt de back-optie op basis van bestanden beschreven.</span><span class="sxs-lookup"><span data-stu-id="2d831-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes the file-based backup option.</span></span>
* <span data-ttu-id="2d831-305">[SAP HANA back-up op basis van opslag-momentopnamen](sap-hana-backup-storage-snapshots.md) opslag op basis van een momentopname back-up wordt de optie beschreven.</span><span class="sxs-lookup"><span data-stu-id="2d831-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes the storage snapshot-based backup option.</span></span>
* <span data-ttu-id="2d831-306">Zie voor meer informatie over hoe u hoge beschikbaarheid en herstel na noodgevallen van SAP HANA plannen in Azure (grote exemplaren), [SAP HANA (grote exemplaren) hoge beschikbaarheid en herstel na noodgevallen op Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2d831-306">To learn how to establish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
