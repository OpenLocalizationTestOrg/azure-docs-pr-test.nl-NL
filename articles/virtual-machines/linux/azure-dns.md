---
title: DNS-opties voor naamomzetting voor Linux virtuele machines in Azure
description: Naam resolutie scenario's voor virtuele Linux-machines in Azure IaaS, met inbegrip van opgegeven DNS-services, hybride externe DNS- en Bring Your Own DNS-server.
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: cc06ee9305b4d3034154a0825c1aea53fe446f80
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="c18d1-103">Opties voor Linux virtuele machines in Azure DNS-naamomzetting</span><span class="sxs-lookup"><span data-stu-id="c18d1-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="c18d1-104">Azure biedt DNS-naamomzetting standaard voor alle virtuele machines die zich in één virtueel netwerk.</span><span class="sxs-lookup"><span data-stu-id="c18d1-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="c18d1-105">U kunt uw eigen DNS-naam resolutie oplossing implementeren door uw eigen DNS-services op uw virtuele machines te configureren die Azure als host fungeert.</span><span class="sxs-lookup"><span data-stu-id="c18d1-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="c18d1-106">De volgende scenario's kunt u kiezen die geschikt is voor uw situatie.</span><span class="sxs-lookup"><span data-stu-id="c18d1-106">The following scenarios should help you choose the one that works for your situation.</span></span>

* [<span data-ttu-id="c18d1-107">Naamomzetting door Azure worden geboden</span><span class="sxs-lookup"><span data-stu-id="c18d1-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="c18d1-108">Naamomzetting met uw eigen DNS-server</span><span class="sxs-lookup"><span data-stu-id="c18d1-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="c18d1-109">Het type van naamomzetting die u gebruikt, is afhankelijk van hoe uw virtuele machines en rolinstanties moeten met elkaar communiceren.</span><span class="sxs-lookup"><span data-stu-id="c18d1-109">The type of name resolution that you use depends on how your virtual machines and role instances need to communicate with each other.</span></span>

<span data-ttu-id="c18d1-110">De volgende tabel ziet u scenario's en bijbehorende name resolution-oplossingen:</span><span class="sxs-lookup"><span data-stu-id="c18d1-110">The following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="c18d1-111">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="c18d1-111">**Scenario**</span></span> | <span data-ttu-id="c18d1-112">**Oplossing**</span><span class="sxs-lookup"><span data-stu-id="c18d1-112">**Solution**</span></span> | <span data-ttu-id="c18d1-113">**Achtervoegsel**</span><span class="sxs-lookup"><span data-stu-id="c18d1-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c18d1-114">Naamomzetting tussen de rolinstanties of virtuele machines in hetzelfde virtuele netwerk</span><span class="sxs-lookup"><span data-stu-id="c18d1-114">Name resolution between role instances or virtual machines in the same virtual network</span></span> |[<span data-ttu-id="c18d1-115">Naamomzetting door Azure worden geboden</span><span class="sxs-lookup"><span data-stu-id="c18d1-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="c18d1-116">hostnaam of FQDN-naam (fully qualified domain name)</span><span class="sxs-lookup"><span data-stu-id="c18d1-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="c18d1-117">Naamomzetting tussen de rolinstanties of virtuele machines in verschillende virtuele netwerken</span><span class="sxs-lookup"><span data-stu-id="c18d1-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="c18d1-118">Door de klant beheerde DNS-servers doorsturen van query's tussen virtuele netwerken voor de omzetting van Azure (DNS-proxy).</span><span class="sxs-lookup"><span data-stu-id="c18d1-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="c18d1-119">Zie [naamomzetting met uw eigen DNS-server](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="c18d1-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="c18d1-120">Alleen FQDN</span><span class="sxs-lookup"><span data-stu-id="c18d1-120">FQDN only</span></span> |
| <span data-ttu-id="c18d1-121">De resolutie van lokale computers en -namen van rolexemplaren te controleren of de virtuele machines in Azure</span><span class="sxs-lookup"><span data-stu-id="c18d1-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="c18d1-122">Door de klant beheerde DNS-servers (bijvoorbeeld op de lokale domeincontroller, lokale alleen-lezen domeincontroller of een secundaire DNS gesynchroniseerd met behulp van zoneoverdrachten).</span><span class="sxs-lookup"><span data-stu-id="c18d1-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="c18d1-123">Zie [naamomzetting met uw eigen DNS-server](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="c18d1-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="c18d1-124">Alleen FQDN</span><span class="sxs-lookup"><span data-stu-id="c18d1-124">FQDN only</span></span> |
| <span data-ttu-id="c18d1-125">De resolutie van Azure hostnamen van lokale computers</span><span class="sxs-lookup"><span data-stu-id="c18d1-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="c18d1-126">Doorsturen van aanvragen naar een door de klant beheerde DNS-proxyserver in de bijbehorende virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="c18d1-126">Forward queries to a customer-managed DNS proxy server in the corresponding virtual network.</span></span> <span data-ttu-id="c18d1-127">De proxyserver stuurt query's naar Azure voor naamomzetting.</span><span class="sxs-lookup"><span data-stu-id="c18d1-127">The proxy server forwards queries to Azure for resolution.</span></span> <span data-ttu-id="c18d1-128">Zie [naamomzetting met uw eigen DNS-server](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="c18d1-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="c18d1-129">Alleen FQDN</span><span class="sxs-lookup"><span data-stu-id="c18d1-129">FQDN only</span></span> |
| <span data-ttu-id="c18d1-130">Omgekeerde DNS voor interne IP-adressen</span><span class="sxs-lookup"><span data-stu-id="c18d1-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="c18d1-131">Naamomzetting met uw eigen DNS-server</span><span class="sxs-lookup"><span data-stu-id="c18d1-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="c18d1-132">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="c18d1-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="c18d1-133">Naamomzetting door Azure worden geboden</span><span class="sxs-lookup"><span data-stu-id="c18d1-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="c18d1-134">Samen met de resolutie van openbare DNS-namen biedt Azure interne naamomzetting voor virtuele machines en rolexemplaren die zich in hetzelfde virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="c18d1-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in the same virtual network.</span></span> <span data-ttu-id="c18d1-135">In virtuele netwerken die zijn gebaseerd op Azure Resource Manager, is het DNS-achtervoegsel consistent op het virtuele netwerk. de FQDN-naam is niet nodig.</span><span class="sxs-lookup"><span data-stu-id="c18d1-135">In virtual networks that are based on Azure Resource Manager, the DNS suffix is consistent across the virtual network; the FQDN is not needed.</span></span> <span data-ttu-id="c18d1-136">DNS-namen kunnen worden toegewezen aan virtuele machines en netwerkinterfacekaarten (NIC's).</span><span class="sxs-lookup"><span data-stu-id="c18d1-136">DNS names can be assigned to both network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="c18d1-137">Hoewel de naamomzetting die Azure biedt geen configuratie vereist, is niet de juiste keuze is voor alle implementatiescenario's, zoals te zien op de voorgaande tabel.</span><span class="sxs-lookup"><span data-stu-id="c18d1-137">Although the name resolution that Azure provides does not require any configuration, it is not the appropriate choice for all deployment scenarios, as seen on the preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="c18d1-138">Functies en overwegingen</span><span class="sxs-lookup"><span data-stu-id="c18d1-138">Features and considerations</span></span>
<span data-ttu-id="c18d1-139">**Functies:**</span><span class="sxs-lookup"><span data-stu-id="c18d1-139">**Features:**</span></span>

* <span data-ttu-id="c18d1-140">Er is geen configuratie is vereist voor naamomzetting die Azure biedt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="c18d1-140">No configuration is required to use name resolution that Azure provides.</span></span>
* <span data-ttu-id="c18d1-141">De service voor naamomzetting die Azure biedt is maximaal beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="c18d1-141">The name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="c18d1-142">U hoeft niet te maken en beheren van clusters van uw eigen DNS-servers.</span><span class="sxs-lookup"><span data-stu-id="c18d1-142">You don't need to create and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="c18d1-143">De service voor naamomzetting die Azure biedt kan worden gebruikt samen met uw eigen DNS-servers om op te lossen, zowel on-premises en Azure hostnamen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-143">The name resolution service that Azure provides can be used along with your own DNS servers to resolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="c18d1-144">Naamomzetting is tussen virtuele machines in virtuele netwerken zonder dat nodig is voor de FQDN-naam opgegeven.</span><span class="sxs-lookup"><span data-stu-id="c18d1-144">Name resolution is provided between virtual machines in virtual networks without need for the FQDN.</span></span>
* <span data-ttu-id="c18d1-145">U kunt hostnamen die het beste uw implementaties te beschrijven in plaats van het werken met de automatisch gegenereerde naam.</span><span class="sxs-lookup"><span data-stu-id="c18d1-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="c18d1-146">**Overwegingen:**</span><span class="sxs-lookup"><span data-stu-id="c18d1-146">**Considerations:**</span></span>

* <span data-ttu-id="c18d1-147">De DNS-achtervoegsel dat Azure maakt, kan niet worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="c18d1-147">The DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="c18d1-148">U kunt uw eigen records kan niet handmatig registreren.</span><span class="sxs-lookup"><span data-stu-id="c18d1-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="c18d1-149">WINS- en NetBIOS worden niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="c18d1-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="c18d1-150">Hostnamen moet DNS-compatibele.</span><span class="sxs-lookup"><span data-stu-id="c18d1-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="c18d1-151">Namen moeten alleen 0-9, a-z, gebruiken en '-', en ze mag niet beginnen of eindigen met een '-'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="c18d1-152">Zie RFC 3696 sectie 2.</span><span class="sxs-lookup"><span data-stu-id="c18d1-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="c18d1-153">DNS-query-verkeer is voor elke virtuele machine beperkt.</span><span class="sxs-lookup"><span data-stu-id="c18d1-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="c18d1-154">Beperking mag niet van invloed op de meeste toepassingen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="c18d1-155">Indien aanvraag beperking is waargenomen, zorg ervoor dat caching aan clientzijde is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="c18d1-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="c18d1-156">Zie voor meer informatie [ophalen van de meest uit naamomzetting die Azure biedt](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="c18d1-156">For more information, see [Getting the most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-the-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="c18d1-157">Als u optimaal van naamomzetting die Azure biedt</span><span class="sxs-lookup"><span data-stu-id="c18d1-157">Getting the most from name resolution that Azure provides</span></span>
<span data-ttu-id="c18d1-158">**Caching aan clientzijde:**</span><span class="sxs-lookup"><span data-stu-id="c18d1-158">**Client-side caching:**</span></span>

<span data-ttu-id="c18d1-159">Sommige DNS-query's worden niet verzonden via het netwerk.</span><span class="sxs-lookup"><span data-stu-id="c18d1-159">Some DNS queries are not sent across the network.</span></span> <span data-ttu-id="c18d1-160">Caching aan clientzijde helpt de latentie te verminderen en de herstelmogelijkheden bij netwerk inconsistenties verbeteren door terugkerende DNS-query's uit de lokale cache op te lossen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-160">Client-side caching helps reduce latency and improve resilience to network inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="c18d1-161">DNS-records bevatten een Time-To-Live (TTL), waardoor de cache voor het opslaan van de record voor zo lang mogelijk zonder enige impact op record versheid.</span><span class="sxs-lookup"><span data-stu-id="c18d1-161">DNS records contain a Time-To-Live (TTL), which enables the cache to store the record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="c18d1-162">Als gevolg hiervan is het geschikt is voor de meeste situaties caching aan clientzijde.</span><span class="sxs-lookup"><span data-stu-id="c18d1-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="c18d1-163">Sommige Linux-distributies omvatten geen cache standaard.</span><span class="sxs-lookup"><span data-stu-id="c18d1-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="c18d1-164">Het is raadzaam dat u een cache aan elke virtuele Linux-machine, toevoegen nadat u hebt gecontroleerd dat nog niet een lokale cache is.</span><span class="sxs-lookup"><span data-stu-id="c18d1-164">We recommend that you add a cache to each Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="c18d1-165">Enkele andere DNS-cache van pakketten, zoals dnsmasq, zijn beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="c18d1-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="c18d1-166">Hier volgen de stappen voor het installeren van dnsmasq op de meest voorkomende distributies:</span><span class="sxs-lookup"><span data-stu-id="c18d1-166">Here are the steps to install dnsmasq on the most common distributions:</span></span>

<span data-ttu-id="c18d1-167">**Ubuntu (maakt gebruik van resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="c18d1-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="c18d1-168">Installeer het pakket dnsmasq ('sudo apt get-installatie dnsmasq').</span><span class="sxs-lookup"><span data-stu-id="c18d1-168">Install the dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="c18d1-169">**SUSE (maakt gebruik van netconf)**:</span><span class="sxs-lookup"><span data-stu-id="c18d1-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="c18d1-170">Installeer het pakket dnsmasq ('sudo zypper installeren dnsmasq').</span><span class="sxs-lookup"><span data-stu-id="c18d1-170">Install the dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="c18d1-171">De service dnsmasq ('systemctl inschakelen dnsmasq.service') inschakelen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-171">Enable the dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="c18d1-172">Start de service dnsmasq ('systemctl start dnsmasq.service').</span><span class="sxs-lookup"><span data-stu-id="c18d1-172">Start the dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="c18d1-173">Bewerken '/ etc/sysconfig/netwerk/config' en wijzigt u NETCONFIG_DNS_FORWARDER = "' naar 'dnsmasq'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" to ”dnsmasq”.</span></span>
5. <span data-ttu-id="c18d1-174">Resolv.conf ('netconfig-update') om in te stellen van de cache bijwerken als de lokale DNS-resolver.</span><span class="sxs-lookup"><span data-stu-id="c18d1-174">Update resolv.conf ("netconfig update") to set the cache as the local DNS resolver.</span></span>

<span data-ttu-id="c18d1-175">**CentOS door Rogue Wave-Software (voorheen OpenLogic; maakt gebruik van NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="c18d1-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="c18d1-176">Installeer het pakket dnsmasq ('sudo yum installeren dnsmasq').</span><span class="sxs-lookup"><span data-stu-id="c18d1-176">Install the dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="c18d1-177">De service dnsmasq ('systemctl inschakelen dnsmasq.service') inschakelen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-177">Enable the dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="c18d1-178">Start de service dnsmasq ('systemctl start dnsmasq.service').</span><span class="sxs-lookup"><span data-stu-id="c18d1-178">Start the dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="c18d1-179">Voeg toe 'toevoegen domain name servers 127.0.0.1;' naar '/etc/dhclient-eth0.conf'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-179">Add “prepend domain-name-servers 127.0.0.1;” to “/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="c18d1-180">opnieuw opstarten van de Netwerkservice ('service netwerk opnieuw starten') om in te stellen van de cache als de lokale DNS-resolver</span><span class="sxs-lookup"><span data-stu-id="c18d1-180">Restart the network service (“service network restart”) to set the cache as the local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="c18d1-181">: Het pakket 'dnsmasq' is slechts een van de vele DNS-caches die beschikbaar voor Linux zijn.</span><span class="sxs-lookup"><span data-stu-id="c18d1-181">: The 'dnsmasq' package is only one of the many DNS caches that are available for Linux.</span></span> <span data-ttu-id="c18d1-182">Voordat u deze kunt gebruiken, Controleer de geschiktheid voor uw behoeften en die geen andere cache is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="c18d1-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="c18d1-183">**Nieuwe pogingen voor clientzijde**</span><span class="sxs-lookup"><span data-stu-id="c18d1-183">**Client-side retries**</span></span>

<span data-ttu-id="c18d1-184">DNS is voornamelijk een UDP-protocol.</span><span class="sxs-lookup"><span data-stu-id="c18d1-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="c18d1-185">Omdat het UDP-protocol niet levering van berichten garanderen, verwerkt de DNS-protocol zelf Pogingslogica.</span><span class="sxs-lookup"><span data-stu-id="c18d1-185">Because the UDP protocol doesn't guarantee message delivery, the DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="c18d1-186">Elke DNS-client (besturingssysteem) kan zich voordoen verschillende Pogingslogica, afhankelijk van de maker voorkeur:</span><span class="sxs-lookup"><span data-stu-id="c18d1-186">Each DNS client (operating system) can exhibit different retry logic depending on the creator's preference:</span></span>

* <span data-ttu-id="c18d1-187">Windows-besturingssystemen opnieuw proberen na een tweede en nog een keer na de andere twee, vier en andere vier seconden.</span><span class="sxs-lookup"><span data-stu-id="c18d1-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="c18d1-188">De standaard Linux setup pogingen na vijf seconden.</span><span class="sxs-lookup"><span data-stu-id="c18d1-188">The default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="c18d1-189">U moet dit om opnieuw te proberen vijf keer met een interval van één seconde wijzigen.</span><span class="sxs-lookup"><span data-stu-id="c18d1-189">You should change this to retry five times at one-second intervals.</span></span>  

<span data-ttu-id="c18d1-190">De huidige instellingen op een Linux-virtuele machine, 'cat /etc/resolv.conf' en bekijk de regel 'options' bijvoorbeeld controleren:</span><span class="sxs-lookup"><span data-stu-id="c18d1-190">To check the current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at the 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="c18d1-191">Het bestand resolv.conf automatisch wordt gegenereerd en mag niet worden bewerkt.</span><span class="sxs-lookup"><span data-stu-id="c18d1-191">The resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="c18d1-192">De specifieke stappen die de regel 'options' toevoegen verschillen per distributiepunt:</span><span class="sxs-lookup"><span data-stu-id="c18d1-192">The specific steps that add the 'options' line vary by distribution:</span></span>

<span data-ttu-id="c18d1-193">**Ubuntu** (maakt gebruik van resolvconf)</span><span class="sxs-lookup"><span data-stu-id="c18d1-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="c18d1-194">De opties regel toe te voegen ' / etc/resolveconf/resolv.conf.d/head'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-194">Add the options line to '/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="c18d1-195">Resolvconf -u uitvoeren om bij te werken.</span><span class="sxs-lookup"><span data-stu-id="c18d1-195">Run 'resolvconf -u' to update.</span></span>

<span data-ttu-id="c18d1-196">**SUSE** (maakt gebruik van netconf)</span><span class="sxs-lookup"><span data-stu-id="c18d1-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="c18d1-197">'Timeout:1 pogingen: 5' toevoegen aan de NETCONFIG_DNS_RESOLVER_OPTIONS = "" parameter in '/ etc/sysconfig/netwerk/config'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-197">Add 'timeout:1 attempts:5' to the NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="c18d1-198">Netconfig-update uitvoeren om bij te werken.</span><span class="sxs-lookup"><span data-stu-id="c18d1-198">Run 'netconfig update' to update.</span></span>

<span data-ttu-id="c18d1-199">**CentOS door Rogue Wave-Software (voorheen OpenLogic)** (maakt gebruik van NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="c18d1-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="c18d1-200">'Echo 'opties timeout:1 pogingen: 5' ' toevoegen aan ' / etc/NetworkManager/dispatcher.d/11-dhclient'.</span><span class="sxs-lookup"><span data-stu-id="c18d1-200">Add 'echo "options timeout:1 attempts:5"' to '/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="c18d1-201">Voer 'service netwerk opnieuw is opgestart, bij te werken.</span><span class="sxs-lookup"><span data-stu-id="c18d1-201">Run 'service network restart' to update.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="c18d1-202">Naamomzetting met uw eigen DNS-server</span><span class="sxs-lookup"><span data-stu-id="c18d1-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="c18d1-203">De behoeften van uw name resolution mogelijk verder dan de functies die Azure biedt.</span><span class="sxs-lookup"><span data-stu-id="c18d1-203">Your name resolution needs may go beyond the features that Azure provides.</span></span> <span data-ttu-id="c18d1-204">U kunt bijvoorbeeld vereisen dat DNS-omzetting tussen virtuele netwerken.</span><span class="sxs-lookup"><span data-stu-id="c18d1-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="c18d1-205">Ten aanzien van dit scenario kunt u uw eigen DNS-servers.</span><span class="sxs-lookup"><span data-stu-id="c18d1-205">To cover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="c18d1-206">DNS-servers binnen een virtueel netwerk kunnen de DNS-query's doorsturen naar recursieve resolvers van Azure omzetten van hostnamen die zich in hetzelfde virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="c18d1-206">DNS servers within a virtual network can forward DNS queries to recursive resolvers of Azure to resolve hostnames that are in the same virtual network.</span></span> <span data-ttu-id="c18d1-207">Bijvoorbeeld, een DNS-server die wordt uitgevoerd in Azure reageren op DNS-query's voor de eigen DNS-zone-bestanden en andere query's sturen naar Azure.</span><span class="sxs-lookup"><span data-stu-id="c18d1-207">For example, a DNS server that runs in Azure can respond to DNS queries for its own DNS zone files and forward all other queries to Azure.</span></span> <span data-ttu-id="c18d1-208">Deze functionaliteit kan virtuele machines om te zien van zowel de vermeldingen in de zonebestanden en hostnamen die Azure (via de doorstuurserver biedt).</span><span class="sxs-lookup"><span data-stu-id="c18d1-208">This functionality enables virtual machines to see both your entries in your zone files and hostnames that Azure provides (via the forwarder).</span></span> <span data-ttu-id="c18d1-209">Toegang tot de recursieve resolvers van Azure wordt opgegeven via het virtuele IP-adres 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="c18d1-209">Access to the recursive resolvers of Azure is provided via the virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="c18d1-210">DNS-doorsturen ook kunt DNS-omzetting tussen virtuele netwerken en kan uw lokale machines omzetten van hostnamen die Azure biedt.</span><span class="sxs-lookup"><span data-stu-id="c18d1-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines to resolve hostnames that Azure provides.</span></span> <span data-ttu-id="c18d1-211">Los de hostnaam van een virtuele machine door de virtuele machine van de DNS-server moet zich bevinden in hetzelfde virtuele netwerk en worden geconfigureerd voor doorsturen hostnaam query's naar Azure.</span><span class="sxs-lookup"><span data-stu-id="c18d1-211">To resolve a virtual machine's hostname, the DNS server virtual machine must reside in the same virtual network and be configured to forward hostname queries to Azure.</span></span> <span data-ttu-id="c18d1-212">Omdat het DNS-achtervoegsel in elk virtueel netwerk verschilt, kunt u voorwaardelijk doorsturen regels DNS-query's verzenden naar het juiste virtuele netwerk voor naamomzetting.</span><span class="sxs-lookup"><span data-stu-id="c18d1-212">Because the DNS suffix is different in each virtual network, you can use conditional forwarding rules to send DNS queries to the correct virtual network for resolution.</span></span> <span data-ttu-id="c18d1-213">De volgende afbeelding ziet u twee virtuele netwerken en een on-premises netwerk tijdens het doorzoeken van DNS-omzetting tussen virtuele netwerken met deze methode:</span><span class="sxs-lookup"><span data-stu-id="c18d1-213">The following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![DNS-omzetting tussen virtuele netwerken](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="c18d1-215">Wanneer u naamomzetting die Azure biedt, wordt de interne DNS-achtervoegsel opgegeven aan elke virtuele machine met behulp van DHCP.</span><span class="sxs-lookup"><span data-stu-id="c18d1-215">When you use name resolution that Azure provides, the internal DNS suffix is provided to each virtual machine by using DHCP.</span></span> <span data-ttu-id="c18d1-216">Wanneer u uw eigen name resolution-oplossing gebruikt, wordt dit achtervoegsel aan virtuele machines niet opgegeven, omdat het achtervoegsel andere DNS-architecturen verstoort.</span><span class="sxs-lookup"><span data-stu-id="c18d1-216">When you use your own name resolution solution, this suffix is not supplied to virtual machines because the suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="c18d1-217">Om te verwijzen naar machines met FQDN-naam of het achtervoegsel configureren op uw virtuele machines, kunt u PowerShell of de API om te bepalen van het achtervoegsel:</span><span class="sxs-lookup"><span data-stu-id="c18d1-217">To refer to machines by FQDN or to configure the suffix on your virtual machines, you can use PowerShell or the API to determine the suffix:</span></span>

* <span data-ttu-id="c18d1-218">Voor virtuele netwerken die worden beheerd met Azure Resource Manager, het achtervoegsel is beschikbaar via de [netwerkinterfacekaart](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span><span class="sxs-lookup"><span data-stu-id="c18d1-218">For virtual networks that are managed by Azure Resource Manager, the suffix is available via the [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="c18d1-219">U kunt ook uitvoeren de `azure network public-ip show <resource group> <pip name>` opdracht voor het weergeven van de details van uw openbare IP-adres, waaronder de FQDN-naam van de NIC.</span><span class="sxs-lookup"><span data-stu-id="c18d1-219">You can also run the `azure network public-ip show <resource group> <pip name>` command to display the details of your public IP, which includes the FQDN of the NIC.</span></span>

<span data-ttu-id="c18d1-220">Als het doorsturen van query's in Azure wordt niet voldaan aan uw behoeften, moet u om uw eigen DNS-oplossing te bieden.</span><span class="sxs-lookup"><span data-stu-id="c18d1-220">If forwarding queries to Azure doesn't suit your needs, you need to provide your own DNS solution.</span></span>  <span data-ttu-id="c18d1-221">Uw DNS-oplossing moet:</span><span class="sxs-lookup"><span data-stu-id="c18d1-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="c18d1-222">Geef juiste hostnaamomzetting, bijvoorbeeld [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="c18d1-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="c18d1-223">Als u DDNS gebruikt, moet u mogelijk uitschakelen opruiming van DNS-record.</span><span class="sxs-lookup"><span data-stu-id="c18d1-223">If you use DDNS, you might need to disable DNS record scavenging.</span></span> <span data-ttu-id="c18d1-224">DHCP-leases van Azure erg lang zijn en opruiming kan DNS-records verwijderen voortijdig.</span><span class="sxs-lookup"><span data-stu-id="c18d1-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="c18d1-225">Juiste naamomzetting om toe te staan de omzetting van namen van de externe domein opgeven.</span><span class="sxs-lookup"><span data-stu-id="c18d1-225">Provide appropriate recursive resolution to allow resolution of external domain names.</span></span>
* <span data-ttu-id="c18d1-226">Toegankelijk (TCP en UDP op poort 53) van de clients die het fungeert en kunnen toegang tot Internet.</span><span class="sxs-lookup"><span data-stu-id="c18d1-226">Be accessible (TCP and UDP on port 53) from the clients it serves and be able to access the Internet.</span></span>
* <span data-ttu-id="c18d1-227">Beveiligd is tegen toegang vanaf het Internet te beperken van bedreigingen die door externe agents.</span><span class="sxs-lookup"><span data-stu-id="c18d1-227">Be secured against access from the Internet to mitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="c18d1-228">Voor de beste prestaties wanneer u virtuele machines in Azure DNS-servers, IPv6 uitschakelen en wijs een [openbare IP op exemplaarniveau](../../virtual-network/virtual-networks-instance-level-public-ip.md) aan elke virtuele machine van de DNS-server.</span><span class="sxs-lookup"><span data-stu-id="c18d1-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) to each DNS server virtual machine.</span></span>  
>
>
