---
title: Cassandra met Linux uitvoeren in Azure | Microsoft Docs
description: Uitvoeren van een cluster Cassandra op Linux in Azure Virtual Machines vanaf een Node.js-app
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 1ff3d77ced6c9d90029b251490c05e52d9b43515
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="39eac-103">Cassandra op Azure uitvoeren met Linux en vanaf Node.js openen</span><span class="sxs-lookup"><span data-stu-id="39eac-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="39eac-104">Azure heeft twee verschillende implementatiemodellen voor het maken en werken met resources: [Resource Manager en Classic](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="39eac-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="39eac-105">In dit artikel bevat informatie over met behulp van het klassieke implementatiemodel.</span><span class="sxs-lookup"><span data-stu-id="39eac-105">This article covers using the Classic deployment model.</span></span> <span data-ttu-id="39eac-106">U doet er verstandig aan voor de meeste nieuwe implementaties het Resource Manager-model te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="39eac-106">Microsoft recommends that most new deployments use the Resource Manager model.</span></span> <span data-ttu-id="39eac-107">Zie Resource Manager-sjablonen voor [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) en [Spark-cluster en Cassandra op CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="39eac-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="39eac-108">Overzicht</span><span class="sxs-lookup"><span data-stu-id="39eac-108">Overview</span></span>
<span data-ttu-id="39eac-109">Microsoft Azure is een open cloudplatform die zowel Microsoft als goed als niet-Microsoft-software, waaronder besturingssystemen, toepassingsservers, messaging middleware, evenals SQL en NoSQL-databases van beide modellen commerciële en open-source wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="39eac-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="39eac-110">Robuuste services op openbare clouds, inclusief Azure bouwen vereist zorgvuldige planning en architectuur opzettelijk voor beide toepassingsservers als opslag en lagen.</span><span class="sxs-lookup"><span data-stu-id="39eac-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="39eac-111">Cassandra van gedistribueerde opslagarchitectuur is natuurlijk helpt bij het bouwen van maximaal beschikbare systemen die fouttolerant voor clusters zijn.</span><span class="sxs-lookup"><span data-stu-id="39eac-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="39eac-112">Cassandra is een cloud schaal NoSQL-database onderhouden door Apache Software Foundation op cassandra.apache.org; Cassandra is geschreven in Java en daarom wordt uitgevoerd op zowel op Windows en Linux platforms.</span><span class="sxs-lookup"><span data-stu-id="39eac-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="39eac-113">De focus van dit artikel is Cassandra implementatie op Ubuntu weergeven als een cluster met één of meerdere data center gebruik van Microsoft Azure Virtual Machines en virtuele netwerken.</span><span class="sxs-lookup"><span data-stu-id="39eac-113">The focus of this article is to show Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="39eac-114">De implementatie van het cluster voor geoptimaliseerde productieworkloads valt buiten het bereik van dit artikel omdat hiervoor meerdere schijf knooppuntconfiguratie, geschikte topologie voor ringtopologie en gegevens modelleren ter ondersteuning van de benodigde replicatie, gegevensconsistentie, doorvoer en hoge de beschikbaarheidsvereisten van de.</span><span class="sxs-lookup"><span data-stu-id="39eac-114">The cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling to support the needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="39eac-115">Dit artikel wordt een fundamenteel aanpak om weer te geven wat betrokken is bij het bouwen van het cluster Cassandra vergeleken Docker, Chef of Puppet waardoor de implementatie van de infrastructuur eenvoudiger geworden.</span><span class="sxs-lookup"><span data-stu-id="39eac-115">This article takes a fundamental approach to show what is involved in building the Cassandra cluster compared Docker, Chef or Puppet which can make the infrastructure deployment a lot easier.</span></span>  

## <a name="the-deployment-models"></a><span data-ttu-id="39eac-116">Het implementatiemodel</span><span class="sxs-lookup"><span data-stu-id="39eac-116">The Deployment Models</span></span>
<span data-ttu-id="39eac-117">Microsoft Azure-netwerken kunt de implementatie van een geïsoleerd particulier clusters, de toegang van die beperkt worden kan tot fijnmazige netwerkbeveiliging bereiken.</span><span class="sxs-lookup"><span data-stu-id="39eac-117">Microsoft Azure networking allows the deployment of isolated private clusters, the access of which can be restricted to attain fine grained network security.</span></span>  <span data-ttu-id="39eac-118">Sinds dit artikel is over het weergeven van de implementatie Cassandra op een fundamenteel niveau, wordt er niet gericht op het consistentieniveau van de en de optimale Opslagontwerp voor doorvoer.</span><span class="sxs-lookup"><span data-stu-id="39eac-118">Since this article is about showing the Cassandra deployment at a fundamental level, we will not focus on the consistency level and the optimal storage design for throughput.</span></span> <span data-ttu-id="39eac-119">Hier volgt de lijst met de netwerkvereisten voor onze hypothetische cluster:</span><span class="sxs-lookup"><span data-stu-id="39eac-119">Here is the list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="39eac-120">Externe systemen geen toegang tot de database van de Cassandra van binnen of buiten Azure</span><span class="sxs-lookup"><span data-stu-id="39eac-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="39eac-121">Cassandra cluster heeft worden achter een load balancer voor thrift-verkeer</span><span class="sxs-lookup"><span data-stu-id="39eac-121">Cassandra cluster has to be behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="39eac-122">Cassandra knooppunten in twee groepen in elk Datacenter voor de clusterbeschikbaarheid van een verbeterde implementeren</span><span class="sxs-lookup"><span data-stu-id="39eac-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="39eac-123">Vergrendelen het cluster zodanig dat alleen serverfarm toepassing toegang tot de database direct heeft</span><span class="sxs-lookup"><span data-stu-id="39eac-123">Lock down the cluster so that only application server farm has access to the database directly</span></span>
* <span data-ttu-id="39eac-124">Er is geen openbare netwerken eindpunten dan SSH</span><span class="sxs-lookup"><span data-stu-id="39eac-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="39eac-125">Elk knooppunt Cassandra moet een vaste IP-adres</span><span class="sxs-lookup"><span data-stu-id="39eac-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="39eac-126">Cassandra kan worden geïmplementeerd op één Azure-regio of op meerdere regio's op basis van de gedistribueerde aard van de werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="39eac-126">Cassandra can be deployed to a single Azure region or to multiple regions based on the distributed nature of the workload.</span></span> <span data-ttu-id="39eac-127">Meerdere landen/regio implementatiemodel kan worden gebruikt om eindgebruikers dichter bij een bepaalde Geografie via dezelfde Cassandra-infrastructuur.</span><span class="sxs-lookup"><span data-stu-id="39eac-127">Multi-region deployment model can be leveraged to serve end users closer to a particular geography through the same Cassandra infrastructure.</span></span> <span data-ttu-id="39eac-128">Cassandra van ingebouwde knooppunt replicatie zorgt voor de synchronisatie van meerdere master schrijft die afkomstig zijn van meerdere datacenters en geeft een consistente weergave van de gegevens van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="39eac-128">Cassandra’s built-in node replication takes care of the synchronization of multi-master writes originating from multiple data centers and presents a consistent view of the data to applications.</span></span> <span data-ttu-id="39eac-129">Implementatie van meerdere landen/regio kan ook helpen bij de risicobeperking van de breder serviceonderbrekingen van Azure.</span><span class="sxs-lookup"><span data-stu-id="39eac-129">Multi-region deployment can also help with the risk mitigation of the broader Azure service outages.</span></span> <span data-ttu-id="39eac-130">Instelbare consistentie van Cassandra en de replicatietopologie, kunt in de behoeften van diverse RPO van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="39eac-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="39eac-131">Implementatie van één regio</span><span class="sxs-lookup"><span data-stu-id="39eac-131">Single Region Deployment</span></span>
<span data-ttu-id="39eac-132">We beginnen met een implementatie met één regio en verzamelt de geleerde lessen bij het maken van een model meerdere landen/regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-132">We will start with a single region deployment and harvest the learnings in creating a multi-region model.</span></span> <span data-ttu-id="39eac-133">Azure virtuele netwerken wordt gebruikt voor het maken van geïsoleerde subnetten, zodat de netwerk-beveiligingsvereisten bovengenoemde kunnen worden voldaan.</span><span class="sxs-lookup"><span data-stu-id="39eac-133">Azure virtual networking will be used to create isolated subnets so that the network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="39eac-134">Het proces beschreven bij het maken van de implementatie van één regio gebruikt Ubuntu 14.04 TNS en Cassandra 2.08; het proces kan eenvoudig worden vastgesteld met de andere varianten van Linux.</span><span class="sxs-lookup"><span data-stu-id="39eac-134">The process described in creating the single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, the process can easily be adopted to the other Linux variants.</span></span> <span data-ttu-id="39eac-135">Hier volgen enkele van de al kenmerken van de implementatie van één regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-135">The following are some of the systemic characteristics of the single region deployment.</span></span>  

<span data-ttu-id="39eac-136">**Hoge beschikbaarheid:** Cassandra knooppunten weergegeven in de afbeelding 1 wordt geïmplementeerd voor twee beschikbaarheidssets zodat de knooppunten worden verdeeld tussen meerdere domeinen met fouten voor hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="39eac-136">**High Availability:** The Cassandra nodes shown in the Figure 1 are deployed to two availability sets so that the nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="39eac-137">Virtuele machines van aantekeningen voorzien met elke beschikbaarheidsset is toegewezen aan domeinen met fouten 2.</span><span class="sxs-lookup"><span data-stu-id="39eac-137">VMs annotated with each availability set is mapped to 2 fault domains.</span></span>  <span data-ttu-id="39eac-138">Microsoft Azure maakt gebruik van het concept van het foutdomein voor het beheren van ongeplande tijd (bijvoorbeeld hardware of software-fouten) tijdens het concept van upgradedomein (zoals host of Gast OS patches of upgrades worden uitgevoerd, toepassingsupgrades) wordt gebruikt voor het beheer van geplande uitvaltijd.</span><span class="sxs-lookup"><span data-stu-id="39eac-138">Microsoft Azure uses the concept of fault domain to manage unplanned down time (e.g. hardware or software failures) while the concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="39eac-139">Zie [herstel na noodgevallen en hoge beschikbaarheid voor Azure-toepassingen](http://msdn.microsoft.com/library/dn251004.aspx) voor de rol van probleem- en domeinen in het bereiken van maximale beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="39eac-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for the role of fault and upgrade domains in attaining high availability.</span></span>

![Implementatie van één regio](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="39eac-141">Afbeelding 1: Implementatie van één regio</span><span class="sxs-lookup"><span data-stu-id="39eac-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="39eac-142">Houd er rekening mee dat op het moment van schrijven van dit Azure niet toegestaan de expliciete toewijzing van een groep van virtuele machines naar een specifieke foutdomein; Als gevolg daarvan kan zelfs met het implementatiemodel dat wordt weergegeven in afbeelding 1, is het statistisch waarschijnlijk dat alle virtuele machines kunnen worden toegewezen aan twee domeinen met fouten in plaats van vier.</span><span class="sxs-lookup"><span data-stu-id="39eac-142">Note that at the time of this writing, Azure doesn’t allow the explicit mapping of a group of VMs to a specific fault domain; consequently, even with the deployment model shown in Figure 1, it is statistically probable that all the virtual machines may be mapped to two fault domains instead of four.</span></span>

<span data-ttu-id="39eac-143">**Load Balancing Thrift-verkeer:** Thrift-clientbibliotheken binnen de webserver verbinding maken met het cluster via een interne load balancer.</span><span class="sxs-lookup"><span data-stu-id="39eac-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside the web server connect to the cluster through an internal load balancer.</span></span> <span data-ttu-id="39eac-144">Hiervoor moet het proces van de interne load balancer toe te voegen aan het subnet "gegevens" (Zie afbeelding 1) in de context van de cloudservice die als host fungeert voor het cluster Cassandra.</span><span class="sxs-lookup"><span data-stu-id="39eac-144">This requires the process of adding the internal load balancer to the “data” subnet (refer Figure 1) in the context of the cloud service hosting the Cassandra cluster.</span></span> <span data-ttu-id="39eac-145">Als de interne load balancer is gedefinieerd, vereist elk knooppunt het eindpunt taakverdeling moeten worden toegevoegd met de aantekeningen van een set met gelijke taakverdeling met vooraf gedefinieerde load balancer-naam.</span><span class="sxs-lookup"><span data-stu-id="39eac-145">Once the internal load balancer is defined, each node requires the load balanced endpoint to be added with the annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="39eac-146">Zie [Azure interne Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="39eac-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="39eac-147">**Cluster zaden:** is het belangrijk dat de meeste maximaal beschikbare knooppunten voor zaden selecteren als de nieuwe knooppunten zullen communiceren met een seed-knooppunten om de topologie van het cluster te detecteren.</span><span class="sxs-lookup"><span data-stu-id="39eac-147">**Cluster Seeds:** It is important to select the most highly available nodes for seeds as the new nodes will communicate with seed nodes to discover the topology of the cluster.</span></span> <span data-ttu-id="39eac-148">Eén knooppunt uit elke beschikbaarheidsset is aangewezen als seed-knooppunten om te voorkomen dat storingspunt.</span><span class="sxs-lookup"><span data-stu-id="39eac-148">One node from each availability set is designated as seed nodes to avoid single point of failure.</span></span>

<span data-ttu-id="39eac-149">**Replicatie Factor en Consistentieniveau:** Cassandra van ingebouwde hoge beschikbaarheid en gegevens duurzaamheid wordt gekenmerkt door de replicatie-Factor (RF - aantal exemplaren van elke rij die is opgeslagen op het cluster) en Consistentieniveau (aantal replica's worden gelezen/geschreven voordat het resultaat wordt teruggezonden naar de aanroeper).</span><span class="sxs-lookup"><span data-stu-id="39eac-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by the Replication Factor (RF - number of copies of each row stored on the cluster) and Consistency Level (number of replicas to be read/written before returning the result to the caller).</span></span> <span data-ttu-id="39eac-150">Replicatie factor is opgegeven tijdens het maken van KEYSPACE (vergelijkbaar met een relationele database), terwijl het consistentieniveau van de is opgegeven tijdens het uitgeven van de CRUD-query.</span><span class="sxs-lookup"><span data-stu-id="39eac-150">Replication factor is specified during the KEYSPACE (similar to a relational database) creation whereas the consistency level is specified while issuing the CRUD query.</span></span> <span data-ttu-id="39eac-151">Zie de documentatie bij Cassandra [configureren voor consistentie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) voor consistentie details en de formule voor quorum berekeningen.</span><span class="sxs-lookup"><span data-stu-id="39eac-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and the formula for quorum computation.</span></span>

<span data-ttu-id="39eac-152">Cassandra ondersteunt twee soorten integriteit gegevensmodellen – consistentie en uiteindelijke consistentie; de replicatie factoren en het niveau van de consistentie wordt samen bepalen of de gegevens consistent zodra een schrijfbewerking voltooid is of moeten uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="39eac-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; the Replication Factor and Consistency Level will together determine if the data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="39eac-153">Bijvoorbeeld QUORUM opgeven als het niveau van de consistentie altijd wordt zorgt ervoor dat gegevens consistentie tijdens een consistentiecontrole niveau, onder het aantal replica's worden geschreven naar behoefte te bereiken QUORUM (bijvoorbeeld een) resulteert in gegevens wordt uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="39eac-153">For example, specifying QUORUM as the Consistency Level will always ensures data Consistency while any consistency level, below the number of replicas to be written as needed to attain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="39eac-154">De 8-node cluster hierboven, met een factor van de replicatie van 3 en QUORUM (2 knooppunten worden gelezen of geschreven voor consistentie) consistentieniveau lezen/schrijven, kunnen het theoretische verlies van maximaal 1 knooppunt per replicatiegroep overleven voordat de toepassing start daar iets van merkt de is mislukt.</span><span class="sxs-lookup"><span data-stu-id="39eac-154">The 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive the theoretical loss of at the most 1 node per replication group before the application start noticing the failure.</span></span> <span data-ttu-id="39eac-155">Hierbij wordt ervan uitgegaan dat alle de belangrijkste spaties hebben ook taakverdeling lezen/schrijven aanvragen.</span><span class="sxs-lookup"><span data-stu-id="39eac-155">This assumes that all the key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="39eac-156">Hier volgen de parameters die we voor de geïmplementeerde cluster wilt gebruiken:</span><span class="sxs-lookup"><span data-stu-id="39eac-156">The following are the parameters we will use for the deployed cluster:</span></span>

<span data-ttu-id="39eac-157">Één regio Cassandra clusterconfiguratie:</span><span class="sxs-lookup"><span data-stu-id="39eac-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="39eac-158">Cluster-Parameter</span><span class="sxs-lookup"><span data-stu-id="39eac-158">Cluster Parameter</span></span> | <span data-ttu-id="39eac-159">Waarde</span><span class="sxs-lookup"><span data-stu-id="39eac-159">Value</span></span> | <span data-ttu-id="39eac-160">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="39eac-161">Het aantal knooppunten (N)</span><span class="sxs-lookup"><span data-stu-id="39eac-161">Number of Nodes (N)</span></span> |<span data-ttu-id="39eac-162">8</span><span class="sxs-lookup"><span data-stu-id="39eac-162">8</span></span> |<span data-ttu-id="39eac-163">Totaal aantal knooppunten in het cluster</span><span class="sxs-lookup"><span data-stu-id="39eac-163">Total number of nodes in the cluster</span></span> |
| <span data-ttu-id="39eac-164">Replicatie Factor (RF)</span><span class="sxs-lookup"><span data-stu-id="39eac-164">Replication Factor (RF)</span></span> |<span data-ttu-id="39eac-165">3</span><span class="sxs-lookup"><span data-stu-id="39eac-165">3</span></span> |<span data-ttu-id="39eac-166">Aantal replica's van een bepaalde rij</span><span class="sxs-lookup"><span data-stu-id="39eac-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="39eac-167">Consistentieniveau (schrijven)</span><span class="sxs-lookup"><span data-stu-id="39eac-167">Consistency Level (Write)</span></span> |<span data-ttu-id="39eac-168">QUORUM[(RF/2) +1) = 2] is het resultaat van de formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="39eac-168">QUORUM[(RF/2) +1) = 2] The result of the formula is rounded down</span></span> |<span data-ttu-id="39eac-169">Maximaal 2 replica's schrijft voordat het antwoord wordt verzonden naar de aanroeper; 3e replica is geschreven in een manier uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="39eac-169">Writes at the most 2 replicas before the response is sent to the caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="39eac-170">Consistentieniveau (lezen)</span><span class="sxs-lookup"><span data-stu-id="39eac-170">Consistency Level (Read)</span></span> |<span data-ttu-id="39eac-171">QUORUM [(RF/2) + 1 = 2] het resultaat van de formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="39eac-171">QUORUM [(RF/2) +1= 2] The result of the formula is rounded down</span></span> |<span data-ttu-id="39eac-172">Leest 2 replica's moet worden verzonden naar de aanroeper.</span><span class="sxs-lookup"><span data-stu-id="39eac-172">Reads 2 replicas before sending response to the caller.</span></span> |
| <span data-ttu-id="39eac-173">Een replicatiestrategie voor</span><span class="sxs-lookup"><span data-stu-id="39eac-173">Replication Strategy</span></span> |<span data-ttu-id="39eac-174">Zie NetworkTopologyStrategy [gegevensreplicatie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="39eac-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="39eac-175">De implementatietopologie begrijpt en replica's op knooppunten geplaatst, zodat alle replica's niet op hetzelfde rack eindigen</span><span class="sxs-lookup"><span data-stu-id="39eac-175">Understands the deployment topology and places replicas on nodes so that all the replicas don’t end up on the same rack</span></span> |
| <span data-ttu-id="39eac-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="39eac-176">Snitch</span></span> |<span data-ttu-id="39eac-177">Zie GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="39eac-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="39eac-178">Een concept van snitch NetworkTopologyStrategy gebruikt om te begrijpen van de topologie.</span><span class="sxs-lookup"><span data-stu-id="39eac-178">NetworkTopologyStrategy uses a concept of snitch to understand the topology.</span></span> <span data-ttu-id="39eac-179">GossipingPropertyFileSnitch biedt een betere controle in de toewijzing van elk knooppunt aan het datacenter en rack.</span><span class="sxs-lookup"><span data-stu-id="39eac-179">GossipingPropertyFileSnitch gives better control in mapping each node to data center and rack.</span></span> <span data-ttu-id="39eac-180">Het cluster gebruikt roddels vervolgens naar deze informatie is doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-180">The cluster then uses gossip to propagate this information.</span></span> <span data-ttu-id="39eac-181">Dit is veel eenvoudiger in dynamische IP-instelling ten opzichte van PropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="39eac-181">This is much simpler in dynamic IP setting relative to PropertyFileSnitch</span></span> |

<span data-ttu-id="39eac-182">**Azure overwegingen voor het Cluster Cassandra:** Microsoft Azure Virtual Machines mogelijkheid gebruikt Azure Blob-opslag voor persistentie van de schijf; Azure-opslag bespaart 3 replica's van elke schijf voor maximale duurzaamheid.</span><span class="sxs-lookup"><span data-stu-id="39eac-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="39eac-183">Dit betekent dat elke rij gegevens ingevoegd in een tabel Cassandra is al opgeslagen in 3 replica's en daarom gegevensconsistentie is al afgehandeld zelfs als de replicatie Factor (RF) 1 is.</span><span class="sxs-lookup"><span data-stu-id="39eac-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if the Replication Factor (RF) is 1.</span></span> <span data-ttu-id="39eac-184">Het belangrijkste probleem met replicatie Factor 1 is de toepassing krijgen uitvaltijd zelfs als een enkel Cassandra knooppunt mislukt.</span><span class="sxs-lookup"><span data-stu-id="39eac-184">The main problem with Replication Factor being 1 is that the application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="39eac-185">Als een knooppunt niet actief voor de problemen (zoals hardware, software systeemfouten) dat wordt herkend door de Azure-Infrastructuurcontroller is, wordt er een nieuw knooppunt in plaats daarvan met de dezelfde opslagstations inrichten.</span><span class="sxs-lookup"><span data-stu-id="39eac-185">However, if a node is down for the problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using the same storage drives.</span></span> <span data-ttu-id="39eac-186">Een nieuw knooppunt ter vervanging van de oude inrichting kan enkele minuten duren.</span><span class="sxs-lookup"><span data-stu-id="39eac-186">Provisioning a new node to replace the old one may take a few minutes.</span></span>  <span data-ttu-id="39eac-187">Op dezelfde manier Cassandra upgrades voor gepland onderhoudsactiviteiten zoals Gast OS wijzigingen, en wijzigingen in de toepassing Azure-Infrastructuurcontroller voert rolling upgrades van de knooppunten in het cluster.</span><span class="sxs-lookup"><span data-stu-id="39eac-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of the nodes in the cluster.</span></span>  <span data-ttu-id="39eac-188">Rolling upgrades ook kan duren voordat u een paar knooppunten tegelijk, en daarom korte uitvaltijd voor enkele partities kan optreden in het cluster.</span><span class="sxs-lookup"><span data-stu-id="39eac-188">Rolling upgrades also may take down a few nodes at a time and hence the cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="39eac-189">De gegevens wordt echter niet worden verbroken vanwege de ingebouwde redundantie voor Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="39eac-189">However, the data will not be lost due to the built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="39eac-190">Voor systemen die zijn geïmplementeerd in Azure die geen hoge beschikbaarheid vereist (bijvoorbeeld ongeveer 99,9 die gelijk is aan 8.76 hrs-jaar; Zie [hoge beschikbaarheid](http://en.wikipedia.org/wiki/High_availability) voor meer informatie) u kunt mogelijk uit te voeren met RF = 1 en Consistentieniveau = een.</span><span class="sxs-lookup"><span data-stu-id="39eac-190">For systems deployed to Azure that doesn’t require high availability (e.g. around 99.9 which is equivalent to 8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able to run with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="39eac-191">Voor toepassingen met hoge beschikbaarheidsvereisten, RF = 3 en Consistentieniveau = QUORUM geplaatst en de uitvaltijd van een van de knooppunten van een van de replica's.</span><span class="sxs-lookup"><span data-stu-id="39eac-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate the down time of one of the nodes one of the replicas.</span></span> <span data-ttu-id="39eac-192">RF = 1 in traditionele implementaties (bijvoorbeeld op locatie) kunnen niet worden gebruikt vanwege het mogelijk gegevens verliest als gevolg van problemen zoals schijffouten.</span><span class="sxs-lookup"><span data-stu-id="39eac-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due to the possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="39eac-193">Implementatie van meerdere landen/regio</span><span class="sxs-lookup"><span data-stu-id="39eac-193">Multi-region Deployment</span></span>
<span data-ttu-id="39eac-194">De Cassandra data center bewust replicatie en consistentie model helpt bij de implementatie van meerdere landen/regio gebruiksklaar zonder de noodzaak van een externe tooling hierboven.</span><span class="sxs-lookup"><span data-stu-id="39eac-194">Cassandra’s data-center-aware replication and consistency model described above helps with the multi-region deployment out of the box without the need for any external tooling.</span></span> <span data-ttu-id="39eac-195">Dit is heel anders dan de traditionele relationele databases waar de instellingen voor het spiegelen van databases voor meerdere masters schrijfacties erg complex kan zijn.</span><span class="sxs-lookup"><span data-stu-id="39eac-195">This is quite different from the traditional relational databases where the setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="39eac-196">Cassandra in een instellen in meerdere regio kan helpen bij het gebruiksscenario's waaronder de volgende:</span><span class="sxs-lookup"><span data-stu-id="39eac-196">Cassandra in a multi-region set up can help with the usage scenarios including the following:</span></span>

<span data-ttu-id="39eac-197">**Implementatie op basis van nabijheid:** multitenant-toepassingen met de toewijzing van gebruikers van de tenant wissen-naar-regio, kan worden geprofiteerd door lage latenties van het cluster meerdere landen/regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by the multi-region cluster’s low latencies.</span></span> <span data-ttu-id="39eac-198">Voorbeeld van een management learning systemen voor onderwijsinstellingen kunnen implementeren om een gedistribueerde cluster in VS-Oost en VS-West gebieden voor het uitvoeren van de respectieve campussen voor transactionele evenals analytics.</span><span class="sxs-lookup"><span data-stu-id="39eac-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions to serve the respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="39eac-199">De gegevens lokaal consistent kunnen zijn op de tijd lees- en schrijfbewerkingen en uiteindelijk consistent kan worden over zowel de regio's.</span><span class="sxs-lookup"><span data-stu-id="39eac-199">The data can be locally consistent at the time reads and writes and can be eventually consistent across both the regions.</span></span> <span data-ttu-id="39eac-200">Er zijn andere voorbeelden zoals distributie van de media, e-commerce en alles en alles wat u geconcentreerd geo-gebruiker basis fungeert een goede gebruiksvoorbeeld voor dit implementatiemodel is.</span><span class="sxs-lookup"><span data-stu-id="39eac-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="39eac-201">**Hoge beschikbaarheid:** redundantie is een belangrijke rol bij het bereiken van maximale beschikbaarheid van de software en hardware; Zie betrouwbare Cloudsystemen gebouw in Microsoft Azure voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="39eac-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="39eac-202">In Microsoft Azure is het alleen betrouwbare manier om dat te bereiken true redundantie door het implementeren van een cluster met meerdere landen/regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-202">On Microsoft Azure, the only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="39eac-203">Toepassingen kunnen worden geïmplementeerd in een actief-actief of actief / passief-modus en als een van de regio's niet actief is, Azure Traffic Manager verkeer kunt omleiden naar de actieve regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-203">Applications can be deployed in an active-active or active-passive mode and if one of the regions is down, Azure Traffic Manager can redirect traffic to the active region.</span></span>  <span data-ttu-id="39eac-204">Met de implementatie van één regio als de beschikbaarheid van 99,9, een implementatie van de twee regio kan bereiken een beschikbaarheid van 99.9999 berekend door de formule: (1-(1-0.999) * (1-0,999)) * 100); Zie het bovenstaande artikel voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="39eac-204">With the single region deployment, if the availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by the formula: (1-(1-0.999) * (1-0.999))*100); see the above paper for details.</span></span>

<span data-ttu-id="39eac-205">**Herstel na noodgevallen:** meerdere landen/regio Cassandra cluster als goed ontworpen, kan tolereren onherstelbare data center storingen.</span><span class="sxs-lookup"><span data-stu-id="39eac-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="39eac-206">Als één regio is niet actief is, kan de toepassing geïmplementeerd naar andere regio's kunt starten voor de eindgebruikers.</span><span class="sxs-lookup"><span data-stu-id="39eac-206">If one region is down, the application deployed to other regions can start serving the end users.</span></span> <span data-ttu-id="39eac-207">Net als elke andere zakelijke continuïteit-implementaties heeft de toepassing moet fouttolerante voor sommige gegevens verliest als gevolg van de gegevens in de asynchrone pijplijn.</span><span class="sxs-lookup"><span data-stu-id="39eac-207">Like any other business continuity implementations, the application has to be tolerant for some data loss resulting from the data in the asynchronous pipeline.</span></span> <span data-ttu-id="39eac-208">Cassandra heeft echter het herstel veel sneller dan de tijd die door processen voor het herstellen van traditionele databases.</span><span class="sxs-lookup"><span data-stu-id="39eac-208">However, Cassandra makes the recovery much swifter than the time taken by traditional database recovery processes.</span></span> <span data-ttu-id="39eac-209">Afbeelding 2 ziet het normale implementatie voor meerdere landen/regio-model met acht knooppunten in elke regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-209">Figure 2 shows the typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="39eac-210">Beide regio's zijn kopieën van de mirror van elkaar voor dezelfde hoogte van het; concrete ontwerpen, is afhankelijk van het type werkbelasting (bv. transactioneel of analytische), RPO, RTO, gegevensconsistentie en beschikbaarheidsvereisten.</span><span class="sxs-lookup"><span data-stu-id="39eac-210">Both regions are mirror images of each other for the same of symmetry; real world designs depend on the workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Implementatie van meerdere regio](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="39eac-212">Afbeelding2: Implementatie van meerdere landen/regio Cassandra</span><span class="sxs-lookup"><span data-stu-id="39eac-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="39eac-213">Netwerkintegratie</span><span class="sxs-lookup"><span data-stu-id="39eac-213">Network Integration</span></span>
<span data-ttu-id="39eac-214">Sets van virtuele machines die zijn geïmplementeerd op particuliere netwerken zich op twee gebieden communiceert met elkaar met behulp van een VPN-tunnel.</span><span class="sxs-lookup"><span data-stu-id="39eac-214">Sets of virtual machines deployed to private networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="39eac-215">De VPN-tunnel maakt verbinding met twee software-gateways ingericht tijdens het implementatieproces van het netwerk.</span><span class="sxs-lookup"><span data-stu-id="39eac-215">The VPN tunnel connects two software gateways provisioned during the network deployment process.</span></span> <span data-ttu-id="39eac-216">Beide regio's hebben vergelijkbare netwerkarchitectuur in termen van de subnetten 'web' en 'data'; Azure-netwerken kunt het maken van zoveel subnetten indien nodig en ACL's van toepassing als nodig is voor netwerkbeveiliging.</span><span class="sxs-lookup"><span data-stu-id="39eac-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows the creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="39eac-217">Tijdens het ontwerpen van de clustertopologie inter data center communicatie latentie en de economische gevolgen van het netwerkverkeer moeten rekening worden gehouden.</span><span class="sxs-lookup"><span data-stu-id="39eac-217">While designing the cluster topology inter data center communication latency and the economic impact of the network traffic need to be considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="39eac-218">Consistentie van de gegevens voor de implementatie van meerdere Datacenter</span><span class="sxs-lookup"><span data-stu-id="39eac-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="39eac-219">Gedistribueerde implementaties moeten op de hoogte van de cluster-topologie-gevolgen voor de doorvoer en hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="39eac-219">Distributed deployments need to be aware of the cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="39eac-220">De RF en Consistentieniveau moeten zodanig dat het quorum niet afhankelijk van de beschikbaarheid van de datacenters worden geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="39eac-220">The RF and Consistency Level need to be selected in such way that the quorum doesn’t depend on the availability of all the data centers.</span></span>
<span data-ttu-id="39eac-221">Voor een systeem dat hoge consistentie moet zorgt een LOCAL_QUORUM voor consistentieniveau (voor lees- en schrijfbewerkingen) ervoor dat de lokale lees- en schrijfbewerkingen is voldaan vanaf de lokale knooppunten terwijl gegevens asynchroon gerepliceerd naar de RAS-datacenters.</span><span class="sxs-lookup"><span data-stu-id="39eac-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that the local reads and writes are satisfied from the local nodes while data is replicated asynchronously to the remote data centers.</span></span>  <span data-ttu-id="39eac-222">Tabel 2 geeft een overzicht van de configuratiegegevens voor het beschreven later in het schrijven van meerdere landen/regio-cluster.</span><span class="sxs-lookup"><span data-stu-id="39eac-222">Table 2 summarizes the configuration details for the multi-region cluster outlined later in the write up.</span></span>

<span data-ttu-id="39eac-223">**Twee regio Cassandra clusterconfiguratie**</span><span class="sxs-lookup"><span data-stu-id="39eac-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="39eac-224">Cluster-Parameter</span><span class="sxs-lookup"><span data-stu-id="39eac-224">Cluster Parameter</span></span> | <span data-ttu-id="39eac-225">Waarde</span><span class="sxs-lookup"><span data-stu-id="39eac-225">Value</span></span> | <span data-ttu-id="39eac-226">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="39eac-227">Het aantal knooppunten (N)</span><span class="sxs-lookup"><span data-stu-id="39eac-227">Number of Nodes (N)</span></span> |<span data-ttu-id="39eac-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="39eac-228">8 + 8</span></span> |<span data-ttu-id="39eac-229">Totaal aantal knooppunten in het cluster</span><span class="sxs-lookup"><span data-stu-id="39eac-229">Total number of nodes in the cluster</span></span> |
| <span data-ttu-id="39eac-230">Replicatie Factor (RF)</span><span class="sxs-lookup"><span data-stu-id="39eac-230">Replication Factor (RF)</span></span> |<span data-ttu-id="39eac-231">3</span><span class="sxs-lookup"><span data-stu-id="39eac-231">3</span></span> |<span data-ttu-id="39eac-232">Aantal replica's van een bepaalde rij</span><span class="sxs-lookup"><span data-stu-id="39eac-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="39eac-233">Consistentieniveau (schrijven)</span><span class="sxs-lookup"><span data-stu-id="39eac-233">Consistency Level (Write)</span></span> |<span data-ttu-id="39eac-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] het resultaat van de formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="39eac-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] The result of the formula is rounded down</span></span> |<span data-ttu-id="39eac-235">2 knooppunten worden geschreven naar het eerste Datacenter synchroon; de extra 2 knooppunten die nodig zijn voor het quorum wordt asynchroon geschreven tot 2e Datacenter.</span><span class="sxs-lookup"><span data-stu-id="39eac-235">2 nodes will be written to the first data center synchronously; the additional 2 nodes needed for quorum will be written asynchronously to the 2nd data center.</span></span> |
| <span data-ttu-id="39eac-236">Consistentieniveau (lezen)</span><span class="sxs-lookup"><span data-stu-id="39eac-236">Consistency Level (Read)</span></span> |<span data-ttu-id="39eac-237">LOCAL_QUORUM ((RF/2) + 1) = 2, het resultaat van de formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="39eac-237">LOCAL_QUORUM ((RF/2) +1) = 2 The result of the formula is rounded down</span></span> |<span data-ttu-id="39eac-238">Alleen aanvragen wordt van slechts één regio; voldaan 2 knooppunten worden gelezen voordat het antwoord terug naar de client wordt verzonden.</span><span class="sxs-lookup"><span data-stu-id="39eac-238">Read requests are satisfied from only one region; 2 nodes are read before the response is sent back to the client.</span></span> |
| <span data-ttu-id="39eac-239">Een replicatiestrategie voor</span><span class="sxs-lookup"><span data-stu-id="39eac-239">Replication Strategy</span></span> |<span data-ttu-id="39eac-240">Zie NetworkTopologyStrategy [gegevensreplicatie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="39eac-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="39eac-241">De implementatietopologie begrijpt en replica's op knooppunten geplaatst, zodat alle replica's niet op hetzelfde rack eindigen</span><span class="sxs-lookup"><span data-stu-id="39eac-241">Understands the deployment topology and places replicas on nodes so that all the replicas don’t end up on the same rack</span></span> |
| <span data-ttu-id="39eac-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="39eac-242">Snitch</span></span> |<span data-ttu-id="39eac-243">Zie GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="39eac-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="39eac-244">Een concept van snitch NetworkTopologyStrategy gebruikt om te begrijpen van de topologie.</span><span class="sxs-lookup"><span data-stu-id="39eac-244">NetworkTopologyStrategy uses a concept of snitch to understand the topology.</span></span> <span data-ttu-id="39eac-245">GossipingPropertyFileSnitch biedt een betere controle in de toewijzing van elk knooppunt aan het datacenter en rack.</span><span class="sxs-lookup"><span data-stu-id="39eac-245">GossipingPropertyFileSnitch gives better control in mapping each node to data center and rack.</span></span> <span data-ttu-id="39eac-246">Het cluster gebruikt roddels vervolgens naar deze informatie is doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-246">The cluster then uses gossip to propagate this information.</span></span> <span data-ttu-id="39eac-247">Dit is veel eenvoudiger in dynamische IP-instelling ten opzichte van PropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="39eac-247">This is much simpler in dynamic IP setting relative to PropertyFileSnitch</span></span> |

## <a name="the-software-configuration"></a><span data-ttu-id="39eac-248">DE SOFTWARECONFIGURATIE</span><span class="sxs-lookup"><span data-stu-id="39eac-248">THE SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="39eac-249">De volgende softwareversies worden gebruikt tijdens de implementatie:</span><span class="sxs-lookup"><span data-stu-id="39eac-249">The following software versions are used during the deployment:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-250">Software</span><span class="sxs-lookup"><span data-stu-id="39eac-250">Software</span></span></th><th><span data-ttu-id="39eac-251">Bron</span><span class="sxs-lookup"><span data-stu-id="39eac-251">Source</span></span></th><th><span data-ttu-id="39eac-252">Versie</span><span class="sxs-lookup"><span data-stu-id="39eac-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-253">JAVA RUNTIME ENVIRONMENT</span><span class="sxs-lookup"><span data-stu-id="39eac-253">JRE</span></span>    </td><td><span data-ttu-id="39eac-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="39eac-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="39eac-255">8U5</span><span class="sxs-lookup"><span data-stu-id="39eac-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-256">JNA</span><span class="sxs-lookup"><span data-stu-id="39eac-256">JNA</span></span>    </td><td><span data-ttu-id="39eac-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="39eac-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="39eac-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="39eac-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="39eac-259">Cassandra</span></span></td><td>[<span data-ttu-id="39eac-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="39eac-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="39eac-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="39eac-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="39eac-262">Ubuntu</span></span>    </td><td><span data-ttu-id="39eac-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="39eac-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="39eac-264">14.04 TNS</span><span class="sxs-lookup"><span data-stu-id="39eac-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="39eac-265">Omdat het downloaden van JRE handmatige instemming met de Oracle-licentie vereist, de vereiste software voor de implementatie vereenvoudigen downloaden naar het bureaublad voor het uploaden van later in de Ubuntu-sjablooninstallatiekopie die we als een voordat de implementatie van het cluster maakt.</span><span class="sxs-lookup"><span data-stu-id="39eac-265">Since downloading of JRE requires manual acceptance of Oracle license, to simplify the deployment, download all the required software to the desktop for later uploading into the Ubuntu template image we will be creating as a precursor to the cluster deployment.</span></span>

<span data-ttu-id="39eac-266">Download de bovenstaande software naar een bekende downloadmap (bijvoorbeeld %TEMP%/downloads op Windows of ~/Downloads op de meeste Linux-distributies of Mac) op de lokale computer.</span><span class="sxs-lookup"><span data-stu-id="39eac-266">Download the above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on the local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="39eac-267">VIRTUELE UBUNTU-MACHINE MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="39eac-268">In deze stap van het proces wordt we Ubuntu installatiekopie maken met de vereiste software zodat de installatiekopie opnieuw kan worden gebruikt voor het inrichten van verschillende Cassandra knooppunten.</span><span class="sxs-lookup"><span data-stu-id="39eac-268">In this step of the process we will create Ubuntu image with the pre-requisite software so that the image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="39eac-269">STAP 1: De SSH-sleutelpaar genereren</span><span class="sxs-lookup"><span data-stu-id="39eac-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="39eac-270">Azure heeft een openbare sleutel die is PEM of DER-gecodeerd tijdens het inrichtingsproces X509 nodig.</span><span class="sxs-lookup"><span data-stu-id="39eac-270">Azure needs an X509 public key that is either PEM or DER encoded at the provisioning time.</span></span> <span data-ttu-id="39eac-271">Een van de instructies die zich bevindt op het SSH gebruiken met Linux op Azure openbaar/persoonlijk sleutelpaar genereren.</span><span class="sxs-lookup"><span data-stu-id="39eac-271">Generate a public/private key pair using the instructions located at How to Use SSH with Linux on Azure.</span></span> <span data-ttu-id="39eac-272">Als u van plan bent te gebruiken putty.exe als SSH-client op Windows of Linux, hebt u de gecodeerde PEM converteren RSA persoonlijke sleutel voor het PPK-indeling met behulp van puttygen.exe; de instructies hiervoor vindt u in de bovenstaande webpagina.</span><span class="sxs-lookup"><span data-stu-id="39eac-272">If you plan to use putty.exe as an SSH client either on Windows or Linux, you have to convert the PEM encoded RSA private key to PPK format using puttygen.exe; the instructions for this can be found in the above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="39eac-273">STAP 2: Ubuntu sjabloon VM maken</span><span class="sxs-lookup"><span data-stu-id="39eac-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="39eac-274">De VM-sjabloon maken, meld u aan bij de klassieke Azure portal en gebruik de volgende volgorde: klik op Nieuw, COMPUTE, virtuele MACHINE, FROM GALERIE, UBUNTU, Ubuntu Server 14.04 TNS, en klik vervolgens op de pijl naar rechts.</span><span class="sxs-lookup"><span data-stu-id="39eac-274">To create the template VM, log into the Azure classic portal and use the following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click the right arrow.</span></span> <span data-ttu-id="39eac-275">Zie voor een zelfstudie waarin wordt beschreven hoe u een Linux-VM's te maken, maak een virtuele Machine uitgevoerd op Linux.</span><span class="sxs-lookup"><span data-stu-id="39eac-275">For a tutorial that describes how to create a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="39eac-276">Voer de volgende gegevens op het scherm 'Virtuele-machineconfiguratie' #1:</span><span class="sxs-lookup"><span data-stu-id="39eac-276">Enter the following information on the “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-277">VELDNAAM</span><span class="sxs-lookup"><span data-stu-id="39eac-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="39eac-278">WAARDE VAN VELD</span><span class="sxs-lookup"><span data-stu-id="39eac-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="39eac-279">OPMERKINGEN</span><span class="sxs-lookup"><span data-stu-id="39eac-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="39eac-280">RELEASEDATUM VERSIE</span><span class="sxs-lookup"><span data-stu-id="39eac-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="39eac-281">Selecteer een datum in de vervolgkeuzelijst omlaag</span><span class="sxs-lookup"><span data-stu-id="39eac-281">Select a date from the drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="39eac-282">NAAM VAN VIRTUELE MACHINE</span><span class="sxs-lookup"><span data-stu-id="39eac-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="39eac-283">Cass-sjabloon</span><span class="sxs-lookup"><span data-stu-id="39eac-283">cass-template</span></span>                   </td><td> <span data-ttu-id="39eac-284">Dit is de hostnaam van de virtuele machine</span><span class="sxs-lookup"><span data-stu-id="39eac-284">This is the hostname of the VM</span></span> </td><tr>
<tr><td><span data-ttu-id="39eac-285">LAAG</span><span class="sxs-lookup"><span data-stu-id="39eac-285">TIER</span></span>                     </td><td> <span data-ttu-id="39eac-286">STANDARD</span><span class="sxs-lookup"><span data-stu-id="39eac-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="39eac-287">Laat de standaardwaarde</span><span class="sxs-lookup"><span data-stu-id="39eac-287">Leave the default</span></span>              </td><tr>
<tr><td><span data-ttu-id="39eac-288">GROOTTE</span><span class="sxs-lookup"><span data-stu-id="39eac-288">SIZE</span></span>                     </td><td> <span data-ttu-id="39eac-289">A1</span><span class="sxs-lookup"><span data-stu-id="39eac-289">A1</span></span>                              </td><td><span data-ttu-id="39eac-290">Selecteer de virtuele machine op basis van de i/o-behoeften; Laat de standaardwaarde voor dit doel.</span><span class="sxs-lookup"><span data-stu-id="39eac-290">Select the VM based on the IO needs; for this purpose leave the default</span></span> </td><tr>
<tr><td> <span data-ttu-id="39eac-291">NIEUWE GEBRUIKERSNAAM</span><span class="sxs-lookup"><span data-stu-id="39eac-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="39eac-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="39eac-292">localadmin</span></span>                       </td><td> <span data-ttu-id="39eac-293">'admin' is een gereserveerde gebruikersnaam in Ubuntu 12. xx en na</span><span class="sxs-lookup"><span data-stu-id="39eac-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="39eac-294">VERIFICATIE</span><span class="sxs-lookup"><span data-stu-id="39eac-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="39eac-295">Klik op het selectievakje</span><span class="sxs-lookup"><span data-stu-id="39eac-295">Click check box</span></span>                 </td><td><span data-ttu-id="39eac-296">Controleer of u wilt beveiligen met een SSH-sleutel</span><span class="sxs-lookup"><span data-stu-id="39eac-296">Check if you want to secure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="39eac-297">CERTIFICAAT</span><span class="sxs-lookup"><span data-stu-id="39eac-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="39eac-298">bestandsnaam van het openbare-sleutelcertificaat</span><span class="sxs-lookup"><span data-stu-id="39eac-298">file name of the public key certificate</span></span> </td><td> <span data-ttu-id="39eac-299">Gebruik de openbare sleutel die eerder is gegenereerd</span><span class="sxs-lookup"><span data-stu-id="39eac-299">Use the public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="39eac-300">Nieuw wachtwoord</span><span class="sxs-lookup"><span data-stu-id="39eac-300">New Password</span></span>    </td><td> <span data-ttu-id="39eac-301">sterk wachtwoord</span><span class="sxs-lookup"><span data-stu-id="39eac-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="39eac-302">Wachtwoord bevestigen</span><span class="sxs-lookup"><span data-stu-id="39eac-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="39eac-303">sterk wachtwoord</span><span class="sxs-lookup"><span data-stu-id="39eac-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="39eac-304">Voer de volgende gegevens op het scherm 'Virtuele-machineconfiguratie' #2:</span><span class="sxs-lookup"><span data-stu-id="39eac-304">Enter the following information on the “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-305">VELDNAAM</span><span class="sxs-lookup"><span data-stu-id="39eac-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="39eac-306">WAARDE VAN VELD</span><span class="sxs-lookup"><span data-stu-id="39eac-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="39eac-307">OPMERKINGEN</span><span class="sxs-lookup"><span data-stu-id="39eac-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="39eac-308">CLOUDSERVICE</span><span class="sxs-lookup"><span data-stu-id="39eac-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="39eac-309">Maak een nieuwe cloudservice</span><span class="sxs-lookup"><span data-stu-id="39eac-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="39eac-310">Cloudservice is een container compute-bronnen zoals virtuele machines</span><span class="sxs-lookup"><span data-stu-id="39eac-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="39eac-311">DNS-NAAM VAN CLOUD-SERVICE</span><span class="sxs-lookup"><span data-stu-id="39eac-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="39eac-312">Ubuntu template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="39eac-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="39eac-313">Geef de naam van een machine agnostisch load balancer</span><span class="sxs-lookup"><span data-stu-id="39eac-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="39eac-314">REGIO/AFFINITEITSGROEP/VIRTUEEL NETWERK</span><span class="sxs-lookup"><span data-stu-id="39eac-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="39eac-315">VS - west</span><span class="sxs-lookup"><span data-stu-id="39eac-315">West US</span></span>    </td><td> <span data-ttu-id="39eac-316">Selecteer een regio van waaruit de toegang tot het cluster Cassandra van uw webtoepassingen</span><span class="sxs-lookup"><span data-stu-id="39eac-316">Select a region from which your web applications access the Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-317">STORAGE-ACCOUNT</span><span class="sxs-lookup"><span data-stu-id="39eac-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="39eac-318">Standaard gebruiken</span><span class="sxs-lookup"><span data-stu-id="39eac-318">Use default</span></span>    </td><td><span data-ttu-id="39eac-319">Het standaardopslagaccount of een vooraf gemaakte opslagaccount gebruiken in een bepaald gebied</span><span class="sxs-lookup"><span data-stu-id="39eac-319">Use the default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-320">BESCHIKBAARHEIDSSET</span><span class="sxs-lookup"><span data-stu-id="39eac-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="39eac-321">Geen</span><span class="sxs-lookup"><span data-stu-id="39eac-321">None</span></span> </td><td>    <span data-ttu-id="39eac-322">Laat dit veld leeg</span><span class="sxs-lookup"><span data-stu-id="39eac-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-323">EINDPUNTEN</span><span class="sxs-lookup"><span data-stu-id="39eac-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="39eac-324">Standaard gebruiken</span><span class="sxs-lookup"><span data-stu-id="39eac-324">Use default</span></span> </td><td>    <span data-ttu-id="39eac-325">De standaard SSH-configuratie gebruiken</span><span class="sxs-lookup"><span data-stu-id="39eac-325">Use the default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="39eac-326">Klik op de pijl naar rechts, de standaardinstellingen laten staan op het scherm #3 en klik op de knop 'selectievakje' voor het voltooien van de virtuele machine inrichtingsproces.</span><span class="sxs-lookup"><span data-stu-id="39eac-326">Click right arrow, leave the defaults on the screen #3 and click the “check” button to complete the VM provisioning process.</span></span> <span data-ttu-id="39eac-327">Na een paar minuten moet de virtuele machine met de naam 'ubuntu-sjabloon' status 'actief'.</span><span class="sxs-lookup"><span data-stu-id="39eac-327">After a few minutes, the VM with the name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-the-necessary-software"></a><span data-ttu-id="39eac-328">DE BENODIGDE SOFTWARE INSTALLEREN</span><span class="sxs-lookup"><span data-stu-id="39eac-328">INSTALL THE NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="39eac-329">STAP 1: Het uploaden van tarballs</span><span class="sxs-lookup"><span data-stu-id="39eac-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="39eac-330">Gebruik scp of pscp, kopieert u de eerder gedownloade software naar ~/downloads map met de opdrachtindeling van de volgende:</span><span class="sxs-lookup"><span data-stu-id="39eac-330">Using scp or pscp, copy the previously downloaded software to ~/downloads directory using the following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="39eac-331">pscp server-jre-8u5-linux-x64.tar.gzlocaladmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="39eac-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="39eac-332">Herhaal de bovenstaande opdracht voor JRE ook als voor de Cassandra bits.</span><span class="sxs-lookup"><span data-stu-id="39eac-332">Repeat the above command for JRE as well as for the Cassandra bits.</span></span>

#### <a name="step-2-prepare-the-directory-structure-and-extract-the-archives"></a><span data-ttu-id="39eac-333">STAP 2: Bereid de mapstructuur en uitpakken van het archief</span><span class="sxs-lookup"><span data-stu-id="39eac-333">STEP 2: Prepare the directory structure and extract the archives</span></span>
<span data-ttu-id="39eac-334">Meld u aan bij de virtuele machine en maak de mapstructuur en pak software als supergebruiker met behulp van de onderstaande bash-script:</span><span class="sxs-lookup"><span data-stu-id="39eac-334">Log into the VM and create the directory structure and extract software as a super user using the bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change the ownership to the service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile to add JRE to the PATH"
    echo "installation is complete"


<span data-ttu-id="39eac-335">Als u dit script in vim venster plakt, zorg ervoor dat de regelterugloop verwijderen ('\r ") met de volgende opdracht:</span><span class="sxs-lookup"><span data-stu-id="39eac-335">If you paste this script into vim window, make sure to remove the carriage return (‘\r”) using the following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="39eac-336">Stap 3: Enzovoort/profiel bewerken</span><span class="sxs-lookup"><span data-stu-id="39eac-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="39eac-337">Het volgende aan het eind toevoegen:</span><span class="sxs-lookup"><span data-stu-id="39eac-337">Append the following at the end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="39eac-338">Stap 4: Installatie JNA voor productiesystemen</span><span class="sxs-lookup"><span data-stu-id="39eac-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="39eac-339">Gebruik de onderstaande opdrachtvolgorde: de volgende opdracht wordt installeert jna 3.2.7.jar en jna platform 3.2.7.jar naar /usr/share.java directory apt sudo get-libjna java</span><span class="sxs-lookup"><span data-stu-id="39eac-339">Use the following command sequence: The following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar to /usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="39eac-340">Symbolische koppelingen in $CASS_HOME/lib directory maken, zodat het opstartscript Cassandra deze potten kunt vinden:</span><span class="sxs-lookup"><span data-stu-id="39eac-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="39eac-341">Stap 5: Cassandra.yaml configureren</span><span class="sxs-lookup"><span data-stu-id="39eac-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="39eac-342">Cassandra.yaml op elke virtuele machine in overeenstemming met configuratie is vereist door alle virtuele machines [we zullen dit aanpassen tijdens de werkelijke inrichting] bewerken:</span><span class="sxs-lookup"><span data-stu-id="39eac-342">Edit cassandra.yaml on each VM to reflect configuration needed by all the virtual machines [we will tweak this during the actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-343">Veldnaam</span><span class="sxs-lookup"><span data-stu-id="39eac-343">Field Name</span></span>   </th><th> <span data-ttu-id="39eac-344">Waarde</span><span class="sxs-lookup"><span data-stu-id="39eac-344">Value</span></span>  </th><th>    <span data-ttu-id="39eac-345">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="39eac-346">clusternaam</span><span class="sxs-lookup"><span data-stu-id="39eac-346">cluster_name</span></span> </td><td>    <span data-ttu-id="39eac-347">'CustomerService'</span><span class="sxs-lookup"><span data-stu-id="39eac-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="39eac-348">Gebruik de naam die overeenkomt met uw implementatie</span><span class="sxs-lookup"><span data-stu-id="39eac-348">Use the name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="39eac-349">listen_address</span></span>    </td><td><span data-ttu-id="39eac-350">[laat dit veld leeg]</span><span class="sxs-lookup"><span data-stu-id="39eac-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="39eac-351">Verwijderen van 'localhost'</span><span class="sxs-lookup"><span data-stu-id="39eac-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="39eac-352">rpc_addres</span></span>   </td><td><span data-ttu-id="39eac-353">[laat dit veld leeg]</span><span class="sxs-lookup"><span data-stu-id="39eac-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="39eac-354">Verwijderen van 'localhost'</span><span class="sxs-lookup"><span data-stu-id="39eac-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-355">zaden</span><span class="sxs-lookup"><span data-stu-id="39eac-355">seeds</span></span>    </td><td><span data-ttu-id="39eac-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="39eac-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="39eac-357">Lijst met alle IP-adressen die zijn aangewezen als basis.</span><span class="sxs-lookup"><span data-stu-id="39eac-357">List of  all the IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="39eac-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="39eac-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="39eac-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="39eac-360">Dit wordt gebruikt door de NetworkTopologyStrateg voor het afleiden van het datacenter en het rek van de virtuele machine</span><span class="sxs-lookup"><span data-stu-id="39eac-360">This is used by the NetworkTopologyStrateg for inferring the data center and the rack of the VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-the-vm-image"></a><span data-ttu-id="39eac-361">Stap 6: De VM-installatiekopie vastleggen</span><span class="sxs-lookup"><span data-stu-id="39eac-361">Step 6: Capture the VM image</span></span>
<span data-ttu-id="39eac-362">Meld u aan bij de virtuele machine met behulp van de hostnaam (hk-cas-template.cloudapp.net) en de persoonlijke SSH-sleutel eerder hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="39eac-362">Log into the virtual machine using the hostname (hk-cas-template.cloudapp.net) and the SSH private key previously created.</span></span> <span data-ttu-id="39eac-363">Zie hoe SSH gebruiken met Linux op Azure voor meer informatie over het aanmelden met de opdracht ssh of putty.exe.</span><span class="sxs-lookup"><span data-stu-id="39eac-363">See How to Use SSH with Linux on Azure for details on how to log in using the command ssh or putty.exe.</span></span>

<span data-ttu-id="39eac-364">De volgende reeks bewerkingen voor het vastleggen van de installatiekopie uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="39eac-364">Execute the following sequence of actions to capture the image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="39eac-365">1. Identiteitsgegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-365">1. Deprovision</span></span>
<span data-ttu-id="39eac-366">Gebruik de opdracht ' sudo waagent-deprovision + user ' om specifieke gegevens van virtuele Machine exemplaar te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="39eac-366">Use the command “sudo waagent –deprovision+user” to remove Virtual Machine instance specific information.</span></span> <span data-ttu-id="39eac-367">Zie voor [virtuele Linux-Machine vastleggen](capture-image.md) gebruiken als sjabloon meer details op het vastleggen van installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="39eac-367">See for [How to Capture a Linux Virtual Machine](capture-image.md) to Use as a Template more details on the image capture process.</span></span>

##### <a name="2-shutdown-the-vm"></a><span data-ttu-id="39eac-368">2: de virtuele machine afsluiten</span><span class="sxs-lookup"><span data-stu-id="39eac-368">2: Shutdown the VM</span></span>
<span data-ttu-id="39eac-369">Zorg ervoor dat de virtuele machine is geselecteerd en klik op de koppeling voor het afsluiten van de opdrachtbalk onder.</span><span class="sxs-lookup"><span data-stu-id="39eac-369">Make sure that the virtual machine is highlighted and click the SHUTDOWN link from the bottom command bar.</span></span>

##### <a name="3-capture-the-image"></a><span data-ttu-id="39eac-370">3: de installatiekopie vastleggen</span><span class="sxs-lookup"><span data-stu-id="39eac-370">3: Capture the image</span></span>
<span data-ttu-id="39eac-371">Zorg ervoor dat de virtuele machine is geselecteerd en klik op de koppeling voor het VASTLEGGEN van de balk onderaan opdracht.</span><span class="sxs-lookup"><span data-stu-id="39eac-371">Make sure that the virtual machine is highlighted and click the CAPTURE link from the bottom command bar.</span></span> <span data-ttu-id="39eac-372">Geeft de naam van een INSTALLATIEKOPIE (bijvoorbeeld hk-cas-2-08-ub-14-04-2014071), beschrijving van afbeelding van toepassing en klik op het ' vinkje ' voor het voltooien van het vastleggen in het volgende scherm.</span><span class="sxs-lookup"><span data-stu-id="39eac-372">In the next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click the “check” mark to finish the CAPTURE process.</span></span>

<span data-ttu-id="39eac-373">Dit duurt een paar seconden en de installatiekopie moet beschikbaar zijn in de sectie Mijn afbeeldingen van de installatiekopie-galerie.</span><span class="sxs-lookup"><span data-stu-id="39eac-373">This will take a few seconds and the image should be available in MY IMAGES section of the image gallery.</span></span> <span data-ttu-id="39eac-374">De bron-VM wordt automatisch verwijderd nadat de installatiekopie wordt vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="39eac-374">The source VM will be automatically deleted after the image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="39eac-375">Implementatieproces voor één regio</span><span class="sxs-lookup"><span data-stu-id="39eac-375">Single Region Deployment Process</span></span>
<span data-ttu-id="39eac-376">**Stap 1: Het virtuele netwerk maken** Meld u aan bij de Azure-portal en een virtueel netwerk (klassiek) maken met de kenmerken in de volgende tabel weergegeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-376">**Step 1: Create the Virtual Network** Log into the Azure portal and create a virtual network (classic) with the attributes shown in the following table.</span></span> <span data-ttu-id="39eac-377">Zie [een virtueel netwerk (klassiek) met de Azure portal maken](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) voor gedetailleerde stappen van het proces.</span><span class="sxs-lookup"><span data-stu-id="39eac-377">See [Create a virtual network (classic) using the Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of the process.</span></span>      

<table>
<tr><th><span data-ttu-id="39eac-378">De naam van de VM-kenmerk</span><span class="sxs-lookup"><span data-stu-id="39eac-378">VM Attribute Name</span></span></th><th><span data-ttu-id="39eac-379">Waarde</span><span class="sxs-lookup"><span data-stu-id="39eac-379">Value</span></span></th><th><span data-ttu-id="39eac-380">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-381">Naam</span><span class="sxs-lookup"><span data-stu-id="39eac-381">Name</span></span></td><td><span data-ttu-id="39eac-382">vnet-cass-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="39eac-383">Regio</span><span class="sxs-lookup"><span data-stu-id="39eac-383">Region</span></span></td><td><span data-ttu-id="39eac-384">VS - west</span><span class="sxs-lookup"><span data-stu-id="39eac-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="39eac-385">DNS-Servers</span><span class="sxs-lookup"><span data-stu-id="39eac-385">DNS Servers</span></span></td><td><span data-ttu-id="39eac-386">Geen</span><span class="sxs-lookup"><span data-stu-id="39eac-386">None</span></span></td><td><span data-ttu-id="39eac-387">Negeer deze melding als er niet met behulp van een DNS-Server</span><span class="sxs-lookup"><span data-stu-id="39eac-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-388">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="39eac-388">Address Space</span></span></td><td><span data-ttu-id="39eac-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="39eac-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="39eac-390">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="39eac-390">Starting IP</span></span></td><td><span data-ttu-id="39eac-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="39eac-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="39eac-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="39eac-392">CIDR</span></span> </td><td><span data-ttu-id="39eac-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="39eac-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="39eac-394">Voeg de volgende subnetten:</span><span class="sxs-lookup"><span data-stu-id="39eac-394">Add the following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-395">Naam</span><span class="sxs-lookup"><span data-stu-id="39eac-395">Name</span></span></th><th><span data-ttu-id="39eac-396">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="39eac-396">Starting IP</span></span></th><th><span data-ttu-id="39eac-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="39eac-397">CIDR</span></span></th><th><span data-ttu-id="39eac-398">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-399">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-399">web</span></span></td><td><span data-ttu-id="39eac-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="39eac-400">10.1.1.0</span></span></td><td><span data-ttu-id="39eac-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="39eac-401">/24 (251)</span></span></td><td><span data-ttu-id="39eac-402">Subnet voor de webfarm</span><span class="sxs-lookup"><span data-stu-id="39eac-402">Subnet for the web farm</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-403">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-403">data</span></span></td><td><span data-ttu-id="39eac-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="39eac-404">10.1.2.0</span></span></td><td><span data-ttu-id="39eac-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="39eac-405">/24 (251)</span></span></td><td><span data-ttu-id="39eac-406">Subnet voor de databaseknooppunten</span><span class="sxs-lookup"><span data-stu-id="39eac-406">Subnet for the database nodes</span></span></td></tr>
</table>

<span data-ttu-id="39eac-407">Gegevens en Web subnetten kunnen worden beveiligd via netwerkbeveiligingsgroepen de dekking van die buiten het bereik van dit artikel is.</span><span class="sxs-lookup"><span data-stu-id="39eac-407">Data and Web subnets can be protected through network security groups the coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="39eac-408">**Stap 2: Inrichten van virtuele Machines** met behulp van de installatiekopie van het eerder hebt gemaakt, wordt de volgende virtuele machines maken in de cloud-server 'hk-c-svc-west' en maak ze afhankelijk van de respectieve subnetten zoals hieronder wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="39eac-408">**Step 2: Provision Virtual Machines** Using the image created previously, we will create the following virtual machines in the cloud server “hk-c-svc-west” and bind them to the respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-409">Computernaam</span><span class="sxs-lookup"><span data-stu-id="39eac-409">Machine Name</span></span>    </th><th><span data-ttu-id="39eac-410">Subnet</span><span class="sxs-lookup"><span data-stu-id="39eac-410">Subnet</span></span>    </th><th><span data-ttu-id="39eac-411">IP-adres</span><span class="sxs-lookup"><span data-stu-id="39eac-411">IP Address</span></span>    </th><th><span data-ttu-id="39eac-412">Beschikbaarheidsset</span><span class="sxs-lookup"><span data-stu-id="39eac-412">Availability set</span></span></th><th><span data-ttu-id="39eac-413">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="39eac-413">DC/Rack</span></span></th><th><span data-ttu-id="39eac-414">Seed?</span><span class="sxs-lookup"><span data-stu-id="39eac-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-415">HK-c1-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="39eac-416">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-416">data</span></span>    </td><td><span data-ttu-id="39eac-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="39eac-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="39eac-418">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="39eac-419">DC = WESTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="39eac-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="39eac-420">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-421">HK-c2-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="39eac-422">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-422">data</span></span>    </td><td><span data-ttu-id="39eac-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="39eac-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="39eac-424">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="39eac-425">DC = WESTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="39eac-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="39eac-426">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-427">HK-c3-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="39eac-428">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-428">data</span></span>    </td><td><span data-ttu-id="39eac-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="39eac-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="39eac-430">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="39eac-431">DC = WESTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="39eac-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="39eac-432">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-433">HK-c4-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="39eac-434">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-434">data</span></span>    </td><td><span data-ttu-id="39eac-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="39eac-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="39eac-436">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="39eac-437">DC = WESTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="39eac-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="39eac-438">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-439">HK-c5-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="39eac-440">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-440">data</span></span>    </td><td><span data-ttu-id="39eac-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="39eac-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="39eac-442">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="39eac-443">DC = WESTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="39eac-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="39eac-444">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-445">HK-c6-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="39eac-446">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-446">data</span></span>    </td><td><span data-ttu-id="39eac-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="39eac-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="39eac-448">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="39eac-449">DC = WESTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="39eac-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="39eac-450">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-451">HK-c7-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="39eac-452">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-452">data</span></span>    </td><td><span data-ttu-id="39eac-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="39eac-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="39eac-454">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="39eac-455">DC = WESTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="39eac-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="39eac-456">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-457">HK-c8-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="39eac-458">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-458">data</span></span>    </td><td><span data-ttu-id="39eac-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="39eac-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="39eac-460">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="39eac-461">DC = WESTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="39eac-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="39eac-462">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="39eac-463">HK-w1-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="39eac-464">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-464">web</span></span>    </td><td><span data-ttu-id="39eac-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="39eac-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="39eac-466">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="39eac-467">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-468">HK-w2-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="39eac-469">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-469">web</span></span>    </td><td><span data-ttu-id="39eac-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="39eac-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="39eac-471">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="39eac-472">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="39eac-473">Maken van de bovenstaande lijst met virtuele machines moeten het volgende proces:</span><span class="sxs-lookup"><span data-stu-id="39eac-473">Creation of the above list of VMs requires the following process:</span></span>

1. <span data-ttu-id="39eac-474">Een lege cloudservice maken in een bepaald gebied</span><span class="sxs-lookup"><span data-stu-id="39eac-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="39eac-475">Een virtuele machine uit de eerder vastgelegde installatiekopie maken en deze te koppelen aan het virtuele netwerk gemaakt eerder; Herhaal deze stap voor alle virtuele machines</span><span class="sxs-lookup"><span data-stu-id="39eac-475">Create a VM from the previously captured image and attach it to the virtual network created previously; repeat this for all the VMs</span></span>
3. <span data-ttu-id="39eac-476">Een interne load balancer toevoegen aan de cloudservice en deze te koppelen aan het subnet "gegevens"</span><span class="sxs-lookup"><span data-stu-id="39eac-476">Add an internal load balancer to the cloud service and attach it to the “data” subnet</span></span>
4. <span data-ttu-id="39eac-477">Voor elke virtuele machine die eerder is gemaakt, voegt u een eindpunt voor de taakverdeling voor thrift-verkeer via een set met gelijke taakverdeling is verbonden met de eerder gemaakte interne load balancer</span><span class="sxs-lookup"><span data-stu-id="39eac-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected to the previously created internal load balancer</span></span>

<span data-ttu-id="39eac-478">Dit proces kan worden uitgevoerd met behulp van de klassieke Azure-portal; Gebruik een Windows-machine (gebruik een VM op Azure als u geen toegang tot een Windows-computer), gebruik de volgende PowerShell-script voor het automatisch inrichten van alle 8 VM's.</span><span class="sxs-lookup"><span data-stu-id="39eac-478">The above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access to a Windows machine), use the following PowerShell script to provision all 8 VMs automatically.</span></span>

<span data-ttu-id="39eac-479">**Lijst met 1: PowerShell-script voor het inrichten van virtuele machines**</span><span class="sxs-lookup"><span data-stu-id="39eac-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into the current Powershell session before proceeding
        #The process: 1. create Azure Storage account, 2. create virtual network, 3.create the VM template, 2. crate a list of VMs from the template

        #fundamental variables - change these to reflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores the list of azure vm configuration objects
        #create the list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add the thrift endpoint to the internal load balancer for all the VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="39eac-480">**Stap 3: Cassandra op elke virtuele machine configureren**</span><span class="sxs-lookup"><span data-stu-id="39eac-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="39eac-481">Meld u aan bij de virtuele machine en voer het volgende:</span><span class="sxs-lookup"><span data-stu-id="39eac-481">Log into the VM and perform the following:</span></span>

* <span data-ttu-id="39eac-482">$CASS_HOME/conf/cassandra-rackdc.properties om op te geven van de data center en rack-eigenschappen bewerken:</span><span class="sxs-lookup"><span data-stu-id="39eac-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties to specify the data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="39eac-483">Bewerk cassandra.yaml seed-knooppunten te configureren zoals hieronder:</span><span class="sxs-lookup"><span data-stu-id="39eac-483">Edit cassandra.yaml to configure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="39eac-484">**Stap 4: Start de virtuele machines en testen van het cluster**</span><span class="sxs-lookup"><span data-stu-id="39eac-484">**Step 4: Start the VMs and test the cluster**</span></span>

<span data-ttu-id="39eac-485">Meld u aan bij een van de knooppunten (bijvoorbeeld hk-c1-west-us) en voer de volgende opdracht om de status van het cluster te bekijken:</span><span class="sxs-lookup"><span data-stu-id="39eac-485">Log into one of the nodes (e.g. hk-c1-west-us) and run the following command to see the status of the cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="39eac-486">Hier ziet u de weergave lijkt op de onderstaande voor een cluster met 8 knooppunten:</span><span class="sxs-lookup"><span data-stu-id="39eac-486">You should see the display similar to the one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-487">Status</span><span class="sxs-lookup"><span data-stu-id="39eac-487">Status</span></span></th><th><span data-ttu-id="39eac-488">Adres</span><span class="sxs-lookup"><span data-stu-id="39eac-488">Address</span></span>    </th><th><span data-ttu-id="39eac-489">Belasting</span><span class="sxs-lookup"><span data-stu-id="39eac-489">Load</span></span>    </th><th><span data-ttu-id="39eac-490">Tokens</span><span class="sxs-lookup"><span data-stu-id="39eac-490">Tokens</span></span>    </th><th><span data-ttu-id="39eac-491">Eigenaar is van</span><span class="sxs-lookup"><span data-stu-id="39eac-491">Owns</span></span> </th><th><span data-ttu-id="39eac-492">Host-ID</span><span class="sxs-lookup"><span data-stu-id="39eac-492">Host ID</span></span>    </th><th><span data-ttu-id="39eac-493">Rack</span><span class="sxs-lookup"><span data-stu-id="39eac-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="39eac-494">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-494">UN</span></span>    </td><td><span data-ttu-id="39eac-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="39eac-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="39eac-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-496">87.81 KB</span></span>    </td><td><span data-ttu-id="39eac-497">256</span><span class="sxs-lookup"><span data-stu-id="39eac-497">256</span></span>    </td><td><span data-ttu-id="39eac-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="39eac-498">38.0%</span></span>    </td><td><span data-ttu-id="39eac-499">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-499">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-500">rack1</span><span class="sxs-lookup"><span data-stu-id="39eac-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-501">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-501">UN</span></span>    </td><td><span data-ttu-id="39eac-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="39eac-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="39eac-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-503">41.08 KB</span></span>    </td><td><span data-ttu-id="39eac-504">256</span><span class="sxs-lookup"><span data-stu-id="39eac-504">256</span></span>    </td><td><span data-ttu-id="39eac-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="39eac-505">68.9%</span></span>    </td><td><span data-ttu-id="39eac-506">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-506">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-507">rack1</span><span class="sxs-lookup"><span data-stu-id="39eac-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-508">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-508">UN</span></span>    </td><td><span data-ttu-id="39eac-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="39eac-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="39eac-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-510">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-511">256</span><span class="sxs-lookup"><span data-stu-id="39eac-511">256</span></span>    </td><td><span data-ttu-id="39eac-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-512">68.8%</span></span>    </td><td><span data-ttu-id="39eac-513">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-513">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-514">rack2</span><span class="sxs-lookup"><span data-stu-id="39eac-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-515">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-515">UN</span></span>    </td><td><span data-ttu-id="39eac-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="39eac-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="39eac-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-517">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-518">256</span><span class="sxs-lookup"><span data-stu-id="39eac-518">256</span></span>    </td><td><span data-ttu-id="39eac-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-519">68.8%</span></span>    </td><td><span data-ttu-id="39eac-520">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-520">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-521">rack2</span><span class="sxs-lookup"><span data-stu-id="39eac-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-522">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-522">UN</span></span>    </td><td><span data-ttu-id="39eac-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="39eac-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="39eac-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-524">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-525">256</span><span class="sxs-lookup"><span data-stu-id="39eac-525">256</span></span>    </td><td><span data-ttu-id="39eac-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-526">68.8%</span></span>    </td><td><span data-ttu-id="39eac-527">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-527">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-528">rack3</span><span class="sxs-lookup"><span data-stu-id="39eac-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-529">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-529">UN</span></span>    </td><td><span data-ttu-id="39eac-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="39eac-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="39eac-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-531">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-532">256</span><span class="sxs-lookup"><span data-stu-id="39eac-532">256</span></span>    </td><td><span data-ttu-id="39eac-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-533">68.8%</span></span>    </td><td><span data-ttu-id="39eac-534">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-534">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-535">rack3</span><span class="sxs-lookup"><span data-stu-id="39eac-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-536">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-536">UN</span></span>    </td><td><span data-ttu-id="39eac-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="39eac-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="39eac-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-538">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-539">256</span><span class="sxs-lookup"><span data-stu-id="39eac-539">256</span></span>    </td><td><span data-ttu-id="39eac-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-540">68.8%</span></span>    </td><td><span data-ttu-id="39eac-541">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-541">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-542">rack4</span><span class="sxs-lookup"><span data-stu-id="39eac-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="39eac-543">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="39eac-543">UN</span></span>    </td><td><span data-ttu-id="39eac-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="39eac-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="39eac-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="39eac-545">55.29 KB</span></span>    </td><td><span data-ttu-id="39eac-546">256</span><span class="sxs-lookup"><span data-stu-id="39eac-546">256</span></span>    </td><td><span data-ttu-id="39eac-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="39eac-547">68.8%</span></span>    </td><td><span data-ttu-id="39eac-548">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="39eac-548">Guid (removed)</span></span></td><td><span data-ttu-id="39eac-549">rack4</span><span class="sxs-lookup"><span data-stu-id="39eac-549">rack4</span></span></td></tr>
</table>

## <a name="test-the-single-region-cluster"></a><span data-ttu-id="39eac-550">Testen van het Cluster één regio</span><span class="sxs-lookup"><span data-stu-id="39eac-550">Test the Single Region Cluster</span></span>
<span data-ttu-id="39eac-551">Gebruik de volgende stappen voor het testen van het cluster:</span><span class="sxs-lookup"><span data-stu-id="39eac-551">Use the following steps to test the cluster:</span></span>

1. <span data-ttu-id="39eac-552">Het IP-adres van de interne load balancer (bijvoorbeeld met behulp van de cmdlet van Powershell-opdracht Get-AzureInternalLoadbalancer verkrijgen  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="39eac-552">Using the Powershell command Get-AzureInternalLoadbalancer commandlet, obtain the IP address of the internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="39eac-553">De syntaxis van de opdracht wordt hieronder weergegeven: Get-AzureLoadbalancer – ServiceName 'hk-c-svc-west-us' [ziet u de details van de interne load balancer samen met het IP-adres]</span><span class="sxs-lookup"><span data-stu-id="39eac-553">The syntax of the command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays the details of the internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="39eac-554">Meld u aan bij de webfarm VM (bijvoorbeeld hk-w1-west-us) met Putty of ssh</span><span class="sxs-lookup"><span data-stu-id="39eac-554">Log into the web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="39eac-555">Uitvoeren van $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="39eac-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="39eac-556">Gebruik de volgende CQL-opdrachten om te controleren of het cluster werkt:</span><span class="sxs-lookup"><span data-stu-id="39eac-556">Use the following CQL commands to verify if the cluster is working:</span></span>
   
     <span data-ttu-id="39eac-557">Maak met KEYSPACE customers_ks met replicatie = {'class': 'SimpleStrategy', 'replication_factor': 3};   Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');</span><span class="sxs-lookup"><span data-stu-id="39eac-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="39eac-558">Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="39eac-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="39eac-559">U ziet een scherm wordt weergegeven zoals hieronder:</span><span class="sxs-lookup"><span data-stu-id="39eac-559">You should see a display like the one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="39eac-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="39eac-560">customer_id</span></span> </th><th> <span data-ttu-id="39eac-561">Voornaam</span><span class="sxs-lookup"><span data-stu-id="39eac-561">firstname</span></span> </th><th> <span data-ttu-id="39eac-562">Achternaam</span><span class="sxs-lookup"><span data-stu-id="39eac-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="39eac-563">1</span><span class="sxs-lookup"><span data-stu-id="39eac-563">1</span></span> </td><td> <span data-ttu-id="39eac-564">John</span><span class="sxs-lookup"><span data-stu-id="39eac-564">John</span></span> </td><td> <span data-ttu-id="39eac-565">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="39eac-566">2</span><span class="sxs-lookup"><span data-stu-id="39eac-566">2</span></span> </td><td> <span data-ttu-id="39eac-567">ANS</span><span class="sxs-lookup"><span data-stu-id="39eac-567">Jane</span></span> </td><td> <span data-ttu-id="39eac-568">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="39eac-569">Houd er rekening mee dat de keyspace gemaakt in stap 4 SimpleStrategy met een replication_factor van 3 gebruikt.</span><span class="sxs-lookup"><span data-stu-id="39eac-569">Please note that the keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="39eac-570">SimpleStrategy wordt aanbevolen voor één data center-implementaties terwijl NetworkTopologyStrategy voor meerdere data center-implementaties.</span><span class="sxs-lookup"><span data-stu-id="39eac-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="39eac-571">Een replication_factor van 3, tolerantie voor knooppuntfouten krijgt.</span><span class="sxs-lookup"><span data-stu-id="39eac-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="39eac-572"><a id="tworegion"></a>Meerdere landen/regio-implementatieproces</span><span class="sxs-lookup"><span data-stu-id="39eac-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="39eac-573">Zal gebruikmaken van de implementatie van één regio is voltooid en hetzelfde proces herhalen voor het installeren van de tweede regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-573">Will leverage the single region deployment completed and repeat the same process for installing the second region.</span></span> <span data-ttu-id="39eac-574">Het belangrijkste verschil tussen de implementatie van één of meerdere regio is de installatie van de VPN-tunnel voor communicatie tussen regio; We beginnen met de installatie via het netwerk, de virtuele machines inrichten en Cassandra configureren.</span><span class="sxs-lookup"><span data-stu-id="39eac-574">The key difference between the single and multiple region deployment is the VPN tunnel setup for inter-region communication; we will start with the network installation, provision the VMs and configure Cassandra.</span></span>

### <a name="step-1-create-the-virtual-network-at-the-2nd-region"></a><span data-ttu-id="39eac-575">Stap 1: Het virtuele netwerk op de 2e regio maken</span><span class="sxs-lookup"><span data-stu-id="39eac-575">Step 1: Create the Virtual Network at the 2nd Region</span></span>
<span data-ttu-id="39eac-576">Meld u aan bij de klassieke Azure portal en een virtueel netwerk maken met de kenmerken weergeven in de tabel.</span><span class="sxs-lookup"><span data-stu-id="39eac-576">Log into the Azure classic portal and create a Virtual Network with the attributes show in the table.</span></span> <span data-ttu-id="39eac-577">Zie [Cloud-Only virtueel netwerk configureren in de klassieke Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) voor gedetailleerde stappen van het proces.</span><span class="sxs-lookup"><span data-stu-id="39eac-577">See [Configure a Cloud-Only Virtual Network in the Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of the process.</span></span>      

<table>
<tr><th><span data-ttu-id="39eac-578">Naam van kenmerk</span><span class="sxs-lookup"><span data-stu-id="39eac-578">Attribute Name</span></span>    </th><th><span data-ttu-id="39eac-579">Waarde</span><span class="sxs-lookup"><span data-stu-id="39eac-579">Value</span></span>    </th><th><span data-ttu-id="39eac-580">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-581">Naam</span><span class="sxs-lookup"><span data-stu-id="39eac-581">Name</span></span>    </td><td><span data-ttu-id="39eac-582">vnet-cass-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="39eac-583">Regio</span><span class="sxs-lookup"><span data-stu-id="39eac-583">Region</span></span>    </td><td><span data-ttu-id="39eac-584">VS - oost</span><span class="sxs-lookup"><span data-stu-id="39eac-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="39eac-585">DNS-Servers</span><span class="sxs-lookup"><span data-stu-id="39eac-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="39eac-586">Negeer deze melding als er niet met behulp van een DNS-Server</span><span class="sxs-lookup"><span data-stu-id="39eac-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-587">Een punt-naar-site-VPN configureren</span><span class="sxs-lookup"><span data-stu-id="39eac-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="39eac-588">Negeer deze melding</span><span class="sxs-lookup"><span data-stu-id="39eac-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-589">Configureer een site-to-site VPN</span><span class="sxs-lookup"><span data-stu-id="39eac-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="39eac-590">Negeer deze melding</span><span class="sxs-lookup"><span data-stu-id="39eac-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-591">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="39eac-591">Address Space</span></span>    </td><td><span data-ttu-id="39eac-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="39eac-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="39eac-593">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="39eac-593">Starting IP</span></span>    </td><td><span data-ttu-id="39eac-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="39eac-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="39eac-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="39eac-595">CIDR</span></span>    </td><td><span data-ttu-id="39eac-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="39eac-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="39eac-597">Voeg de volgende subnetten:</span><span class="sxs-lookup"><span data-stu-id="39eac-597">Add the following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-598">Naam</span><span class="sxs-lookup"><span data-stu-id="39eac-598">Name</span></span>    </th><th><span data-ttu-id="39eac-599">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="39eac-599">Starting IP</span></span>    </th><th><span data-ttu-id="39eac-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="39eac-600">CIDR</span></span>    </th><th><span data-ttu-id="39eac-601">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-602">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-602">web</span></span>    </td><td><span data-ttu-id="39eac-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="39eac-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="39eac-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="39eac-604">/24 (251)</span></span>    </td><td><span data-ttu-id="39eac-605">Subnet voor de webfarm</span><span class="sxs-lookup"><span data-stu-id="39eac-605">Subnet for the web farm</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-606">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-606">data</span></span>    </td><td><span data-ttu-id="39eac-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="39eac-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="39eac-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="39eac-608">/24 (251)</span></span>    </td><td><span data-ttu-id="39eac-609">Subnet voor de databaseknooppunten</span><span class="sxs-lookup"><span data-stu-id="39eac-609">Subnet for the database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="39eac-610">Stap 2: Lokale netwerken maken</span><span class="sxs-lookup"><span data-stu-id="39eac-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="39eac-611">Een lokaal netwerk in Azure virtuele netwerken is een proxy-adresruimte die is toegewezen aan een externe site, met inbegrip van een privécloud of een andere Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="39eac-611">A Local Network in Azure virtual networking is a proxy address space that maps to a remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="39eac-612">Deze adresruimte proxy is gebonden aan een externe gateway voor routering netwerk naar de juiste bestemmingen netwerken.</span><span class="sxs-lookup"><span data-stu-id="39eac-612">This proxy address space is bound to a remote gateway for routing network to the right networking destinations.</span></span> <span data-ttu-id="39eac-613">Zie [een VNet-naar-VNet-verbinding configureren](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) voor de instructies voor het VNET-naar-VNET-verbinding tot stand brengen.</span><span class="sxs-lookup"><span data-stu-id="39eac-613">See [Configure a VNet to VNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for the instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="39eac-614">Maak twee lokale netwerken per de volgende details:</span><span class="sxs-lookup"><span data-stu-id="39eac-614">Create two local networks per the following details:</span></span>

| <span data-ttu-id="39eac-615">Netwerknaam</span><span class="sxs-lookup"><span data-stu-id="39eac-615">Network Name</span></span> | <span data-ttu-id="39eac-616">VPN-Gateway-adres</span><span class="sxs-lookup"><span data-stu-id="39eac-616">VPN Gateway Address</span></span> | <span data-ttu-id="39eac-617">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="39eac-617">Address Space</span></span> | <span data-ttu-id="39eac-618">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="39eac-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="39eac-619">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="39eac-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="39eac-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="39eac-620">23.1.1.1</span></span> |<span data-ttu-id="39eac-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="39eac-621">10.2.0.0/16</span></span> |<span data-ttu-id="39eac-622">Geef een tijdelijke aanduiding gatewayadres tijdens het maken van het lokale netwerk.</span><span class="sxs-lookup"><span data-stu-id="39eac-622">While creating the Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="39eac-623">Het echte gatewayadres wordt ingevuld zodra de gateway is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="39eac-623">The real gateway address is filled once the gateway is created.</span></span> <span data-ttu-id="39eac-624">Zorg ervoor dat de adresruimte die exact overeenkomt met de desbetreffende externe VNET; in dit geval wordt het VNET gemaakt in de regio VS-Oost.</span><span class="sxs-lookup"><span data-stu-id="39eac-624">Make sure the address space exactly matches the respective remote VNET; in this case the VNET created in the East US region.</span></span> |
| <span data-ttu-id="39eac-625">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="39eac-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="39eac-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="39eac-626">23.2.2.2</span></span> |<span data-ttu-id="39eac-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="39eac-627">10.1.0.0/16</span></span> |<span data-ttu-id="39eac-628">Geef een tijdelijke aanduiding gatewayadres tijdens het maken van het lokale netwerk.</span><span class="sxs-lookup"><span data-stu-id="39eac-628">While creating the Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="39eac-629">Het echte gatewayadres wordt ingevuld zodra de gateway is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="39eac-629">The real gateway address is filled once the gateway is created.</span></span> <span data-ttu-id="39eac-630">Zorg ervoor dat de adresruimte die exact overeenkomt met de desbetreffende externe VNET; in dit geval wordt het VNET gemaakt in de regio VS-West.</span><span class="sxs-lookup"><span data-stu-id="39eac-630">Make sure the address space exactly matches the respective remote VNET; in this case the VNET created in the West US region.</span></span> |

### <a name="step-3-map-local-network-to-the-respective-vnets"></a><span data-ttu-id="39eac-631">Stap 3: "Local" netwerkverbinding naar de respectieve VNETs</span><span class="sxs-lookup"><span data-stu-id="39eac-631">Step 3: Map “Local” network to the respective VNETs</span></span>
<span data-ttu-id="39eac-632">Via de klassieke Azure portal, selecteert u elk vnet, klik op 'Configureren' controleren 'Verbinding maken met het lokale netwerk' en selecteert u de lokale netwerken per de volgende details:</span><span class="sxs-lookup"><span data-stu-id="39eac-632">From the Azure classic portal, select each vnet, click “Configure”, check “Connect to the local network”, and select the Local Networks per the following details:</span></span>

| <span data-ttu-id="39eac-633">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="39eac-633">Virtual Network</span></span> | <span data-ttu-id="39eac-634">Lokale netwerk</span><span class="sxs-lookup"><span data-stu-id="39eac-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="39eac-635">HK-vnet-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-635">hk-vnet-west-us</span></span> |<span data-ttu-id="39eac-636">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="39eac-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="39eac-637">HK-vnet-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-637">hk-vnet-east-us</span></span> |<span data-ttu-id="39eac-638">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="39eac-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="39eac-639">Stap 4: Gateways op VNET1 en VNET2 maken</span><span class="sxs-lookup"><span data-stu-id="39eac-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="39eac-640">Klik op GATEWAY maken waarmee de VPN-gateway inrichtingsproces wordt geactiveerd vanuit het dashboard van de virtuele netwerken.</span><span class="sxs-lookup"><span data-stu-id="39eac-640">From the dashboard of both the virtual networks, click CREATE GATEWAY which will trigger the VPN gateway provisioning process.</span></span> <span data-ttu-id="39eac-641">Het dashboard van elke virtuele netwerk moet na een paar minuten het werkelijke gateway-adres worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-641">After a few minutes the dashboard of each virtual network should display the actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-the-respective-gateway-addresses"></a><span data-ttu-id="39eac-642">Stap 5: Update "Local" netwerken met de respectieve ' ' gatewayadressen</span><span class="sxs-lookup"><span data-stu-id="39eac-642">Step 5: Update “Local” networks with the respective “Gateway” addresses</span></span>
<span data-ttu-id="39eac-643">De lokale netwerken ter vervanging van de IP-adres van de tijdelijke aanduiding voor gateway met het echte IP-adres van de zojuist ingerichte gateways bewerken.</span><span class="sxs-lookup"><span data-stu-id="39eac-643">Edit both the local networks to replace the placeholder gateway IP address with the real IP address of the just provisioned gateways.</span></span> <span data-ttu-id="39eac-644">Gebruik de volgende toewijzing:</span><span class="sxs-lookup"><span data-stu-id="39eac-644">Use the following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="39eac-645">Lokale netwerk</span><span class="sxs-lookup"><span data-stu-id="39eac-645">Local Network</span></span>    </th><th><span data-ttu-id="39eac-646">Gateway voor een virtueel netwerk</span><span class="sxs-lookup"><span data-stu-id="39eac-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="39eac-647">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="39eac-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="39eac-648">De gateway van hk-vnet-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="39eac-649">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="39eac-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="39eac-650">De gateway van hk-vnet-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-the-shared-key"></a><span data-ttu-id="39eac-651">Stap 6: De gedeelde sleutel bijwerken</span><span class="sxs-lookup"><span data-stu-id="39eac-651">Step 6: Update the shared key</span></span>
<span data-ttu-id="39eac-652">De volgende Powershell-script gebruiken om te werken van de IPSec-sleutel van elke VPN-gateway [Gebruik de sleutel mogelijk te houden voor beide gateways]: Set-AzureVNetGatewayKey - VNetName hk-vnet-Oost-ons - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Set-AzureVNetGatewayKey - VNetName hk-vnet-west-ons - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="39eac-652">Use the following Powershell script to update the IPSec key of each VPN gateway [use the sake key for both the gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-the-vnet-to-vnet-connection"></a><span data-ttu-id="39eac-653">Stap 7: Maken van de VNET-naar-VNET-verbinding</span><span class="sxs-lookup"><span data-stu-id="39eac-653">Step 7: Establish the VNET-to-VNET connection</span></span>
<span data-ttu-id="39eac-654">Gebruik het menu 'DASHBOARD' van de virtuele netwerken gateway-naar-gateway-verbinding tot stand brengen van de klassieke Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="39eac-654">From the Azure classic portal, use the “DASHBOARD” menu of both the virtual networks to establish gateway-to-gateway connection.</span></span> <span data-ttu-id="39eac-655">De menuopdrachten 'Verbinding maken' in de onderste werkbalk gebruiken.</span><span class="sxs-lookup"><span data-stu-id="39eac-655">Use the “CONNECT” menu items in the bottom toolbar.</span></span> <span data-ttu-id="39eac-656">Na een paar minuten moet het dashboard de verbindingsdetails grafisch weergeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-656">After a few minutes the dashboard should display the connection details graphically.</span></span>

### <a name="step-8-create-the-virtual-machines-in-region-2"></a><span data-ttu-id="39eac-657">Stap 8: Maak de virtuele machines in regio #2</span><span class="sxs-lookup"><span data-stu-id="39eac-657">Step 8: Create the virtual machines in region #2</span></span>
<span data-ttu-id="39eac-658">De installatiekopie Ubuntu maken zoals beschreven in de regio #1 implementatie door de dezelfde stappen of kopieer de VHD-bestand van de installatiekopie naar de Azure storage-account zich in regio #2 te volgen en maken van de installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="39eac-658">Create the Ubuntu image as described in region #1 deployment by following the same steps or copy the image VHD file to the Azure storage account located in region #2 and create the image.</span></span> <span data-ttu-id="39eac-659">Deze afbeelding niet gebruiken en de volgende lijst met virtuele machines maken in een nieuwe cloudservice hk-c-svc-Oost-ons:</span><span class="sxs-lookup"><span data-stu-id="39eac-659">Use this image and create the following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="39eac-660">Computernaam</span><span class="sxs-lookup"><span data-stu-id="39eac-660">Machine Name</span></span> | <span data-ttu-id="39eac-661">Subnet</span><span class="sxs-lookup"><span data-stu-id="39eac-661">Subnet</span></span> | <span data-ttu-id="39eac-662">IP-adres</span><span class="sxs-lookup"><span data-stu-id="39eac-662">IP Address</span></span> | <span data-ttu-id="39eac-663">Beschikbaarheidsset</span><span class="sxs-lookup"><span data-stu-id="39eac-663">Availability set</span></span> | <span data-ttu-id="39eac-664">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="39eac-664">DC/Rack</span></span> | <span data-ttu-id="39eac-665">Seed?</span><span class="sxs-lookup"><span data-stu-id="39eac-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="39eac-666">HK-c1-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-666">hk-c1-east-us</span></span> |<span data-ttu-id="39eac-667">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-667">data</span></span> |<span data-ttu-id="39eac-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="39eac-668">10.2.2.4</span></span> |<span data-ttu-id="39eac-669">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-669">hk-c-aset-1</span></span> |<span data-ttu-id="39eac-670">DC = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="39eac-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="39eac-671">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-671">Yes</span></span> |
| <span data-ttu-id="39eac-672">HK-c2-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-672">hk-c2-east-us</span></span> |<span data-ttu-id="39eac-673">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-673">data</span></span> |<span data-ttu-id="39eac-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="39eac-674">10.2.2.5</span></span> |<span data-ttu-id="39eac-675">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-675">hk-c-aset-1</span></span> |<span data-ttu-id="39eac-676">DC = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="39eac-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="39eac-677">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-677">No</span></span> |
| <span data-ttu-id="39eac-678">HK-c3-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-678">hk-c3-east-us</span></span> |<span data-ttu-id="39eac-679">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-679">data</span></span> |<span data-ttu-id="39eac-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="39eac-680">10.2.2.6</span></span> |<span data-ttu-id="39eac-681">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-681">hk-c-aset-1</span></span> |<span data-ttu-id="39eac-682">DC = EASTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="39eac-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="39eac-683">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-683">Yes</span></span> |
| <span data-ttu-id="39eac-684">HK-c5-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-684">hk-c5-east-us</span></span> |<span data-ttu-id="39eac-685">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-685">data</span></span> |<span data-ttu-id="39eac-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="39eac-686">10.2.2.8</span></span> |<span data-ttu-id="39eac-687">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-687">hk-c-aset-2</span></span> |<span data-ttu-id="39eac-688">DC = EASTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="39eac-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="39eac-689">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-689">Yes</span></span> |
| <span data-ttu-id="39eac-690">HK-c6-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-690">hk-c6-east-us</span></span> |<span data-ttu-id="39eac-691">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-691">data</span></span> |<span data-ttu-id="39eac-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="39eac-692">10.2.2.9</span></span> |<span data-ttu-id="39eac-693">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-693">hk-c-aset-2</span></span> |<span data-ttu-id="39eac-694">DC = EASTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="39eac-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="39eac-695">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-695">No</span></span> |
| <span data-ttu-id="39eac-696">HK-c7-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-696">hk-c7-east-us</span></span> |<span data-ttu-id="39eac-697">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-697">data</span></span> |<span data-ttu-id="39eac-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="39eac-698">10.2.2.10</span></span> |<span data-ttu-id="39eac-699">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-699">hk-c-aset-2</span></span> |<span data-ttu-id="39eac-700">DC = EASTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="39eac-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="39eac-701">Ja</span><span class="sxs-lookup"><span data-stu-id="39eac-701">Yes</span></span> |
| <span data-ttu-id="39eac-702">HK-c8-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-702">hk-c8-east-us</span></span> |<span data-ttu-id="39eac-703">Gegevens</span><span class="sxs-lookup"><span data-stu-id="39eac-703">data</span></span> |<span data-ttu-id="39eac-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="39eac-704">10.2.2.11</span></span> |<span data-ttu-id="39eac-705">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="39eac-705">hk-c-aset-2</span></span> |<span data-ttu-id="39eac-706">DC = EASTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="39eac-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="39eac-707">Nee</span><span class="sxs-lookup"><span data-stu-id="39eac-707">No</span></span> |
| <span data-ttu-id="39eac-708">HK-w1-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-708">hk-w1-east-us</span></span> |<span data-ttu-id="39eac-709">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-709">web</span></span> |<span data-ttu-id="39eac-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="39eac-710">10.2.1.4</span></span> |<span data-ttu-id="39eac-711">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-711">hk-w-aset-1</span></span> |<span data-ttu-id="39eac-712">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-712">N/A</span></span> |<span data-ttu-id="39eac-713">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-713">N/A</span></span> |
| <span data-ttu-id="39eac-714">HK-w2-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-714">hk-w2-east-us</span></span> |<span data-ttu-id="39eac-715">Web</span><span class="sxs-lookup"><span data-stu-id="39eac-715">web</span></span> |<span data-ttu-id="39eac-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="39eac-716">10.2.1.5</span></span> |<span data-ttu-id="39eac-717">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="39eac-717">hk-w-aset-1</span></span> |<span data-ttu-id="39eac-718">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-718">N/A</span></span> |<span data-ttu-id="39eac-719">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="39eac-719">N/A</span></span> |

<span data-ttu-id="39eac-720">Volg de instructies van regio #1, maar gebruik 10.2.xxx.xxx adresruimte.</span><span class="sxs-lookup"><span data-stu-id="39eac-720">Follow the same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="39eac-721">Stap 9: Cassandra op elke virtuele machine configureren</span><span class="sxs-lookup"><span data-stu-id="39eac-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="39eac-722">Meld u aan bij de virtuele machine en voer het volgende:</span><span class="sxs-lookup"><span data-stu-id="39eac-722">Log into the VM and perform the following:</span></span>

1. <span data-ttu-id="39eac-723">Bewerken $CASS_HOME/conf/cassandra-rackdc.properties om de data center en rack-eigenschappen opgeven in notatie: dc = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="39eac-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties to specify the data center and rack properties in the format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="39eac-724">Cassandra.yaml voor het configureren van de seed-knooppunten te bewerken: zaden: '10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10'</span><span class="sxs-lookup"><span data-stu-id="39eac-724">Edit cassandra.yaml to configure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="39eac-725">Stap 10: Cassandra starten</span><span class="sxs-lookup"><span data-stu-id="39eac-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="39eac-726">Meld u aan bij elke virtuele machine en Cassandra op de achtergrond te starten met de volgende opdracht: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="39eac-726">Log into each VM and start Cassandra in the background by running the following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-the-multi-region-cluster"></a><span data-ttu-id="39eac-727">Testen van het Cluster meerdere landen/regio</span><span class="sxs-lookup"><span data-stu-id="39eac-727">Test the Multi-Region Cluster</span></span>
<span data-ttu-id="39eac-728">Nu is Cassandra met 16 knooppunten met 8 knooppunten in elke Azure-regio geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="39eac-728">By now Cassandra has been deployed to 16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="39eac-729">Deze knooppunten zich in hetzelfde cluster doordat de algemene clusternaam en de configuratie van de seed-knooppunt.</span><span class="sxs-lookup"><span data-stu-id="39eac-729">These nodes are in the same cluster by virtue of the common cluster name and the seed node configuration.</span></span> <span data-ttu-id="39eac-730">Gebruik het volgende proces voor het testen van het cluster:</span><span class="sxs-lookup"><span data-stu-id="39eac-730">Use the following process to test the cluster:</span></span>

### <a name="step-1-get-the-internal-load-balancer-ip-for-both-the-regions-using-powershell"></a><span data-ttu-id="39eac-731">Stap 1: Haal de interne load balancer-IP voor zowel de regio's met behulp van PowerShell</span><span class="sxs-lookup"><span data-stu-id="39eac-731">Step 1: Get the internal load balancer IP for both the regions using PowerShell</span></span>
* <span data-ttu-id="39eac-732">Get-AzureInternalLoadbalancer - ServiceName 'hk-c-svc-west-us'</span><span class="sxs-lookup"><span data-stu-id="39eac-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="39eac-733">Get-AzureInternalLoadbalancer - ServiceName 'hk-c-svc-Oost-us'</span><span class="sxs-lookup"><span data-stu-id="39eac-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="39eac-734">Noteer de IP-adressen (bijvoorbeeld - 10.1.2.101, Oost - west 10.2.2.101) weergegeven.</span><span class="sxs-lookup"><span data-stu-id="39eac-734">Note the IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-the-following-in-the-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="39eac-735">Stap 2: Het volgende in de regio west uitvoeren nadat de aanmelding bij hk-w1-west-ons</span><span class="sxs-lookup"><span data-stu-id="39eac-735">Step 2: Execute the following in the west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="39eac-736">Uitvoeren van $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="39eac-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="39eac-737">Voer de volgende CQL-opdrachten:</span><span class="sxs-lookup"><span data-stu-id="39eac-737">Execute the following CQL commands:</span></span>
   
     <span data-ttu-id="39eac-738">Maak met KEYSPACE customers_ks met replicatie = {'class': 'NetworkToplogyStrategy', 'WESTUS': 3, EASTUS: 3};   Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');   Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="39eac-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="39eac-739">U ziet een scherm wordt weergegeven zoals hieronder:</span><span class="sxs-lookup"><span data-stu-id="39eac-739">You should see a display like the one below:</span></span>

| <span data-ttu-id="39eac-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="39eac-740">customer_id</span></span> | <span data-ttu-id="39eac-741">Voornaam</span><span class="sxs-lookup"><span data-stu-id="39eac-741">firstname</span></span> | <span data-ttu-id="39eac-742">Achternaam</span><span class="sxs-lookup"><span data-stu-id="39eac-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="39eac-743">1</span><span class="sxs-lookup"><span data-stu-id="39eac-743">1</span></span> |<span data-ttu-id="39eac-744">John</span><span class="sxs-lookup"><span data-stu-id="39eac-744">John</span></span> |<span data-ttu-id="39eac-745">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-745">Doe</span></span> |
| <span data-ttu-id="39eac-746">2</span><span class="sxs-lookup"><span data-stu-id="39eac-746">2</span></span> |<span data-ttu-id="39eac-747">ANS</span><span class="sxs-lookup"><span data-stu-id="39eac-747">Jane</span></span> |<span data-ttu-id="39eac-748">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-748">Doe</span></span> |

### <a name="step-3-execute-the-following-in-the-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="39eac-749">Stap 3: Voer het volgende in de regio Oost na de aanmelding bij hk-w1-Oost-ons:</span><span class="sxs-lookup"><span data-stu-id="39eac-749">Step 3: Execute the following in the east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="39eac-750">Uitvoeren van $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="39eac-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="39eac-751">Voer de volgende CQL-opdrachten:</span><span class="sxs-lookup"><span data-stu-id="39eac-751">Execute the following CQL commands:</span></span>
   
     <span data-ttu-id="39eac-752">Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');   Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="39eac-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="39eac-753">U ziet de dezelfde weergave zoals te zien voor de regio West:</span><span class="sxs-lookup"><span data-stu-id="39eac-753">You should see the same display as seen for the West region:</span></span>

| <span data-ttu-id="39eac-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="39eac-754">customer_id</span></span> | <span data-ttu-id="39eac-755">Voornaam</span><span class="sxs-lookup"><span data-stu-id="39eac-755">firstname</span></span> | <span data-ttu-id="39eac-756">Achternaam</span><span class="sxs-lookup"><span data-stu-id="39eac-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="39eac-757">1</span><span class="sxs-lookup"><span data-stu-id="39eac-757">1</span></span> |<span data-ttu-id="39eac-758">John</span><span class="sxs-lookup"><span data-stu-id="39eac-758">John</span></span> |<span data-ttu-id="39eac-759">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-759">Doe</span></span> |
| <span data-ttu-id="39eac-760">2</span><span class="sxs-lookup"><span data-stu-id="39eac-760">2</span></span> |<span data-ttu-id="39eac-761">ANS</span><span class="sxs-lookup"><span data-stu-id="39eac-761">Jane</span></span> |<span data-ttu-id="39eac-762">De Vries</span><span class="sxs-lookup"><span data-stu-id="39eac-762">Doe</span></span> |

<span data-ttu-id="39eac-763">Enkele meer invoegingen uitvoeren en Zie dat die worden gerepliceerd naar west-ons deel uit van het cluster.</span><span class="sxs-lookup"><span data-stu-id="39eac-763">Execute a few more inserts and see that those get replicated to west-us part of the cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="39eac-764">Cassandra Testcluster met Node.js</span><span class="sxs-lookup"><span data-stu-id="39eac-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="39eac-765">Met behulp van een servicelaag eerder van de virtuele Linux-machines uitgevoerd in de 'web', we een eenvoudige Node.js-script om te lezen van de eerder ingevoegde gegevens wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="39eac-765">Using one of the Linux VMs crated in the "web" tier previously, we will execute a simple Node.js script to read the previously inserted data</span></span>

<span data-ttu-id="39eac-766">**Stap 1: Node.js en Cassandra-Client installeren**</span><span class="sxs-lookup"><span data-stu-id="39eac-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="39eac-767">Installeer Node.js en npm</span><span class="sxs-lookup"><span data-stu-id="39eac-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="39eac-768">Knooppunt pakket 'cassandra-client' installeren met npm</span><span class="sxs-lookup"><span data-stu-id="39eac-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="39eac-769">Voer het volgende script op de shell-prompt de json-tekenreeks van de opgehaalde gegevens worden weergegeven:</span><span class="sxs-lookup"><span data-stu-id="39eac-769">Execute the following script at the shell prompt which displays the json string of the retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed to create Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed to create column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert the record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read the two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue the code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="39eac-770">Conclusie</span><span class="sxs-lookup"><span data-stu-id="39eac-770">Conclusion</span></span>
<span data-ttu-id="39eac-771">Microsoft Azure is een flexibel platform waarmee het uitvoeren van zowel Microsoft als open-sourcesoftware zoals blijkt uit deze oefening.</span><span class="sxs-lookup"><span data-stu-id="39eac-771">Microsoft Azure is a flexible platform that allows the running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="39eac-772">Maximaal beschikbare Cassandra clusters kunnen worden geïmplementeerd op een enkele Datacenter via het spreiden van de clusterknooppunten over meerdere domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="39eac-772">Highly available Cassandra clusters can be deployed on a single data center through the spreading of the cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="39eac-773">Cassandra clusters kunnen ook worden geïmplementeerd in meerdere geografisch verafgelegen Azure-regio's voor noodherstel bewijs systemen.</span><span class="sxs-lookup"><span data-stu-id="39eac-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="39eac-774">Azure en Cassandra samen kunnen de constructie van zeer schaalbaar, maximaal beschikbare en na noodgevallen herstelbare cloudservices die nodig is door de hedendaagse internet schalen services.</span><span class="sxs-lookup"><span data-stu-id="39eac-774">Azure and Cassandra together enables the construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="39eac-775">Verwijzingen</span><span class="sxs-lookup"><span data-stu-id="39eac-775">References</span></span>
* [<span data-ttu-id="39eac-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="39eac-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="39eac-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="39eac-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="39eac-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="39eac-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

