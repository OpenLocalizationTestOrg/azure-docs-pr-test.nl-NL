---
title: aaaRun Cassandra met Linux in Azure | Microsoft Docs
description: Hoe een Cassandra toorun-cluster op Linux in Azure Virtual Machines van een Node.js-app
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 381ca301bbe88d3740cf182f9c44fada5b9ba7cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="2b21e-103">Cassandra op Azure uitvoeren met Linux en vanaf Node.js openen</span><span class="sxs-lookup"><span data-stu-id="2b21e-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="2b21e-104">Azure heeft twee verschillende implementatiemodellen voor het maken en werken met resources: [Resource Manager en Classic](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="2b21e-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="2b21e-105">In dit artikel bevat informatie over met behulp van Hallo klassieke implementatiemodel.</span><span class="sxs-lookup"><span data-stu-id="2b21e-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="2b21e-106">Microsoft raadt aan dat de meeste nieuwe implementaties het Resource Manager-model hello gebruiken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="2b21e-107">Zie Resource Manager-sjablonen voor [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) en [Spark-cluster en Cassandra op CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="2b21e-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="2b21e-108">Overzicht</span><span class="sxs-lookup"><span data-stu-id="2b21e-108">Overview</span></span>
<span data-ttu-id="2b21e-109">Microsoft Azure is een open cloudplatform die zowel Microsoft als goed als niet-Microsoft-software, waaronder besturingssystemen, toepassingsservers, messaging middleware, evenals SQL en NoSQL-databases van beide modellen commerciële en open-source wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="2b21e-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="2b21e-110">Robuuste services op openbare clouds, inclusief Azure bouwen vereist zorgvuldige planning en architectuur opzettelijk voor beide toepassingsservers als opslag en lagen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="2b21e-111">Cassandra van gedistribueerde opslagarchitectuur is natuurlijk helpt bij het bouwen van maximaal beschikbare systemen die fouttolerant voor clusters zijn.</span><span class="sxs-lookup"><span data-stu-id="2b21e-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="2b21e-112">Cassandra is een cloud schaal NoSQL-database onderhouden door Apache Software Foundation op cassandra.apache.org; Cassandra is geschreven in Java en daarom wordt uitgevoerd op zowel op Windows en Linux platforms.</span><span class="sxs-lookup"><span data-stu-id="2b21e-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="2b21e-113">Hallo van dit artikel worden tooshow Cassandra wilt implementeren op een virtuele Ubuntu als een cluster met één of meerdere data center gebruik van Microsoft Azure Virtual Machines en virtuele netwerken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-113">hello focus of this article is tooshow Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="2b21e-114">Hallo Clusterimplementatie voor geoptimaliseerde productieworkloads valt buiten het bereik van dit artikel omdat hiervoor meerdere schijf knooppuntconfiguratie, geschikte topologie voor ringtopologie en gegevens modelleren toosupport Hallo nodig replicatie, gegevensconsistentie, doorvoer en vereisten voor hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="2b21e-114">hello cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling toosupport hello needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="2b21e-115">Dit artikel wordt een fundamenteel benadering tooshow wat bij gebouw Hallo Cassandra cluster betrokken is vergeleken Docker, Chef of Puppet waardoor Hallo infrastructuur implementeren veel eenvoudiger.</span><span class="sxs-lookup"><span data-stu-id="2b21e-115">This article takes a fundamental approach tooshow what is involved in building hello Cassandra cluster compared Docker, Chef or Puppet which can make hello infrastructure deployment a lot easier.</span></span>  

## <a name="hello-deployment-models"></a><span data-ttu-id="2b21e-116">Hallo-implementatiemodellen</span><span class="sxs-lookup"><span data-stu-id="2b21e-116">hello Deployment Models</span></span>
<span data-ttu-id="2b21e-117">Microsoft Azure-netwerken kunt Hallo-implementatie van geïsoleerde persoonlijke clusters Hallo-toegang die beperkt tooattain fijn gedetailleerde netwerkbeveiliging worden kan.</span><span class="sxs-lookup"><span data-stu-id="2b21e-117">Microsoft Azure networking allows hello deployment of isolated private clusters, hello access of which can be restricted tooattain fine grained network security.</span></span>  <span data-ttu-id="2b21e-118">Omdat dit artikel over het weergeven van Hallo Cassandra implementatie op een fundamenteel niveau is, gaan we in niet op Hallo consistentieniveau en Hallo optimale Opslagontwerp voor doorvoer.</span><span class="sxs-lookup"><span data-stu-id="2b21e-118">Since this article is about showing hello Cassandra deployment at a fundamental level, we will not focus on hello consistency level and hello optimal storage design for throughput.</span></span> <span data-ttu-id="2b21e-119">Hier volgt de lijst Hallo van netwerkvereisten voor onze hypothetische cluster:</span><span class="sxs-lookup"><span data-stu-id="2b21e-119">Here is hello list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="2b21e-120">Externe systemen geen toegang tot de database van de Cassandra van binnen of buiten Azure</span><span class="sxs-lookup"><span data-stu-id="2b21e-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="2b21e-121">Cassandra cluster heeft toobe achter een load balancer voor thrift-verkeer</span><span class="sxs-lookup"><span data-stu-id="2b21e-121">Cassandra cluster has toobe behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="2b21e-122">Cassandra knooppunten in twee groepen in elk Datacenter voor de clusterbeschikbaarheid van een verbeterde implementeren</span><span class="sxs-lookup"><span data-stu-id="2b21e-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="2b21e-123">Vergrendelen Hallo cluster zodanig dat alleen serverfarm toepassing toegang tot toohello database rechtstreeks heeft</span><span class="sxs-lookup"><span data-stu-id="2b21e-123">Lock down hello cluster so that only application server farm has access toohello database directly</span></span>
* <span data-ttu-id="2b21e-124">Er is geen openbare netwerken eindpunten dan SSH</span><span class="sxs-lookup"><span data-stu-id="2b21e-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="2b21e-125">Elk knooppunt Cassandra moet een vaste IP-adres</span><span class="sxs-lookup"><span data-stu-id="2b21e-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="2b21e-126">Cassandra kan worden geïmplementeerd tooa één Azure-regio of toomultiple regio's op basis van Hallo gedistribueerde aard van Hallo werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="2b21e-126">Cassandra can be deployed tooa single Azure region or toomultiple regions based on hello distributed nature of hello workload.</span></span> <span data-ttu-id="2b21e-127">Meerdere landen/regio implementatiemodel kan worden overgenomen tooserve eindgebruikers dichter tooa bepaalde Geografie via Hallo dezelfde Cassandra-infrastructuur.</span><span class="sxs-lookup"><span data-stu-id="2b21e-127">Multi-region deployment model can be leveraged tooserve end users closer tooa particular geography through hello same Cassandra infrastructure.</span></span> <span data-ttu-id="2b21e-128">Cassandra van ingebouwde knooppunt replicatie zorgt voor synchronisatie van meerdere master Hallo schrijft die afkomstig zijn van meerdere datacenters en geeft een consistente weergave van Hallo gegevens tooapplications.</span><span class="sxs-lookup"><span data-stu-id="2b21e-128">Cassandra’s built-in node replication takes care of hello synchronization of multi-master writes originating from multiple data centers and presents a consistent view of hello data tooapplications.</span></span> <span data-ttu-id="2b21e-129">Implementatie van meerdere landen/regio kan ook helpen bij Hallo risicobeperking van Hallo breder serviceonderbrekingen van Azure.</span><span class="sxs-lookup"><span data-stu-id="2b21e-129">Multi-region deployment can also help with hello risk mitigation of hello broader Azure service outages.</span></span> <span data-ttu-id="2b21e-130">Instelbare consistentie van Cassandra en de replicatietopologie, kunt in de behoeften van diverse RPO van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="2b21e-131">Implementatie van één regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-131">Single Region Deployment</span></span>
<span data-ttu-id="2b21e-132">We begint met een implementatie met één regio en oogst Hallo geleerde lessen bij het maken van een model meerdere landen/regio.</span><span class="sxs-lookup"><span data-stu-id="2b21e-132">We will start with a single region deployment and harvest hello learnings in creating a multi-region model.</span></span> <span data-ttu-id="2b21e-133">Azure virtuele netwerken worden gebruikte toocreate geïsoleerd subnetten zodat Hallo beveiliging netwerkvereisten bovengenoemde kunnen worden voldaan.</span><span class="sxs-lookup"><span data-stu-id="2b21e-133">Azure virtual networking will be used toocreate isolated subnets so that hello network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="2b21e-134">Hallo-proces beschreven bij het maken van de implementatie van één regio Hallo gebruikt Ubuntu 14.04 TNS en Cassandra 2.08; Hallo-proces kan echter eenvoudig worden aangenomen toohello andere varianten van Linux.</span><span class="sxs-lookup"><span data-stu-id="2b21e-134">hello process described in creating hello single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, hello process can easily be adopted toohello other Linux variants.</span></span> <span data-ttu-id="2b21e-135">Hallo Hieronder volgen enkele van Hallo al kenmerken van Hallo één regio implementatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-135">hello following are some of hello systemic characteristics of hello single region deployment.</span></span>  

<span data-ttu-id="2b21e-136">**Hoge beschikbaarheid:** Hallo Cassandra knooppunten weergegeven in afbeelding 1 zijn geïmplementeerd Hallo beschikbaarheidssets tootwo zodat Hallo knooppunten worden verdeeld tussen meerdere domeinen met fouten voor hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="2b21e-136">**High Availability:** hello Cassandra nodes shown in hello Figure 1 are deployed tootwo availability sets so that hello nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="2b21e-137">Virtuele machines van aantekeningen voorzien met elke beschikbaarheidsset is toegewezen too2 domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-137">VMs annotated with each availability set is mapped too2 fault domains.</span></span>  <span data-ttu-id="2b21e-138">Microsoft Azure gebruikt Hallo concept van fouttolerantie domein toomanage niet-geplande uitvaltijd (bijvoorbeeld hardware of software-fouten) tijdens het Hallo-concept van upgradedomein (zoals host of Gast OS patches of upgrades worden uitgevoerd, toepassingsupgrades) wordt gebruikt voor het beheer van geplande uitvaltijd.</span><span class="sxs-lookup"><span data-stu-id="2b21e-138">Microsoft Azure uses hello concept of fault domain toomanage unplanned down time (e.g. hardware or software failures) while hello concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="2b21e-139">Zie [herstel na noodgevallen en hoge beschikbaarheid voor Azure-toepassingen](http://msdn.microsoft.com/library/dn251004.aspx) voor de rol Hallo probleem- en upgrade-domeinen in het bereiken van maximale beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="2b21e-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for hello role of fault and upgrade domains in attaining high availability.</span></span>

![Implementatie van één regio](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="2b21e-141">Afbeelding 1: Implementatie van één regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="2b21e-142">Houd er rekening mee dat op moment van schrijven van dit hello Azure niet is toegestaan Hallo expliciete toewijzing van een groep van virtuele machines tooa specifieke foutdomein; Als gevolg daarvan kan zelfs met Hallo implementatiemodel weergegeven in afbeelding 1, is het statistisch waarschijnlijk er mogelijk domeinen met fouten in plaats van vier toegewezen tootwo alle Hallo virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="2b21e-142">Note that at hello time of this writing, Azure doesn’t allow hello explicit mapping of a group of VMs tooa specific fault domain; consequently, even with hello deployment model shown in Figure 1, it is statistically probable that all hello virtual machines may be mapped tootwo fault domains instead of four.</span></span>

<span data-ttu-id="2b21e-143">**Load Balancing Thrift-verkeer:** toohello cluster een Thrift-clientbibliotheken binnen Hallo webserver verbinding maken via een interne load balancer.</span><span class="sxs-lookup"><span data-stu-id="2b21e-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside hello web server connect toohello cluster through an internal load balancer.</span></span> <span data-ttu-id="2b21e-144">Hiervoor Hallo-proces voor het Hallo interne load balancer toohello "gegevens" subnet toevoegen (Zie afbeelding 1) in de context Hallo van cloudservice Hallo Hallo Cassandra cluster hosten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-144">This requires hello process of adding hello internal load balancer toohello “data” subnet (refer Figure 1) in hello context of hello cloud service hosting hello Cassandra cluster.</span></span> <span data-ttu-id="2b21e-145">Als Hallo interne load balancer is gedefinieerd, moet elk knooppunt Hallo taakverdeling eindpunt toobe toegevoegd met de Hallo aantekeningen van een set met gelijke taakverdeling met eerder gedefinieerde load balancer-naam.</span><span class="sxs-lookup"><span data-stu-id="2b21e-145">Once hello internal load balancer is defined, each node requires hello load balanced endpoint toobe added with hello annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="2b21e-146">Zie [Azure interne Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="2b21e-147">**Cluster zaden:** is het belangrijk tooselect Hallo meeste maximaal beschikbare knooppunten voor zaden zoals Hallo nieuwe knooppunten zullen communiceren met een seed-knooppunten toodiscover Hallo-topologie van Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="2b21e-147">**Cluster Seeds:** It is important tooselect hello most highly available nodes for seeds as hello new nodes will communicate with seed nodes toodiscover hello topology of hello cluster.</span></span> <span data-ttu-id="2b21e-148">Eén knooppunt uit elke beschikbaarheidsset is aangewezen als seed-knooppunten tooavoid storingspunt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-148">One node from each availability set is designated as seed nodes tooavoid single point of failure.</span></span>

<span data-ttu-id="2b21e-149">**Replicatie Factor en Consistentieniveau:** Cassandra van ingebouwde hoge beschikbaarheid en gegevens duurzaamheid wordt gekenmerkt door Hallo replicatie Factor (RF - aantal exemplaren van elke rij die is opgeslagen op Hallo cluster) en Consistentieniveau (aantal replica's toobe lezen/geschreven voordat Hallo resultaat toohello aanroeper wordt geretourneerd).</span><span class="sxs-lookup"><span data-stu-id="2b21e-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by hello Replication Factor (RF - number of copies of each row stored on hello cluster) and Consistency Level (number of replicas toobe read/written before returning hello result toohello caller).</span></span> <span data-ttu-id="2b21e-150">Replicatie factor wordt opgegeven tijdens Hallo KEYSPACE (vergelijkbaar tooa relationele database) maken dat Hallo consistentieniveau is opgegeven tijdens het uitgeven van Hallo CRUD-query.</span><span class="sxs-lookup"><span data-stu-id="2b21e-150">Replication factor is specified during hello KEYSPACE (similar tooa relational database) creation whereas hello consistency level is specified while issuing hello CRUD query.</span></span> <span data-ttu-id="2b21e-151">Zie de documentatie bij Cassandra [configureren voor consistentie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) voor de details van de consistentie en Hallo formule voor quorum berekeningen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and hello formula for quorum computation.</span></span>

<span data-ttu-id="2b21e-152">Cassandra ondersteunt twee soorten integriteit gegevensmodellen – consistentie en uiteindelijke consistentie; Hallo Factor voor replicatie en het niveau van de consistentie wordt bepalen samen als Hallo consistent worden zodra een schrijfbewerking voltooid is of moeten uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="2b21e-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; hello Replication Factor and Consistency Level will together determine if hello data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="2b21e-153">Bijvoorbeeld: QUORUM opgeven als Hallo die consistentieniveau altijd wordt zorgt ervoor dat gegevens consistentie terwijl u elk consistentieniveau lager dan het aantal replica's toobe geschreven als de benodigde tooattain Hallo QUORUM (bijvoorbeeld een) resulteert in gegevens wordt uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="2b21e-153">For example, specifying QUORUM as hello Consistency Level will always ensures data Consistency while any consistency level, below hello number of replicas toobe written as needed tooattain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="2b21e-154">Hallo 8-node cluster hierboven, met een factor van de replicatie van 3 en QUORUM (2 knooppunten worden gelezen of geschreven voor consistentie) consistentieniveau lezen/schrijven, kunnen overleven Hallo theoretische verlies van op de meeste 1 knooppunt per replicatie groep voordat de start van de toepassing hello Hallo Hallo fout daar iets van merkt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-154">hello 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive hello theoretical loss of at hello most 1 node per replication group before hello application start noticing hello failure.</span></span> <span data-ttu-id="2b21e-155">Hierbij wordt ervan uitgegaan dat alle Hallo sleutel spaties hebben goed met gelijke taakverdeling lezen/schrijven-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-155">This assumes that all hello key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="2b21e-156">Hallo volgen Hallo-parameters we voor cluster Hallo geïmplementeerd gebruiken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-156">hello following are hello parameters we will use for hello deployed cluster:</span></span>

<span data-ttu-id="2b21e-157">Één regio Cassandra clusterconfiguratie:</span><span class="sxs-lookup"><span data-stu-id="2b21e-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="2b21e-158">Cluster-Parameter</span><span class="sxs-lookup"><span data-stu-id="2b21e-158">Cluster Parameter</span></span> | <span data-ttu-id="2b21e-159">Waarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-159">Value</span></span> | <span data-ttu-id="2b21e-160">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2b21e-161">Het aantal knooppunten (N)</span><span class="sxs-lookup"><span data-stu-id="2b21e-161">Number of Nodes (N)</span></span> |<span data-ttu-id="2b21e-162">8</span><span class="sxs-lookup"><span data-stu-id="2b21e-162">8</span></span> |<span data-ttu-id="2b21e-163">Totaal aantal knooppunten in cluster Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-163">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="2b21e-164">Replicatie Factor (RF)</span><span class="sxs-lookup"><span data-stu-id="2b21e-164">Replication Factor (RF)</span></span> |<span data-ttu-id="2b21e-165">3</span><span class="sxs-lookup"><span data-stu-id="2b21e-165">3</span></span> |<span data-ttu-id="2b21e-166">Aantal replica's van een bepaalde rij</span><span class="sxs-lookup"><span data-stu-id="2b21e-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="2b21e-167">Consistentieniveau (schrijven)</span><span class="sxs-lookup"><span data-stu-id="2b21e-167">Consistency Level (Write)</span></span> |<span data-ttu-id="2b21e-168">QUORUM[(RF/2) +1) = 2] Hallo resultaat Hallo formule naar beneden afgerond</span><span class="sxs-lookup"><span data-stu-id="2b21e-168">QUORUM[(RF/2) +1) = 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="2b21e-169">Schrijft op Hallo meeste 2 replica's voordat antwoord Hallo toohello aanroepfunctie wordt verzonden 3e replica is geschreven in een manier uiteindelijk consistent is.</span><span class="sxs-lookup"><span data-stu-id="2b21e-169">Writes at hello most 2 replicas before hello response is sent toohello caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="2b21e-170">Consistentieniveau (lezen)</span><span class="sxs-lookup"><span data-stu-id="2b21e-170">Consistency Level (Read)</span></span> |<span data-ttu-id="2b21e-171">QUORUM [(RF/2) + 1 = 2] Hallo resultaat van Hallo formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="2b21e-171">QUORUM [(RF/2) +1= 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="2b21e-172">2 replica's leest voor het verzenden van antwoord toohello aanroeper.</span><span class="sxs-lookup"><span data-stu-id="2b21e-172">Reads 2 replicas before sending response toohello caller.</span></span> |
| <span data-ttu-id="2b21e-173">Een replicatiestrategie voor</span><span class="sxs-lookup"><span data-stu-id="2b21e-173">Replication Strategy</span></span> |<span data-ttu-id="2b21e-174">Zie NetworkTopologyStrategy [gegevensreplicatie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="2b21e-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="2b21e-175">Hallo-implementatietopologie begrijpt en replica's op knooppunten geplaatst, zodat alle Hallo-replica's niet op Hallo dezelfde eindigen rack</span><span class="sxs-lookup"><span data-stu-id="2b21e-175">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="2b21e-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-176">Snitch</span></span> |<span data-ttu-id="2b21e-177">Zie GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="2b21e-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="2b21e-178">NetworkTopologyStrategy maakt gebruik van een concept van snitch toounderstand Hallo-topologie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-178">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="2b21e-179">GossipingPropertyFileSnitch kunt beter bepalen in kaart brengen van elk knooppunt toodata center en rack.</span><span class="sxs-lookup"><span data-stu-id="2b21e-179">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="2b21e-180">Hallo-cluster gebruikt roddels toopropagate vervolgens deze informatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-180">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="2b21e-181">Dit is veel eenvoudiger in dynamische IP-instelling relatieve tooPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-181">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

<span data-ttu-id="2b21e-182">**Azure overwegingen voor het Cluster Cassandra:** Microsoft Azure Virtual Machines mogelijkheid gebruikt Azure Blob-opslag voor persistentie van de schijf; Azure-opslag bespaart 3 replica's van elke schijf voor maximale duurzaamheid.</span><span class="sxs-lookup"><span data-stu-id="2b21e-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="2b21e-183">Dit betekent dat elke rij gegevens ingevoegd in een tabel Cassandra is al opgeslagen in 3 replica's en daarom gegevensconsistentie is al afgehandeld als Hallo replicatie Factor (RF) 1.</span><span class="sxs-lookup"><span data-stu-id="2b21e-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if hello Replication Factor (RF) is 1.</span></span> <span data-ttu-id="2b21e-184">Hallo belangrijkste probleem met replicatie Factor 1 is toepassing hello krijgen uitvaltijd zelfs als een enkel Cassandra knooppunt mislukt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-184">hello main problem with Replication Factor being 1 is that hello application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="2b21e-185">Als een knooppunt is niet actief op Hallo problemen (zoals hardware, software systeemfouten) wordt herkend door de Azure-Infrastructuurcontroller is, wordt dit echter een nieuw knooppunt in de plaats met behulp van inrichten Hallo dezelfde opslagstations.</span><span class="sxs-lookup"><span data-stu-id="2b21e-185">However, if a node is down for hello problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using hello same storage drives.</span></span> <span data-ttu-id="2b21e-186">Inrichting van een nieuw knooppunt tooreplace Hallo oude een kan enkele minuten duren.</span><span class="sxs-lookup"><span data-stu-id="2b21e-186">Provisioning a new node tooreplace hello old one may take a few minutes.</span></span>  <span data-ttu-id="2b21e-187">Op dezelfde manier Cassandra upgrades voor gepland onderhoudsactiviteiten zoals gastbesturingssysteem wijzigingen, en wijzigingen in de toepassing Azure-Infrastructuurcontroller voert rolling upgrades van Hallo knooppunten in cluster Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of hello nodes in hello cluster.</span></span>  <span data-ttu-id="2b21e-188">Rolling upgrades ook kan duren voordat u een paar knooppunten tegelijk, en daarom Hallo cluster korte uitvaltijd voor enkele partities kan optreden.</span><span class="sxs-lookup"><span data-stu-id="2b21e-188">Rolling upgrades also may take down a few nodes at a time and hence hello cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="2b21e-189">Hallo gegevens wordt echter niet meer verloren vanwege toohello ingebouwde Azure Storage redundantie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-189">However, hello data will not be lost due toohello built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="2b21e-190">Voor systemen geïmplementeerd tooAzure die geen hoge beschikbaarheid vereist (bijvoorbeeld ongeveer 99,9 die gelijkwaardige too8.76 uur-jaar; Zie [hoge beschikbaarheid](http://en.wikipedia.org/wiki/High_availability) voor meer informatie) hebt u mogelijk kunnen toorun met RF = 1 en Consistentieniveau = een.</span><span class="sxs-lookup"><span data-stu-id="2b21e-190">For systems deployed tooAzure that doesn’t require high availability (e.g. around 99.9 which is equivalent too8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able toorun with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="2b21e-191">Voor toepassingen met hoge beschikbaarheidsvereisten, RF = 3 en Consistentieniveau = QUORUM wordt tolereren Hallo uitvaltijd van een van de Hallo knooppunten een Hallo replica's.</span><span class="sxs-lookup"><span data-stu-id="2b21e-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate hello down time of one of hello nodes one of hello replicas.</span></span> <span data-ttu-id="2b21e-192">RF = 1 in traditionele implementaties (bijvoorbeeld op locatie) kunnen niet worden gebruikt vanwege mogelijk gegevensverlies toohello ten gevolge van problemen zoals schijffouten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due toohello possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="2b21e-193">Implementatie van meerdere landen/regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-193">Multi-region Deployment</span></span>
<span data-ttu-id="2b21e-194">Data center bewust replicatie- en consistent model hierboven helpt bij de implementatie van meerdere landen/regio Hallo out of box zonder Hallo Hallo Cassandra van nodig voor elke externe tooling.</span><span class="sxs-lookup"><span data-stu-id="2b21e-194">Cassandra’s data-center-aware replication and consistency model described above helps with hello multi-region deployment out of hello box without hello need for any external tooling.</span></span> <span data-ttu-id="2b21e-195">Dit is heel anders dan traditionele relationele databases Hallo waarbij Hallo-instellingen voor het spiegelen van databases voor meerdere masters schrijfacties erg complex kan zijn.</span><span class="sxs-lookup"><span data-stu-id="2b21e-195">This is quite different from hello traditional relational databases where hello setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="2b21e-196">Cassandra in een instellen in meerdere regio kan helpen bij het Hallo-gebruiksscenario's waaronder de volgende Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-196">Cassandra in a multi-region set up can help with hello usage scenarios including hello following:</span></span>

<span data-ttu-id="2b21e-197">**Implementatie op basis van nabijheid:** multitenant-toepassingen met de toewijzing van gebruikers van de tenant wissen-naar-regio, kan worden geprofiteerd door lage latenties Hallo meerdere landen/regio van het cluster.</span><span class="sxs-lookup"><span data-stu-id="2b21e-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by hello multi-region cluster’s low latencies.</span></span> <span data-ttu-id="2b21e-198">Voorbeeld van een management learning systemen voor onderwijsinstellingen kunnen implementeren om een gedistribueerde cluster in VS-Oost en VS-West regio's tooserve Hallo respectieve campussen voor transactionele evenals analytics.</span><span class="sxs-lookup"><span data-stu-id="2b21e-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions tooserve hello respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="2b21e-199">Hallo-gegevens kan lokaal consistent op Hallo tijd lees- en schrijfbewerkingen en uiteindelijk consistent tussen beide Hallo regio's kunnen worden.</span><span class="sxs-lookup"><span data-stu-id="2b21e-199">hello data can be locally consistent at hello time reads and writes and can be eventually consistent across both hello regions.</span></span> <span data-ttu-id="2b21e-200">Er zijn andere voorbeelden zoals distributie van de media, e-commerce en alles en alles wat u geconcentreerd geo-gebruiker basis fungeert een goede gebruiksvoorbeeld voor dit implementatiemodel is.</span><span class="sxs-lookup"><span data-stu-id="2b21e-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="2b21e-201">**Hoge beschikbaarheid:** redundantie is een belangrijke rol bij het bereiken van maximale beschikbaarheid van de software en hardware; Zie betrouwbare Cloudsystemen gebouw in Microsoft Azure voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="2b21e-202">In Microsoft Azure is Hallo alleen betrouwbare manier om dat te bereiken true redundantie door het implementeren van een cluster met meerdere landen/regio.</span><span class="sxs-lookup"><span data-stu-id="2b21e-202">On Microsoft Azure, hello only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="2b21e-203">Toepassingen kunnen worden geïmplementeerd in een actief-actief of actief / passief-modus en als een van de regio's Hallo niet actief is, Azure Traffic Manager verkeer toohello actieve regio kunt omleiden.</span><span class="sxs-lookup"><span data-stu-id="2b21e-203">Applications can be deployed in an active-active or active-passive mode and if one of hello regions is down, Azure Traffic Manager can redirect traffic toohello active region.</span></span>  <span data-ttu-id="2b21e-204">Implementatie voor één regio Hallo als Hallo beschikbaarheid 99,9, is een implementatie van de twee regio kan bereiken een beschikbaarheid van 99.9999 berekend door Hallo formule: (1-(1-0.999) * (1-0,999)) * 100); Zie Hallo bovenstaande artikel voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-204">With hello single region deployment, if hello availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by hello formula: (1-(1-0.999) * (1-0.999))*100); see hello above paper for details.</span></span>

<span data-ttu-id="2b21e-205">**Herstel na noodgevallen:** meerdere landen/regio Cassandra cluster als goed ontworpen, kan tolereren onherstelbare data center storingen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="2b21e-206">Als één regio is niet actief is, kunnen Hallo toepassing geïmplementeerd tooother regio's starten voor de eindgebruikers Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-206">If one region is down, hello application deployed tooother regions can start serving hello end users.</span></span> <span data-ttu-id="2b21e-207">Net als elke andere zakelijke continuïteit-implementaties is de toepassing hello toobe fouttolerante voor sommige verlies van gegevens uit de gegevens in de asynchrone pijplijn Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-207">Like any other business continuity implementations, hello application has toobe tolerant for some data loss resulting from hello data in hello asynchronous pipeline.</span></span> <span data-ttu-id="2b21e-208">Cassandra heeft echter Hallo herstel veel sneller dan Hallo periode die door processen voor het herstellen van traditionele databases.</span><span class="sxs-lookup"><span data-stu-id="2b21e-208">However, Cassandra makes hello recovery much swifter than hello time taken by traditional database recovery processes.</span></span> <span data-ttu-id="2b21e-209">Afbeelding 2 toont Hallo normale implementatie voor meerdere landen/regio-model met acht knooppunten in elke regio.</span><span class="sxs-lookup"><span data-stu-id="2b21e-209">Figure 2 shows hello typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="2b21e-210">Beide regio's spiegelbeeld van elkaar voor Hallo zijn dezelfde hoogte van het; concrete ontwerpen, is afhankelijk van type werkbelasting hello (bv. transactioneel of analytische), RPO, RTO, gegevensconsistentie en beschikbaarheidsvereisten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-210">Both regions are mirror images of each other for hello same of symmetry; real world designs depend on hello workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Implementatie van meerdere regio](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="2b21e-212">Afbeelding2: Implementatie van meerdere landen/regio Cassandra</span><span class="sxs-lookup"><span data-stu-id="2b21e-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="2b21e-213">Netwerkintegratie</span><span class="sxs-lookup"><span data-stu-id="2b21e-213">Network Integration</span></span>
<span data-ttu-id="2b21e-214">Sets van virtuele machines geïmplementeerde tooprivate netwerken zich op twee gebieden communiceert met elkaar met behulp van een VPN-tunnel.</span><span class="sxs-lookup"><span data-stu-id="2b21e-214">Sets of virtual machines deployed tooprivate networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="2b21e-215">Hallo VPN-tunnel maakt verbinding met twee software-gateways geleverd tijdens de implementatie van hello netwerkgegevens.</span><span class="sxs-lookup"><span data-stu-id="2b21e-215">hello VPN tunnel connects two software gateways provisioned during hello network deployment process.</span></span> <span data-ttu-id="2b21e-216">Beide regio's hebben vergelijkbare netwerkarchitectuur in termen van de subnetten 'web' en 'data'; Azure-netwerken kunnen Hallo maken van zoveel subnetten indien nodig en ACL's van toepassing als nodig is voor netwerkbeveiliging.</span><span class="sxs-lookup"><span data-stu-id="2b21e-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows hello creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="2b21e-217">Inter data center communicatie latentie en Hallo economische gevolgen van Hallo network-verkeer moeten toobe beschouwd als tijdens het Hallo-clustertopologie ontwerpen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-217">While designing hello cluster topology inter data center communication latency and hello economic impact of hello network traffic need toobe considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="2b21e-218">Consistentie van de gegevens voor de implementatie van meerdere Datacenter</span><span class="sxs-lookup"><span data-stu-id="2b21e-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="2b21e-219">Gedistribueerde implementaties moeten toobe op de hoogte van Hallo cluster topologie gevolgen voor de doorvoer en hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="2b21e-219">Distributed deployments need toobe aware of hello cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="2b21e-220">Hallo RF en Consistentieniveau nodig toobe geselecteerd manier die quorum Hallo afhankelijk niet van Hallo beschikbaarheid van alle Hallo datacenters.</span><span class="sxs-lookup"><span data-stu-id="2b21e-220">hello RF and Consistency Level need toobe selected in such way that hello quorum doesn’t depend on hello availability of all hello data centers.</span></span>
<span data-ttu-id="2b21e-221">Voor een systeem dat hoge consistentie, een LOCAL_QUORUM moet voor consistentieniveau (voor lees- en schrijfbewerkingen) ervoor dat Hallo lokale zorgt leest en schrijft worden nageleefd van lokale Hallo knooppunten gegevens asynchroon gerepliceerd toohello externe datacenters.</span><span class="sxs-lookup"><span data-stu-id="2b21e-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that hello local reads and writes are satisfied from hello local nodes while data is replicated asynchronously toohello remote data centers.</span></span>  <span data-ttu-id="2b21e-222">Tabel 2 ziet u details voor Hallo meerdere landen/regio cluster die worden beschreven in hello later up schrijven Hallo-configuratie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-222">Table 2 summarizes hello configuration details for hello multi-region cluster outlined later in hello write up.</span></span>

<span data-ttu-id="2b21e-223">**Twee regio Cassandra clusterconfiguratie**</span><span class="sxs-lookup"><span data-stu-id="2b21e-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="2b21e-224">Cluster-Parameter</span><span class="sxs-lookup"><span data-stu-id="2b21e-224">Cluster Parameter</span></span> | <span data-ttu-id="2b21e-225">Waarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-225">Value</span></span> | <span data-ttu-id="2b21e-226">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2b21e-227">Het aantal knooppunten (N)</span><span class="sxs-lookup"><span data-stu-id="2b21e-227">Number of Nodes (N)</span></span> |<span data-ttu-id="2b21e-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="2b21e-228">8 + 8</span></span> |<span data-ttu-id="2b21e-229">Totaal aantal knooppunten in cluster Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-229">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="2b21e-230">Replicatie Factor (RF)</span><span class="sxs-lookup"><span data-stu-id="2b21e-230">Replication Factor (RF)</span></span> |<span data-ttu-id="2b21e-231">3</span><span class="sxs-lookup"><span data-stu-id="2b21e-231">3</span></span> |<span data-ttu-id="2b21e-232">Aantal replica's van een bepaalde rij</span><span class="sxs-lookup"><span data-stu-id="2b21e-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="2b21e-233">Consistentieniveau (schrijven)</span><span class="sxs-lookup"><span data-stu-id="2b21e-233">Consistency Level (Write)</span></span> |<span data-ttu-id="2b21e-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] Hallo resultaat van Hallo formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="2b21e-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="2b21e-235">2-knooppunten wordt geschreven toohello eerste Datacenter synchroon; Hallo extra 2 knooppunten die nodig zijn voor het quorum wordt geschreven asynchroon toohello 2e Datacenter.</span><span class="sxs-lookup"><span data-stu-id="2b21e-235">2 nodes will be written toohello first data center synchronously; hello additional 2 nodes needed for quorum will be written asynchronously toohello 2nd data center.</span></span> |
| <span data-ttu-id="2b21e-236">Consistentieniveau (lezen)</span><span class="sxs-lookup"><span data-stu-id="2b21e-236">Consistency Level (Read)</span></span> |<span data-ttu-id="2b21e-237">LOCAL_QUORUM ((RF/2) + 1) = 2 Hallo resultaat van Hallo formule wordt omlaag afgerond</span><span class="sxs-lookup"><span data-stu-id="2b21e-237">LOCAL_QUORUM ((RF/2) +1) = 2 hello result of hello formula is rounded down</span></span> |<span data-ttu-id="2b21e-238">Alleen aanvragen wordt van slechts één regio; voldaan 2 knooppunten worden gelezen voordat antwoord Hallo back toohello client wordt verzonden.</span><span class="sxs-lookup"><span data-stu-id="2b21e-238">Read requests are satisfied from only one region; 2 nodes are read before hello response is sent back toohello client.</span></span> |
| <span data-ttu-id="2b21e-239">Een replicatiestrategie voor</span><span class="sxs-lookup"><span data-stu-id="2b21e-239">Replication Strategy</span></span> |<span data-ttu-id="2b21e-240">Zie NetworkTopologyStrategy [gegevensreplicatie](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="2b21e-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="2b21e-241">Hallo-implementatietopologie begrijpt en replica's op knooppunten geplaatst, zodat alle Hallo-replica's niet op Hallo dezelfde eindigen rack</span><span class="sxs-lookup"><span data-stu-id="2b21e-241">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="2b21e-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-242">Snitch</span></span> |<span data-ttu-id="2b21e-243">Zie GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra-documentatie voor meer informatie</span><span class="sxs-lookup"><span data-stu-id="2b21e-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="2b21e-244">NetworkTopologyStrategy maakt gebruik van een concept van snitch toounderstand Hallo-topologie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-244">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="2b21e-245">GossipingPropertyFileSnitch kunt beter bepalen in kaart brengen van elk knooppunt toodata center en rack.</span><span class="sxs-lookup"><span data-stu-id="2b21e-245">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="2b21e-246">Hallo-cluster gebruikt roddels toopropagate vervolgens deze informatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-246">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="2b21e-247">Dit is veel eenvoudiger in dynamische IP-instelling relatieve tooPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-247">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

## <a name="hello-software-configuration"></a><span data-ttu-id="2b21e-248">Hallo SOFTWARECONFIGURATIE</span><span class="sxs-lookup"><span data-stu-id="2b21e-248">hello SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="2b21e-249">Hallo volgende softwareversies worden gebruikt tijdens de implementatie van Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-249">hello following software versions are used during hello deployment:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-250">Software</span><span class="sxs-lookup"><span data-stu-id="2b21e-250">Software</span></span></th><th><span data-ttu-id="2b21e-251">Bron</span><span class="sxs-lookup"><span data-stu-id="2b21e-251">Source</span></span></th><th><span data-ttu-id="2b21e-252">Versie</span><span class="sxs-lookup"><span data-stu-id="2b21e-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-253">JAVA RUNTIME ENVIRONMENT</span><span class="sxs-lookup"><span data-stu-id="2b21e-253">JRE</span></span>    </td><td><span data-ttu-id="2b21e-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="2b21e-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="2b21e-255">8U5</span><span class="sxs-lookup"><span data-stu-id="2b21e-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-256">JNA</span><span class="sxs-lookup"><span data-stu-id="2b21e-256">JNA</span></span>    </td><td><span data-ttu-id="2b21e-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="2b21e-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="2b21e-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="2b21e-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="2b21e-259">Cassandra</span></span></td><td>[<span data-ttu-id="2b21e-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="2b21e-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="2b21e-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="2b21e-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="2b21e-262">Ubuntu</span></span>    </td><td><span data-ttu-id="2b21e-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="2b21e-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="2b21e-264">14.04 TNS</span><span class="sxs-lookup"><span data-stu-id="2b21e-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="2b21e-265">Omdat het downloaden van JRE handmatige instemming met de Oracle-licentie, toosimplify Hallo implementatie, alle vereiste software toohello bureaublad vereist voor het uploaden van later in Hallo Ubuntu-sjablooninstallatiekopie die we als een cluster met precursor toohello maakt Hallo downloaden de implementatie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-265">Since downloading of JRE requires manual acceptance of Oracle license, toosimplify hello deployment, download all hello required software toohello desktop for later uploading into hello Ubuntu template image we will be creating as a precursor toohello cluster deployment.</span></span>

<span data-ttu-id="2b21e-266">Hallo hierboven software downloaden naar een bekende downloadmap (bijvoorbeeld %TEMP%/downloads op Windows of ~/Downloads op de meeste Linux-distributies of Mac) op de lokale computer Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-266">Download hello above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on hello local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="2b21e-267">VIRTUELE UBUNTU-MACHINE MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="2b21e-268">In deze stap van Hallo gaan we maken Ubuntu installatiekopie met de vereiste software Hallo zodat hello installatiekopie opnieuw kan worden gebruikt voor het inrichten van verschillende Cassandra knooppunten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-268">In this step of hello process we will create Ubuntu image with hello pre-requisite software so that hello image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="2b21e-269">STAP 1: De SSH-sleutelpaar genereren</span><span class="sxs-lookup"><span data-stu-id="2b21e-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="2b21e-270">Azure heeft een openbare sleutel die is PEM of DER-gecodeerd op Hallo tijd inrichten X509 nodig.</span><span class="sxs-lookup"><span data-stu-id="2b21e-270">Azure needs an X509 public key that is either PEM or DER encoded at hello provisioning time.</span></span> <span data-ttu-id="2b21e-271">Een openbaar/persoonlijk sleutelpaar dat zich bevindt op het Hallo-instructies genereren tooUse SSH met Linux op Azure.</span><span class="sxs-lookup"><span data-stu-id="2b21e-271">Generate a public/private key pair using hello instructions located at How tooUse SSH with Linux on Azure.</span></span> <span data-ttu-id="2b21e-272">Als u van plan toouse putty.exe als SSH-client op Windows of Linux bent, hebt u tooconvert hello PEM gecodeerd RSA persoonlijke sleutel tooPPK indeling met behulp van puttygen.exe; Hallo instructies hiervoor vindt u in Hallo hierboven webpagina.</span><span class="sxs-lookup"><span data-stu-id="2b21e-272">If you plan toouse putty.exe as an SSH client either on Windows or Linux, you have tooconvert hello PEM encoded RSA private key tooPPK format using puttygen.exe; hello instructions for this can be found in hello above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="2b21e-273">STAP 2: Ubuntu sjabloon VM maken</span><span class="sxs-lookup"><span data-stu-id="2b21e-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="2b21e-274">toocreate hello sjabloon VM, meld u aan bij hello Azure classic portal en gebruik Hallo volgende volgorde: klik op Nieuw, COMPUTE, virtuele MACHINE, FROM GALERIE, UBUNTU, Ubuntu Server 14.04 TNS, en klik vervolgens op pijl-rechts Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-274">toocreate hello template VM, log into hello Azure classic portal and use hello following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click hello right arrow.</span></span> <span data-ttu-id="2b21e-275">Voor een zelfstudie waarin wordt beschreven hoe toocreate een Linux-VM zien een virtuele Machine waarop Linux maken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-275">For a tutorial that describes how toocreate a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="2b21e-276">Voer de volgende informatie op het scherm Hallo 'Virtuele-machineconfiguratie' #1 Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-276">Enter hello following information on hello “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-277">VELDNAAM</span><span class="sxs-lookup"><span data-stu-id="2b21e-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="2b21e-278">WAARDE VAN VELD</span><span class="sxs-lookup"><span data-stu-id="2b21e-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="2b21e-279">OPMERKINGEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="2b21e-280">RELEASEDATUM VERSIE</span><span class="sxs-lookup"><span data-stu-id="2b21e-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="2b21e-281">Selecteer een datum in Hallo vervolgkeuzelijst</span><span class="sxs-lookup"><span data-stu-id="2b21e-281">Select a date from hello drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="2b21e-282">NAAM VAN VIRTUELE MACHINE</span><span class="sxs-lookup"><span data-stu-id="2b21e-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="2b21e-283">Cass-sjabloon</span><span class="sxs-lookup"><span data-stu-id="2b21e-283">cass-template</span></span>                   </td><td> <span data-ttu-id="2b21e-284">Dit is Hallo hostnaam Hallo VM</span><span class="sxs-lookup"><span data-stu-id="2b21e-284">This is hello hostname of hello VM</span></span> </td><tr>
<tr><td><span data-ttu-id="2b21e-285">LAAG</span><span class="sxs-lookup"><span data-stu-id="2b21e-285">TIER</span></span>                     </td><td> <span data-ttu-id="2b21e-286">STANDARD</span><span class="sxs-lookup"><span data-stu-id="2b21e-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="2b21e-287">Laat de standaardwaarde Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-287">Leave hello default</span></span>              </td><tr>
<tr><td><span data-ttu-id="2b21e-288">GROOTTE</span><span class="sxs-lookup"><span data-stu-id="2b21e-288">SIZE</span></span>                     </td><td> <span data-ttu-id="2b21e-289">A1</span><span class="sxs-lookup"><span data-stu-id="2b21e-289">A1</span></span>                              </td><td><span data-ttu-id="2b21e-290">Selecteer Hallo die VM op basis van Hallo i/o-behoeften; voor dit doel laat Hallo standaardwaarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-290">Select hello VM based on hello IO needs; for this purpose leave hello default</span></span> </td><tr>
<tr><td> <span data-ttu-id="2b21e-291">NIEUWE GEBRUIKERSNAAM</span><span class="sxs-lookup"><span data-stu-id="2b21e-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="2b21e-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="2b21e-292">localadmin</span></span>                       </td><td> <span data-ttu-id="2b21e-293">'admin' is een gereserveerde gebruikersnaam in Ubuntu 12. xx en na</span><span class="sxs-lookup"><span data-stu-id="2b21e-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="2b21e-294">VERIFICATIE</span><span class="sxs-lookup"><span data-stu-id="2b21e-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="2b21e-295">Klik op het selectievakje</span><span class="sxs-lookup"><span data-stu-id="2b21e-295">Click check box</span></span>                 </td><td><span data-ttu-id="2b21e-296">Controleer als u wilt dat toosecure met een SSH-sleutel</span><span class="sxs-lookup"><span data-stu-id="2b21e-296">Check if you want toosecure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="2b21e-297">CERTIFICAAT</span><span class="sxs-lookup"><span data-stu-id="2b21e-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="2b21e-298">bestandsnaam van de openbare-sleutelcertificaat Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-298">file name of hello public key certificate</span></span> </td><td> <span data-ttu-id="2b21e-299">De openbare sleutel Hallo eerder gegenereerde gebruiken</span><span class="sxs-lookup"><span data-stu-id="2b21e-299">Use hello public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="2b21e-300">Nieuw wachtwoord</span><span class="sxs-lookup"><span data-stu-id="2b21e-300">New Password</span></span>    </td><td> <span data-ttu-id="2b21e-301">sterk wachtwoord</span><span class="sxs-lookup"><span data-stu-id="2b21e-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="2b21e-302">Wachtwoord bevestigen</span><span class="sxs-lookup"><span data-stu-id="2b21e-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="2b21e-303">sterk wachtwoord</span><span class="sxs-lookup"><span data-stu-id="2b21e-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="2b21e-304">Voer de volgende informatie op het scherm Hallo 'Virtuele-machineconfiguratie' #2 Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-304">Enter hello following information on hello “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-305">VELDNAAM</span><span class="sxs-lookup"><span data-stu-id="2b21e-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="2b21e-306">WAARDE VAN VELD</span><span class="sxs-lookup"><span data-stu-id="2b21e-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="2b21e-307">OPMERKINGEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="2b21e-308">CLOUDSERVICE</span><span class="sxs-lookup"><span data-stu-id="2b21e-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="2b21e-309">Maak een nieuwe cloudservice</span><span class="sxs-lookup"><span data-stu-id="2b21e-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="2b21e-310">Cloudservice is een container compute-bronnen zoals virtuele machines</span><span class="sxs-lookup"><span data-stu-id="2b21e-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="2b21e-311">DNS-NAAM VAN CLOUD-SERVICE</span><span class="sxs-lookup"><span data-stu-id="2b21e-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="2b21e-312">Ubuntu template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="2b21e-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="2b21e-313">Geef de naam van een machine agnostisch load balancer</span><span class="sxs-lookup"><span data-stu-id="2b21e-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="2b21e-314">REGIO/AFFINITEITSGROEP/VIRTUEEL NETWERK</span><span class="sxs-lookup"><span data-stu-id="2b21e-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="2b21e-315">VS - west</span><span class="sxs-lookup"><span data-stu-id="2b21e-315">West US</span></span>    </td><td> <span data-ttu-id="2b21e-316">Selecteer een regio van waaruit de toegang tot Hallo Cassandra cluster van uw webtoepassingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-316">Select a region from which your web applications access hello Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-317">STORAGE-ACCOUNT</span><span class="sxs-lookup"><span data-stu-id="2b21e-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="2b21e-318">Standaard gebruiken</span><span class="sxs-lookup"><span data-stu-id="2b21e-318">Use default</span></span>    </td><td><span data-ttu-id="2b21e-319">Hallo standaardopslagaccount of een vooraf gemaakte opslagaccount gebruiken in een bepaald gebied</span><span class="sxs-lookup"><span data-stu-id="2b21e-319">Use hello default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-320">BESCHIKBAARHEIDSSET</span><span class="sxs-lookup"><span data-stu-id="2b21e-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="2b21e-321">Geen</span><span class="sxs-lookup"><span data-stu-id="2b21e-321">None</span></span> </td><td>    <span data-ttu-id="2b21e-322">Laat dit veld leeg</span><span class="sxs-lookup"><span data-stu-id="2b21e-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-323">EINDPUNTEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="2b21e-324">Standaard gebruiken</span><span class="sxs-lookup"><span data-stu-id="2b21e-324">Use default</span></span> </td><td>    <span data-ttu-id="2b21e-325">Hallo-standaard SSH-configuratie gebruiken</span><span class="sxs-lookup"><span data-stu-id="2b21e-325">Use hello default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="2b21e-326">Pijl-rechts, Hallo standaardinstellingen laten staan op het welkomstscherm #3 en klik op Hallo 'selectievakje' knop toocomplete Hallo VM inrichtingsproces.</span><span class="sxs-lookup"><span data-stu-id="2b21e-326">Click right arrow, leave hello defaults on hello screen #3 and click hello “check” button toocomplete hello VM provisioning process.</span></span> <span data-ttu-id="2b21e-327">Na een paar minuten moet Hallo VM met Hallo naam 'ubuntu-sjabloon' status 'actief'.</span><span class="sxs-lookup"><span data-stu-id="2b21e-327">After a few minutes, hello VM with hello name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-hello-necessary-software"></a><span data-ttu-id="2b21e-328">Hallo benodigde SOFTWARE installeren</span><span class="sxs-lookup"><span data-stu-id="2b21e-328">INSTALL hello NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="2b21e-329">STAP 1: Het uploaden van tarballs</span><span class="sxs-lookup"><span data-stu-id="2b21e-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="2b21e-330">Gebruik scp of pscp, kopie Hallo eerder gedownloade software te ~ / downloads directory Hallo volgende opdracht gebruiken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-330">Using scp or pscp, copy hello previously downloaded software too~/downloads directory using hello following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="2b21e-331">pscp server-jre-8u5-linux-x64.tar.gzlocaladmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="2b21e-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="2b21e-332">Herhaal Hallo hierboven opdracht voor JRE ook als voor Hallo Cassandra bits.</span><span class="sxs-lookup"><span data-stu-id="2b21e-332">Repeat hello above command for JRE as well as for hello Cassandra bits.</span></span>

#### <a name="step-2-prepare-hello-directory-structure-and-extract-hello-archives"></a><span data-ttu-id="2b21e-333">STAP 2: Hallo mapstructuur voorbereiden en Hallo archieven uitpakken</span><span class="sxs-lookup"><span data-stu-id="2b21e-333">STEP 2: Prepare hello directory structure and extract hello archives</span></span>
<span data-ttu-id="2b21e-334">Meld u aan bij Hallo VM en Hallo mapstructuur maken en software extraheren als supergebruiker met onderstaande Hallo bash-script:</span><span class="sxs-lookup"><span data-stu-id="2b21e-334">Log into hello VM and create hello directory structure and extract software as a super user using hello bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change hello ownership toohello service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile tooadd JRE toohello PATH"
    echo "installation is complete"


<span data-ttu-id="2b21e-335">Als u dit script in vim venster plakt, zorg ervoor dat tooremove Hallo regeleinde return ('\r ") met behulp van de volgende opdracht Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-335">If you paste this script into vim window, make sure tooremove hello carriage return (‘\r”) using hello following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="2b21e-336">Stap 3: Enzovoort/profiel bewerken</span><span class="sxs-lookup"><span data-stu-id="2b21e-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="2b21e-337">Hallo volgende Hallo eind toevoegen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-337">Append hello following at hello end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="2b21e-338">Stap 4: Installatie JNA voor productiesystemen</span><span class="sxs-lookup"><span data-stu-id="2b21e-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="2b21e-339">Gebruik Hallo volgende opdracht sequence: Hallo volgende opdracht zal installeren jna-3.2.7.jar en jna-platform-3.2.7.jar too/usr/share.java directory sudo apt get-libjna java installeren</span><span class="sxs-lookup"><span data-stu-id="2b21e-339">Use hello following command sequence: hello following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="2b21e-340">Symbolische koppelingen in $CASS_HOME/lib directory maken, zodat het opstartscript Cassandra deze potten kunt vinden:</span><span class="sxs-lookup"><span data-stu-id="2b21e-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="2b21e-341">Stap 5: Cassandra.yaml configureren</span><span class="sxs-lookup"><span data-stu-id="2b21e-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="2b21e-342">Cassandra.yaml op elke virtuele machine tooreflect configuratie nodig is voor alle virtuele machines van het Hallo [we zullen dit aanpassen tijdens het inrichten van werkelijke Hallo] bewerken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-342">Edit cassandra.yaml on each VM tooreflect configuration needed by all hello virtual machines [we will tweak this during hello actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-343">Veldnaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-343">Field Name</span></span>   </th><th> <span data-ttu-id="2b21e-344">Waarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-344">Value</span></span>  </th><th>    <span data-ttu-id="2b21e-345">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="2b21e-346">clusternaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-346">cluster_name</span></span> </td><td>    <span data-ttu-id="2b21e-347">'CustomerService'</span><span class="sxs-lookup"><span data-stu-id="2b21e-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="2b21e-348">Hallo-naam die overeenkomt met uw implementatie gebruiken</span><span class="sxs-lookup"><span data-stu-id="2b21e-348">Use hello name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="2b21e-349">listen_address</span></span>    </td><td><span data-ttu-id="2b21e-350">[laat dit veld leeg]</span><span class="sxs-lookup"><span data-stu-id="2b21e-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="2b21e-351">Verwijderen van 'localhost'</span><span class="sxs-lookup"><span data-stu-id="2b21e-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="2b21e-352">rpc_addres</span></span>   </td><td><span data-ttu-id="2b21e-353">[laat dit veld leeg]</span><span class="sxs-lookup"><span data-stu-id="2b21e-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="2b21e-354">Verwijderen van 'localhost'</span><span class="sxs-lookup"><span data-stu-id="2b21e-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-355">zaden</span><span class="sxs-lookup"><span data-stu-id="2b21e-355">seeds</span></span>    </td><td><span data-ttu-id="2b21e-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="2b21e-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="2b21e-357">Lijst met alle Hallo IP-adressen die zijn aangewezen als basis.</span><span class="sxs-lookup"><span data-stu-id="2b21e-357">List of  all hello IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="2b21e-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="2b21e-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="2b21e-360">Dit wordt gebruikt door Hallo NetworkTopologyStrateg voor afleiden Hallo datacenter en Hallo rack Hallo VM</span><span class="sxs-lookup"><span data-stu-id="2b21e-360">This is used by hello NetworkTopologyStrateg for inferring hello data center and hello rack of hello VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-hello-vm-image"></a><span data-ttu-id="2b21e-361">Stap 6: Hallo VM-installatiekopie vastleggen</span><span class="sxs-lookup"><span data-stu-id="2b21e-361">Step 6: Capture hello VM image</span></span>
<span data-ttu-id="2b21e-362">Meld u aan bij Hallo virtuele machine met behulp van Hallo-hostnaam (hk-cas-template.cloudapp.net) en Hallo persoonlijke SSH-sleutel eerder hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-362">Log into hello virtual machine using hello hostname (hk-cas-template.cloudapp.net) and hello SSH private key previously created.</span></span> <span data-ttu-id="2b21e-363">Zie hoe tooUse SSH met Linux op Azure voor meer informatie over hoe toolog bij het gebruik van Hallo opdracht ssh of putty.exe.</span><span class="sxs-lookup"><span data-stu-id="2b21e-363">See How tooUse SSH with Linux on Azure for details on how toolog in using hello command ssh or putty.exe.</span></span>

<span data-ttu-id="2b21e-364">Hallo reeks acties toocapture Hallo installatiekopie volgende uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="2b21e-364">Execute hello following sequence of actions toocapture hello image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="2b21e-365">1. Identiteitsgegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-365">1. Deprovision</span></span>
<span data-ttu-id="2b21e-366">Hallo-opdracht gebruiken ' sudo waagent-deprovision + user ' tooremove specifieke gegevens van virtuele Machine-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="2b21e-366">Use hello command “sudo waagent –deprovision+user” tooremove Virtual Machine instance specific information.</span></span> <span data-ttu-id="2b21e-367">Zie voor [hoe tooCapture virtuele Linux-Machine](capture-image.md) tooUse als een sjabloon om meer details op Hallo installatiekopie vastleggen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-367">See for [How tooCapture a Linux Virtual Machine](capture-image.md) tooUse as a Template more details on hello image capture process.</span></span>

##### <a name="2-shutdown-hello-vm"></a><span data-ttu-id="2b21e-368">2: afsluiten Hallo VM</span><span class="sxs-lookup"><span data-stu-id="2b21e-368">2: Shutdown hello VM</span></span>
<span data-ttu-id="2b21e-369">Zorg ervoor dat de virtuele machine Hallo is geselecteerd en klik op de koppeling voor het afsluiten van Hallo onder opdrachtbalk Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-369">Make sure that hello virtual machine is highlighted and click hello SHUTDOWN link from hello bottom command bar.</span></span>

##### <a name="3-capture-hello-image"></a><span data-ttu-id="2b21e-370">3: Hallo vastleginstallatiekopie</span><span class="sxs-lookup"><span data-stu-id="2b21e-370">3: Capture hello image</span></span>
<span data-ttu-id="2b21e-371">Zorg ervoor dat de virtuele machine Hallo is geselecteerd en klik op de koppeling voor het VASTLEGGEN van Hallo onder opdrachtbalk Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-371">Make sure that hello virtual machine is highlighted and click hello CAPTURE link from hello bottom command bar.</span></span> <span data-ttu-id="2b21e-372">In het volgende scherm hello, geven de naam van een INSTALLATIEKOPIE (bijvoorbeeld hk-cas-2-08-ub-14-04-2014071), beschrijving van afbeelding van toepassing en op Hallo 'selectievakje' markeren toofinish Hallo vastleggen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-372">In hello next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click hello “check” mark toofinish hello CAPTURE process.</span></span>

<span data-ttu-id="2b21e-373">Dit duurt een paar seconden en Hallo installatiekopie moet beschikbaar zijn in de sectie Mijn afbeeldingen van Hallo installatiekopie galerie.</span><span class="sxs-lookup"><span data-stu-id="2b21e-373">This will take a few seconds and hello image should be available in MY IMAGES section of hello image gallery.</span></span> <span data-ttu-id="2b21e-374">Hallo bron-VM wordt automatisch verwijderd nadat het Hallo-installatiekopie wordt vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="2b21e-374">hello source VM will be automatically deleted after hello image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="2b21e-375">Implementatieproces voor één regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-375">Single Region Deployment Process</span></span>
<span data-ttu-id="2b21e-376">**Stap 1: Maak een virtueel netwerk Hallo** Meld u aan bij hello Azure-portal en maak een virtueel netwerk (klassiek) met Hallo kenmerken weergegeven in de volgende tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-376">**Step 1: Create hello Virtual Network** Log into hello Azure portal and create a virtual network (classic) with hello attributes shown in hello following table.</span></span> <span data-ttu-id="2b21e-377">Zie [maken van een virtueel netwerk (klassiek), hello Azure-portal met](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) voor gedetailleerde stappen voor het Hallo-proces.</span><span class="sxs-lookup"><span data-stu-id="2b21e-377">See [Create a virtual network (classic) using hello Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="2b21e-378">De naam van de VM-kenmerk</span><span class="sxs-lookup"><span data-stu-id="2b21e-378">VM Attribute Name</span></span></th><th><span data-ttu-id="2b21e-379">Waarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-379">Value</span></span></th><th><span data-ttu-id="2b21e-380">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-381">Naam</span><span class="sxs-lookup"><span data-stu-id="2b21e-381">Name</span></span></td><td><span data-ttu-id="2b21e-382">vnet-cass-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-383">Regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-383">Region</span></span></td><td><span data-ttu-id="2b21e-384">VS - west</span><span class="sxs-lookup"><span data-stu-id="2b21e-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-385">DNS-Servers</span><span class="sxs-lookup"><span data-stu-id="2b21e-385">DNS Servers</span></span></td><td><span data-ttu-id="2b21e-386">Geen</span><span class="sxs-lookup"><span data-stu-id="2b21e-386">None</span></span></td><td><span data-ttu-id="2b21e-387">Negeer deze melding als er niet met behulp van een DNS-Server</span><span class="sxs-lookup"><span data-stu-id="2b21e-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-388">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="2b21e-388">Address Space</span></span></td><td><span data-ttu-id="2b21e-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="2b21e-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="2b21e-390">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="2b21e-390">Starting IP</span></span></td><td><span data-ttu-id="2b21e-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="2b21e-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="2b21e-392">CIDR</span></span> </td><td><span data-ttu-id="2b21e-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="2b21e-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="2b21e-394">Hallo volgende subnetten toevoegen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-394">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-395">Naam</span><span class="sxs-lookup"><span data-stu-id="2b21e-395">Name</span></span></th><th><span data-ttu-id="2b21e-396">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="2b21e-396">Starting IP</span></span></th><th><span data-ttu-id="2b21e-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="2b21e-397">CIDR</span></span></th><th><span data-ttu-id="2b21e-398">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-399">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-399">web</span></span></td><td><span data-ttu-id="2b21e-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-400">10.1.1.0</span></span></td><td><span data-ttu-id="2b21e-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="2b21e-401">/24 (251)</span></span></td><td><span data-ttu-id="2b21e-402">Subnet voor de webfarm Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-402">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-403">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-403">data</span></span></td><td><span data-ttu-id="2b21e-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-404">10.1.2.0</span></span></td><td><span data-ttu-id="2b21e-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="2b21e-405">/24 (251)</span></span></td><td><span data-ttu-id="2b21e-406">Subnet voor de databaseknooppunten Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-406">Subnet for hello database nodes</span></span></td></tr>
</table>

<span data-ttu-id="2b21e-407">Gegevens en Web subnetten kunnen worden beveiligd via netwerkbeveiligingsgroepen Hallo dekking waarvan buiten het bereik van dit artikel is.</span><span class="sxs-lookup"><span data-stu-id="2b21e-407">Data and Web subnets can be protected through network security groups hello coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="2b21e-408">**Stap 2: Inrichten van virtuele Machines** met Hallo-installatiekopie die eerder is gemaakt, wordt gemaakt na van virtuele machines in de cloud Hallo Hallo server 'hk-c-svc-west' en maak ze afhankelijk van de respectieve subnetten toohello zoals hieronder wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="2b21e-408">**Step 2: Provision Virtual Machines** Using hello image created previously, we will create hello following virtual machines in hello cloud server “hk-c-svc-west” and bind them toohello respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-409">Computernaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-409">Machine Name</span></span>    </th><th><span data-ttu-id="2b21e-410">Subnet</span><span class="sxs-lookup"><span data-stu-id="2b21e-410">Subnet</span></span>    </th><th><span data-ttu-id="2b21e-411">IP-adres</span><span class="sxs-lookup"><span data-stu-id="2b21e-411">IP Address</span></span>    </th><th><span data-ttu-id="2b21e-412">Beschikbaarheidsset</span><span class="sxs-lookup"><span data-stu-id="2b21e-412">Availability set</span></span></th><th><span data-ttu-id="2b21e-413">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="2b21e-413">DC/Rack</span></span></th><th><span data-ttu-id="2b21e-414">Seed?</span><span class="sxs-lookup"><span data-stu-id="2b21e-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-415">HK-c1-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="2b21e-416">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-416">data</span></span>    </td><td><span data-ttu-id="2b21e-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="2b21e-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="2b21e-418">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="2b21e-419">DC = WESTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="2b21e-420">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-421">HK-c2-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="2b21e-422">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-422">data</span></span>    </td><td><span data-ttu-id="2b21e-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="2b21e-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="2b21e-424">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="2b21e-425">DC = WESTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="2b21e-426">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-427">HK-c3-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="2b21e-428">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-428">data</span></span>    </td><td><span data-ttu-id="2b21e-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="2b21e-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="2b21e-430">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="2b21e-431">DC = WESTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="2b21e-432">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-433">HK-c4-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="2b21e-434">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-434">data</span></span>    </td><td><span data-ttu-id="2b21e-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="2b21e-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="2b21e-436">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="2b21e-437">DC = WESTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="2b21e-438">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-439">HK-c5-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="2b21e-440">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-440">data</span></span>    </td><td><span data-ttu-id="2b21e-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="2b21e-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="2b21e-442">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="2b21e-443">DC = WESTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="2b21e-444">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-445">HK-c6-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="2b21e-446">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-446">data</span></span>    </td><td><span data-ttu-id="2b21e-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="2b21e-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="2b21e-448">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="2b21e-449">DC = WESTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="2b21e-450">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-451">HK-c7-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="2b21e-452">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-452">data</span></span>    </td><td><span data-ttu-id="2b21e-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="2b21e-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="2b21e-454">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="2b21e-455">DC = WESTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="2b21e-456">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-457">HK-c8-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="2b21e-458">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-458">data</span></span>    </td><td><span data-ttu-id="2b21e-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="2b21e-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="2b21e-460">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="2b21e-461">DC = WESTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="2b21e-462">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="2b21e-463">HK-w1-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="2b21e-464">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-464">web</span></span>    </td><td><span data-ttu-id="2b21e-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="2b21e-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="2b21e-466">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="2b21e-467">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-468">HK-w2-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="2b21e-469">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-469">web</span></span>    </td><td><span data-ttu-id="2b21e-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="2b21e-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="2b21e-471">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="2b21e-472">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="2b21e-473">Maken van een Hallo boven lijst met virtuele machines moeten Hallo volgende proces:</span><span class="sxs-lookup"><span data-stu-id="2b21e-473">Creation of hello above list of VMs requires hello following process:</span></span>

1. <span data-ttu-id="2b21e-474">Een lege cloudservice maken in een bepaald gebied</span><span class="sxs-lookup"><span data-stu-id="2b21e-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="2b21e-475">Een virtuele machine uit Hallo eerder vastgelegde installatiekopie maken en deze te koppelen toohello virtueel netwerk gemaakt eerder; Herhaal deze stap voor alle Hallo VM 's</span><span class="sxs-lookup"><span data-stu-id="2b21e-475">Create a VM from hello previously captured image and attach it toohello virtual network created previously; repeat this for all hello VMs</span></span>
3. <span data-ttu-id="2b21e-476">Toevoegen van een interne load balancer toohello cloud-service en koppelt u dit subnet toohello "gegevens"</span><span class="sxs-lookup"><span data-stu-id="2b21e-476">Add an internal load balancer toohello cloud service and attach it toohello “data” subnet</span></span>
4. <span data-ttu-id="2b21e-477">Voor elke virtuele machine die eerder is gemaakt, voegt u een eindpunt voor de taakverdeling voor thrift-verkeer via een interne load balancer voor taakverdeling set verbonden toohello eerder hebt gemaakt</span><span class="sxs-lookup"><span data-stu-id="2b21e-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected toohello previously created internal load balancer</span></span>

<span data-ttu-id="2b21e-478">Hallo hierboven proces kan worden uitgevoerd met behulp van de klassieke Azure-portal; Gebruik een Windows-machine (gebruik een VM op Azure als u geen toegang tot tooa Windows-computer), automatisch gebruikt voor het volgende PowerShell-script tooprovision Hallo alle 8 VM's.</span><span class="sxs-lookup"><span data-stu-id="2b21e-478">hello above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access tooa Windows machine), use hello following PowerShell script tooprovision all 8 VMs automatically.</span></span>

<span data-ttu-id="2b21e-479">**Lijst met 1: PowerShell-script voor het inrichten van virtuele machines**</span><span class="sxs-lookup"><span data-stu-id="2b21e-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into hello current Powershell session before proceeding
        #hello process: 1. create Azure Storage account, 2. create virtual network, 3.create hello VM template, 2. crate a list of VMs from hello template

        #fundamental variables - change these tooreflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores hello list of azure vm configuration objects
        #create hello list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add hello thrift endpoint toohello internal load balancer for all hello VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="2b21e-480">**Stap 3: Cassandra op elke virtuele machine configureren**</span><span class="sxs-lookup"><span data-stu-id="2b21e-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="2b21e-481">Meld u aan bij Hallo VM en Voer Hallo volgende stappen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-481">Log into hello VM and perform hello following:</span></span>

* <span data-ttu-id="2b21e-482">$CASS_HOME/conf/cassandra-rackdc.properties toospecify Hallo data center en rack-eigenschappen bewerken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="2b21e-483">Bewerk cassandra.yaml tooconfigure seed-knooppunten zoals hieronder:</span><span class="sxs-lookup"><span data-stu-id="2b21e-483">Edit cassandra.yaml tooconfigure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="2b21e-484">**Stap 4: Hallo virtuele machines starten en Hallo cluster testen**</span><span class="sxs-lookup"><span data-stu-id="2b21e-484">**Step 4: Start hello VMs and test hello cluster**</span></span>

<span data-ttu-id="2b21e-485">Meld u aan bij een van Hallo-knooppunten (bijvoorbeeld hk-c1-west-us) en Voer Hallo toosee Hallo Opdrachtstatus van Hallo-cluster te volgen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-485">Log into one of hello nodes (e.g. hk-c1-west-us) and run hello following command toosee hello status of hello cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="2b21e-486">U ziet Hallo weergave vergelijkbare toohello een hieronder voor een cluster met 8 knooppunten:</span><span class="sxs-lookup"><span data-stu-id="2b21e-486">You should see hello display similar toohello one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-487">Status</span><span class="sxs-lookup"><span data-stu-id="2b21e-487">Status</span></span></th><th><span data-ttu-id="2b21e-488">Adres</span><span class="sxs-lookup"><span data-stu-id="2b21e-488">Address</span></span>    </th><th><span data-ttu-id="2b21e-489">Belasting</span><span class="sxs-lookup"><span data-stu-id="2b21e-489">Load</span></span>    </th><th><span data-ttu-id="2b21e-490">Tokens</span><span class="sxs-lookup"><span data-stu-id="2b21e-490">Tokens</span></span>    </th><th><span data-ttu-id="2b21e-491">Eigenaar is van</span><span class="sxs-lookup"><span data-stu-id="2b21e-491">Owns</span></span> </th><th><span data-ttu-id="2b21e-492">Host-ID</span><span class="sxs-lookup"><span data-stu-id="2b21e-492">Host ID</span></span>    </th><th><span data-ttu-id="2b21e-493">Rack</span><span class="sxs-lookup"><span data-stu-id="2b21e-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="2b21e-494">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-494">UN</span></span>    </td><td><span data-ttu-id="2b21e-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="2b21e-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="2b21e-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-496">87.81 KB</span></span>    </td><td><span data-ttu-id="2b21e-497">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-497">256</span></span>    </td><td><span data-ttu-id="2b21e-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="2b21e-498">38.0%</span></span>    </td><td><span data-ttu-id="2b21e-499">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-499">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-500">rack1</span><span class="sxs-lookup"><span data-stu-id="2b21e-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-501">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-501">UN</span></span>    </td><td><span data-ttu-id="2b21e-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="2b21e-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="2b21e-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-503">41.08 KB</span></span>    </td><td><span data-ttu-id="2b21e-504">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-504">256</span></span>    </td><td><span data-ttu-id="2b21e-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="2b21e-505">68.9%</span></span>    </td><td><span data-ttu-id="2b21e-506">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-506">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-507">rack1</span><span class="sxs-lookup"><span data-stu-id="2b21e-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-508">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-508">UN</span></span>    </td><td><span data-ttu-id="2b21e-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="2b21e-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="2b21e-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-510">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-511">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-511">256</span></span>    </td><td><span data-ttu-id="2b21e-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-512">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-513">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-513">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-514">rack2</span><span class="sxs-lookup"><span data-stu-id="2b21e-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-515">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-515">UN</span></span>    </td><td><span data-ttu-id="2b21e-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="2b21e-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="2b21e-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-517">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-518">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-518">256</span></span>    </td><td><span data-ttu-id="2b21e-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-519">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-520">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-520">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-521">rack2</span><span class="sxs-lookup"><span data-stu-id="2b21e-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-522">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-522">UN</span></span>    </td><td><span data-ttu-id="2b21e-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="2b21e-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="2b21e-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-524">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-525">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-525">256</span></span>    </td><td><span data-ttu-id="2b21e-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-526">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-527">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-527">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-528">rack3</span><span class="sxs-lookup"><span data-stu-id="2b21e-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-529">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-529">UN</span></span>    </td><td><span data-ttu-id="2b21e-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="2b21e-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="2b21e-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-531">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-532">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-532">256</span></span>    </td><td><span data-ttu-id="2b21e-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-533">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-534">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-534">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-535">rack3</span><span class="sxs-lookup"><span data-stu-id="2b21e-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-536">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-536">UN</span></span>    </td><td><span data-ttu-id="2b21e-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="2b21e-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="2b21e-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-538">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-539">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-539">256</span></span>    </td><td><span data-ttu-id="2b21e-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-540">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-541">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-541">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-542">rack4</span><span class="sxs-lookup"><span data-stu-id="2b21e-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="2b21e-543">ONGEDAAN MAKEN</span><span class="sxs-lookup"><span data-stu-id="2b21e-543">UN</span></span>    </td><td><span data-ttu-id="2b21e-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="2b21e-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="2b21e-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="2b21e-545">55.29 KB</span></span>    </td><td><span data-ttu-id="2b21e-546">256</span><span class="sxs-lookup"><span data-stu-id="2b21e-546">256</span></span>    </td><td><span data-ttu-id="2b21e-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="2b21e-547">68.8%</span></span>    </td><td><span data-ttu-id="2b21e-548">GUID (verwijderd)</span><span class="sxs-lookup"><span data-stu-id="2b21e-548">Guid (removed)</span></span></td><td><span data-ttu-id="2b21e-549">rack4</span><span class="sxs-lookup"><span data-stu-id="2b21e-549">rack4</span></span></td></tr>
</table>

## <a name="test-hello-single-region-cluster"></a><span data-ttu-id="2b21e-550">Test Hallo één regio-Cluster</span><span class="sxs-lookup"><span data-stu-id="2b21e-550">Test hello Single Region Cluster</span></span>
<span data-ttu-id="2b21e-551">Volgende stappen tootest Hallo cluster Hallo gebruiken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-551">Use hello following steps tootest hello cluster:</span></span>

1. <span data-ttu-id="2b21e-552">Hallo IP-adres van Hallo interne load balancer (bijvoorbeeld met de Hallo Powershell-opdracht Get-AzureInternalLoadbalancer commandlet, ophalen  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="2b21e-552">Using hello Powershell command Get-AzureInternalLoadbalancer commandlet, obtain hello IP address of hello internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="2b21e-553">Hallo-syntaxis van Hallo-opdracht wordt hieronder weergegeven: Get-AzureLoadbalancer – ServiceName 'hk-c-svc-west-us' [Hallo geeft details weer van Hallo interne load balancer samen met het IP-adres]</span><span class="sxs-lookup"><span data-stu-id="2b21e-553">hello syntax of hello command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays hello details of hello internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="2b21e-554">Meld u aan bij de webfarm Hallo VM (bijvoorbeeld hk-w1-west-us) met Putty of ssh</span><span class="sxs-lookup"><span data-stu-id="2b21e-554">Log into hello web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="2b21e-555">Uitvoeren van $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="2b21e-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="2b21e-556">Gebruik Hallo CQL opdrachten tooverify volgen als Hallo cluster werkt:</span><span class="sxs-lookup"><span data-stu-id="2b21e-556">Use hello following CQL commands tooverify if hello cluster is working:</span></span>
   
     <span data-ttu-id="2b21e-557">Maak met KEYSPACE customers_ks met replicatie = {'class': 'SimpleStrategy', 'replication_factor': 3};   Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');</span><span class="sxs-lookup"><span data-stu-id="2b21e-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="2b21e-558">Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="2b21e-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="2b21e-559">U ziet een scherm zoals Hallo hieronder:</span><span class="sxs-lookup"><span data-stu-id="2b21e-559">You should see a display like hello one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="2b21e-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="2b21e-560">customer_id</span></span> </th><th> <span data-ttu-id="2b21e-561">Voornaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-561">firstname</span></span> </th><th> <span data-ttu-id="2b21e-562">Achternaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="2b21e-563">1</span><span class="sxs-lookup"><span data-stu-id="2b21e-563">1</span></span> </td><td> <span data-ttu-id="2b21e-564">John</span><span class="sxs-lookup"><span data-stu-id="2b21e-564">John</span></span> </td><td> <span data-ttu-id="2b21e-565">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="2b21e-566">2</span><span class="sxs-lookup"><span data-stu-id="2b21e-566">2</span></span> </td><td> <span data-ttu-id="2b21e-567">ANS</span><span class="sxs-lookup"><span data-stu-id="2b21e-567">Jane</span></span> </td><td> <span data-ttu-id="2b21e-568">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="2b21e-569">Houd er rekening mee dat Hallo keyspace gemaakt in stap 4 SimpleStrategy gebruikt met een replication_factor van 3.</span><span class="sxs-lookup"><span data-stu-id="2b21e-569">Please note that hello keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="2b21e-570">SimpleStrategy wordt aanbevolen voor één data center-implementaties terwijl NetworkTopologyStrategy voor meerdere data center-implementaties.</span><span class="sxs-lookup"><span data-stu-id="2b21e-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="2b21e-571">Een replication_factor van 3, tolerantie voor knooppuntfouten krijgt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="2b21e-572"><a id="tworegion"></a>Meerdere landen/regio-implementatieproces</span><span class="sxs-lookup"><span data-stu-id="2b21e-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="2b21e-573">Zal gebruikmaken van de implementatie van Hallo één regio is voltooid en herhaal Hallo dezelfde verwerken voor het installeren van de tweede regio Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-573">Will leverage hello single region deployment completed and repeat hello same process for installing hello second region.</span></span> <span data-ttu-id="2b21e-574">Hallo belangrijkste verschil tussen één Hallo en distributie naar meerdere regio is Hallo VPN-tunnel instellen voor de communicatie tussen regio; We beginnen met netwerkinstallatie hello, Hallo virtuele machines inrichten en Cassandra configureren.</span><span class="sxs-lookup"><span data-stu-id="2b21e-574">hello key difference between hello single and multiple region deployment is hello VPN tunnel setup for inter-region communication; we will start with hello network installation, provision hello VMs and configure Cassandra.</span></span>

### <a name="step-1-create-hello-virtual-network-at-hello-2nd-region"></a><span data-ttu-id="2b21e-575">Stap 1: Hallo virtueel netwerk maken op Hallo 2e regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-575">Step 1: Create hello Virtual Network at hello 2nd Region</span></span>
<span data-ttu-id="2b21e-576">Meld u aan bij de klassieke Azure-portal Hallo en maak een virtueel netwerk met Hallo kenmerken weergeven in de tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-576">Log into hello Azure classic portal and create a Virtual Network with hello attributes show in hello table.</span></span> <span data-ttu-id="2b21e-577">Zie [Cloud-Only virtueel netwerk configureren in de klassieke Azure-portal Hallo](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) voor gedetailleerde stappen voor het Hallo-proces.</span><span class="sxs-lookup"><span data-stu-id="2b21e-577">See [Configure a Cloud-Only Virtual Network in hello Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="2b21e-578">Naam van kenmerk</span><span class="sxs-lookup"><span data-stu-id="2b21e-578">Attribute Name</span></span>    </th><th><span data-ttu-id="2b21e-579">Waarde</span><span class="sxs-lookup"><span data-stu-id="2b21e-579">Value</span></span>    </th><th><span data-ttu-id="2b21e-580">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-581">Naam</span><span class="sxs-lookup"><span data-stu-id="2b21e-581">Name</span></span>    </td><td><span data-ttu-id="2b21e-582">vnet-cass-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-583">Regio</span><span class="sxs-lookup"><span data-stu-id="2b21e-583">Region</span></span>    </td><td><span data-ttu-id="2b21e-584">VS - oost</span><span class="sxs-lookup"><span data-stu-id="2b21e-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-585">DNS-Servers</span><span class="sxs-lookup"><span data-stu-id="2b21e-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="2b21e-586">Negeer deze melding als er niet met behulp van een DNS-Server</span><span class="sxs-lookup"><span data-stu-id="2b21e-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-587">Een punt-naar-site-VPN configureren</span><span class="sxs-lookup"><span data-stu-id="2b21e-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="2b21e-588">Negeer deze melding</span><span class="sxs-lookup"><span data-stu-id="2b21e-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-589">Configureer een site-to-site VPN</span><span class="sxs-lookup"><span data-stu-id="2b21e-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="2b21e-590">Negeer deze melding</span><span class="sxs-lookup"><span data-stu-id="2b21e-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-591">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="2b21e-591">Address Space</span></span>    </td><td><span data-ttu-id="2b21e-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="2b21e-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-593">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="2b21e-593">Starting IP</span></span>    </td><td><span data-ttu-id="2b21e-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="2b21e-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="2b21e-595">CIDR</span></span>    </td><td><span data-ttu-id="2b21e-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="2b21e-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="2b21e-597">Hallo volgende subnetten toevoegen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-597">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-598">Naam</span><span class="sxs-lookup"><span data-stu-id="2b21e-598">Name</span></span>    </th><th><span data-ttu-id="2b21e-599">IP-beginadres</span><span class="sxs-lookup"><span data-stu-id="2b21e-599">Starting IP</span></span>    </th><th><span data-ttu-id="2b21e-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="2b21e-600">CIDR</span></span>    </th><th><span data-ttu-id="2b21e-601">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-602">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-602">web</span></span>    </td><td><span data-ttu-id="2b21e-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="2b21e-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="2b21e-604">/24 (251)</span></span>    </td><td><span data-ttu-id="2b21e-605">Subnet voor de webfarm Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-605">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-606">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-606">data</span></span>    </td><td><span data-ttu-id="2b21e-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="2b21e-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="2b21e-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="2b21e-608">/24 (251)</span></span>    </td><td><span data-ttu-id="2b21e-609">Subnet voor de databaseknooppunten Hallo</span><span class="sxs-lookup"><span data-stu-id="2b21e-609">Subnet for hello database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="2b21e-610">Stap 2: Lokale netwerken maken</span><span class="sxs-lookup"><span data-stu-id="2b21e-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="2b21e-611">Een lokaal netwerk in Azure virtuele netwerken is een proxy-adresruimte die is toegewezen tooa externe site, met inbegrip van een privécloud of een andere Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="2b21e-611">A Local Network in Azure virtual networking is a proxy address space that maps tooa remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="2b21e-612">Deze adresruimte proxy is gebonden tooa externe gateway voor routering netwerk toohello rechts networking bestemmingen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-612">This proxy address space is bound tooa remote gateway for routing network toohello right networking destinations.</span></span> <span data-ttu-id="2b21e-613">Zie [configureren van een VNet tooVNet verbinding](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) voor Hallo instructies voor het VNET-naar-VNET-verbinding tot stand brengen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-613">See [Configure a VNet tooVNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for hello instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="2b21e-614">Maak twee lokale netwerken per Hallo volgende details:</span><span class="sxs-lookup"><span data-stu-id="2b21e-614">Create two local networks per hello following details:</span></span>

| <span data-ttu-id="2b21e-615">Netwerknaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-615">Network Name</span></span> | <span data-ttu-id="2b21e-616">VPN-Gateway-adres</span><span class="sxs-lookup"><span data-stu-id="2b21e-616">VPN Gateway Address</span></span> | <span data-ttu-id="2b21e-617">Adresruimte</span><span class="sxs-lookup"><span data-stu-id="2b21e-617">Address Space</span></span> | <span data-ttu-id="2b21e-618">Opmerkingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2b21e-619">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="2b21e-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="2b21e-620">23.1.1.1</span></span> |<span data-ttu-id="2b21e-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="2b21e-621">10.2.0.0/16</span></span> |<span data-ttu-id="2b21e-622">Geef een tijdelijke aanduiding gatewayadres tijdens het maken van Hallo lokale netwerk.</span><span class="sxs-lookup"><span data-stu-id="2b21e-622">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="2b21e-623">Hallo echte gatewayadres wordt gevuld wanneer Hallo gateway is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-623">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="2b21e-624">Zorg ervoor dat Hallo-adresruimte exact overeenkomt met Hallo respectieve externe VNET; in dit geval hello VNET gemaakt in Hallo regio VS-Oost.</span><span class="sxs-lookup"><span data-stu-id="2b21e-624">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello East US region.</span></span> |
| <span data-ttu-id="2b21e-625">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="2b21e-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="2b21e-626">23.2.2.2</span></span> |<span data-ttu-id="2b21e-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="2b21e-627">10.1.0.0/16</span></span> |<span data-ttu-id="2b21e-628">Geef een tijdelijke aanduiding gatewayadres tijdens het maken van Hallo lokale netwerk.</span><span class="sxs-lookup"><span data-stu-id="2b21e-628">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="2b21e-629">Hallo echte gatewayadres wordt gevuld wanneer Hallo gateway is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-629">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="2b21e-630">Zorg ervoor dat Hallo-adresruimte exact overeenkomt met Hallo respectieve externe VNET; in dit geval hello VNET gemaakt in Hallo regio VS-West.</span><span class="sxs-lookup"><span data-stu-id="2b21e-630">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello West US region.</span></span> |

### <a name="step-3-map-local-network-toohello-respective-vnets"></a><span data-ttu-id="2b21e-631">Stap 3: Kaart "Local" netwerk toohello respectieve VNETs</span><span class="sxs-lookup"><span data-stu-id="2b21e-631">Step 3: Map “Local” network toohello respective VNETs</span></span>
<span data-ttu-id="2b21e-632">Van Hallo klassieke Azure-portal, selecteer elke vnet, klik op 'Configureren', 'Connect toohello lokale netwerk' controleren, en selecteer Hallo lokale netwerken per Hallo volgende details:</span><span class="sxs-lookup"><span data-stu-id="2b21e-632">From hello Azure classic portal, select each vnet, click “Configure”, check “Connect toohello local network”, and select hello Local Networks per hello following details:</span></span>

| <span data-ttu-id="2b21e-633">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="2b21e-633">Virtual Network</span></span> | <span data-ttu-id="2b21e-634">Lokale netwerk</span><span class="sxs-lookup"><span data-stu-id="2b21e-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="2b21e-635">HK-vnet-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-635">hk-vnet-west-us</span></span> |<span data-ttu-id="2b21e-636">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="2b21e-637">HK-vnet-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-637">hk-vnet-east-us</span></span> |<span data-ttu-id="2b21e-638">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="2b21e-639">Stap 4: Gateways op VNET1 en VNET2 maken</span><span class="sxs-lookup"><span data-stu-id="2b21e-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="2b21e-640">Hallo-dashboard van de virtuele netwerken van beide hello, klik op GATEWAY maken waarmee Hallo VPN-gateway inrichtingsproces wordt geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="2b21e-640">From hello dashboard of both hello virtual networks, click CREATE GATEWAY which will trigger hello VPN gateway provisioning process.</span></span> <span data-ttu-id="2b21e-641">Na een paar minuten Hallo dashboard van elke virtuele netwerk moeten de werkelijke gatewayadres Hallo worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2b21e-641">After a few minutes hello dashboard of each virtual network should display hello actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-hello-respective-gateway-addresses"></a><span data-ttu-id="2b21e-642">Stap 5: Update "Local" netwerken met Hallo respectieve ' ' gatewayadressen</span><span class="sxs-lookup"><span data-stu-id="2b21e-642">Step 5: Update “Local” networks with hello respective “Gateway” addresses</span></span>
<span data-ttu-id="2b21e-643">Beide gateways Hallo lokale netwerken tooreplace Hallo tijdelijke aanduiding voor gateway IP-adres met Hallo echte IP-adres van Hallo alleen ingericht bewerken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-643">Edit both hello local networks tooreplace hello placeholder gateway IP address with hello real IP address of hello just provisioned gateways.</span></span> <span data-ttu-id="2b21e-644">Gebruik Hallo toewijzing te volgen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-644">Use hello following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="2b21e-645">Lokale netwerk</span><span class="sxs-lookup"><span data-stu-id="2b21e-645">Local Network</span></span>    </th><th><span data-ttu-id="2b21e-646">Gateway voor een virtueel netwerk</span><span class="sxs-lookup"><span data-stu-id="2b21e-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="2b21e-647">HK-lnet-map-to-East-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="2b21e-648">De gateway van hk-vnet-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="2b21e-649">HK-lnet-map-to-West-US</span><span class="sxs-lookup"><span data-stu-id="2b21e-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="2b21e-650">De gateway van hk-vnet-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-hello-shared-key"></a><span data-ttu-id="2b21e-651">Stap 6: Update Hallo gedeelde sleutel</span><span class="sxs-lookup"><span data-stu-id="2b21e-651">Step 6: Update hello shared key</span></span>
<span data-ttu-id="2b21e-652">Gebruik Hallo volgende Powershell-script tooupdate Hallo IPSec-sleutel van elke VPN-gateway [Hallo verjaardagen sleutel gebruiken voor beide gateways Hallo]: Set-AzureVNetGatewayKey - VNetName hk-vnet-Oost-ons - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Set-AzureVNetGatewayKey - VNetName hk-vnet-west-ons - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="2b21e-652">Use hello following Powershell script tooupdate hello IPSec key of each VPN gateway [use hello sake key for both hello gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-hello-vnet-to-vnet-connection"></a><span data-ttu-id="2b21e-653">Stap 7: Hallo VNET-naar-VNET-verbinding maken</span><span class="sxs-lookup"><span data-stu-id="2b21e-653">Step 7: Establish hello VNET-to-VNET connection</span></span>
<span data-ttu-id="2b21e-654">Gebruik vanaf Hallo klassieke Azure-portal, Hallo 'DASHBOARD' menu van zowel Hallo virtuele netwerken tooestablish gateway-naar-gateway-verbinding.</span><span class="sxs-lookup"><span data-stu-id="2b21e-654">From hello Azure classic portal, use hello “DASHBOARD” menu of both hello virtual networks tooestablish gateway-to-gateway connection.</span></span> <span data-ttu-id="2b21e-655">Hallo 'CONNECT' menu-items in Hallo onderste werkbalk gebruiken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-655">Use hello “CONNECT” menu items in hello bottom toolbar.</span></span> <span data-ttu-id="2b21e-656">Na een paar minuten moet Hallo dashboard Hallo Verbindingsdetails grafisch weergeven.</span><span class="sxs-lookup"><span data-stu-id="2b21e-656">After a few minutes hello dashboard should display hello connection details graphically.</span></span>

### <a name="step-8-create-hello-virtual-machines-in-region-2"></a><span data-ttu-id="2b21e-657">Stap 8: Maak Hallo virtuele machines in regio #2</span><span class="sxs-lookup"><span data-stu-id="2b21e-657">Step 8: Create hello virtual machines in region #2</span></span>
<span data-ttu-id="2b21e-658">Hallo Ubuntu installatiekopie maken zoals beschreven in de regio #1 implementatie door de volgende Hallo dezelfde stappen of kopieer Hallo installatiekopie VHD-bestand toohello Azure storage-account zich in de regio #2 en Hallo installatiekopie maken.</span><span class="sxs-lookup"><span data-stu-id="2b21e-658">Create hello Ubuntu image as described in region #1 deployment by following hello same steps or copy hello image VHD file toohello Azure storage account located in region #2 and create hello image.</span></span> <span data-ttu-id="2b21e-659">Deze afbeelding niet gebruiken en maken van de volgende lijst met virtuele machines in een nieuwe cloudservice hk-c-svc-Oost-ons Hallo:</span><span class="sxs-lookup"><span data-stu-id="2b21e-659">Use this image and create hello following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="2b21e-660">Computernaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-660">Machine Name</span></span> | <span data-ttu-id="2b21e-661">Subnet</span><span class="sxs-lookup"><span data-stu-id="2b21e-661">Subnet</span></span> | <span data-ttu-id="2b21e-662">IP-adres</span><span class="sxs-lookup"><span data-stu-id="2b21e-662">IP Address</span></span> | <span data-ttu-id="2b21e-663">Beschikbaarheidsset</span><span class="sxs-lookup"><span data-stu-id="2b21e-663">Availability set</span></span> | <span data-ttu-id="2b21e-664">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="2b21e-664">DC/Rack</span></span> | <span data-ttu-id="2b21e-665">Seed?</span><span class="sxs-lookup"><span data-stu-id="2b21e-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="2b21e-666">HK-c1-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-666">hk-c1-east-us</span></span> |<span data-ttu-id="2b21e-667">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-667">data</span></span> |<span data-ttu-id="2b21e-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="2b21e-668">10.2.2.4</span></span> |<span data-ttu-id="2b21e-669">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-669">hk-c-aset-1</span></span> |<span data-ttu-id="2b21e-670">DC = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="2b21e-671">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-671">Yes</span></span> |
| <span data-ttu-id="2b21e-672">HK-c2-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-672">hk-c2-east-us</span></span> |<span data-ttu-id="2b21e-673">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-673">data</span></span> |<span data-ttu-id="2b21e-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="2b21e-674">10.2.2.5</span></span> |<span data-ttu-id="2b21e-675">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-675">hk-c-aset-1</span></span> |<span data-ttu-id="2b21e-676">DC = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="2b21e-677">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-677">No</span></span> |
| <span data-ttu-id="2b21e-678">HK-c3-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-678">hk-c3-east-us</span></span> |<span data-ttu-id="2b21e-679">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-679">data</span></span> |<span data-ttu-id="2b21e-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="2b21e-680">10.2.2.6</span></span> |<span data-ttu-id="2b21e-681">HK-c-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-681">hk-c-aset-1</span></span> |<span data-ttu-id="2b21e-682">DC = EASTUS rack rack2 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="2b21e-683">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-683">Yes</span></span> |
| <span data-ttu-id="2b21e-684">HK-c5-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-684">hk-c5-east-us</span></span> |<span data-ttu-id="2b21e-685">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-685">data</span></span> |<span data-ttu-id="2b21e-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="2b21e-686">10.2.2.8</span></span> |<span data-ttu-id="2b21e-687">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-687">hk-c-aset-2</span></span> |<span data-ttu-id="2b21e-688">DC = EASTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="2b21e-689">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-689">Yes</span></span> |
| <span data-ttu-id="2b21e-690">HK-c6-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-690">hk-c6-east-us</span></span> |<span data-ttu-id="2b21e-691">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-691">data</span></span> |<span data-ttu-id="2b21e-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="2b21e-692">10.2.2.9</span></span> |<span data-ttu-id="2b21e-693">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-693">hk-c-aset-2</span></span> |<span data-ttu-id="2b21e-694">DC = EASTUS rack rack3 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="2b21e-695">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-695">No</span></span> |
| <span data-ttu-id="2b21e-696">HK-c7-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-696">hk-c7-east-us</span></span> |<span data-ttu-id="2b21e-697">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-697">data</span></span> |<span data-ttu-id="2b21e-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="2b21e-698">10.2.2.10</span></span> |<span data-ttu-id="2b21e-699">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-699">hk-c-aset-2</span></span> |<span data-ttu-id="2b21e-700">DC = EASTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="2b21e-701">Ja</span><span class="sxs-lookup"><span data-stu-id="2b21e-701">Yes</span></span> |
| <span data-ttu-id="2b21e-702">HK-c8-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-702">hk-c8-east-us</span></span> |<span data-ttu-id="2b21e-703">Gegevens</span><span class="sxs-lookup"><span data-stu-id="2b21e-703">data</span></span> |<span data-ttu-id="2b21e-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="2b21e-704">10.2.2.11</span></span> |<span data-ttu-id="2b21e-705">HK-c-uit-2</span><span class="sxs-lookup"><span data-stu-id="2b21e-705">hk-c-aset-2</span></span> |<span data-ttu-id="2b21e-706">DC = EASTUS rack rack4 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="2b21e-707">Nee</span><span class="sxs-lookup"><span data-stu-id="2b21e-707">No</span></span> |
| <span data-ttu-id="2b21e-708">HK-w1-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-708">hk-w1-east-us</span></span> |<span data-ttu-id="2b21e-709">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-709">web</span></span> |<span data-ttu-id="2b21e-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="2b21e-710">10.2.1.4</span></span> |<span data-ttu-id="2b21e-711">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-711">hk-w-aset-1</span></span> |<span data-ttu-id="2b21e-712">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-712">N/A</span></span> |<span data-ttu-id="2b21e-713">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-713">N/A</span></span> |
| <span data-ttu-id="2b21e-714">HK-w2-Oost-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-714">hk-w2-east-us</span></span> |<span data-ttu-id="2b21e-715">Web</span><span class="sxs-lookup"><span data-stu-id="2b21e-715">web</span></span> |<span data-ttu-id="2b21e-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="2b21e-716">10.2.1.5</span></span> |<span data-ttu-id="2b21e-717">HK-w-uit-1</span><span class="sxs-lookup"><span data-stu-id="2b21e-717">hk-w-aset-1</span></span> |<span data-ttu-id="2b21e-718">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-718">N/A</span></span> |<span data-ttu-id="2b21e-719">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="2b21e-719">N/A</span></span> |

<span data-ttu-id="2b21e-720">Volg dezelfde Hallo instructies als regio #1 maar 10.2.xxx.xxx-adresruimte wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="2b21e-720">Follow hello same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="2b21e-721">Stap 9: Cassandra op elke virtuele machine configureren</span><span class="sxs-lookup"><span data-stu-id="2b21e-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="2b21e-722">Meld u aan bij Hallo VM en Voer Hallo volgende stappen:</span><span class="sxs-lookup"><span data-stu-id="2b21e-722">Log into hello VM and perform hello following:</span></span>

1. <span data-ttu-id="2b21e-723">$CASS_HOME/conf/cassandra-rackdc.properties toospecify Hallo data center en rack eigenschappen bewerken in Hallo indeling: dc = EASTUS rack rack1 =</span><span class="sxs-lookup"><span data-stu-id="2b21e-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties in hello format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="2b21e-724">Cassandra.yaml tooconfigure seed-knooppunten bewerken: zaden: '10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10'</span><span class="sxs-lookup"><span data-stu-id="2b21e-724">Edit cassandra.yaml tooconfigure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="2b21e-725">Stap 10: Cassandra starten</span><span class="sxs-lookup"><span data-stu-id="2b21e-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="2b21e-726">Meld u aan bij elke virtuele machine en Cassandra starten op de achtergrond Hallo door het uitvoeren van de volgende opdracht Hallo: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="2b21e-726">Log into each VM and start Cassandra in hello background by running hello following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-hello-multi-region-cluster"></a><span data-ttu-id="2b21e-727">Test Hallo meerdere landen/regio-Cluster</span><span class="sxs-lookup"><span data-stu-id="2b21e-727">Test hello Multi-Region Cluster</span></span>
<span data-ttu-id="2b21e-728">Nu is Cassandra geïmplementeerde too16 knooppunten met 8 knooppunten in elke Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="2b21e-728">By now Cassandra has been deployed too16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="2b21e-729">Deze knooppunten zijn in dezelfde algemene clusternaam Hallo en Hallo seed knooppuntconfiguratie cluster Hallo.</span><span class="sxs-lookup"><span data-stu-id="2b21e-729">These nodes are in hello same cluster by virtue of hello common cluster name and hello seed node configuration.</span></span> <span data-ttu-id="2b21e-730">Hallo proces tootest Hallo cluster volgende gebruiken:</span><span class="sxs-lookup"><span data-stu-id="2b21e-730">Use hello following process tootest hello cluster:</span></span>

### <a name="step-1-get-hello-internal-load-balancer-ip-for-both-hello-regions-using-powershell"></a><span data-ttu-id="2b21e-731">Stap 1: U Hallo interne load balancer IP-adres voor beide Hallo-regio's met behulp van PowerShell</span><span class="sxs-lookup"><span data-stu-id="2b21e-731">Step 1: Get hello internal load balancer IP for both hello regions using PowerShell</span></span>
* <span data-ttu-id="2b21e-732">Get-AzureInternalLoadbalancer - ServiceName 'hk-c-svc-west-us'</span><span class="sxs-lookup"><span data-stu-id="2b21e-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="2b21e-733">Get-AzureInternalLoadbalancer - ServiceName 'hk-c-svc-Oost-us'</span><span class="sxs-lookup"><span data-stu-id="2b21e-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="2b21e-734">Houd er rekening mee Hallo IP-adressen (bijvoorbeeld - 10.1.2.101, Oost - west 10.2.2.101) weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2b21e-734">Note hello IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-hello-following-in-hello-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="2b21e-735">Stap 2: Hallo volgende in de regio west Hallo uitvoeren nadat de aanmelding bij hk-w1-west-ons</span><span class="sxs-lookup"><span data-stu-id="2b21e-735">Step 2: Execute hello following in hello west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="2b21e-736">Uitvoeren van $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="2b21e-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="2b21e-737">Hallo na CQL opdrachten uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="2b21e-737">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="2b21e-738">Maak met KEYSPACE customers_ks met replicatie = {'class': 'NetworkToplogyStrategy', 'WESTUS': 3, EASTUS: 3};   Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');   Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="2b21e-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="2b21e-739">U ziet een scherm zoals Hallo hieronder:</span><span class="sxs-lookup"><span data-stu-id="2b21e-739">You should see a display like hello one below:</span></span>

| <span data-ttu-id="2b21e-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="2b21e-740">customer_id</span></span> | <span data-ttu-id="2b21e-741">Voornaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-741">firstname</span></span> | <span data-ttu-id="2b21e-742">Achternaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2b21e-743">1</span><span class="sxs-lookup"><span data-stu-id="2b21e-743">1</span></span> |<span data-ttu-id="2b21e-744">John</span><span class="sxs-lookup"><span data-stu-id="2b21e-744">John</span></span> |<span data-ttu-id="2b21e-745">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-745">Doe</span></span> |
| <span data-ttu-id="2b21e-746">2</span><span class="sxs-lookup"><span data-stu-id="2b21e-746">2</span></span> |<span data-ttu-id="2b21e-747">ANS</span><span class="sxs-lookup"><span data-stu-id="2b21e-747">Jane</span></span> |<span data-ttu-id="2b21e-748">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-748">Doe</span></span> |

### <a name="step-3-execute-hello-following-in-hello-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="2b21e-749">Stap 3: Voor het uitvoeren van Hallo volgende in de regio Oost Hallo na de aanmelding bij hk-w1-Oost-ons:</span><span class="sxs-lookup"><span data-stu-id="2b21e-749">Step 3: Execute hello following in hello east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="2b21e-750">Uitvoeren van $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="2b21e-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="2b21e-751">Hallo na CQL opdrachten uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="2b21e-751">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="2b21e-752">Gebruik customers_ks;   MAKEN van tabel Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INVOEGEN in Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INVOEGEN in Customers(customer_id, firstname, lastname) waarden (2, 'ANS', 'De Vries');   Selecteer * van klanten;</span><span class="sxs-lookup"><span data-stu-id="2b21e-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="2b21e-753">U ziet Hallo dezelfde zoals te zien voor de regio West Hallo weergeven:</span><span class="sxs-lookup"><span data-stu-id="2b21e-753">You should see hello same display as seen for hello West region:</span></span>

| <span data-ttu-id="2b21e-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="2b21e-754">customer_id</span></span> | <span data-ttu-id="2b21e-755">Voornaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-755">firstname</span></span> | <span data-ttu-id="2b21e-756">Achternaam</span><span class="sxs-lookup"><span data-stu-id="2b21e-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2b21e-757">1</span><span class="sxs-lookup"><span data-stu-id="2b21e-757">1</span></span> |<span data-ttu-id="2b21e-758">John</span><span class="sxs-lookup"><span data-stu-id="2b21e-758">John</span></span> |<span data-ttu-id="2b21e-759">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-759">Doe</span></span> |
| <span data-ttu-id="2b21e-760">2</span><span class="sxs-lookup"><span data-stu-id="2b21e-760">2</span></span> |<span data-ttu-id="2b21e-761">ANS</span><span class="sxs-lookup"><span data-stu-id="2b21e-761">Jane</span></span> |<span data-ttu-id="2b21e-762">De Vries</span><span class="sxs-lookup"><span data-stu-id="2b21e-762">Doe</span></span> |

<span data-ttu-id="2b21e-763">Enkele meer invoegingen uitvoeren en Zie dat de gerepliceerde toowest krijgen-ons deel uit van het Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="2b21e-763">Execute a few more inserts and see that those get replicated toowest-us part of hello cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="2b21e-764">Cassandra Testcluster met Node.js</span><span class="sxs-lookup"><span data-stu-id="2b21e-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="2b21e-765">Eerder in Hallo 'web' laag met behulp van een virtuele Linux-machines Hallo gemaakt, wordt een eenvoudige Node.js tooread Hallo eerder ingevoegd scriptgegevens wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="2b21e-765">Using one of hello Linux VMs crated in hello "web" tier previously, we will execute a simple Node.js script tooread hello previously inserted data</span></span>

<span data-ttu-id="2b21e-766">**Stap 1: Node.js en Cassandra-Client installeren**</span><span class="sxs-lookup"><span data-stu-id="2b21e-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="2b21e-767">Installeer Node.js en npm</span><span class="sxs-lookup"><span data-stu-id="2b21e-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="2b21e-768">Knooppunt pakket 'cassandra-client' installeren met npm</span><span class="sxs-lookup"><span data-stu-id="2b21e-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="2b21e-769">Hallo volgende script op Hallo shell-prompt waarin Hallo json-tekenreeks van de gegevens opgehaald Hallo uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="2b21e-769">Execute hello following script at hello shell prompt which displays hello json string of hello retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed toocreate Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed toocreate column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert hello record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read hello two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue hello code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="2b21e-770">Conclusie</span><span class="sxs-lookup"><span data-stu-id="2b21e-770">Conclusion</span></span>
<span data-ttu-id="2b21e-771">Microsoft Azure is een flexibel platform waarmee Hallo uitvoeren van zowel Microsoft als open-sourcesoftware zoals blijkt uit deze oefening.</span><span class="sxs-lookup"><span data-stu-id="2b21e-771">Microsoft Azure is a flexible platform that allows hello running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="2b21e-772">Maximaal beschikbare Cassandra clusters kunnen worden geïmplementeerd op één datacenter via Hallo Hallo clusterknooppunten worden verspreid over meerdere domeinen met fouten.</span><span class="sxs-lookup"><span data-stu-id="2b21e-772">Highly available Cassandra clusters can be deployed on a single data center through hello spreading of hello cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="2b21e-773">Cassandra clusters kunnen ook worden geïmplementeerd in meerdere geografisch verafgelegen Azure-regio's voor noodherstel bewijs systemen.</span><span class="sxs-lookup"><span data-stu-id="2b21e-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="2b21e-774">Azure en Cassandra samen kunnen Hallo constructie van zeer schaalbaar, maximaal beschikbare en noodherstel herstelbare cloudservices die nodig is door de hedendaagse internet schalen services.</span><span class="sxs-lookup"><span data-stu-id="2b21e-774">Azure and Cassandra together enables hello construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="2b21e-775">Verwijzingen</span><span class="sxs-lookup"><span data-stu-id="2b21e-775">References</span></span>
* [<span data-ttu-id="2b21e-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="2b21e-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="2b21e-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="2b21e-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="2b21e-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="2b21e-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

