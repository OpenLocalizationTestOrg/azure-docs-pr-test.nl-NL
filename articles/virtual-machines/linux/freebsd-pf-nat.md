---
title: FreeBSD van pakketfilter gebruiken om u te maken van een firewall in Azure | Microsoft Docs
description: Informatie over het implementeren van een NAT-firewall met behulp van FreeBSD PF in Azure.
services: virtual-machines-linux
documentationcenter: 
author: KylieLiang
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 02/20/2017
ms.author: kyliel
ms.openlocfilehash: cd777291a1321eabf4efe0d7b9b101f932d9398b
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="how-to-use-freebsds-packet-filter-to-create-a-secure-firewall-in-azure"></a><span data-ttu-id="7601c-103">Het gebruik van FreeBSD Packet Filter maken van een veilige firewall in Azure</span><span class="sxs-lookup"><span data-stu-id="7601c-103">How to use FreeBSD's Packet Filter to create a secure firewall in Azure</span></span>
<span data-ttu-id="7601c-104">Dit artikel bevat een NAT-firewall met behulp van de FreeBSD verpakker Filter via Azure Resource Manager-sjabloon voor algemene scenario met web server implementeren.</span><span class="sxs-lookup"><span data-stu-id="7601c-104">This article introduces how to deploy a NAT firewall using FreeBSD’s Packer Filter through Azure Resource Manager template for common web server scenario.</span></span>

## <a name="what-is-pf"></a><span data-ttu-id="7601c-105">Wat is PF?</span><span class="sxs-lookup"><span data-stu-id="7601c-105">What is PF?</span></span>
<span data-ttu-id="7601c-106">PF (pakketfilter, ook geschreven pf) is een centrale onderdeel van de software voor het gebruik van een BSD gelicentieerde stateful pakketfilter.</span><span class="sxs-lookup"><span data-stu-id="7601c-106">PF (Packet Filter, also written pf) is a BSD licensed stateful packet filter, a central piece of software for firewalling.</span></span> <span data-ttu-id="7601c-107">PF sindsdien snel heeft ontwikkeld en nu heeft verschillende voordelen ten opzichte van andere beschikbare firewalls.</span><span class="sxs-lookup"><span data-stu-id="7601c-107">PF has since evolved quickly and now has several advantages over other available firewalls.</span></span> <span data-ttu-id="7601c-108">NAT (Network Address Translation) wordt PF na één dag, klikt u vervolgens pakketplanner en actieve wachtrijbeheer zijn geïntegreerd in PF, door de ALTQ integreren en waardoor het worden geconfigureerd via de PF configuratie.</span><span class="sxs-lookup"><span data-stu-id="7601c-108">Network Address Translation (NAT) is in PF since day one, then packet scheduler and active queue management have been integrated into PF, by integrating the ALTQ and making it configurable through PF's configuration.</span></span> <span data-ttu-id="7601c-109">Functies zoals pfsync en CARP voor failover en redundantie, authpf voor sessieverificatie en ftp-proxy te vereenvoudigen het moeilijk FTP-protocol, gebruik hebt PF. ook uitgebreid</span><span class="sxs-lookup"><span data-stu-id="7601c-109">Features such as pfsync and CARP for failover and redundancy, authpf for session authentication, and ftp-proxy to ease firewalling the difficult FTP protocol, have also extended PF.</span></span> <span data-ttu-id="7601c-110">Kortom, is PF een krachtige en veelzijdige firewall.</span><span class="sxs-lookup"><span data-stu-id="7601c-110">In short, PF is a powerful and feature-rich firewall.</span></span> 

## <a name="get-started"></a><span data-ttu-id="7601c-111">Aan de slag</span><span class="sxs-lookup"><span data-stu-id="7601c-111">Get started</span></span>
<span data-ttu-id="7601c-112">Als u geïnteresseerd bent in een beveiligde firewall instellen in de cloud voor uw webservers en vervolgens aan de slag.</span><span class="sxs-lookup"><span data-stu-id="7601c-112">If you are interested in setting up a secure firewall in the cloud for your web servers, then let’s get started.</span></span> <span data-ttu-id="7601c-113">U kunt ook de scripts in deze Azure Resource Manager-sjabloon gebruikt voor het instellen van uw netwerktopologie toepassen.</span><span class="sxs-lookup"><span data-stu-id="7601c-113">You can also apply the scripts used in this Azure Resource Manager template to set up your networking topology.</span></span>
<span data-ttu-id="7601c-114">De Azure Resource Manager-sjabloon instellen van een FreeBSD virtuele machine die wordt uitgevoerd NAT /redirection met PF en twee FreeBSD virtuele machines met de webserver Nginx geïnstalleerd en geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="7601c-114">The Azure Resource Manager template set up a FreeBSD virtual machine that performs NAT /redirection using PF and two FreeBSD virtual machines with the Nginx web server installed and configured.</span></span> <span data-ttu-id="7601c-115">Naast de NAT voor het uitgaande verkeer van de twee web servers uitvoert, de virtuele machine van NAT/omleiding onderschept HTTP-aanvragen en hen omleidt naar de twee webservers round-robin toewijst.</span><span class="sxs-lookup"><span data-stu-id="7601c-115">In addition to performing NAT for the two web servers egress traffic, the NAT/redirection virtual machine intercepts HTTP requests and redirect them to the two web servers in round-robin fashion.</span></span> <span data-ttu-id="7601c-116">De persoonlijke niet-routeerbare IP-adresruimte 10.0.0.2/24 maakt gebruik van het VNet en kunt u de parameters van de sjabloon.</span><span class="sxs-lookup"><span data-stu-id="7601c-116">The VNet uses the private non-routable IP address space 10.0.0.2/24 and you can modify the parameters of the template.</span></span> <span data-ttu-id="7601c-117">De Azure Resource Manager-sjabloon wordt ook een routetabel gedefinieerd voor het hele VNet, een verzameling van afzonderlijke routes die worden gebruikt is voor het overschrijven van Azure standaardroutes op basis van het IP-doeladres.</span><span class="sxs-lookup"><span data-stu-id="7601c-117">The Azure Resource Manager template also defines a route table for the whole VNet, which is a collection of individual routes used to override Azure default routes based on the destination IP address.</span></span> 

![pf_topology](./media/freebsd-pf-nat/pf_topology.jpg)
    
### <a name="deploy-through-azure-cli"></a><span data-ttu-id="7601c-119">Implementeren via Azure CLI</span><span class="sxs-lookup"><span data-stu-id="7601c-119">Deploy through Azure CLI</span></span>
<span data-ttu-id="7601c-120">U moet de meest recente [Azure CLI 2.0](/cli/azure/install-az-cli2) geïnstalleerd en geregistreerd in het gebruik van een Azure-account [az aanmelding](/cli/azure/#login).</span><span class="sxs-lookup"><span data-stu-id="7601c-120">You need the latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in to an Azure account using [az login](/cli/azure/#login).</span></span> <span data-ttu-id="7601c-121">Maak een resourcegroep maken met [az group create](/cli/azure/group#create).</span><span class="sxs-lookup"><span data-stu-id="7601c-121">Create a resource group with [az group create](/cli/azure/group#create).</span></span> <span data-ttu-id="7601c-122">Het volgende voorbeeld wordt een Resourcegroepnaam `myResourceGroup` in de `West US` locatie.</span><span class="sxs-lookup"><span data-stu-id="7601c-122">The following example creates a resource group name `myResourceGroup` in the `West US` location.</span></span>

```azurecli
az group create --name myResourceGroup --location westus
```

<span data-ttu-id="7601c-123">Vervolgens implementeert u de sjabloon [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) met [az implementatie maken](/cli/azure/group/deployment#create).</span><span class="sxs-lookup"><span data-stu-id="7601c-123">Next, deploy the template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) with [az group deployment create](/cli/azure/group/deployment#create).</span></span> <span data-ttu-id="7601c-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) onder hetzelfde pad en uw eigen waarden resource, zoals definiëren `adminPassword`, `networkPrefix`, en `domainNamePrefix`.</span><span class="sxs-lookup"><span data-stu-id="7601c-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) under the same path and define your own resource values, such as `adminPassword`, `networkPrefix`, and `domainNamePrefix`.</span></span> 

```azurecli
az group deployment create --resource-group myResourceGroup --name myDeploymentName \
    --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/pf-freebsd-setup/azuredeploy.json \
    --parameters '@azuredeploy.parameters.json' --verbose
```

<span data-ttu-id="7601c-125">Na ongeveer 5 minuten, krijgt u de informatie van `"provisioningState": "Succeeded"`.</span><span class="sxs-lookup"><span data-stu-id="7601c-125">After about five minutes, you will get the information of `"provisioningState": "Succeeded"`.</span></span> <span data-ttu-id="7601c-126">Vervolgens kunt u ssh aan de frontend VM (NAT) of toegang Nginx-webserver in een browser met het openbare IP-adres of FQDN-naam van de frontend VM (NAT).</span><span class="sxs-lookup"><span data-stu-id="7601c-126">Then you can ssh to the frontend VM (NAT) or access Nginx web server in a browser using the public IP address or FQDN of the frontend VM (NAT).</span></span> <span data-ttu-id="7601c-127">Het volgende voorbeeld worden FQDN-naam en openbare IP-adres dat aan de frontend VM (NAT) toegewezen de `myResourceGroup` resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="7601c-127">The following example lists FQDN and public IP address that assigned to the frontend VM (NAT) in the `myResourceGroup` resource group.</span></span> 

```azurecli
az network public-ip list --resource-group myResourceGroup
```
    
## <a name="next-steps"></a><span data-ttu-id="7601c-128">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="7601c-128">Next steps</span></span>
<span data-ttu-id="7601c-129">Wilt u voor het instellen van uw eigen NAT in Azure?</span><span class="sxs-lookup"><span data-stu-id="7601c-129">Do you want to set up your own NAT in Azure?</span></span> <span data-ttu-id="7601c-130">Open Source gratis maar krachtige?</span><span class="sxs-lookup"><span data-stu-id="7601c-130">Open Source, free but powerful?</span></span> <span data-ttu-id="7601c-131">PF is dan een goede keuze.</span><span class="sxs-lookup"><span data-stu-id="7601c-131">Then PF is a good choice.</span></span> <span data-ttu-id="7601c-132">Met behulp van de sjabloon [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), hoeft u slechts vijf minuten de voor het instellen van een NAT-firewall met round-robin van taakverdeling met behulp van FreeBSD PF in Azure voor veelvoorkomende scenario met web server.</span><span class="sxs-lookup"><span data-stu-id="7601c-132">By using the template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), you only need five minutes to set up a NAT firewall with round-robin load balancing using FreeBSD's PF in Azure for common web server scenario.</span></span> 

<span data-ttu-id="7601c-133">Als u weten van het aanbod van FreeBSD in Azure wilt, raadpleegt u [Inleiding tot FreeBSD op Azure](freebsd-intro-on-azure.md).</span><span class="sxs-lookup"><span data-stu-id="7601c-133">If you want to learn the offering of FreeBSD in Azure, refer to [introduction to FreeBSD on Azure](freebsd-intro-on-azure.md).</span></span>

<span data-ttu-id="7601c-134">Als u meer weten over PF wilt, raadpleegt u [FreeBSD handboek](https://www.freebsd.org/doc/handbook/firewalls-pf.html) of [PF User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span><span class="sxs-lookup"><span data-stu-id="7601c-134">If you want to know more about PF, refer to [FreeBSD handbook](https://www.freebsd.org/doc/handbook/firewalls-pf.html) or [PF-User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span></span>
