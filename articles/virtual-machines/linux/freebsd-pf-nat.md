---
title: de aaaUse FreeBSD pakketfilters toocreate een firewall in Azure | Microsoft Docs
description: Meer informatie over hoe toodeploy een NAT-apparaat met behulp van FreeBSD firewall PF in Azure.
services: virtual-machines-linux
documentationcenter: 
author: KylieLiang
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 02/20/2017
ms.author: kyliel
ms.openlocfilehash: 3d3a5dde2ca03ba6fc384581c786f5eb746e6d92
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-freebsds-packet-filter-toocreate-a-secure-firewall-in-azure"></a><span data-ttu-id="9808d-103">Hoe toouse FreeBSD van pakketfilter toocreate een veilige firewall in Azure</span><span class="sxs-lookup"><span data-stu-id="9808d-103">How toouse FreeBSD's Packet Filter toocreate a secure firewall in Azure</span></span>
<span data-ttu-id="9808d-104">Dit artikel bevat hoe toodeploy een NAT-firewall met behulp van de FreeBSD verpakker Filter via Azure Resource Manager-sjabloon voor algemene scenario met web server.</span><span class="sxs-lookup"><span data-stu-id="9808d-104">This article introduces how toodeploy a NAT firewall using FreeBSD’s Packer Filter through Azure Resource Manager template for common web server scenario.</span></span>

## <a name="what-is-pf"></a><span data-ttu-id="9808d-105">Wat is PF?</span><span class="sxs-lookup"><span data-stu-id="9808d-105">What is PF?</span></span>
<span data-ttu-id="9808d-106">PF (pakketfilter, ook geschreven pf) is een centrale onderdeel van de software voor het gebruik van een BSD gelicentieerde stateful pakketfilter.</span><span class="sxs-lookup"><span data-stu-id="9808d-106">PF (Packet Filter, also written pf) is a BSD licensed stateful packet filter, a central piece of software for firewalling.</span></span> <span data-ttu-id="9808d-107">PF sindsdien snel heeft ontwikkeld en nu heeft verschillende voordelen ten opzichte van andere beschikbare firewalls.</span><span class="sxs-lookup"><span data-stu-id="9808d-107">PF has since evolved quickly and now has several advantages over other available firewalls.</span></span> <span data-ttu-id="9808d-108">NAT (Network Address Translation) wordt PF na één dag, klikt u vervolgens pakketplanner en actieve wachtrijbeheer zijn geïntegreerd in PF, door Hallo ALTQ integreren en waardoor het worden geconfigureerd via de PF configuratie.</span><span class="sxs-lookup"><span data-stu-id="9808d-108">Network Address Translation (NAT) is in PF since day one, then packet scheduler and active queue management have been integrated into PF, by integrating hello ALTQ and making it configurable through PF's configuration.</span></span> <span data-ttu-id="9808d-109">Functies zoals pfsync en CARP voor failover en redundantie, authpf voor sessieverificatie en FTP-proxy tooease gebruik Hallo moeilijk FTP-protocol, hebben ook uitgebreide PF.</span><span class="sxs-lookup"><span data-stu-id="9808d-109">Features such as pfsync and CARP for failover and redundancy, authpf for session authentication, and ftp-proxy tooease firewalling hello difficult FTP protocol, have also extended PF.</span></span> <span data-ttu-id="9808d-110">Kortom, is PF een krachtige en veelzijdige firewall.</span><span class="sxs-lookup"><span data-stu-id="9808d-110">In short, PF is a powerful and feature-rich firewall.</span></span> 

## <a name="get-started"></a><span data-ttu-id="9808d-111">Aan de slag</span><span class="sxs-lookup"><span data-stu-id="9808d-111">Get started</span></span>
<span data-ttu-id="9808d-112">Als u geïnteresseerd bent in een beveiligde firewall instellen in de cloud Hallo voor uw webservers en vervolgens aan de slag.</span><span class="sxs-lookup"><span data-stu-id="9808d-112">If you are interested in setting up a secure firewall in hello cloud for your web servers, then let’s get started.</span></span> <span data-ttu-id="9808d-113">Hallo-scripts die worden gebruikt in deze Azure Resource Manager-sjabloon tooset van uw netwerktopologie, kunt u ook toepassen.</span><span class="sxs-lookup"><span data-stu-id="9808d-113">You can also apply hello scripts used in this Azure Resource Manager template tooset up your networking topology.</span></span>
<span data-ttu-id="9808d-114">Hello Azure Resource Manager-sjabloon instellen van een FreeBSD virtuele machine die voert NAT /redirection met PF en twee FreeBSD virtuele machines met Hallo Nginx webserver is geïnstalleerd en geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="9808d-114">hello Azure Resource Manager template set up a FreeBSD virtual machine that performs NAT /redirection using PF and two FreeBSD virtual machines with hello Nginx web server installed and configured.</span></span> <span data-ttu-id="9808d-115">Bovendien tooperforming NAT voor twee webservers Hallo uitgaande verkeer, Hallo NAT/omleiding van virtuele machine onderschept HTTP-aanvragen en hen toohello twee webservers round-robin toewijst omleidt.</span><span class="sxs-lookup"><span data-stu-id="9808d-115">In addition tooperforming NAT for hello two web servers egress traffic, hello NAT/redirection virtual machine intercepts HTTP requests and redirect them toohello two web servers in round-robin fashion.</span></span> <span data-ttu-id="9808d-116">Hallo VNet Hallo persoonlijke niet-routeerbare IP-adresruimte 10.0.0.2/24 gebruikt en u kunt de parameters Hallo van Hallo sjabloon wijzigen.</span><span class="sxs-lookup"><span data-stu-id="9808d-116">hello VNet uses hello private non-routable IP address space 10.0.0.2/24 and you can modify hello parameters of hello template.</span></span> <span data-ttu-id="9808d-117">Hello Azure Resource Manager-sjabloon wordt ook een routetabel voor de hele VNet een verzameling van afzonderlijke routes is gebruikt Azure standaardroutes toooverride op basis van IP-doeladres Hallo Hallo gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="9808d-117">hello Azure Resource Manager template also defines a route table for hello whole VNet, which is a collection of individual routes used toooverride Azure default routes based on hello destination IP address.</span></span> 

![pf_topology](./media/freebsd-pf-nat/pf_topology.jpg)
    
### <a name="deploy-through-azure-cli"></a><span data-ttu-id="9808d-119">Implementeren via Azure CLI</span><span class="sxs-lookup"><span data-stu-id="9808d-119">Deploy through Azure CLI</span></span>
<span data-ttu-id="9808d-120">Moet u Hallo nieuwste [Azure CLI 2.0](/cli/azure/install-az-cli2) geïnstalleerd en geregistreerd in Azure-account met behulp van tooan [az aanmelding](/cli/azure/#login).</span><span class="sxs-lookup"><span data-stu-id="9808d-120">You need hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooan Azure account using [az login](/cli/azure/#login).</span></span> <span data-ttu-id="9808d-121">Maak een resourcegroep maken met [az group create](/cli/azure/group#create).</span><span class="sxs-lookup"><span data-stu-id="9808d-121">Create a resource group with [az group create](/cli/azure/group#create).</span></span> <span data-ttu-id="9808d-122">Hallo volgende voorbeeld wordt een Resourcegroepnaam `myResourceGroup` in Hallo `West US` locatie.</span><span class="sxs-lookup"><span data-stu-id="9808d-122">hello following example creates a resource group name `myResourceGroup` in hello `West US` location.</span></span>

```azurecli
az group create --name myResourceGroup --location westus
```

<span data-ttu-id="9808d-123">Vervolgens implementeert u de sjabloon Hallo [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) met [az implementatie maken](/cli/azure/group/deployment#create).</span><span class="sxs-lookup"><span data-stu-id="9808d-123">Next, deploy hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup) with [az group deployment create](/cli/azure/group/deployment#create).</span></span> <span data-ttu-id="9808d-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) onder hetzelfde pad Hallo en uw eigen waarden resource, zoals definiëren `adminPassword`, `networkPrefix`, en `domainNamePrefix`.</span><span class="sxs-lookup"><span data-stu-id="9808d-124">Download [azuredeploy.parameters.json](https://github.com/Azure/azure-quickstart-templates/blob/master/pf-freebsd-setup/azuredeploy.parameters.json) under hello same path and define your own resource values, such as `adminPassword`, `networkPrefix`, and `domainNamePrefix`.</span></span> 

```azurecli
az group deployment create --resource-group myResourceGroup --name myDeploymentName \
    --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/pf-freebsd-setup/azuredeploy.json \
    --parameters '@azuredeploy.parameters.json' --verbose
```

<span data-ttu-id="9808d-125">Na ongeveer 5 minuten, krijgt u informatie van Hallo `"provisioningState": "Succeeded"`.</span><span class="sxs-lookup"><span data-stu-id="9808d-125">After about five minutes, you will get hello information of `"provisioningState": "Succeeded"`.</span></span> <span data-ttu-id="9808d-126">Vervolgens u ssh toohello frontend VM (NAT kunt) of toegang tot de webserver Nginx in een browser Hallo openbare IP-adres of FQDN-naam van Hallo frontend VM (NAT).</span><span class="sxs-lookup"><span data-stu-id="9808d-126">Then you can ssh toohello frontend VM (NAT) or access Nginx web server in a browser using hello public IP address or FQDN of hello frontend VM (NAT).</span></span> <span data-ttu-id="9808d-127">Hallo volgende voorbeeld wordt een lijst FQDN-naam en openbare IP-adres die toohello frontend VM (NAT) in Hallo toegewezen `myResourceGroup` resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="9808d-127">hello following example lists FQDN and public IP address that assigned toohello frontend VM (NAT) in hello `myResourceGroup` resource group.</span></span> 

```azurecli
az network public-ip list --resource-group myResourceGroup
```
    
## <a name="next-steps"></a><span data-ttu-id="9808d-128">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="9808d-128">Next steps</span></span>
<span data-ttu-id="9808d-129">Wilt u tooset om uw eigen NAT in Azure?</span><span class="sxs-lookup"><span data-stu-id="9808d-129">Do you want tooset up your own NAT in Azure?</span></span> <span data-ttu-id="9808d-130">Open Source gratis maar krachtige?</span><span class="sxs-lookup"><span data-stu-id="9808d-130">Open Source, free but powerful?</span></span> <span data-ttu-id="9808d-131">PF is dan een goede keuze.</span><span class="sxs-lookup"><span data-stu-id="9808d-131">Then PF is a good choice.</span></span> <span data-ttu-id="9808d-132">Met behulp van de sjabloon Hallo [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), hoeft u slechts vijf minuten tooset van een NAT-firewall met round-robin van taakverdeling met behulp van FreeBSD PF in Azure voor veelvoorkomende scenario met web server.</span><span class="sxs-lookup"><span data-stu-id="9808d-132">By using hello template [pf-freebsd-setup](https://github.com/Azure/azure-quickstart-templates/tree/master/pf-freebsd-setup), you only need five minutes tooset up a NAT firewall with round-robin load balancing using FreeBSD's PF in Azure for common web server scenario.</span></span> 

<span data-ttu-id="9808d-133">Als u wilt dat toolearn Hallo aanbod van FreeBSD in Azure, raadpleegt u te[tooFreeBSD inleiding op Azure](freebsd-intro-on-azure.md).</span><span class="sxs-lookup"><span data-stu-id="9808d-133">If you want toolearn hello offering of FreeBSD in Azure, refer too[introduction tooFreeBSD on Azure](freebsd-intro-on-azure.md).</span></span>

<span data-ttu-id="9808d-134">Desgewenst kunt u meer informatie over PF tooknow te verwijzen[FreeBSD handboek](https://www.freebsd.org/doc/handbook/firewalls-pf.html) of [PF User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span><span class="sxs-lookup"><span data-stu-id="9808d-134">If you want tooknow more about PF, refer too[FreeBSD handbook](https://www.freebsd.org/doc/handbook/firewalls-pf.html) or [PF-User's Guide](https://www.freebsd.org/doc/handbook/firewalls-pf.html).</span></span>
