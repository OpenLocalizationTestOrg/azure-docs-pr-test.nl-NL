---
title: 'Genereren en exporteren van certificaten voor punt-naar-Site: MakeCert: Azure | Microsoft Docs'
description: Dit artikel bevat stappen toocreate een zelfondertekend basiscertificaat, Hallo openbare sleutel niet exporteren en met MakeCert clientcertificaten te genereren.
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: vpn-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/09/2017
ms.author: cherylmc
ms.openlocfilehash: 0b795ccf74f1f97fbd3de8a0dc339f9cb0b48183
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="generate-and-export-certificates-for-point-to-site-connections-using-makecert"></a><span data-ttu-id="e5304-103">Genereren en exporteren van certificaten voor punt-naar-Site-verbindingen met het MakeCert</span><span class="sxs-lookup"><span data-stu-id="e5304-103">Generate and export certificates for Point-to-Site connections using MakeCert</span></span>

<span data-ttu-id="e5304-104">Punt-naar-Site-verbindingen gebruiken certificaten tooauthenticate.</span><span class="sxs-lookup"><span data-stu-id="e5304-104">Point-to-Site connections use certificates tooauthenticate.</span></span> <span data-ttu-id="e5304-105">In dit artikel leest u hoe toocreate een zelfondertekend basiscertificaat en clientcertificaten met MakeCert genereren.</span><span class="sxs-lookup"><span data-stu-id="e5304-105">This article shows you how toocreate a self-signed root certificate and generate client certificates using MakeCert.</span></span> <span data-ttu-id="e5304-106">Als u configuratiestappen voor punt-naar-Site, zoekt zoals hoe tooupload basiscertificaten, selecteert u een van de Hallo ' configureren punt-naar-Site' artikelen van Hallo volgende lijst:</span><span class="sxs-lookup"><span data-stu-id="e5304-106">If you are looking for Point-to-Site configuration steps, such as how tooupload root certificates, select one of hello 'Configure Point-to-Site' articles from hello following list:</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="e5304-107">Zelfondertekende certificaten - PowerShell maken</span><span class="sxs-lookup"><span data-stu-id="e5304-107">Create self-signed certificates - PowerShell</span></span>](vpn-gateway-certificates-point-to-site.md)
> * [<span data-ttu-id="e5304-108">Zelfondertekende certificaten - MakeCert maken</span><span class="sxs-lookup"><span data-stu-id="e5304-108">Create self-signed certificates - MakeCert</span></span>](vpn-gateway-certificates-point-to-site-makecert.md)
> * [<span data-ttu-id="e5304-109">Punt-naar-Site - Resource Manager - Azure-portal configureren</span><span class="sxs-lookup"><span data-stu-id="e5304-109">Configure Point-to-Site - Resource Manager - Azure portal</span></span>](vpn-gateway-howto-point-to-site-resource-manager-portal.md)
> * [<span data-ttu-id="e5304-110">Punt-naar-Site - Resource Manager - PowerShell configureren</span><span class="sxs-lookup"><span data-stu-id="e5304-110">Configure Point-to-Site - Resource Manager - PowerShell</span></span>](vpn-gateway-howto-point-to-site-rm-ps.md)
> * [<span data-ttu-id="e5304-111">Punt-naar-Site - Classic - Azure-portal configureren</span><span class="sxs-lookup"><span data-stu-id="e5304-111">Configure Point-to-Site - Classic - Azure portal</span></span>](vpn-gateway-howto-point-to-site-classic-azure-portal.md)
> 
> 

<span data-ttu-id="e5304-112">Terwijl het is raadzaam Hallo [Windows 10 PowerShell stappen](vpn-gateway-certificates-point-to-site.md) toocreate uw certificaten, bieden we deze instructies MakeCert als een optionele methode.</span><span class="sxs-lookup"><span data-stu-id="e5304-112">While we recommend using hello [Windows 10 PowerShell steps](vpn-gateway-certificates-point-to-site.md) toocreate your certificates, we provide these MakeCert instructions as an optional method.</span></span> <span data-ttu-id="e5304-113">Hallo-certificaten die u genereren met behulp van beide methoden kunnen worden geïnstalleerd op [een ondersteunde client-besturingssysteem](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span><span class="sxs-lookup"><span data-stu-id="e5304-113">hello certificates that you generate using either method can be installed on [any supported client operating system](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span></span> <span data-ttu-id="e5304-114">MakeCert heeft echter Hallo beperking te volgen:</span><span class="sxs-lookup"><span data-stu-id="e5304-114">However, MakeCert has hello following limitation:</span></span>

* <span data-ttu-id="e5304-115">MakeCert is afgeschaft.</span><span class="sxs-lookup"><span data-stu-id="e5304-115">MakeCert is deprecated.</span></span> <span data-ttu-id="e5304-116">Dit betekent dat dit hulpprogramma op elk moment kan worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="e5304-116">This means that this tool could be removed at any point.</span></span> <span data-ttu-id="e5304-117">Certificaten die u al hebt gegenereerd met MakeCert worden niet beïnvloed wanneer MakeCert niet meer beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="e5304-117">Any certificates that you already generated using MakeCert won't be affected when MakeCert is no longer available.</span></span> <span data-ttu-id="e5304-118">MakeCert is alleen gebruikte toogenerate Hallo certificaten niet als een mechanisme voor het valideren.</span><span class="sxs-lookup"><span data-stu-id="e5304-118">MakeCert is only used toogenerate hello certificates, not as a validating mechanism.</span></span>

## <span data-ttu-id="e5304-119"><a name="rootcert"></a>Een zelfondertekend basiscertificaat maken</span><span class="sxs-lookup"><span data-stu-id="e5304-119"><a name="rootcert"></a>Create a self-signed root certificate</span></span>

<span data-ttu-id="e5304-120">Hallo stappen ziet u hoe toocreate een zelfondertekend certificaat met MakeCert.</span><span class="sxs-lookup"><span data-stu-id="e5304-120">hello following steps show you how toocreate a self-signed certificate using MakeCert.</span></span> <span data-ttu-id="e5304-121">Deze stappen zijn niet specifiek implementatiemodel.</span><span class="sxs-lookup"><span data-stu-id="e5304-121">These steps are not deployment-model specific.</span></span> <span data-ttu-id="e5304-122">Ze zijn geldig voor zowel Resource Manager en classic.</span><span class="sxs-lookup"><span data-stu-id="e5304-122">They are valid for both Resource Manager and classic.</span></span>

1. <span data-ttu-id="e5304-123">Download en installeer [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="e5304-123">Download and install [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span></span>
2. <span data-ttu-id="e5304-124">Na de installatie vindt u doorgaans Hallo makecert.exe hulpprogramma onder dit pad: ' C:\Program Files (x86) \Windows Kits\10\bin\<arch >'.</span><span class="sxs-lookup"><span data-stu-id="e5304-124">After installation, you can typically find hello makecert.exe utility under this path: 'C:\Program Files (x86)\Windows Kits\10\bin\<arch>'.</span></span> <span data-ttu-id="e5304-125">Hoewel het is mogelijk dat het was geïnstalleerd tooanother locatie.</span><span class="sxs-lookup"><span data-stu-id="e5304-125">Although, it's possible that it was installed tooanother location.</span></span> <span data-ttu-id="e5304-126">Open een opdrachtprompt als beheerder en navigeren toohello locatie Hallo MakeCert-hulpprogramma.</span><span class="sxs-lookup"><span data-stu-id="e5304-126">Open a command prompt as administrator and navigate toohello location of hello MakeCert utility.</span></span> <span data-ttu-id="e5304-127">U kunt Hallo voorbeeld te volgen, aanpassen voor de juiste locatie hello gebruiken:</span><span class="sxs-lookup"><span data-stu-id="e5304-127">You can use hello following example, adjusting for hello proper location:</span></span>

  ```cmd
  cd C:\Program Files (x86)\Windows Kits\10\bin\x64
  ```
3. <span data-ttu-id="e5304-128">Maken en een certificaat op Hallo persoonlijke certificaatarchief op uw computer installeren.</span><span class="sxs-lookup"><span data-stu-id="e5304-128">Create and install a certificate in hello Personal certificate store on your computer.</span></span> <span data-ttu-id="e5304-129">Hallo volgende voorbeeld wordt een bijbehorende *.cer* bestand dat u uploadt tooAzure bij het configureren van P2S.</span><span class="sxs-lookup"><span data-stu-id="e5304-129">hello following example creates a corresponding *.cer* file that you upload tooAzure when configuring P2S.</span></span> <span data-ttu-id="e5304-130">Vervangen door 'P2SRootCert' en 'P2SRootCert.cer' hello naam wilt u toouse voor Hallo certificaat.</span><span class="sxs-lookup"><span data-stu-id="e5304-130">Replace 'P2SRootCert' and 'P2SRootCert.cer' with hello name that you want toouse for hello certificate.</span></span> <span data-ttu-id="e5304-131">Hallo certificaat bevindt zich in uw 'Certificaten - Huidige gebruiker\Persoonlijk\Certificaten'.</span><span class="sxs-lookup"><span data-stu-id="e5304-131">hello certificate is located in your 'Certificates - Current User\Personal\Certificates'.</span></span>

  ```cmd
  makecert -sky exchange -r -n "CN=P2SRootCert" -pe -a sha256 -len 2048 -ss My
  ```

## <span data-ttu-id="e5304-132"><a name="cer"></a>Hallo openbare sleutel (.cer) exporteren</span><span class="sxs-lookup"><span data-stu-id="e5304-132"><a name="cer"></a>Export hello public key (.cer)</span></span>

[!INCLUDE [Export public key](../../includes/vpn-gateway-certificates-export-public-key-include.md)]

<span data-ttu-id="e5304-133">Hallo exported.cer bestand moet geüploade tooAzure.</span><span class="sxs-lookup"><span data-stu-id="e5304-133">hello exported.cer file must be uploaded tooAzure.</span></span> <span data-ttu-id="e5304-134">Zie voor instructies [een punt-naar-Site-verbinding configureren](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span><span class="sxs-lookup"><span data-stu-id="e5304-134">For instructions, see [Configure a Point-to-Site connection](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span></span> <span data-ttu-id="e5304-135">Zie voor een vertrouwd basiscertificaat aanvullende tooadd [in deze sectie](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) van Hallo artikel.</span><span class="sxs-lookup"><span data-stu-id="e5304-135">tooadd an additional trusted root certificate, see [this section](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) of hello article.</span></span>

### <a name="export-hello-self-signed-certificate-and-private-key-toostore-it-optional"></a><span data-ttu-id="e5304-136">Hallo zelf-ondertekend certificaat en de persoonlijke sleutel toostore exporteren deze (optioneel)</span><span class="sxs-lookup"><span data-stu-id="e5304-136">Export hello self-signed certificate and private key toostore it (optional)</span></span>

<span data-ttu-id="e5304-137">U kunt tooexport Hallo zelfondertekend basiscertificaat en veilig opslaan.</span><span class="sxs-lookup"><span data-stu-id="e5304-137">You may want tooexport hello self-signed root certificate and store it safely.</span></span> <span data-ttu-id="e5304-138">Indien nodig zijn, u kunt later op een andere computer installeren en meer clientcertificaten te genereren of een andere cer-bestand exporteren.</span><span class="sxs-lookup"><span data-stu-id="e5304-138">If need be, you can later install it on another computer and generate more client certificates, or export another .cer file.</span></span> <span data-ttu-id="e5304-139">tooexport hello zelfondertekend basiscertificaat als een .pfx, selecteer Hallo-basiscertificaat en gebruik dezelfde stappen Hallo zoals beschreven in [exporteren van een clientcertificaat](#clientexport).</span><span class="sxs-lookup"><span data-stu-id="e5304-139">tooexport hello self-signed root certificate as a .pfx, select hello root certificate and use hello same steps as described in [Export a client certificate](#clientexport).</span></span>

## <a name="create-and-install-client-certificates"></a><span data-ttu-id="e5304-140">Maken en clientcertificaten te installeren</span><span class="sxs-lookup"><span data-stu-id="e5304-140">Create and install client certificates</span></span>

<span data-ttu-id="e5304-141">Installeer rechtstreeks op de clientcomputer Hallo niet Hallo zelf-ondertekend certificaat.</span><span class="sxs-lookup"><span data-stu-id="e5304-141">You don't install hello self-signed certificate directly on hello client computer.</span></span> <span data-ttu-id="e5304-142">U moet een clientcertificaat van een zelfondertekend certificaat Hallo toogenerate.</span><span class="sxs-lookup"><span data-stu-id="e5304-142">You need toogenerate a client certificate from hello self-signed certificate.</span></span> <span data-ttu-id="e5304-143">U en vervolgens exporteren en Hallo client certificate toohello-clientcomputer installeren.</span><span class="sxs-lookup"><span data-stu-id="e5304-143">You then export and install hello client certificate toohello client computer.</span></span> <span data-ttu-id="e5304-144">Hallo stappen te volgen zijn geen specifieke implementatie-model.</span><span class="sxs-lookup"><span data-stu-id="e5304-144">hello following steps are not deployment-model specific.</span></span> <span data-ttu-id="e5304-145">Ze zijn geldig voor zowel Resource Manager en classic.</span><span class="sxs-lookup"><span data-stu-id="e5304-145">They are valid for both Resource Manager and classic.</span></span>

### <span data-ttu-id="e5304-146"><a name="clientcert"></a>Een clientcertificaat genereren</span><span class="sxs-lookup"><span data-stu-id="e5304-146"><a name="clientcert"></a>Generate a client certificate</span></span>

<span data-ttu-id="e5304-147">Elke clientcomputer die verbinding tooa maakt VNet met punt-naar-Site moet beschikken over een clientcertificaat dat is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="e5304-147">Each client computer that connects tooa VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="e5304-148">U een clientcertificaat genereren uit het zelfondertekende basiscertificaat hello, en vervolgens exporteren en installeren van Hallo clientcertificaat.</span><span class="sxs-lookup"><span data-stu-id="e5304-148">You generate a client certificate from hello self-signed root certificate, and then export and install hello client certificate.</span></span> <span data-ttu-id="e5304-149">Als het Hallo-clientcertificaat niet is geïnstalleerd, mislukt de verificatie.</span><span class="sxs-lookup"><span data-stu-id="e5304-149">If hello client certificate is not installed, authentication fails.</span></span> 

<span data-ttu-id="e5304-150">Hallo volgende stappen maakt u een clientcertificaat van een zelfondertekend basiscertificaat genereren.</span><span class="sxs-lookup"><span data-stu-id="e5304-150">hello following steps walk you through generating a client certificate from a self-signed root certificate.</span></span> <span data-ttu-id="e5304-151">U kunt meerdere clientcertificaten genereren van Hallo hetzelfde basiscertificaat.</span><span class="sxs-lookup"><span data-stu-id="e5304-151">You may generate multiple client certificates from hello same root certificate.</span></span> <span data-ttu-id="e5304-152">Als u clientcertificaten gebruik Hallo stappen hieronder genereert, wordt Hallo clientcertificaat automatisch geïnstalleerd op Hallo-computer die u hebt toogenerate Hallo certificaat gebruikt.</span><span class="sxs-lookup"><span data-stu-id="e5304-152">When you generate client certificates using hello steps below, hello client certificate is automatically installed on hello computer that you used toogenerate hello certificate.</span></span> <span data-ttu-id="e5304-153">Als u een certificaat op een andere clientcomputer tooinstall wilt, kunt u Hallo certificaat exporteren.</span><span class="sxs-lookup"><span data-stu-id="e5304-153">If you want tooinstall a client certificate on another client computer, you can export hello certificate.</span></span>
 
1. <span data-ttu-id="e5304-154">Op Hallo dezelfde computer die u hebt gebruikt toocreate Hallo zelfondertekend certificaat, open een opdrachtprompt als beheerder.</span><span class="sxs-lookup"><span data-stu-id="e5304-154">On hello same computer that you used toocreate hello self-signed certificate, open a command prompt as administrator.</span></span>
2. <span data-ttu-id="e5304-155">Wijzigen en Voer Hallo voorbeeld toogenerate een clientcertificaat.</span><span class="sxs-lookup"><span data-stu-id="e5304-155">Modify and run hello sample toogenerate a client certificate.</span></span>
  * <span data-ttu-id="e5304-156">Wijziging *'P2SRootCert'* toohello-naam van Hallo zelfondertekend basiscertificaat die u het clientcertificaat Hallo van genereren.</span><span class="sxs-lookup"><span data-stu-id="e5304-156">Change *"P2SRootCert"* toohello name of hello self-signed root that you are generating hello client certificate from.</span></span> <span data-ttu-id="e5304-157">Controleer of gebruikt u de naam van de basiscertificaat hello, die elk Hallo Hallo "CN =' waarde is die u hebt opgegeven toen u Hallo zelfondertekende basiscertificaat hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="e5304-157">Make sure you are using hello name of hello root certificate, which is whatever hello 'CN=' value was that you specified when you created hello self-signed root.</span></span>
  * <span data-ttu-id="e5304-158">Wijziging *P2SChildCert* toohello-naam die u wilt dat een client certificate toobe toogenerate.</span><span class="sxs-lookup"><span data-stu-id="e5304-158">Change *P2SChildCert* toohello name you want toogenerate a client certificate toobe.</span></span>

  <span data-ttu-id="e5304-159">Als u Hallo voorbeeld te volgen zonder het te wijzigen uitvoert, is het Hallo resultaat een certificaat met de naam P2SChildcert in uw persoonlijke certificaatarchief die is gegenereerd op basis van het basiscertificaat P2SRootCert.</span><span class="sxs-lookup"><span data-stu-id="e5304-159">If you run hello following example without modifying it, hello result is a client certificate named P2SChildcert in your Personal certificate store that was generated from root certificate P2SRootCert.</span></span>

  ```cmd
  makecert.exe -n "CN=P2SChildCert" -pe -sky exchange -m 96 -ss My -in "P2SRootCert" -is my -a sha256
  ```

### <span data-ttu-id="e5304-160"><a name="clientexport"></a>Een clientcertificaat exporteren</span><span class="sxs-lookup"><span data-stu-id="e5304-160"><a name="clientexport"></a>Export a client certificate</span></span>

[!INCLUDE [Export client certificate](../../includes/vpn-gateway-certificates-export-client-cert-include.md)]

### <span data-ttu-id="e5304-161"><a name="install"></a>Een geëxporteerde certificaat installeren</span><span class="sxs-lookup"><span data-stu-id="e5304-161"><a name="install"></a>Install an exported client certificate</span></span>

[!INCLUDE [Install client certificate](../../includes/vpn-gateway-certificates-install-client-cert-include.md)]

## <a name="next-steps"></a><span data-ttu-id="e5304-162">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="e5304-162">Next steps</span></span>

<span data-ttu-id="e5304-163">Ga door met de punt-naar-Site-configuratie.</span><span class="sxs-lookup"><span data-stu-id="e5304-163">Continue with your Point-to-Site configuration.</span></span> 

* <span data-ttu-id="e5304-164">Voor **Resource Manager** model implementatiestappen Zie [configureren van een punt-naar-Site-verbinding tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="e5304-164">For **Resource Manager** deployment model steps, see [Configure a Point-to-Site connection tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span></span>
* <span data-ttu-id="e5304-165">Voor **klassieke** model implementatiestappen Zie [configureren van een punt-naar-Site VPN-verbinding tooa VNet (klassiek)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="e5304-165">For **classic** deployment model steps, see [Configure a Point-to-Site VPN connection tooa VNet (classic)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span></span>
