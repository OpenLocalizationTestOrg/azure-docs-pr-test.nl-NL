---
title: aaaConfigure hello Azure MFA NPS extensie | Microsoft Docs
description: "Nadat u Hallo NPS uitbreiding hebt geïnstalleerd, moet u deze stappen gebruiken voor geavanceerde configuratie zoals IP-whitelisting en UPN vervanging."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/14/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: c3aed077b23c95f874861eb00c8e6dca668329c1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="advanced-configuration-options-for-hello-nps-extension-for-multi-factor-authentication"></a><span data-ttu-id="cf91a-103">Geavanceerde configuratieopties voor Hallo NPS-extensie voor multi-factor Authentication</span><span class="sxs-lookup"><span data-stu-id="cf91a-103">Advanced configuration options for hello NPS extension for Multi-Factor Authentication</span></span>

<span data-ttu-id="cf91a-104">Hallo Network Policy Server (NPS)-extensie breidt uw cloud-gebaseerde Azure multi-factor Authentication-functies in uw on-premises infrastructuur.</span><span class="sxs-lookup"><span data-stu-id="cf91a-104">hello Network Policy Server (NPS) extension extends your cloud-based Azure Multi-Factor Authentication features into your on-premises infrastructure.</span></span> <span data-ttu-id="cf91a-105">In dit artikel wordt ervan uitgegaan dat u al geïnstalleerd Hallo-extensie hebt en tooknow hoe toocustomize Hallo-extensie voor u moet een goed idee.</span><span class="sxs-lookup"><span data-stu-id="cf91a-105">This article assumes that you already have hello extension installed, and now want tooknow how toocustomize hello extension for you needs.</span></span> 

## <a name="alternate-login-id"></a><span data-ttu-id="cf91a-106">Alternatieve aanmeldings-ID</span><span class="sxs-lookup"><span data-stu-id="cf91a-106">Alternate login ID</span></span>

<span data-ttu-id="cf91a-107">Aangezien Hallo NPS extensie tooboth uw on-premises en cloud verbindt-adreslijsten, kunnen er een probleem waarbij uw lokale UPN-namen (UPN's) Hallo namen in de cloud Hallo niet overeenkomen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-107">Since hello NPS extension connects tooboth your on-premises and cloud directories, you might encounter an issue where your on-premises user principal names (UPNs) don't match hello names in hello cloud.</span></span> <span data-ttu-id="cf91a-108">toosolve dit probleem op door gebruik alternatieve aanmeldings-id's.</span><span class="sxs-lookup"><span data-stu-id="cf91a-108">toosolve this problem, use alternate login IDs.</span></span> 

<span data-ttu-id="cf91a-109">Binnen Hallo NPS-extensie, kunt u een Active Directory-kenmerk toobe gebruikt in plaats van Hallo UPN voor Azure multi-factor Authentication aanwijzen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-109">Within hello NPS extension, you can designate an Active Directory attribute toobe used in place of hello UPN for Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="cf91a-110">Hierdoor kan uw lokale bronnen met verificatie in twee stappen u tooprotect zonder te wijzigen van uw lokale UPN's.</span><span class="sxs-lookup"><span data-stu-id="cf91a-110">This enables you tooprotect your on-premises resources with two-step verification without modifying your on-premises UPNs.</span></span> 

<span data-ttu-id="cf91a-111">tooconfigure alternatieve aanmeldings-id's, gaat u te`HKLM\SOFTWARE\Microsoft\AzureMfa` en bewerken van de volgende registerwaarden Hallo:</span><span class="sxs-lookup"><span data-stu-id="cf91a-111">tooconfigure alternate login IDs, go too`HKLM\SOFTWARE\Microsoft\AzureMfa` and edit hello following registry values:</span></span>

| <span data-ttu-id="cf91a-112">Naam</span><span class="sxs-lookup"><span data-stu-id="cf91a-112">Name</span></span> | <span data-ttu-id="cf91a-113">Type</span><span class="sxs-lookup"><span data-stu-id="cf91a-113">Type</span></span> | <span data-ttu-id="cf91a-114">Standaardwaarde</span><span class="sxs-lookup"><span data-stu-id="cf91a-114">Default value</span></span> | <span data-ttu-id="cf91a-115">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cf91a-115">Description</span></span> |
| ---- | ---- | ------------- | ----------- |
| <span data-ttu-id="cf91a-116">LDAP_ALTERNATE_LOGINID_ATTRIBUTE</span><span class="sxs-lookup"><span data-stu-id="cf91a-116">LDAP_ALTERNATE_LOGINID_ATTRIBUTE</span></span> | <span data-ttu-id="cf91a-117">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="cf91a-117">string</span></span> | <span data-ttu-id="cf91a-118">leeg</span><span class="sxs-lookup"><span data-stu-id="cf91a-118">Empty</span></span> | <span data-ttu-id="cf91a-119">Hallo-naam van Active Directory-kenmerk dat u wilt dat toouse in plaats van Hallo UPN aanwijzen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-119">Designate hello name of Active Directory attribute that you want toouse instead of hello UPN.</span></span> <span data-ttu-id="cf91a-120">Dit kenmerk wordt gebruikt als Hallo AlternateLoginId kenmerk.</span><span class="sxs-lookup"><span data-stu-id="cf91a-120">This attribute is used as hello AlternateLoginId attribute.</span></span> <span data-ttu-id="cf91a-121">Als deze registerwaarde is ingesteld tooa [geldig Active Directory-kenmerk](https://msdn.microsoft.com/library/ms675090.aspx) (voor bijvoorbeeld e-mail of weergavenaam), vervolgens Hallo kenmerkwaarde wordt gebruikt in plaats van de UPN van de gebruiker Hallo voor verificatie.</span><span class="sxs-lookup"><span data-stu-id="cf91a-121">If this registry value is set tooa [valid Active Directory attribute](https://msdn.microsoft.com/library/ms675090.aspx) (for example, mail or displayName), then hello attribute's value is used in place of hello user's UPN for authentication.</span></span> <span data-ttu-id="cf91a-122">Als deze registerwaarde leeg of niet is is geconfigureerd, klikt u vervolgens AlternateLoginId is uitgeschakeld en de UPN van de gebruiker hello wordt gebruikt voor verificatie.</span><span class="sxs-lookup"><span data-stu-id="cf91a-122">If this registry value is empty or not configured, then AlternateLoginId is disabled and hello user's UPN is used for authentication.</span></span> |
| <span data-ttu-id="cf91a-123">LDAP_FORCE_GLOBAL_CATALOG</span><span class="sxs-lookup"><span data-stu-id="cf91a-123">LDAP_FORCE_GLOBAL_CATALOG</span></span> | <span data-ttu-id="cf91a-124">Booleaanse waarde</span><span class="sxs-lookup"><span data-stu-id="cf91a-124">boolean</span></span> | <span data-ttu-id="cf91a-125">False</span><span class="sxs-lookup"><span data-stu-id="cf91a-125">False</span></span> | <span data-ttu-id="cf91a-126">Gebruik deze vlag tooforce Hallo gebruik van globale catalogus voor LDAP-zoekopdrachten bij het opzoeken van AlternateLoginId.</span><span class="sxs-lookup"><span data-stu-id="cf91a-126">Use this flag tooforce hello use of Global Catalog for LDAP searches when looking up AlternateLoginId.</span></span> <span data-ttu-id="cf91a-127">Een domeincontroller configureren als een globale catalogus toevoegen Hallo AlternateLoginId kenmerk toohello globale catalogus en schakelt u deze vlag.</span><span class="sxs-lookup"><span data-stu-id="cf91a-127">Configure a domain controller as a Global Catalog, add hello AlternateLoginId attribute toohello Global Catalog, and then enable this flag.</span></span> <br><br> <span data-ttu-id="cf91a-128">Als LDAP_LOOKUP_FORESTS is geconfigureerd (geen lege) **deze vlag wordt afgedwongen als waar**, ongeacht van Hallo-waarde van de registerinstelling Hallo.</span><span class="sxs-lookup"><span data-stu-id="cf91a-128">If LDAP_LOOKUP_FORESTS is configured (not empty), **this flag is enforced as true**, regardless of hello value of hello registry setting.</span></span> <span data-ttu-id="cf91a-129">In dit geval vereist Hallo NPS-uitbreiding Hallo globale catalogus toobe geconfigureerd met Hallo AlternateLoginId kenmerk voor elke forest.</span><span class="sxs-lookup"><span data-stu-id="cf91a-129">In this case, hello NPS extension requires hello Global Catalog toobe configured with hello AlternateLoginId attribute for each forest.</span></span> |
| <span data-ttu-id="cf91a-130">LDAP_LOOKUP_FORESTS</span><span class="sxs-lookup"><span data-stu-id="cf91a-130">LDAP_LOOKUP_FORESTS</span></span> | <span data-ttu-id="cf91a-131">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="cf91a-131">string</span></span> | <span data-ttu-id="cf91a-132">leeg</span><span class="sxs-lookup"><span data-stu-id="cf91a-132">Empty</span></span> | <span data-ttu-id="cf91a-133">Geef een puntkomma's gescheiden lijst van forests toosearch.</span><span class="sxs-lookup"><span data-stu-id="cf91a-133">Provide a semi-colon separated list of forests toosearch.</span></span> <span data-ttu-id="cf91a-134">Bijvoorbeeld: *contoso.com;foobar.com*. Als deze registerwaarde is geconfigureerd, zoekt Hallo NPS-extensie alle Hallo forests iteratief in Hallo volgorde waarin ze zijn vermeld en Hallo eerste geslaagde AlternateLoginId waarde retourneert.</span><span class="sxs-lookup"><span data-stu-id="cf91a-134">For example, *contoso.com;foobar.com*. If this registry value is configured, hello NPS extension iteratively searches all hello forests in hello order in which they were listed, and returns hello first successful AlternateLoginId value.</span></span> <span data-ttu-id="cf91a-135">Als deze registerwaarde niet is geconfigureerd, is het Hallo AlternateLoginId lookup beperkt toohello huidige domein.</span><span class="sxs-lookup"><span data-stu-id="cf91a-135">If this registry value is not configured, hello AlternateLoginId lookup is confined toohello current domain.</span></span>|

<span data-ttu-id="cf91a-136">tootroubleshoot problemen met alternatieve aanmeldings-id's, Hallo aanbevolen stappen voor het gebruik [alternatieve aanmeldings-ID fouten](multi-factor-authentication-nps-errors.md#alternate-login-id-errors).</span><span class="sxs-lookup"><span data-stu-id="cf91a-136">tootroubleshoot problems with alternate login IDs, use hello recommended steps for [Alternate login ID errors](multi-factor-authentication-nps-errors.md#alternate-login-id-errors).</span></span>

## <a name="ip-exceptions"></a><span data-ttu-id="cf91a-137">IP-uitzonderingen</span><span class="sxs-lookup"><span data-stu-id="cf91a-137">IP exceptions</span></span>

<span data-ttu-id="cf91a-138">Als u toomonitor beschikbaarheid van de server, zoals als netwerktaakverdelers welke servers worden uitgevoerd controleren voor het verzenden van werkbelastingen, moet wilt u niet dat deze controles toobe wordt geblokkeerd door de verificatie-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-138">If you need toomonitor server availability, like if load balancers verify which servers are running before sending workloads, you don't want these checks toobe blocked by verification requests.</span></span> <span data-ttu-id="cf91a-139">In plaats daarvan een lijst met IP-adressen die u kent worden gebruikt door de service-accounts maken en vereisten van de multi-factor Authentication voor die lijst uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-139">Instead, create a list of IP addresses that you know are used by service accounts, and disable Multi-Factor Authentication requirements for that list.</span></span> 

<span data-ttu-id="cf91a-140">tooconfigure een goedgekeurde IP-adressen te gaan`HKLM\SOFTWARE\Microsoft\AzureMfa` en Hallo registerwaarde volgende configureren:</span><span class="sxs-lookup"><span data-stu-id="cf91a-140">tooconfigure an IP whitelist, go too`HKLM\SOFTWARE\Microsoft\AzureMfa` and configure hello following registry value:</span></span> 

| <span data-ttu-id="cf91a-141">Naam</span><span class="sxs-lookup"><span data-stu-id="cf91a-141">Name</span></span> | <span data-ttu-id="cf91a-142">Type</span><span class="sxs-lookup"><span data-stu-id="cf91a-142">Type</span></span> | <span data-ttu-id="cf91a-143">Standaardwaarde</span><span class="sxs-lookup"><span data-stu-id="cf91a-143">Default value</span></span> | <span data-ttu-id="cf91a-144">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cf91a-144">Description</span></span> |
| ---- | ---- | ------------- | ----------- |
| <span data-ttu-id="cf91a-145">IP_WHITELIST</span><span class="sxs-lookup"><span data-stu-id="cf91a-145">IP_WHITELIST</span></span> | <span data-ttu-id="cf91a-146">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="cf91a-146">string</span></span> | <span data-ttu-id="cf91a-147">leeg</span><span class="sxs-lookup"><span data-stu-id="cf91a-147">Empty</span></span> | <span data-ttu-id="cf91a-148">Geef een puntkomma's gescheiden lijst van IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-148">Provide a semi-colon separated list of IP addresses.</span></span> <span data-ttu-id="cf91a-149">Hallo IP-adressen van computers waar serviceaanvragen afkomstig zijn, zoals Hallo NAS/VPN-server bevatten.</span><span class="sxs-lookup"><span data-stu-id="cf91a-149">Include hello IP addresses of machines where service requests originate, like hello NAS/VPN server.</span></span> <span data-ttu-id="cf91a-150">IP-adresbereiken zijn subnetten worden niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="cf91a-150">IP ranges are subnets are not supported.</span></span> <br><br> <span data-ttu-id="cf91a-151">Bijvoorbeeld: *10.0.0.1;10.0.0.2;10.0.0.3*.</span><span class="sxs-lookup"><span data-stu-id="cf91a-151">For example, *10.0.0.1;10.0.0.2;10.0.0.3*.</span></span>

<span data-ttu-id="cf91a-152">Wanneer een aanvraag afkomstig is van een IP-adres die in goedgekeurde lijst hello voorkomt, wordt verificatie in twee stappen overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="cf91a-152">When a request comes in from an IP address that exists in hello whitelist, two-step verification is skipped.</span></span> <span data-ttu-id="cf91a-153">Hallo goedgekeurde IP-adressen is vergeleken toohello IP-adres dat is opgegeven in Hallo *ratNASIPAddress* kenmerk van Hallo RADIUS-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="cf91a-153">hello IP whitelist is compared toohello IP address that is provided in hello *ratNASIPAddress* attribute of hello RADIUS request.</span></span> <span data-ttu-id="cf91a-154">Als een RADIUS-aanvraag wordt geleverd zonder Hallo ratNASIPAddress kenmerk, Hallo waarschuwing na vastgelegd: 'P_WHITE_LIST_WARNING::IP geaccepteerde wordt genegeerd als de bron-IP ontbreekt in de RADIUS-aanvraag in NasIpAddress-kenmerk.'</span><span class="sxs-lookup"><span data-stu-id="cf91a-154">If a RADIUS request comes in without hello ratNASIPAddress attribute, hello following warning is logged: "P_WHITE_LIST_WARNING::IP Whitelist is being ignored as source IP is missing in RADIUS request in NasIpAddress attribute."</span></span>

## <a name="next-steps"></a><span data-ttu-id="cf91a-155">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="cf91a-155">Next steps</span></span>

[<span data-ttu-id="cf91a-156">Foutberichten van Hallo NPS-extensie voor Azure multi-factor Authentication oplossen</span><span class="sxs-lookup"><span data-stu-id="cf91a-156">Resolve error messages from hello NPS extension for Azure Multi-Factor Authentication</span></span>](multi-factor-authentication-nps-errors.md)
