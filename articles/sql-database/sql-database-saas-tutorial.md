---
title: Implementeren en de multitenant Wingtip SaaS-toepassing die gebruikmaakt van Azure SQL Database verkennen | Microsoft Docs
description: Implementeren en de toepassing multitenant SaaS Wingtip, die u laat zien SaaS patronen met Azure SQL Database verkennen.
keywords: zelfstudie sql-database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="58cc4-104">Implementeren en een multitenant-toepassing die gebruikmaakt van Azure SQL Database - Wingtip SaaS verkennen</span><span class="sxs-lookup"><span data-stu-id="58cc4-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="58cc4-105">In deze zelfstudie, implementeren en Verken de Wingtip SaaS-toepassing.</span><span class="sxs-lookup"><span data-stu-id="58cc4-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="58cc4-106">De toepassing maakt gebruik van het SaaS-toepassingspatroon database-per-tenant om zo meerdere tenants te kunnen bedienen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="58cc4-107">De toepassing is ontworpen om hier functies van Azure SQL Database die inschakelen SaaS-scenario's vereenvoudigen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="58cc4-108">Vijf minuten nadat u hieronder op de knop *Distribueren naar Azure* hebt geklikt, beschikt u over een SaaS-toepassing voor meerdere tenants die met behulp van SQL Database wordt uitgevoerd in de cloud.</span><span class="sxs-lookup"><span data-stu-id="58cc4-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="58cc4-109">De toepassing wordt geïmplementeerd met drie voorbeeld-tenants, elk met een eigen database, alle geïmplementeerde in een elastische SQL-groep.</span><span class="sxs-lookup"><span data-stu-id="58cc4-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="58cc4-110">De app wordt geïmplementeerd op uw Azure-abonnement, zodat u volledige toegang om te verkennen en werken met de afzonderlijke toepassingsonderdelen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="58cc4-111">De bron en het beheer toepassingsscripts zijn beschikbaar in de WingtipSaaS GitHub-repo.</span><span class="sxs-lookup"><span data-stu-id="58cc4-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="58cc4-112">In deze zelfstudie komen deze onderwerpen aan bod:</span><span class="sxs-lookup"><span data-stu-id="58cc4-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="58cc4-113">De Wingtip SaaS-toepassing implementeren</span><span class="sxs-lookup"><span data-stu-id="58cc4-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="58cc4-114">Waar de broncode van de toepassing en scripts voor downloaden</span><span class="sxs-lookup"><span data-stu-id="58cc4-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="58cc4-115">Informatie over de servers, pools en databases waaruit de app bestaat</span><span class="sxs-lookup"><span data-stu-id="58cc4-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="58cc4-116">Hoe tenants zijn toegewezen aan hun gegevens met de *catalogus*</span><span class="sxs-lookup"><span data-stu-id="58cc4-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="58cc4-117">Het inrichten van een nieuwe tenant</span><span class="sxs-lookup"><span data-stu-id="58cc4-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="58cc4-118">Tenant-activiteit in de app bewaken</span><span class="sxs-lookup"><span data-stu-id="58cc4-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="58cc4-119">Om een beeld te krijgen van verschillende ontwerp- en beheerpatronen voor SaaS-toepassingen, hebben we een [reeks gerelateerde zelfstudies](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) ontwikkeld die voortbouwt op deze initiële implementatie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="58cc4-120">Terwijl u de verschillende zelfstudies doorneemt, kunt u de bijgeleverde scripts bestuderen en ontdekken hoe de verschillende SaaS-patronen worden geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="58cc4-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="58cc4-121">U kunt de scripts in elke zelfstudie stapsgewijs doorlopen om inzicht te krijgen in de verschillende SQL Database-functies die beschikbaar zijn om op een eenvoudige manier SaaS-toepassingen te ontwikkelen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="58cc4-122">Vereisten</span><span class="sxs-lookup"><span data-stu-id="58cc4-122">Prerequisites</span></span>

<span data-ttu-id="58cc4-123">U kunt deze zelfstudie alleen voltooien als aan de volgende vereisten wordt voldaan:</span><span class="sxs-lookup"><span data-stu-id="58cc4-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="58cc4-124">Azure PowerShell is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="58cc4-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="58cc4-125">Zie [Aan de slag met Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="58cc4-126">De Wingtip SaaS-toepassing implementeren</span><span class="sxs-lookup"><span data-stu-id="58cc4-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="58cc4-127">Implementeer de Wingtip SaaS-app:</span><span class="sxs-lookup"><span data-stu-id="58cc4-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="58cc4-128">Te klikken op de **implementeren in Azure** knop opent u de Azure portal voor de sjabloon Wingtip SaaS-implementatie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="58cc4-129">De sjabloon vereist twee parameterwaarden; een naam voor een nieuwe resourcegroep en de naam van een gebruiker die deze implementatie van andere implementaties van de app Wingtip SaaS onderscheidt.</span><span class="sxs-lookup"><span data-stu-id="58cc4-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="58cc4-130">De volgende stap biedt details voor het instellen van deze waarden.</span><span class="sxs-lookup"><span data-stu-id="58cc4-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="58cc4-131">Zorg ervoor dat Let op de exacte waarden die u gebruikt, u hebt ze later naar een configuratiebestand invoeren.</span><span class="sxs-lookup"><span data-stu-id="58cc4-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="58cc4-132">Voer de vereiste parameterwaarden in voor de implementatie:</span><span class="sxs-lookup"><span data-stu-id="58cc4-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="58cc4-133">Om het overzichtelijk te houden zijn bepaalde verificatieprocessen weggelaten. Ook zijn de firewalls op servers uitgeschakeld voor deze zelfstudie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="58cc4-134">**Maak een nieuwe resourcegroep**, en gebruik niet bestaande resourcegroepen, servers of groepen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="58cc4-135">Gebruik deze toepassing of alle bronnen die wordt gemaakt, niet voor productie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="58cc4-136">Verwijder deze resourcegroep wanneer u klaar bent om gerelateerde facturering te stoppen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="58cc4-137">**Resourcegroep** : Selecteer **nieuw** en geef een **naam** voor de resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="58cc4-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="58cc4-138">Selecteer een **locatie** uit de vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="58cc4-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="58cc4-139">**Gebruiker** -resources vereisen namen die globaal uniek zijn.</span><span class="sxs-lookup"><span data-stu-id="58cc4-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="58cc4-140">Om ervoor te zorgen uniekheid, elke keer dat u implementeert de toepassing een waarde opgeven om te onderscheiden van de resources die u maakt, van de resources die zijn gemaakt door een andere implementatie van de toepassing Wingtip.</span><span class="sxs-lookup"><span data-stu-id="58cc4-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="58cc4-141">Het is raadzaam om een korte naam op te geven voor **Gebruiker**, zoals uw initialen plus een nummer (bijvoorbeeld *bg1*), en die naam te gebruiken in de naam van de resourcegroep (bijvoorbeeld *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="58cc4-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="58cc4-142">De **gebruiker** parameter mag alleen letters, cijfers en afbreekstreepjes (zonder spaties).</span><span class="sxs-lookup"><span data-stu-id="58cc4-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="58cc4-143">Voor het eerste en laatste teken moet u een letter of een cijfer gebruiken. Het wordt aanbevolen om alleen kleine letters te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="58cc4-144">**Implementeer de toepassing**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="58cc4-145">Klik om de voorwaarden en bepalingen te accepteren.</span><span class="sxs-lookup"><span data-stu-id="58cc4-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="58cc4-146">Klik op **Kopen**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="58cc4-147">Controleer de voortgang van de implementatie door te klikken op **Meldingen** (het belpictogram naast het zoekvak).</span><span class="sxs-lookup"><span data-stu-id="58cc4-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="58cc4-148">Implementatie van de app Wingtip SaaS duurt ongeveer vijf minuten.</span><span class="sxs-lookup"><span data-stu-id="58cc4-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![implementatie gelukt](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="58cc4-150">Downloaden en de scripts Wingtip SaaS deblokkeren</span><span class="sxs-lookup"><span data-stu-id="58cc4-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="58cc4-151">Download de bron en het beheer scripts tijdens de implementatie van de toepassing.</span><span class="sxs-lookup"><span data-stu-id="58cc4-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="58cc4-152">Uitvoerbare inhoud (scripts, dll-bestanden) mogelijk geblokkeerd door Windows als zip-bestanden van een externe bron wordt gedownload en uitgepakt.</span><span class="sxs-lookup"><span data-stu-id="58cc4-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="58cc4-153">Bij het uitpakken van de scripts uit een zipbestand, volgt u onderstaande stappen voor het deblokkeren van het ZIP-bestand voor het uitpakken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="58cc4-154">Dit zorgt ervoor dat de scripts mogen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="58cc4-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="58cc4-155">Blader naar [de github-repo Wingtip SaaS](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="58cc4-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="58cc4-156">Klik op **klonen of downloaden**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="58cc4-157">Klik op **ZIP downloaden** en sla het bestand.</span><span class="sxs-lookup"><span data-stu-id="58cc4-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="58cc4-158">Met de rechtermuisknop op de **WingtipSaaS master.zip** bestand en selecteer **eigenschappen**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="58cc4-159">Op de **algemene** tabblad **blokkering**, en klik op **toepassen**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="58cc4-160">Klik op **OK**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-160">Click **OK**.</span></span>
1. <span data-ttu-id="58cc4-161">Pak de bestanden.</span><span class="sxs-lookup"><span data-stu-id="58cc4-161">Extract the files.</span></span>

<span data-ttu-id="58cc4-162">Scripts bevinden zich in de *... \\WingtipSaaS master\\Learning-Modules* map.</span><span class="sxs-lookup"><span data-stu-id="58cc4-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="58cc4-163">Het configuratiebestand voor deze implementatie bijwerken</span><span class="sxs-lookup"><span data-stu-id="58cc4-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="58cc4-164">Voordat u de scripts, stelt u de *resourcegroep* en *gebruiker* in waarden **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="58cc4-165">Deze variabelen ingesteld op de waarden die u tijdens de implementatie instellen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="58cc4-166">Open ...\\Learning Modules\\*UserConfig.psm1* in de *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="58cc4-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="58cc4-167">Update *ResourceGroupName* en *naam* met de specifieke waarden voor uw implementatie (op regels 10 en 11 alleen).</span><span class="sxs-lookup"><span data-stu-id="58cc4-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="58cc4-168">De wijzigingen opslaan!</span><span class="sxs-lookup"><span data-stu-id="58cc4-168">Save the changes!</span></span>

<span data-ttu-id="58cc4-169">Hier in te stellen gewoon voorkomt u moet deze implementatie-specifieke waarden in elk script bijwerken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="58cc4-170">De toepassing uitvoeren</span><span class="sxs-lookup"><span data-stu-id="58cc4-170">Run the application</span></span>

<span data-ttu-id="58cc4-171">In de app worden venues gepresenteerd, zoals concertzalen, jazzclubs en stadions, die bepaalde evenementen organiseren.</span><span class="sxs-lookup"><span data-stu-id="58cc4-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="58cc4-172">Plaatsen registreren als klanten (of tenants) van het platform Wingtip voor een eenvoudige manier om een lijst van gebeurtenissen en tickets verkopen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="58cc4-173">Elke venue krijgt een eigen web-app voor het beheren en vermelden van hun evenementen en het verkopen van tickets, onafhankelijk en gescheiden van andere tenants.</span><span class="sxs-lookup"><span data-stu-id="58cc4-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="58cc4-174">Achter de opgehaald elke tenant een SQL-database die is geïmplementeerd in een elastische SQL-groep.</span><span class="sxs-lookup"><span data-stu-id="58cc4-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="58cc4-175">Een centrale **Events Hub** bevat een lijst met tenant-URL's die specifiek zijn voor uw implementatie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="58cc4-176">Open de _gebeurtenissen Hub_ in uw webbrowser: http://events.wtp.&lt; GEBRUIKER&gt;. trafficmanager.net (vervangen door de naam van uw implementatie gebruiker):</span><span class="sxs-lookup"><span data-stu-id="58cc4-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![events hub](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="58cc4-178">Klik in de **Events Hub** op *Fabrikam Jazz Club*.</span><span class="sxs-lookup"><span data-stu-id="58cc4-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Gebeurtenissen](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="58cc4-180">Om te bepalen van de distributie van inkomende aanvragen en het gebruik van de app [ *Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="58cc4-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="58cc4-181">De pagina's van evenementen, die specifiek zijn voor een tenant, werken alleen als de namen van de tenants zijn opgenomen in de URL's.</span><span class="sxs-lookup"><span data-stu-id="58cc4-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="58cc4-182">Alle tenant-URL's bevatten de unieke waarde voor *Gebruiker* die u eerder hebt opgegeven en hebben deze notatie: http://events.wtp.&lt;GEBRUIKER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="58cc4-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="58cc4-183">De app parseert de tenantnaam uit de URL en gebruikt deze om een sleutel te maken en zo via [*Shard Map Manager*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management) toegang te krijgen tot een catalogus.</span><span class="sxs-lookup"><span data-stu-id="58cc4-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="58cc4-184">De sleutel van de catalogus wordt toegewezen aan de locatie van de database van de tenant.</span><span class="sxs-lookup"><span data-stu-id="58cc4-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="58cc4-185">De **gebeurtenissen Hub** uitgebreide metagegevens in de catalogus gebruikt voor het ophalen van de tenantnaam die zijn gekoppeld aan elke database een van de lijst met URL's.</span><span class="sxs-lookup"><span data-stu-id="58cc4-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="58cc4-186">In een productieomgeving wordt er meestal een CNAME DNS-record gemaakt om [*het internetdomein van uw bedrijf te laten verwijzen*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) naar het profiel van Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="58cc4-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="58cc4-187">Workloads genereren voor de tenant-databases</span><span class="sxs-lookup"><span data-stu-id="58cc4-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="58cc4-188">Nu dat de app is geïmplementeerd, laten we aan de slag!</span><span class="sxs-lookup"><span data-stu-id="58cc4-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="58cc4-189">De *Demo LoadGenerator* PowerShell-script wordt gestart van een werkbelasting die wordt uitgevoerd op alle databases van de tenant.</span><span class="sxs-lookup"><span data-stu-id="58cc4-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="58cc4-190">De werkelijke belasting van veel SaaS-apps is doorgaans sporadisch onvoorspelbaar.</span><span class="sxs-lookup"><span data-stu-id="58cc4-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="58cc4-191">Om te simuleren belasting, levert de generator belasting verdeeld over alle tenants, met willekeurige bursts op elke tenant optreedt op willekeurige intervallen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="58cc4-192">Hierdoor duurt het enkele minuten voor het patroon load te geven, dus het is raadzaam om te laten de generator uitvoeren voor ten minste drie tot vier minuten voor de bewaking van de belasting.</span><span class="sxs-lookup"><span data-stu-id="58cc4-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="58cc4-193">In de *PowerShell ISE*, open de... \\Learning-Modules\\hulpprogramma's\\*Demo LoadGenerator.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="58cc4-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="58cc4-194">Druk op **F5** om het script uit te voeren en de load-generator te starten (gebruik voorlopig de standaardwaarden van het script).</span><span class="sxs-lookup"><span data-stu-id="58cc4-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="58cc4-195">Voor het uitvoeren van andere scripts, een nieuw PowerShell ISE-venster te openen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="58cc4-196">De load-generator wordt uitgevoerd als een reeks taken in uw lokale PowerShell-sessie.</span><span class="sxs-lookup"><span data-stu-id="58cc4-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="58cc4-197">De *Demo LoadGenerator.ps1* script serversysteemstatus van de daadwerkelijke laadbewerking generator-script, dat wordt uitgevoerd als een taak voorgrond plus een reeks achtergrond generatie load-taken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="58cc4-198">Een load-generator-taak wordt aangeroepen voor elke database die is geregistreerd in de catalogus.</span><span class="sxs-lookup"><span data-stu-id="58cc4-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="58cc4-199">De taken worden uitgevoerd in uw lokale PowerShell-sessie, zodat u de PowerShell-sessie sluit alle taken stopt.</span><span class="sxs-lookup"><span data-stu-id="58cc4-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="58cc4-200">Als u uw machine onderbreekt, kan load generatie is onderbroken en wordt hervat wanneer u uw machine ontwaken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="58cc4-201">Zodra de load-generator generatie load-taken voor elke tenant roept, blijft de voorgrond-taak in een status-taak wordt aangeroepen, waarbij aanvullende achtergrondtaken wordt gestart voor een nieuwe tenants die vervolgens zijn ingericht.</span><span class="sxs-lookup"><span data-stu-id="58cc4-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="58cc4-202">U kunt *Ctrl-C* of druk op de *stoppen* klikken om de voorgrond-taak stoppen, maar bestaande achtergrondtaken gaat verder met het genereren van belasting op elke database.</span><span class="sxs-lookup"><span data-stu-id="58cc4-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="58cc4-203">Als u wilt bewaken en beheren van de achtergrondtaken, gebruikt u *Get-Job*, *Receive-Job* en *taak stoppen*.</span><span class="sxs-lookup"><span data-stu-id="58cc4-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="58cc4-204">Terwijl de voorgrond-taak wordt uitgevoerd, kunt u dezelfde PowerShell-sessie niet gebruiken om uit te voeren van andere scripts.</span><span class="sxs-lookup"><span data-stu-id="58cc4-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="58cc4-205">Voor het uitvoeren van andere scripts, een nieuw PowerShell ISE-venster te openen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="58cc4-206">Als u de load-generator-sessie opnieuw starten wilt, bijvoorbeeld met andere parameters, u kunt de voorgrond-taak stoppen en voer vervolgens opnieuw de *Demo LoadGenerator.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="58cc4-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="58cc4-207">Opnieuw uit te voeren *Demo LoadGenerator.ps1* eerste stopt alle momenteel wordt uitgevoerd, taken en start vervolgens opnieuw de generator, serversysteemstatus van een nieuwe set taken met de huidige parameters.</span><span class="sxs-lookup"><span data-stu-id="58cc4-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="58cc4-208">Laat de load-generator uitgevoerd in de status van de taak wordt aangeroepen op dit moment.</span><span class="sxs-lookup"><span data-stu-id="58cc4-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="58cc4-209">Een nieuwe tenant inrichten</span><span class="sxs-lookup"><span data-stu-id="58cc4-209">Provision a new tenant</span></span>

<span data-ttu-id="58cc4-210">De eerste implementatie maakt drie voorbeeld tenants, maar we een andere tenant om te zien hoe dit heeft gevolgen voor de gedistribueerde toepassing maken.</span><span class="sxs-lookup"><span data-stu-id="58cc4-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="58cc4-211">De werkstroom van de inrichting tenants Wingtip SaaS wordt beschreven in de [inrichten en catalogus zelfstudie](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="58cc4-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="58cc4-212">In deze stap maakt maken u snel een nieuwe tenant.</span><span class="sxs-lookup"><span data-stu-id="58cc4-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="58cc4-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in de *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="58cc4-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="58cc4-214">Druk op **F5** het script uit te voeren (laat de standaardwaarden voor deze oefening).</span><span class="sxs-lookup"><span data-stu-id="58cc4-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="58cc4-215">Veel Wingtip SaaS-scripts gebruiken *$PSScriptRoot* om toe te staan navigeren door mappen voor het aanroepen van functies in andere scripts.</span><span class="sxs-lookup"><span data-stu-id="58cc4-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="58cc4-216">Deze variabele wordt alleen beoordeeld als het script wordt uitgevoerd, door te drukken **F5**.</span><span class="sxs-lookup"><span data-stu-id="58cc4-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="58cc4-217">Syntaxismarkering en een selectie actief (**F8**) kunnen leiden tot fouten, indrukt **F5** wanneer het uitvoeren van scripts.</span><span class="sxs-lookup"><span data-stu-id="58cc4-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="58cc4-218">De nieuwe tenant-database wordt gemaakt in een elastische SQL-groep, geïnitialiseerd en geregistreerd in de catalogus.</span><span class="sxs-lookup"><span data-stu-id="58cc4-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="58cc4-219">Na een geslaagde inrichting wordt de nieuwe tenant de ticket verkopen *gebeurtenissen* site wordt weergegeven in uw browser:</span><span class="sxs-lookup"><span data-stu-id="58cc4-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Nieuwe tenant](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="58cc4-221">Vernieuw de *gebeurtenissen Hub* en de nieuwe tenant wordt nu weergegeven in de lijst.</span><span class="sxs-lookup"><span data-stu-id="58cc4-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="58cc4-222">Servers, pools en tenant-databases</span><span class="sxs-lookup"><span data-stu-id="58cc4-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="58cc4-223">Nu dat u hebt gestart met het uitvoeren van een werklast in de verzameling tenants, bekijken we enkele van de bronnen die zijn geïmplementeerd:</span><span class="sxs-lookup"><span data-stu-id="58cc4-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="58cc4-224">In de [Azure-portal](http://portal.azure.com), blader naar de lijst met SQL-servers en open de **catalogus -&lt;gebruiker&gt;**  server.</span><span class="sxs-lookup"><span data-stu-id="58cc4-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="58cc4-225">De catalogusserver bevat twee databases:</span><span class="sxs-lookup"><span data-stu-id="58cc4-225">The catalog server contains two databases.</span></span> <span data-ttu-id="58cc4-226">De **tenantcatalog**, en de **basetenantdb** (een lege *gouden* of sjabloondatabase die wordt gekopieerd voor het maken van nieuwe tenants).</span><span class="sxs-lookup"><span data-stu-id="58cc4-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![databases](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="58cc4-228">Ga terug naar de lijst met SQL-servers en open de **tenants1 -&lt;gebruiker&gt;**  server die de tenant-databases bevat.</span><span class="sxs-lookup"><span data-stu-id="58cc4-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="58cc4-229">Elke tenant-database is een _Standard elastische_ database in een standaard 50 eDTU-pool.</span><span class="sxs-lookup"><span data-stu-id="58cc4-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="58cc4-230">Ook ziet er is een _Rode esdoorn race_ database, de tenant-database die u eerder hebt ingericht.</span><span class="sxs-lookup"><span data-stu-id="58cc4-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="58cc4-232">De pool bewaken</span><span class="sxs-lookup"><span data-stu-id="58cc4-232">Monitor the pool</span></span>

<span data-ttu-id="58cc4-233">Als de load-generator enkele minuten actief is, moeten er voldoende gegevens beschikbaar zijn om eens te kijken naar enkele bewakingsfuncties die zijn ingebouwd in pools en databases.</span><span class="sxs-lookup"><span data-stu-id="58cc4-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="58cc4-234">Blader naar de server **tenants1 -&lt;gebruiker&gt;**, en klik op **Pool1** om weer te geven Resourcegebruik voor de pool (de load-generator uitgevoerd in de volgende grafieken voor een uur):</span><span class="sxs-lookup"><span data-stu-id="58cc4-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![pool bewaken](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="58cc4-236">Wat deze twee grafieken mooi laten zien, is dat elastische pools en SQL Database uitermate geschikt zijn voor workloads van SaaS-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="58cc4-237">Vier databases die elk 'bursten' met maximaal 40 eDTU's kunnen makkelijk worden ondersteund in een pool van 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="58cc4-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="58cc4-238">Als ze zijn ingericht als zelfstandige databases, zoals elke moeten een S2 (50 DTU) voor de ondersteuning van de bursts.</span><span class="sxs-lookup"><span data-stu-id="58cc4-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="58cc4-239">De kosten van 4 zelfstandige S2 databases zijn bijna 3 keer de prijs van de groep en de toepassingen nog volop mogelijkheden voor veel meer databases.</span><span class="sxs-lookup"><span data-stu-id="58cc4-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="58cc4-240">In de praktijk situaties worden SQL-Database klanten momenteel uitgevoerd maximaal 500 databases in 200 eDTU-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="58cc4-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="58cc4-241">Zie voor meer informatie de [zelfstudie over prestatiebewaking](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="58cc4-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="58cc4-242">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="58cc4-242">Next steps</span></span>

<span data-ttu-id="58cc4-243">In deze zelfstudie hebt u het volgende geleerd:</span><span class="sxs-lookup"><span data-stu-id="58cc4-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="58cc4-244">De Wingtip SaaS-toepassing implementeren</span><span class="sxs-lookup"><span data-stu-id="58cc4-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="58cc4-245">Informatie over de servers, pools en databases waaruit de app bestaat</span><span class="sxs-lookup"><span data-stu-id="58cc4-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="58cc4-246">Tenants worden via de *catalogus* toegewezen aan hun gegevens</span><span class="sxs-lookup"><span data-stu-id="58cc4-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="58cc4-247">Inrichten van nieuwe tenants</span><span class="sxs-lookup"><span data-stu-id="58cc4-247">How to provision new tenants</span></span>
> * <span data-ttu-id="58cc4-248">Poolgebruik bekijken om de activiteit in een tenant te controleren</span><span class="sxs-lookup"><span data-stu-id="58cc4-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="58cc4-249">Voorbeeldresources verwijderen om gerelateerde facturering te stoppen</span><span class="sxs-lookup"><span data-stu-id="58cc4-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="58cc4-250">U kunt nu [de zelfstudie over het inrichten en catalogiseren van tenants](sql-database-saas-tutorial-provision-and-catalog.md) volgen als u dat wilt.</span><span class="sxs-lookup"><span data-stu-id="58cc4-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="58cc4-251">Aanvullende bronnen</span><span class="sxs-lookup"><span data-stu-id="58cc4-251">Additional resources</span></span>

* <span data-ttu-id="58cc4-252">Aanvullende [zelfstudies die zijn gebaseerd op de Wingtip SaaS-toepassing](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="58cc4-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="58cc4-253">Informatie over elastische pools vindt u in [*Wat is een elastische pool van Azure SQL?*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool).</span><span class="sxs-lookup"><span data-stu-id="58cc4-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="58cc4-254">Informatie over elastische taken vindt u in [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview) (Uitgeschaalde clouddatabases beheren).</span><span class="sxs-lookup"><span data-stu-id="58cc4-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="58cc4-255">Informatie over SaaS-toepassingen voor meerdere tenants vindt u in [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications) (Ontwerppatronen voor SaaS-toepassingen voor meerdere tenants).</span><span class="sxs-lookup"><span data-stu-id="58cc4-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
