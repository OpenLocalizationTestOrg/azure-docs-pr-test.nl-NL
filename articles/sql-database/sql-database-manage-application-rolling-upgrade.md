---
title: aaaRolling toepassingsupgrades - Azure SQL Database | Microsoft Docs
description: Meer informatie over hoe Azure SQL Database geo-replicatie toouse toosupport online upgrades van uw cloudtoepassing.
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 58f42859-1e37-463c-a3d8-a3ca2e867148
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/16/2016
ms.author: sashan
ms.openlocfilehash: 18c56300916d129bff141624cc5c416b500408d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="managing-rolling-upgrades-of-cloud-applications-using-sql-database-active-geo-replication"></a><span data-ttu-id="bfbb0-103">Het beheren van rollende upgrades van cloud-toepassingen met behulp van SQL-Database actieve geo-replicatie</span><span class="sxs-lookup"><span data-stu-id="bfbb0-103">Managing rolling upgrades of cloud applications using SQL Database active geo-replication</span></span>
> [!NOTE]
> <span data-ttu-id="bfbb0-104">[Actieve geo-replicatie](sql-database-geo-replication-overview.md) is nu beschikbaar voor alle databases in alle lagen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-104">[Active geo-replication](sql-database-geo-replication-overview.md) is now available for all databases in all tiers.</span></span>
> 

<span data-ttu-id="bfbb0-105">Meer informatie over hoe toouse [geo-replicatie](sql-database-geo-replication-overview.md) in SQL-Database tooenable rolling upgrades van uw cloudtoepassing.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-105">Learn how toouse [geo-replication](sql-database-geo-replication-overview.md) in SQL Database tooenable rolling upgrades of your cloud application.</span></span> <span data-ttu-id="bfbb0-106">Omdat de upgrade is een bewerking verstoren, moet het deel van uw zakelijke continuïteit planning en ontwerp.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-106">Because upgrade is a disruptive operation, it should be part of your business continuity planning and design.</span></span> <span data-ttu-id="bfbb0-107">In dit artikel we twee verschillende methoden organiseren Hallo kijken upgradeproces en bespreken Hallo voordelen en -en nadelen van elke optie.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-107">In this article we look at two different methods of orchestrating hello upgrade process, and discuss hello benefits and trade-offs of each option.</span></span> <span data-ttu-id="bfbb0-108">Voor de toepassing hello van dit artikel gebruiken we een eenvoudige toepassing die uit een website verbonden tooa individuele database als de gegevenslaag bestaat.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-108">For hello purposes of this article we will use a simple application that consists of a web site connected tooa single database as its data tier.</span></span> <span data-ttu-id="bfbb0-109">Ons doel is tooupgrade versie 1 van Hallo toepassing tooversion 2 zonder aanzienlijke invloed op Hallo eindgebruikerservaring.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-109">Our goal is tooupgrade version 1 of hello application tooversion 2 without any significant impact on hello end-user experience.</span></span> 

<span data-ttu-id="bfbb0-110">Bij het evalueren van de upgradeopties Hallo moet u Hallo volgende factoren overwegen:</span><span class="sxs-lookup"><span data-stu-id="bfbb0-110">When evaluating hello upgrade options you should consider hello following factors:</span></span>

* <span data-ttu-id="bfbb0-111">De impact op de beschikbaarheid van de toepassing tijdens upgrades.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-111">Impact on application availability during upgrades.</span></span> <span data-ttu-id="bfbb0-112">Hoe lang Hallo toepassing functie mogelijk beperkt of gedegradeerd.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-112">How long hello application function may be limited or degraded.</span></span>
* <span data-ttu-id="bfbb0-113">Mogelijkheid tooroll terug in het geval van een upgrade mislukt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-113">Ability tooroll back in case of an upgrade failure.</span></span>
* <span data-ttu-id="bfbb0-114">De kwetsbaarheid van de toepassing hello als een niet-verwante onherstelbare fout tijdens de upgrade Hallo optreedt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-114">Vulnerability of hello application if an unrelated catastrophic failure occurs during hello upgrade.</span></span>
* <span data-ttu-id="bfbb0-115">Totaal aantal dollar kosten.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-115">Total dollar cost.</span></span>  <span data-ttu-id="bfbb0-116">Dit omvat aanvullende redundantie en incrementele kosten van tijdelijke Hallo-onderdelen die door het upgradeproces hello worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-116">This includes additional redundancy and incremental costs of hello temporary components  used by hello upgrade process.</span></span> 

## <a name="upgrading-applications-that-rely-on-database-backups-for-disaster-recovery"></a><span data-ttu-id="bfbb0-117">Bijwerken van toepassingen die afhankelijk van de databaseback-ups voor herstel na noodgevallen zijn</span><span class="sxs-lookup"><span data-stu-id="bfbb0-117">Upgrading applications that rely on database backups for disaster recovery</span></span>
<span data-ttu-id="bfbb0-118">Als uw toepassing afhankelijk van automatische databaseback-ups is en geo-herstel voor herstel na noodgevallen gebruikt, is het meestal geïmplementeerde tooa één Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-118">If your application relies on automatic database backups and uses geo-restore for disaster recovery, it is usually deployed tooa single Azure region.</span></span> <span data-ttu-id="bfbb0-119">In dit geval omvat Hallo upgradeproces het maken van een back-implementatie van alle onderdelen die zijn betrokken bij een upgrade van Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-119">In this case hello upgrade process involves creating a backup deployment of all application components involved in hello upgrade.</span></span> <span data-ttu-id="bfbb0-120">toominimize wordt u gebruikmaken van Azure Traffic Manager (WATM) met Hallo failover profiel Hallo overlast.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-120">toominimize hello end-user disruption you will leverage Azure Traffic Manager (WATM) with hello failover profile.</span></span>  <span data-ttu-id="bfbb0-121">Hallo volgende diagram illustreert Hallo operationele omgeving eerdere toohello upgradeproces.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-121">hello following diagram illustrates hello operational environment prior toohello upgrade process.</span></span> <span data-ttu-id="bfbb0-122">Hallo eindpunt <i>contoso 1.azurewebsites.net</i> vertegenwoordigt een productiesite van Hallo-toepassing die toobe bijgewerkt behoeften.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-122">hello endpoint <i>contoso-1.azurewebsites.net</i> represents a production slot of hello application that needs toobe upgraded.</span></span> <span data-ttu-id="bfbb0-123">tooenable hello mogelijkheid tooroll terug Hallo upgrade, moet u een fase sleuf maken met een volledig gesynchroniseerde kopie van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-123">tooenable hello ability tooroll back hello upgrade, you need create a stage slot with a fully synchronized copy of hello application.</span></span> <span data-ttu-id="bfbb0-124">Hallo zijn volgende stappen vereist tooprepare Hallo toepassing hello upgrade:</span><span class="sxs-lookup"><span data-stu-id="bfbb0-124">hello following steps are required tooprepare hello application for hello upgrade:</span></span>

1. <span data-ttu-id="bfbb0-125">Een fase sleuf maken voor Hallo upgrade.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-125">Create a stage slot for hello upgrade.</span></span> <span data-ttu-id="bfbb0-126">toodo die een secundaire database (1) maken en implementeren van een identieke website in Hallo dezelfde Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-126">toodo that create a secondary database (1) and deploy an identical web site in hello same Azure region.</span></span> <span data-ttu-id="bfbb0-127">Hallo secundaire toosee bewaken als Hallo seeding van proces is voltooid.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-127">Monitor hello secondary toosee if hello seeding process is completed.</span></span>
2. <span data-ttu-id="bfbb0-128">Een failover-profiel maken in WATM met <i>contoso 1.azurewebsites.net</i> als online-eindpunt en <i>contoso 2.azurewebsites.net</i> als offline.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-128">Create a failover profile in WATM with <i>contoso-1.azurewebsites.net</i> as online endpoint and <i>contoso-2.azurewebsites.net</i> as offline.</span></span> 

> [!NOTE]
> <span data-ttu-id="bfbb0-129">Opmerking Hallo voorbereidende stappen heeft geen invloed op de toepassing hello in productiesite Hallo en deze kan worden gebruikt in de modus volledige toegang.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-129">Note hello preparation steps will not impact hello application in hello production slot and it can function in full access mode.</span></span>
>  

![Configuratie van SQL Database Ga-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option1-1.png)

<span data-ttu-id="bfbb0-132">Zodra Hallo voorbereidende stappen zijn voltooid Hallo toepassing is gereed voor de daadwerkelijke upgrade Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-132">Once hello preparation steps are completed hello application is ready for hello actual upgrade.</span></span> <span data-ttu-id="bfbb0-133">Hallo volgende diagram illustreert Hallo stappen voor het Hallo-upgradeproces.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-133">hello following diagram illustrates hello steps involved in hello upgrade process.</span></span> 

1. <span data-ttu-id="bfbb0-134">De primaire database Hallo in Hallo productie sleuf tooread alleen-lezen-modus (3) instellen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-134">Set hello primary database in hello production slot tooread-only mode (3).</span></span> <span data-ttu-id="bfbb0-135">Dit wordt gegarandeerd dat Hallo productie-exemplaar van de toepassing hello (V1) blijven alleen-lezen tijdens de upgrade van Hallo waardoor wordt voorkomen dat de gegevensdivergentie Hallo tussen hello V1- en V2-database-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-135">This will guarantee that hello production instance of hello application (V1) will remain read-only during hello upgrade thus preventing hello data divergence between hello V1 and V2 database instances.</span></span>  
2. <span data-ttu-id="bfbb0-136">Verbreek de verbinding met de secundaire database Hallo Hallo geplande beëindiging modus (4).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-136">Disconnect hello secondary database using hello planned termination mode (4).</span></span> <span data-ttu-id="bfbb0-137">Er wordt een volledig gesynchroniseerde onafhankelijke kopie van de primaire database Hallo gemaakt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-137">It will create a fully synchronized independent copy of hello primary database.</span></span> <span data-ttu-id="bfbb0-138">Deze database wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-138">This database will be upgraded.</span></span>
3. <span data-ttu-id="bfbb0-139">Hallo primaire database tooread schrijven modus inschakelen en Hallo upgrade-script uitvoeren in Hallo fase sleuf (5).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-139">Turn hello primary database tooread-write mode and run hello upgrade script in hello stage slot  (5).</span></span>     

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option1-2.png)

<span data-ttu-id="bfbb0-142">Als het Hallo-upgrade is voltooid maar u bent nu klaar tooswitch Hallo eindgebruikers toohello gefaseerde kopie Hallo toepassing.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-142">If hello upgrade completed successfully you are now ready tooswitch hello end users toohello staged copy hello application.</span></span> <span data-ttu-id="bfbb0-143">Deze worden nu de productiesite Hallo van Hallo-toepassing.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-143">It will now become hello production slot of hello application.</span></span>  <span data-ttu-id="bfbb0-144">Dit omvat het een paar meer stappen zoals wordt geïllustreerd op Hallo volgende diagram.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-144">This involves a few more steps as illustrated on hello following diagram.</span></span>

1. <span data-ttu-id="bfbb0-145">Hallo online endpoint te schakelen in Hallo WATM profiel<i>contoso 2.azurewebsites.net</i>, welke punten toohello V2-versie van Hallo-website (6).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-145">Switch hello online endpoint in hello WATM profile too<i>contoso-2.azurewebsites.net</i>, which points toohello V2 version of hello web site (6).</span></span> <span data-ttu-id="bfbb0-146">Nu wordt het Hallo-productiesite Hello V2-toepassing en Hallo eindgebruiker verkeer gerichte tooit is.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-146">It now becomes hello production slot with hello V2 application and hello end-user traffic is directed tooit.</span></span>  
2. <span data-ttu-id="bfbb0-147">U hoeft niet meer Hallo V1-toepassingsonderdelen zodat u veilig kunt verwijderen (7).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-147">If you no longer need hello V1 application components so you can safely remove them (7).</span></span>   

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option1-3.png)

<span data-ttu-id="bfbb0-150">Als Hallo upgradeproces mislukt is, bijvoorbeeld vanwege fout in Hallo upgrade-script, tooan Hallo fase sleuf moet worden overwogen aangetast.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-150">If hello upgrade process is unsuccessful, for example due tooan error in hello upgrade script, hello stage slot should be considered compromised.</span></span> <span data-ttu-id="bfbb0-151">tooroll back Hallo toohello vóór de upgrade toepassingsstatus u gewoon de toepassing hello in Hallo productie sleuf toofull toegang herstellen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-151">tooroll back hello application toohello pre-upgrade state you simply revert hello application in hello production slot toofull access.</span></span> <span data-ttu-id="bfbb0-152">Hallo-stappen worden op Hallo volgende diagram weergegeven.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-152">hello steps involved are shown on hello next diagram.</span></span>    

1. <span data-ttu-id="bfbb0-153">Hallo-database kopiëren tooread schrijven modus (8) instellen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-153">Set hello database copy tooread-write mode (8).</span></span> <span data-ttu-id="bfbb0-154">Hiermee herstelt u volledige V1 functioneel in de productiesite Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-154">This will restore hello full V1 functionally in hello production slot.</span></span>
2. <span data-ttu-id="bfbb0-155">Hallo hoofdmap oorzaak analyses uitvoeren en Hallo geknoeid onderdelen verwijderen in Hallo fase sleuf (9).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-155">Perform hello root cause analysis and remove hello compromised components in hello stage slot (9).</span></span> 

<span data-ttu-id="bfbb0-156">Op dit moment Hallo toepassing volledig functioneel is en Hallo Upgradestappen kunnen worden herhaald.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-156">At this point hello application is fully functional and hello upgrade steps can be repeated.</span></span>

> [!NOTE]
> <span data-ttu-id="bfbb0-157">Hallo terugdraaien vereist geen wijzigingen in WATM profiel als deze al te verwijst<i>contoso 1.azurewebsites.net</i> zoals Hallo actief eindpunt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-157">hello rollback does not require changes in WATM profile as it already points too<i>contoso-1.azurewebsites.net</i> as hello active endpoint.</span></span>
> 
> 

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option1-4.png)

<span data-ttu-id="bfbb0-160">Hallo sleutel **voordeel** van deze optie is een toepassing in één regio met behulp van een aantal eenvoudige stappen te upgraden.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-160">hello key **advantage** of this option is that you can upgrade an application in a single region using a set of simple steps.</span></span> <span data-ttu-id="bfbb0-161">Hallo dollar van Hallo upgrade is relatief laag.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-161">hello dollar cost of hello upgrade is relatively low.</span></span> <span data-ttu-id="bfbb0-162">Hallo belangrijkste **afweging** is dat als er een onherstelbare fout optreedt tijdens Hallo upgrade Hallo toohello vóór de upgrade herstelstatus eruit ziet nieuwe implementatie van de toepassing hello in een andere regio en het Hallo-database herstellen van back-up met behulp van geo-herstel.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-162">hello main **tradeoff** is that if a catastrophic failure occurs during hello upgrade hello recovery toohello pre-upgrade state will involve re-deployment of hello application in a different region and restoring hello database from backup using geo-restore.</span></span> <span data-ttu-id="bfbb0-163">Dit proces zal leiden tot aanzienlijke downtime.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-163">This process will result in significant downtime.</span></span>   

## <a name="upgrading-applications-that-rely-on-database-geo-replication-for-disaster-recovery"></a><span data-ttu-id="bfbb0-164">Bijwerken van toepassingen die afhankelijk van de database geo-replicatie voor herstel na noodgevallen zijn</span><span class="sxs-lookup"><span data-stu-id="bfbb0-164">Upgrading applications that rely on database geo-replication for disaster recovery</span></span>
<span data-ttu-id="bfbb0-165">Als uw toepassing gebruikmaakt van geo-replicatie voor bedrijfscontinuïteit, is het geïmplementeerde tooat minimaal twee verschillende regio's met een actieve implementatie in de primaire regio en een stand-by-implementatie in de regio van de back-up.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-165">If your application leverages geo-replication for business continuity, it is deployed  tooat least two different regions with an active deployment in Primary region and a standby deployment in Backup region.</span></span> <span data-ttu-id="bfbb0-166">Bovendien vermeld toohello factoren eerder, Hallo upgradeproces moet garanderen dat:</span><span class="sxs-lookup"><span data-stu-id="bfbb0-166">In addition toohello factors mentioned earlier, hello upgrade process must guarantee that:</span></span>

* <span data-ttu-id="bfbb0-167">Hallo-toepassing blijft te allen tijde tijdens het upgradeproces Hallo onherstelbare fouten beveiligd</span><span class="sxs-lookup"><span data-stu-id="bfbb0-167">hello application remains protected from catastrophic failures at all times during hello upgrade process</span></span>
* <span data-ttu-id="bfbb0-168">Hallo geografisch redundante componenten van de toepassing hello zijn parallel met actieve Hallo-onderdelen bijgewerkt</span><span class="sxs-lookup"><span data-stu-id="bfbb0-168">hello geo-redundant components of hello application are upgraded in parallel with hello active components</span></span>

<span data-ttu-id="bfbb0-169">tooachieve deze doelstellingen die u zal gebruikmaken van Azure Traffic Manager (WATM) met behulp van failover Hallo profiel met een actieve en drie back-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-169">tooachieve these goals you will leverage Azure Traffic Manager (WATM) using hello failover profile with one active and three backup endpoints.</span></span>  <span data-ttu-id="bfbb0-170">Hallo volgende diagram illustreert Hallo operationele omgeving eerdere toohello upgradeproces.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-170">hello following diagram illustrates hello operational environment prior toohello upgrade process.</span></span> <span data-ttu-id="bfbb0-171">Hallo websites <i>contoso 1.azurewebsites.net</i> en <i>contoso dr.azurewebsites.net</i> vertegenwoordigen een productiesite van de toepassing hello met volledige geografische redundantie.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-171">hello web sites <i>contoso-1.azurewebsites.net</i> and <i>contoso-dr.azurewebsites.net</i> represent a production slot of hello application with full geographic redundancy.</span></span> <span data-ttu-id="bfbb0-172">tooenable hello mogelijkheid tooroll terug Hallo upgrade, moet u een fase sleuf maken met een volledig gesynchroniseerde kopie van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-172">tooenable hello ability tooroll back hello upgrade, you need create a stage slot with a fully synchronized copy of hello application.</span></span> <span data-ttu-id="bfbb0-173">Omdat u nodig hebt tooensure die toepassing hello snel herstellen kunt als een onherstelbare fout tijdens het upgradeproces hello optreedt, moet Hallo fase sleuf toobe geografisch redundante ook.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-173">Because you need tooensure that hello application can quickly recover in case a catastrophic failure occurs during hello upgrade process, hello stage slot needs toobe geo-redundant as well.</span></span> <span data-ttu-id="bfbb0-174">Hallo zijn volgende stappen vereist tooprepare Hallo toepassing hello upgrade:</span><span class="sxs-lookup"><span data-stu-id="bfbb0-174">hello following steps are required tooprepare hello application for hello upgrade:</span></span>

1. <span data-ttu-id="bfbb0-175">Een fase sleuf maken voor Hallo upgrade.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-175">Create a stage slot for hello upgrade.</span></span> <span data-ttu-id="bfbb0-176">toodo die een secundaire database (1) maken en implementeren van een identieke kopie van de website Hallo in Hallo dezelfde Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-176">toodo that create a secondary database (1) and deploy an identical copy of hello web site in hello same Azure region.</span></span> <span data-ttu-id="bfbb0-177">Hallo secundaire toosee bewaken als Hallo seeding van proces is voltooid.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-177">Monitor hello secondary toosee if hello seeding process is completed.</span></span>
2. <span data-ttu-id="bfbb0-178">Een geografisch redundante secundaire database maken met Hallo fase sleuf van geo-replicatie Hallo secundaire database toohello back-regio (dit heet "teruggekoppeld geo-replicatie").</span><span class="sxs-lookup"><span data-stu-id="bfbb0-178">Create a geo-redundant secondary database in hello stage slot by geo-replicating hello secondary database toohello backup region (this is called "chained geo-replication").</span></span> <span data-ttu-id="bfbb0-179">Back-up secundaire toosee Hallo bewaken als Hallo seeding van proces is voltooid (3).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-179">Monitor hello backup secondary toosee if hello seeding process is completed (3).</span></span>
3. <span data-ttu-id="bfbb0-180">Maken van een stand-by-kopie van het Hallo-website in de back-regio Hallo en koppel deze toohello geografisch redundante secundaire (4).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-180">Create a standby copy of hello web site in hello backup region and link it toohello geo-redundant secondary (4).</span></span>  
4. <span data-ttu-id="bfbb0-181">Het toevoegen van extra eindpunten Hallo <i>contoso 2.azurewebsites.net</i> en <i>contoso 3.azurewebsites.net</i> toohello failover-profiel in WATM als offline eindpunten (5).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-181">Add hello additional endpoints <i>contoso-2.azurewebsites.net</i> and <i>contoso-3.azurewebsites.net</i> toohello failover profile in WATM as offline endpoints (5).</span></span> 

> [!NOTE]
> <span data-ttu-id="bfbb0-182">Opmerking Hallo voorbereidende stappen heeft geen invloed op de toepassing hello in productiesite Hallo en deze kan worden gebruikt in de modus volledige toegang.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-182">Note hello preparation steps will not impact hello application in hello production slot and it can function in full access mode.</span></span>
> 
> 

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option2-1.png)

<span data-ttu-id="bfbb0-185">Zodra Hallo voorbereidende stappen zijn voltooid, is Hallo fase sleuf gereed voor upgrade Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-185">Once hello preparation steps are completed, hello stage slot is ready for hello upgrade.</span></span> <span data-ttu-id="bfbb0-186">Hallo volgende diagram illustreert de Upgradestappen Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-186">hello following diagram illustrates hello upgrade steps.</span></span>

1. <span data-ttu-id="bfbb0-187">De primaire database Hallo instellen in Hallo productie sleuf tooread alleen-lezen-modus (6).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-187">Set hello primary database in hello production slot tooread-only mode (6).</span></span> <span data-ttu-id="bfbb0-188">Dit wordt gegarandeerd dat Hallo productie-exemplaar van de toepassing hello (V1) blijven alleen-lezen tijdens de upgrade van Hallo waardoor wordt voorkomen dat de gegevensdivergentie Hallo tussen hello V1- en V2-database-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-188">This will guarantee that hello production instance of hello application (V1) will remain read-only during hello upgrade thus preventing hello data divergence between hello V1 and V2 database instances.</span></span>  
2. <span data-ttu-id="bfbb0-189">Verbreek de verbinding met de secundaire database Hallo in Hallo met behulp van dezelfde regio Hallo geplande beëindiging-modus (7).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-189">Disconnect hello secondary database in hello same region using hello planned termination mode (7).</span></span> <span data-ttu-id="bfbb0-190">Er wordt een volledig gesynchroniseerde onafhankelijke kopie van de primaire database hello, wordt automatisch een primaire namelijk na beëindiging van Hallo gemaakt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-190">It will create a fully synchronized independent copy of hello primary database, which will automatically become a primary after hello termination.</span></span> <span data-ttu-id="bfbb0-191">Deze database wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-191">This database will be upgraded.</span></span>
3. <span data-ttu-id="bfbb0-192">Hallo primaire database in de modus voor Hallo fase sleuf tooread-schrijven en voeren Hallo upgrade-script (8).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-192">Turn hello primary database in hello stage slot tooread-write mode and run hello upgrade script (8).</span></span>    

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option2-2.png)

<span data-ttu-id="bfbb0-195">Als Hallo-upgrade is voltooid maar u bent nu klaar tooswitch Hallo eindgebruikers toohello V2-versie van Hallo-toepassing.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-195">If hello upgrade completed successfully you are now ready tooswitch hello end users toohello V2 version of hello application.</span></span> <span data-ttu-id="bfbb0-196">Hallo volgende diagram illustreert Hallo stappen die nodig zijn.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-196">hello following diagram illustrates hello steps involved.</span></span>

1. <span data-ttu-id="bfbb0-197">Hallo actief eindpunt te schakelen in Hallo WATM profiel<i>contoso 2.azurewebsites.net</i>, welke nu verwijst toohello V2-versie van Hallo-website (9).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-197">Switch hello active endpoint in hello WATM profile too<i>contoso-2.azurewebsites.net</i>, which now points toohello V2 version of hello web site (9).</span></span> <span data-ttu-id="bfbb0-198">Wordt nu een productiesite Hello V2-toepassing en eindgebruikers verkeer gerichte tooit is.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-198">It now becomes a production slot with hello V2 application and end-user traffic is directed tooit.</span></span> 
2. <span data-ttu-id="bfbb0-199">Als u niet langer Hallo V1 toepassing zodat u veilig kunt verwijderen (10 en 11).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-199">If you no longer need hello V1 application so you can safely remove it (10 and 11).</span></span>  

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option2-3.png)

<span data-ttu-id="bfbb0-202">Als Hallo upgradeproces mislukt is, bijvoorbeeld vanwege fout in Hallo upgrade-script, tooan Hallo fase sleuf moet worden overwogen aangetast.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-202">If hello upgrade process is unsuccessful, for example due tooan error in hello upgrade script, hello stage slot should be considered compromised.</span></span> <span data-ttu-id="bfbb0-203">tooroll back Hallo toohello vóór de upgrade toepassingsstatus u toousing Hallo toepassing in de productiesite Hallo met volledige toegang herstellen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-203">tooroll back hello application toohello pre-upgrade state you simply revert toousing hello application in hello production slot with full access.</span></span> <span data-ttu-id="bfbb0-204">Hallo-stappen worden op Hallo volgende diagram weergegeven.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-204">hello steps involved are shown on hello next diagram.</span></span>    

1. <span data-ttu-id="bfbb0-205">Set Hallo primaire database-exemplaar in Hallo sleuf tooread schrijven productiemodus (12).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-205">Set hello primary database copy in hello production slot tooread-write mode (12).</span></span> <span data-ttu-id="bfbb0-206">Hiermee herstelt u volledige V1 functioneel in de productiesite Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-206">This will restore hello full V1 functionally in hello production slot.</span></span>
2. <span data-ttu-id="bfbb0-207">Hallo hoofdmap oorzaak analyses uitvoeren en Hallo geknoeid onderdelen verwijderen in Hallo fase sleuf (13 en 14).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-207">Perform hello root cause analysis and remove hello compromised components in hello stage slot (13 and 14).</span></span> 

<span data-ttu-id="bfbb0-208">Op dit moment Hallo toepassing volledig functioneel is en Hallo Upgradestappen kunnen worden herhaald.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-208">At this point hello application is fully functional and hello upgrade steps can be repeated.</span></span>

> [!NOTE]
> <span data-ttu-id="bfbb0-209">Hallo terugdraaien vereist geen wijzigingen in WATM profiel als deze al te verwijst <i>contoso 1.azurewebsites.net</i> zoals Hallo actief eindpunt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-209">hello rollback does not require changes in WATM profile as it already points too <i>contoso-1.azurewebsites.net</i> as hello active endpoint.</span></span>
> 
> 

![Configuratie van SQL Database-geo-replicatie.](media/sql-database-manage-application-rolling-upgrade/Option2-4.png)

<span data-ttu-id="bfbb0-212">Hallo sleutel **voordeel** van deze optie is te upgraden zowel Hallo-toepassing en de geografisch redundante kopie parallel zonder uw zakelijke continuïteit tijdens de upgrade Hallo gevaar te brengen.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-212">hello key **advantage** of this option is that you can upgrade both hello application and its geo-redundant copy in parallel without compromising your business continuity during hello upgrade.</span></span> <span data-ttu-id="bfbb0-213">Hallo belangrijkste **afweging** is dat het dubbele redundantie van elk toepassingsonderdeel vereist, en daarom hogere Dollarkosten maakt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-213">hello main **tradeoff** is that it requires double redundancy of each application component and therefore incurs higher dollar cost.</span></span> <span data-ttu-id="bfbb0-214">Hierbij wordt ook een gecompliceerdere werkstroom.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-214">It also involves a more complicated workflow.</span></span> 

## <a name="summary"></a><span data-ttu-id="bfbb0-215">Samenvatting</span><span class="sxs-lookup"><span data-stu-id="bfbb0-215">Summary</span></span>
<span data-ttu-id="bfbb0-216">Hallo twee upgrade methoden die worden beschreven in artikel Hallo verschillen in complexiteit en het Hallo dollar kosten, maar ze zich richten op Hallo tijd wanneer de eindgebruiker Hallo beperkt tooread alleen-lezen bewerkingen is voor het minimaliseren.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-216">hello two upgrade methods described in hello article differ in complexity and hello dollar cost but they both focus on minimizing hello time when hello end user is limited tooread-only operations.</span></span> <span data-ttu-id="bfbb0-217">Die tijd is rechtstreeks door de duur Hallo van Hallo upgrade-script gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-217">That time is directly defined by hello duration of hello upgrade script.</span></span> <span data-ttu-id="bfbb0-218">Is niet afhankelijk van de databasegrootte hello, Hallo servicetier u hebt geselecteerd, de websiteconfiguratie Hallo en andere factoren die u kunt eenvoudig niet controleren.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-218">It does not depend on hello database size, hello service tier you chose, hello web site configuration and other factors that you cannot easily control.</span></span> <span data-ttu-id="bfbb0-219">Dit komt doordat alle Hallo voorbereidende stappen worden ontkoppeld van de Upgradestappen Hallo en zonder enige impact op Hallo productietoepassing kunnen worden gedaan.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-219">This is because all hello preparation steps are decoupled from hello upgrade steps and can be done without impacting hello production application.</span></span> <span data-ttu-id="bfbb0-220">Hallo-efficiëntie van Hallo upgrade-script is Hallo van groot belang dat de eindgebruikerservaring Hallo tijdens upgrades bepaalt.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-220">hello efficiency of hello upgrade script is hello key factor that determines hello end-user experience during upgrades.</span></span> <span data-ttu-id="bfbb0-221">Hallo van de beste manier kunt u deze verbeteren is dus uw inspanningen gericht op het Hallo-upgradescript zo efficiënt mogelijk te maken.</span><span class="sxs-lookup"><span data-stu-id="bfbb0-221">So hello best way you can improve it is by focusing your efforts on making hello upgrade script as efficient as possible.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="bfbb0-222">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="bfbb0-222">Next steps</span></span>
* <span data-ttu-id="bfbb0-223">Zie voor een overzicht van zakelijke continuïteit en scenario's [Business continuity overview](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-223">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="bfbb0-224">toolearn over Azure SQL Database automatische back-ups, Zie [geautomatiseerde back-ups van SQL-Database](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-224">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="bfbb0-225">toolearn over het gebruik van automatische back-ups voor herstel, Zie [een database herstellen via automatische back-ups](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-225">toolearn about using automated backups for recovery, see [restore a database from automated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="bfbb0-226">Zie toolearn over opties voor sneller herstel [actieve geo-replicatie](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bfbb0-226">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>


