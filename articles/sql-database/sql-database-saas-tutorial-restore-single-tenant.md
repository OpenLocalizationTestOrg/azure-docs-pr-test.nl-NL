---
title: Herstellen van een Azure SQL database in een multitenant-app | Microsoft Docs
description: Informatie over het herstellen van een enkele tenants SQL-database na het per ongeluk verwijderen van gegevens
keywords: zelfstudie sql-database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 547851972f13ec69a8f65d01290874ad7d07f192
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="6abd2-104">Een Wingtip SaaS tenants SQL-database herstellen</span><span class="sxs-lookup"><span data-stu-id="6abd2-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="6abd2-105">De app Wingtip SaaS gebouwd met behulp van een database per tenant-model, waarbij elke tenant hun eigen database heeft.</span><span class="sxs-lookup"><span data-stu-id="6abd2-105">The Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="6abd2-106">Een van de voordelen van dit model is dat deze gemakkelijk kunt herstellen van gegevens van één tenant in isolatie zonder enige impact op andere tenants.</span><span class="sxs-lookup"><span data-stu-id="6abd2-106">One of the benefits of this model is that it is easy to restore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="6abd2-107">In deze zelfstudie leert u twee data recovery patronen:</span><span class="sxs-lookup"><span data-stu-id="6abd2-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="6abd2-108">Een database herstellen naar een parallelle database (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="6abd2-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="6abd2-109">Een database in place herstellen</span><span class="sxs-lookup"><span data-stu-id="6abd2-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="6abd2-110">**Tenant naar een eerdere punt in tijd, in een parallelle database herstellen**</span><span class="sxs-lookup"><span data-stu-id="6abd2-110">**Restore tenant to a prior point in time, into a parallel database**</span></span> | <span data-ttu-id="6abd2-111">Dit patroon kan worden gebruikt door de tenant voor controle, controle, naleving, enzovoort. De oorspronkelijke database blijft online en ongewijzigd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-111">This pattern can be used by the tenant for review, auditing, compliance, etc. The original database remains online and unchanged.</span></span> |
| <span data-ttu-id="6abd2-112">**Tenant in-place herstellen**</span><span class="sxs-lookup"><span data-stu-id="6abd2-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="6abd2-113">Dit patroon wordt doorgaans gebruikt voor het herstellen van een tenant naar een eerdere punt in tijd, nadat de gegevens in een tenant per ongeluk worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-113">This pattern is typically used to recover a tenant to a prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="6abd2-114">De oorspronkelijke database wordt offline gezet en wordt vervangen door de teruggezette database.</span><span class="sxs-lookup"><span data-stu-id="6abd2-114">The original database is taken offline, and replaced with the restored database.</span></span> |
|||

<span data-ttu-id="6abd2-115">U kunt deze zelfstudie alleen voltooien als aan de volgende vereisten wordt voldaan:</span><span class="sxs-lookup"><span data-stu-id="6abd2-115">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="6abd2-116">De Wingtip SaaS-app wordt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-116">The Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="6abd2-117">Als u wilt implementeren in minder dan vijf minuten, Zie [implementeren en Verken de Wingtip SaaS-toepassing](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="6abd2-117">To deploy in less than five minutes, see [Deploy and explore the Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="6abd2-118">Azure PowerShell is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="6abd2-119">Zie [Aan de slag met Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="6abd2-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-to-the-saas-tenant-restore-pattern"></a><span data-ttu-id="6abd2-120">Inleiding tot het patroon van SaaS-tenant terugzetten</span><span class="sxs-lookup"><span data-stu-id="6abd2-120">Introduction to the SaaS tenant restore pattern</span></span>

<span data-ttu-id="6abd2-121">Er zijn twee eenvoudige patronen voor het herstellen van gegevens van een afzonderlijke tenant voor de tenant restore-patroon.</span><span class="sxs-lookup"><span data-stu-id="6abd2-121">For the tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="6abd2-122">Omdat de tenant-databases zijn geïsoleerd van elkaar, heeft herstellen van een tenant geen invloed op een andere tenant-gegevens.</span><span class="sxs-lookup"><span data-stu-id="6abd2-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="6abd2-123">Gegevens worden in het eerste patroon teruggezet naar een nieuwe database.</span><span class="sxs-lookup"><span data-stu-id="6abd2-123">In the first pattern, data is restored into a new database.</span></span> <span data-ttu-id="6abd2-124">De tenant vervolgens toegang krijgt tot deze database naast hun productiegegevens.</span><span class="sxs-lookup"><span data-stu-id="6abd2-124">The tenant is then given access to this database alongside their production data.</span></span> <span data-ttu-id="6abd2-125">Dit patroon kan een tenantbeheerder om te controleren van de herstelde gegevens en mogelijk gebruiken om te overschrijven selectief huidige gegevenswaarden.</span><span class="sxs-lookup"><span data-stu-id="6abd2-125">This pattern allows a tenant admin to review the restored data and potentially use it to selectively overwrite current data values.</span></span> <span data-ttu-id="6abd2-126">Het is aan de SaaS-app-ontwerper om te bepalen hoe geavanceerde opties voor het herstel van de gegevens moeten worden.</span><span class="sxs-lookup"><span data-stu-id="6abd2-126">It's up to the SaaS app designer to determine just how sophisticated the data recovery options should be.</span></span> <span data-ttu-id="6abd2-127">Gewoon kan kunt controleren van de gegevens in de staat waarin die deze zich op een bepaald moment in de tijd worden veroorzaakt door alle die vereist is in sommige scenario's.</span><span class="sxs-lookup"><span data-stu-id="6abd2-127">Simply being able to review data in the state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="6abd2-128">Als de database gebruikt [geo-replicatie](sql-database-geo-replication-overview.md), wordt aangeraden de benodigde gegevens kopiëren van de herstelde kopie in de oorspronkelijke database.</span><span class="sxs-lookup"><span data-stu-id="6abd2-128">If the database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying the required data from the restored copy into the original database.</span></span> <span data-ttu-id="6abd2-129">Als u de oorspronkelijke database door de teruggezette database vervangen, moet u opnieuw configureert en geo-replicatie opnieuw synchroniseren.</span><span class="sxs-lookup"><span data-stu-id="6abd2-129">If you replace the original database with the restored database, you need to reconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="6abd2-130">In het tweede patroon, waarbij ervan wordt uitgegaan dat de tenant heeft geleden een verlies of beschadiging van gegevens, van de tenant-productiedatabase hersteld naar een eerdere punt in tijd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-130">In the second pattern, which assumes that the tenant has suffered a loss or corruption of data, the tenant’s production database is restored to a prior point in time.</span></span> <span data-ttu-id="6abd2-131">Het herstel in plaats patroon is de tenant offline gezet gedurende een korte periode terwijl de database is hersteld en weer online.</span><span class="sxs-lookup"><span data-stu-id="6abd2-131">In the restore in place pattern, the tenant is taken offline for a brief time while the database is restored and brought back online.</span></span> <span data-ttu-id="6abd2-132">De oorspronkelijke database wordt verwijderd, maar kan nog steeds worden hersteld vanuit als u wilt teruggaan naar een zelfs eerder in de tijd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-132">The original database is deleted, but can still be restored from if you need to go back to an even earlier point in time.</span></span> <span data-ttu-id="6abd2-133">Een variant van dit patroon kan wijzigen in de database in plaats van te verwijderen, hoewel de naam van de database biedt geen extra voordelen in termen van de beveiliging van gegevens.</span><span class="sxs-lookup"><span data-stu-id="6abd2-133">A variation of this pattern could rename the database instead of deleting it, although renaming the database offers no additional advantage in terms of data security.</span></span>

## <a name="get-the-wingtip-application-scripts"></a><span data-ttu-id="6abd2-134">De scripts van de Wingtip-toepassing downloaden</span><span class="sxs-lookup"><span data-stu-id="6abd2-134">Get the Wingtip application scripts</span></span>

<span data-ttu-id="6abd2-135">De Wingtip SaaS-scripts en de broncode van toepassing zijn beschikbaar in de [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-opslagplaats.</span><span class="sxs-lookup"><span data-stu-id="6abd2-135">The Wingtip SaaS scripts and application source code are available in the [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="6abd2-136">[Stappen voor het downloaden van de scripts Wingtip SaaS](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="6abd2-136">[Steps to download the Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="6abd2-137">Simuleren van een tenant per ongeluk verwijderen van gegevens</span><span class="sxs-lookup"><span data-stu-id="6abd2-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="6abd2-138">Om te demonstreren deze herstelscenario's, moeten we *per ongeluk* sommige gegevens in een van de tenant-databases verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6abd2-138">To demonstrate these recovery scenarios, we need to *accidentally* delete some data in one of the tenant databases.</span></span> <span data-ttu-id="6abd2-139">Terwijl u elke record verwijderen kunt, stelt de volgende stap de demo ophalen niet geblokkeerd door referentiële integriteit schendingen!</span><span class="sxs-lookup"><span data-stu-id="6abd2-139">While you can delete any record, the next step sets up the demo to not get blocked by referential integrity violations!</span></span> <span data-ttu-id="6abd2-140">Ook worden sommige ticket inkoopgegevens kunt u later in de *Wingtip SaaS Analytics zelfstudies*.</span><span class="sxs-lookup"><span data-stu-id="6abd2-140">It also adds some ticket purchase data you can use later in the *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="6abd2-141">Het ticket generator-script uitvoeren en aanvullende gegevens te maken.</span><span class="sxs-lookup"><span data-stu-id="6abd2-141">Run the ticket generator script and create additional data.</span></span> <span data-ttu-id="6abd2-142">De generator ticket komt opzettelijk niet kopen van tickets voor elke laatste gebeurtenis van tenants.</span><span class="sxs-lookup"><span data-stu-id="6abd2-142">The ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="6abd2-143">Open... \\Learning-Modules\\hulpprogramma's\\*Demo TicketGenerator.ps1* in de *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="6abd2-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="6abd2-144">Druk op **F5** voert u het script en genereren van klanten en verkoopgegevens ticket.</span><span class="sxs-lookup"><span data-stu-id="6abd2-144">Press **F5** to run the script and generate customers and ticket sales data.</span></span>


### <a name="open-the-events-app-to-review-the-current-events"></a><span data-ttu-id="6abd2-145">Open de app gebeurtenissen om de huidige gebeurtenissen te bekijken</span><span class="sxs-lookup"><span data-stu-id="6abd2-145">Open the Events app to review the current events</span></span>

1. <span data-ttu-id="6abd2-146">Open de *gebeurtenissen Hub* (http://events.wtp.&lt; gebruiker&gt;. trafficmanager.net) en klik op **Contoso overleg Hall**:</span><span class="sxs-lookup"><span data-stu-id="6abd2-146">Open the *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![events hub](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="6abd2-148">Schuif naar de lijst met gebeurtenissen en noteer de laatste gebeurtenis in de lijst:</span><span class="sxs-lookup"><span data-stu-id="6abd2-148">Scroll the list of events and make a note of the last event in the list:</span></span>

   ![laatste gebeurtenis](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-the-demo-scenario-to-accidentally-delete-the-last-event"></a><span data-ttu-id="6abd2-150">Voer de demo-scenario waarin u de laatste gebeurtenis per ongeluk verwijderen</span><span class="sxs-lookup"><span data-stu-id="6abd2-150">Run the demo scenario to accidentally delete the last event</span></span>

1. <span data-ttu-id="6abd2-151">Open... \\Learning-Modules\\voor bedrijfscontinuïteit en noodherstel\\RestoreTenant\\*Demo RestoreTenant.ps1* in de *PowerShell ISE*, en stel de volgende waarde:</span><span class="sxs-lookup"><span data-stu-id="6abd2-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in the *PowerShell ISE*, and set the following value:</span></span>
   * <span data-ttu-id="6abd2-152">**$DemoScenario** = **1**, ingesteld op **1** -gebeurtenissen met geen verkopen ticket verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6abd2-152">**$DemoScenario** = **1**, Set to **1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="6abd2-153">Druk op **F5** voor het uitvoeren van het script en de laatste gebeurtenis verwijderen.</span><span class="sxs-lookup"><span data-stu-id="6abd2-153">Press **F5** to run the script and delete the last event.</span></span> <span data-ttu-id="6abd2-154">U ziet een bevestigingsbericht vergelijkbaar met het volgende:</span><span class="sxs-lookup"><span data-stu-id="6abd2-154">You should see a confirmation message similar to the following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="6abd2-155">De pagina van de Contoso-gebeurtenissen wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="6abd2-155">The Contoso events page opens.</span></span> <span data-ttu-id="6abd2-156">Schuif naar beneden en controleer of dat de gebeurtenis is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-156">Scroll down and verify the event is gone.</span></span> <span data-ttu-id="6abd2-157">Als de gebeurtenis nog steeds in de lijst wordt, klikt u op vernieuwen en controleer of dat het is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-157">If the event is still in the list, click refresh and verify it is gone.</span></span>

   ![laatste gebeurtenis](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-the-production-database"></a><span data-ttu-id="6abd2-159">Een tenant-database in combinatie met de productiedatabase herstellen</span><span class="sxs-lookup"><span data-stu-id="6abd2-159">Restore a tenant database in parallel with the production database</span></span>

<span data-ttu-id="6abd2-160">Deze oefening wordt de database Contoso overleg Hall hersteld naar een punt in tijd voordat de gebeurtenis is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-160">This exercise restores the Contoso Concert Hall database to a point in time before the event was deleted.</span></span> <span data-ttu-id="6abd2-161">Wanneer de gebeurtenis is verwijderd in de vorige stappen, die u wilt herstellen en de verwijderde gegevens zien.</span><span class="sxs-lookup"><span data-stu-id="6abd2-161">After the event is deleted in the previous steps, you want to recover and see the deleted data.</span></span> <span data-ttu-id="6abd2-162">U hoeft niet te herstellen van de productiedatabase met de verwijderde record, maar u moet de oude database voor toegang tot de oude gegevens voor andere zakelijke redenen herstellen.</span><span class="sxs-lookup"><span data-stu-id="6abd2-162">You don't need to restore your production database with the deleted record, but you need to recover the old database to access the old data for other business reasons.</span></span>

 <span data-ttu-id="6abd2-163">De *terugzetten TenantInParallel.ps1* script maakt een parallelle tenant-database en een parallelle catalogusvermelding beide met de naam *ContosoConcertHall\_oude*.</span><span class="sxs-lookup"><span data-stu-id="6abd2-163">The *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="6abd2-164">Dit patroon van terugzetten is het meest geschikt is voor het herstellen van een secundaire gegevensverlies of voor compatibiliteit en controle herstelscenario's.</span><span class="sxs-lookup"><span data-stu-id="6abd2-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="6abd2-165">Het is ook de aanbevolen aanpak wanneer u [geo-replicatie](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6abd2-165">It is also the recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="6abd2-166">Voltooi de [simuleren van een gebruiker per ongeluk verwijderen van gegevens](#simulate-a-tenant-accidentally-deleting-data) sectie.</span><span class="sxs-lookup"><span data-stu-id="6abd2-166">Complete the [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="6abd2-167">Open... \\Learning-Modules\\voor bedrijfscontinuïteit en noodherstel\\RestoreTenant\\_Demo RestoreTenant.ps1_ in de *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="6abd2-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="6abd2-168">Ingesteld **$DemoScenario** = **2**, stel dit in op **2** naar *terugzetten tenant parallel*.</span><span class="sxs-lookup"><span data-stu-id="6abd2-168">Set **$DemoScenario** = **2**, Set this to **2** to *Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="6abd2-169">Druk op **F5** om het script uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="6abd2-169">Press **F5** to run the script.</span></span>

<span data-ttu-id="6abd2-170">Het script Hiermee herstelt de database van de tenant (met een parallelle database) naar een punt in tijd voordat u de gebeurtenis in de vorige sectie hebt verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-170">The script restores the tenant database (to a parallel database) to a point in time before you deleted the event in the previous section.</span></span> <span data-ttu-id="6abd2-171">Deze maakt een tweede database, verwijdert u alle bestaande catalogus metagegevens die bestaat in deze database, en de database toegevoegd aan de catalogus onder de *ContosoConcertHall\_oude* vermelding.</span><span class="sxs-lookup"><span data-stu-id="6abd2-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds the database to the catalog under the *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="6abd2-172">De demoscript wordt de pagina gebeurtenissen in uw browser geopend.</span><span class="sxs-lookup"><span data-stu-id="6abd2-172">The demo script opens the events page in your browser.</span></span> <span data-ttu-id="6abd2-173">Opmerking van de URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` gegevens uit de herstelde database zien waar *_old* wordt toegevoegd aan de naam.</span><span class="sxs-lookup"><span data-stu-id="6abd2-173">Note from the URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from the restored database where *_old* is added to the name.</span></span>

<span data-ttu-id="6abd2-174">Schuif de gebeurtenissen in de browser om te bevestigen dat de gebeurtenis is verwijderd uit de vorige sectie is hersteld.</span><span class="sxs-lookup"><span data-stu-id="6abd2-174">Scroll the events listed in the browser to confirm that the event deleted in the previous section has been restored.</span></span>

<span data-ttu-id="6abd2-175">Let op: de herstelde tenant blootstellen als een extra tenant, met een eigen app gebeurtenissen om te bladeren tickets, waarschijnlijk niet hoe u zou een tenant toegang bieden tot gegevens hebt hersteld, maar dient ter illustratie van het patroon terugzetten eenvoudig.</span><span class="sxs-lookup"><span data-stu-id="6abd2-175">Note that exposing the restored tenant as an additional tenant, with its own Events app to browse tickets, is unlikely to be how you would provide a tenant access to restored data, but serves to easily illustrate the restore pattern.</span></span>

<span data-ttu-id="6abd2-176">In werkelijkheid, zou u waarschijnlijk alleen deze herstelde database behouden voor een opgegeven periode.</span><span class="sxs-lookup"><span data-stu-id="6abd2-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="6abd2-177">U kunt de vermelding van de herstelde tenant verwijderen zodra u klaar bent met het aanroepen van de *verwijderen RestoredTenant.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="6abd2-177">You can delete the restored tenant entry once you are finished by calling the *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="6abd2-178">Ingesteld **$DemoScenario** naar **4** selecteren de *verwijderen hersteld tenant* scenario.</span><span class="sxs-lookup"><span data-stu-id="6abd2-178">Set **$DemoScenario** to **4** to select the *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="6abd2-179">**Uitvoeren van** **met** **F5**</span><span class="sxs-lookup"><span data-stu-id="6abd2-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="6abd2-180">De *ContosoConcertHall\_oude* vermelding is nu verwijderd uit de catalogus.</span><span class="sxs-lookup"><span data-stu-id="6abd2-180">The *ContosoConcertHall\_old* entry is now deleted from the catalog.</span></span> <span data-ttu-id="6abd2-181">Doorgaan en de pagina gebeurtenissen voor deze tenant in uw browser sluit.</span><span class="sxs-lookup"><span data-stu-id="6abd2-181">Go ahead and close the events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-the-existing-tenant-database"></a><span data-ttu-id="6abd2-182">Een tenant aanwezig is, vervangt de bestaande tenant-database herstellen</span><span class="sxs-lookup"><span data-stu-id="6abd2-182">Restore a tenant in place, replacing the existing tenant database</span></span>

<span data-ttu-id="6abd2-183">In deze oefening wordt de tenant Contoso overleg Hall hersteld naar een punt in tijd voordat de gebeurtenis is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-183">This exercise restores the Contoso Concert Hall tenant to a point in time before the event was deleted.</span></span> <span data-ttu-id="6abd2-184">De *terugzetten TenantInPlace* script herstelt u de huidige tenant-database naar een nieuwe database die verwijst naar een eerder punt in tijd en wordt de oorspronkelijke database verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-184">The *Restore-TenantInPlace* script restores the current tenant database to a new database pointing to a previous point in time, and deletes the original database.</span></span> <span data-ttu-id="6abd2-185">Dit patroon van terugzetten is het meest geschikt is voor het herstellen van ernstige gegevensbeschadiging omdat er mogelijk verlies van belangrijke gegevens die de tenant hebben kan om onder te brengen.</span><span class="sxs-lookup"><span data-stu-id="6abd2-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that the tenant would have to accommodate.</span></span>

1. <span data-ttu-id="6abd2-186">Open **Demo RestoreTenant.ps1** bestand in PowerShell ISE</span><span class="sxs-lookup"><span data-stu-id="6abd2-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="6abd2-187">Ingesteld **$DemoScenario** naar **5** selecteren de *tenant in place scenario herstellen*.</span><span class="sxs-lookup"><span data-stu-id="6abd2-187">Set **$DemoScenario** to **5** to select the *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="6abd2-188">Uitvoeren met behulp van **F5**.</span><span class="sxs-lookup"><span data-stu-id="6abd2-188">Execute using **F5**.</span></span>

<span data-ttu-id="6abd2-189">Het script de tenant database teruggezet naar een punt vijf minuten voordat de gebeurtenis is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-189">The script restores the tenant database to a point five minutes before the event was deleted.</span></span> <span data-ttu-id="6abd2-190">Dit gebeurt door eerst de tenant Contoso overleg Hall offline zodat er geen andere updates in de gegevens zijn.</span><span class="sxs-lookup"><span data-stu-id="6abd2-190">It does this by first taking the Contoso Concert Hall tenant offline so there are no further updates to the data.</span></span> <span data-ttu-id="6abd2-191">Vervolgens wordt een parallelle database door te herstellen vanaf het herstelpunt is gemaakt en om te controleren of de dat naam van de database geen conflict met de naam van de bestaande tenant-database met de naam met een tijdstempel.</span><span class="sxs-lookup"><span data-stu-id="6abd2-191">Then, a parallel database is created by restoring from the restore point and named with a timestamp to ensure the database name does not conflict with the existing tenant database name.</span></span> <span data-ttu-id="6abd2-192">Vervolgens worden de oude tenant-database wordt verwijderd en de teruggezette database is gewijzigd in de naam van de oorspronkelijke database.</span><span class="sxs-lookup"><span data-stu-id="6abd2-192">Next, the old tenant database is deleted, and the restored database is renamed to the original database name.</span></span> <span data-ttu-id="6abd2-193">Ten slotte Contoso overleg Hall online brengen van de app toegang tot de teruggezette database.</span><span class="sxs-lookup"><span data-stu-id="6abd2-193">Finally, Contoso Concert Hall is brought online to allow the app access to the restored database.</span></span>

<span data-ttu-id="6abd2-194">U hersteld de database naar een punt in tijd voordat de gebeurtenis is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="6abd2-194">You successfully restored the database to a point in time before the event was deleted.</span></span> <span data-ttu-id="6abd2-195">De gebeurtenissen wordt geopend, zodat de laatste bevestigen gebeurtenis is hersteld.</span><span class="sxs-lookup"><span data-stu-id="6abd2-195">The Events page opens, so confirm the last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="6abd2-196">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="6abd2-196">Next steps</span></span>

<span data-ttu-id="6abd2-197">In deze zelfstudie heeft u het volgende geleerd:</span><span class="sxs-lookup"><span data-stu-id="6abd2-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="6abd2-198">Een database herstellen naar een parallelle database (side-by-side)</span><span class="sxs-lookup"><span data-stu-id="6abd2-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="6abd2-199">Een database in place herstellen</span><span class="sxs-lookup"><span data-stu-id="6abd2-199">Restore a database in place</span></span>

[<span data-ttu-id="6abd2-200">Tenant-databaseschema beheren</span><span class="sxs-lookup"><span data-stu-id="6abd2-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="6abd2-201">Aanvullende bronnen</span><span class="sxs-lookup"><span data-stu-id="6abd2-201">Additional resources</span></span>

* <span data-ttu-id="6abd2-202">Aanvullende [zelfstudies waarin voort op de Wingtip SaaS-toepassing bouwen](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="6abd2-202">Additional [tutorials that build upon the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="6abd2-203">Overzicht van zakelijke continuïteit met Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="6abd2-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="6abd2-204">Meer informatie over back-ups van SQL-Database</span><span class="sxs-lookup"><span data-stu-id="6abd2-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
