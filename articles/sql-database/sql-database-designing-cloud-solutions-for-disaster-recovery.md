---
title: maximaal beschikbare aaaDesign-service met behulp van Azure SQL Database | Microsoft Docs
description: Meer informatie over het ontwerp van de toepassing voor maximaal beschikbare services met Azure SQL Database.
keywords: "herstel na noodgevallen, oplossingen voor herstel na noodgevallen, back-up van app-gegevens, geo-replicatie, cloud zakelijke continuïteit plannen"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: e8a346ac-dd08-41e7-9685-46cebca04582
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 04/21/2017
ms.author: sashan
ms.openlocfilehash: 815f754ba7014cd8a1108a2d84c2a8f71d7030a5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-services-using-azure-sql-database"></a><span data-ttu-id="36404-104">Maximaal beschikbare services met behulp van Azure SQL Database ontwerpen</span><span class="sxs-lookup"><span data-stu-id="36404-104">Designing highly available services using Azure SQL Database</span></span>

<span data-ttu-id="36404-105">Bij het maken en implementeren van maximaal beschikbare services in Azure SQL-Database, gebruikt u [failover groepen en actieve geo-replicatie](sql-database-geo-replication-overview.md) tooprovide herstelmogelijkheden tooregional fouten en catastrofale uitval en schakel snel herstel toohello secundaire databases.</span><span class="sxs-lookup"><span data-stu-id="36404-105">When building and deploying highly available services on Azure SQL Database, you use [failover groups and active geo-replication](sql-database-geo-replication-overview.md) tooprovide resilience tooregional failures and catastrophic outages and enable fast recovery toohello secondary databases.</span></span> <span data-ttu-id="36404-106">Dit artikel is gericht op algemene patronen van de toepassing en Hallo voordelen en -en nadelen van elke optie, afhankelijk van Hallo toepassing implementatievereisten, Hallo serviceovereenkomst u ontwikkelt, verkeer latentie en kosten.</span><span class="sxs-lookup"><span data-stu-id="36404-106">This article focuses on common application patterns and discusses hello benefits and trade-offs of each option depending on hello application deployment requirements, hello service level agreement you are targeting, traffic latency, and costs.</span></span> <span data-ttu-id="36404-107">Zie voor meer informatie over actieve geo-replicatie met elastische Pools [elastische Pool disaster recovery strategieën](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="36404-107">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

## <a name="design-pattern-1-active-passive-deployment-for-cloud-disaster-recovery-with-a-co-located-database"></a><span data-ttu-id="36404-108">Bij een ontwerppatroon 1: implementatie actief / passief voor noodherstel voor cloud met een CO-locaties database</span><span class="sxs-lookup"><span data-stu-id="36404-108">Design pattern 1: Active-passive deployment for cloud disaster recovery with a co-located database</span></span>
<span data-ttu-id="36404-109">Deze optie is het meest geschikt voor toepassingen met Hallo volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="36404-109">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="36404-110">Actieve instantie in één Azure-regio</span><span class="sxs-lookup"><span data-stu-id="36404-110">Active instance in a single Azure region</span></span>
* <span data-ttu-id="36404-111">Sterke afhankelijkheid van alleen-lezen (RW) toegang toodata</span><span class="sxs-lookup"><span data-stu-id="36404-111">Strong dependency on read-write (RW) access toodata</span></span>
* <span data-ttu-id="36404-112">Regio-overschrijdende connectiviteit tussen Hallo-webtoepassing en Hallo-database is niet acceptabel vanwege toolatency en verkeer kosten</span><span class="sxs-lookup"><span data-stu-id="36404-112">Cross-region connectivity between hello web application and hello database is not acceptable due toolatency and traffic cost</span></span>    

<span data-ttu-id="36404-113">In dit geval wordt Hallo toepassing implementatietopologie geoptimaliseerd voor het verwerken van regionale noodsituaties als alle toepassingsonderdelen worden beïnvloed en toofailover als eenheid moeten.</span><span class="sxs-lookup"><span data-stu-id="36404-113">In this case, hello application deployment topology is optimized for handling regional disasters when all application components are impacted and need toofailover as a unit.</span></span> <span data-ttu-id="36404-114">Voor geografische redundantie Hallo toepassingslogica en Hallo database zijn gerepliceerde tooanother regio maar ze worden niet gebruikt voor de werkbelasting van de toepassing hello onder normale omstandigheden Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-114">For geographic redundancy, hello application logic and hello database are replicated tooanother region but they are not used for hello application workload under hello normal conditions.</span></span> <span data-ttu-id="36404-115">Hallo-toepassing in Hallo secundaire regio worden geconfigureerde toouse een SQL-verbinding tekenreeks toohello secundaire database.</span><span class="sxs-lookup"><span data-stu-id="36404-115">hello application in hello secondary region should be configured toouse a SQL connection string toohello secondary database.</span></span> <span data-ttu-id="36404-116">Het Traffic manager is ingesteld op toouse [routeringsmethode voor failover](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span><span class="sxs-lookup"><span data-stu-id="36404-116">Traffic manager is set up toouse [failover routing method](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="36404-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) alleen ter illustratie in dit artikel wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="36404-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) is used throughout this article for illustration purposes only.</span></span> <span data-ttu-id="36404-118">U kunt een oplossing voor taakverdeling die ondersteuning biedt voor routeringsmethode voor failover.</span><span class="sxs-lookup"><span data-stu-id="36404-118">You can use any load-balancing solution that supports failover routing method.</span></span>    
>

<span data-ttu-id="36404-119">Hallo volgende diagram ziet u deze configuratie voordat een storing.</span><span class="sxs-lookup"><span data-stu-id="36404-119">hello following diagram shows this configuration before an outage.</span></span>

![Configuratie van SQL Database-geo-replicatie.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-1.png)

<span data-ttu-id="36404-122">Na een storing in de primaire regio Hallo detecteert Hallo SQL Database-service die Hallo primaire database is niet toegankelijk en een failover-toohello secundaire database op basis van de parameters Hallo Hallo automatische failover-beleid wordt geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="36404-122">After an outage in hello primary region, hello SQL Database service detects that hello primary database is not accessible and trigger a failover toohello secondary database based on hello parameters of hello automatic failover policy.</span></span> <span data-ttu-id="36404-123">Afhankelijk van de SLA voor uw toepassing, kunt u tooconfigure een respijtperiode tussen Hallo detectie Hallo uitval en Hallo failover zelf bepalen.</span><span class="sxs-lookup"><span data-stu-id="36404-123">Depending on your application SLA, you can decide tooconfigure a grace period between hello detection of hello outage and hello failover itself.</span></span> <span data-ttu-id="36404-124">Configureren van een respijtperiode wordt verkleind Hallo gegevens verloren gaan toohello gevallen waarbij Hallo onderbreking onherstelbare is en beschikbaarheid in regio Hallo snel kan niet worden hersteld.</span><span class="sxs-lookup"><span data-stu-id="36404-124">Configuring a grace period reduces hello risk of data loss toohello cases where hello outage is catastrophic and availability in hello region cannot be quickly restored.</span></span> <span data-ttu-id="36404-125">Hallo eindpunt failover wordt geïnitieerd door Hallo traffic manager voordat Hallo failover groep triggers Hallo failover van Hallo-database, is webtoepassing Hallo niet als kunnen tooreconnect toohello database.</span><span class="sxs-lookup"><span data-stu-id="36404-125">If hello endpoint failover is initiated by hello traffic manager before hello failover group triggers hello failover of hello database, hello web application is not able tooreconnect toohello database.</span></span> <span data-ttu-id="36404-126">van de toepassing Hello poging tooreconnect slaagt automatisch zodra Hallo database failover is voltooid.</span><span class="sxs-lookup"><span data-stu-id="36404-126">hello application’s attempt tooreconnect automatically succeeds as soon as hello database failover completes.</span></span> 

> [!NOTE]
> <span data-ttu-id="36404-127">tooachieve volledig gecoördineerde failover van de toepassing hello en Hallo-databases, moet u uw eigen bewaking methode ontwerpen en handmatige failover van Hallo web application eindpunten en Hallo databases gebruiken.</span><span class="sxs-lookup"><span data-stu-id="36404-127">tooachieve fully coordinated failover of hello application and hello databases, you should devise your own monitoring method and use manual failover of hello web application endpoints and hello databases.</span></span>
>

<span data-ttu-id="36404-128">Nadat de failover van zowel de eindpunten en de database Hallo Hallo-toepassing hello is voltooid, Hallo toepassing wordt opnieuw gestart voor het verwerken van gebruikersaanvragen Hallo in Hallo regio B en CO-locaties met Hallo database blijft omdat Hallo primaire database zich nu in regio B. Dit scenario wordt weergegeven in het volgende diagram Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-128">After hello failover of both hello application’s endpoints and hello database completes, hello application will re-start processing hello user requests in hello region B and will remain co-located with hello database because hello primary database is now in region B. This scenario is illustrated in hello following diagram.</span></span> <span data-ttu-id="36404-129">In alle diagrammen ononderbroken lijnen geven actieve verbindingen, aangegeven door stippellijn onderbroken verbindingen en stop tekenen geven actie triggers.</span><span class="sxs-lookup"><span data-stu-id="36404-129">In all diagrams, solid lines indicate active connections, dotted lines indicate suspended connections, and stop signs indicate action triggers.</span></span>

![Geo-replicatie: Failover toosecondary database.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-2.png)

<span data-ttu-id="36404-132">Als een storing in de secundaire regio hello gebeurt, Hallo replicatiekoppeling tussen Hallo primaire en secundaire database Hallo is onderbroken, maar Hallo failover is niet geactiveerd omdat de primaire database Hallo wordt niet negatief beïnvloed.</span><span class="sxs-lookup"><span data-stu-id="36404-132">If an outage happens in hello secondary region, hello replication link between hello primary and hello secondary database is suspended but hello failover is not triggered because hello primary database is not impacted.</span></span> <span data-ttu-id="36404-133">beschikbaarheid van de toepassing Hello niet in dit geval wordt gewijzigd, maar toepassing hello blootgestelde werkt en daarom hoger risico in geval beide regio's mislukken achter elkaar.</span><span class="sxs-lookup"><span data-stu-id="36404-133">hello application's availability is not changed in this case, but hello application operates exposed and therefore at higher risk in case both regions fail in succession.</span></span>

> [!NOTE]
> <span data-ttu-id="36404-134">Voor herstel na noodgevallen aangeraden het Hallo-configuratie met de toepassing implementatie beperkt tootwo regio's.</span><span class="sxs-lookup"><span data-stu-id="36404-134">For disaster recovery we recommend hello configuration with application deployment limited tootwo regions.</span></span> <span data-ttu-id="36404-135">Dit komt doordat de meeste Hallo Azure locaties slechts twee regio's hebben.</span><span class="sxs-lookup"><span data-stu-id="36404-135">This is because most of hello Azure geographies have only two regions.</span></span> <span data-ttu-id="36404-136">Deze configuratie biedt geen bescherming van uw toepassing van een gelijktijdige catastrofale uitval van beide regio's.</span><span class="sxs-lookup"><span data-stu-id="36404-136">This configuration will not protect your application from a simultaneous catastrophic failure of both regions.</span></span>  <span data-ttu-id="36404-137">U kunt uw databases in een derde regio met herstellen in een onwaarschijnlijke geval van een dergelijke storing [geo-restore-bewerking](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="36404-137">In an unlikely event of such a failure, you can recover your databases in a third region using [geo-restore operation](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span>
>

<span data-ttu-id="36404-138">Wanneer Hallo onderbreking is verholpen, wordt secundaire database hello automatisch opnieuw synchroniseren met primaire Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-138">Once hello outage is mitigated, hello secondary database will automatically re-synchronize with hello primary.</span></span> <span data-ttu-id="36404-139">Tijdens de synchronisatie worden de prestaties van de primaire Hallo kan enigszins beïnvloed, afhankelijk van de hoeveelheid gegevens die moeten worden gesynchroniseerd toobe Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-139">During synchronization, performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="36404-140">Hallo illustreert volgende diagram een storing in Hallo secundaire regio.</span><span class="sxs-lookup"><span data-stu-id="36404-140">hello following diagram illustrates an outage in hello secondary region.</span></span>

![Secundaire database gesynchroniseerd met de primaire.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-3.png)

<span data-ttu-id="36404-143">Hallo sleutel **voordelen** van dit ontwerppatroon zijn:</span><span class="sxs-lookup"><span data-stu-id="36404-143">hello key **advantages** of this design pattern are:</span></span>

* <span data-ttu-id="36404-144">Hallo is dezelfde webtoepassing geïmplementeerde tooboth regio's zonder een willekeurige regio-specifieke configuratie en geen aanvullende logica tooreact toohello failover.</span><span class="sxs-lookup"><span data-stu-id="36404-144">hello same web application is deployed tooboth regions without any region-specific configuration and no additional logic tooreact toohello failover.</span></span> 
* <span data-ttu-id="36404-145">Hallo toepassingsprestaties wordt niet beïnvloed door failover als Hallo-webtoepassing en Hallo database zijn altijd CO-locaties.</span><span class="sxs-lookup"><span data-stu-id="36404-145">hello application's performance is not impacted by failover as hello web application and hello database are always co-located.</span></span>

<span data-ttu-id="36404-146">Hallo belangrijkste **afweging** is dat redundante toepassing hello exemplaar in de secundaire regio hello wordt alleen gebruikt voor herstel na noodgevallen.</span><span class="sxs-lookup"><span data-stu-id="36404-146">hello main **tradeoff** is that hello redundant application instance in hello secondary region is only used for disaster recovery.</span></span>

## <a name="design-pattern-2-active-active-deployment-for-application-load-balancing"></a><span data-ttu-id="36404-147">Bij een ontwerppatroon 2: implementatie van de actieve toepassing load balancing</span><span class="sxs-lookup"><span data-stu-id="36404-147">Design pattern 2: Active-active deployment for application load balancing</span></span>
<span data-ttu-id="36404-148">Deze optie voor herstel na noodgevallen cloud is het meest geschikt voor toepassingen met Hallo volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="36404-148">This cloud disaster recovery option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="36404-149">Maximale ratio van database leest toowrites</span><span class="sxs-lookup"><span data-stu-id="36404-149">High ratio of database reads toowrites</span></span>
* <span data-ttu-id="36404-150">Database-latentie is belangrijker voor Hallo eindgebruikerservaring dan Hallo schrijflatentie lezen</span><span class="sxs-lookup"><span data-stu-id="36404-150">Database read latency is more critical for hello end-user experience than hello write latency</span></span> 
* <span data-ttu-id="36404-151">Alleen-lezen logica kan worden gescheiden van de logica lezen-schrijven met behulp van een andere verbindingsreeks</span><span class="sxs-lookup"><span data-stu-id="36404-151">Read-only logic can be separated from read-write logic by using a different connection string</span></span>
* <span data-ttu-id="36404-152">Alleen-lezen logica is niet afhankelijk van gegevens volledig worden gesynchroniseerd met de nieuwste updates Hallo</span><span class="sxs-lookup"><span data-stu-id="36404-152">Read-only logic does not depend on data being fully synchronized with hello latest updates</span></span>  

<span data-ttu-id="36404-153">Als uw toepassingen deze kenmerken hebben, Hallo eindgebruiker verbindingen voor taakverdeling over meerdere exemplaren van een toepassing in verschillende regio's aanzienlijk kan verbeteren Hallo algehele ervaring voor de eindgebruiker.</span><span class="sxs-lookup"><span data-stu-id="36404-153">If your applications have these characteristics, load balancing hello end-user connections across multiple application instances in different regions can substantially improve hello overall end-user experience.</span></span> <span data-ttu-id="36404-154">Twee Hallo regio's als Hallo DR-paar moet worden geselecteerd en Hallo failover groep Hallo databases in deze regio's moet worden opgenomen.</span><span class="sxs-lookup"><span data-stu-id="36404-154">Two of hello regions should be selected as hello DR pair and hello failover group should include hello databases in these regions.</span></span> <span data-ttu-id="36404-155">tooimplement load balancing, moet elke regio hebben een actief exemplaar van de toepassing hello met Hallo lezen-schrijven (RW) logica verbonden toohello lezen-schrijven listener eindpunt van Hallo failover-groep.</span><span class="sxs-lookup"><span data-stu-id="36404-155">tooimplement load-balancing, each region should have an active instance of hello application with hello read-write (RW) logic connected toohello read-write listener endpoint of hello failover group.</span></span> <span data-ttu-id="36404-156">Het wordt gegarandeerd dat de failover is hello wordt automatisch worden gestart als de primaire database hello wordt beïnvloed door een storing.</span><span class="sxs-lookup"><span data-stu-id="36404-156">It will guarantee that hello failover will be automatically initiated if hello primary database is impacted by an outage.</span></span> <span data-ttu-id="36404-157">Hallo alleen-lezen logica (RO) in de webtoepassing Hallo moet verbinding maken met rechtstreeks toohello database in deze regio.</span><span class="sxs-lookup"><span data-stu-id="36404-157">hello read-only logic (RO) in hello web application should connect directly toohello database in that region.</span></span> <span data-ttu-id="36404-158">Het Traffic manager moet worden ingesteld in toouse [prestaties routering](../traffic-manager/traffic-manager-configure-performance-routing-method.md) met [eindpunt bewaking](../traffic-manager/traffic-manager-monitoring.md) ingeschakeld voor elk toepassingsexemplaar.</span><span class="sxs-lookup"><span data-stu-id="36404-158">Traffic manager should be set up toouse [performance routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for each application instance.</span></span>

<span data-ttu-id="36404-159">Zoals in het patroon #1, moet u een vergelijkbare monitoring-toepassing implementeren.</span><span class="sxs-lookup"><span data-stu-id="36404-159">As in pattern #1, you should consider deploying a similar monitoring application.</span></span> <span data-ttu-id="36404-160">Maar in tegenstelling tot patroon #1 monitoring-toepassing hello niet verantwoordelijk is voor activering Hallo eindpunt failover.</span><span class="sxs-lookup"><span data-stu-id="36404-160">But unlike pattern #1, hello monitoring application will not be responsible for triggering hello end-point failover.</span></span>

> [!NOTE]
> <span data-ttu-id="36404-161">Terwijl dit patroon maakt gebruik van meer dan één secundaire database, alleen hello secundaire regio b zou worden gebruikt voor de failover- en moet deel uitmaken van Hallo failover-groep.</span><span class="sxs-lookup"><span data-stu-id="36404-161">While this pattern uses more than one secondary database, only hello secondary in Region B  would be used for failover and should be part of hello failover group.</span></span>
>

<span data-ttu-id="36404-162">Het Traffic manager moet worden geconfigureerd voor de geografische locatie prestaties routering toodirect Hallo gebruiker verbindingen toohello toepassing exemplaar dichtstbijzijnde toohello van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="36404-162">Traffic manager should be configured for performance routing toodirect hello user connections toohello application instance closest toohello user's geographic location.</span></span> <span data-ttu-id="36404-163">Hallo volgende diagram ziet u deze configuratie voordat een storing.</span><span class="sxs-lookup"><span data-stu-id="36404-163">hello following diagram illustrates this configuration before an outage.</span></span>

![Er is geen onderbreking: prestaties routering toonearest toepassing.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-1.png)

<span data-ttu-id="36404-166">Als een onderbreking van de database is gedetecteerd in Hallo regio A, starten Hallo failover groep failover van primaire database in een regio toohello secundaire regio B. Hallo automatisch Hallo lezen-schrijven listener eindpunt tooregion B wordt ook automatisch bijgewerkt zodat alleen-lezen verbindingen in Hallo-webtoepassing wordt niet beïnvloed.</span><span class="sxs-lookup"><span data-stu-id="36404-166">If a database outage is detected in hello region A, hello failover group will automatically initiate failover of hello primary database in region A toohello secondary in region B. It will also automatically update hello read-write listener endpoint tooregion B so read-write connections in hello web application will not be impacted.</span></span> <span data-ttu-id="36404-167">Hallo traffic manager Hallo routeringstabel uitsluiten van offline Hallo-eindpunt maar gaat verder met routering Hallo eindgebruiker verkeer toohello resterende online-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="36404-167">hello traffic manager will exclude hello offline end-point from hello routing table but will continue routing hello end-user traffic toohello remaining online instances.</span></span> <span data-ttu-id="36404-168">Hallo SQL-verbindingsreeksen alleen-lezen is niet van invloed als ze altijd toohello database punt in Hallo dezelfde regio.</span><span class="sxs-lookup"><span data-stu-id="36404-168">hello read-only SQL connection strings will not be impacted as they always point toohello database in hello same region.</span></span> 

<span data-ttu-id="36404-169">Hallo volgende diagram ziet u de nieuwe configuratie Hallo na een failover Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-169">hello following diagram illustrates hello new configuration after hello failover.</span></span>

![Configuratie na een failover.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-2.png)

<span data-ttu-id="36404-172">In geval van een storing in een van de secundaire regio's Hallo wordt Hallo traffic manager automatisch verwijderd Hallo offline eindpunt in deze regio uit Hallo-routeringstabel.</span><span class="sxs-lookup"><span data-stu-id="36404-172">In case of an outage in one of hello secondary regions, hello traffic manager will automatically remove hello offline end-point in that region from hello routing table.</span></span> <span data-ttu-id="36404-173">Hallo kanaal toohello secundaire replicatiedatabase in deze regio zal worden onderbroken.</span><span class="sxs-lookup"><span data-stu-id="36404-173">hello replication channel toohello secondary database in that region will be suspended.</span></span> <span data-ttu-id="36404-174">Omdat de overige gebieden Hallo u extra gebruikersverkeer in dit scenario, worden Hallo toepassingsprestaties beïnvloed tijdens het Hallo-storing.</span><span class="sxs-lookup"><span data-stu-id="36404-174">Because hello remaining regions get additional user traffic in this scenario, hello application's performance will be impacted during hello outage.</span></span> <span data-ttu-id="36404-175">Zodra de onderbreking hello wordt verholpen, hello secundaire database in de betrokken regio Hallo onmiddellijk gesynchroniseerd Hello primaire.</span><span class="sxs-lookup"><span data-stu-id="36404-175">Once hello outage is mitigated, hello secondary database in hello impacted region will be immediately synchronized with hello primary.</span></span> <span data-ttu-id="36404-176">Tijdens het Hallo worden de synchronisatieprestaties van Hallo primaire kan enigszins beïnvloed, afhankelijk van de hoeveelheid gegevens die moeten worden gesynchroniseerd toobe Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-176">During hello synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="36404-177">Hallo volgende diagram ziet u een storing in regio B.</span><span class="sxs-lookup"><span data-stu-id="36404-177">hello following diagram illustrates an outage in region B.</span></span>

![Storing in een secundaire regio.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-3.png)

<span data-ttu-id="36404-180">Hallo sleutel **voordeel** van dit ontwerp is patroon Hallo toepassing werklast over meerdere secundaire replica's tooachieve Hallo eindgebruiker voor optimale prestaties kunt schalen.</span><span class="sxs-lookup"><span data-stu-id="36404-180">hello key **advantage** of this design pattern is that you can scale hello application workload across multiple secondaries tooachieve hello optimal end-user performance.</span></span> <span data-ttu-id="36404-181">Hallo **voor-en nadelen** van deze optie zijn:</span><span class="sxs-lookup"><span data-stu-id="36404-181">hello **tradeoffs** of this option are:</span></span>

* <span data-ttu-id="36404-182">Alleen-lezen verbindingen tussen toepassingsexemplaren Hallo en database hebben verschillende latentie en kosten</span><span class="sxs-lookup"><span data-stu-id="36404-182">Read-write connections between hello application instances and database have varying latency and cost</span></span>
* <span data-ttu-id="36404-183">Tijdens het Hallo storing is van invloed op toepassingsprestaties</span><span class="sxs-lookup"><span data-stu-id="36404-183">Application performance is impacted during hello outage</span></span>

> [!NOTE]
> <span data-ttu-id="36404-184">Een soortgelijke benadering kan worden gebruikt toooffload gespecialiseerde werkbelastingen, zoals rapportage van taken, hulpprogramma's voor bedrijfsinformatie of back-ups.</span><span class="sxs-lookup"><span data-stu-id="36404-184">A similar approach can be used toooffload specialized workloads such as reporting jobs, business intelligence tools, or backups.</span></span> <span data-ttu-id="36404-185">Normaal gesproken deze werkbelastingen aanzienlijke databaseresources verbruiken daarom wordt aanbevolen dat u een Hallo secundaire databases voor hen met Hallo prestaties niveau overeenkomende toohello verwachte werkbelasting wijst.</span><span class="sxs-lookup"><span data-stu-id="36404-185">Typically, these workloads consume significant database resources therefore it is recommended that you designate one of hello secondary databases for them with hello performance level matched toohello anticipated workload.</span></span>
>

## <a name="design-pattern-3-active-passive-deployment-for-data-preservation"></a><span data-ttu-id="36404-186">Bij een ontwerppatroon 3: actief / passief-implementatie voor het behoud van gegevens</span><span class="sxs-lookup"><span data-stu-id="36404-186">Design pattern 3: Active-passive deployment for data preservation</span></span>
<span data-ttu-id="36404-187">Deze optie is het meest geschikt voor toepassingen met Hallo volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="36404-187">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="36404-188">Verlies van gegevens is grote zakelijke risico.</span><span class="sxs-lookup"><span data-stu-id="36404-188">Any data loss is high business risk.</span></span> <span data-ttu-id="36404-189">Hallo database failover kan alleen worden gebruikt als een laatste toevlucht als Hallo onderbreking onherstelbare is.</span><span class="sxs-lookup"><span data-stu-id="36404-189">hello database failover can only be used as a last resort if hello outage is catastrophic.</span></span>
* <span data-ttu-id="36404-190">Hallo toepassing ondersteunt alleen-lezen en lees-/ modi van bewerkingen en kan werken in 'alleen-lezen-modus' voor een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="36404-190">hello application supports read-only and read-write modes of operations and can operate in "read-only mode" for a period of time.</span></span>

<span data-ttu-id="36404-191">In dit patroon wordt toepassing hello tooread alleen-lezen-modus als Hallo alleen-lezen verbindingen start time-outfouten ophalen.</span><span class="sxs-lookup"><span data-stu-id="36404-191">In this pattern, hello application switches tooread-only mode when hello read-write connections start getting time-out errors.</span></span> <span data-ttu-id="36404-192">Hallo-webtoepassing is geïmplementeerde tooboth regio's en bevatten verbindingseindpunt toohello lezen / schrijven-listener en een andere verbinding toohello alleen-lezen-listener-eindpunt.</span><span class="sxs-lookup"><span data-stu-id="36404-192">hello Web Application is deployed tooboth regions and include a connection toohello read-write listener endpoint and different connection toohello read-only listener endpoint.</span></span> <span data-ttu-id="36404-193">Hallo Traffic manager moet worden ingesteld in toouse [failover-routering](../traffic-manager/traffic-manager-configure-failover-routing-method.md) met [eindpunt bewaking](../traffic-manager/traffic-manager-monitoring.md) ingeschakeld voor het eindpunt van toepassing hello in elke regio.</span><span class="sxs-lookup"><span data-stu-id="36404-193">hello Traffic manager should be set up toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for hello application endpoint in each region.</span></span>

<span data-ttu-id="36404-194">Hallo volgende diagram ziet u deze configuratie voordat een storing.</span><span class="sxs-lookup"><span data-stu-id="36404-194">hello following diagram illustrates this configuration before an outage.</span></span>

![Actief / passief-implementatie voor failover.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-1.png)

<span data-ttu-id="36404-197">Als Hallo traffic manager een connectiviteit fout tooregion A detecteert, verandert deze automatisch verkeer toohello toepassing gebruikersexemplaar in regio B. Met dit patroon is het belangrijk dat u de respijtperiode Hallo met gegevens verloren gaan tooa voldoende hoge waarde, bijvoorbeeld 24 uur.</span><span class="sxs-lookup"><span data-stu-id="36404-197">When hello traffic manager detects a connectivity failure tooregion A, it automatically switches user traffic toohello application instance in region B. With this pattern, it is important that you set hello grace period with data loss tooa sufficiently high value, e.g. 24 hours.</span></span> <span data-ttu-id="36404-198">Dit zorgt ervoor dat gegevens verloren gaan als Hallo onderbreking is verholpen in die tijd is voorkomen.</span><span class="sxs-lookup"><span data-stu-id="36404-198">It will ensure that data loss is prevented if hello outage is mitigated within that time.</span></span> <span data-ttu-id="36404-199">Wanneer Hallo webtoepassing in Hallo regio B is geactiveerd zal Hallo lees-/ schrijfbewerkingen mislukken.</span><span class="sxs-lookup"><span data-stu-id="36404-199">When hello Web application in hello region B is activated hello read-write operations will start failing.</span></span> <span data-ttu-id="36404-200">Op dat moment moet deze overschakelen toohello alleen-lezen-modus.</span><span class="sxs-lookup"><span data-stu-id="36404-200">At that point, it should switch toohello read-only mode.</span></span> <span data-ttu-id="36404-201">In deze modus Hallo aanvragen worden automatisch gerouteerde toohello secundaire database.</span><span class="sxs-lookup"><span data-stu-id="36404-201">In this mode hello requests will be automatically routed toohello secondary database.</span></span> <span data-ttu-id="36404-202">In geval van een onherstelbare fout Hallo Hallo storing niet worden verholpen binnen de respijtperiode Hallo en Hallo failover groep Hallo failover wordt geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="36404-202">In hello case of a catastrophic failure hello outage will not be mitigated within hello grace period and hello failover group will trigger hello failover.</span></span> <span data-ttu-id="36404-203">Na deze Hallo wordt lezen / schrijven-listener beschikbaar en Hallo aanroepen tooit stopt mislukken.</span><span class="sxs-lookup"><span data-stu-id="36404-203">After that hello read-write listener will become available and hello calls tooit will stop failing.</span></span> <span data-ttu-id="36404-204">Dit wordt geïllustreerd door het volgende diagram Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-204">This is illustrated by hello following diagram.</span></span>

![Storing: De toepassing in de modus alleen-lezen.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-2.png)

<span data-ttu-id="36404-207">Als Hallo onderbreking in de primaire regio Hallo binnen de respijtperiode hello wordt verholpen, traffic manager Hallo herstel van de verbinding in de primaire regio Hallo detecteert en verandert verkeer back toohello toepassing gebruikersexemplaar in regio A. Dat toepassingsexemplaar wordt hervat en werkt in de modus lezen / schrijven met behulp van de primaire database Hallo in regio A.</span><span class="sxs-lookup"><span data-stu-id="36404-207">If hello outage in hello primary region is mitigated within hello grace period, traffic manager detects hello restoration of connectivity in hello primary region and switches user traffic back toohello application instance in region A. That application instance resumes and operates in read-write mode using hello primary database in region A.</span></span>

<span data-ttu-id="36404-208">Bij een stroomstoring in Hallo regio B detecteert Hallo traffic manager Hallo mislukt Hallo toepassing eindpunt in regio B en Hallo failover groep switches Hallo alleen-lezen-listener tooregion A. Hallo eindgebruikerservaring heeft geen gevolgen voor de onderbreking van deze maar Hallo primaire database zichtbaar tijdens Hallo storing.</span><span class="sxs-lookup"><span data-stu-id="36404-208">In case of an outage in hello region B, hello traffic manager detects hello failure of hello application end-point in region B and hello failover group switches hello read-only listener tooregion A. This outage does not impact hello end-user experience but hello primary database will be exposed during hello outage.</span></span> <span data-ttu-id="36404-209">Dit wordt geïllustreerd door het volgende diagram Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-209">This is illustrated by hello following diagram.</span></span>

![Storing: Secundaire database.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-3.png)

<span data-ttu-id="36404-212">Zodra Hallo onderbreking is verholpen, hello secundaire database is onmiddellijk gesynchroniseerd met primaire Hallo en Hallo alleen-lezen-listener is uitgeschakeld back toohello secundaire database in regio B. Tijdens de synchronisatie worden de prestaties van de primaire Hallo kan enigszins beïnvloed, afhankelijk van de hoeveelheid gegevens die moeten worden gesynchroniseerd toobe Hallo.</span><span class="sxs-lookup"><span data-stu-id="36404-212">Once hello outage is mitigated, hello secondary database is immediately synchronized with hello primary and hello read-only listener is switched back toohello secondary database in region B. During synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span>

<span data-ttu-id="36404-213">Dit ontwerppatroon heeft diverse **voordelen**:</span><span class="sxs-lookup"><span data-stu-id="36404-213">This design pattern has several **advantages**:</span></span>

* <span data-ttu-id="36404-214">Dit voorkomt het verlies van gegevens tijdens Hallo tijdelijke storingen.</span><span class="sxs-lookup"><span data-stu-id="36404-214">It avoids data loss during hello temporary outages.</span></span>
* <span data-ttu-id="36404-215">Uitvaltijd is afhankelijk van alleen hoe snel Hallo verbindingsfout optreedt, kan worden geconfigureerd in het traffic manager wordt gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="36404-215">Downtime depends only on how quickly traffic manager detects hello connectivity failure, which is configurable.</span></span>

<span data-ttu-id="36404-216">Hallo **afweging** is:</span><span class="sxs-lookup"><span data-stu-id="36404-216">hello **tradeoff** is:</span></span>

* <span data-ttu-id="36404-217">Toepassing moet kunnen toooperate in de modus alleen-lezen.</span><span class="sxs-lookup"><span data-stu-id="36404-217">Application must be able toooperate in read-only mode.</span></span>

> [!NOTE]
> <span data-ttu-id="36404-218">In geval van een permanente servicestoring in Hallo regio u handmatig database failover activeren en accepteren Hallo gegevens verloren gaan.</span><span class="sxs-lookup"><span data-stu-id="36404-218">In case of a permanent service outage in hello region, you manually activate database failover and accept hello data loss.</span></span> <span data-ttu-id="36404-219">Hallo toepassing zal Hallo secundaire regio met lees-/ schrijftoegang toohello database functioneel zijn.</span><span class="sxs-lookup"><span data-stu-id="36404-219">hello application will be functional in hello secondary region with read-write access toohello database.</span></span>
>

## <a name="business-continuity-planning-choose-an-application-design-for-cloud-disaster-recovery"></a><span data-ttu-id="36404-220">Zakelijke continuïteit planning: Kies het ontwerp van een toepassing voor noodherstel voor cloud</span><span class="sxs-lookup"><span data-stu-id="36404-220">Business continuity planning: Choose an application design for cloud disaster recovery</span></span>
<span data-ttu-id="36404-221">Uw strategie voor noodherstel specifieke cloud kunt combineren of breid deze ontwerppatronen toobest Hallo voldoen aan de behoeften van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="36404-221">Your specific cloud disaster recovery strategy can combine or extend these design patterns toobest meet hello needs of your application.</span></span>  <span data-ttu-id="36404-222">Zoals eerder vermeld, worden Hallo-strategie die u kiest is gebaseerd op Hallo SLA gewenste toooffer tooyour klanten en Hallo implementatietopologie van toepassing.</span><span class="sxs-lookup"><span data-stu-id="36404-222">As mentioned earlier, hello strategy you choose is based on hello SLA you want toooffer tooyour customers and hello application deployment topology.</span></span> <span data-ttu-id="36404-223">toohelp hulplijn uw beslissing, Hallo volgende tabel vergelijkt Hallo keuzes op basis van Hallo schatting van de gegevens verlies of herstel beoogde herstelpunt (RPO) en de geschatte hersteltijd (invoegen).</span><span class="sxs-lookup"><span data-stu-id="36404-223">toohelp guide your decision, hello following table compares hello choices based on hello estimated data loss or recovery point objective (RPO) and estimated recovery time (ERT).</span></span>

| <span data-ttu-id="36404-224">patroon</span><span class="sxs-lookup"><span data-stu-id="36404-224">Pattern</span></span> | <span data-ttu-id="36404-225">RPO</span><span class="sxs-lookup"><span data-stu-id="36404-225">RPO</span></span> | <span data-ttu-id="36404-226">INVOEGEN</span><span class="sxs-lookup"><span data-stu-id="36404-226">ERT</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="36404-227">Actief / passief-implementatie voor herstel na noodgevallen met toegang tot de database met CO-locaties</span><span class="sxs-lookup"><span data-stu-id="36404-227">Active-passive deployment for disaster recovery with co-located database access</span></span> |<span data-ttu-id="36404-228">Lees-/ schrijftoegang sec < 5.</span><span class="sxs-lookup"><span data-stu-id="36404-228">Read-write access < 5 sec</span></span> |<span data-ttu-id="36404-229">Fout detectietijd + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="36404-229">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="36404-230">Implementatie van de actieve toepassing load balancing</span><span class="sxs-lookup"><span data-stu-id="36404-230">Active-active deployment for application load balancing</span></span> |<span data-ttu-id="36404-231">Lees-/ schrijftoegang sec < 5.</span><span class="sxs-lookup"><span data-stu-id="36404-231">Read-write access < 5 sec</span></span> |<span data-ttu-id="36404-232">Fout detectietijd + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="36404-232">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="36404-233">Actief / passief-implementatie voor het behoud van gegevens</span><span class="sxs-lookup"><span data-stu-id="36404-233">Active-passive deployment for data preservation</span></span> |<span data-ttu-id="36404-234">Alleen-lezentoegang sec < 5.</span><span class="sxs-lookup"><span data-stu-id="36404-234">Read-only access < 5 sec</span></span> | <span data-ttu-id="36404-235">Alleen-lezentoegang = 0</span><span class="sxs-lookup"><span data-stu-id="36404-235">Read-only access = 0</span></span> |
||<span data-ttu-id="36404-236">Lees-/ schrijftoegang = nul</span><span class="sxs-lookup"><span data-stu-id="36404-236">Read-write access = zero</span></span> | <span data-ttu-id="36404-237">Lees-/ schrijftoegang = fout detectietijd + respijtperiode met verlies van gegevens</span><span class="sxs-lookup"><span data-stu-id="36404-237">Read-write access = Failure detection time + grace period with data loss</span></span> |
|||

## <a name="next-steps"></a><span data-ttu-id="36404-238">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="36404-238">Next steps</span></span>
* <span data-ttu-id="36404-239">toolearn over Azure SQL Database automatische back-ups, Zie [geautomatiseerde back-ups van SQL-Database](sql-database-automated-backups.md)</span><span class="sxs-lookup"><span data-stu-id="36404-239">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md)</span></span>
* <span data-ttu-id="36404-240">Zie voor een overzicht van zakelijke continuïteit en scenario's [Business continuity-overzicht](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="36404-240">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="36404-241">toolearn over het gebruik van automatische back-ups voor herstel, Zie [een database terugzetten vanuit Hallo service geïnitieerde back-ups](sql-database-recovery-using-backups.md)</span><span class="sxs-lookup"><span data-stu-id="36404-241">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md)</span></span>
* <span data-ttu-id="36404-242">Zie toolearn over opties voor sneller herstel [actieve geo-replicatie](sql-database-geo-replication-overview.md)</span><span class="sxs-lookup"><span data-stu-id="36404-242">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md)</span></span>  
* <span data-ttu-id="36404-243">toolearn over het gebruik van automatische back-ups voor archivering, Zie [kopiëren van de database](sql-database-copy.md)</span><span class="sxs-lookup"><span data-stu-id="36404-243">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md)</span></span>
* <span data-ttu-id="36404-244">Zie voor meer informatie over actieve geo-replicatie met elastische Pools [elastische Pool disaster recovery strategieën](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="36404-244">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
