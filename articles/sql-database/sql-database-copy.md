---
title: een Azure SQL database aaaCopy | Microsoft Docs
description: Maak een kopie van een Azure SQL database
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 5aaf6bcd-3839-49b5-8c77-cbdf786e359b
ms.service: sql-database
ms.custom: load & move data
ms.devlang: NA
ms.date: 06/15/2017
ms.author: carlrab
ms.workload: data-management
ms.topic: article
ms.tgt_pltfrm: NA
ms.openlocfilehash: 64a297d819d6da89600fda60abe8394ae405abfe
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="copy-an-azure-sql-database"></a><span data-ttu-id="cb662-103">Een Azure SQL database kopiëren</span><span class="sxs-lookup"><span data-stu-id="cb662-103">Copy an Azure SQL database</span></span>

<span data-ttu-id="cb662-104">Azure SQL Database biedt verschillende methoden voor het maken van een transactioneel consistent kopie van een bestaande Azure SQL database op beide Hallo dezelfde of een andere server.</span><span class="sxs-lookup"><span data-stu-id="cb662-104">Azure SQL Database provides several methods for creating a transactionally consistent copy of an existing Azure SQL database on either hello same server or a different server.</span></span> <span data-ttu-id="cb662-105">U kunt een SQL-database kopiëren via hello Azure-portal, PowerShell of T-SQL.</span><span class="sxs-lookup"><span data-stu-id="cb662-105">You can copy a SQL database by using hello Azure portal, PowerShell, or T-SQL.</span></span> 

## <a name="overview"></a><span data-ttu-id="cb662-106">Overzicht</span><span class="sxs-lookup"><span data-stu-id="cb662-106">Overview</span></span>

<span data-ttu-id="cb662-107">Een databasekopie is een momentopname van de brondatabase Hallo vanaf Hallo-tijd van Hallo copy-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="cb662-107">A database copy is a snapshot of hello source database as of hello time of hello copy request.</span></span> <span data-ttu-id="cb662-108">Kunt u dezelfde server of een andere server, de serviceniveau prijscategorie en prestatieniveau of een andere prestatieniveau binnen Hallo Hallo dezelfde servicelaag (editie).</span><span class="sxs-lookup"><span data-stu-id="cb662-108">You can select hello same server or a different server, its service tier and performance level, or a different performance level within hello same service tier (edition).</span></span> <span data-ttu-id="cb662-109">Nadat het Hallo-kopie is voltooid, wordt een volledig functionele, onafhankelijke database.</span><span class="sxs-lookup"><span data-stu-id="cb662-109">After hello copy is complete, it becomes a fully functional, independent database.</span></span> <span data-ttu-id="cb662-110">U kunt op dit moment upgrade of downgrade voor tooany edition.</span><span class="sxs-lookup"><span data-stu-id="cb662-110">At this point, you can upgrade or downgrade it tooany edition.</span></span> <span data-ttu-id="cb662-111">Hallo-aanmeldingen, gebruikers en machtigingen kunnen afzonderlijk worden beheerd.</span><span class="sxs-lookup"><span data-stu-id="cb662-111">hello logins, users, and permissions can be managed independently.</span></span>  

## <a name="logins-in-hello-database-copy"></a><span data-ttu-id="cb662-112">Aanmeldingen in Hallo databasekopie</span><span class="sxs-lookup"><span data-stu-id="cb662-112">Logins in hello database copy</span></span>

<span data-ttu-id="cb662-113">Wanneer u een database toohello kopieert dezelfde logische server, Hallo dezelfde aanmeldingen op beide databases kunnen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="cb662-113">When you copy a database toohello same logical server, hello same logins can be used on both databases.</span></span> <span data-ttu-id="cb662-114">Hallo beveiligings-principal dat u toocopy Hallo database gebruiken eigenaar Hallo database op Hallo nieuwe database.</span><span class="sxs-lookup"><span data-stu-id="cb662-114">hello security principal you use toocopy hello database becomes hello database owner on hello new database.</span></span> <span data-ttu-id="cb662-115">Alle databasegebruikers en hun machtigingen hun beveiligings-id's (SID's) zijn gekopieerd toohello database-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="cb662-115">All database users, their permissions, and their security identifiers (SIDs) are copied toohello database copy.</span></span>  

<span data-ttu-id="cb662-116">Wanneer u een database tooa andere logische server kopieert, eigenaar Hallo beveiligings-principal is op de nieuwe server Hallo Hallo database op Hallo nieuwe database.</span><span class="sxs-lookup"><span data-stu-id="cb662-116">When you copy a database tooa different logical server, hello security principal on hello new server becomes hello database owner on hello new database.</span></span> <span data-ttu-id="cb662-117">Als u [databasegebruikers opgenomen](sql-database-manage-logins.md) voor toegang tot gegevens, moet u zorgen dat beide Hallo primaire en secundaire databases altijd Hallo gebruikersreferenties hebben, zodat die nadat Hallo kopie is voltooid u onmiddellijk toegang tot deze met dezelfde Hallo de referenties.</span><span class="sxs-lookup"><span data-stu-id="cb662-117">If you use [contained database users](sql-database-manage-logins.md) for data access, ensure that both hello primary and secondary databases always have hello same user credentials, so that after hello copy is complete you can immediately access it with hello same credentials.</span></span> 

<span data-ttu-id="cb662-118">Als u [Azure Active Directory](../active-directory/active-directory-whatis.md), kunt u volledig Hallo nodig voor het beheren van referenties in Hallo kopie elimineren.</span><span class="sxs-lookup"><span data-stu-id="cb662-118">If you use [Azure Active Directory](../active-directory/active-directory-whatis.md), you can completely eliminate hello need for managing credentials in hello copy.</span></span> <span data-ttu-id="cb662-119">Echter, wanneer u Hallo tooa nieuwe databaseserver kopieert, Hallo aanmelding gebaseerde toegang werkt mogelijk niet, omdat Hallo aanmeldingen niet bestaan op de nieuwe server Hallo.</span><span class="sxs-lookup"><span data-stu-id="cb662-119">However, when you copy hello database tooa new server, hello login-based access might not work, because hello logins do not exist on hello new server.</span></span> <span data-ttu-id="cb662-120">toolearn over het beheren van aanmeldingen bij het kopiëren van een database tooa andere logische server, Zie [hoe toomanage Azure SQL database-beveiliging na herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-120">toolearn about managing logins when you copy a database tooa different logical server, see [How toomanage Azure SQL database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> 

<span data-ttu-id="cb662-121">Nadat Hallo kopiëren is geslaagd en voordat andere gebruikers worden toegewezen, alleen hello aanmelding die geïnitieerd Hallo kopiëren, Hallo-database-eigenaar kan zich aanmelden in de nieuwe database toohello.</span><span class="sxs-lookup"><span data-stu-id="cb662-121">After hello copying succeeds and before other users are remapped, only hello login that initiated hello copying, hello database owner, can log in toohello new database.</span></span> <span data-ttu-id="cb662-122">tooresolve aanmeldingen nadat Hallo kopiëren van de bewerking is voltooid, Zie [aanmeldingen oplossen](#resolve-logins).</span><span class="sxs-lookup"><span data-stu-id="cb662-122">tooresolve logins after hello copying operation is complete, see [Resolve logins](#resolve-logins).</span></span>

## <a name="copy-a-database-by-using-hello-azure-portal"></a><span data-ttu-id="cb662-123">Kopiëren van een database met behulp van hello Azure-portal</span><span class="sxs-lookup"><span data-stu-id="cb662-123">Copy a database by using hello Azure portal</span></span>

<span data-ttu-id="cb662-124">toocopy een database met behulp van hello Azure-portal openen Hallo-pagina voor uw database en klik vervolgens op **kopie**.</span><span class="sxs-lookup"><span data-stu-id="cb662-124">toocopy a database by using hello Azure portal, open hello page for your database, and then click **Copy**.</span></span> 

   ![Database-exemplaar](./media/sql-database-copy/database-copy.png)

## <a name="copy-a-database-by-using-powershell"></a><span data-ttu-id="cb662-126">Een database met behulp van PowerShell kopiëren</span><span class="sxs-lookup"><span data-stu-id="cb662-126">Copy a database by using PowerShell</span></span>

<span data-ttu-id="cb662-127">een database met behulp van PowerShell, gebruik Hallo toocopy [nieuw AzureRmSqlDatabaseCopy](/powershell/module/azurerm.sql/new-azurermsqldatabasecopy) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="cb662-127">toocopy a database by using PowerShell, use hello [New-AzureRmSqlDatabaseCopy](/powershell/module/azurerm.sql/new-azurermsqldatabasecopy) cmdlet.</span></span> 

```PowerShell
New-AzureRmSqlDatabaseCopy -ResourceGroupName "myResourceGroup" `
    -ServerName $sourceserver `
    -DatabaseName "MySampleDatabase" `
    -CopyResourceGroupName "myResourceGroup" `
    -CopyServerName $targetserver `
    -CopyDatabaseName "CopyOfMySampleDatabase"
```

<span data-ttu-id="cb662-128">Zie voor een volledige voorbeeldscript [kopiëren van een nieuwe databaseserver voor tooa](scripts/sql-database-copy-database-to-new-server-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-128">For a complete sample script, see [Copy a database tooa new server](scripts/sql-database-copy-database-to-new-server-powershell.md).</span></span>

## <a name="copy-a-database-by-using-transact-sql"></a><span data-ttu-id="cb662-129">Kopiëren van een database met behulp van Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="cb662-129">Copy a database by using Transact-SQL</span></span>

<span data-ttu-id="cb662-130">Meld u bij toohello master database met Hallo principal-aanmelding op serverniveau of Hallo-aanmelding die u wilt dat toocopy Hallo-database is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="cb662-130">Log in toohello master database with hello server-level principal login or hello login that created hello database you want toocopy.</span></span> <span data-ttu-id="cb662-131">Voor de database kopiëren toosucceed, moeten aanmeldingen die geen Hallo niveau van de server principal lid zijn van Hallo dbmanager rol.</span><span class="sxs-lookup"><span data-stu-id="cb662-131">For database copying toosucceed, logins that are not hello server-level principal must be members of hello dbmanager role.</span></span> <span data-ttu-id="cb662-132">Zie voor meer informatie over aanmeldingen en aangesloten toohello server [aanmeldingen beheren](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-132">For more information about logins and connecting toohello server, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="cb662-133">Beginnen met het kopiëren van de brondatabase Hallo Hello [CREATE DATABASE](https://msdn.microsoft.com/library/ms176061.aspx) instructie.</span><span class="sxs-lookup"><span data-stu-id="cb662-133">Start copying hello source database with hello [CREATE DATABASE](https://msdn.microsoft.com/library/ms176061.aspx) statement.</span></span> <span data-ttu-id="cb662-134">Deze instructie uitvoert initieert Hallo-database kopiëren proces.</span><span class="sxs-lookup"><span data-stu-id="cb662-134">Executing this statement initiates hello database copying process.</span></span> <span data-ttu-id="cb662-135">Omdat het kopiëren van een database een asynchrone is, retourneert Hallo instructie CREATE DATABASE voordat het Hallo-database kopiëren is voltooid.</span><span class="sxs-lookup"><span data-stu-id="cb662-135">Because copying a database is an asynchronous process, hello CREATE DATABASE statement returns before hello database copying is complete.</span></span>

### <a name="copy-a-sql-database-toohello-same-server"></a><span data-ttu-id="cb662-136">Kopiëren van een SQL-database toohello dezelfde server</span><span class="sxs-lookup"><span data-stu-id="cb662-136">Copy a SQL database toohello same server</span></span>
<span data-ttu-id="cb662-137">Meld u bij toohello master database met Hallo principal-aanmelding op serverniveau of Hallo-aanmelding die u wilt dat toocopy Hallo-database is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="cb662-137">Log in toohello master database with hello server-level principal login or hello login that created hello database you want toocopy.</span></span> <span data-ttu-id="cb662-138">Voor de database kopiëren toosucceed, moeten aanmeldingen die geen Hallo niveau van de server principal lid zijn van Hallo dbmanager rol.</span><span class="sxs-lookup"><span data-stu-id="cb662-138">For database copying toosucceed, logins that are not hello server-level principal must be members of hello dbmanager role.</span></span>

<span data-ttu-id="cb662-139">Met deze opdracht kopieert Database1 tooa nieuwe database met de naam Database2 op Hallo dezelfde server.</span><span class="sxs-lookup"><span data-stu-id="cb662-139">This command copies Database1 tooa new database named Database2 on hello same server.</span></span> <span data-ttu-id="cb662-140">Afhankelijk van de grootte van de Hallo van uw database, kan Hallo kopiëren bewerking sommige toocomplete tijd duren.</span><span class="sxs-lookup"><span data-stu-id="cb662-140">Depending on hello size of your database, hello copying operation might take some time toocomplete.</span></span>

    -- Execute on hello master database.
    -- Start copying.
    CREATE DATABASE Database1_copy AS COPY OF Database1;

### <a name="copy-a-sql-database-tooa-different-server"></a><span data-ttu-id="cb662-141">Kopiëren van een andere server van SQL database tooa</span><span class="sxs-lookup"><span data-stu-id="cb662-141">Copy a SQL database tooa different server</span></span>

<span data-ttu-id="cb662-142">Meld u bij toohello master database van Hallo-doelserver Hallo SQL database-server waar de nieuwe database Hallo toobe gemaakt is.</span><span class="sxs-lookup"><span data-stu-id="cb662-142">Log in toohello master database of hello destination server, hello SQL database server where hello new database is toobe created.</span></span> <span data-ttu-id="cb662-143">Gebruik een aanmelding die heeft dezelfde gebruikersnaam en wachtwoord Hallo als Hallo database-eigenaar van de brondatabase Hallo op Hallo bron SQL database-server.</span><span class="sxs-lookup"><span data-stu-id="cb662-143">Use a login that has hello same name and password as hello database owner of hello source database on hello source SQL database server.</span></span> <span data-ttu-id="cb662-144">Hallo-aanmelding op de doelserver Hallo moet ook lid zijn van Hallo dbmanager rol zijn of Hallo principal-aanmelding op serverniveau.</span><span class="sxs-lookup"><span data-stu-id="cb662-144">hello login on hello destination server must also be a member of hello dbmanager role or be hello server-level principal login.</span></span>

<span data-ttu-id="cb662-145">Met deze opdracht exemplaren Database1 op server1 tooa nieuwe database met de naam Database2 op server2.</span><span class="sxs-lookup"><span data-stu-id="cb662-145">This command copies Database1 on server1 tooa new database named Database2 on server2.</span></span> <span data-ttu-id="cb662-146">Afhankelijk van de grootte van de Hallo van uw database, kan Hallo kopiëren bewerking sommige toocomplete tijd duren.</span><span class="sxs-lookup"><span data-stu-id="cb662-146">Depending on hello size of your database, hello copying operation might take some time toocomplete.</span></span>

    -- Execute on hello master database of hello target server (server2)
    -- Start copying from Server1 tooServer2
    CREATE DATABASE Database1_copy AS COPY OF server1.Database1;


### <a name="monitor-hello-progress-of-hello-copying-operation"></a><span data-ttu-id="cb662-147">Voortgang van Hallo Hallo bewerking kopiëren</span><span class="sxs-lookup"><span data-stu-id="cb662-147">Monitor hello progress of hello copying operation</span></span>

<span data-ttu-id="cb662-148">Hallo kopiëren proces bewaken door het uitvoeren van query's Hallo sys.databases en sys.dm_database_copies weergaven.</span><span class="sxs-lookup"><span data-stu-id="cb662-148">Monitor hello copying process by querying hello sys.databases and sys.dm_database_copies views.</span></span> <span data-ttu-id="cb662-149">Tijdens het kopiëren van Hallo wordt uitgevoerd, Hallo **state_desc** kolom Hallo sys.databases weergave voor de nieuwe database hello te is ingesteld**kopiëren**.</span><span class="sxs-lookup"><span data-stu-id="cb662-149">While hello copying is in progress, hello **state_desc** column of hello sys.databases view for hello new database is set too**COPYING**.</span></span>

* <span data-ttu-id="cb662-150">Als Hallo kopiëren is mislukt, Hallo **state_desc** kolom Hallo sys.databases weergave voor de nieuwe database hello te is ingesteld**VERMOEDT**.</span><span class="sxs-lookup"><span data-stu-id="cb662-150">If hello copying fails, hello **state_desc** column of hello sys.databases view for hello new database is set too**SUSPECT**.</span></span> <span data-ttu-id="cb662-151">Hallo DROP-instructie niet uitvoeren op Hallo nieuwe database en probeer het later opnieuw.</span><span class="sxs-lookup"><span data-stu-id="cb662-151">Execute hello DROP statement on hello new database, and try again later.</span></span>
* <span data-ttu-id="cb662-152">Als Hallo kopiëren is gelukt, hello **state_desc** kolom Hallo sys.databases weergave voor de nieuwe database hello te is ingesteld**ONLINE**.</span><span class="sxs-lookup"><span data-stu-id="cb662-152">If hello copying succeeds, hello **state_desc** column of hello sys.databases view for hello new database is set too**ONLINE**.</span></span> <span data-ttu-id="cb662-153">Hallo kopiëren is voltooid en de nieuwe database Hallo is gewone databases die onafhankelijk van de brondatabase Hallo kan worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="cb662-153">hello copying is complete, and hello new database is a regular database that can be changed independent of hello source database.</span></span>

> [!NOTE]
> <span data-ttu-id="cb662-154">Als u toocancel Hallo kopiëren besluit terwijl deze uitgevoerd wordt, uitvoeren Hallo [DROP DATABASE](https://msdn.microsoft.com/library/ms178613.aspx) instructie op Hallo nieuwe database.</span><span class="sxs-lookup"><span data-stu-id="cb662-154">If you decide toocancel hello copying while it is in progress, execute hello [DROP DATABASE](https://msdn.microsoft.com/library/ms178613.aspx) statement on hello new database.</span></span> <span data-ttu-id="cb662-155">U kunt ook de instructie DROP DATABASE Hallo worden uitgevoerd op de brondatabase Hallo ook wordt geannuleerd Hallo proces kopiëren.</span><span class="sxs-lookup"><span data-stu-id="cb662-155">Alternatively, executing hello DROP DATABASE statement on hello source database also cancels hello copying process.</span></span>
> 

## <a name="resolve-logins"></a><span data-ttu-id="cb662-156">Aanmeldingen oplossen</span><span class="sxs-lookup"><span data-stu-id="cb662-156">Resolve logins</span></span>

<span data-ttu-id="cb662-157">Nadat de nieuwe database Hallo online op de doelserver hello is, gebruik Hallo [ALTER USER](https://msdn.microsoft.com/library/ms176060.aspx) instructie tooremap Hallo gebruikers van Hallo toologins op de doelserver Hallo nieuwe database.</span><span class="sxs-lookup"><span data-stu-id="cb662-157">After hello new database is online on hello destination server, use hello [ALTER USER](https://msdn.microsoft.com/library/ms176060.aspx) statement tooremap hello users from hello new database toologins on hello destination server.</span></span> <span data-ttu-id="cb662-158">tooresolve zwevende gebruikers, Zie [zwevende gebruikers dat problemen met](https://msdn.microsoft.com/library/ms175475.aspx).</span><span class="sxs-lookup"><span data-stu-id="cb662-158">tooresolve orphaned users, see [Troubleshoot Orphaned Users](https://msdn.microsoft.com/library/ms175475.aspx).</span></span> <span data-ttu-id="cb662-159">Zie ook [hoe toomanage Azure SQL database-beveiliging na herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-159">See also [How toomanage Azure SQL database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

<span data-ttu-id="cb662-160">Alle gebruikers in de nieuwe database Hallo behouden Hallo machtigingen die ze hebben als in de brondatabase Hallo.</span><span class="sxs-lookup"><span data-stu-id="cb662-160">All users in hello new database retain hello permissions that they had in hello source database.</span></span> <span data-ttu-id="cb662-161">Hallo-gebruiker die heeft gestart databasekopie Hallo Hallo database-eigenaar van de nieuwe database Hallo en een nieuwe beveiligings-id (SID) is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="cb662-161">hello user who initiated hello database copy becomes hello database owner of hello new database and is assigned a new security identifier (SID).</span></span> <span data-ttu-id="cb662-162">Nadat Hallo kopiëren is geslaagd en voordat andere gebruikers worden toegewezen, alleen hello aanmelding die geïnitieerd Hallo kopiëren, Hallo-database-eigenaar kan zich aanmelden in de nieuwe database toohello.</span><span class="sxs-lookup"><span data-stu-id="cb662-162">After hello copying succeeds and before other users are remapped, only hello login that initiated hello copying, hello database owner, can log in toohello new database.</span></span>

<span data-ttu-id="cb662-163">toolearn over het beheren van gebruikers en aanmeldingen bij het kopiëren van een database tooa andere logische server, Zie [hoe toomanage Azure SQL database-beveiliging na herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-163">toolearn about managing users and logins when you copy a database tooa different logical server, see [How toomanage Azure SQL database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cb662-164">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="cb662-164">Next steps</span></span>

* <span data-ttu-id="cb662-165">Zie voor meer informatie over aanmeldingen [aanmeldingen beheren](sql-database-manage-logins.md) en [hoe toomanage Azure SQL database-beveiliging na herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-165">For information about logins, see [Manage logins](sql-database-manage-logins.md) and [How toomanage Azure SQL database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
* <span data-ttu-id="cb662-166">een database tooexport Zie [exporteren Hallo database tooa Bacpac-](sql-database-export.md).</span><span class="sxs-lookup"><span data-stu-id="cb662-166">tooexport a database, see [Export hello database tooa BACPAC](sql-database-export.md).</span></span>
