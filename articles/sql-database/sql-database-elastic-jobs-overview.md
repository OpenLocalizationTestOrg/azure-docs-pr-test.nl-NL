---
title: Cloud uitgebreide databases beheren | Microsoft Docs
description: Ziet u de service van de taak elastische database
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 8e84562115a866c0df5e0dee6c7f66c036a74737
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="b6065-103">Cloud uitgebreide databases beheren</span><span class="sxs-lookup"><span data-stu-id="b6065-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="b6065-104">Voor het beheren van uitgebreide shard-databases, de **elastische Database taken** functie (preview) kunt u op betrouwbare wijze een (T-SQL) Transact-SQL-script uitvoeren in een groep van databases, met inbegrip van:</span><span class="sxs-lookup"><span data-stu-id="b6065-104">To manage scaled-out sharded databases, the **Elastic Database jobs** feature (preview) enables you to reliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="b6065-105">een aangepaste verzameling van databases (Zie hieronder)</span><span class="sxs-lookup"><span data-stu-id="b6065-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="b6065-106">alle databases in een [elastische groep](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="b6065-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="b6065-107">een set shard (gemaakt met behulp van [clientbibliotheek voor elastische Database](sql-database-elastic-database-client-library.md)).</span><span class="sxs-lookup"><span data-stu-id="b6065-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="b6065-108">Documentatie</span><span class="sxs-lookup"><span data-stu-id="b6065-108">Documentation</span></span>
* <span data-ttu-id="b6065-109">[Installeer de onderdelen van de taak elastische Database](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-109">[Install the Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="b6065-110">[Aan de slag met elastische Database taken](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="b6065-111">[Maken en beheren van taken met behulp van PowerShell](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="b6065-112">Maken en beheren van geschaalde uit Azure SQL-Databases</span><span class="sxs-lookup"><span data-stu-id="b6065-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="b6065-113">**Elastische Database taken** is momenteel een klant gehost Azure Cloud Service waarmee de uitvoering van de ad-hoc en geplande administratieve taken die worden aangeroepen **taken**.</span><span class="sxs-lookup"><span data-stu-id="b6065-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables the execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="b6065-114">Met taken, kan eenvoudig en betrouwbaar grote groepen van Azure SQL-Databases beheren door het uitvoeren van Transact-SQL-scripts administratieve bewerkingen uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="b6065-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts to perform administrative operations.</span></span> 

![Service voor elastische database-taak][1]

## <a name="why-use-jobs"></a><span data-ttu-id="b6065-116">Waarom taken gebruiken?</span><span class="sxs-lookup"><span data-stu-id="b6065-116">Why use jobs?</span></span>
<span data-ttu-id="b6065-117">**Beheren**</span><span class="sxs-lookup"><span data-stu-id="b6065-117">**Manage**</span></span>

<span data-ttu-id="b6065-118">Schemawijzigingen eenvoudig doen, Referentiebeheer, verwijzing Gegevensupdates, prestatiegegevens verzamelen of telemetrie tenantverzameling (klant).</span><span class="sxs-lookup"><span data-stu-id="b6065-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="b6065-119">**Rapporten**</span><span class="sxs-lookup"><span data-stu-id="b6065-119">**Reports**</span></span>

<span data-ttu-id="b6065-120">Cumulatieve gegevens uit een verzameling van Azure SQL-Databases in een doeltabel met één.</span><span class="sxs-lookup"><span data-stu-id="b6065-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="b6065-121">**Overhead verminderen**</span><span class="sxs-lookup"><span data-stu-id="b6065-121">**Reduce overhead**</span></span>

<span data-ttu-id="b6065-122">Normaal gesproken moet u verbinding maken met elke database, onafhankelijk van elkaar om te kunnen uitvoeren van Transact-SQL-instructies of andere beheertaken.</span><span class="sxs-lookup"><span data-stu-id="b6065-122">Normally, you must connect to each database independently in order to run Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="b6065-123">Een taak verwerkt de taak van het aanmelden bij elke database in de doelgroep.</span><span class="sxs-lookup"><span data-stu-id="b6065-123">A job handles the task of logging in to each database in the target group.</span></span> <span data-ttu-id="b6065-124">U ook definiëren, onderhouden en persistent maken van Transact-SQL-scripts moeten worden uitgevoerd in een groep van Azure SQL-Databases.</span><span class="sxs-lookup"><span data-stu-id="b6065-124">You also define, maintain and persist Transact-SQL scripts to be executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="b6065-125">**Accounting**</span><span class="sxs-lookup"><span data-stu-id="b6065-125">**Accounting**</span></span>

<span data-ttu-id="b6065-126">Taken het script uitvoert en de status van de uitvoering voor elke database wordt vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="b6065-126">Jobs run the script and log the status of execution for each database.</span></span> <span data-ttu-id="b6065-127">Automatisch opnieuw wordt ook krijgen als er fouten optreden.</span><span class="sxs-lookup"><span data-stu-id="b6065-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="b6065-128">**Flexibiliteit**</span><span class="sxs-lookup"><span data-stu-id="b6065-128">**Flexibility**</span></span>

<span data-ttu-id="b6065-129">Aangepaste groepen van Azure SQL-Databases, en schema's voor het uitvoeren van een taak te definiëren.</span><span class="sxs-lookup"><span data-stu-id="b6065-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="b6065-130">In de Azure portal is slechts een beperkte set functies beperkt tot SQL Azure elastische pools beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="b6065-130">In the Azure portal, only a reduced set of functions limited to SQL Azure elastic pools is available.</span></span> <span data-ttu-id="b6065-131">Gebruik de PowerShell APIs voor toegang tot de volledige set van de huidige functionaliteit.</span><span class="sxs-lookup"><span data-stu-id="b6065-131">Use the PowerShell APIs to access the full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="b6065-132">Toepassingen</span><span class="sxs-lookup"><span data-stu-id="b6065-132">Applications</span></span>
* <span data-ttu-id="b6065-133">Administratieve taken uitvoeren, zoals het implementeren van een nieuw schema.</span><span class="sxs-lookup"><span data-stu-id="b6065-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="b6065-134">Algemene referentie gegevens product-informatie voor alle databases bijwerken.</span><span class="sxs-lookup"><span data-stu-id="b6065-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="b6065-135">Of schema's automatische updates elke weekdag, na uur.</span><span class="sxs-lookup"><span data-stu-id="b6065-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="b6065-136">Samenstellen ter verbetering van de prestaties van query's.</span><span class="sxs-lookup"><span data-stu-id="b6065-136">Rebuild indexes to improve query performance.</span></span> <span data-ttu-id="b6065-137">Het opnieuw opbouwen kan worden geconfigureerd om uit te voeren in een verzameling van databases op periodieke basis, zoals tijdens de daluren.</span><span class="sxs-lookup"><span data-stu-id="b6065-137">The rebuilding can be configured to execute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="b6065-138">Queryresultaten uit een set van databases in een centrale tabel op basis van de lopende verzamelen.</span><span class="sxs-lookup"><span data-stu-id="b6065-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="b6065-139">Prestaties van query's worden voortdurend uitgevoerd en geconfigureerd voor de trigger aanvullende taken worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-139">Performance queries can be continually executed and configured to trigger additional tasks to be executed.</span></span>
* <span data-ttu-id="b6065-140">Langer actief gegevensverwerking-query's uitvoeren in een groot aantal databases, zoals het verzamelen van telemetrie van de klant.</span><span class="sxs-lookup"><span data-stu-id="b6065-140">Execute longer running data processing queries across a large set of databases, for example the collection of customer telemetry.</span></span> <span data-ttu-id="b6065-141">Resultaten worden verzameld in een doeltabel met één voor verdere analyse.</span><span class="sxs-lookup"><span data-stu-id="b6065-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="b6065-142">Elastische taken van de Database: end-to-end</span><span class="sxs-lookup"><span data-stu-id="b6065-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="b6065-143">Installeer de **elastische Database taken** onderdelen.</span><span class="sxs-lookup"><span data-stu-id="b6065-143">Install the **Elastic Database jobs** components.</span></span> <span data-ttu-id="b6065-144">Zie voor meer informatie [elastische Database installeren taken](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="b6065-145">Als de installatie mislukt, raadpleegt u [verwijderen](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-145">If the installation fails, see [how to uninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="b6065-146">Gebruik de PowerShell APIs voor toegang tot meer functionaliteit, bijvoorbeeld het maken van aangepaste database verzamelingen, schema's toe te voegen en/of resultatensets verzamelen.</span><span class="sxs-lookup"><span data-stu-id="b6065-146">Use the PowerShell APIs to access more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="b6065-147">De portal gebruiken voor eenvoudige installatie en het maken/bewaking van taken die zijn beperkt tot uitvoering op basis van een **elastische pool**.</span><span class="sxs-lookup"><span data-stu-id="b6065-147">Use the portal for simple installation and creation/monitoring of jobs limited to execution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="b6065-148">Gecodeerde referenties voor het uitvoeren van taak maken en [de gebruiker (of de rol) toevoegen aan elke database in de groep](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-148">Create encrypted credentials for job execution and [add the user (or role) to each database in the group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="b6065-149">Maak een idempotent T-SQL-script dat kan worden uitgevoerd op elke database in de groep.</span><span class="sxs-lookup"><span data-stu-id="b6065-149">Create an idempotent T-SQL script that can be run against every database in the group.</span></span> 
5. <span data-ttu-id="b6065-150">Volg deze stappen voor taken met de Azure portal maken: [maken en beheren van taken voor elastische Database](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-150">Follow these steps to create jobs using the Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="b6065-151">Of PowerShell-scripts gebruiken: [maken en beheren van een SQL-Database elastische database taken met behulp van PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="b6065-152">De Idempotent-scripts</span><span class="sxs-lookup"><span data-stu-id="b6065-152">Idempotent scripts</span></span>
<span data-ttu-id="b6065-153">De scripts moet [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="b6065-153">The scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="b6065-154">Eenvoudige voorwaarden 'idempotent' betekent dat als het script is voltooid en opnieuw wordt uitgevoerd, wordt hetzelfde resultaat optreedt.</span><span class="sxs-lookup"><span data-stu-id="b6065-154">In simple terms, "idempotent" means that if the script succeeds, and it is run again, the same result occurs.</span></span> <span data-ttu-id="b6065-155">Een script kan mislukken door tijdelijke netwerkproblemen.</span><span class="sxs-lookup"><span data-stu-id="b6065-155">A script may fail due to transient network issues.</span></span> <span data-ttu-id="b6065-156">De taak wordt in dat geval wordt automatisch opnieuw uitvoeren van het script een vooraf ingestelde aantal keren voordat desisting.</span><span class="sxs-lookup"><span data-stu-id="b6065-156">In that case, the job will automatically retry running the script a preset number of times before desisting.</span></span> <span data-ttu-id="b6065-157">Een idempotent-script geeft hetzelfde resultaat, zelfs als is twee keer met succes is uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-157">An idempotent script has the same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="b6065-158">Een eenvoudige e-mailbericht is om te testen op de aanwezigheid van een object voordat u deze maakt.</span><span class="sxs-lookup"><span data-stu-id="b6065-158">A simple tactic is to test for the existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create the object 
    -- If it exists, drop the object before recreating it.

<span data-ttu-id="b6065-159">Op dezelfde manier een script dat moet kunnen probleemloos worden uitgevoerd door logisch voor testen en tegen te gaan eventuele voorwaarden gevonden.</span><span class="sxs-lookup"><span data-stu-id="b6065-159">Similarly, a script must be able to execute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="b6065-160">Logboeken en fouten</span><span class="sxs-lookup"><span data-stu-id="b6065-160">Failures and logs</span></span>
<span data-ttu-id="b6065-161">Als een script na meerdere pogingen mislukt, wordt de taak de fout wordt vastgelegd en voortgezet.</span><span class="sxs-lookup"><span data-stu-id="b6065-161">If a script fails after multiple attempts, the job logs the error and continues.</span></span> <span data-ttu-id="b6065-162">Nadat een taak is beëindigd kunt (wat betekent een uitgevoerd tegen alle databases in de groep), u controleren de lijst met mislukte pogingen.</span><span class="sxs-lookup"><span data-stu-id="b6065-162">After a job ends (meaning a run against all databases in the group), you can check its list of failed attempts.</span></span> <span data-ttu-id="b6065-163">De logboeken vindt u informatie voor foutopsporing defecte scripts.</span><span class="sxs-lookup"><span data-stu-id="b6065-163">The logs provide details to debug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="b6065-164">Groep typen en maken</span><span class="sxs-lookup"><span data-stu-id="b6065-164">Group types and creation</span></span>
<span data-ttu-id="b6065-165">Er zijn twee soorten groepen:</span><span class="sxs-lookup"><span data-stu-id="b6065-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="b6065-166">Shard sets</span><span class="sxs-lookup"><span data-stu-id="b6065-166">Shard sets</span></span>
2. <span data-ttu-id="b6065-167">Aangepaste groepen</span><span class="sxs-lookup"><span data-stu-id="b6065-167">Custom groups</span></span>

<span data-ttu-id="b6065-168">Shard set groepen zijn gemaakt met behulp van de [hulpmiddelen voor elastische databases](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-168">Shard set groups are created using the [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="b6065-169">Wanneer u een set shard groep maakt, worden de databases toegevoegd of verwijderd uit de groep automatisch.</span><span class="sxs-lookup"><span data-stu-id="b6065-169">When you create a shard set group, databases are added or removed from the group automatically.</span></span> <span data-ttu-id="b6065-170">Bijvoorbeeld, is een nieuwe shard automatisch in de groep wanneer u deze aan de shard-toewijzing toevoegen.</span><span class="sxs-lookup"><span data-stu-id="b6065-170">For example, a new shard will be automatically in the group when you add it to the shard map.</span></span> <span data-ttu-id="b6065-171">Een taak kan vervolgens worden uitgevoerd op de groep.</span><span class="sxs-lookup"><span data-stu-id="b6065-171">A job can then be run against the group.</span></span>

<span data-ttu-id="b6065-172">Aangepaste groepen worden aan de andere kant streng gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-172">Custom groups, on the other hand, are rigidly defined.</span></span> <span data-ttu-id="b6065-173">U moet expliciet toevoegen of verwijderen van databases uit aangepaste groepen.</span><span class="sxs-lookup"><span data-stu-id="b6065-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="b6065-174">Als een database in de groep wordt verwijderd, wordt het script uitvoeren op de database een problemen waardoor de taak proberen.</span><span class="sxs-lookup"><span data-stu-id="b6065-174">If a database in the group is dropped, the job will attempt to run the script against the database resulting in an eventual failure.</span></span> <span data-ttu-id="b6065-175">Groepen die zijn gemaakt met behulp van de Azure-portal op dit moment zijn aangepaste groepen.</span><span class="sxs-lookup"><span data-stu-id="b6065-175">Groups created using the Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="b6065-176">Onderdelen en prijzen</span><span class="sxs-lookup"><span data-stu-id="b6065-176">Components and pricing</span></span>
<span data-ttu-id="b6065-177">De volgende onderdelen werken samen om het maken van een Azure-Cloud-service waarmee ad-hoc-uitvoering van administratieve taken.</span><span class="sxs-lookup"><span data-stu-id="b6065-177">The following components work together to create an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="b6065-178">De onderdelen zijn geïnstalleerd en wordt automatisch geconfigureerd tijdens de installatie in uw abonnement.</span><span class="sxs-lookup"><span data-stu-id="b6065-178">The components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="b6065-179">U kunt de services identificeren als ze allemaal dezelfde automatisch gegenereerde naam hebben.</span><span class="sxs-lookup"><span data-stu-id="b6065-179">You can identify the services as they all have the same auto-generated name.</span></span> <span data-ttu-id="b6065-180">De naam uniek is en bestaat uit het voorvoegsel 'edj' gevolgd door 21 willekeurige tekens.</span><span class="sxs-lookup"><span data-stu-id="b6065-180">The name is unique, and consists of the prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="b6065-181">**Azure-Cloudservice**: taken voor elastische database (preview) wordt geleverd als een Azure-Cloud klant gehoste service voor uitvoering van de aangevraagde taken uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="b6065-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service to perform execution of the requested tasks.</span></span> <span data-ttu-id="b6065-182">De service is geïmplementeerd en gehost in uw Microsoft Azure-abonnement vanuit de portal.</span><span class="sxs-lookup"><span data-stu-id="b6065-182">From the portal, the service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="b6065-183">De standaardwaarde geïmplementeerd met het minimum van twee werkrollen voor hoge beschikbaarheid van de service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-183">The default deployed service runs with the minimum of two worker roles for high availability.</span></span> <span data-ttu-id="b6065-184">De standaardgrootte van elke worker-rol (ElasticDatabaseJobWorker) wordt uitgevoerd op een exemplaar van A0.</span><span class="sxs-lookup"><span data-stu-id="b6065-184">The default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="b6065-185">Zie voor prijzen [cloudservices-prijzen](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="b6065-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="b6065-186">**Azure SQL Database**: de service gebruikmaakt van een Azure SQL Database bekend als de **beheer database** voor het opslaan van alle metagegevens van de taak.</span><span class="sxs-lookup"><span data-stu-id="b6065-186">**Azure SQL Database**: The service uses an Azure SQL Database known as the **control database** to store all of the job metadata.</span></span> <span data-ttu-id="b6065-187">De servicelaag standaard is een S0.</span><span class="sxs-lookup"><span data-stu-id="b6065-187">The default service tier is a S0.</span></span> <span data-ttu-id="b6065-188">Zie voor prijzen [prijzen SQL Database](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="b6065-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="b6065-189">**Azure Service Bus**: een Azure Service Bus is voor de coördinatie van de werkzaamheden binnen de Azure-Cloudservice.</span><span class="sxs-lookup"><span data-stu-id="b6065-189">**Azure Service Bus**: An Azure Service Bus is for coordination of the work within the Azure Cloud Service.</span></span> <span data-ttu-id="b6065-190">Zie [Service Bus prijzen](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="b6065-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="b6065-191">**Azure Storage**: een Azure Storage-account wordt gebruikt voor het opslaan van logboekregistratie van diagnostische uitvoer in het geval dat een probleem vereist meer foutopsporing (Zie [diagnostische gegevens inschakelen in Azure Cloud Services en virtuele Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span><span class="sxs-lookup"><span data-stu-id="b6065-191">**Azure Storage**: An Azure Storage account is used to store diagnostic output logging in the event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="b6065-192">Zie voor prijzen [prijzen voor Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="b6065-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="b6065-193">De werking van taken voor elastische Database</span><span class="sxs-lookup"><span data-stu-id="b6065-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="b6065-194">Een Azure SQL Database is aangewezen een **beheer database** waarin alle gegevens in de metagegevens en de status wordt opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="b6065-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="b6065-195">De database worden geopend door de **service taak** starten en het bijhouden van taken uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="b6065-195">The control database is accessed by the **job service** to launch and track jobs to execute.</span></span>
3. <span data-ttu-id="b6065-196">Twee verschillende rollen communiceren met de database:</span><span class="sxs-lookup"><span data-stu-id="b6065-196">Two different roles communicate with the control database:</span></span> 
   * <span data-ttu-id="b6065-197">Controller: Hiermee wordt bepaald welke taken vereisen taken voor het uitvoeren van de aangevraagde taak en mislukte taken voor nieuwe pogingen door het maken van nieuwe taken.</span><span class="sxs-lookup"><span data-stu-id="b6065-197">Controller: Determines which jobs require tasks to perform the requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="b6065-198">Taak taakuitvoering: Wordt uitgevoerd de taken.</span><span class="sxs-lookup"><span data-stu-id="b6065-198">Job Task Execution: Carries out the job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="b6065-199">Taak taaktypen</span><span class="sxs-lookup"><span data-stu-id="b6065-199">Job task types</span></span>
<span data-ttu-id="b6065-200">Er zijn meerdere typen taken die de uitvoering van taken uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="b6065-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="b6065-201">ShardMapRefresh: Een query de shard-kaart om te bepalen van alle databases die worden gebruikt als shards</span><span class="sxs-lookup"><span data-stu-id="b6065-201">ShardMapRefresh: Queries the shard map to determine all the databases used as shards</span></span>
* <span data-ttu-id="b6065-202">ScriptSplit: Splitst het script via de GO'-instructies in batches</span><span class="sxs-lookup"><span data-stu-id="b6065-202">ScriptSplit: Splits the script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="b6065-203">ExpandJob: Maakt onderliggende taken voor elke database uit een taak die gericht is op een groep met databases</span><span class="sxs-lookup"><span data-stu-id="b6065-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="b6065-204">ScriptExecution: Een script op basis van een bepaalde database met gedefinieerde referenties wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="b6065-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="b6065-205">Dacpac: Een DACPAC geldt voor een bepaalde database met behulp van bepaalde referenties</span><span class="sxs-lookup"><span data-stu-id="b6065-205">Dacpac: Applies a DACPAC to a particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="b6065-206">End-to-end-taak kan worden uitgevoerd-werkstroom</span><span class="sxs-lookup"><span data-stu-id="b6065-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="b6065-207">Met de Portal of de PowerShell-API's een taak wordt ingevoegd in de **beheer database**.</span><span class="sxs-lookup"><span data-stu-id="b6065-207">Using either the Portal or the PowerShell API, a job is inserted into the  **control database**.</span></span> <span data-ttu-id="b6065-208">De taak vraagt om de uitvoering van een Transact-SQL-script voor een groep van databases met behulp van specifieke referenties.</span><span class="sxs-lookup"><span data-stu-id="b6065-208">The job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="b6065-209">De controller identificeert de nieuwe taak.</span><span class="sxs-lookup"><span data-stu-id="b6065-209">The controller identifies the new job.</span></span> <span data-ttu-id="b6065-210">Taken worden gemaakt en wordt uitgevoerd voor het splitsen van het script en vernieuwen van de groep databases.</span><span class="sxs-lookup"><span data-stu-id="b6065-210">Job tasks are created and executed to split the script and to refresh the group’s databases.</span></span> <span data-ttu-id="b6065-211">Ten slotte wordt een nieuwe taak gemaakt en de taak en nieuwe onderliggende taken waarbij elke onderliggende taak is opgegeven voor het uitvoeren van de Transact-SQL-script op een individuele database in de groep maken om te worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-211">Lastly, a new job is created and executed to expand the job and create new child jobs where each child job is specified to execute the Transact-SQL script against an individual database in the group.</span></span>
3. <span data-ttu-id="b6065-212">De controller identificeert de onderliggende taken.</span><span class="sxs-lookup"><span data-stu-id="b6065-212">The controller identifies the created child jobs.</span></span> <span data-ttu-id="b6065-213">Voor elke taak de controller maakt en een taak voor het uitvoeren van het script op basis van een database wordt geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="b6065-213">For each job, the controller creates and triggers a job task to execute the script against a database.</span></span> 
4. <span data-ttu-id="b6065-214">Nadat alle taken hebt voltooid, werkt de domeincontroller de taken naar een voltooide status.</span><span class="sxs-lookup"><span data-stu-id="b6065-214">After all job tasks have completed, the controller updates the jobs to a completed state.</span></span> 
   <span data-ttu-id="b6065-215">Op elk moment tijdens de taakuitvoering kan de PowerShell-API worden gebruikt om de huidige status van het uitvoeren van taak weer te geven.</span><span class="sxs-lookup"><span data-stu-id="b6065-215">At any point during job execution, the PowerShell API can be used to view the current state of job execution.</span></span> <span data-ttu-id="b6065-216">Alle tijden die zijn geretourneerd door de PowerShell APIs worden weergegeven in UTC.</span><span class="sxs-lookup"><span data-stu-id="b6065-216">All times returned by the PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="b6065-217">Indien gewenst, kunt een annuleringsverzoek worden gestart om een taak stoppen.</span><span class="sxs-lookup"><span data-stu-id="b6065-217">If desired, a cancellation request can be initiated to stop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="b6065-218">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="b6065-218">Next steps</span></span>
<span data-ttu-id="b6065-219">[De onderdelen installeren](sql-database-elastic-jobs-service-installation.md), klikt u vervolgens [maken en toevoegen van een logbestand in elke database in de groep van databases](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-219">[Install the components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in to each database in the group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="b6065-220">Zie voor meer inzicht in taak maken en beheren, [maken en beheren van taken voor elastische database](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-220">To further understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="b6065-221">Zie ook [aan de slag met elastische Database taken](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="b6065-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->


