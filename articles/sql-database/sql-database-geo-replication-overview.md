---
title: Failover groepen en actieve geo-replicatie - Azure SQL Database | Microsoft Docs
description: Automatische failover groepen met actieve geo-replicatie kunt u instellen dat 4 replica's van uw database in een van de failover van de Azure-datacenters en autoomatically in het geval van een storing.
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 9a2171f59c6192115dc1820e7f033fd783c9e077
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="cb911-103">Overzicht: Failover-groepen en actieve geo-replicatie</span><span class="sxs-lookup"><span data-stu-id="cb911-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="cb911-104">Actieve geo-replicatie kunt u maximaal vier leesbare secundaire databases in de locaties van dezelfde of verschillende data center (regio's) configureren.</span><span class="sxs-lookup"><span data-stu-id="cb911-104">Active geo-replication enables you to configure up to four readable secondary databases in the same or different data center locations (regions).</span></span> <span data-ttu-id="cb911-105">Secundaire databases zijn beschikbaar voor het uitvoeren van query's en failover in het geval van een datacentrum of het onvermogen om verbinding met de primaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-105">Secondary databases are available for querying and for failover in the case of a data center outage or the inability to connect to the primary database.</span></span> <span data-ttu-id="cb911-106">De failover moet handmatig worden gestart door de toepassing van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="cb911-106">The failover must be initiated manually by the application of the user.</span></span> <span data-ttu-id="cb911-107">Na een failover heeft de nieuwe primaire het eindpunt van een andere verbinding.</span><span class="sxs-lookup"><span data-stu-id="cb911-107">After failover, the new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="cb911-108">Actieve geo-replicatie is beschikbaar voor alle databases in alle Servicelagen in alle regio's.</span><span class="sxs-lookup"><span data-stu-id="cb911-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="cb911-109">Azure SQL Database automatische failover groepen (in preview) is een SQL-Database-onderdeel ontworpen automatisch relatie geo-replicatie, connectiviteit en failover op schaal worden beheerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed to automatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="cb911-110">Krijgen de klanten de mogelijkheid om automatisch te herstellen meerdere verwante databases in de secundaire regio na onherstelbare regionale fouten of andere niet-geplande gebeurtenissen die leiden tot volledige of gedeeltelijke verlies van beschikbaarheid van de SQL-Database-service in de primaire regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-110">With it, the customers gain the ability to automatically recover multiple related databases in the secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of the SQL Database service’s availability in the primary region.</span></span> <span data-ttu-id="cb911-111">Bovendien kan de leesbare secundaire databases worden gebruikt voor het offloaden van alleen-lezen-werkbelastingen.</span><span class="sxs-lookup"><span data-stu-id="cb911-111">Additionally, they can use the readable secondary databases to offload read-only workloads.</span></span>  <span data-ttu-id="cb911-112">Omdat automatische failover groepen hebben betrekking op meerdere databases die moeten ze zijn geconfigureerd op de primaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-112">Because auto-failover groups involve multiple databases they must be configured on the primary server.</span></span> <span data-ttu-id="cb911-113">Primaire en secundaire servers moeten zich in hetzelfde abonnement.</span><span class="sxs-lookup"><span data-stu-id="cb911-113">Both primary and secondary servers must be in the same subscription.</span></span> <span data-ttu-id="cb911-114">Groepen met automatische failover ondersteuning voor replicatie van alle databases in de groep met slechts één secundaire server in een andere regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-114">Auto-failover groups support replication of all databases in the group to only one secondary server in a different region.</span></span> <span data-ttu-id="cb911-115">Actieve geo-replicatie, zonder automatische failover-groepen, kunt maximaal 4 secundaire replica's in elke regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-115">Active geo-replication, without auto-failover groups, allows up to 4 secondaries in any region.</span></span>

<span data-ttu-id="cb911-116">Als u met behulp van actieve geo-replicatie en voor de primaire database mislukt reden of moet offline worden gehaald, kunt u failover naar een van de secundaire databases starten.</span><span class="sxs-lookup"><span data-stu-id="cb911-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs to be taken offline, you can initiate failover to any of your secondary databases.</span></span> <span data-ttu-id="cb911-117">Wanneer failover is geactiveerd op een van de secundaire databases, worden alle andere secundaire replica's automatisch gekoppeld aan de nieuwe primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-117">When failover is activated to one of the secondary databases, all other secondaries are automatically linked to the new primary.</span></span> <span data-ttu-id="cb911-118">Als u automatische failover-groepen (in preview) gebruikt voor het herstel van database en een storing die van invloed is op een of meer van de databases in de resultaten van Groepsbeleid beheren in automatische failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-118">If you are using auto-failover groups (in-preview) to manage database recovery and any outage that impacts one or several of the databases in the group results in automatic failover.</span></span> <span data-ttu-id="cb911-119">U kunt de automatische failover-beleid die het beste voldoet aan de behoeften van uw toepassing configureren of kunt u opt-out en handmatige activering gebruiken.</span><span class="sxs-lookup"><span data-stu-id="cb911-119">You can configure the auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="cb911-120">Bovendien automatisch een failover-groepen (in preview) Geef alleen-lezen en alleen-lezen-listener-eindpunten die blijven ongewijzigd tijdens failovers.</span><span class="sxs-lookup"><span data-stu-id="cb911-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="cb911-121">Of u handmatig of automatisch failover-activering gebruikt, verandert failover alle secundaire databases in de groep naar primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in the group to primary.</span></span> <span data-ttu-id="cb911-122">Nadat de failover van de database is voltooid, wordt de DNS-record wordt automatisch bijgewerkt voor de omleiding van de eindpunten voor de nieuwe regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-122">After the database failover is completed, the DNS record is automatically updated to redirect the end-points to the new region.</span></span>

<span data-ttu-id="cb911-123">U kunt replicatie en failover van een individuele database of een set van databases op een server of in een elastische pool van actieve geo-replicatie beheren.</span><span class="sxs-lookup"><span data-stu-id="cb911-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="cb911-124">U kunt doen dat met de [Azure-portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), of de [REST-API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="cb911-124">You can do that using the [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or the [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="cb911-125">Controleer dat de verificatievereisten voor uw server en database zijn geconfigureerd op de nieuwe primaire na een failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-125">After failover, ensure the authentication requirements for your server and database are configured on the new primary.</span></span> <span data-ttu-id="cb911-126">Zie voor meer informatie [beveiliging van SQL Database na het herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="cb911-127">Dit geldt zowel voor actieve geo-replicatie en automatische failover groepen (in preview).</span><span class="sxs-lookup"><span data-stu-id="cb911-127">This applies both to active geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="cb911-128">Actieve geo-replicatie maakt gebruik van de [altijd op](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technologie van SQL Server asynchroon gerepliceerd doorgevoerde transacties op de primaire database naar een secundaire database met lezen committed-momentopname-isolatie (RCSI).</span><span class="sxs-lookup"><span data-stu-id="cb911-128">Active geo-replication leverages the [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server to asynchronously replicate committed transactions on the primary database to a secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="cb911-129">Automatische failover groepen bieden de semantiek voor groep boven op actieve geo-replicatie, maar het mechanisme voor dezelfde asynchrone replicatie wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="cb911-129">Auto-failover groups provide the group semantics on top of active geo-replication but the same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="cb911-130">Wanneer ze op elk gewenst moment de secundaire database mogelijk enigszins achter de primaire database, de secundaire gegevens is om nooit gedeeltelijke transacties gegarandeerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-130">While at any given point, the secondary database might be slightly behind the primary database, the secondary data is guaranteed to never have partial transactions.</span></span> <span data-ttu-id="cb911-131">Regio-overschrijdende redundantie kan toepassingen snel herstellen vanuit een permanente verlies van een hele datacenter of delen van een datacenter veroorzaakt door een natuurramp, onherstelbare menselijke fouten of schadelijke acties uit.</span><span class="sxs-lookup"><span data-stu-id="cb911-131">Cross-region redundancy enables applications to quickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="cb911-132">De RPO gegevens kan worden gevonden op [overzicht van zakelijke continuïteit](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-132">The specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="cb911-133">De volgende afbeelding toont een voorbeeld van actieve geo-replicatie geconfigureerd met een primaire in de regio Noord-centraal VS en secundaire in Zuid-centraal VS regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-133">The following figure shows an example of active geo-replication configured with a primary in the North Central US region and secondary in the South Central US region.</span></span>

![geo-replicatie-relatie](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="cb911-135">Omdat de secundaire databases kunnen gelezen worden, kunnen ze worden gebruikt voor het offloaden van alleen-lezen werkbelastingen, zoals rapportage van taken.</span><span class="sxs-lookup"><span data-stu-id="cb911-135">Because the secondary databases are readable, they can be used to offload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="cb911-136">Als u actieve geo-replicatie gebruikt, is het mogelijk maken van de secundaire database in dezelfde regio met de primaire, maar niet wordt verhoogd tot de toepassing herstelmogelijkheden bij kritieke fouten optreden.</span><span class="sxs-lookup"><span data-stu-id="cb911-136">If you are using active geo-replication, it is possible to create the secondary database in the same region with the primary, but it does not increase the application's resilience to catastrophic failures.</span></span> <span data-ttu-id="cb911-137">Als u automatische failover-groepen (in preview) gebruikt, wordt de secundaire database altijd gemaakt in een andere regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="cb911-138">Naast noodherstel kan herstel van actieve geo-replicatie worden gebruikt in de volgende scenario's:</span><span class="sxs-lookup"><span data-stu-id="cb911-138">In addition to disaster recovery active geo-replication can be used in the following scenarios:</span></span>

* <span data-ttu-id="cb911-139">**Migratie van de database**: U kunt actieve geo-replicatie gebruiken voor het migreren van een database van de ene server naar een andere online met minimale downtime.</span><span class="sxs-lookup"><span data-stu-id="cb911-139">**Database migration**: You can use active geo-replication to migrate a database from one server to another online with minimum downtime.</span></span>
* <span data-ttu-id="cb911-140">**Toepassingsupgrades**: U kunt een extra secundaire als een mislukken back-up maken tijdens toepassingsupgrades.</span><span class="sxs-lookup"><span data-stu-id="cb911-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="cb911-141">Databaseredundantie tussen datacentra toe te voegen zodat de echte zakelijke continuïteit is slechts een deel van de oplossing.</span><span class="sxs-lookup"><span data-stu-id="cb911-141">To achieve real business continuity, adding database redundancy between datacenters is only part of the solution.</span></span> <span data-ttu-id="cb911-142">Herstellen van een toepassing (service) end-to-end nadat een onherstelbare fout is vereist voor herstel van alle onderdelen die deel uitmaken van de service en afhankelijke services.</span><span class="sxs-lookup"><span data-stu-id="cb911-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute the service and any dependent services.</span></span> <span data-ttu-id="cb911-143">Voorbeelden van deze onderdelen zijn de clientsoftware (bijvoorbeeld een browser met een aangepaste JavaScript), web-front-ends, opslag- en DNS.</span><span class="sxs-lookup"><span data-stu-id="cb911-143">Examples of these components include the client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="cb911-144">Het is essentieel dat alle onderdelen flexibel omgaan met de dezelfde storingen zijn en beschikbaar binnen de beoogde hersteltijd (RTO) van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="cb911-144">It is critical that all components are resilient to the same failures and become available within the recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="cb911-145">Daarom moet u alle afhankelijke services identificeren en u begrijpt de garanties en mogelijkheden bieden.</span><span class="sxs-lookup"><span data-stu-id="cb911-145">Therefore, you need to identify all dependent services and understand the guarantees and capabilities they provide.</span></span> <span data-ttu-id="cb911-146">Vervolgens moet u de juiste stappen om ervoor te zorgen dat uw servicefuncties tijdens de failover van de services waarvan deze afhankelijk is, nemen.</span><span class="sxs-lookup"><span data-stu-id="cb911-146">Then, you must take adequate steps to ensure that your service functions during the failover of the services on which it depends.</span></span> <span data-ttu-id="cb911-147">Zie voor meer informatie over het ontwerpen van oplossingen voor herstel na noodgevallen [Cloudoplossingen voor Disaster Recovery met actieve geo-replicatie ontwerpen](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="cb911-148">Mogelijkheden van actieve geo-replicatie</span><span class="sxs-lookup"><span data-stu-id="cb911-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="cb911-149">De functie van actieve geo-replicatie biedt de volgende essentiële mogelijkheden:</span><span class="sxs-lookup"><span data-stu-id="cb911-149">The active geo-replication feature provides the following essential capabilities:</span></span>
* <span data-ttu-id="cb911-150">**Automatische asynchrone replicatie**: U kunt alleen een secundaire database maken door toe te voegen aan een bestaande database.</span><span class="sxs-lookup"><span data-stu-id="cb911-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding to an existing database.</span></span> <span data-ttu-id="cb911-151">De secundaire kan worden gemaakt in een Azure SQL Database-server.</span><span class="sxs-lookup"><span data-stu-id="cb911-151">The secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="cb911-152">Zodra gemaakt, wordt de secundaire database ingevuld met de gegevens die zijn gekopieerd uit de primaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-152">Once created, the secondary database is populated with the data copied from the primary database.</span></span> <span data-ttu-id="cb911-153">Dit proces staat bekend als seeding.</span><span class="sxs-lookup"><span data-stu-id="cb911-153">This process is known as seeding.</span></span> <span data-ttu-id="cb911-154">Nadat de secundaire database is gemaakt en seeding, worden updates naar de primaire database asynchroon gerepliceerd naar de secundaire database automatisch.</span><span class="sxs-lookup"><span data-stu-id="cb911-154">After secondary database has been created and seeded, updates to the primary database are asynchronously replicated to the secondary database automatically.</span></span> <span data-ttu-id="cb911-155">Asynchrone replicatie betekent dat transacties worden vastgelegd op de primaire database voordat ze worden gerepliceerd naar de secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-155">Asynchronous replication means that transactions are committed on the primary database before they are replicated to the secondary database.</span></span> 
* <span data-ttu-id="cb911-156">**Leesbare secundaire databases**: een toepassing heeft toegang tot een secundaire database voor alleen-lezen bewerkingen met dezelfde of verschillende beveiligingsprincipals gebruikt voor toegang tot de primaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using the same or different security principals used for accessing the primary database.</span></span> <span data-ttu-id="cb911-157">De secundaire databases werken in momentopname isolatiemodus om te controleren of de replicatie van de updates van de primaire (logboek replay) niet is vertraagd door query's die worden uitgevoerd op de secundaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-157">The secondary databases operate in snapshot isolation mode to ensure replication of the updates of the primary (log replay) is not delayed by queries executed on the secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="cb911-158">Het logboek opnieuw afspelen is vertraagd op de secundaire database als er schema-updates die het ontvangt van de primaire waarvoor een schemavergrendeling op de secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-158">The log replay is delayed on the secondary database if there are schema updates that it is receiving from the Primary that require a schema lock on the secondary database.</span></span> 
   > 

* <span data-ttu-id="cb911-159">**Meerdere secundaire databases**: twee of meer secundaire databases verhogen redundantie en het niveau van beveiliging voor de primaire database en de toepassing.</span><span class="sxs-lookup"><span data-stu-id="cb911-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for the primary database and application.</span></span> <span data-ttu-id="cb911-160">Als er meerdere secundaire databases bestaan, is de toepassing blijft beveiligd zelfs als een van de secundaire databases mislukt.</span><span class="sxs-lookup"><span data-stu-id="cb911-160">If multiple secondary databases exist, the application remains protected even if one of the secondary databases fails.</span></span> <span data-ttu-id="cb911-161">Als er slechts één secundaire database, en dit mislukt, wordt de toepassing wordt blootgesteld aan een hoger risico totdat er een nieuwe secundaire database is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="cb911-161">If there is only one secondary database, and it fails, the application is exposed to higher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="cb911-162">Als u actieve geo-replicatie gebruikt voor het bouwen van een globaal gedistribueerde toepassing en hoeft op te geven alleen-lezen toegang tot gegevens in meer dan 4 regio's, kunt u secundaire van een secundaire (dit proces wordt '-koppeling genoemd).</span><span class="sxs-lookup"><span data-stu-id="cb911-162">If you are using active geo-replication to build a globally distributed application and need to provide read-only access to data in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="cb911-163">Op deze manier kunt u vrijwel onbeperkt schalen van databasereplicatie bereiken.</span><span class="sxs-lookup"><span data-stu-id="cb911-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="cb911-164">Bovendien vermindert chaining de overhead van replicatie vanaf de primaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-164">In addition, chaining reduces the overhead of replication from the primary database.</span></span> <span data-ttu-id="cb911-165">De verhouding is de vertraging meer replicatie van de leaf meest secundaire databases.</span><span class="sxs-lookup"><span data-stu-id="cb911-165">The trade-off is the increased replication lag on the leaf-most secondary databases.</span></span> <span data-ttu-id="cb911-166">.</span><span class="sxs-lookup"><span data-stu-id="cb911-166">.</span></span> 
   >

* <span data-ttu-id="cb911-167">**Ondersteuning van de elastische groep databases**: actieve geo-replicatie kan worden geconfigureerd voor een database in een elastische pool.</span><span class="sxs-lookup"><span data-stu-id="cb911-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="cb911-168">De secundaire database kan zich in een andere elastische pool.</span><span class="sxs-lookup"><span data-stu-id="cb911-168">The secondary database can be in another elastic pool.</span></span> <span data-ttu-id="cb911-169">Voor gewone databases kan de secundaire een elastische pool en vice versa zijn, zolang de servicecategorieën hetzelfde zijn.</span><span class="sxs-lookup"><span data-stu-id="cb911-169">For regular databases, the secondary can be an elastic pool and vice versa as long as the service tiers are the same.</span></span> 
* <span data-ttu-id="cb911-170">**Configureerbare prestatieniveau van de secundaire database**: een secundaire database kan worden gemaakt met een lager prestatieniveau dan de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-170">**Configurable performance level of the secondary database**: A secondary database can be created with lower performance level than the primary.</span></span> <span data-ttu-id="cb911-171">Primaire en secundaire databases zijn vereist om de dezelfde servicelaag.</span><span class="sxs-lookup"><span data-stu-id="cb911-171">Both primary and secondary databases are required to have the same service tier.</span></span> <span data-ttu-id="cb911-172">Deze optie wordt niet aanbevolen voor toepassingen met hoge database schrijfactiviteiten omdat de vertraging verbeterde replication het risico van gegevensverlies aanzienlijke na een failover verhoogt.</span><span class="sxs-lookup"><span data-stu-id="cb911-172">This option is not recommended for applications with high database write activity because the increased replication lag increases the risk of substantial data loss after a failover.</span></span> <span data-ttu-id="cb911-173">Bovendien na een failover van de toepassing prestaties beïnvloed totdat de nieuwe primaire is bijgewerkt naar een hoger prestatieniveau.</span><span class="sxs-lookup"><span data-stu-id="cb911-173">In addition, after failover the application’s performance is impacted until the new primary is upgraded to a higher performance level.</span></span> <span data-ttu-id="cb911-174">De grafiek logboek IO percentage in Azure portal biedt een goede manier om in te schatten het minimale prestatieniveau van de secundaire die vereist is voor het handhaven van de belasting van de replicatie.</span><span class="sxs-lookup"><span data-stu-id="cb911-174">The log IO percentage chart on Azure portal provides a good way to estimate the minimal performance level of the secondary that is required to sustain the replication load.</span></span> <span data-ttu-id="cb911-175">Bijvoorbeeld, als uw primaire database P6 (1000 DTU) en het logboek-i/o-procent is 50% de secundaire moet ten minste P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="cb911-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% the secondary needs to be at least P4 (500 DTU).</span></span> <span data-ttu-id="cb911-176">U kunt ook de logboek-i/o-gegevens met behulp ophalen [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) of [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) weergaven van de database.</span><span class="sxs-lookup"><span data-stu-id="cb911-176">You can also retrieve the log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="cb911-177">Zie voor meer informatie over de prestaties van de SQL-Database [SQL Database-opties en prestaties](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-177">For more information on the SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="cb911-178">**Gebruiker beheerde failover en failback**: een secundaire database kunt expliciet worden overgeschakeld naar de primaire rol op elk gewenst moment door de toepassing of de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="cb911-178">**User-controlled failover and failback**: A secondary database can explicitly be switched to the primary role at any time by the application or the user.</span></span> <span data-ttu-id="cb911-179">Tijdens een werkelijke storing moet de optie 'niet-geplande' worden gebruikt, die direct bijdraagt aan een secundaire moet de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-179">During a real outage the “unplanned” option should be used, which immediately promotes a secondary to be the primary.</span></span> <span data-ttu-id="cb911-180">Als de mislukte primaire herstelt weer beschikbaar is, wordt het systeem automatisch de herstelde primaire als een secundaire markeert en brengt u het up-to-date blijven met de nieuwe primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-180">When the failed primary recovers and is available again, the system automatically marks the recovered primary as a secondary and bring it up-to-date with the new primary.</span></span> <span data-ttu-id="cb911-181">Als gevolg van de asynchrone aard van replicatie, kan een kleine hoeveelheid gegevens worden verbroken tijdens niet-geplande failovers als een primaire mislukt voordat de meest recente wijzigingen naar de secundaire worden gerepliceerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-181">Due to the asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates the most recent changes to the secondary.</span></span> <span data-ttu-id="cb911-182">Als een primaire met meerdere secundaire replica's failover wordt uitgevoerd, wordt het systeem automatisch de Replicatierelaties opnieuw geconfigureerd en de resterende secundaire replica's is gekoppeld aan de onlangs bevorderd primaire zonder tussenkomst van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="cb911-182">When a primary with multiple secondaries fails over, the system automatically reconfigures the replication relationships and links the remaining secondaries to the newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="cb911-183">Nadat de onderbreking, waardoor de failover wordt verholpen, kan het wenselijk om te retourneren van de toepassing op de primaire regio zijn.</span><span class="sxs-lookup"><span data-stu-id="cb911-183">After the outage that caused the failover is mitigated, it may be desirable to return the application to the primary region.</span></span> <span data-ttu-id="cb911-184">Hiertoe moet de failoveropdracht met de optie 'geplande' worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="cb911-184">To do that, the failover command should be invoked with the “planned” option.</span></span> 
* <span data-ttu-id="cb911-185">**Referenties en firewallregels synchroon te houden**: wordt u aangeraden [database firewallregels](sql-database-firewall-configure.md) voor databases geogerepliceerde zodat deze regels kunnen worden gerepliceerd met de database, zodat alle secundaire databases hebben de dezelfde firewallregels als de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with the database to ensure all secondary databases have the same firewall rules as the primary.</span></span> <span data-ttu-id="cb911-186">Deze aanpak hoeven voor klanten om handmatig te configureren en onderhouden firewallregels op servers die als host fungeert voor zowel de primaire en secundaire databases.</span><span class="sxs-lookup"><span data-stu-id="cb911-186">This approach eliminates the need for customers to manually configure and maintain firewall rules on servers hosting both the primary and secondary databases.</span></span> <span data-ttu-id="cb911-187">Op deze manier met behulp van [databasegebruikers opgenomen](sql-database-manage-logins.md) voor gegevens toegang zorgt ervoor dat zowel primaire als secundaire databases hebben altijd dezelfde gebruikersreferenties zodat tijdens een failover geen onderbrekingen vanwege verschillen met aanmeldingen en wachtwoorden is.</span><span class="sxs-lookup"><span data-stu-id="cb911-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have the same user credentials so during a failover, there is no disruptions due to mismatches with logins and passwords.</span></span> <span data-ttu-id="cb911-188">Met de toevoeging van [Azure Active Directory](../active-directory/active-directory-whatis.md), klanten gebruikerstoegang tot zowel primaire als secundaire databases kunnen beheren en hoeft u voor het beheren van referenties in databases kan worden overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="cb911-188">With the addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access to both primary and secondary databases and eliminating the need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="cb911-189">Mogelijkheden voor automatische failover-groep</span><span class="sxs-lookup"><span data-stu-id="cb911-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="cb911-190">Automatische failover groepsfunctie biedt een krachtige abstractie van actieve geo-replicatie door de groep niveau replicatie en automatische failover-ondersteuning.</span><span class="sxs-lookup"><span data-stu-id="cb911-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="cb911-191">Daarnaast verwijdert deze de noodzaak tot het wijzigen van de SQL-verbindingsreeks na een failover aan de hand van de aanvullende listener-eindpunten.</span><span class="sxs-lookup"><span data-stu-id="cb911-191">In addition, it removes the necessity to change the SQL connection string after failover by providing the additional listener end-points.</span></span> 

* <span data-ttu-id="cb911-192">**Failover-groep**: een of meer groepen van failover kunnen worden gemaakt tussen twee servers in verschillende regio's (primaire en secundaire servers).</span><span class="sxs-lookup"><span data-stu-id="cb911-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="cb911-193">Elke groep kan een of meer databases die worden hersteld als een eenheid voor het geval alle of sommige primaire databases niet meer beschikbaar als gevolg van een storing in de primaire regio bevatten.</span><span class="sxs-lookup"><span data-stu-id="cb911-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span>  
* <span data-ttu-id="cb911-194">**Primaire server**: een server die als host fungeert voor de primaire databases in de groep failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-194">**Primary server**: A server that hosts the primary databases in the failover group.</span></span>
* <span data-ttu-id="cb911-195">**Secundaire server**: een server die als host fungeert voor de secundaire databases in de groep failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-195">**Secondary server**: A server that hosts the secondary databases in the failover group.</span></span> <span data-ttu-id="cb911-196">De secundaire server kan niet in dezelfde regio bevinden als de primaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-196">The secondary server cannot be in the same region as the primary server.</span></span>
* <span data-ttu-id="cb911-197">**Databases toevoegen aan groep failover**: U kunt verschillende databases in een server of in een elastische pool plaatsen in dezelfde groep failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-197">**Adding databases to failover group**: You can put several databases within a server or within an elastic pool into the same failover group.</span></span> <span data-ttu-id="cb911-198">Als u een zelfstandige database aan de groep toevoegt, wordt automatisch een secundaire database met dezelfde versie en prestatieniveau gemaakt.</span><span class="sxs-lookup"><span data-stu-id="cb911-198">If you add a standalone database to the group, it automatically creates a secondary database using the same edition and performance level.</span></span> <span data-ttu-id="cb911-199">Als de primaire database in een elastische groep is, wordt de secundaire automatisch gemaakt in de elastische groep met dezelfde naam.</span><span class="sxs-lookup"><span data-stu-id="cb911-199">If the primary database is in an elastic pool, the secondary is automatically created in the elastic pool with the same name.</span></span> <span data-ttu-id="cb911-200">Als u een database die al een secundaire database in de secundaire server toevoegt, wordt die geo-replicatie wordt overgenomen door de groep.</span><span class="sxs-lookup"><span data-stu-id="cb911-200">If you add a database that already has a secondary database in the secondary server, that geo-replication is inherited by the group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="cb911-201">Wanneer u een database die al een secundaire database in een server die geen deel uitmaakt van de failover-groep toevoegt, wordt een nieuwe secundaire gemaakt in de secundaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-201">When adding a database that already has a secondary database in a server that is not part of the failover group, a new secondary is created in the secondary server.</span></span> 
   >

* <span data-ttu-id="cb911-202">**Failover-groep lezen-schrijven listener**: een DNS CNAME-record wordt gevormd als  **&lt;failover groepsnaam&gt;. database.windows.net** die verwijst naar de huidige primaire server-URL.</span><span class="sxs-lookup"><span data-stu-id="cb911-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points to the current primary server URL.</span></span> <span data-ttu-id="cb911-203">Kunt u de lezen-schrijven SQL-toepassingen op transparante wijze opnieuw verbinding maken met de primaire database wanneer de primaire gewijzigd na een failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-203">It allows the read-write SQL applications to transparently reconnect to the primary database when the primary changes after failover.</span></span> 
* <span data-ttu-id="cb911-204">**Failover-groep alleen-lezen-listener**: een DNS CNAME-record wordt gevormd als  **&lt;failover groepsnaam&gt;. secondary.database.windows.net** die verwijst naar de URL van de secundaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points to the secondary server’s URL.</span></span> <span data-ttu-id="cb911-205">Kunt u de toepassingen alleen-lezen SQL transparant verbinding maken met de secundaire database van de opgegeven regels voor taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="cb911-205">It allows the read-only SQL applications to transparently connect to the secondary database using the specified load-balancing rules.</span></span> <span data-ttu-id="cb911-206">U kunt eventueel opgeven als u wilt dat het alleen-lezen verkeer moet worden automatisch opnieuw gerichte naar de primaire server als de secundaire server niet beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="cb911-206">Optionally you can specify if you want the read-only traffic to be automatically re-directed to the primary server when the secondary server is not available.</span></span>
* <span data-ttu-id="cb911-207">**Beleid voor automatische failover**: de failover-groep is standaard geconfigureerd met een beleid voor automatische failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-207">**Automatic failover policy**: By default, the failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="cb911-208">Het systeem activeert failover zodra de storing wordt gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-208">The system triggers failover as soon as the failure is detected.</span></span> <span data-ttu-id="cb911-209">Als u bepalen van de werkstroom failover van de toepassing wilt, kunt u automatische failover uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="cb911-209">If you want to control the failover workflow from the application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="cb911-210">**Handmatige failover**: U kunt failover handmatig op elk gewenst moment ongeacht de configuratie van de automatische failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-210">**Manual failover**: You can initiate failover manually at any time regardless of the automatic failover configuration.</span></span> <span data-ttu-id="cb911-211">Als automatische failover-beleid niet geconfigureerd voor handmatige failover is is vereist in de groep failover-databases te herstellen.</span><span class="sxs-lookup"><span data-stu-id="cb911-211">If automatic failover policy is not configured manual failover is required to recover databases in the failover group.</span></span> <span data-ttu-id="cb911-212">U kunt de geforceerde of beschrijvende failover (met volledige gegevenssynchronisatie) starten.</span><span class="sxs-lookup"><span data-stu-id="cb911-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="cb911-213">De laatste kan worden gebruikt om aan de actieve server verplaatsen naar de primaire regio.</span><span class="sxs-lookup"><span data-stu-id="cb911-213">The latter could be used to relocate the active server to the primary region.</span></span> <span data-ttu-id="cb911-214">Als de failover is voltooid wordt de DNS-records worden automatisch bijgewerkt om te controleren of de verbinding met de juiste server.</span><span class="sxs-lookup"><span data-stu-id="cb911-214">When failover is completed the DNS records are automatically updated to ensure connectivity to the correct server.</span></span>
* <span data-ttu-id="cb911-215">**Respijtperiode met gegevensverlies**: omdat de primaire en secundaire databases worden gesynchroniseerd met asynchrone replicatie de failover tot verlies van gegevens leiden kan.</span><span class="sxs-lookup"><span data-stu-id="cb911-215">**Grace period with data loss**: Because the primary and secondary databases are synchronized using asynchronous replication the failover may result in data loss.</span></span> <span data-ttu-id="cb911-216">U kunt het beleid automatische failover naar aanleiding van uw toepassing tolerantie tot gegevensverlies.</span><span class="sxs-lookup"><span data-stu-id="cb911-216">You can customize the automatic failover policy to reflect your application’s tolerance to data loss.</span></span> <span data-ttu-id="cb911-217">Door het configureren van **GracePeriodWithDataLossHours**, kunt u bepalen hoe lang het systeem wacht voordat u de failover is waarschijnlijk tot gegevensverlies resultaat start.</span><span class="sxs-lookup"><span data-stu-id="cb911-217">By configuring **GracePeriodWithDataLossHours**, you can control how long the system waits before initiating the failover that is likely to result data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="cb911-218">Wanneer systeem detecteert dat de databases in de groep nog steeds online zijn (bijvoorbeeld de onderbreking alleen van invloed op het vlak van service control), wordt onmiddellijk de failover met volledige gegevenssynchronisatie (beschrijvende failover) geactiveerd ongeacht de waarde die is ingesteld door  **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="cb911-218">When system detects that the databases in the group are still online (for example, the outage only impacted the service control plane), it immediately activates the failover with full data synchronization (friendly failover) regardless of the value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="cb911-219">Dit gedrag zorgt ervoor dat er geen gegevens verloren gaan tijdens het herstel.</span><span class="sxs-lookup"><span data-stu-id="cb911-219">This behavior ensures that there is no data loss during the recovery.</span></span> <span data-ttu-id="cb911-220">De respijtperiode heeft alleen effect als een beschrijvende failover niet mogelijk is.</span><span class="sxs-lookup"><span data-stu-id="cb911-220">The grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="cb911-221">Als de onderbreking is verholpen voordat de respijtperiode is verlopen, worden de failover is niet geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-221">If the outage is mitigated before the grace period expires, the failover is not activated.</span></span>
   >

* <span data-ttu-id="cb911-222">**Meerdere failover groepen**: U kunt meerdere failover groepen voor dezelfde twee servers om te bepalen van de schaal van failovers configureren.</span><span class="sxs-lookup"><span data-stu-id="cb911-222">**Multiple failover groups**: You can configure multiple failover groups for the same pair of servers to control the scale of failovers.</span></span> <span data-ttu-id="cb911-223">Elke groep onafhankelijk failover wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-223">Each group fails over independently.</span></span> <span data-ttu-id="cb911-224">Als uw toepassing met meerdere tenants elastische pools gebruikt, kunt u deze mogelijkheid te mengen primaire en secundaire databases in elke groep.</span><span class="sxs-lookup"><span data-stu-id="cb911-224">If your multi-tenant application uses elastic pools, you can use this capability to mix primary and secondary databases in each pool.</span></span> <span data-ttu-id="cb911-225">Op deze manier die u de gevolgen van een storing tot alleen de helft van de tenants beperken kunt.</span><span class="sxs-lookup"><span data-stu-id="cb911-225">This way you can reduce the impact of an outage to only half of the tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="cb911-226">Aanbevolen procedures van het bouwen van maximaal beschikbare service</span><span class="sxs-lookup"><span data-stu-id="cb911-226">Best practices of building highly available service</span></span>

<span data-ttu-id="cb911-227">Als u wilt de klanten van een maximaal beschikbare service die gebruikmaakt van Azure SQL-database maken, moeten deze richtlijnen volgen:</span><span class="sxs-lookup"><span data-stu-id="cb911-227">To build a highly available service that uses Azure SQL database the customers should follow these guidelines:</span></span>
- <span data-ttu-id="cb911-228">**Failover-groep gebruiken**: een of meer groepen van failover kunnen worden gemaakt tussen twee servers in verschillende regio's (primaire en secundaire servers).</span><span class="sxs-lookup"><span data-stu-id="cb911-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="cb911-229">Elke groep kan een of meer databases die worden hersteld als een eenheid voor het geval alle of sommige primaire databases niet meer beschikbaar als gevolg van een storing in de primaire regio bevatten.</span><span class="sxs-lookup"><span data-stu-id="cb911-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span> <span data-ttu-id="cb911-230">De failover-groep maakt geo-secundaire database met de doelstelling van dezelfde als de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-230">The failover group creates geo-secondary database with the same service objective as the primary.</span></span> <span data-ttu-id="cb911-231">Als u een bestaande relatie in de geo-replicatie aan de groep failover toevoegt Zorg er dan voor dat de secundaire geo-database is geconfigureerd met de dezelfde serviceniveaudoelstelling als de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-231">If you add an existing geo-replication relationship to the failover group make sure the geo-secondary is configured with the same service level objective as the primary.</span></span>
- <span data-ttu-id="cb911-232">**Gebruik alleen-lezen-listener voor OLTP-werkbelasting**: bij het uitvoeren van OLTP-bewerkingen gebruik  **&lt;failover groepsnaam&gt;. database.windows.net** als de server-URL en de verbindingen zijn automatisch omgeleid naar de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as the server URL and the connections will be automatically directed to the primary.</span></span> <span data-ttu-id="cb911-233">Deze URL wordt niet gewijzigd na de failover.</span><span class="sxs-lookup"><span data-stu-id="cb911-233">This URL will not change after the failover.</span></span>  
<span data-ttu-id="cb911-234">Noteer dat de failover omvat het bijwerken van die de DNS-record, zodat de clientverbindingen wordt omgeleid naar de nieuwe primaire pas nadat de client DNS-cache vernieuwd wordt.</span><span class="sxs-lookup"><span data-stu-id="cb911-234">Note the failover involves updating the DNS record so the client connections will be redirected to the new primary only after the client DNS cache is refreshed.</span></span>
- <span data-ttu-id="cb911-235">**Gebruik van alleen-lezen-listener voor de werkbelasting van alleen-lezen**: als u een logisch is geïsoleerd alleen-lezen-werkbelasting die is gevoelig voor bepaalde veroudering van gegevens hebt, kunt u de secundaire database in de toepassing.</span><span class="sxs-lookup"><span data-stu-id="cb911-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant to certain staleness of data, you can use the secondary database in the application.</span></span> <span data-ttu-id="cb911-236">Voor alleen-lezen-sessies gebruiken  **&lt;failover groepsnaam&gt;. secondary.database.windows.net** als de server-URL en de verbinding wordt automatisch omgeleid naar de secundaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as the server URL and the connection will be automatically directed to the secondary.</span></span> <span data-ttu-id="cb911-237">Het is ook raadzaam die u hebt opgegeven in de verbindingsreeks bedoeling lezen met behulp van **ApplicationIntent ReadOnly =**.</span><span class="sxs-lookup"><span data-stu-id="cb911-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="cb911-238">**Worden voorbereid voor de prestaties nadelig beïnvloeden**: SQL failover besluit is onafhankelijk van de rest van de toepassing of andere services die worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="cb911-238">**Be prepared for perf degradation**: SQL failover decision is independent from the rest of the application or other services used.</span></span> <span data-ttu-id="cb911-239">De toepassing worden "gecombineerd" met een aantal onderdelen in één regio en sommige in een andere.</span><span class="sxs-lookup"><span data-stu-id="cb911-239">The application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="cb911-240">Zorg ervoor dat de implementatie van de redundante toepassing in de regio DR om te voorkomen de verslechtering van, en volg de richtlijnen in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="cb911-240">To avoid the degradation, ensure the redundant application deployment in the DR region and follow the guidelines in this article.</span></span>  
<span data-ttu-id="cb911-241">Opmerking van de toepassing in de regio DR heeft geen een andere verbindingsreeks gebruiken.</span><span class="sxs-lookup"><span data-stu-id="cb911-241">Note the application in the DR region does not have to use a different connection string.</span></span>  
- <span data-ttu-id="cb911-242">**Voorbereiden voor gegevensverlies**: als er een storing wordt gedetecteerd, SQL lezen-schrijven failover automatisch geactiveerd als er geen gegevens verloren gaan naar de beste van onze kennis.</span><span class="sxs-lookup"><span data-stu-id="cb911-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss to the best of our knowledge.</span></span> <span data-ttu-id="cb911-243">Anders dat wordt gewacht totdat de periode die u hebt opgegeven door **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="cb911-243">Otherwise, it waits for the period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="cb911-244">Als u hebt opgegeven **GracePeriodWithDataLossHours**, worden voorbereid op verlies van gegevens.</span><span class="sxs-lookup"><span data-stu-id="cb911-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="cb911-245">In het algemeen tijdens uitval, Azure meer gericht op beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="cb911-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="cb911-246">Als u geen enkele gegevens verloren gaan, controleert u of in te stellen **GracePeriodWithDataLossHours** met een voldoende aantal, zoals 24 uur.</span><span class="sxs-lookup"><span data-stu-id="cb911-246">If you cannot afford data loss, make sure to set **GracePeriodWithDataLossHours** to a sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="cb911-247">Een upgrade of een primaire database downgraden</span><span class="sxs-lookup"><span data-stu-id="cb911-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="cb911-248">U kunt een upgrade of een primaire database naar een andere prestatieniveau (binnen dezelfde servicelaag) downgraden zonder te verbreken geen secundaire databases.</span><span class="sxs-lookup"><span data-stu-id="cb911-248">You can upgrade or downgrade a primary database to a different performance level (within the same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="cb911-249">Wanneer u een upgrade uitvoert, raden we aan dat u eerst de secundaire database upgraden en werk vervolgens de primaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-249">When upgrading, we recommend that you upgrade the secondary database first, and then upgrade the primary.</span></span> <span data-ttu-id="cb911-250">Wanneer downgraden, de volgorde: eerst downgrade voor de primaire en vervolgens gebruik maken van de secundaire.</span><span class="sxs-lookup"><span data-stu-id="cb911-250">When downgrading, reverse the order: downgrade the primary first, and then downgrade the secondary.</span></span> <span data-ttu-id="cb911-251">Wanneer u bijwerkt of de database naar een andere servicetier downgraden wordt deze aanbeveling afgedwongen.</span><span class="sxs-lookup"><span data-stu-id="cb911-251">When you upgrade or downgrade the database to a different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="cb911-252">Als u een secundaire database als onderdeel van de configuratie van de failover gemaakt is het niet raadzaam downgraden van de secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-252">If you created secondary database as part of the failover group configuration it is not recommended to downgrade the secondary database.</span></span> <span data-ttu-id="cb911-253">Dit is om te controleren of dat uw gegevenslaag heeft onvoldoende capaciteit om te verwerken van uw reguliere werkbelasting nadat de failover is geactiveerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-253">This is to ensure your data tier has sufficient capacity to process your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-the-loss-of-critical-data"></a><span data-ttu-id="cb911-254">Zo wordt voorkomen dat het verlies van kritieke gegevens</span><span class="sxs-lookup"><span data-stu-id="cb911-254">Preventing the loss of critical data</span></span>
<span data-ttu-id="cb911-255">Doorlopend kopiëren maakt gebruik van een asynchrone replicatiemechanisme vanwege de hoge latentie van wide area network.</span><span class="sxs-lookup"><span data-stu-id="cb911-255">Due to the high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="cb911-256">Asynchrone replicatie maakt gegevensverlies onvermijdelijke als er een fout optreedt.</span><span class="sxs-lookup"><span data-stu-id="cb911-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="cb911-257">Sommige toepassingen vereisen echter geen verlies van gegevens.</span><span class="sxs-lookup"><span data-stu-id="cb911-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="cb911-258">Ter bescherming van deze essentiële updates, een toepassingsontwikkelaar kunt aanroepen de [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure onmiddellijk na het vastleggen van de transactie.</span><span class="sxs-lookup"><span data-stu-id="cb911-258">To protect these critical updates, an application developer can call the [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing the transaction.</span></span> <span data-ttu-id="cb911-259">Het aanroepen van **sp_wait_for_database_copy_sync** blokkeert de aanroepende thread totdat de laatst doorgevoerde transactie is verzonden naar de secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-259">Calling **sp_wait_for_database_copy_sync** blocks the calling thread until the last committed transaction has been transmitted to the secondary database.</span></span> <span data-ttu-id="cb911-260">Echter, deze wacht niet totdat de verzonden transacties worden cookies en doorgevoerd op de secundaire server.</span><span class="sxs-lookup"><span data-stu-id="cb911-260">However, it does not wait for the transmitted transactions to be replayed and committed on the secondary.</span></span> <span data-ttu-id="cb911-261">**sp_wait_for_database_copy_sync** is afgestemd op de koppeling van een specifieke doorlopend kopiëren.</span><span class="sxs-lookup"><span data-stu-id="cb911-261">**sp_wait_for_database_copy_sync** is scoped to a specific continuous copy link.</span></span> <span data-ttu-id="cb911-262">Elke gebruiker met de rechten van de verbinding naar de primaire database kunt deze procedure aanroept.</span><span class="sxs-lookup"><span data-stu-id="cb911-262">Any user with the connection rights to the primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="cb911-263">**sp_wait_for_database_copy_sync** wordt gegevensverlies voorkomen na een failover, maar deze wordt niet gegarandeerd dat volledige synchronisatie voor leestoegang.</span><span class="sxs-lookup"><span data-stu-id="cb911-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="cb911-264">De vertraging veroorzaakt door een **sp_wait_for_database_copy_sync** procedureaanroep kan aanzienlijke en is afhankelijk van de grootte van het transactielogboek op het moment van de aanroep.</span><span class="sxs-lookup"><span data-stu-id="cb911-264">The delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on the size of the transaction log at the time of the call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="cb911-265">Failover-groepen en actieve geo-replicatie programmatisch te beheren</span><span class="sxs-lookup"><span data-stu-id="cb911-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="cb911-266">Zoals eerder besproken automatische failover-groepen (in preview) en active kan geo-replicatie ook worden beheerd programmatisch met behulp van Azure PowerShell en de REST-API.</span><span class="sxs-lookup"><span data-stu-id="cb911-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and the REST API.</span></span> <span data-ttu-id="cb911-267">De volgende tabellen beschrijven de reeks opdrachten die beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="cb911-267">The following tables describe the set of commands available.</span></span>

<span data-ttu-id="cb911-268">**Azure Resource Manager-API en op rollen gebaseerde beveiliging**: actieve geo-replicatie bevat een set met Azure Resource Manager-API's voor beheer, met inbegrip van de [REST-API van Azure SQL Database](https://docs.microsoft.com/rest/api/sql/) en [Azure PowerShell-cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="cb911-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including the [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="cb911-269">Deze API's vereisen het gebruik van resourcegroepen en ondersteuning voor beveiliging op basis van rollen (RBAC).</span><span class="sxs-lookup"><span data-stu-id="cb911-269">These APIs require the use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="cb911-270">Zie voor meer informatie over het implementeren van toegang tot rollen [rollen gebaseerd toegangsbeheer](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-270">For more information on how to implement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="cb911-271">Veel nieuwe functies van actieve geo-replicatie worden alleen ondersteund met [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) op basis van [REST-API van Azure SQL](https://msdn.microsoft.com/library/azure/mt163571.aspx) en [Azure SQL Database PowerShell-cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="cb911-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="cb911-272">De [(klassiek) REST-API](https://msdn.microsoft.com/library/azure/dn505719.aspx) en [cmdlets van Azure SQL Database (klassiek)](https://msdn.microsoft.com/library/azure/dn546723.aspx) worden ondersteund voor compatibiliteit met eerdere versies, zodat het gebruik van de Azure Resource Manager gebaseerde API's worden aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="cb911-272">The [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using the Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="cb911-273">SQL database failover met behulp van Transact-SQL beheren</span><span class="sxs-lookup"><span data-stu-id="cb911-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="cb911-274">Opdracht</span><span class="sxs-lookup"><span data-stu-id="cb911-274">Command</span></span> | <span data-ttu-id="cb911-275">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cb911-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="cb911-276">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="cb911-277">SECUNDAIRE ON-SERVER toevoegen argument gebruiken voor het maken van een secundaire database voor een bestaande database en de gegevensreplicatie wordt gestart</span><span class="sxs-lookup"><span data-stu-id="cb911-277">Use ADD SECONDARY ON SERVER argument to create a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="cb911-278">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="cb911-279">FAILOVER of FORCE_FAILOVER_ALLOW_DATA_LOSS gebruiken om over te schakelen van een secundaire database als primaire failover initiëren</span><span class="sxs-lookup"><span data-stu-id="cb911-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS to switch a secondary database to be primary to initiate failover</span></span> |
| [<span data-ttu-id="cb911-280">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="cb911-281">Gebruik secundaire ON-SERVER verwijderen om te beëindigen van een gegevensreplicatie tussen een SQL-Database en de opgegeven secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-281">Use REMOVE SECONDARY ON SERVER to terminate a data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="cb911-282">sys.geo_replication_links (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="cb911-283">Retourneert informatie over alle bestaande replicatiekoppelingen voor elke database op de logische Azure SQL Database-server.</span><span class="sxs-lookup"><span data-stu-id="cb911-283">Returns information about all existing replication links for each database on the Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="cb911-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="cb911-285">Hiermee wordt de tijd van laatste replicatie, laatste vertraging van replicatie en andere informatie over de replicatiekoppeling voor een bepaalde SQL-database.</span><span class="sxs-lookup"><span data-stu-id="cb911-285">Gets the last replication time, last replication lag, and other information about the replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="cb911-286">sys.dm_operation_status bevat (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="cb911-287">Geeft de status voor alle databasebewerkingen, inclusief de status van de replicatiekoppelingen.</span><span class="sxs-lookup"><span data-stu-id="cb911-287">Shows the status for all database operations including the status of the replication links.</span></span> |
| [<span data-ttu-id="cb911-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="cb911-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="cb911-289">zorgt ervoor dat de toepassing moet worden gewacht totdat alle doorgevoerde transacties zijn gerepliceerd en bevestigd door de actieve secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-289">causes the application to wait until all committed transactions are replicated and acknowledged by the active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="cb911-290">SQL database failover met behulp van PowerShell beheren</span><span class="sxs-lookup"><span data-stu-id="cb911-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="cb911-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="cb911-291">Cmdlet</span></span> | <span data-ttu-id="cb911-292">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cb911-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="cb911-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="cb911-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="cb911-294">Hiermee haalt u een of meer databases.</span><span class="sxs-lookup"><span data-stu-id="cb911-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="cb911-295">Nieuwe AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="cb911-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="cb911-296">Hiermee maakt u een secundaire database voor een bestaande database en start gegevensreplicatie.</span><span class="sxs-lookup"><span data-stu-id="cb911-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="cb911-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="cb911-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="cb911-298">Een secundaire database als primaire initiëren failover verandert.</span><span class="sxs-lookup"><span data-stu-id="cb911-298">Switches a secondary database to be primary to initiate failover.</span></span> |
| [<span data-ttu-id="cb911-299">Verwijder AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="cb911-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="cb911-300">Beëindigt gegevensreplicatie tussen een SQL-Database en de opgegeven secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-300">Terminates data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="cb911-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="cb911-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="cb911-302">Hiermee haalt u de geo-replicatiekoppelingen tussen een Azure SQL Database en een resourcegroep of SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cb911-302">Gets the geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="cb911-303">Nieuwe AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="cb911-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="cb911-304">Deze opdracht maakt een failover-groep en registreert deze op de primaire en secundaire servers</span><span class="sxs-lookup"><span data-stu-id="cb911-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="cb911-305">Verwijder AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="cb911-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="cb911-306">Hiermee verwijdert u de groep failover van de server en verwijdert u alle secundaire databases opgenomen in de groep</span><span class="sxs-lookup"><span data-stu-id="cb911-306">Removes the failover group from the server and deletes all secondary databases included the group</span></span> |
| [<span data-ttu-id="cb911-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="cb911-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="cb911-308">Haalt de configuratie van de failover</span><span class="sxs-lookup"><span data-stu-id="cb911-308">Retrieves the failover group configuration</span></span> |
| [<span data-ttu-id="cb911-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="cb911-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="cb911-310">Hiermee wijzigt u de configuratie van de failover-groep</span><span class="sxs-lookup"><span data-stu-id="cb911-310">Modifies the configuration of the failover group</span></span> |
| [<span data-ttu-id="cb911-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="cb911-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="cb911-312">Triggers failover van de groep failover naar de secundaire server</span><span class="sxs-lookup"><span data-stu-id="cb911-312">Triggers failover of the failover group to the secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="cb911-313">Zie voor voorbeelden van scripts, [en failover een individuele database met behulp van actieve geo-replicatie configureren](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [en failover een gegroepeerde database met behulp van actieve geo-replicatie configureren](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), en [configureren en failover een failover-groep voor één database (preview)] (scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="cb911-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-the-rest-api"></a><span data-ttu-id="cb911-314">Failover van SQL database met de REST API beheren</span><span class="sxs-lookup"><span data-stu-id="cb911-314">Manage SQL database failover using the REST API</span></span>
| <span data-ttu-id="cb911-315">API</span><span class="sxs-lookup"><span data-stu-id="cb911-315">API</span></span> | <span data-ttu-id="cb911-316">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cb911-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="cb911-317">Maken of de Database-Update (createMode = herstellen)</span><span class="sxs-lookup"><span data-stu-id="cb911-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="cb911-318">Gemaakt, bijgewerkt of hersteld van een primaire of secundaire database.</span><span class="sxs-lookup"><span data-stu-id="cb911-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="cb911-319">Get maken of bijwerken van de databasestatus</span><span class="sxs-lookup"><span data-stu-id="cb911-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="cb911-320">Retourneert de status tijdens een bewerking voor maken.</span><span class="sxs-lookup"><span data-stu-id="cb911-320">Returns the status during a create operation.</span></span> |
| [<span data-ttu-id="cb911-321">Secundaire Database instellen als primaire (geplande Failover)</span><span class="sxs-lookup"><span data-stu-id="cb911-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="cb911-322">Hiermee wordt ingesteld welke replica-database primaire door storing worden overgenomen uit de huidige primaire replica-database is.</span><span class="sxs-lookup"><span data-stu-id="cb911-322">Sets which replica database is primary by failing over from the current primary replica database.</span></span> |
| [<span data-ttu-id="cb911-323">Secundaire Database instellen als primaire (niet-geplande Failover)</span><span class="sxs-lookup"><span data-stu-id="cb911-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="cb911-324">Hiermee wordt ingesteld welke replica-database primaire door storing worden overgenomen uit de huidige primaire replica-database is.</span><span class="sxs-lookup"><span data-stu-id="cb911-324">Sets which replica database is primary by failing over from the current primary replica database.</span></span> <span data-ttu-id="cb911-325">Deze bewerking kan leiden tot verlies van gegevens.</span><span class="sxs-lookup"><span data-stu-id="cb911-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="cb911-326">Replicatiekoppeling ophalen</span><span class="sxs-lookup"><span data-stu-id="cb911-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="cb911-327">Hiermee haalt een bepaalde replicatiekoppeling voor een gegeven SQL-database in een associatie geo-replicatie.</span><span class="sxs-lookup"><span data-stu-id="cb911-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="cb911-328">Het ophalen van de informatie in de weergave van de catalogus sys.geo_replication_links zichtbaar.</span><span class="sxs-lookup"><span data-stu-id="cb911-328">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="cb911-329">Koppelingen voor databasereplicatie - lijst per Database</span><span class="sxs-lookup"><span data-stu-id="cb911-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="cb911-330">Hiermee haalt alle koppelingen voor databasereplicatie voor een gegeven SQL-database in een associatie geo-replicatie.</span><span class="sxs-lookup"><span data-stu-id="cb911-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="cb911-331">Het ophalen van de informatie in de weergave van de catalogus sys.geo_replication_links zichtbaar.</span><span class="sxs-lookup"><span data-stu-id="cb911-331">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="cb911-332">Replicatiekoppeling verwijderen</span><span class="sxs-lookup"><span data-stu-id="cb911-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="cb911-333">Hiermee verwijdert u een databasereplicatiekoppeling.</span><span class="sxs-lookup"><span data-stu-id="cb911-333">Deletes a database replication link.</span></span> <span data-ttu-id="cb911-334">Tijdens de failover kan niet worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cb911-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="cb911-335">[Maken of Failover-Update groep] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="cb911-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="cb911-336">Maken of bijwerken van een failover-groep</span><span class="sxs-lookup"><span data-stu-id="cb911-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="cb911-337">Failover-groep verwijderen</span><span class="sxs-lookup"><span data-stu-id="cb911-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="cb911-338">Hiermee verwijdert u de groep failover van de server</span><span class="sxs-lookup"><span data-stu-id="cb911-338">Removes the failover group from the server</span></span> |
| [<span data-ttu-id="cb911-339">Failover (gepland)</span><span class="sxs-lookup"><span data-stu-id="cb911-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="cb911-340">Failover uit van de huidige primaire server naar deze server.</span><span class="sxs-lookup"><span data-stu-id="cb911-340">Fails over from the current primary server to this server.</span></span> |
| [<span data-ttu-id="cb911-341">Force Failover verlies van gegevens toestaan</span><span class="sxs-lookup"><span data-stu-id="cb911-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="cb911-342">ails via van de huidige primaire server naar deze server.</span><span class="sxs-lookup"><span data-stu-id="cb911-342">ails over from the current primary server to this server.</span></span> <span data-ttu-id="cb911-343">Deze bewerking kan leiden tot verlies van gegevens.</span><span class="sxs-lookup"><span data-stu-id="cb911-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="cb911-344">Get-Failover-groep</span><span class="sxs-lookup"><span data-stu-id="cb911-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="cb911-345">Hiermee haalt u een failover-groep.</span><span class="sxs-lookup"><span data-stu-id="cb911-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="cb911-346">Lijst met failover-groepen door Server</span><span class="sxs-lookup"><span data-stu-id="cb911-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="cb911-347">Hier worden de groepen failover in een server.</span><span class="sxs-lookup"><span data-stu-id="cb911-347">Lists the failover groups in a server.</span></span> |
| [<span data-ttu-id="cb911-348">Failover-Updategroep</span><span class="sxs-lookup"><span data-stu-id="cb911-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="cb911-349">Een groep failover-updates.</span><span class="sxs-lookup"><span data-stu-id="cb911-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="cb911-350">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="cb911-350">Next steps</span></span>
* <span data-ttu-id="cb911-351">Zie voor voorbeeldscripts:</span><span class="sxs-lookup"><span data-stu-id="cb911-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="cb911-352">Configureren en failover een individuele database met behulp van actieve geo-replicatie</span><span class="sxs-lookup"><span data-stu-id="cb911-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="cb911-353">Configureren en failover een gegroepeerde database met behulp van actieve geo-replicatie</span><span class="sxs-lookup"><span data-stu-id="cb911-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="cb911-354">Configureren en failover een failover-groep voor één database (preview)</span><span class="sxs-lookup"><span data-stu-id="cb911-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="cb911-355">Zie voor een overzicht van zakelijke continuïteit en scenario's [Business continuity-overzicht](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="cb911-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="cb911-356">Voor meer informatie over Azure SQL Database geautomatiseerde back-ups, Zie [geautomatiseerde back-ups van SQL-Database](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-356">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="cb911-357">Zie voor meer informatie over het gebruik van automatische back-ups voor herstel, [een database herstellen vanuit back-ups service geïnitieerde](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-357">To learn about using automated backups for recovery, see [Restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="cb911-358">Zie voor meer informatie over vereisten voor gebruikersverificatie voor een nieuwe primaire server en database, [beveiliging van SQL Database na het herstel na noodgevallen](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="cb911-358">To learn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

