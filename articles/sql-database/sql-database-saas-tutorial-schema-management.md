---
title: aaaManage Azure SQL Database-schema in een multitenant-app | Microsoft Docs
description: Het schema voor meerdere tenants beheren in een toepassing met meerdere tenants die gebruikmaakt van Azure SQL Database
keywords: zelfstudie sql-database
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="ae1f8-104">Schema voor meerdere tenants in Wingtip SaaS-toepassing hello beheren</span><span class="sxs-lookup"><span data-stu-id="ae1f8-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="ae1f8-105">Hallo [eerste Wingtip SaaS-zelfstudie](sql-database-saas-tutorial.md) ziet u hoe Hallo app kunt inrichten van een tenant-database en deze te registreren in het Hallo-catalogus.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="ae1f8-106">Net als elke toepassing vereist hello Wingtip SaaS-app wordt aangepast, gedurende een bepaalde periode, en soms wijzigingen toohello database.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="ae1f8-107">Wijzigingen mogelijk zijn nieuwe of gewijzigde schema, nieuwe of gewijzigde referentiegegevens en routinematig onderhoud taken tooensure optimale app databaseprestaties.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="ae1f8-108">Met een SaaS-toepassing moeten deze wijzigingen toobe op gecoördineerde wijze wordt geïmplementeerd op een potentieel grote wagenpark van tenant-databases.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="ae1f8-109">Voor deze toobe wijzigingen in de toekomst tenant databases, moeten deze toobe opgenomen in het inrichtingsproces Hallo.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="ae1f8-110">Deze zelfstudie behandelt de twee scenario's - verwijzing Gegevensupdates implementeren voor alle tenants en een index op Hallo retuning tabel met Hallo referentiegegevens.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="ae1f8-111">Hallo [elastische taken](sql-database-elastic-jobs-overview.md) functie gebruikte tooexecute deze bewerkingen wordt voor alle tenants en Hallo *gouden* tenant-database die wordt gebruikt als een sjabloon voor nieuwe databases.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="ae1f8-112">In deze zelfstudie leert u het volgende:</span><span class="sxs-lookup"><span data-stu-id="ae1f8-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="ae1f8-113">De account van een taak maken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-113">Create a job account</span></span>
> * <span data-ttu-id="ae1f8-114">Vragen over meerdere tenants</span><span class="sxs-lookup"><span data-stu-id="ae1f8-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="ae1f8-115">Gegevens in alle tenantdatabases bijwerken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="ae1f8-116">Een index in een tabel maken in alle tenantdatabases</span><span class="sxs-lookup"><span data-stu-id="ae1f8-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="ae1f8-117">toocomplete in deze zelfstudie, zorg ervoor dat Hallo volgende vereisten wordt voldaan:</span><span class="sxs-lookup"><span data-stu-id="ae1f8-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="ae1f8-118">Hallo Wingtip SaaS-app wordt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="ae1f8-119">Zie toodeploy in minder dan vijf minuten [implementeren en verkennen Hallo Wingtip SaaS-toepassing](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="ae1f8-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="ae1f8-120">Azure PowerShell is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="ae1f8-121">Zie [Aan de slag met Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="ae1f8-122">Hallo meest recente versie van SQL Server Management Studio (SSMS) is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="ae1f8-123">SSMS downloaden en installeren</span><span class="sxs-lookup"><span data-stu-id="ae1f8-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="ae1f8-124">*Deze zelfstudie maakt gebruik van functies van Hallo SQL Database-service die zich in een beperkte preview (elastische Database taken). Als u wenst dat toodo in deze zelfstudie, geeft u uw abonnements-id tooSaaSFeedback@microsoft.com met de onderwerpnaam = elastische taken Preview. Nadat u een bevestiging dat uw abonnement is ingeschakeld, ontvangt [downloaden en installeren van de meest recente voorlopige versie taken-cmdlets Hallo](https://github.com/jaredmoo/azure-powershell/releases). Dit voorbeeld is beperkt, dus neem contact op met SaaSFeedback@microsoft.com voor vragen over of ondersteuning.*</span><span class="sxs-lookup"><span data-stu-id="ae1f8-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="ae1f8-125">Inleiding tooSaaS patronen Schemabeheer</span><span class="sxs-lookup"><span data-stu-id="ae1f8-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="ae1f8-126">Hallo één tenant per database SaaS patroon voordelen van tal van manieren Hallo gegevensisolatie die het resultaat, maar op Hallo introduceert hetzelfde moment Hallo extra complexiteit van het onderhouden en beheren van veel databases.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="ae1f8-127">[Elastische taken](sql-database-elastic-jobs-overview.md) vereenvoudigt het beheer en het beheer van Hallo SQL gegevenslaag.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="ae1f8-128">Taken helpen u toosecurely en betrouwbaar, onafhankelijk van de gebruikersinteractie of invoer, taken (T-SQL-scripts) uitvoeren op een groep met databases.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="ae1f8-129">Deze methode kan gebruikte toodeploy schema en de wijzigingen in algemene verwijzingen zijn in alle tenants in een toepassing.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="ae1f8-130">Elastische taken kunnen ook worden gebruikt toomaintain een *gouden* exemplaar van database Hallo toocreate nieuwe tenants, heeft altijd de meest recente schema's en verwijzingen gegevens Hallo gezorgd gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![scherm](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="ae1f8-132">Beperkte preview voor Elastische taken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="ae1f8-133">Er is een nieuwe versie beschikbaar van Elastische taken; dit is nu een ingebouwde functie in Azure SQL Database (waarvoor geen extra services of onderdelen zijn vereist).</span><span class="sxs-lookup"><span data-stu-id="ae1f8-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="ae1f8-134">Van deze nieuwe versie van Elastische taken is momenteel een beperkte preview beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="ae1f8-135">Deze beperkte preview biedt ondersteuning voor PowerShell toocreate taakaccounts en T-SQL-toocreate momenteel en beheren van taken.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="ae1f8-136">*Deze zelfstudie maakt gebruik van functies van Hallo SQL Database-service die zich in een beperkte preview (elastische Database taken). Als u wenst dat toodo in deze zelfstudie, geeft u uw abonnements-id tooSaaSFeedback@microsoft.com met de onderwerpnaam = elastische taken Preview. Nadat u een bevestiging dat uw abonnement is ingeschakeld, ontvangt [downloaden en installeren van de meest recente voorlopige versie taken-cmdlets Hallo](https://github.com/jaredmoo/azure-powershell/releases). Dit voorbeeld is beperkt, dus neem contact op met SaaSFeedback@microsoft.com voor vragen over of ondersteuning.*</span><span class="sxs-lookup"><span data-stu-id="ae1f8-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="ae1f8-137">Hallo Wingtip toepassingsscripts ophalen</span><span class="sxs-lookup"><span data-stu-id="ae1f8-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="ae1f8-138">Hallo Wingtip SaaS-scripts en broncode van toepassing zijn beschikbaar in Hallo [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-opslagplaats.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="ae1f8-139">[Stappen toodownload Hallo Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="ae1f8-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="ae1f8-140">Een taakaccountdatabase en een nieuw taakaccount maken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-140">Create a job account database and new job account</span></span>

<span data-ttu-id="ae1f8-141">Deze zelfstudie moet dat u PowerShell toocreate Hallo taak database en de taak rekening gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="ae1f8-142">Elastische taken maakt gebruik van een Azure SQL database zoals MSDB en SQL Agent toostore taakdefinities, taakstatus en de geschiedenis.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="ae1f8-143">Als Hallo taak account is gemaakt, kunt u maken en taken onmiddellijk controleren.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="ae1f8-144">Open... \\Learning-Modules\\Schemabeheer\\*Demo SchemaManagement.ps1* in Hallo **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="ae1f8-145">Druk op **F5** toorun Hallo script.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="ae1f8-146">Hallo *Demo SchemaManagement.ps1* script aanroepen Hallo *implementeren SchemaManagement.ps1* toocreate script een *S2* database met de naam **jobaccount** op Hallo-catalogusserver.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="ae1f8-147">Vervolgens maakt u Hallo taak account, Hallo jobaccount database wordt doorgegeven als een aanroep van parameter toohello taak account maken.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="ae1f8-148">Maken van een taak toodeploy nieuwe verwijzing gegevens tooall tenants</span><span class="sxs-lookup"><span data-stu-id="ae1f8-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="ae1f8-149">Elke tenant-database bevat een set van wetten typen die Hallo soort gebeurtenissen die worden gehost op een wilt definiëren.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="ae1f8-150">In deze oefening maakt u een type update tooall hello tenant databases tooadd twee extra u wilt implementeren: *motor race* en *zwemmen vereniging*.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="ae1f8-151">Dergelijke wetten overeenkomen toohello achtergrondafbeelding die u in Hallo tenant gebeurtenissen app ziet.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="ae1f8-152">Klik op de vervolgkeuzelijst hello wilt Type en valideren dat alleen 10 wilt type opties beschikbaar zijn en specifiek die 'Motor race' en 'Zwemmen vereniging' niet in de lijst Hallo opgenomen worden.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="ae1f8-153">Nu gaan we maken een taak tooupdate hello *VenueTypes* tabel in alle Hallo tenant databases en Hallo typen u wilt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="ae1f8-154">een nieuwe taak toocreate, gebruiken we een set taken systeem opgeslagen procedures in Hallo jobaccount database gemaakt als Hallo taak account is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="ae1f8-155">Open van SSMS en maak verbinding toohello catalogusserver: catalogus -\<gebruiker\>. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="ae1f8-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="ae1f8-156">Ook toohello tenant server verbinding te maken: tenants1 -\<gebruiker\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="ae1f8-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="ae1f8-157">Blader toohello *contosoconcerthall* database op Hallo *tenants1* server en de query Hallo *VenueTypes* tabel tooconfirm die *motor race*  en *zwemmen vereniging* **niet** in de lijst met resultaten Hallo.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="ae1f8-158">Open Hallo bestand... \\Learning-Modules\\Schemabeheer\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="ae1f8-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="ae1f8-159">Hallo-instructie wijzigen: Stel @wtpUser = &lt;gebruiker&gt; en vervang Hallo gebruiker waarde gebruikt als u Hallo Wingtip app geïmplementeerd</span><span class="sxs-lookup"><span data-stu-id="ae1f8-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="ae1f8-160">Zorg ervoor dat u bent verbonden toohello jobaccount database en druk op **F5** Hallo-script uit te voeren</span><span class="sxs-lookup"><span data-stu-id="ae1f8-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="ae1f8-161">**SP\_toevoegen\_doel\_groep** Hallo doelgroepnaam DemoServerGroup, maakt nu we tooadd doelleden moeten.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="ae1f8-162">**SP\_toevoegen\_doel\_groep\_lid** voegt een *server* lidtype die acht alle databases binnen die server (Opmerking Dit Hallo tenants1-isgericht&lt; Gebruiker&gt; -server op Hallo tenant databases met) op het moment van taak uitvoering moet worden opgenomen in Hallo-taak Hallo tweede is het toevoegen van een *database* lidtype als doel, speciaal Hallo 'gouden' database ( basetenantdb) die zich in de catalogus -&lt;gebruiker&gt; server, en ten slotte een andere *database* groep lid type tooinclude hello adhocanalytics doeldatabase die wordt gebruikt in een latere zelfstudie.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="ae1f8-163">Met **sp\_add\_job** maakt u een taak die ook wel 'Implementatie van referentiegegevens' heet</span><span class="sxs-lookup"><span data-stu-id="ae1f8-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="ae1f8-164">**SP\_toevoegen\_taakstap** Hallo taakstap met T-SQL-opdracht tekst tooupdate Hallo verwijzingstabel, VenueTypes maakt</span><span class="sxs-lookup"><span data-stu-id="ae1f8-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="ae1f8-165">Hallo resterende weergaven in Hallo script weergegeven Hallo bestaan Hallo-objecten en uitvoeren van de monitor-taak.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="ae1f8-166">Gebruik deze query's tooreview Hallo-statuswaarde in Hallo **lifecycle** kolom toodetermine wanneer het Hallo-taak is voltooid op alle databases van de tenant en Hallo twee extra databases met de verwijzingstabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="ae1f8-167">Blader in SSMS, toohello *contosoconcerthall* database op Hallo *tenants1* server en de query Hallo *VenueTypes* tabel tooconfirm die *motor Race* en *zwemmen vereniging* **zijn** nu in de lijst met resultaten Hallo.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="ae1f8-168">Een taak toomanage Hallo verwijzing tabelindex maken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="ae1f8-169">Vergelijkbare toohello vorige oefening deze oefening maakt u een taak toorebuild Hallo index op de primaire sleutel voor de tabel Hallo-verwijzing, een typische management databasebewerking een beheerder kan uitvoeren na het laden van een grote hoeveelheden gegevens in een tabel.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="ae1f8-170">Maken van een taak Hallo met dezelfde taken 'systeem' opgeslagen procedures.</span><span class="sxs-lookup"><span data-stu-id="ae1f8-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="ae1f8-171">Open SSMS en verbind toohello catalogus -&lt;gebruiker&gt;. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="ae1f8-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="ae1f8-172">Open Hallo bestand... \\Learning-Modules\\Schemabeheer\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="ae1f8-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="ae1f8-173">Klik met de rechtermuisknop, selecteer verbinding en verbinding maken met toohello catalogus -&lt;gebruiker&gt;. database.windows.net server, indien nog niet verbonden</span><span class="sxs-lookup"><span data-stu-id="ae1f8-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="ae1f8-174">Zorg ervoor dat u bent verbonden toohello jobaccount database en druk op F5 toorun Hallo script</span><span class="sxs-lookup"><span data-stu-id="ae1f8-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="ae1f8-175">Met sp\_add\_job maakt u een nieuwe taak met de naam Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885</span><span class="sxs-lookup"><span data-stu-id="ae1f8-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="ae1f8-176">SP\_toevoegen\_taakstap Hallo taakstap met T-SQL-opdracht tooupdate Hallo tekstindex maakt</span><span class="sxs-lookup"><span data-stu-id="ae1f8-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="ae1f8-177">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ae1f8-177">Next steps</span></span>

<span data-ttu-id="ae1f8-178">In deze zelfstudie hebt u het volgende geleerd:</span><span class="sxs-lookup"><span data-stu-id="ae1f8-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="ae1f8-179">Een taak account tooquery tussen meerdere tenants maken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="ae1f8-180">Gegevens in alle tenantdatabases bijwerken</span><span class="sxs-lookup"><span data-stu-id="ae1f8-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="ae1f8-181">Een index in een tabel maken in alle tenantdatabases</span><span class="sxs-lookup"><span data-stu-id="ae1f8-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="ae1f8-182">Zelfstudie over ad-hocanalyses</span><span class="sxs-lookup"><span data-stu-id="ae1f8-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="ae1f8-183">Aanvullende bronnen</span><span class="sxs-lookup"><span data-stu-id="ae1f8-183">Additional resources</span></span>

* [<span data-ttu-id="ae1f8-184">Aanvullende zelfstudies waarin voort op Hallo Wingtip SaaS-toepassingsimplementatie bouwen</span><span class="sxs-lookup"><span data-stu-id="ae1f8-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="ae1f8-185">Uitgeschaalde clouddatabases beheren</span><span class="sxs-lookup"><span data-stu-id="ae1f8-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="ae1f8-186">Uitgeschaalde clouddatabases maken en beheren</span><span class="sxs-lookup"><span data-stu-id="ae1f8-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
