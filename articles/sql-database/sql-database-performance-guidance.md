---
title: aaaAzure SQL Database-prestaties afstemmen richtlijnen | Microsoft Docs
description: In dit artikel kunt u bepalen welke service tier toochoose voor uw toepassing. Het ook aanbevolen manieren tootune uw toepassing tooget Hallo optimaal van Azure SQL Database.
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="14aa0-104">Afstemming van de prestaties in Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="14aa0-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="14aa0-105">Azure SQL Database biedt [aanbevelingen](sql-database-advisor.md) dat kunt u tooimprove prestaties van uw database, of kunt u gebruiken om Azure SQL Database [automatisch aanpassen tooyour toepassing](sql-database-automatic-tuning.md) en wijzigingen toepassen die worden de prestaties van uw workload.</span><span class="sxs-lookup"><span data-stu-id="14aa0-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="14aa0-106">In dat u geen toepasselijke aanbevelingen, en u nog steeds prestatieproblemen, kunt u Hallo methoden tooimprove prestaties te volgen:</span><span class="sxs-lookup"><span data-stu-id="14aa0-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="14aa0-107">Verhogen [Servicelagen](sql-database-service-tiers.md) en bieden meer resources tooyour-database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="14aa0-108">Uw toepassing afstemmen en enkele aanbevolen procedures die u kunnen de prestaties verbeteren van toepassing.</span><span class="sxs-lookup"><span data-stu-id="14aa0-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="14aa0-109">Hallo database afstemmen door indexen en query's toomore efficiënt werken met gegevens te wijzigen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="14aa0-110">Dit zijn handmatige methodes omdat u nodig toodecide wat hebt [Servicelagen](sql-database-service-tiers.md) kiest u of u zou moeten toorewrite toepassing of databasecode en deply Hallo wijzigingen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="14aa0-111">Laag van de toenemende prestaties van uw database</span><span class="sxs-lookup"><span data-stu-id="14aa0-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="14aa0-112">Azure SQL Database biedt vier [Servicelagen](sql-database-service-tiers.md) die u kunt kiezen uit: Basic, Standard, Premium en Premium RS (prestaties wordt gemeten in database-eenheden voor doorvoer, of [dtu's](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="14aa0-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="14aa0-113">Elke servicelaag isoleert strikt Hallo resources uw SQL-database kunt gebruiken, en wordt gegarandeerd dat voorspelbare prestaties voor dit serviceniveau.</span><span class="sxs-lookup"><span data-stu-id="14aa0-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="14aa0-114">In dit artikel bieden we hulp kunt u ervoor kiezen de servicelaag Hallo voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="14aa0-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="14aa0-115">Dat kunt u uw toepassing tooget Hallo optimaal van Azure SQL Database afstemmen manieren ook besproken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="14aa0-116">Dit artikel is gericht op prestaties richtlijnen voor individuele databases in Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="14aa0-117">Zie voor instructies voor prestaties gerelateerde tooelastic pools [prijs- en Prestatieoverwegingen voor elastische pools](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="14aa0-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="14aa0-118">Merk echter op dat u kunt toepassen veel Hallo aanbevelingen in dit artikel toodatabases in een elastische pool afstemmen en vergelijkbare prestatievoordelen ophalen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="14aa0-119">**Basic**: Hallo Basic service tier aanbiedingen voorspelbaarheid goede prestaties voor elke database, uur ruim uur.</span><span class="sxs-lookup"><span data-stu-id="14aa0-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="14aa0-120">In een Basic-database ondersteuning voldoende bronnen zijn voor goede prestaties in een kleine database die niet meerdere, gelijktijdige aanvragen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="14aa0-121">Er zijn typische gebruiksvoorbeelden wanneer u Basic servicelaag wilt gebruiken:</span><span class="sxs-lookup"><span data-stu-id="14aa0-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="14aa0-122">**U alleen aan de slag met Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="14aa0-123">Toepassingen die zich in ontwikkeling vaak hoeft geen hoge prestaties.</span><span class="sxs-lookup"><span data-stu-id="14aa0-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="14aa0-124">Basic-databases zijn een ideale omgeving voor databaseontwikkeling of tests, tegen een lage prijs.</span><span class="sxs-lookup"><span data-stu-id="14aa0-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="14aa0-125">**U hebt een database met één gebruiker**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-125">**You have a database with a single user**.</span></span> <span data-ttu-id="14aa0-126">Toepassingen die meestal een enkele gebruiker aan een database koppelt hebt geen hoge gelijktijdigheid van taken en prestaties van de vereisten.</span><span class="sxs-lookup"><span data-stu-id="14aa0-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="14aa0-127">Deze toepassingen zijn kandidaten voor Hallo Basic servicetier.</span><span class="sxs-lookup"><span data-stu-id="14aa0-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="14aa0-128">**Standaard**: Hallo standaard servicelaag biedt verbeterde prestaties, voorspelbaarheid en biedt goede prestaties voor databases die meerdere gelijktijdige aanvragen, zoals werkgroep en webtoepassingen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="14aa0-129">Wanneer u een database van de laag Standard service kiest, u kunt het formaat van uw databasetoepassing op basis van voorspelbare prestaties, minuut gedurende een minuut.</span><span class="sxs-lookup"><span data-stu-id="14aa0-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="14aa0-130">**Uw database heeft meerdere gelijktijdige aanvragen**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="14aa0-131">Toepassingen die meer dan één gebruiker op een tijdstip meestal moeten hogere prestaties.</span><span class="sxs-lookup"><span data-stu-id="14aa0-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="14aa0-132">Werkgroep- of webtoepassingen toepassingen met lage toomedium i/o-verkeer vereisten ondersteunen meerdere gelijktijdige query's zijn bijvoorbeeld geschikt voor Hallo standaard servicelaag.</span><span class="sxs-lookup"><span data-stu-id="14aa0-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="14aa0-133">**Premium**: Hallo Premium servicecategorie voorziet in voorspelbare prestaties tweede via ten tweede voor elke database Premium.</span><span class="sxs-lookup"><span data-stu-id="14aa0-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="14aa0-134">Wanneer u de Premium servicecategorie Hallo kiest, kunt u het formaat van uw databasetoepassing op basis van de piekbelasting Hallo voor die database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="14aa0-135">Hallo-abonnement verwijdert gevallen waarin prestaties van de variantie kleine query's tootake langer dan verwacht in latentie gevoelig bewerkingen kan veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="14aa0-136">Dit model kan Hallo ontwikkelings- en validatie cycli voor toepassingen die toomake sterk instructies over de resourcebehoeften piek, prestaties van de variantie of latentie van query moeten sterk vereenvoudigen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="14aa0-137">De meeste Premium-laag service gebruiksvoorbeelden hebben een of meer van deze kenmerken:</span><span class="sxs-lookup"><span data-stu-id="14aa0-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="14aa0-138">**Hoge piekbelasting**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-138">**High peak load**.</span></span> <span data-ttu-id="14aa0-139">Een toepassing die is vereist aanzienlijk CPU, geheugen of input/output (I/O) toocomplete bewerkingen is vereist voor een specifieke, hoge prestaties.</span><span class="sxs-lookup"><span data-stu-id="14aa0-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="14aa0-140">Een bekend tooconsume databasebewerking meerdere CPU-kernen voor een langere periode is bijvoorbeeld geschikt is voor de Premium servicecategorie Hallo.</span><span class="sxs-lookup"><span data-stu-id="14aa0-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="14aa0-141">**Veel gelijktijdige aanvragen**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-141">**Many concurrent requests**.</span></span> <span data-ttu-id="14aa0-142">Sommige databasetoepassingen-service is veel gelijktijdige aanvragen, bijvoorbeeld wanneer voor een website die een intensief verkeer.</span><span class="sxs-lookup"><span data-stu-id="14aa0-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="14aa0-143">Basis en standaard Servicelagen Hallo aantal gelijktijdige aanvragen per database beperken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="14aa0-144">Toepassingen waarvoor meer verbindingen moet toochoose een juiste reservering grootte toohandle Hallo maximum aantal benodigde aanvragen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="14aa0-145">**Lage latentie**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-145">**Low latency**.</span></span> <span data-ttu-id="14aa0-146">Sommige toepassingen moeten tooguarantee een reactie van Hallo-database in de minimale tijd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="14aa0-147">Als een specifieke opgeslagen procedure als onderdeel van een bredere klant-bewerking wordt aangeroepen, wellicht u een vereiste toohave een return-aanroep die in 99 procent van Hallo tijd niet meer dan 20 milliseconden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="14aa0-148">Dit type toepassing voordelen van de Premium servicecategorie hello, zorg ervoor dat deze Hallo vereiste rekenkracht toomake is beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="14aa0-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="14aa0-149">**Premium-RS**: Hallo Premium RS servicetier is ontworpen voor i/o-intensieve werkbelastingen die niet hoeven Hallo hoogste beschikbaarheidsgaranties.</span><span class="sxs-lookup"><span data-stu-id="14aa0-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="14aa0-150">Voorbeelden omvatten het testen van werklasten met hoge prestaties of een analytische werkbelasting Hallo-database is waar geen Hallo-systeem van record.</span><span class="sxs-lookup"><span data-stu-id="14aa0-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="14aa0-151">Hallo serviceniveau dat u nodig hebt voor de SQL-database, is afhankelijk van Hallo piek load vereisten voor de resourcedimensie van elke.</span><span class="sxs-lookup"><span data-stu-id="14aa0-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="14aa0-152">Sommige toepassingen een trivial bedrag van één resource gebruiken, maar belangrijke vereisten voor andere bronnen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="14aa0-153">Service tier mogelijkheden en beperkingen</span><span class="sxs-lookup"><span data-stu-id="14aa0-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="14aa0-154">Op elke servicelaag ingesteld prestatieniveau hello, zodat u Hallo flexibiliteit toopay alleen voor Hallo capaciteit die u nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="14aa0-155">U kunt [aanpassen capaciteit](sql-database-service-tiers.md), omhoog of omlaag, omdat wijzigingen van de werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="14aa0-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="14aa0-156">Bijvoorbeeld als de werkbelasting van uw database tijdens Hallo terug naar school winkelwagen seizoen hoog is, kunt u verhogen Hallo prestatieniveau voor Hallo database gedurende een bepaalde periode, juli tot en met September.</span><span class="sxs-lookup"><span data-stu-id="14aa0-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="14aa0-157">U kunt deze beperken wanneer uw seizoen piek wordt beëindigd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="14aa0-158">U betaalt door het optimaliseren van uw cloud omgeving toohello seizoensgebonden van uw bedrijf, kunt u minimaliseren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="14aa0-159">Dit model ook geschikt is voor software product release cycli.</span><span class="sxs-lookup"><span data-stu-id="14aa0-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="14aa0-160">Een testteam mogelijk capaciteit toewijzen terwijl deze wordt uitgevoerd test en vervolgens die capaciteit vrijgeven wanneer ze klaar bent met testen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="14aa0-161">In een model van de aanvraag capaciteit betaalt u voor capaciteit terwijl u nodig hebt en besparen op toegewijde bronnen die u mogelijk zelden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="14aa0-162">Waarom Servicelagen?</span><span class="sxs-lookup"><span data-stu-id="14aa0-162">Why service tiers?</span></span>
<span data-ttu-id="14aa0-163">Hoewel elke werkbelasting database verschillen kan, wordt in het Hallo-doel van Servicelagen tooprovide prestaties voorspelbaarheid op verschillende prestatieniveaus is.</span><span class="sxs-lookup"><span data-stu-id="14aa0-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="14aa0-164">Klanten met grootschalige database resourcevereisten kunnen in een meer specifieke computeromgeving werken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="14aa0-165">Uw toepassing optimaliseren</span><span class="sxs-lookup"><span data-stu-id="14aa0-165">Tune your application</span></span>
<span data-ttu-id="14aa0-166">Bij traditionele on-premises SQL Server is Hallo proces van de eerste capaciteitsplanning vaak gescheiden van Hallo proces van het uitvoeren van een toepassing in productie.</span><span class="sxs-lookup"><span data-stu-id="14aa0-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="14aa0-167">Hardware- en licenties eerst zijn aangeschaft en prestatieafstemming later wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="14aa0-168">Wanneer u Azure SQL Database gebruikt, is het een goed idee toointerweave Hallo proces van het uitvoeren van een toepassing en het afstemmen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="14aa0-169">Met de Hallo model van de capaciteit op aanvraag betaalt, kunt u uw toepassing toouse Hallo minimaal benodigde resources nu in plaats van overmatige inrichting op hardware gebaseerd op wat van toekomstige groeiplannen voor een toepassing die vaak onjuist afstemmen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="14aa0-170">Sommige klanten mogelijk niet tootune een toepassing te selecteren en in plaats daarvan kiezen toooverprovision hardwarebronnen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="14aa0-171">Deze aanpak mogelijk een goed idee als u niet dat toochange een sleutel toepassing gedurende een periode van bezet wilt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="14aa0-172">Maar afstemming van een toepassing kunt minimaliseren resourcevereisten en maandelijkse rekeningen te verlagen wanneer u de servicecategorieën Hallo in Azure SQL Database gebruikt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="14aa0-173">Kenmerken van toepassingen</span><span class="sxs-lookup"><span data-stu-id="14aa0-173">Application characteristics</span></span>
<span data-ttu-id="14aa0-174">Hoewel Azure SQL Database Servicelagen ontworpen tooimprove prestaties stabiliteit en voorspelbaarheid voor een toepassing zijn, kunt enkele aanbevolen procedures u uw toepassing toobetter profiteren van Hallo bronnen op een prestatieniveau van de te optimaliseren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="14aa0-175">Hoewel veel toepassingen hebben aanzienlijke prestatieverbeteringen gewoon door gegevenslaag tooa overschakelen hoger prestatieniveau of service vormt, bepaalde toepassingen nodig aanvullende afstemmen toobenefit van een hoger niveau van de service.</span><span class="sxs-lookup"><span data-stu-id="14aa0-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="14aa0-176">Voor betere prestaties kunt u eventueel extra toepassing afstemmen voor toepassingen die de volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="14aa0-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="14aa0-177">**Toepassingen met trage prestaties vanwege 'chatty' gedrag**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="14aa0-178">Chatty toepassingen maken overmatige gegevenstoegangbewerkingen die gevoelige toonetwork latentie.</span><span class="sxs-lookup"><span data-stu-id="14aa0-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="14aa0-179">Mogelijk moet u toomodify deze soorten toepassingen tooreduce Hallo aantal data access operations toohello SQL-database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="14aa0-180">Bijvoorbeeld, u mogelijk de toepassingsprestaties verbeteren door met behulp van technieken zoals ad-hocquery's batchverwerking of Hallo query toostored procedures te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="14aa0-181">Zie voor meer informatie [Batch-query's](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="14aa0-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="14aa0-182">**Databases met een intensieve werkbelasting dat kan niet worden ondersteund door een volledige één machine**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="14aa0-183">Databases die groter is dan Hallo bronnen van het prestatieniveau van Hallo hoogste Premium nuttig Hallo werkbelasting uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="14aa0-184">Zie voor meer informatie [tussen meerdere databases sharding](#cross-database-sharding) en [functionele partitioneren](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="14aa0-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="14aa0-185">**Toepassingen die suboptimale query's hebben**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="14aa0-186">Toepassingen, met name voor die in Hallo gegevenstoegangslaag, die query's zijn niet goed zijn afgestemd niet nuttig een hoger prestatieniveau.</span><span class="sxs-lookup"><span data-stu-id="14aa0-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="14aa0-187">Het gaat hierbij om query's die niet over een WHERE-component, indexen ontbrekende of verouderde statistieken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="14aa0-188">Deze toepassingen profiteren van de prestaties afstemmen standaard query-technieken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="14aa0-189">Zie voor meer informatie [ontbrekende indexen](#identifying-and-adding-missing-indexes) en [Query afstemmen en coderingstips](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="14aa0-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="14aa0-190">**Toepassingen die suboptimale gegevens hebben toegang tot ontwerp**.</span><span class="sxs-lookup"><span data-stu-id="14aa0-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="14aa0-191">Toepassingen die intrinsieke gegevens gelijktijdigheid toegangsproblemen, bijvoorbeeld deadlocking, hebben mogelijk niet profiteren van een hoger prestatieniveau.</span><span class="sxs-lookup"><span data-stu-id="14aa0-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="14aa0-192">Overwegen retouren tegen hello Azure SQL Database met caching gegevens aan de clientzijde Hallo Hello Azure cache service of een andere caching-technologie.</span><span class="sxs-lookup"><span data-stu-id="14aa0-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="14aa0-193">Zie [toepassing laag caching](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="14aa0-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="14aa0-194">Uw database afstemmen</span><span class="sxs-lookup"><span data-stu-id="14aa0-194">Tune your database</span></span>
<span data-ttu-id="14aa0-195">In dit gedeelte kijken we enkele technieken tootune Azure SQL Database toogain Hallo optimale prestaties gebruiken voor uw toepassing en voer deze uit op Hallo laagst mogelijke prestatieniveau.</span><span class="sxs-lookup"><span data-stu-id="14aa0-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="14aa0-196">Enkele van de volgende manieren traditionele SQL Server best practices afstemmen overeenkomen, maar sommige specifieke tooAzure SQL-Database zijn.</span><span class="sxs-lookup"><span data-stu-id="14aa0-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="14aa0-197">In sommige gevallen kunt u onderzoeken Hallo verbruikt resources voor een database toofind gebieden toofurther afstemmen en uitbreiden van traditionele SQL Server-technieken toowork in Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="14aa0-198">Identificeren van prestatieproblemen met Azure portal</span><span class="sxs-lookup"><span data-stu-id="14aa0-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="14aa0-199">Hallo volgende hulpprogramma's in hello Azure-portal kunt u analyseren en oplossen van prestatieproblemen met uw SQL-database:</span><span class="sxs-lookup"><span data-stu-id="14aa0-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="14aa0-200">Inzicht in queryprestaties</span><span class="sxs-lookup"><span data-stu-id="14aa0-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="14aa0-201">SQL Database Advisor</span><span class="sxs-lookup"><span data-stu-id="14aa0-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="14aa0-202">Hello Azure portal vindt u meer informatie over beide van deze hulpprogramma's en hoe toouse ze.</span><span class="sxs-lookup"><span data-stu-id="14aa0-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="14aa0-203">tooefficiently opsporen en corrigeren van problemen, het is raadzaam dat u de eerste keer Hallo-hulpprogramma's in hello Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="14aa0-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="14aa0-204">Het is raadzaam dat u Hallo handmatige methoden die we vervolgens bespreken ontbrekende indexen en query afstemmen, in bijzondere gevallen afstemmen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="14aa0-205">Meer informatie over het identificeren van problemen in Azure SQL Database op [prestatiebewaking](sql-database-single-database-monitor.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="14aa0-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="14aa0-206">Te identificeren en ontbrekende indexen toe te voegen</span><span class="sxs-lookup"><span data-stu-id="14aa0-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="14aa0-207">Een veelvoorkomend probleem in de prestaties van de OLTP-database is gekoppeld toohello fysieke databaseontwerp.</span><span class="sxs-lookup"><span data-stu-id="14aa0-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="14aa0-208">Vaak worden databaseschema ontworpen en getest op schaal (ofwel in load of gegevensvolume) verzonden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="14aa0-209">Helaas Hallo prestaties van een queryplan kan acceptabele op kleine schaal, maar aanzienlijk verslechteren onder productieniveau gegevensvolumes.</span><span class="sxs-lookup"><span data-stu-id="14aa0-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="14aa0-210">Hallo meest voorkomende oorzaak van dit probleem is Hallo gebrek aan de juiste indexen toosatisfy filters of andere beperkingen in een query.</span><span class="sxs-lookup"><span data-stu-id="14aa0-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="14aa0-211">Vaak ontbrekende indexen manifesten als een tabel als kan worden volstaan met een index seek scannen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="14aa0-212">In dit voorbeeld gebruikt de geselecteerde queryplan Hallo een scan wanneer seek zou voldoende:</span><span class="sxs-lookup"><span data-stu-id="14aa0-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Het queryplan met ontbrekende indexen](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="14aa0-214">Azure SQL Database kunt u zoeken naar en fix algemene ontbreken index voorwaarden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="14aa0-215">DMV's die zijn ingebouwd in Azure SQL Database bekijken querycompilaties waarin een index aanzienlijk sneller een Hallo geschatte kosten toorun een query.</span><span class="sxs-lookup"><span data-stu-id="14aa0-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="14aa0-216">Tijdens het uitvoeren van query SQL-Database houdt hoe vaak elke queryplan wordt uitgevoerd en houdt Hallo geschatte hiaat tussen Hallo queryplan en Hallo uitvoeren maar één waar die index bestaat.</span><span class="sxs-lookup"><span data-stu-id="14aa0-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="14aa0-217">U kunt deze DMV's tooquickly schatting welke wijzigingen tooyour fysieke databaseontwerp werkbelasting van de totale kosten voor een database en de werkelijke werkbelasting kan worden verbeterd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="14aa0-218">U kunt deze query tooevaluate potentieel ontbrekende indexen gebruiken:</span><span class="sxs-lookup"><span data-stu-id="14aa0-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="14aa0-219">In dit voorbeeld geeft Hallo query deze suggestie:</span><span class="sxs-lookup"><span data-stu-id="14aa0-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="14aa0-220">Nadat deze gemaakt, haalt die dezelfde SELECT-instructie een ander abonnement dat seek gebruikt in plaats van een scan, en vervolgens efficiënter uitgevoerd Hallo plannen:</span><span class="sxs-lookup"><span data-stu-id="14aa0-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Een queryplan met de gecorrigeerde indexen](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="14aa0-222">Hallo sleutel inzicht is die Hallo i/o-capaciteit van een gedeelde, grondstoffen system beperkter dan die van een speciale server-machine.</span><span class="sxs-lookup"><span data-stu-id="14aa0-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="14aa0-223">Er is een premium op voor het minimaliseren van onnodige i/o-tootake maximaal voordeel van Hallo systeem in Hallo DTU van elke prestatieniveau van hello Azure SQL Database servicecategorieën.</span><span class="sxs-lookup"><span data-stu-id="14aa0-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="14aa0-224">Juiste fysieke database ontwerpbeslissingen die kunnen aanzienlijk verbeteren Hallo latentie voor afzonderlijke query's, Hallo doorvoer van gelijktijdige aanvragen verwerkt per schaaleenheid verbeteren en Hallo kosten vereist toosatisfy Hallo query minimaliseren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="14aa0-225">Zie voor meer informatie over Hallo ontbreekt index DMV's [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="14aa0-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="14aa0-226">Query afstemmen en coderingstips</span><span class="sxs-lookup"><span data-stu-id="14aa0-226">Query tuning and hinting</span></span>
<span data-ttu-id="14aa0-227">Hallo queryoptimalisatie in Azure SQL Database is vergelijkbaar traditionele SQL Server toohello-queryoptimalisatie.</span><span class="sxs-lookup"><span data-stu-id="14aa0-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="14aa0-228">De meeste Hallo aanbevolen procedures voor het afstemmen van query's en kennis Hallo redeneren model beperkingen voor queryoptimalisatie Hallo ook van toepassing tooAzure SQL-Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="14aa0-229">Als u query's in Azure SQL Database afstemmen, krijgt u mogelijk Hallo extra voordeel cumulatieve resourcebehoeften verminderen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="14aa0-230">Uw toepassing mogelijk kunnen toorun, tegen lagere kosten dan een ruiseffect gelijkwaardige omdat kan worden uitgevoerd op een lager prestatieniveau.</span><span class="sxs-lookup"><span data-stu-id="14aa0-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="14aa0-231">Een voorbeeld die vaak worden uitgevoerd in SQL Server en dat geldt ook tooAzure SQL-Database is hoe Hallo queryparameters optimaliseren "bithandtekeningen'.</span><span class="sxs-lookup"><span data-stu-id="14aa0-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="14aa0-232">Tijdens de compilatie evalueert queryoptimalisatie Hallo Hallo huidige waarde van een parameter toodetermine of meer optimale queryplan kan worden gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="14aa0-233">Hoewel deze strategie vaak tooa queryplan dat zijn aanzienlijk sneller dan een plan dat is gecompileerd zonder bekende parameterwaarden leiden kan, momenteel het werkt dat zowel in SQL Server en in Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="14aa0-234">Hallo-parameter is soms niet sniff, en soms Hallo-parameter is sniff maar Hallo gegenereerde plan is suboptimale voor de volledige set Hallo van parameterwaarden in een werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="14aa0-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="14aa0-235">Microsoft levert queryhints (richtlijnen) zodat u kunt meer doelbewust doel opgeven en Hallo standaardgedrag van de parameter het bewaken van netwerken negeren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="14aa0-236">Als u hints gebruikt, kunt u vaak gevallen waarin Hallo SQL Server of Azure SQL Database standaardgedrag imperfecte voor een specifieke klant werkbelasting oplossen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="14aa0-237">Hallo volgende voorbeeld laat zien hoe Hallo queryprocessor een plan dat is suboptimale voor prestaties en resourcevereisten kan genereren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="14aa0-238">Dit voorbeeld ziet ook als u een hint query gebruikt, u query uitvoeren tijd- en vereisten voor de SQL-database verkleinen kunt:</span><span class="sxs-lookup"><span data-stu-id="14aa0-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="14aa0-239">Hallo Setupcode maakt een tabel die Gegevensdistributie is vervormd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="14aa0-240">Hallo optimale query verschilt van de planning gebaseerd op welke parameter is geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="14aa0-241">Helaas compileren niet Hallo plan cachegedrag altijd Hallo-query op basis van de meest voorkomende parameterwaarde Hallo.</span><span class="sxs-lookup"><span data-stu-id="14aa0-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="14aa0-242">Het is dus mogelijk voor een toobe suboptimale plan in de cache opgeslagen en gebruikt voor meerdere waarden, zelfs wanneer een ander schema is mogelijk een betere keuze voor plan gemiddeld.</span><span class="sxs-lookup"><span data-stu-id="14aa0-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="14aa0-243">Het queryplan Hallo maakt vervolgens twee opgeslagen procedures die identiek zijn, behalve dat een een hint speciale query heeft.</span><span class="sxs-lookup"><span data-stu-id="14aa0-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="14aa0-244">**Bijvoorbeeld: deel 1**</span><span class="sxs-lookup"><span data-stu-id="14aa0-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="14aa0-245">**Bijvoorbeeld: deel 2**</span><span class="sxs-lookup"><span data-stu-id="14aa0-245">**Example, part 2**</span></span>

<span data-ttu-id="14aa0-246">(We raden u ten minste 10 minuten voordat u begint met deel 2 van Hallo bijvoorbeeld zodat Hallo resultaten zijn uniek is in de resulterende telemetriegegevens Hallo.)</span><span class="sxs-lookup"><span data-stu-id="14aa0-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="14aa0-247">Elk deel van dit voorbeeld probeert een geparameteriseerde insert-instructie toorun 1000 keer (toogenerate een voldoende load toouse als een testgegevensset).</span><span class="sxs-lookup"><span data-stu-id="14aa0-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="14aa0-248">Bij het uitvoeren van opgeslagen procedures, onderzoekt queryprocessor Hallo Hallo parameterwaarde die toohello procedure wordt doorgegeven tijdens de eerste compilatie (parameter ' bekijken').</span><span class="sxs-lookup"><span data-stu-id="14aa0-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="14aa0-249">Hallo-processor resulterende plan Hallo-cache en wordt gebruikt voor latere aanroepen, zelfs als de parameterwaarde Hallo verschilt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="14aa0-250">Hallo optimale planning kan niet worden gebruikt in alle gevallen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="14aa0-251">Soms moet u tooguide Hallo optimaliseren toopick een plan dat is beter geschikt voor gemiddelde geval Hallo in plaats van specifieke geval Hallo uit wanneer Hallo query voor het eerst is gecompileerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="14aa0-252">In dit voorbeeld genereert Hallo initiële plan een plan 'scan', die alle rijen toofind elke waarde die overeenkomt met de parameter Hallo leest:</span><span class="sxs-lookup"><span data-stu-id="14aa0-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Query afstemmen met behulp van een scan plannen](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="14aa0-254">Aangezien we Hallo procedure uitgevoerd met behulp van Hallo waarde 1, Hallo resulterende plan is optimaal is voor Hallo waarde 1 maar suboptimale voor alle andere waarden in de tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="14aa0-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="14aa0-255">Hallo resultaat waarschijnlijk niet wat u zou willen zijn als u toopick elk willekeurig plannen omdat Hallo plan traag meer en meer bronnen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="14aa0-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="14aa0-256">Als u een test met Hallo uitvoert `SET STATISTICS IO` instellen te`ON`, Hallo logische scan werk in dit voorbeeld achter de schermen hello wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="14aa0-257">U kunt zien dat er 1,148 leesbewerkingen gedaan door Hallo plan (dit is inefficiënt als Hallo gemiddelde geval tooreturn slechts één rij) zijn:</span><span class="sxs-lookup"><span data-stu-id="14aa0-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Query afstemmen met behulp van een logische scan](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="14aa0-259">Hallo secondegedeelte van Hallo voorbeeld maakt gebruik van een query hint tootell Hallo optimaliseren toouse een specifieke waarde tijdens de compilatie van Hallo.</span><span class="sxs-lookup"><span data-stu-id="14aa0-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="14aa0-260">In dit geval u gedwongen wordt Hallo query processor tooignore Hallo waarde die wordt doorgegeven als parameter hello, en in plaats daarvan tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="14aa0-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="14aa0-261">Dit verwijst tooa waarde Hallo gemiddelde frequentie in Hallo-tabel (tijdverschil worden genegeerd).</span><span class="sxs-lookup"><span data-stu-id="14aa0-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="14aa0-262">Hallo resulterende plan is een seek op basis van een plan dat is sneller en gebruikt minder bronnen, gemiddeld dan Hallo plan in dit voorbeeld, deel 1:</span><span class="sxs-lookup"><span data-stu-id="14aa0-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Query afstemmen met behulp van een query-hint](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="14aa0-264">Ziet u Hallo effect in Hallo **sys.resource_stats** tabel (Er is een vertraging van Hallo tijd dat u Hallo test- en wanneer gegevens Hallo Hallo tabel gevuld uitvoeren).</span><span class="sxs-lookup"><span data-stu-id="14aa0-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="14aa0-265">Voor dit voorbeeld, deel 1 uitgevoerd tijdens Hallo 22:25:00 tijdvenster en deel 2 om 22:35:00 uur uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="14aa0-266">Hallo eerdere tijdvenster gebruikt meer bronnen in dat tijdvenster dan hello later een (vanwege plan efficiëntieverbeteringen).</span><span class="sxs-lookup"><span data-stu-id="14aa0-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Prestatieafstemming voorbeeld queryresultaten](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="14aa0-268">Hoewel Hallo volume in dit voorbeeld opzettelijk klein is, kan Hallo effect van suboptimale parameters aanzienlijke vooral op database groter worden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="14aa0-269">Hallo verschil in uitzonderlijke gevallen mag tussen seconden voor snelle gevallen en uur trage gevallen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="14aa0-270">U kunt controleren **sys.resource_stats** toodetermine of Hallo resource voor een test maakt gebruik van meer of minder resources dan een andere test.</span><span class="sxs-lookup"><span data-stu-id="14aa0-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="14aa0-271">Als u gegevens vergelijken, scheidt u Hallo timing van tests zodat ze zich niet in Hallo dezelfde 5 minuten venster in Hallo **sys.resource_stats** weergeven.</span><span class="sxs-lookup"><span data-stu-id="14aa0-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="14aa0-272">Hallo is doel van Hallo oefening toominimize Hallo totale hoeveelheid resources die worden gebruikt en niet toominimize Hallo piek bronnen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="14aa0-273">In het algemeen minder een stuk code voor latentie optimaliseren ook brongebruik.</span><span class="sxs-lookup"><span data-stu-id="14aa0-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="14aa0-274">Zorg ervoor dat Hallo wijzigingen tooan toepassing nodig zijn en dat wijzigingen Hallo Hallo klantervaring voor iemand die queryhints in toepassing hello gebruikmaken mogelijk niet negatief beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="14aa0-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="14aa0-275">Als een werklast heeft een set met herhaalde query's, vaak er wordt zin toocapture en optimalisatie van uw keuzes plan Hallo valideren omdat deze de Hallo minimale grootte eenheid vereist toohost Hallo resourcedatabase.</span><span class="sxs-lookup"><span data-stu-id="14aa0-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="14aa0-276">Het valideren van tijd tot tijd Hallo plannen dat toohelp u ervoor zorgen dat ze hebben niet is gedegradeerd te klikken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="14aa0-277">U kunt meer lezen over [hints (Transact-SQL) query](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="14aa0-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="14aa0-278">Meerdere databases sharding</span><span class="sxs-lookup"><span data-stu-id="14aa0-278">Cross-database sharding</span></span>
<span data-ttu-id="14aa0-279">Omdat Azure SQL Database wordt uitgevoerd op basishardware, zijn Hallo capaciteitslimieten voor één database lager dan bij traditionele on-premises installatie van SQL Server.</span><span class="sxs-lookup"><span data-stu-id="14aa0-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="14aa0-280">Sommige klanten gebruik sharding technieken toospread databasebewerkingen over meerdere databases wanneer Hallo bewerkingen niet binnen Hallo grenzen van een individuele database in Azure SQL Database passen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="14aa0-281">De meeste klanten die sharding technieken in Azure SQL Database gebruiken wordt hun gegevens op één dimensie verdelen over meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="14aa0-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="14aa0-282">Voor deze benadering moet u toounderstand OLTP-toepassingen voeren vaak transacties die betrekking hebben tooonly één rij of tooa kleine groep rijen in het Hallo-schema.</span><span class="sxs-lookup"><span data-stu-id="14aa0-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="14aa0-283">SQL-Database biedt nu een bibliotheek tooassist met sharding.</span><span class="sxs-lookup"><span data-stu-id="14aa0-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="14aa0-284">Zie voor meer informatie [overzicht van clientbibliotheek voor elastische Database](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="14aa0-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="14aa0-285">Bijvoorbeeld, als een database heeft de naam van de klant, volgorde en volgorde details (zoals Hallo traditionele voorbeeld Northwind database die wordt geleverd met SQL Server), u kan deze gegevens splitsen in meerdere databases door een klant Hello groepering verwante volgorde en volgorde details informatie.</span><span class="sxs-lookup"><span data-stu-id="14aa0-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="14aa0-286">U kunt garanderen dat Hallo klantgegevens in een individuele database blijft staan.</span><span class="sxs-lookup"><span data-stu-id="14aa0-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="14aa0-287">Hallo toepassing zou verschillende klanten verdelen over databases en effectief Hallo load verspreid over meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="14aa0-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="14aa0-288">Met sharding, klanten niet alleen kunnen voorkomen dat maximale limiet databasegrootte hello, maar Azure SQL Database ook werkbelastingen die aanzienlijk groter dan Hallo grenzen van de verschillende prestatieniveaus hello, zijn zolang elke afzonderlijke database in past kan verwerken ervan DTU.</span><span class="sxs-lookup"><span data-stu-id="14aa0-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="14aa0-289">Database sharding niet Hallo cumulatieve resourcecapaciteit voor een oplossing te verminderen, is het zeer effectief te ondersteunen van zeer grote oplossingen die worden verdeeld over meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="14aa0-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="14aa0-290">Elke database kunt uitvoeren op een andere prestaties niveau toosupport erg groot is, 'effectieve' databases met hoge benodigde middelen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="14aa0-291">Functionele partities</span><span class="sxs-lookup"><span data-stu-id="14aa0-291">Functional partitioning</span></span>
<span data-ttu-id="14aa0-292">SQL Server-gebruikers combineren vaak veel functies in één database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="14aa0-293">Bijvoorbeeld, als een toepassing logica toomanage inventaris voor een winkel heeft, wellicht dat de database logica die is gekoppeld aan Voorraadbeheer, inkoop, opgeslagen procedures en geïndexeerde of gerealiseerde weergaven die het einde van de maand rapportage beheren.</span><span class="sxs-lookup"><span data-stu-id="14aa0-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="14aa0-294">Op deze manier kunt eenvoudiger tooadminister Hallo-database voor bewerkingen zoals back-up, maar het vereist dat u toosize Hallo hardware toohandle Hallo piekbelasting over alle functies van een toepassing.</span><span class="sxs-lookup"><span data-stu-id="14aa0-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="14aa0-295">Als u een uitbreidbare architectuur in Azure SQL Database gebruikt, is het een goed idee toosplit verschillende functies van een toepassing in andere databases.</span><span class="sxs-lookup"><span data-stu-id="14aa0-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="14aa0-296">Met deze techniek kunnen schaalt elke toepassing onafhankelijk van elkaar.</span><span class="sxs-lookup"><span data-stu-id="14aa0-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="14aa0-297">Als een toepassing veelgebruikte wordt (en belasting op Hallo database toeneemt Hallo) kunt Hallo beheerder onafhankelijke prestatieniveaus voor elke functie in Hallo-toepassing.</span><span class="sxs-lookup"><span data-stu-id="14aa0-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="14aa0-298">Hallo-bereikt met deze architectuur kan een toepassing niet groter zijn dan een machine één product verwerken kan, omdat Hallo load is verdeeld over meerdere machines.</span><span class="sxs-lookup"><span data-stu-id="14aa0-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="14aa0-299">Batch-query 's</span><span class="sxs-lookup"><span data-stu-id="14aa0-299">Batch queries</span></span>
<span data-ttu-id="14aa0-300">Voor toepassingen die toegang gegevens tot met behulp van hoog volume, regelmatig, ad hoc query wordt uitgevoerd, een aanzienlijke hoeveelheid reactietijd is besteed aan netwerkcommunicatie tussen Hallo toepassingslaag of hello Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="14aa0-301">Zelfs wanneer beide Hallo zijn toepassings- en Azure SQL Database in hetzelfde Datacenter, Hallo netwerklatentie tussen twee Hallo kan worden vergroot door een groot aantal gegevenstoegangbewerkingen Hallo.</span><span class="sxs-lookup"><span data-stu-id="14aa0-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="14aa0-302">tooreduce hello netwerk ronde reizen voor Hallo gegevens toegangsbewerkingen, overweeg Hallo optie tooeither batch Hallo ad-hocquery's of toocompile als opgeslagen procedures.</span><span class="sxs-lookup"><span data-stu-id="14aa0-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="14aa0-303">Als u de ad-hocquery's Hallo batch, kunt u meerdere query's verzenden als één grote batch in een enkele reis tooAzure SQL-Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="14aa0-304">Als u ad-hocquery's in een opgeslagen procedure compileert, kunt u hetzelfde resultaat als wanneer u deze batch Hallo kan bereiken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="14aa0-305">Met behulp van een opgeslagen procedure ook kunt u voordeel van het verhogen van de kans op Hallo van Hallo queryplannen in Azure SQL Database in het cachegeheugen zodat u Hallo kunt Hallo opgeslagen procedure opnieuw.</span><span class="sxs-lookup"><span data-stu-id="14aa0-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="14aa0-306">Sommige toepassingen zijn schrijven-intensief.</span><span class="sxs-lookup"><span data-stu-id="14aa0-306">Some applications are write-intensive.</span></span> <span data-ttu-id="14aa0-307">U kunt soms Hallo totale i/o-belasting voor een database verminderen door rekening te houden hoe toobatch samen schrijft.</span><span class="sxs-lookup"><span data-stu-id="14aa0-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="14aa0-308">Dit is vaak net zo eenvoudig als expliciete transacties via in plaats van automatisch doorvoeren transacties in de opgeslagen procedures en ad-hoc batches.</span><span class="sxs-lookup"><span data-stu-id="14aa0-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="14aa0-309">Zie voor een evaluatie van verschillende technieken die u kunt gebruiken, [batchverwerking technieken voor toepassingen in Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="14aa0-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="14aa0-310">Experimenteer met uw eigen werkbelasting toofind Hallo rechts model voor batchverwerking.</span><span class="sxs-lookup"><span data-stu-id="14aa0-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="14aa0-311">Ervoor toounderstand die een model mogelijk enigszins worden verschillende transactionele consistentie gegarandeerd.</span><span class="sxs-lookup"><span data-stu-id="14aa0-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="14aa0-312">Hallo rechts werkbelasting die gebruik van bronnen minimaliseert zoeken vereist Hallo combinatie van de consistentie en prestaties-en nadelen te zoeken.</span><span class="sxs-lookup"><span data-stu-id="14aa0-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="14aa0-313">Toepassingslaag caching</span><span class="sxs-lookup"><span data-stu-id="14aa0-313">Application-tier caching</span></span>
<span data-ttu-id="14aa0-314">Sommige databasetoepassingen hebben lezen zware workloads.</span><span class="sxs-lookup"><span data-stu-id="14aa0-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="14aa0-315">Opslaan in cache lagen Hallo belasting op Hallo database mogelijk te verminderen en mogelijk verkleint Hallo prestaties niveau vereist toosupport een database met behulp van Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="14aa0-316">Met [Azure Redis-Cache](https://azure.microsoft.com/services/cache/), hebt u een werkbelasting lezen zware, vindt u Hallo gegevens eenmaal (of bijvoorbeeld eenmaal per toepassingslaag machine, afhankelijk van hoe deze is geconfigureerd), en die gegevens buiten uw SQL-database op te slaan.</span><span class="sxs-lookup"><span data-stu-id="14aa0-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="14aa0-317">Dit is een manier tooreduce belasting van de database (CPU en i/o-lezen), maar er is een effect op transactionele consistentie omdat Hallo-gegevens lezen uit cache Hallo mogelijk niet gesynchroniseerd met de Hallo-gegevens in Hallo-database.</span><span class="sxs-lookup"><span data-stu-id="14aa0-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="14aa0-318">Hoewel in veel toepassingen een zekere mate van inconsistentie acceptabel is, die geldt niet voor alle werkbelastingen.</span><span class="sxs-lookup"><span data-stu-id="14aa0-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="14aa0-319">U moet eventuele toepassingsvereisten volledig begrijpen voordat u een toepassing lagen in het cachegeheugen strategie implementeert.</span><span class="sxs-lookup"><span data-stu-id="14aa0-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="14aa0-320">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="14aa0-320">Next steps</span></span>
* <span data-ttu-id="14aa0-321">Zie voor meer informatie over Servicelagen [SQL Database-opties en prestaties](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="14aa0-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="14aa0-322">Zie voor meer informatie over elastische pools [wat is er een Azure elastische groep?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="14aa0-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="14aa0-323">Zie voor meer informatie over prestaties en elastische pools [wanneer tooconsider een elastische pool](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="14aa0-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

