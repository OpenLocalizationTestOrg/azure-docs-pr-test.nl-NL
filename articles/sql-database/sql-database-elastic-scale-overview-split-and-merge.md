---
title: aaaMoving gegevens tussen cloud uitgebreide databases | Microsoft Docs
description: Legt uit hoe toomanipulate shards en verplaatsen van gegevens via een zelf gehoste service met behulp van de elastische database API's.
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 629dee06e22609e9b61edf93ba5c38d997132d8c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="5bc57-103">Gegevens verplaatsen tussen uitgeschaalde clouddatabases</span><span class="sxs-lookup"><span data-stu-id="5bc57-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="5bc57-104">Als u een Software als een Service-ontwikkelaar bent en plotseling uw app grote vraag ondergaat, moet u tooaccommodate Hallo groei.</span><span class="sxs-lookup"><span data-stu-id="5bc57-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need tooaccommodate hello growth.</span></span> <span data-ttu-id="5bc57-105">Zodat toevoegen u meer databases (shards).</span><span class="sxs-lookup"><span data-stu-id="5bc57-105">So you add more databases (shards).</span></span> <span data-ttu-id="5bc57-106">Hoe opnieuw u Hallo gegevens toohello nieuwe databases zonder te verstoren Hallo gegevensintegriteit distribueren?</span><span class="sxs-lookup"><span data-stu-id="5bc57-106">How do you redistribute hello data toohello new databases without disrupting hello data integrity?</span></span> <span data-ttu-id="5bc57-107">Gebruik Hallo **gesplitste merge tool** toomove gegevens van beperkte databases toohello nieuwe databases.</span><span class="sxs-lookup"><span data-stu-id="5bc57-107">Use hello **split-merge tool** toomove data from constrained databases toohello new databases.</span></span>  

<span data-ttu-id="5bc57-108">Hallo gesplitste merge tool wordt uitgevoerd als een Azure-web-service.</span><span class="sxs-lookup"><span data-stu-id="5bc57-108">hello split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="5bc57-109">Een beheerder of ontwikkelaar maakt gebruik van Hallo hulpprogramma toomove shardlets (gegevens uit een shard) tussen verschillende databases (shards).</span><span class="sxs-lookup"><span data-stu-id="5bc57-109">An administrator or developer uses hello tool toomove shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="5bc57-110">Hallo-hulpprogramma gebruikt shard kaart management toomaintain Hallo servicedatabase met metagegevens en zorg ervoor dat de consistente toewijzingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-110">hello tool uses shard map management toomaintain hello service metadata database, and ensure consistent mappings.</span></span>

![Overzicht][1]

## <a name="download"></a><span data-ttu-id="5bc57-112">Downloaden</span><span class="sxs-lookup"><span data-stu-id="5bc57-112">Download</span></span>
[<span data-ttu-id="5bc57-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="5bc57-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="5bc57-114">Documentatie</span><span class="sxs-lookup"><span data-stu-id="5bc57-114">Documentation</span></span>
1. [<span data-ttu-id="5bc57-115">Elastische database gesplitste Merge tool-zelfstudie</span><span class="sxs-lookup"><span data-stu-id="5bc57-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="5bc57-116">Gesplitste samenvoegen Beveiligingsconfiguratie</span><span class="sxs-lookup"><span data-stu-id="5bc57-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="5bc57-117">Beveiligingsoverwegingen gesplitste samenvoegen</span><span class="sxs-lookup"><span data-stu-id="5bc57-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="5bc57-118">Shard-toewijzingsbeheer</span><span class="sxs-lookup"><span data-stu-id="5bc57-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="5bc57-119">Migreren van bestaande databases tooscale-out</span><span class="sxs-lookup"><span data-stu-id="5bc57-119">Migrate existing databases tooscale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="5bc57-120">Hulpprogramma's voor elastische database</span><span class="sxs-lookup"><span data-stu-id="5bc57-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="5bc57-121">Elastische Database extra verklarende woordenlijst</span><span class="sxs-lookup"><span data-stu-id="5bc57-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-hello-split-merge-tool"></a><span data-ttu-id="5bc57-122">Waarom Hallo gesplitste merge tool gebruiken?</span><span class="sxs-lookup"><span data-stu-id="5bc57-122">Why use hello split-merge tool?</span></span>
<span data-ttu-id="5bc57-123">**Flexibiliteit**</span><span class="sxs-lookup"><span data-stu-id="5bc57-123">**Flexibility**</span></span>

<span data-ttu-id="5bc57-124">Toepassingen moeten toostretch flexibel buiten Hallo limieten van één Azure SQL DB-database.</span><span class="sxs-lookup"><span data-stu-id="5bc57-124">Applications need toostretch flexibly beyond hello limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="5bc57-125">Hallo hulpprogramma toomove gegevens gebruiken als de benodigde toonew databases terwijl de integriteit te behouden.</span><span class="sxs-lookup"><span data-stu-id="5bc57-125">Use hello tool toomove data as needed toonew databases while retaining integrity.</span></span>

<span data-ttu-id="5bc57-126">**Toogrow splitsen**</span><span class="sxs-lookup"><span data-stu-id="5bc57-126">**Split toogrow**</span></span> 

<span data-ttu-id="5bc57-127">Moet u tooincrease algehele capaciteit toohandle explosief gegroeid.</span><span class="sxs-lookup"><span data-stu-id="5bc57-127">You need tooincrease overall capacity toohandle explosive growth.</span></span> <span data-ttu-id="5bc57-128">Extra capaciteit toodo dus maken door sharding Hallo gegevens en over stapsgewijs meer databases verdeeld totdat de capaciteitsbehoeften is voldaan.</span><span class="sxs-lookup"><span data-stu-id="5bc57-128">toodo so, create additional capacity by sharding hello data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="5bc57-129">Dit is een goed voorbeeld van de splitsen' Hallo-functie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-129">This is a prime example of hello ‘split’ feature.</span></span> 

<span data-ttu-id="5bc57-130">**Tooshrink samenvoegen**</span><span class="sxs-lookup"><span data-stu-id="5bc57-130">**Merge tooshrink**</span></span>

<span data-ttu-id="5bc57-131">Capaciteit moet verkleinen vanwege toohello seizoensgebonden aard van een bedrijf.</span><span class="sxs-lookup"><span data-stu-id="5bc57-131">Capacity needs shrink due toohello seasonal nature of a business.</span></span> <span data-ttu-id="5bc57-132">Hallo hulpprogramma kunt die u toofewer schaaleenheden terugschroeven wanneer bedrijven wordt vertraagd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-132">hello tool lets you scale down toofewer scale units when business slows.</span></span> <span data-ttu-id="5bc57-133">Hallo '' samenvoegfunctie in Hallo elastisch schalen gesplitste samenvoegen Service bevat informatie over deze vereiste.</span><span class="sxs-lookup"><span data-stu-id="5bc57-133">hello ‘merge’ feature in hello Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="5bc57-134">**Hotspots beheren door shardlets verplaatsen**</span><span class="sxs-lookup"><span data-stu-id="5bc57-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="5bc57-135">Met meerdere tenants per database kan Hallo toewijzing van shardlets tooshards toocapacity knelpunten leiden op sommige shards.</span><span class="sxs-lookup"><span data-stu-id="5bc57-135">With multiple tenants per database, hello allocation of shardlets tooshards can lead toocapacity bottlenecks on some shards.</span></span> <span data-ttu-id="5bc57-136">Dit is vereist voor opnieuw toewijzen van shardlets of verplaatsen bezet shardlets toonew of minder gebruikte shards.</span><span class="sxs-lookup"><span data-stu-id="5bc57-136">This requires re-allocating shardlets or moving busy shardlets toonew or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="5bc57-137">Concepten & belangrijke functies</span><span class="sxs-lookup"><span data-stu-id="5bc57-137">Concepts & key features</span></span>
<span data-ttu-id="5bc57-138">**Klant gehoste services**</span><span class="sxs-lookup"><span data-stu-id="5bc57-138">**Customer-hosted services**</span></span>

<span data-ttu-id="5bc57-139">Hallo split-samenvoegen wordt geleverd als een klant gehoste service.</span><span class="sxs-lookup"><span data-stu-id="5bc57-139">hello split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="5bc57-140">U moet implementeren en Hallo service hosten in uw Microsoft Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="5bc57-140">You must deploy and host hello service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="5bc57-141">Hallo-pakket die u van NuGet downloaden bevat een configuratie sjabloon toocomplete met Hallo-informatie voor uw specifieke implementatie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-141">hello package you download from NuGet contains a configuration template toocomplete with hello information for your specific deployment.</span></span> <span data-ttu-id="5bc57-142">Zie Hallo [gesplitste samenvoegen zelfstudie](sql-database-elastic-scale-configure-deploy-split-and-merge.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-142">See hello [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="5bc57-143">Aangezien het Hallo-service wordt uitgevoerd in uw Azure-abonnement, kunt u instellen en configureren van de meeste beveiligingsaspecten van Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="5bc57-143">Since hello service runs in your Azure subscription, you can control and configure most security aspects of hello service.</span></span> <span data-ttu-id="5bc57-144">Hallo standaardsjabloon omvat Hallo opties tooconfigure SSL, op basis van certificaten voor clientverificatie, versleuteling voor de opgeslagen referenties, DoS beveiligen en IP-beperkingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-144">hello default template includes hello options tooconfigure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="5bc57-145">U vindt meer informatie over het Hallo beveiligingsaspecten in Hallo document na [gesplitste samenvoegen Beveiligingsconfiguratie](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="5bc57-145">You can find more information on hello security aspects in hello following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="5bc57-146">Hallo standaard geïmplementeerd met een Webrol en een werknemer de service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-146">hello default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="5bc57-147">Elk Hallo A1-VM-grootte in Azure Cloud Services gebruikt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-147">Each uses hello A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="5bc57-148">Terwijl u kunt deze instellingen niet wijzigen bij het implementeren van Hallo pakket, kunt u ze na een geslaagde implementatie in Hallo met cloudservice (via hello Azure-portal) wijzigen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-148">While you cannot modify these settings when deploying hello package, you could change them after a successful deployment in hello running cloud service, (through hello Azure portal).</span></span> <span data-ttu-id="5bc57-149">Houd er rekening mee dat werkrol Hallo niet meer dan één exemplaar moet worden geconfigureerd voor technische redenen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-149">Note that hello worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="5bc57-150">**Integratie van shard-kaart**</span><span class="sxs-lookup"><span data-stu-id="5bc57-150">**Shard map integration**</span></span>

<span data-ttu-id="5bc57-151">Hallo gesplitste samenvoegen service communiceert met de Hallo shard-toewijzing van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="5bc57-151">hello split-merge service interacts with hello shard map of hello application.</span></span> <span data-ttu-id="5bc57-152">Wanneer u Hallo gesplitste samenvoegen service toosplit of merge bereiken of toomove shardlets tussen shards, houdt Hallo service automatisch Hallo shard-toewijzing van toodate.</span><span class="sxs-lookup"><span data-stu-id="5bc57-152">When using hello split-merge service toosplit or merge ranges or toomove shardlets between shards, hello service automatically keeps hello shard map up toodate.</span></span> <span data-ttu-id="5bc57-153">toodo dus Hallo service toohello shard kaart manager-database van de toepassing hello verbinding maakt en onderhoudt bereiken en toewijzingen als voortgang merge-gesplitste/move-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-153">toodo so, hello service connects toohello shard map manager database of hello application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="5bc57-154">Dit zorgt ervoor dat Hallo shard-toewijzing altijd geeft een actuele weergave wanneer gesplitste samenvoegbewerkingen gaat op.</span><span class="sxs-lookup"><span data-stu-id="5bc57-154">This ensures that hello shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="5bc57-155">Splitsen, zijn samenvoegen en shardlet movement-bewerkingen door het verplaatsen van een batch shardlets van Hallo bron shard toohello doel shard geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from hello source shard toohello target shard.</span></span> <span data-ttu-id="5bc57-156">Tijdens het Hallo shardlet verkeer bewerking Hallo shardlets onderwerp toohello huidige batch zijn gemarkeerd als offline in Hallo shard-toewijzing en zijn niet beschikbaar voor gegevensafhankelijke routering verbindingen met het Hallo **OpenConnectionForKey** API.</span><span class="sxs-lookup"><span data-stu-id="5bc57-156">During hello shardlet movement operation hello shardlets subject toohello current batch are marked as offline in hello shard map and are unavailable for data-dependent routing connections using hello **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="5bc57-157">**Consistente shardlet-verbindingen**</span><span class="sxs-lookup"><span data-stu-id="5bc57-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="5bc57-158">Als verplaatsing van gegevens voor een nieuwe batch shardlets wordt gestart, zijn alle shard-toewijzing opgegeven gegevensafhankelijke routering verbindingen toohello shard opslag Hallo shardlet gedode en volgende verbindingen uit Hallo shard-toewijzing API's toohello deze shardlets zijn geblokkeerd terwijl Hallo gegevensverplaatsing wordt uitgevoerd in de volgorde tooavoid inconsistenties.</span><span class="sxs-lookup"><span data-stu-id="5bc57-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections toohello shard storing hello shardlet are killed and subsequent connections from hello shard map APIs toohello these shardlets are blocked while hello data movement is in progress in order tooavoid inconsistencies.</span></span> <span data-ttu-id="5bc57-159">Verbindingen tooother shardlets op Hallo dezelfde shard wordt ook ophalen afgesloten, maar opnieuw slaagt onmiddellijk taak opnieuw wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-159">Connections tooother shardlets on hello same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="5bc57-160">Zodra het Hallo-batch is verplaatst, Hallo shardlets online opnieuw voor Hallo doel shard zijn gemarkeerd en Hallo brongegevens uit Hallo bron shard is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-160">Once hello batch is moved, hello shardlets are marked online again for hello target shard and hello source data is removed from hello source shard.</span></span> <span data-ttu-id="5bc57-161">Hallo-service gaat door deze stappen voor elke batch totdat alle shardlets zijn verplaatst.</span><span class="sxs-lookup"><span data-stu-id="5bc57-161">hello service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="5bc57-162">Dit leidt tooseveral kill-bewerkingen tijdens Hallo Hallo voltooid splitsen/samenvoegen/move-bewerking.</span><span class="sxs-lookup"><span data-stu-id="5bc57-162">This will lead tooseveral connection kill operations during hello course of hello complete split/merge/move operation.</span></span>  

<span data-ttu-id="5bc57-163">**Shardlet beschikbaarheid van beheren**</span><span class="sxs-lookup"><span data-stu-id="5bc57-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="5bc57-164">Hallo-bereik van onbeschikbaarheid tooone batch shardlets beperken Hallo verbinding als beëindigt, kan de huidige batch toohello van shardlets zoals hierboven wordt beschreven op een tijdstip worden beperkt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-164">Limiting hello connection killing toohello current batch of shardlets as discussed above restricts hello scope of unavailability tooone batch of shardlets at a time.</span></span> <span data-ttu-id="5bc57-165">Dit heeft de voorkeur boven een benadering waarbij Hallo voltooid shard blijft offline voor alle bijbehorende shardlets in Hallo loop van een gesplitste of merge-bewerking.</span><span class="sxs-lookup"><span data-stu-id="5bc57-165">This is preferred over an approach where hello complete shard would remain offline for all its shardlets during hello course of a split or merge operation.</span></span> <span data-ttu-id="5bc57-166">Hallo-grootte van een batch, gedefinieerd als het aantal unieke shardlets toomove Hallo tegelijk, is een configuratieparameter.</span><span class="sxs-lookup"><span data-stu-id="5bc57-166">hello size of a batch, defined as hello number of distinct shardlets toomove at a time, is a configuration parameter.</span></span> <span data-ttu-id="5bc57-167">Het kan worden gedefinieerd voor elke bewerking samenvoegen en splitsen afhankelijk van de beschikbaarheid en prestaties behoeften van de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="5bc57-167">It can be defined for each split and merge operation depending on hello application’s availability and performance needs.</span></span> <span data-ttu-id="5bc57-168">Houd er rekening mee dat Hallo-bereik dat wordt vergrendeld in Hallo shard-toewijzing kan niet groter zijn dan Hallo batchgrootte opgegeven.</span><span class="sxs-lookup"><span data-stu-id="5bc57-168">Note that hello range that is being locked in hello shard map may be larger than hello batch size specified.</span></span> <span data-ttu-id="5bc57-169">Dit is omdat het Hallo-service hervat Hallo bereik grootte zodat het werkelijke aantal sharding sleutelwaarden in Hallo gegevens Hallo ongeveer Hallo batchgrootte overeenkomt met.</span><span class="sxs-lookup"><span data-stu-id="5bc57-169">This is because hello service picks hello range size such that hello actual number of sharding key values in hello data approximately matches hello batch size.</span></span> <span data-ttu-id="5bc57-170">Dit is belangrijk tooremember met name voor zeer ingevuld sharding-sleutels.</span><span class="sxs-lookup"><span data-stu-id="5bc57-170">This is important tooremember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="5bc57-171">**Metagegevensopslag**</span><span class="sxs-lookup"><span data-stu-id="5bc57-171">**Metadata storage**</span></span>

<span data-ttu-id="5bc57-172">Hallo gesplitste samenvoegen service gebruikt een database toomaintain de status en de tookeep logboeken tijdens de verwerking van aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-172">hello split-merge service uses a database toomaintain its status and tookeep logs during request processing.</span></span> <span data-ttu-id="5bc57-173">Hallo gebruiker deze database wordt gemaakt in het abonnement en voorziet Hallo-verbindingsreeks in het configuratiebestand Hallo voor Hallo service-implementatie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-173">hello user creates this database in their subscription and provides hello connection string for it in hello configuration file for hello service deployment.</span></span> <span data-ttu-id="5bc57-174">Beheerders van de organisatie van de gebruiker Hallo kunnen ook verbinding maken toothis database tooreview aanvraag voortgang en tooinvestigate gedetailleerde informatie over mogelijke fouten.</span><span class="sxs-lookup"><span data-stu-id="5bc57-174">Administrators from hello user’s organization can also connect toothis database tooreview request progress and tooinvestigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="5bc57-175">**Sharding-awareness**</span><span class="sxs-lookup"><span data-stu-id="5bc57-175">**Sharding-awareness**</span></span>

<span data-ttu-id="5bc57-176">Hallo gesplitste samenvoegen service onderscheidt tussen (1) de shard-tabellen, (2) verwijzingsdimensies en (3) de normale tabellen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-176">hello split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="5bc57-177">Hallo-semantiek van een merge-gesplitste/move-bewerking afhankelijk type Hallo Hallo tabel die wordt gebruikt en wordt als volgt gedefinieerd:</span><span class="sxs-lookup"><span data-stu-id="5bc57-177">hello semantics of a split/merge/move operation depend on hello type of hello table used and are defined as follows:</span></span> 

* <span data-ttu-id="5bc57-178">**Shard tabellen**: gesplitste, samenvoegen en migratiebewerkingen shardlets van bron tootarget shard verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-178">**Sharded tables**: Split, merge, and move operations move shardlets from source tootarget shard.</span></span> <span data-ttu-id="5bc57-179">Na voltooiing van Hallo algemene vragen die shardlets op Hallo-bron niet langer aanwezig zijn.</span><span class="sxs-lookup"><span data-stu-id="5bc57-179">After successful completion of hello overall request, those shardlets are no longer present on hello source.</span></span> <span data-ttu-id="5bc57-180">Houd er rekening mee die Hallo doeltabellen tooexist op Hallo doel shard nodig hebt en mag geen gegevens in Hallo doel bereik eerdere tooprocessing van Hallo-bewerking.</span><span class="sxs-lookup"><span data-stu-id="5bc57-180">Note that hello target tables need tooexist on hello target shard and must not contain data in hello target range prior tooprocessing of hello operation.</span></span> 
* <span data-ttu-id="5bc57-181">**Verwijzen naar tabellen**: voor verwijzingstabellen, splitsing hello, samenvoegen en bewerkingen Hallo gegevens kopiëren van Hallo bron toohello doel shard verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-181">**Reference tables**: For reference tables, hello split, merge and move operations copy hello data from hello source toohello target shard.</span></span> <span data-ttu-id="5bc57-182">Let echter op dat er geen wijzigingen doorgevoerd op Hallo doel shard voor een bepaalde tabel als een rij al aanwezig in deze tabel op het Hallo-doel is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-182">Note, however, that no changes occur on hello target shard for a given table if any row is already present in this table on hello target.</span></span> <span data-ttu-id="5bc57-183">Hallo tabel heeft toobe leeg voor een verwijzing naar tabel kopiëren bewerking tooget verwerkt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-183">hello table has toobe empty for any reference table copy operation tooget processed.</span></span>
* <span data-ttu-id="5bc57-184">**Andere tabellen**: andere tabellen kunnen worden gebruikt op het Hallo-bron- of Hallo-doel van een bewerking voor samenvoegen en splitsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-184">**Other Tables**: Other tables can be present on either hello source or hello target of a split and merge operation.</span></span> <span data-ttu-id="5bc57-185">Hallo gesplitste samenvoegen service negeert deze tabellen voor gegevensverplaatsing of te kopiëren.</span><span class="sxs-lookup"><span data-stu-id="5bc57-185">hello split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="5bc57-186">Let echter op dat ze deze bewerkingen in het geval van beperkingen kunnen verstoren.</span><span class="sxs-lookup"><span data-stu-id="5bc57-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="5bc57-187">Hallo-informatie van verwijzing versus shard tabellen wordt verstrekt door Hallo **SchemaInfo** API's op Hallo shard-kaart.</span><span class="sxs-lookup"><span data-stu-id="5bc57-187">hello information on reference vs. sharded tables is provided by hello **SchemaInfo** APIs on hello shard map.</span></span> <span data-ttu-id="5bc57-188">Hallo volgende voorbeeld illustreert Hallo gebruik van deze API's op een gegeven shard kaart manager object smm:</span><span class="sxs-lookup"><span data-stu-id="5bc57-188">hello following example illustrates hello use of these APIs on a given shard map manager object smm:</span></span> 

    // Create hello schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="5bc57-189">Hallo tabellen 'regio' en 'land' worden gedefinieerd als verwijzingstabellen en met gesplitste of merge/verplaatsen bewerkingen moeten worden gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-189">hello tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="5bc57-190">'klant' en 'orders' worden op zijn beurt gedefinieerd als shard tabellen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="5bc57-191">C_CUSTKEY en O_CUSTKEY fungeren als Hallo sharding-sleutel.</span><span class="sxs-lookup"><span data-stu-id="5bc57-191">C_CUSTKEY and O_CUSTKEY serve as hello sharding key.</span></span> 

<span data-ttu-id="5bc57-192">**Referentiële integriteit**</span><span class="sxs-lookup"><span data-stu-id="5bc57-192">**Referential Integrity**</span></span>

<span data-ttu-id="5bc57-193">Hallo gesplitste samenvoegen service analyseert afhankelijkheden tussen de tabellen en sleutel-primaire refererende sleutels toostage Hallo bewerkingen voor het verplaatsen van verwijzingsdimensies en shardlets gebruikt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-193">hello split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships toostage hello operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="5bc57-194">In het algemeen verwijzingsdimensies gekopieerd eerst in volgorde van de afhankelijkheid, worden in volgorde van hun afhankelijkheden in elke batch shardlets gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="5bc57-195">Dit is noodzakelijk om FK PK beperkingen op Hallo doel shard worden gehonoreerd Hallo nieuwe gegevens ontvangt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-195">This is necessary so that FK-PK constraints on hello target shard are honored as hello new data arrives.</span></span> 

<span data-ttu-id="5bc57-196">**Consistentie van shard-toewijzing en de uiteindelijke voltooiing**</span><span class="sxs-lookup"><span data-stu-id="5bc57-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="5bc57-197">Hallo aanwezigheid van fouten, Hallo gesplitste samenvoegen service operations hervat na een storing en is erop gericht toocomplete aanwezig in voortgang aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-197">In hello presence of failures, hello split-merge service resumes operations after any outage and aims toocomplete any in progress requests.</span></span> <span data-ttu-id="5bc57-198">Echter mogelijk zijn er onherstelbare situaties, bijvoorbeeld wanneer Hallo doel shard zoekraakt of wordt geknoeid niet meer worden hersteld.</span><span class="sxs-lookup"><span data-stu-id="5bc57-198">However, there may be unrecoverable situations, e.g., when hello target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="5bc57-199">In deze omstandigheden kunnen sommige shardlets die moesten toobe verplaatst op Hallo bron shard tooreside blijven.</span><span class="sxs-lookup"><span data-stu-id="5bc57-199">Under those circumstances, some shardlets that were supposed toobe moved may continue tooreside on hello source shard.</span></span> <span data-ttu-id="5bc57-200">Hallo service zorgt ervoor dat shardlet toewijzingen alleen bijgewerkt worden nadat Hallo gegevens die nodig zijn met succes gekopieerde toohello doel zijn.</span><span class="sxs-lookup"><span data-stu-id="5bc57-200">hello service ensures that shardlet mappings are only updated after hello necessary data has been successfully copied toohello target.</span></span> <span data-ttu-id="5bc57-201">Shardlets zijn alleen op Hallo bron verwijderd nadat alle hun gegevens zijn toohello doel gekopieerd en bijbehorende Hallo-toewijzingen zijn bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-201">Shardlets are only deleted on hello source once all their data has been copied toohello target and hello corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="5bc57-202">Hallo verwijderingsbewerking gebeurt op Hallo achtergrond terwijl Hallo bereik op Hallo doel shard al online is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-202">hello deletion operation happens in hello background while hello range is already online on hello target shard.</span></span> <span data-ttu-id="5bc57-203">Hallo gesplitste samenvoegen service zorgt altijd of Hallo-toewijzingen die zijn opgeslagen in de shard-toewijzing Hallo juist is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-203">hello split-merge service always ensures correctness of hello mappings stored in hello shard map.</span></span>

## <a name="hello-split-merge-user-interface"></a><span data-ttu-id="5bc57-204">Hallo gesplitste merge-gebruikersinterface</span><span class="sxs-lookup"><span data-stu-id="5bc57-204">hello split-merge user interface</span></span>
<span data-ttu-id="5bc57-205">Hallo gesplitste samenvoegen servicepakket omvat een werkrol en een Webrol.</span><span class="sxs-lookup"><span data-stu-id="5bc57-205">hello split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="5bc57-206">Hallo-Webrol is gebruikte toosubmit gesplitste merge-aanvragen op interactieve wijze.</span><span class="sxs-lookup"><span data-stu-id="5bc57-206">hello web role is used toosubmit split-merge requests in an interactive way.</span></span> <span data-ttu-id="5bc57-207">onderdelen van de gebruikersinterface Hallo Hallo zijn als volgt:</span><span class="sxs-lookup"><span data-stu-id="5bc57-207">hello main components of hello user interface are as follows:</span></span>

* <span data-ttu-id="5bc57-208">Type voor bewerking: type Hallo-bewerking is een keuzerondje die Hallo soort bewerking uitgevoerd door het Hallo-service voor deze aanvraag bepaalt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-208">Operation Type: hello operation type is a radio button that controls hello kind of operation performed by hello service for this request.</span></span> <span data-ttu-id="5bc57-209">U kunt kiezen tussen Hallo gesplitste, samenvoegen en scenario's te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-209">You can choose between hello split, merge and move scenarios.</span></span> <span data-ttu-id="5bc57-210">U kunt ook een eerder ingediende bewerking annuleren.</span><span class="sxs-lookup"><span data-stu-id="5bc57-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="5bc57-211">U kunt gesplitste gebruiken, samenvoegen en aanvragen voor de shard-kaarten bereik verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="5bc57-212">Lijst shard wijst alleen ondersteuning migratiebewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="5bc57-213">Shard-toewijzing: Hallo volgende sectie van de aanvraag parameters behandeld informatie over Hallo shard-toewijzing en het Hallo-database die als host fungeert voor de shard-kaart.</span><span class="sxs-lookup"><span data-stu-id="5bc57-213">Shard Map: hello next section of request parameters cover information about hello shard map and hello database hosting your shard map.</span></span> <span data-ttu-id="5bc57-214">In het bijzonder, moet u tooprovide Hallo-naam van hello Azure SQL Database-server en database Hallo shardmap die als host fungeert, referenties tooconnect toohello shard toewijzen van de database en ten slotte Hallo naam van Hallo shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="5bc57-214">In particular, you need tooprovide hello name of hello Azure SQL Database server and database hosting hello shardmap, credentials tooconnect toohello shard map database, and finally hello name of hello shard map.</span></span> <span data-ttu-id="5bc57-215">Op dit moment accepteert Hallo bewerking alleen een enkele set referenties.</span><span class="sxs-lookup"><span data-stu-id="5bc57-215">Currently, hello operation only accepts a single set of credentials.</span></span> <span data-ttu-id="5bc57-216">Deze referenties moeten voldoende machtigingen toohave tooperform toohello shard-kaart, evenals toohello gebruikersgegevens op Hallo shards wordt gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-216">These credentials need toohave sufficient permissions tooperform changes toohello shard map as well as toohello user data on hello shards.</span></span>
* <span data-ttu-id="5bc57-217">Bron-bereik (splitsen en samenvoegen): een bewerking voor samenvoegen en splitsen een bereik met behulp van de lage en hoge sleutel verwerkt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="5bc57-218">een bewerking met een niet-gebonden hoge sleutelwaarde: selectievakje toospecify selectievakje 'hoge sleutel is max' Hallo en Hallo hoge sleutel veld leeg laat.</span><span class="sxs-lookup"><span data-stu-id="5bc57-218">toospecify an operation with an unbounded high key value, check hello “High key is max” check box and leave hello high key field empty.</span></span> <span data-ttu-id="5bc57-219">Hallo bereik sleutelwaarden die u opgeeft doen niet nodig tooprecisely overeen met een toewijzing en de grenzen in de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="5bc57-219">hello range key values that you specify do not need tooprecisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="5bc57-220">Als u geen geen begrenzingen bereik helemaal opgeeft wordt Hallo-service afgeleid Hallo dichtstbijzijnde bereik voor u automatisch.</span><span class="sxs-lookup"><span data-stu-id="5bc57-220">If you do not specify any range boundaries at all hello service will infer hello closest range for you automatically.</span></span> <span data-ttu-id="5bc57-221">U kunt Hallo GetMappings.ps1 PowerShell script tooretrieve Hallo huidige toewijzingen gebruiken in een bepaalde shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="5bc57-221">You can use hello GetMappings.ps1 PowerShell script tooretrieve hello current mappings in a given shard map.</span></span>
* <span data-ttu-id="5bc57-222">Gesplitste bron gedrag (splitsen): Hallo punt toosplit Hallo bronbereik voor split-bewerkingen te definiëren.</span><span class="sxs-lookup"><span data-stu-id="5bc57-222">Split Source Behavior (split): For split operations, define hello point toosplit hello source range.</span></span> <span data-ttu-id="5bc57-223">U doen dit door op te geven Hallo sharding sleutel waar u Hallo toooccur splitsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-223">You do this by providing hello sharding key where you want hello split toooccur.</span></span> <span data-ttu-id="5bc57-224">Hallo-keuzerondje gebruiken of u wilt dat Hallo onderste gedeelte van Hallo bereik (met uitzondering van Hallo sleutel splitsen) toomove of of u Hallo bovenste deel toomove (inclusief Hallo split-sleutel) wilt opgeven.</span><span class="sxs-lookup"><span data-stu-id="5bc57-224">Use hello radio button specify whether you want hello lower part of hello range (excluding hello split key) toomove, or whether you want hello upper part toomove (including hello split key).</span></span>
* <span data-ttu-id="5bc57-225">Bron Shardlet (verplaatsen): verplaatsen operations verschillen van gesplitste of samenvoegen van bewerkingen zoals een bereik toodescribe Hallo-bron is niet vereist.</span><span class="sxs-lookup"><span data-stu-id="5bc57-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range toodescribe hello source.</span></span> <span data-ttu-id="5bc57-226">Een bron voor het verplaatsen wordt simpelweg aangeduid met Hallo sharding-sleutelwaarde dat u van plan toomove bent.</span><span class="sxs-lookup"><span data-stu-id="5bc57-226">A source for move is simply identified by hello sharding key value that you plan toomove.</span></span>
* <span data-ttu-id="5bc57-227">Shard (splitsen) als doel: nadat u de Hallo informatie hebt opgegeven op de bron van de splitsbewerking Hallo, moet u toodefine waar u Hallo gegevens toobe tooby verstrekken hello Azure SQL Db-server en de databasenaam voor Hallo doel gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-227">Target Shard (split): Once you have provided hello information on hello source of your split operation, you need toodefine where you want hello data toobe copied tooby providing hello Azure SQL Db server and database name for hello target.</span></span>
* <span data-ttu-id="5bc57-228">Doelbereik (samenvoegen): samenvoegbewerkingen shardlets tooan bestaande shard verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-228">Target Range (merge): Merge operations move shardlets tooan existing shard.</span></span> <span data-ttu-id="5bc57-229">U identificeren Hallo bestaande shard door te geven Hallo bereik grenzen van de bestaande Hallo-bereik dat u wilt dat toomerge met.</span><span class="sxs-lookup"><span data-stu-id="5bc57-229">You identify hello existing shard by providing hello range boundaries of hello existing range that you want toomerge with.</span></span>
* <span data-ttu-id="5bc57-230">Batchgrootte: Hallo batch grootte besturingselementen Hallo aantal shardlets die offline gaan op een moment tijdens Hallo gegevensverplaatsing.</span><span class="sxs-lookup"><span data-stu-id="5bc57-230">Batch Size: hello batch size controls hello number of shardlets that will go offline at a time during hello data movement.</span></span> <span data-ttu-id="5bc57-231">Dit is een integerwaarde waar u lagere waarden kunt gebruiken wanneer u gevoelige toolong perioden met uitvaltijd voor shardlets zijn.</span><span class="sxs-lookup"><span data-stu-id="5bc57-231">This is an integer value where you can use smaller values when you are sensitive toolong periods of downtime for shardlets.</span></span> <span data-ttu-id="5bc57-232">Hogere waarden wordt verhoogd Hallo-tijd die een bepaalde shardlet offline maar de prestaties mogelijk verbeterd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-232">Larger values will increase hello time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="5bc57-233">Bewerking-Id (annuleren): Als u er een bewerking die niet meer nodig hebt, kunt u Hallo bewerking annuleren door op te geven van de bewerkings-ID in dit veld.</span><span class="sxs-lookup"><span data-stu-id="5bc57-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel hello operation by providing its operation ID in this field.</span></span> <span data-ttu-id="5bc57-234">U kunt Hallo bewerkings-ID ophalen uit tabel Hallo aanvraag-status (Zie de sectie 8.1) of van Hallo-uitvoer in webbrowser Hallo waar u Hallo aanvraag ingediend.</span><span class="sxs-lookup"><span data-stu-id="5bc57-234">You can retrieve hello operation ID from hello request status table (see Section 8.1) or from hello output in hello web browser where you submitted hello request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="5bc57-235">Vereisten en beperkingen</span><span class="sxs-lookup"><span data-stu-id="5bc57-235">Requirements and Limitations</span></span>
<span data-ttu-id="5bc57-236">de huidige implementatie Hallo van Hallo gesplitste samenvoegen service is onderwerp toohello volgen de vereisten en beperkingen:</span><span class="sxs-lookup"><span data-stu-id="5bc57-236">hello current implementation of hello split-merge service is subject toohello following requirements and limitations:</span></span> 

* <span data-ttu-id="5bc57-237">Hallo shards moeten tooexist en zijn geregistreerd in de shard-toewijzing Hallo voordat een gesplitste merge-bewerking op deze shards kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-237">hello shards need tooexist and be registered in hello shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="5bc57-238">Hallo-service maakt geen tabellen of andere databaseobjecten automatisch als onderdeel van bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-238">hello service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="5bc57-239">Dit betekent dat Hallo-schema voor alle shard-tabellen en verwijzen naar tabellen moeten tooexist op Hallo doel shard voorafgaande tooany splitsen/samenvoegen/move-bewerking.</span><span class="sxs-lookup"><span data-stu-id="5bc57-239">This means that hello schema for all sharded tables and reference tables need tooexist on hello target shard prior tooany split/merge/move operation.</span></span> <span data-ttu-id="5bc57-240">Shard tabellen zijn in het bijzonder vereist toobe in Hallo bereik waar de nieuwe shardlets toobe toegevoegd door een merge-gesplitste/move-bewerking zijn leeg.</span><span class="sxs-lookup"><span data-stu-id="5bc57-240">Sharded tables in particular are required toobe empty in hello range where new shardlets are toobe added by a split/merge/move operation.</span></span> <span data-ttu-id="5bc57-241">Anders mislukt de bewerking Hallo Hallo eerste consistentiecontrole op Hallo doel shard.</span><span class="sxs-lookup"><span data-stu-id="5bc57-241">Otherwise, hello operation will fail hello initial consistency check on hello target shard.</span></span> <span data-ttu-id="5bc57-242">Opmerking dat referentiegegevens alleen worden gekopieerd als Hallo verwijzingstabel leeg is en of er geen consistentiecontrole garandeert ook met inachtneming van tooother gelijktijdige schrijfbewerkingen op Hallo verwijzingstabellen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-242">Also note that reference data is only copied if hello reference table is empty and that there are no consistency guarantees with regard tooother concurrent write operations on hello reference tables.</span></span> <span data-ttu-id="5bc57-243">We raden u dit: wanneer gesplitste/merge-bewerkingen wordt uitgevoerd, geen schrijfbewerkingen wijzigingen aanbrengen toohello verwijzingsdimensies.</span><span class="sxs-lookup"><span data-stu-id="5bc57-243">We recommend this: when running split/merge operations, no other write operations make changes toohello reference tables.</span></span>
* <span data-ttu-id="5bc57-244">Hallo-service is afhankelijk van de identiteit van de rij is ingesteld door een unieke index of de sleutel die Hallo sharding key tooimprove prestaties en betrouwbaarheid voor grote shardlets bevat.</span><span class="sxs-lookup"><span data-stu-id="5bc57-244">hello service relies on row identity established by a unique index or key that includes hello sharding key tooimprove performance and reliability for large shardlets.</span></span> <span data-ttu-id="5bc57-245">Dit maakt het mogelijk Hallo service toomove gegevens op een zelfs weer specifieker dan alleen Hallo sharding sleutelwaarde.</span><span class="sxs-lookup"><span data-stu-id="5bc57-245">This allows hello service toomove data at an even finer granularity than just hello sharding key value.</span></span> <span data-ttu-id="5bc57-246">Dit helpt tooreduce Hallo maximale hoeveelheid logboekruimte en vergrendelingen die vereist tijdens het Hallo-bewerking zijn.</span><span class="sxs-lookup"><span data-stu-id="5bc57-246">This helps tooreduce hello maximum amount of log space and locks that are required during hello operation.</span></span> <span data-ttu-id="5bc57-247">Houd rekening met een unieke index of een primaire sleutel, met inbegrip van Hallo sharding-sleutel op een bepaalde tabel als u wilt dat toouse die tabel maken met merge-gesplitste/move-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-247">Consider creating a unique index or a primary key including hello sharding key on a given table if you want toouse that table with split/merge/move requests.</span></span> <span data-ttu-id="5bc57-248">Uit prestatieoverwegingen moet Hallo sharding sleutel Hallo toonaangevende kolom in Hallo sleutel of Hallo index.</span><span class="sxs-lookup"><span data-stu-id="5bc57-248">For performance reasons, hello sharding key should be hello leading column in hello key or hello index.</span></span>
* <span data-ttu-id="5bc57-249">In de loop van de Hallo van verwerking van aanvragen, kan sommige gegevens shardlet aanwezig op Hallo bron en doel-shard Hallo zijn.</span><span class="sxs-lookup"><span data-stu-id="5bc57-249">During hello course of request processing, some shardlet data may be present both on hello source and hello target shard.</span></span> <span data-ttu-id="5bc57-250">Dit is nodig tooprotect tegen fouten tijdens het Hallo shardlet verkeer.</span><span class="sxs-lookup"><span data-stu-id="5bc57-250">This is necessary tooprotect against failures during hello shardlet movement.</span></span> <span data-ttu-id="5bc57-251">Hallo integratie van split-samenvoegen met Hallo shard-toewijzing zorgt ervoor dat de verbindingen via Hallo gegevens afhankelijke routering API's met Hallo **OpenConnectionForKey** methode op Hallo shard-toewijzing een inconsistente tussenliggende statussen niet ziet.</span><span class="sxs-lookup"><span data-stu-id="5bc57-251">hello integration of split-merge with hello shard map ensures that connections through hello data dependent routing APIs using hello **OpenConnectionForKey** method on hello shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="5bc57-252">Echter, wanneer verbindende toohello bron- of Hallo gericht shards zonder Hallo **OpenConnectionForKey** methode inconsistente tussenliggende statussen mogelijk zichtbaar wanneer merge-gesplitste/move-aanvragen op gaat.</span><span class="sxs-lookup"><span data-stu-id="5bc57-252">However, when connecting toohello source or hello target shards without using hello **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="5bc57-253">Deze verbindingen gedeeltelijke of dubbele resultaten, afhankelijk van de timing van Hallo of Hallo shard onderliggende hello verbinding kunnen worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="5bc57-253">These connections may show partial or duplicate results depending on hello timing or hello shard underlying hello connection.</span></span> <span data-ttu-id="5bc57-254">Deze beperking bevat momenteel Hallo-verbindingen gemaakt door de elastische Schaalfunctionaliteit van meerdere Shard-query.</span><span class="sxs-lookup"><span data-stu-id="5bc57-254">This limitation currently includes hello connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="5bc57-255">Hallo metagegevensdatabase voor Hallo gesplitste samenvoegen service moet niet worden gedeeld tussen verschillende rollen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-255">hello metadata database for hello split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="5bc57-256">Bijvoorbeeld, een functie Hallo gesplitste merge-service wordt uitgevoerd in faseringsdatabase behoeften toopoint tooa andere metagegevens dan Hallo productie-rol.</span><span class="sxs-lookup"><span data-stu-id="5bc57-256">For example, a role of hello split-merge service running in staging needs toopoint tooa different metadata database than hello production role.</span></span>

## <a name="billing"></a><span data-ttu-id="5bc57-257">Facturering</span><span class="sxs-lookup"><span data-stu-id="5bc57-257">Billing</span></span>
<span data-ttu-id="5bc57-258">Hallo gesplitste merge-service wordt uitgevoerd als een cloudservice in uw Microsoft Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="5bc57-258">hello split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="5bc57-259">Daarom toepassing kosten voor cloudservices tooyour exemplaar van Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="5bc57-259">Therefore charges for cloud services apply tooyour instance of hello service.</span></span> <span data-ttu-id="5bc57-260">Tenzij u vaak split of merge/verplaatsen bewerkingen uitvoert, wordt u aangeraden verwijderen van uw cloudservice gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="5bc57-261">Die kosten voor het werken met opgeslagen of geïmplementeerd cloud service-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="5bc57-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="5bc57-262">U kunt opnieuw implementeren en uw gemakkelijk uitvoerbare configuratie starten wanneer u tooperform moet splitsen of samenvoegen van bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-262">You can re-deploy and start your readily runnable configuration whenever you need tooperform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="5bc57-263">Bewaking</span><span class="sxs-lookup"><span data-stu-id="5bc57-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="5bc57-264">Status tabellen</span><span class="sxs-lookup"><span data-stu-id="5bc57-264">Status tables</span></span>
<span data-ttu-id="5bc57-265">Hallo gesplitste samenvoegen Service biedt Hallo **RequestStatus** tabel in Hallo metagegevensdatabase archief voor de bewaking van voltooide en lopende aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-265">hello split-merge Service provides hello **RequestStatus** table in hello metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="5bc57-266">Hallo tabel bevat een rij voor elke aanvraag gesplitste samenvoegen dat verzonden toothis exemplaar van Hallo gesplitste samenvoegen service is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-266">hello table lists a row for each split-merge request that has been submitted toothis instance of hello split-merge service.</span></span> <span data-ttu-id="5bc57-267">Dit biedt de volgende informatie voor elke aanvraag Hallo:</span><span class="sxs-lookup"><span data-stu-id="5bc57-267">It gives hello following information for each request:</span></span>

* <span data-ttu-id="5bc57-268">**Tijdstempel**: Hallo tijd en datum waarop het Hallo-aanvraag is gestart.</span><span class="sxs-lookup"><span data-stu-id="5bc57-268">**Timestamp**: hello time and date when hello request was started.</span></span>
* <span data-ttu-id="5bc57-269">**OperationId**: een GUID die een unieke identificatie van Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="5bc57-269">**OperationId**: A GUID that uniquely identifies hello request.</span></span> <span data-ttu-id="5bc57-270">Deze aanvraag kan ook worden voor gebruikte toocancel Hallo bewerking terwijl deze nog steeds uitgevoerd wordt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-270">This request can also be used toocancel hello operation while it is still ongoing.</span></span>
* <span data-ttu-id="5bc57-271">**Status**: huidige status van aanvraag Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="5bc57-271">**Status**: hello current state of hello request.</span></span> <span data-ttu-id="5bc57-272">Voor actieve aanvragen, ook geeft het Hallo huidige fase in welke Hallo-aanvraag is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-272">For ongoing requests, it also lists hello current phase in which hello request is.</span></span>
* <span data-ttu-id="5bc57-273">**CancelRequest**: een vlag die aangeeft of Hallo-aanvraag is geannuleerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-273">**CancelRequest**: A flag that indicates whether hello request has been cancelled.</span></span>
* <span data-ttu-id="5bc57-274">**Voortgang**: een percentage van de schatting van voor Hallo-bewerking is voltooid.</span><span class="sxs-lookup"><span data-stu-id="5bc57-274">**Progress**: A percentage estimate of completion for hello operation.</span></span> <span data-ttu-id="5bc57-275">Een waarde van 50 geeft aan dat het Hallo-bewerking ongeveer 50% voltooid is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-275">A value of 50 indicates that hello operation is approximately 50% complete.</span></span>
* <span data-ttu-id="5bc57-276">**Details**: een XML-waarde die een gedetailleerdere voortgangsrapport biedt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="5bc57-277">Hallo voortgangsrapport wordt regelmatig bijgewerkt als sets van rijen uit de bron tootarget worden gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="5bc57-277">hello progress report is periodically updated as sets of rows are copied from source tootarget.</span></span> <span data-ttu-id="5bc57-278">In geval van fouten en uitzonderingen tevens in deze kolom meer gedetailleerde informatie over Hallo-fout.</span><span class="sxs-lookup"><span data-stu-id="5bc57-278">In case of failures or exceptions, this column also includes more detailed information about hello failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="5bc57-279">Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="5bc57-279">Azure Diagnostics</span></span>
<span data-ttu-id="5bc57-280">Hallo gesplitste samenvoegen service gebruikt Azure Diagnostics op basis van de Azure SDK 2.5 voor controle en diagnostische gegevens.</span><span class="sxs-lookup"><span data-stu-id="5bc57-280">hello split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="5bc57-281">Beheren van configuratie van diagnostische Hallo zoals hier wordt beschreven: [diagnostische gegevens inschakelen in Azure Cloud Services en virtuele Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="5bc57-281">You control hello diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="5bc57-282">Hallo downloadpakket bevat twee configuraties voor diagnostische gegevens: één voor Hallo-Webrol en één voor Hallo-werkrol.</span><span class="sxs-lookup"><span data-stu-id="5bc57-282">hello download package includes two diagnostics configurations - one for hello web role and one for hello worker role.</span></span> <span data-ttu-id="5bc57-283">Deze configuraties voor diagnostische gegevens voor Hallo service volgen richtlijnen Hallo van [Cloud Service grondbeginselen in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="5bc57-283">These diagnostics configurations for hello service follow hello guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="5bc57-284">Dit omvat Hallo definities toolog prestatiemeteritems, IIS-logboeken, Windows-gebeurtenislogboeken en gebeurtenislogboeken van toepassingen gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-284">It includes hello definitions toolog Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="5bc57-285">Diagnostische gegevens implementeren</span><span class="sxs-lookup"><span data-stu-id="5bc57-285">Deploy Diagnostics</span></span>
<span data-ttu-id="5bc57-286">tooenable controle en diagnostische gegevens met Hallo diagnostische configuratie voor Hallo web- en werkrollen rollen geleverd door Hallo NuGet-pakket, Hallo volgende Azure PowerShell-opdrachten uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="5bc57-286">tooenable monitoring and diagnostics using hello diagnostic configuration for hello web and worker roles provided by hello NuGet package, run hello following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="5bc57-287">U vindt meer informatie over het tooconfigure en implementeren van diagnostische instellingen hier: [diagnostische gegevens inschakelen in Azure Cloud Services en virtuele Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="5bc57-287">You can find more information on how tooconfigure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="5bc57-288">Diagnostische gegevens ophalen</span><span class="sxs-lookup"><span data-stu-id="5bc57-288">Retrieve diagnostics</span></span>
<span data-ttu-id="5bc57-289">U kunt eenvoudig uw diagnostics openen vanaf Hallo Visual Studio Server Explorer in Azure, deel van de structuur van de Server Explorer Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="5bc57-289">You can easily access your diagnostics from hello Visual Studio Server Explorer in hello Azure part of hello Server Explorer tree.</span></span> <span data-ttu-id="5bc57-290">Open een exemplaar van de Visual Studio en op in de menubalk Hallo weergeven en Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="5bc57-290">Open a Visual Studio instance, and in hello menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="5bc57-291">Klik op Hallo Azure pictogram tooconnect tooyour Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="5bc57-291">Click hello Azure icon tooconnect tooyour Azure subscription.</span></span> <span data-ttu-id="5bc57-292">Navigeer tooAzure -> opslag -> <your storage account> -> tabellen-WADLogsTable >.</span><span class="sxs-lookup"><span data-stu-id="5bc57-292">Then navigate tooAzure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="5bc57-293">Zie voor meer informatie [opslagbronnen bladeren met Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="5bc57-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="5bc57-295">Hallo WADLogsTable gemarkeerd in de bovenstaande afbeelding voor Hallo Hallo bevat gedetailleerde gebeurtenissen van het toepassingslogboek Hallo gesplitste samenvoegen van de service.</span><span class="sxs-lookup"><span data-stu-id="5bc57-295">hello WADLogsTable highlighted in hello figure above contains hello detailed events from hello split-merge service’s application log.</span></span> <span data-ttu-id="5bc57-296">Houd er rekening mee dat standaardconfiguratie Hallo Hallo gedownload pakket is gericht op een productie-implementatie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-296">Note that hello default configuration of hello downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="5bc57-297">Hallo interval waarmee logboeken en prestatiemeteritems worden opgehaald uit het Hallo-service-exemplaren is daarom grote (5 minuten).</span><span class="sxs-lookup"><span data-stu-id="5bc57-297">Therefore hello interval at which logs and counters are pulled from hello service instances is large (5 minutes).</span></span> <span data-ttu-id="5bc57-298">Voor testen en ontwikkeling moet de lagere hello-interval door Hallo diagnostische instellingen van het Hallo-web- of Hallo worker-rol tooyour aan te passen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-298">For test and development, lower hello interval by adjusting hello diagnostics settings of hello web or hello worker role tooyour needs.</span></span> <span data-ttu-id="5bc57-299">Met de rechtermuisknop op het Hallo-rol in Hallo Visual Studio Server Explorer (Zie hierboven) en vervolgens pas Hallo Transfer periode in het dialoogvenster Hallo voor Hallo Diagnostics configuratie-instellingen:</span><span class="sxs-lookup"><span data-stu-id="5bc57-299">Right-click on hello role in hello Visual Studio Server Explorer (see above) and then adjust hello Transfer Period in hello dialog for hello Diagnostics configuration settings:</span></span> 

![Configuratie][3]

## <a name="performance"></a><span data-ttu-id="5bc57-301">Prestaties</span><span class="sxs-lookup"><span data-stu-id="5bc57-301">Performance</span></span>
<span data-ttu-id="5bc57-302">Betere prestaties is in het algemeen toobe verwacht van Hallo hoger, meer zodat Servicelagen in Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="5bc57-302">In general, better performance is toobe expected from hello higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="5bc57-303">Hogere i/o, CPU en geheugen toewijzingen voor hogere Servicelagen Hallo profiteren Hallo bulksgewijs kopiëren en verwijderen van bewerkingen die Hallo gesplitste merge-service wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-303">Higher IO, CPU and memory allocations for hello higher service tiers benefit hello bulk copy and delete operations that hello split-merge service uses.</span></span> <span data-ttu-id="5bc57-304">Beperkte daarom toename Hallo servicelaag slechts voor deze databases voor een gedefinieerde periode.</span><span class="sxs-lookup"><span data-stu-id="5bc57-304">For that reason, increase hello service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="5bc57-305">Hallo-service voert ook validatie van query's als onderdeel van de normale bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-305">hello service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="5bc57-306">Deze validatie van query's controleren op onverwachte aanwezigheid van gegevens in het doelbereik Hallo en zorg ervoor dat een merge-gesplitste/move-bewerking wordt gestart van een consistente status.</span><span class="sxs-lookup"><span data-stu-id="5bc57-306">These validation queries check for unexpected presence of data in hello target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="5bc57-307">Deze alle query's werken over sharding sleutelbereiken gedefinieerd door de scope Hallo Hallo-werking en Hallo batchgrootte geleverd als onderdeel van de definitie van Hallo aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-307">These queries all work over sharding key ranges defined by hello scope of hello operation and hello batch size provided as part of hello request definition.</span></span> <span data-ttu-id="5bc57-308">Deze query's werken het beste als een index aanwezig is waarvan de Hallo sharding-sleutel heeft, zoals Hallo toonaangevende kolom.</span><span class="sxs-lookup"><span data-stu-id="5bc57-308">These queries perform best when an index is present that has hello sharding key as hello leading column.</span></span> 

<span data-ttu-id="5bc57-309">Bovendien kunt een eigenschap uniekheid met Hallo sharding sleutel als de toonaangevende kolom Hallo Hallo service toouse een geoptimaliseerde aanpak die brongebruik in termen van logboekruimte en het geheugen beperkt.</span><span class="sxs-lookup"><span data-stu-id="5bc57-309">In addition, a uniqueness property with hello sharding key as hello leading column will allow hello service toouse an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="5bc57-310">Deze eigenschap uniekheid is vereist toomove grote hoeveelheden gegevens grootten (meestal meer dan 1GB).</span><span class="sxs-lookup"><span data-stu-id="5bc57-310">This uniqueness property is required toomove large data sizes (typically above 1GB).</span></span> 

## <a name="how-tooupgrade"></a><span data-ttu-id="5bc57-311">Hoe tooupgrade</span><span class="sxs-lookup"><span data-stu-id="5bc57-311">How tooupgrade</span></span>
1. <span data-ttu-id="5bc57-312">Volg de stappen Hallo in [implementeren van een service gesplitste samenvoegen](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="5bc57-312">Follow hello steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="5bc57-313">Het configuratiebestand voor cloud-service voor uw nieuwe configuratieparameters voor gesplitste samenvoegen implementatie tooreflect Hallo wijzigen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-313">Change your cloud service configuration file for your split-merge deployment tooreflect hello new configuration parameters.</span></span> <span data-ttu-id="5bc57-314">Een nieuwe vereiste parameter is Hallo informatie over Hallo certificaat gebruikt voor versleuteling.</span><span class="sxs-lookup"><span data-stu-id="5bc57-314">A new required parameter is hello information about hello certificate used for encryption.</span></span> <span data-ttu-id="5bc57-315">Een eenvoudige manier toodo dit toocompare Hallo nieuw sjabloon configuratiebestand van Hallo downloaden op basis van uw bestaande configuratie is.</span><span class="sxs-lookup"><span data-stu-id="5bc57-315">An easy way toodo this is toocompare hello new configuration template file from hello download against your existing configuration.</span></span> <span data-ttu-id="5bc57-316">Zorg ervoor dat u Hallo instellingen 'DataEncryptionPrimaryCertificateThumbprint' en 'DataEncryptionPrimary' voor Hallo web- en Hallo werkrol toevoegen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-316">Make sure you add hello settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both hello web and hello worker role.</span></span>
3. <span data-ttu-id="5bc57-317">Zorg ervoor dat alle lopende gesplitste merge-bewerkingen zijn voltooid voordat u implementeert Hallo update tooAzure.</span><span class="sxs-lookup"><span data-stu-id="5bc57-317">Before deploying hello update tooAzure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="5bc57-318">U kunt dit eenvoudig doen door het uitvoeren van query's Hallo RequestStatus en PendingWorkflows tabellen in Hallo gesplitste samenvoegen metagegevensdatabase voor actieve aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-318">You can easily do this by querying hello RequestStatus and PendingWorkflows tables in hello split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="5bc57-319">Werk uw bestaande cloud service-implementatie voor split-samenvoegen in uw Azure-abonnement met het nieuwe pakket Hallo en uw bijgewerkte serviceconfiguratiebestand.</span><span class="sxs-lookup"><span data-stu-id="5bc57-319">Update your existing cloud service deployment for split-merge in your Azure subscription with hello new package and your updated service configuration file.</span></span>

<span data-ttu-id="5bc57-320">U hoeft niet tooprovision een nieuwe metagegevensdatabase voor tooupgrade gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="5bc57-320">You do not need tooprovision a new metadata database for split-merge tooupgrade.</span></span> <span data-ttu-id="5bc57-321">Hallo nieuwe versie wordt automatisch bijwerken van uw bestaande metagegevens database toohello nieuwe versie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-321">hello new version will automatically upgrade your existing metadata database toohello new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="5bc57-322">Aanbevolen procedures en probleemoplossing</span><span class="sxs-lookup"><span data-stu-id="5bc57-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="5bc57-323">Definieer een testtenant en uw belangrijkste split of merge/verplaatsen bewerkingen met de testtenant Hallo uitoefenen over meerdere shards.</span><span class="sxs-lookup"><span data-stu-id="5bc57-323">Define a test tenant and exercise your most important split/merge/move operations with hello test tenant across several shards.</span></span> <span data-ttu-id="5bc57-324">Zorg ervoor dat alle metagegevens correct is gedefinieerd in de shard-toewijzing en dat Hallo bewerkingen niet-beperkingen of refererende sleutels schenden.</span><span class="sxs-lookup"><span data-stu-id="5bc57-324">Ensure that all metadata is defined correctly in your shard map and that hello operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="5bc57-325">Houd Hallo test tenant-gegevensgrootte hierboven Hallo maximale grootte van uw grootste tenant tooensure u gegevensgrootte niet Doe problemen met betrekking tot.</span><span class="sxs-lookup"><span data-stu-id="5bc57-325">Keep hello test tenant data size above hello maximum data size of your largest tenant tooensure you are not encountering data size related issues.</span></span> <span data-ttu-id="5bc57-326">Zo kunt u een bovengrens beoordelen op Hallo duurt toomove rond een één-tenant.</span><span class="sxs-lookup"><span data-stu-id="5bc57-326">This helps you assess an upper bound on hello time it takes toomove a single tenant around.</span></span> 
* <span data-ttu-id="5bc57-327">Zorg ervoor dat uw schema verwijderingen toestaat.</span><span class="sxs-lookup"><span data-stu-id="5bc57-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="5bc57-328">Hallo gesplitste samenvoegen service vereist Hallo mogelijkheid tooremove gegevens van Hallo bron shard zodra het Hallo-gegevens zijn met succes gekopieerde toohello doel.</span><span class="sxs-lookup"><span data-stu-id="5bc57-328">hello split-merge service requires hello ability tooremove data from hello source shard once hello data has been successfully copied toohello target.</span></span> <span data-ttu-id="5bc57-329">Bijvoorbeeld: **triggers verwijderen** kunt voorkomen dat Hallo service verwijderen van gegevens op de bron Hallo Hallo en bewerkingen toofail kan veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="5bc57-329">For example, **delete triggers** can prevent hello service from deleting hello data on hello source and may cause operations toofail.</span></span>
* <span data-ttu-id="5bc57-330">Hallo sharding-sleutel moet Hallo voorloop-kolom in uw primaire sleutel of unieke indexdefinitie.</span><span class="sxs-lookup"><span data-stu-id="5bc57-330">hello sharding key should be hello leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="5bc57-331">Die zorgt ervoor dat de beste prestaties Hallo voor Hallo splitsen of samenvoegen validatie van query's, en voor Hallo actuele gegevens verplaatsing en verwijdering bewerkingen waarvoor een sharding sleutelbereiken altijd niet bewerken.</span><span class="sxs-lookup"><span data-stu-id="5bc57-331">That ensures hello best performance for hello split or merge validation queries, and for hello actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="5bc57-332">Plaatsen van uw service gesplitste samenvoegen in Hallo regio en Datacenter waar uw database zich bevinden.</span><span class="sxs-lookup"><span data-stu-id="5bc57-332">Collocate your split-merge service in hello region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

