---
title: Verplaatsen van gegevens tussen cloud uitgebreide databases | Microsoft Docs
description: Legt uit hoe manipuleren shards en verplaatsen van gegevens via een zelf gehoste service met behulp van API's van elastische database.
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: b41b6d6be686168359a97eb7468351a105b748db
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="073ca-103">Gegevens verplaatsen tussen uitgeschaalde clouddatabases</span><span class="sxs-lookup"><span data-stu-id="073ca-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="073ca-104">Als u een Software als een Service-ontwikkelaar bent en plotseling uw app grote vraag ondergaat, moet u ruimte is voor de groei.</span><span class="sxs-lookup"><span data-stu-id="073ca-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need to accommodate the growth.</span></span> <span data-ttu-id="073ca-105">Zodat toevoegen u meer databases (shards).</span><span class="sxs-lookup"><span data-stu-id="073ca-105">So you add more databases (shards).</span></span> <span data-ttu-id="073ca-106">Hoe u opnieuw distribueren de gegevens naar de nieuwe databases zonder te onderbreken van de integriteit van gegevens?</span><span class="sxs-lookup"><span data-stu-id="073ca-106">How do you redistribute the data to the new databases without disrupting the data integrity?</span></span> <span data-ttu-id="073ca-107">Gebruik de **gesplitste merge tool** gegevens van beperkte databases naar de nieuwe databases verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-107">Use the **split-merge tool** to move data from constrained databases to the new databases.</span></span>  

<span data-ttu-id="073ca-108">Het hulpprogramma gesplitste samenvoegen wordt uitgevoerd als een Azure-web-service.</span><span class="sxs-lookup"><span data-stu-id="073ca-108">The split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="073ca-109">Een beheerder of ontwikkelaar gebruikt het hulpprogramma shardlets (gegevens uit een shard) verplaatsen tussen verschillende databases (shards).</span><span class="sxs-lookup"><span data-stu-id="073ca-109">An administrator or developer uses the tool to move shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="073ca-110">Het hulpprogramma maakt gebruik van beheer van shard-toewijzing te onderhouden de metagegevens-database en zorg ervoor dat de consistente toewijzingen.</span><span class="sxs-lookup"><span data-stu-id="073ca-110">The tool uses shard map management to maintain the service metadata database, and ensure consistent mappings.</span></span>

![Overzicht][1]

## <a name="download"></a><span data-ttu-id="073ca-112">Downloaden</span><span class="sxs-lookup"><span data-stu-id="073ca-112">Download</span></span>
[<span data-ttu-id="073ca-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="073ca-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="073ca-114">Documentatie</span><span class="sxs-lookup"><span data-stu-id="073ca-114">Documentation</span></span>
1. [<span data-ttu-id="073ca-115">Elastische database gesplitste Merge tool-zelfstudie</span><span class="sxs-lookup"><span data-stu-id="073ca-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="073ca-116">Gesplitste samenvoegen Beveiligingsconfiguratie</span><span class="sxs-lookup"><span data-stu-id="073ca-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="073ca-117">Beveiligingsoverwegingen gesplitste samenvoegen</span><span class="sxs-lookup"><span data-stu-id="073ca-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="073ca-118">Shard-toewijzingsbeheer</span><span class="sxs-lookup"><span data-stu-id="073ca-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="073ca-119">Bestaande databases migreren voor uitschaling</span><span class="sxs-lookup"><span data-stu-id="073ca-119">Migrate existing databases to scale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="073ca-120">Hulpprogramma's voor elastische database</span><span class="sxs-lookup"><span data-stu-id="073ca-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="073ca-121">Elastische Database extra verklarende woordenlijst</span><span class="sxs-lookup"><span data-stu-id="073ca-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-the-split-merge-tool"></a><span data-ttu-id="073ca-122">Waarom het hulpprogramma gesplitste samenvoegen gebruiken?</span><span class="sxs-lookup"><span data-stu-id="073ca-122">Why use the split-merge tool?</span></span>
<span data-ttu-id="073ca-123">**Flexibiliteit**</span><span class="sxs-lookup"><span data-stu-id="073ca-123">**Flexibility**</span></span>

<span data-ttu-id="073ca-124">Toepassingen moeten worden uitgerekt flexibel vallen buiten de grenzen van één Azure SQL DB-database.</span><span class="sxs-lookup"><span data-stu-id="073ca-124">Applications need to stretch flexibly beyond the limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="073ca-125">Het hulpprogramma gebruiken om gegevens te verplaatsen naar behoefte nieuwe databases terwijl de integriteit te behouden.</span><span class="sxs-lookup"><span data-stu-id="073ca-125">Use the tool to move data as needed to new databases while retaining integrity.</span></span>

<span data-ttu-id="073ca-126">**Gesplitste groeien**</span><span class="sxs-lookup"><span data-stu-id="073ca-126">**Split to grow**</span></span> 

<span data-ttu-id="073ca-127">U moet de algehele capaciteit voor het afhandelen van explosief gegroeid verhogen.</span><span class="sxs-lookup"><span data-stu-id="073ca-127">You need to increase overall capacity to handle explosive growth.</span></span> <span data-ttu-id="073ca-128">Om dit te doen, extra capaciteit te maken door sharding de gegevens en over stapsgewijs meer databases verdeeld totdat de capaciteitsbehoeften is voldaan.</span><span class="sxs-lookup"><span data-stu-id="073ca-128">To do so, create additional capacity by sharding the data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="073ca-129">Dit is een goed voorbeeld van de functie 'splitsen'.</span><span class="sxs-lookup"><span data-stu-id="073ca-129">This is a prime example of the ‘split’ feature.</span></span> 

<span data-ttu-id="073ca-130">**Samenvoegen verkleinen**</span><span class="sxs-lookup"><span data-stu-id="073ca-130">**Merge to shrink**</span></span>

<span data-ttu-id="073ca-131">Capaciteit moet verkleinen vanwege de seizoensgebonden aard van een bedrijf.</span><span class="sxs-lookup"><span data-stu-id="073ca-131">Capacity needs shrink due to the seasonal nature of a business.</span></span> <span data-ttu-id="073ca-132">Het hulpprogramma kunt u omlaag schalen naar minder schaaleenheden wanneer bedrijven wordt vertraagd.</span><span class="sxs-lookup"><span data-stu-id="073ca-132">The tool lets you scale down to fewer scale units when business slows.</span></span> <span data-ttu-id="073ca-133">De functie 'samenvoegen' in de elastische Schaalfunctionaliteit gesplitste samenvoegen Service bevat informatie over deze vereiste.</span><span class="sxs-lookup"><span data-stu-id="073ca-133">The ‘merge’ feature in the Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="073ca-134">**Hotspots beheren door shardlets verplaatsen**</span><span class="sxs-lookup"><span data-stu-id="073ca-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="073ca-135">De toewijzing van shardlets naar shards kan met meerdere tenants per database leiden tot capaciteit knelpunten op sommige shards.</span><span class="sxs-lookup"><span data-stu-id="073ca-135">With multiple tenants per database, the allocation of shardlets to shards can lead to capacity bottlenecks on some shards.</span></span> <span data-ttu-id="073ca-136">Dit is vereist voor opnieuw toewijzen van shardlets of bezet shardlets verplaatsen naar nieuwe of minder gebruikte shards.</span><span class="sxs-lookup"><span data-stu-id="073ca-136">This requires re-allocating shardlets or moving busy shardlets to new or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="073ca-137">Concepten & belangrijke functies</span><span class="sxs-lookup"><span data-stu-id="073ca-137">Concepts & key features</span></span>
<span data-ttu-id="073ca-138">**Klant gehoste services**</span><span class="sxs-lookup"><span data-stu-id="073ca-138">**Customer-hosted services**</span></span>

<span data-ttu-id="073ca-139">De split-samenvoegen wordt geleverd als een klant gehoste service.</span><span class="sxs-lookup"><span data-stu-id="073ca-139">The split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="073ca-140">U moet implementeren en de service hosten in uw Microsoft Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="073ca-140">You must deploy and host the service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="073ca-141">Het u van het NuGet downloaden-pakket bevat een configuratiesjabloon voltooid met de informatie voor uw specifieke implementatie.</span><span class="sxs-lookup"><span data-stu-id="073ca-141">The package you download from NuGet contains a configuration template to complete with the information for your specific deployment.</span></span> <span data-ttu-id="073ca-142">Zie de [gesplitste samenvoegen zelfstudie](sql-database-elastic-scale-configure-deploy-split-and-merge.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="073ca-142">See the [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="073ca-143">Omdat de service wordt uitgevoerd in uw Azure-abonnement, kunt u instellen en configureren van de meeste beveiligingsaspecten van de service.</span><span class="sxs-lookup"><span data-stu-id="073ca-143">Since the service runs in your Azure subscription, you can control and configure most security aspects of the service.</span></span> <span data-ttu-id="073ca-144">De standaardsjabloon bevat de opties voor het configureren van SSL, op basis van certificaten voor clientverificatie en versleuteling van opgeslagen referenties, DoS beveiligen en IP-beperkingen.</span><span class="sxs-lookup"><span data-stu-id="073ca-144">The default template includes the options to configure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="073ca-145">U vindt meer informatie over de beveiligingsaspecten in het volgende document [gesplitste samenvoegen Beveiligingsconfiguratie](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="073ca-145">You can find more information on the security aspects in the following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="073ca-146">De standaardwaarde geïmplementeerd met een Webrol en een werknemer de service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-146">The default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="073ca-147">Gebruik de A1-VM-grootte in Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="073ca-147">Each uses the A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="073ca-148">Terwijl u kunt deze instellingen niet wijzigen wanneer u het pakket implementeert, kunt u ze kunt wijzigen na een geslaagde implementatie in de actieve cloudservice (via de Azure portal).</span><span class="sxs-lookup"><span data-stu-id="073ca-148">While you cannot modify these settings when deploying the package, you could change them after a successful deployment in the running cloud service, (through the Azure portal).</span></span> <span data-ttu-id="073ca-149">Houd er rekening mee dat de werkrol moet niet worden geconfigureerd voor meer dan één exemplaar voor technische redenen.</span><span class="sxs-lookup"><span data-stu-id="073ca-149">Note that the worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="073ca-150">**Integratie van shard-kaart**</span><span class="sxs-lookup"><span data-stu-id="073ca-150">**Shard map integration**</span></span>

<span data-ttu-id="073ca-151">De splitsing merge-service communiceert met de shard-toewijzing van de toepassing.</span><span class="sxs-lookup"><span data-stu-id="073ca-151">The split-merge service interacts with the shard map of the application.</span></span> <span data-ttu-id="073ca-152">Wanneer u de splitsing merge-service om te splitsen of samenvoegen van bereiken of shardlets verplaatsen tussen shards, blijft de service automatisch de shard-toewijzing up-to-date te houden.</span><span class="sxs-lookup"><span data-stu-id="073ca-152">When using the split-merge service to split or merge ranges or to move shardlets between shards, the service automatically keeps the shard map up to date.</span></span> <span data-ttu-id="073ca-153">Om dit te doen, wordt de service verbindt met de shard kaart manager-database van de toepassing en onderhoudt bereiken en toewijzingen als voortgang merge-gesplitste/move-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="073ca-153">To do so, the service connects to the shard map manager database of the application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="073ca-154">Dit zorgt ervoor dat de shard-toewijzing een actuele weergave altijd weergegeven wanneer de splitsing samenvoegbewerkingen gaat op.</span><span class="sxs-lookup"><span data-stu-id="073ca-154">This ensures that the shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="073ca-155">Splitsen, zijn samenvoegen en shardlet movement-bewerkingen door het verplaatsen van een batch shardlets van de bron-shard naar de doel-shard geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from the source shard to the target shard.</span></span> <span data-ttu-id="073ca-156">Tijdens de bewerking van de verplaatsing shardlet de shardlets onderworpen aan de huidige batch zijn gemarkeerd als offline in de shard-toewijzing en zijn niet beschikbaar voor gegevensafhankelijke routering verbindingen met behulp van de **OpenConnectionForKey** API.</span><span class="sxs-lookup"><span data-stu-id="073ca-156">During the shardlet movement operation the shardlets subject to the current batch are marked as offline in the shard map and are unavailable for data-dependent routing connections using the **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="073ca-157">**Consistente shardlet-verbindingen**</span><span class="sxs-lookup"><span data-stu-id="073ca-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="073ca-158">Wanneer gegevensverplaatsing wordt gestart voor een nieuwe batch shardlets, shard-toewijzing opgegeven gegevensafhankelijke routering verbindingen met het opslaan van de shardlet shard gedode en volgende verbindingen vanaf de shard-toewijzing API's naar deze zijn shardlets tijdens de gegevens worden geblokkeerd verkeer wordt uitgevoerd om te voorkomen dat inconsistenties.</span><span class="sxs-lookup"><span data-stu-id="073ca-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections to the shard storing the shardlet are killed and subsequent connections from the shard map APIs to the these shardlets are blocked while the data movement is in progress in order to avoid inconsistencies.</span></span> <span data-ttu-id="073ca-159">Verbindingen met andere shardlets op de dezelfde shard wordt ook ophalen afgesloten, maar opnieuw slaagt onmiddellijk taak opnieuw wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-159">Connections to other shardlets on the same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="073ca-160">Zodra de batch wordt verplaatst, de shardlets online opnieuw voor de shard doel zijn gemarkeerd en de brongegevens is verwijderd uit de bron-shard.</span><span class="sxs-lookup"><span data-stu-id="073ca-160">Once the batch is moved, the shardlets are marked online again for the target shard and the source data is removed from the source shard.</span></span> <span data-ttu-id="073ca-161">De service gaat door deze stappen voor elke batch totdat alle shardlets zijn verplaatst.</span><span class="sxs-lookup"><span data-stu-id="073ca-161">The service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="073ca-162">Dit leidt tot verschillende kill-bewerkingen in de loop van de volledige merge-gesplitste/move-bewerking.</span><span class="sxs-lookup"><span data-stu-id="073ca-162">This will lead to several connection kill operations during the course of the complete split/merge/move operation.</span></span>  

<span data-ttu-id="073ca-163">**Shardlet beschikbaarheid van beheren**</span><span class="sxs-lookup"><span data-stu-id="073ca-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="073ca-164">Beperken van de verbinding als de huidige batch van shardlets zoals hierboven wordt beschreven beëindigt, kan beperkt het bereik van ontbreken tot één batch van shardlets tegelijk.</span><span class="sxs-lookup"><span data-stu-id="073ca-164">Limiting the connection killing to the current batch of shardlets as discussed above restricts the scope of unavailability to one batch of shardlets at a time.</span></span> <span data-ttu-id="073ca-165">Dit heeft de voorkeur boven een benadering waarbij de volledige shard blijft offline voor alle bijbehorende shardlets in de loop van een gesplitste of merge-bewerking.</span><span class="sxs-lookup"><span data-stu-id="073ca-165">This is preferred over an approach where the complete shard would remain offline for all its shardlets during the course of a split or merge operation.</span></span> <span data-ttu-id="073ca-166">De grootte van een batch, gedefinieerd als het aantal unieke shardlets verplaatsen op een tijdstip is een configuratieparameter.</span><span class="sxs-lookup"><span data-stu-id="073ca-166">The size of a batch, defined as the number of distinct shardlets to move at a time, is a configuration parameter.</span></span> <span data-ttu-id="073ca-167">Het kan worden gedefinieerd voor elke bewerking samenvoegen en splitsen afhankelijk van de beschikbaarheid en prestaties behoeften van de toepassing.</span><span class="sxs-lookup"><span data-stu-id="073ca-167">It can be defined for each split and merge operation depending on the application’s availability and performance needs.</span></span> <span data-ttu-id="073ca-168">Houd er rekening mee dat het bereik dat wordt vergrendeld in de shard-toewijzing mogelijk groter is dan de opgegeven batch.</span><span class="sxs-lookup"><span data-stu-id="073ca-168">Note that the range that is being locked in the shard map may be larger than the batch size specified.</span></span> <span data-ttu-id="073ca-169">Dit komt doordat de service de grootte van het bereik kiest dat het werkelijke aantal sharding sleutelwaarden in de gegevens ongeveer overeenkomt met de batchgrootte van de.</span><span class="sxs-lookup"><span data-stu-id="073ca-169">This is because the service picks the range size such that the actual number of sharding key values in the data approximately matches the batch size.</span></span> <span data-ttu-id="073ca-170">Dit is belangrijk te weten met name voor zeer ingevuld sharding-sleutels.</span><span class="sxs-lookup"><span data-stu-id="073ca-170">This is important to remember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="073ca-171">**Metagegevensopslag**</span><span class="sxs-lookup"><span data-stu-id="073ca-171">**Metadata storage**</span></span>

<span data-ttu-id="073ca-172">De splitsing merge-service gebruikt een database om de status ervan onderhouden en logboeken tijdens de verwerking van aanvragen.</span><span class="sxs-lookup"><span data-stu-id="073ca-172">The split-merge service uses a database to maintain its status and to keep logs during request processing.</span></span> <span data-ttu-id="073ca-173">De gebruiker deze database wordt gemaakt in het abonnement en voorziet de verbindingsreeks in het configuratiebestand voor de service-implementatie.</span><span class="sxs-lookup"><span data-stu-id="073ca-173">The user creates this database in their subscription and provides the connection string for it in the configuration file for the service deployment.</span></span> <span data-ttu-id="073ca-174">Beheerders van de organisatie van de gebruiker kunnen ook verbinding maken met deze database om de voortgang van de aanvraag te nemen en voor het onderzoeken van gedetailleerde informatie over mogelijke fouten.</span><span class="sxs-lookup"><span data-stu-id="073ca-174">Administrators from the user’s organization can also connect to this database to review request progress and to investigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="073ca-175">**Sharding-awareness**</span><span class="sxs-lookup"><span data-stu-id="073ca-175">**Sharding-awareness**</span></span>

<span data-ttu-id="073ca-176">De service gesplitste samenvoegen onderscheidt tussen (1) de shard-tabellen, (2) verwijzingsdimensies en (3) de normale tabellen.</span><span class="sxs-lookup"><span data-stu-id="073ca-176">The split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="073ca-177">De semantiek van een merge-gesplitste/move-bewerking afhankelijk van het type van de tabel die wordt gebruikt en wordt als volgt gedefinieerd:</span><span class="sxs-lookup"><span data-stu-id="073ca-177">The semantics of a split/merge/move operation depend on the type of the table used and are defined as follows:</span></span> 

* <span data-ttu-id="073ca-178">**Shard tabellen**: gesplitste, samenvoegen en migratiebewerkingen verplaatsen van shardlets van bron naar doel shard.</span><span class="sxs-lookup"><span data-stu-id="073ca-178">**Sharded tables**: Split, merge, and move operations move shardlets from source to target shard.</span></span> <span data-ttu-id="073ca-179">Nadat de algehele aanvraag is voltooid zijn die shardlets niet langer aanwezig op de bron.</span><span class="sxs-lookup"><span data-stu-id="073ca-179">After successful completion of the overall request, those shardlets are no longer present on the source.</span></span> <span data-ttu-id="073ca-180">Houd er rekening mee dat de doeltabellen moeten op de doel-shard bestaan en mag geen gegevens in het doelbereik voordat de verwerking van de bewerking.</span><span class="sxs-lookup"><span data-stu-id="073ca-180">Note that the target tables need to exist on the target shard and must not contain data in the target range prior to processing of the operation.</span></span> 
* <span data-ttu-id="073ca-181">**Verwijzen naar tabellen**: voor verwijzingsdimensies, de splitsing samen te voegen en bewerkingen kunt u de gegevens van de bron kopiëren naar de doel-shard te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-181">**Reference tables**: For reference tables, the split, merge and move operations copy the data from the source to the target shard.</span></span> <span data-ttu-id="073ca-182">Let echter op dat er geen wijzigingen doorgevoerd op de doel-shard voor een bepaalde tabel als een rij al aanwezig in deze tabel op het doel is.</span><span class="sxs-lookup"><span data-stu-id="073ca-182">Note, however, that no changes occur on the target shard for a given table if any row is already present in this table on the target.</span></span> <span data-ttu-id="073ca-183">De tabel is leeg voor een verwijzing naar tabel kopieerbewerking op verwerkt.</span><span class="sxs-lookup"><span data-stu-id="073ca-183">The table has to be empty for any reference table copy operation to get processed.</span></span>
* <span data-ttu-id="073ca-184">**Andere tabellen**: andere tabellen kunnen worden gebruikt op de bron- of het doel van een bewerking voor samenvoegen en splitsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-184">**Other Tables**: Other tables can be present on either the source or the target of a split and merge operation.</span></span> <span data-ttu-id="073ca-185">De service gesplitste samenvoegen negeert deze tabellen voor gegevensverplaatsing of te kopiëren.</span><span class="sxs-lookup"><span data-stu-id="073ca-185">The split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="073ca-186">Let echter op dat ze deze bewerkingen in het geval van beperkingen kunnen verstoren.</span><span class="sxs-lookup"><span data-stu-id="073ca-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="073ca-187">De informatie van verwijzing versus shard tabellen wordt verstrekt door de **SchemaInfo** API's op de shard-kaart.</span><span class="sxs-lookup"><span data-stu-id="073ca-187">The information on reference vs. sharded tables is provided by the **SchemaInfo** APIs on the shard map.</span></span> <span data-ttu-id="073ca-188">Het volgende voorbeeld ziet u het gebruik van deze API's op een gegeven shard kaart manager object smm:</span><span class="sxs-lookup"><span data-stu-id="073ca-188">The following example illustrates the use of these APIs on a given shard map manager object smm:</span></span> 

    // Create the schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="073ca-189">De tabellen 'regio' en 'land' worden gedefinieerd als verwijzingstabellen en met gesplitste of merge/verplaatsen bewerkingen moeten worden gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-189">The tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="073ca-190">'klant' en 'orders' worden op zijn beurt gedefinieerd als shard tabellen.</span><span class="sxs-lookup"><span data-stu-id="073ca-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="073ca-191">C_CUSTKEY en O_CUSTKEY fungeren als de sharding-sleutel.</span><span class="sxs-lookup"><span data-stu-id="073ca-191">C_CUSTKEY and O_CUSTKEY serve as the sharding key.</span></span> 

<span data-ttu-id="073ca-192">**Referentiële integriteit**</span><span class="sxs-lookup"><span data-stu-id="073ca-192">**Referential Integrity**</span></span>

<span data-ttu-id="073ca-193">De service gesplitste samenvoegen analyseert afhankelijkheden tussen de tabellen en sleutel-primaire refererende sleutels gebruikt voor het Faseren van de bewerkingen voor het verplaatsen van verwijzingsdimensies en shardlets.</span><span class="sxs-lookup"><span data-stu-id="073ca-193">The split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships to stage the operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="073ca-194">In het algemeen verwijzingsdimensies gekopieerd eerst in volgorde van de afhankelijkheid, worden in volgorde van hun afhankelijkheden in elke batch shardlets gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="073ca-195">Dit is noodzakelijk om FK PK beperkingen op de doel-shard worden gehonoreerd als de nieuwe gegevens aankomen.</span><span class="sxs-lookup"><span data-stu-id="073ca-195">This is necessary so that FK-PK constraints on the target shard are honored as the new data arrives.</span></span> 

<span data-ttu-id="073ca-196">**Consistentie van shard-toewijzing en de uiteindelijke voltooiing**</span><span class="sxs-lookup"><span data-stu-id="073ca-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="073ca-197">In geval van problemen, de service gesplitste samenvoegen operations hervat na een storing en uitvoeren in voortgang aanvragen is erop gericht.</span><span class="sxs-lookup"><span data-stu-id="073ca-197">In the presence of failures, the split-merge service resumes operations after any outage and aims to complete any in progress requests.</span></span> <span data-ttu-id="073ca-198">Echter mogelijk zijn er onherstelbare situaties, bijvoorbeeld wanneer de doel-shard zoekraakt of wordt geknoeid niet meer worden hersteld.</span><span class="sxs-lookup"><span data-stu-id="073ca-198">However, there may be unrecoverable situations, e.g., when the target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="073ca-199">In deze omstandigheden kan sommige shardlets die moesten worden verplaatst op de bron-shard blijven.</span><span class="sxs-lookup"><span data-stu-id="073ca-199">Under those circumstances, some shardlets that were supposed to be moved may continue to reside on the source shard.</span></span> <span data-ttu-id="073ca-200">De service zorgt ervoor dat er alleen shardlet toewijzingen worden bijgewerkt nadat de gegevens die nodig is gekopieerd naar het doel.</span><span class="sxs-lookup"><span data-stu-id="073ca-200">The service ensures that shardlet mappings are only updated after the necessary data has been successfully copied to the target.</span></span> <span data-ttu-id="073ca-201">Shardlets zijn alleen op de bron verwijderd nadat alle bijbehorende gegevens is gekopieerd naar het doel en de bijbehorende toewijzingen zijn bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="073ca-201">Shardlets are only deleted on the source once all their data has been copied to the target and the corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="073ca-202">De verwijderingsbewerking wordt op de achtergrond terwijl het bereik op de doel-shard al online is.</span><span class="sxs-lookup"><span data-stu-id="073ca-202">The deletion operation happens in the background while the range is already online on the target shard.</span></span> <span data-ttu-id="073ca-203">De service gesplitste samenvoegen zorgt altijd juistheid van de toewijzingen opgeslagen in de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="073ca-203">The split-merge service always ensures correctness of the mappings stored in the shard map.</span></span>

## <a name="the-split-merge-user-interface"></a><span data-ttu-id="073ca-204">De gebruikersinterface van de gesplitste samenvoegen</span><span class="sxs-lookup"><span data-stu-id="073ca-204">The split-merge user interface</span></span>
<span data-ttu-id="073ca-205">Het pakket gesplitste samenvoegen service omvat een werkrol en een Webrol.</span><span class="sxs-lookup"><span data-stu-id="073ca-205">The split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="073ca-206">De Webrol wordt gebruikt voor het splitsen merge-aanvragen indienen op interactieve wijze.</span><span class="sxs-lookup"><span data-stu-id="073ca-206">The web role is used to submit split-merge requests in an interactive way.</span></span> <span data-ttu-id="073ca-207">De belangrijkste onderdelen van de gebruikersinterface zijn als volgt:</span><span class="sxs-lookup"><span data-stu-id="073ca-207">The main components of the user interface are as follows:</span></span>

* <span data-ttu-id="073ca-208">Type voor bewerking: Het bewerkingstype is een keuzerondje die het soort bewerking uitgevoerd door de service voor deze aanvraag bepaalt.</span><span class="sxs-lookup"><span data-stu-id="073ca-208">Operation Type: The operation type is a radio button that controls the kind of operation performed by the service for this request.</span></span> <span data-ttu-id="073ca-209">U kunt kiezen tussen de splitsing samenvoegen en scenario's te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-209">You can choose between the split, merge and move scenarios.</span></span> <span data-ttu-id="073ca-210">U kunt ook een eerder ingediende bewerking annuleren.</span><span class="sxs-lookup"><span data-stu-id="073ca-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="073ca-211">U kunt gesplitste gebruiken, samenvoegen en aanvragen voor de shard-kaarten bereik verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="073ca-212">Lijst shard wijst alleen ondersteuning migratiebewerkingen.</span><span class="sxs-lookup"><span data-stu-id="073ca-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="073ca-213">Shard-toewijzing: Informatie over de shard-toewijzing en de database die als host fungeert voor de shard-kaart hebben betrekking op de volgende sectie van de parameters van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="073ca-213">Shard Map: The next section of request parameters cover information about the shard map and the database hosting your shard map.</span></span> <span data-ttu-id="073ca-214">In het bijzonder, moet u de naam van de Azure SQL Database-server en database die als host fungeert de shardmap referenties voor verbinding met de shard-toewijzing-database en ten slotte de naam van de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="073ca-214">In particular, you need to provide the name of the Azure SQL Database server and database hosting the shardmap, credentials to connect to the shard map database, and finally the name of the shard map.</span></span> <span data-ttu-id="073ca-215">Op dit moment de bewerking kan slechts één set referenties.</span><span class="sxs-lookup"><span data-stu-id="073ca-215">Currently, the operation only accepts a single set of credentials.</span></span> <span data-ttu-id="073ca-216">Deze referenties moeten voldoende rechten hebt voor het uitvoeren van wijzigingen in de shard kaart ook garantie voor de gebruikersgegevens op de shards.</span><span class="sxs-lookup"><span data-stu-id="073ca-216">These credentials need to have sufficient permissions to perform changes to the shard map as well as to the user data on the shards.</span></span>
* <span data-ttu-id="073ca-217">Bron-bereik (splitsen en samenvoegen): een bewerking voor samenvoegen en splitsen een bereik met behulp van de lage en hoge sleutel verwerkt.</span><span class="sxs-lookup"><span data-stu-id="073ca-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="073ca-218">Geef een bewerking met een hoge sleutelwaarde unbounded door het selectievakje 'hoge sleutel is max' en hoge sleutel veld leeg laten.</span><span class="sxs-lookup"><span data-stu-id="073ca-218">To specify an operation with an unbounded high key value, check the “High key is max” check box and leave the high key field empty.</span></span> <span data-ttu-id="073ca-219">De belangrijkste waarden die u opgeeft hoeft niet exact overeenkomen met een toewijzing en de grenzen in de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="073ca-219">The range key values that you specify do not need to precisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="073ca-220">Als u geen geen begrenzingen bereik op alle opgeeft wordt de service afgeleid het dichtstbijzijnde bereik voor u automatisch.</span><span class="sxs-lookup"><span data-stu-id="073ca-220">If you do not specify any range boundaries at all the service will infer the closest range for you automatically.</span></span> <span data-ttu-id="073ca-221">U kunt het GetMappings.ps1 PowerShell-script gebruiken om op te halen van de huidige toewijzingen in een bepaalde shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="073ca-221">You can use the GetMappings.ps1 PowerShell script to retrieve the current mappings in a given shard map.</span></span>
* <span data-ttu-id="073ca-222">Gesplitste bron gedrag (splitsen): voor gesplitste bewerkingen, definiëren op het punt om te splitsen van het bronbereik.</span><span class="sxs-lookup"><span data-stu-id="073ca-222">Split Source Behavior (split): For split operations, define the point to split the source range.</span></span> <span data-ttu-id="073ca-223">U doen dit door de waar u de splitsing sharding-sleutel.</span><span class="sxs-lookup"><span data-stu-id="073ca-223">You do this by providing the sharding key where you want the split to occur.</span></span> <span data-ttu-id="073ca-224">Gebruik het keuzerondje opgeven of u het onderste gedeelte van het bereik (met uitzondering van de sleutel splitsen) wilt verplaatsen, of of u wilt dat het bovenste gedeelte verplaatsen (inclusief de split-sleutel).</span><span class="sxs-lookup"><span data-stu-id="073ca-224">Use the radio button specify whether you want the lower part of the range (excluding the split key) to move, or whether you want the upper part to move (including the split key).</span></span>
* <span data-ttu-id="073ca-225">Bron Shardlet (verplaatsen): verplaatsen bewerkingen zijn verschilt van de gesplitste of merge-bewerkingen zoals een bereik te beschrijven van de bron is niet vereist.</span><span class="sxs-lookup"><span data-stu-id="073ca-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range to describe the source.</span></span> <span data-ttu-id="073ca-226">Een bron voor het verplaatsen wordt gewoon geïdentificeerd door de sleutelwaarde van sharding die u van plan bent te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="073ca-226">A source for move is simply identified by the sharding key value that you plan to move.</span></span>
* <span data-ttu-id="073ca-227">Shard (splitsen) als doel: nadat u de gegevens hebt opgegeven voor de bron van de splitsbewerking, moet u definiëren waar u de gegevens worden gekopieerd naar door de Azure SQL Db-server en database de naam voor het doel te geven.</span><span class="sxs-lookup"><span data-stu-id="073ca-227">Target Shard (split): Once you have provided the information on the source of your split operation, you need to define where you want the data to be copied to by providing the Azure SQL Db server and database name for the target.</span></span>
* <span data-ttu-id="073ca-228">Doelbereik (samenvoegen): samenvoegbewerkingen shardlets verplaatsen naar een bestaande shard.</span><span class="sxs-lookup"><span data-stu-id="073ca-228">Target Range (merge): Merge operations move shardlets to an existing shard.</span></span> <span data-ttu-id="073ca-229">U identificeren de bestaande shard door te geven van het bestaande bereik dat u samenvoegen wilt met de grenzen van het bereik.</span><span class="sxs-lookup"><span data-stu-id="073ca-229">You identify the existing shard by providing the range boundaries of the existing range that you want to merge with.</span></span>
* <span data-ttu-id="073ca-230">Batchgrootte: De batchgrootte bepaalt het aantal shardlets die op een moment tijdens de gegevensverplaatsing offline gaan.</span><span class="sxs-lookup"><span data-stu-id="073ca-230">Batch Size: The batch size controls the number of shardlets that will go offline at a time during the data movement.</span></span> <span data-ttu-id="073ca-231">Dit is een integerwaarde waar u lagere waarden kunt gebruiken wanneer u gevoelig zijn voor lange perioden met uitvaltijd voor shardlets.</span><span class="sxs-lookup"><span data-stu-id="073ca-231">This is an integer value where you can use smaller values when you are sensitive to long periods of downtime for shardlets.</span></span> <span data-ttu-id="073ca-232">Hogere waarden verhoogt de tijd die een bepaalde shardlet offline maar de prestaties mogelijk verbeterd.</span><span class="sxs-lookup"><span data-stu-id="073ca-232">Larger values will increase the time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="073ca-233">Bewerking-Id (annuleren): Als u er een bewerking die niet meer nodig hebt, kunt u de bewerking annuleren door op te geven van de bewerkings-ID in dit veld.</span><span class="sxs-lookup"><span data-stu-id="073ca-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel the operation by providing its operation ID in this field.</span></span> <span data-ttu-id="073ca-234">U kunt de bewerkings-ID ophalen uit de tabel van de status van aanvraag (Zie de sectie 8.1) of van de uitvoer in de webbrowser waar u de aanvraag ingediend.</span><span class="sxs-lookup"><span data-stu-id="073ca-234">You can retrieve the operation ID from the request status table (see Section 8.1) or from the output in the web browser where you submitted the request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="073ca-235">Vereisten en beperkingen</span><span class="sxs-lookup"><span data-stu-id="073ca-235">Requirements and Limitations</span></span>
<span data-ttu-id="073ca-236">De huidige implementatie van de gesplitste merge-service is onderworpen aan de volgende vereisten en beperkingen:</span><span class="sxs-lookup"><span data-stu-id="073ca-236">The current implementation of the split-merge service is subject to the following requirements and limitations:</span></span> 

* <span data-ttu-id="073ca-237">De shards moeten voorkomen en zijn geregistreerd in de shard-toewijzing voordat een gesplitste merge-bewerking op deze shards kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-237">The shards need to exist and be registered in the shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="073ca-238">De service maakt geen tabellen of andere databaseobjecten automatisch als onderdeel van bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="073ca-238">The service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="073ca-239">Dit betekent dat het schema voor alle shard-tabellen en verwijzingsdimensies moet bestaan op de doel-shard voordat een merge-gesplitste/move-bewerking.</span><span class="sxs-lookup"><span data-stu-id="073ca-239">This means that the schema for all sharded tables and reference tables need to exist on the target shard prior to any split/merge/move operation.</span></span> <span data-ttu-id="073ca-240">Shard tabellen zijn met name vereist voor het niet leeg zijn in het bereik waarin nieuwe shardlets zijn moeten worden toegevoegd door een merge-gesplitste/move-bewerking.</span><span class="sxs-lookup"><span data-stu-id="073ca-240">Sharded tables in particular are required to be empty in the range where new shardlets are to be added by a split/merge/move operation.</span></span> <span data-ttu-id="073ca-241">Anders mislukt de bewerking uit de eerste consistentiecontrole op de doel-shard.</span><span class="sxs-lookup"><span data-stu-id="073ca-241">Otherwise, the operation will fail the initial consistency check on the target shard.</span></span> <span data-ttu-id="073ca-242">Let ook op die verwijzen naar gegevens alleen worden gekopieerd als de verwijzing tabel leeg is en of er geen consistentiecontrole garanties met betrekking tot andere gelijktijdige bewerkingen op tabellen met het schrijven.</span><span class="sxs-lookup"><span data-stu-id="073ca-242">Also note that reference data is only copied if the reference table is empty and that there are no consistency guarantees with regard to other concurrent write operations on the reference tables.</span></span> <span data-ttu-id="073ca-243">We raden u dit: wanneer gesplitste/merge-bewerkingen wordt uitgevoerd, geen schrijfbewerkingen wijzigingen aanbrengen in de tabellen.</span><span class="sxs-lookup"><span data-stu-id="073ca-243">We recommend this: when running split/merge operations, no other write operations make changes to the reference tables.</span></span>
* <span data-ttu-id="073ca-244">De service is afhankelijk van de identiteit van de rij is ingesteld door een unieke index of de sleutel met de sleutel sharding ter verbetering van prestaties en betrouwbaarheid voor grote shardlets.</span><span class="sxs-lookup"><span data-stu-id="073ca-244">The service relies on row identity established by a unique index or key that includes the sharding key to improve performance and reliability for large shardlets.</span></span> <span data-ttu-id="073ca-245">Hierdoor kan de service om gegevens te verplaatsen op een zelfs weer specifieker dan alleen de sleutelwaarde sharding.</span><span class="sxs-lookup"><span data-stu-id="073ca-245">This allows the service to move data at an even finer granularity than just the sharding key value.</span></span> <span data-ttu-id="073ca-246">Dit helpt bij het verminderen van de maximale hoeveelheid logboekruimte en vergrendelingen die vereist tijdens de bewerking zijn.</span><span class="sxs-lookup"><span data-stu-id="073ca-246">This helps to reduce the maximum amount of log space and locks that are required during the operation.</span></span> <span data-ttu-id="073ca-247">Houd rekening met het maken van een unieke index of een primaire sleutel, met inbegrip van de sharding-sleutel op een bepaalde tabel als u wilt gebruiken die tabel met merge-gesplitste/move-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="073ca-247">Consider creating a unique index or a primary key including the sharding key on a given table if you want to use that table with split/merge/move requests.</span></span> <span data-ttu-id="073ca-248">Uit prestatieoverwegingen moet de sleutel sharding de toonaangevende kolom in de sleutel of de index.</span><span class="sxs-lookup"><span data-stu-id="073ca-248">For performance reasons, the sharding key should be the leading column in the key or the index.</span></span>
* <span data-ttu-id="073ca-249">Tijdens de verwerking van aanvragen mogelijk bepaalde gegevens shardlet aanwezig op de bron en de doel-shard.</span><span class="sxs-lookup"><span data-stu-id="073ca-249">During the course of request processing, some shardlet data may be present both on the source and the target shard.</span></span> <span data-ttu-id="073ca-250">Dit is nodig om te beschermen tegen fouten tijdens het shardlet-verkeer.</span><span class="sxs-lookup"><span data-stu-id="073ca-250">This is necessary to protect against failures during the shardlet movement.</span></span> <span data-ttu-id="073ca-251">De integratie van split-samenvoegen met de shard-toewijzing zorgt ervoor dat verbindingen via de gegevens afhankelijke routering API's met de **OpenConnectionForKey** methode voor de shard-toewijzing een inconsistente tussenliggende statussen niet ziet.</span><span class="sxs-lookup"><span data-stu-id="073ca-251">The integration of split-merge with the shard map ensures that connections through the data dependent routing APIs using the **OpenConnectionForKey** method on the shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="073ca-252">Echter, bij het verbinden met de bron- of de doel-shards zonder gebruik van de **OpenConnectionForKey** methode inconsistente tussenliggende statussen mogelijk zichtbaar wanneer merge-gesplitste/move-aanvragen zijn die aan.</span><span class="sxs-lookup"><span data-stu-id="073ca-252">However, when connecting to the source or the target shards without using the **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="073ca-253">Deze verbindingen gedeeltelijke of dubbele resultaten, afhankelijk van de timing of de shard onderliggende de verbinding kunnen worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="073ca-253">These connections may show partial or duplicate results depending on the timing or the shard underlying the connection.</span></span> <span data-ttu-id="073ca-254">Deze beperking bevat momenteel de verbindingen gemaakt door de elastische Schaalfunctionaliteit van meerdere Shard-query.</span><span class="sxs-lookup"><span data-stu-id="073ca-254">This limitation currently includes the connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="073ca-255">De database met metagegevens voor de service gesplitste merge moet niet worden gedeeld tussen verschillende rollen.</span><span class="sxs-lookup"><span data-stu-id="073ca-255">The metadata database for the split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="073ca-256">Een rol van de service gesplitste samenvoegen in fasering moet verwijzen naar een andere metagegevensdatabase dan de productie-rol.</span><span class="sxs-lookup"><span data-stu-id="073ca-256">For example, a role of the split-merge service running in staging needs to point to a different metadata database than the production role.</span></span>

## <a name="billing"></a><span data-ttu-id="073ca-257">Facturering</span><span class="sxs-lookup"><span data-stu-id="073ca-257">Billing</span></span>
<span data-ttu-id="073ca-258">De splitsing merge-service wordt uitgevoerd als een cloudservice in uw Microsoft Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="073ca-258">The split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="073ca-259">Kosten voor cloudservices zijn daarom van toepassing op uw exemplaar van de service.</span><span class="sxs-lookup"><span data-stu-id="073ca-259">Therefore charges for cloud services apply to your instance of the service.</span></span> <span data-ttu-id="073ca-260">Tenzij u vaak split of merge/verplaatsen bewerkingen uitvoert, wordt u aangeraden verwijderen van uw cloudservice gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="073ca-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="073ca-261">Die kosten voor het werken met opgeslagen of geïmplementeerd cloud service-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="073ca-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="073ca-262">U kunt opnieuw implementeren en de configuratie van uw gemakkelijk uitvoerbare start wanneer u wilt splitsen of samenvoegen bewerkingen uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="073ca-262">You can re-deploy and start your readily runnable configuration whenever you need to perform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="073ca-263">Bewaking</span><span class="sxs-lookup"><span data-stu-id="073ca-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="073ca-264">Status tabellen</span><span class="sxs-lookup"><span data-stu-id="073ca-264">Status tables</span></span>
<span data-ttu-id="073ca-265">De splitsing merge-Service biedt de **RequestStatus** tabel in de store-database van de metagegevens voor de bewaking van voltooide en lopende aanvragen.</span><span class="sxs-lookup"><span data-stu-id="073ca-265">The split-merge Service provides the **RequestStatus** table in the metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="073ca-266">De tabel bevat een rij voor elke aanvraag gesplitste samenvoegen die met dit exemplaar van de gesplitste merge-service is verzonden.</span><span class="sxs-lookup"><span data-stu-id="073ca-266">The table lists a row for each split-merge request that has been submitted to this instance of the split-merge service.</span></span> <span data-ttu-id="073ca-267">Dit biedt de volgende informatie voor elke aanvraag:</span><span class="sxs-lookup"><span data-stu-id="073ca-267">It gives the following information for each request:</span></span>

* <span data-ttu-id="073ca-268">**Tijdstempel**: de tijd en datum waarop de aanvraag is gestart.</span><span class="sxs-lookup"><span data-stu-id="073ca-268">**Timestamp**: The time and date when the request was started.</span></span>
* <span data-ttu-id="073ca-269">**OperationId**: een GUID die de aanvraag wordt aangeduid.</span><span class="sxs-lookup"><span data-stu-id="073ca-269">**OperationId**: A GUID that uniquely identifies the request.</span></span> <span data-ttu-id="073ca-270">Deze aanvraag kan ook worden gebruikt voor de bewerking annuleert, terwijl deze nog steeds uitgevoerd wordt.</span><span class="sxs-lookup"><span data-stu-id="073ca-270">This request can also be used to cancel the operation while it is still ongoing.</span></span>
* <span data-ttu-id="073ca-271">**Status**: de huidige status van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="073ca-271">**Status**: The current state of the request.</span></span> <span data-ttu-id="073ca-272">Voor actieve aanvragen, ook geeft de huidige fase waarin de aanvraag is.</span><span class="sxs-lookup"><span data-stu-id="073ca-272">For ongoing requests, it also lists the current phase in which the request is.</span></span>
* <span data-ttu-id="073ca-273">**CancelRequest**: een vlag die aangeeft of de aanvraag is geannuleerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-273">**CancelRequest**: A flag that indicates whether the request has been cancelled.</span></span>
* <span data-ttu-id="073ca-274">**Voortgang**: een percentage van de schatting van voor de bewerking is voltooid.</span><span class="sxs-lookup"><span data-stu-id="073ca-274">**Progress**: A percentage estimate of completion for the operation.</span></span> <span data-ttu-id="073ca-275">Een waarde van 50 geeft aan dat de bewerking ongeveer 50% voltooid.</span><span class="sxs-lookup"><span data-stu-id="073ca-275">A value of 50 indicates that the operation is approximately 50% complete.</span></span>
* <span data-ttu-id="073ca-276">**Details**: een XML-waarde die een gedetailleerdere voortgangsrapport biedt.</span><span class="sxs-lookup"><span data-stu-id="073ca-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="073ca-277">Het voortgangsrapport wordt regelmatig bijgewerkt als sets van rijen worden gekopieerd van bron naar doel.</span><span class="sxs-lookup"><span data-stu-id="073ca-277">The progress report is periodically updated as sets of rows are copied from source to target.</span></span> <span data-ttu-id="073ca-278">In geval van fouten en uitzonderingen in deze kolom ook meer gedetailleerde informatie over de fout bevat.</span><span class="sxs-lookup"><span data-stu-id="073ca-278">In case of failures or exceptions, this column also includes more detailed information about the failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="073ca-279">Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="073ca-279">Azure Diagnostics</span></span>
<span data-ttu-id="073ca-280">De service gesplitste samenvoegen gebruikt Azure Diagnostics op basis van de Azure SDK 2.5 voor controle en diagnostische gegevens.</span><span class="sxs-lookup"><span data-stu-id="073ca-280">The split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="073ca-281">U de configuratie van diagnostische beheren, zoals hier wordt beschreven: [diagnostische gegevens inschakelen in Azure Cloud Services en virtuele Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="073ca-281">You control the diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="073ca-282">Het downloadpakket bevat twee diagnostics configuraties, één voor de Webserverrol en één voor de werkrol.</span><span class="sxs-lookup"><span data-stu-id="073ca-282">The download package includes two diagnostics configurations - one for the web role and one for the worker role.</span></span> <span data-ttu-id="073ca-283">Deze configuraties voor diagnostische gegevens voor de service Volg de richtlijnen van [Cloud Service grondbeginselen in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="073ca-283">These diagnostics configurations for the service follow the guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="073ca-284">Het bevat de definities voor logboekregistratie van prestatiemeteritems, IIS-logboeken, Windows-gebeurtenislogboeken en gebeurtenislogboeken van toepassingen gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="073ca-284">It includes the definitions to log Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="073ca-285">Diagnostische gegevens implementeren</span><span class="sxs-lookup"><span data-stu-id="073ca-285">Deploy Diagnostics</span></span>
<span data-ttu-id="073ca-286">Als u de controle en diagnostische gegevens met behulp van de diagnostische configuratie voor de web- en werkrollen rollen geleverd door het NuGet-pakket, voert u de volgende met Azure PowerShell-opdrachten:</span><span class="sxs-lookup"><span data-stu-id="073ca-286">To enable monitoring and diagnostics using the diagnostic configuration for the web and worker roles provided by the NuGet package, run the following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="073ca-287">U vindt meer informatie over het configureren en implementeren van diagnostische instellingen hier: [diagnostische gegevens inschakelen in Azure Cloud Services en virtuele Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="073ca-287">You can find more information on how to configure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="073ca-288">Diagnostische gegevens ophalen</span><span class="sxs-lookup"><span data-stu-id="073ca-288">Retrieve diagnostics</span></span>
<span data-ttu-id="073ca-289">U kunt eenvoudig uw diagnostics openen vanaf Visual Studio Server Explorer in de Azure, deel van de Server Explorer-structuur.</span><span class="sxs-lookup"><span data-stu-id="073ca-289">You can easily access your diagnostics from the Visual Studio Server Explorer in the Azure part of the Server Explorer tree.</span></span> <span data-ttu-id="073ca-290">Open een exemplaar van de Visual Studio en in de menubalk op weergeven en Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="073ca-290">Open a Visual Studio instance, and in the menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="073ca-291">Klik op het pictogram voor verbinding maken met uw Azure-abonnement in Azure.</span><span class="sxs-lookup"><span data-stu-id="073ca-291">Click the Azure icon to connect to your Azure subscription.</span></span> <span data-ttu-id="073ca-292">Ga naar Azure Storage -> -> <your storage account> -> tabellen-WADLogsTable >.</span><span class="sxs-lookup"><span data-stu-id="073ca-292">Then navigate to Azure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="073ca-293">Zie voor meer informatie [opslagbronnen bladeren met Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="073ca-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="073ca-295">De WADLogsTable gemarkeerd in de bovenstaande afbeelding bevat de gedetailleerde gebeurtenissen uit het toepassingslogboek van de gesplitste merge-service.</span><span class="sxs-lookup"><span data-stu-id="073ca-295">The WADLogsTable highlighted in the figure above contains the detailed events from the split-merge service’s application log.</span></span> <span data-ttu-id="073ca-296">Houd er rekening mee dat de standaardconfiguratie van het gedownloade pakket is gericht op een productie-implementatie.</span><span class="sxs-lookup"><span data-stu-id="073ca-296">Note that the default configuration of the downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="073ca-297">Daarom is het interval waarmee logboeken en prestatiemeteritems worden opgehaald uit de service-exemplaren grote (5 minuten).</span><span class="sxs-lookup"><span data-stu-id="073ca-297">Therefore the interval at which logs and counters are pulled from the service instances is large (5 minutes).</span></span> <span data-ttu-id="073ca-298">Voor testen en ontwikkeling, het interval te verlagen door de instellingen voor diagnostische gegevens van de web- of de werkrol aan uw behoeften aan te passen.</span><span class="sxs-lookup"><span data-stu-id="073ca-298">For test and development, lower the interval by adjusting the diagnostics settings of the web or the worker role to your needs.</span></span> <span data-ttu-id="073ca-299">Met de rechtermuisknop op de rol in de Visual Studio Server Explorer (Zie hierboven) en past u de periode Transfer in het dialoogvenster voor de configuratie-instellingen voor diagnostische gegevens:</span><span class="sxs-lookup"><span data-stu-id="073ca-299">Right-click on the role in the Visual Studio Server Explorer (see above) and then adjust the Transfer Period in the dialog for the Diagnostics configuration settings:</span></span> 

![Configuratie][3]

## <a name="performance"></a><span data-ttu-id="073ca-301">Prestaties</span><span class="sxs-lookup"><span data-stu-id="073ca-301">Performance</span></span>
<span data-ttu-id="073ca-302">Betere prestaties is over het algemeen des te hoger meer zodat Servicelagen in Azure SQL Database worden verwacht.</span><span class="sxs-lookup"><span data-stu-id="073ca-302">In general, better performance is to be expected from the higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="073ca-303">Hogere i/o, CPU en geheugen toewijzingen voor de hogere Servicelagen profiteren van de bulksgewijs kopiëren en verwijderen van bewerkingen die gebruikmaakt van de service gesplitste samenvoegen.</span><span class="sxs-lookup"><span data-stu-id="073ca-303">Higher IO, CPU and memory allocations for the higher service tiers benefit the bulk copy and delete operations that the split-merge service uses.</span></span> <span data-ttu-id="073ca-304">Daarom moet de servicelaag slechts voor deze databases voor een gedefinieerde, beperkte periode te vergroten.</span><span class="sxs-lookup"><span data-stu-id="073ca-304">For that reason, increase the service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="073ca-305">De service worden ook de validatie van query's als onderdeel van de normale bewerkingen uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="073ca-305">The service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="073ca-306">Deze validatie van query's controleren op onverwachte aanwezigheid van gegevens in het doelbereik en zorg ervoor dat een merge-gesplitste/move-bewerking wordt gestart van een consistente status.</span><span class="sxs-lookup"><span data-stu-id="073ca-306">These validation queries check for unexpected presence of data in the target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="073ca-307">Deze alle query's werken via sharding sleutelbereiken gedefinieerd door het bereik van de bewerking en de grootte van de partij geleverd als onderdeel van de definitie van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="073ca-307">These queries all work over sharding key ranges defined by the scope of the operation and the batch size provided as part of the request definition.</span></span> <span data-ttu-id="073ca-308">Deze query's werken het beste als een index aanwezig is waarvan de sharding sleutel als de toonaangevende kolom heeft.</span><span class="sxs-lookup"><span data-stu-id="073ca-308">These queries perform best when an index is present that has the sharding key as the leading column.</span></span> 

<span data-ttu-id="073ca-309">Uniekheid van eigenschap met de sleutel sharding als de toonaangevende kolom kan bovendien de service moet een geoptimaliseerde aanpak die brongebruik in termen van logboekruimte en geheugen beperkt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="073ca-309">In addition, a uniqueness property with the sharding key as the leading column will allow the service to use an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="073ca-310">Deze eigenschap uniekheid is vereist voor het verplaatsen van grote hoeveelheden gegevens grootten (meestal meer dan 1GB).</span><span class="sxs-lookup"><span data-stu-id="073ca-310">This uniqueness property is required to move large data sizes (typically above 1GB).</span></span> 

## <a name="how-to-upgrade"></a><span data-ttu-id="073ca-311">Bijwerken</span><span class="sxs-lookup"><span data-stu-id="073ca-311">How to upgrade</span></span>
1. <span data-ttu-id="073ca-312">Volg de stappen in [implementeren van een service gesplitste samenvoegen](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="073ca-312">Follow the steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="073ca-313">Wijzig het configuratiebestand voor cloud-service voor uw implementatie gesplitste samenvoegen in overeenstemming met de configuratieparameters voor de nieuwe.</span><span class="sxs-lookup"><span data-stu-id="073ca-313">Change your cloud service configuration file for your split-merge deployment to reflect the new configuration parameters.</span></span> <span data-ttu-id="073ca-314">Een nieuwe vereiste parameter is de informatie over het certificaat dat wordt gebruikt voor versleuteling.</span><span class="sxs-lookup"><span data-stu-id="073ca-314">A new required parameter is the information about the certificate used for encryption.</span></span> <span data-ttu-id="073ca-315">Een eenvoudige manier om dit te doen, is het nieuwe bestand van de sjabloon configuratie van de download op basis van uw bestaande configuratie te vergelijken.</span><span class="sxs-lookup"><span data-stu-id="073ca-315">An easy way to do this is to compare the new configuration template file from the download against your existing configuration.</span></span> <span data-ttu-id="073ca-316">Zorg ervoor dat u de instellingen voor 'DataEncryptionPrimaryCertificateThumbprint' en 'DataEncryptionPrimary' voor de web- en de werkrol toevoegen.</span><span class="sxs-lookup"><span data-stu-id="073ca-316">Make sure you add the settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both the web and the worker role.</span></span>
3. <span data-ttu-id="073ca-317">Zorg ervoor dat alle lopende gesplitste merge-bewerkingen zijn voltooid voordat u Azure implementeert de update.</span><span class="sxs-lookup"><span data-stu-id="073ca-317">Before deploying the update to Azure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="073ca-318">U kunt dit eenvoudig doen door het opvragen van de RequestStatus en PendingWorkflows tabellen in de metagegevensdatabase gesplitste samenvoegen voor actieve aanvragen.</span><span class="sxs-lookup"><span data-stu-id="073ca-318">You can easily do this by querying the RequestStatus and PendingWorkflows tables in the split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="073ca-319">Werk uw bestaande cloud service-implementatie voor split-samenvoegen in uw Azure-abonnement met het nieuwe pakket en uw bijgewerkte serviceconfiguratiebestand.</span><span class="sxs-lookup"><span data-stu-id="073ca-319">Update your existing cloud service deployment for split-merge in your Azure subscription with the new package and your updated service configuration file.</span></span>

<span data-ttu-id="073ca-320">U hoeft niet voor het inrichten van een nieuwe metagegevensdatabase voor split-samenvoegen om bij te werken.</span><span class="sxs-lookup"><span data-stu-id="073ca-320">You do not need to provision a new metadata database for split-merge to upgrade.</span></span> <span data-ttu-id="073ca-321">De nieuwe versie wordt automatisch de bestaande metagegevensdatabase van een upgrade naar de nieuwe versie.</span><span class="sxs-lookup"><span data-stu-id="073ca-321">The new version will automatically upgrade your existing metadata database to the new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="073ca-322">Aanbevolen procedures en probleemoplossing</span><span class="sxs-lookup"><span data-stu-id="073ca-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="073ca-323">Definieer een testtenant en uw belangrijkste split of merge/verplaatsen bewerkingen met de testtenant uitoefenen over meerdere shards.</span><span class="sxs-lookup"><span data-stu-id="073ca-323">Define a test tenant and exercise your most important split/merge/move operations with the test tenant across several shards.</span></span> <span data-ttu-id="073ca-324">Zorg ervoor dat alle metagegevens correct is gedefinieerd in de shard-toewijzing en dat de bewerkingen niet-beperkingen of refererende sleutels schenden.</span><span class="sxs-lookup"><span data-stu-id="073ca-324">Ensure that all metadata is defined correctly in your shard map and that the operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="073ca-325">Houd de testtenant problemen met betrekking tot de omvang van gegevens boven de maximale grootte van uw grootste tenant zodat u niet gegevensgrootte doe.</span><span class="sxs-lookup"><span data-stu-id="073ca-325">Keep the test tenant data size above the maximum data size of your largest tenant to ensure you are not encountering data size related issues.</span></span> <span data-ttu-id="073ca-326">Zo kunt u een bovengrens van de tijd die nodig is voor het verplaatsen van een enkele tenant te beoordelen.</span><span class="sxs-lookup"><span data-stu-id="073ca-326">This helps you assess an upper bound on the time it takes to move a single tenant around.</span></span> 
* <span data-ttu-id="073ca-327">Zorg ervoor dat uw schema verwijderingen toestaat.</span><span class="sxs-lookup"><span data-stu-id="073ca-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="073ca-328">De service gesplitste samenvoegen vereist de mogelijkheid om gegevens te verwijderen uit de bron-shard nadat de gegevens is gekopieerd naar het doel.</span><span class="sxs-lookup"><span data-stu-id="073ca-328">The split-merge service requires the ability to remove data from the source shard once the data has been successfully copied to the target.</span></span> <span data-ttu-id="073ca-329">Bijvoorbeeld: **triggers verwijderen** kunt voorkomen dat de service verwijderen van de gegevens op de bron- en kan leiden tot bewerkingen mislukken.</span><span class="sxs-lookup"><span data-stu-id="073ca-329">For example, **delete triggers** can prevent the service from deleting the data on the source and may cause operations to fail.</span></span>
* <span data-ttu-id="073ca-330">De sharding-sleutel moet de toonaangevende kolom in de primaire sleutel of unieke indexdefinitie.</span><span class="sxs-lookup"><span data-stu-id="073ca-330">The sharding key should be the leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="073ca-331">Die ervoor zorgt voor de beste prestaties voor de splitsen of samenvoegen validatie-query's en de bewerkingen voor de actuele gegevens verplaatsing en verwijderen die altijd werken op sharding sleutelbereiken.</span><span class="sxs-lookup"><span data-stu-id="073ca-331">That ensures the best performance for the split or merge validation queries, and for the actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="073ca-332">Plaatsen van uw service gesplitste samenvoegen in de regio en Datacenter waar uw database zich bevinden.</span><span class="sxs-lookup"><span data-stu-id="073ca-332">Collocate your split-merge service in the region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

