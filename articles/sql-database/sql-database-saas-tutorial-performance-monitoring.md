---
title: aaaMonitor prestaties van veel Azure SQL-databases in een multitenant SaaS-app | Microsoft Docs
description: Bewaken en beheren van de prestaties van databases en pools in hello Azure SQL Database Wingtip SaaS-app
keywords: zelfstudie sql-database
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="42500-104">Bewaking van prestaties van Hallo Wingtip SaaS-toepassing</span><span class="sxs-lookup"><span data-stu-id="42500-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="42500-105">In deze zelfstudie worden de verschillende prestatie scenario's voor beheer in de SaaS-toepassingen gebruikt verkend.</span><span class="sxs-lookup"><span data-stu-id="42500-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="42500-106">Met behulp van een activiteit load generator toosimulate voor alle databases van de tenant, worden Hallo ingebouwde bewaking en waarschuwingen functies van SQL-Database en elastische pools uitgelegd.</span><span class="sxs-lookup"><span data-stu-id="42500-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="42500-107">Hallo Wingtip SaaS app gebruikmaakt van een één-tenant-gegevensmodel waar elke locatie vast (tenant) hun eigen database heeft.</span><span class="sxs-lookup"><span data-stu-id="42500-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="42500-108">Net als veel SaaS-toepassingen verwachten Hallo tenant werkbelasting patroon is onvoorspelbare en sporadisch.</span><span class="sxs-lookup"><span data-stu-id="42500-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="42500-109">Met andere woorden, kaartverkoop kan op ieder moment plaatsvinden.</span><span class="sxs-lookup"><span data-stu-id="42500-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="42500-110">tootake profiteren van deze databases meestal gebruikspatroon, tenant databases zijn geïmplementeerd in pools voor elastische databases.</span><span class="sxs-lookup"><span data-stu-id="42500-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="42500-111">Elastische pools optimaliseren Hallo kosten van een oplossing die resources delen tussen meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="42500-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="42500-112">Met dit type patroon, is het belangrijk toomonitor database en groep resource gebruik tooensure dat wordt geladen redelijkerwijs verdeeld zijn over groepen.</span><span class="sxs-lookup"><span data-stu-id="42500-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="42500-113">U moet ook tooensure of afzonderlijke databases voldoende resources hebt en dat groepen zijn niet kunt u door hun [eDTU](sql-database-what-is-a-dtu.md) limieten.</span><span class="sxs-lookup"><span data-stu-id="42500-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="42500-114">Deze zelfstudie behandelt manieren toomonitor en beheren van databases en pools, en hoe tootake corrigerende maatregelen in antwoord toovariations in werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="42500-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="42500-115">In deze zelfstudie leert u het volgende:</span><span class="sxs-lookup"><span data-stu-id="42500-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="42500-116">Gebruik op Hallo tenant databases door het uitvoeren van een opgegeven load generator simuleren</span><span class="sxs-lookup"><span data-stu-id="42500-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="42500-117">Monitor Hallo tenant zoals ze toohello toename van de load reageren-databases</span><span class="sxs-lookup"><span data-stu-id="42500-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="42500-118">Hallo opschalen met elastische pool in antwoord toohello toegenomen database laden</span><span class="sxs-lookup"><span data-stu-id="42500-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="42500-119">Een tweede elastische pool tooload saldo database activiteit inrichten</span><span class="sxs-lookup"><span data-stu-id="42500-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="42500-120">toocomplete in deze zelfstudie, zorg ervoor dat Hallo volgende vereisten zijn voltooid:</span><span class="sxs-lookup"><span data-stu-id="42500-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="42500-121">Hallo Wingtip SaaS-app wordt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="42500-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="42500-122">Zie toodeploy in minder dan vijf minuten [implementeren en verkennen Hallo Wingtip SaaS-toepassing](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="42500-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="42500-123">Azure PowerShell is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="42500-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="42500-124">Zie [Aan de slag met Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="42500-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="42500-125">Inleiding tooSaaS prestaties management patronen</span><span class="sxs-lookup"><span data-stu-id="42500-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="42500-126">Het beheren van de prestaties van de database bestaat uit het compileren en prestatiegegevens analyseren en vervolgens reageren toothis gegevens door aan te passen parameters toomaintain een acceptabele reactietijd voor uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="42500-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="42500-127">Bij het hosten van meerdere tenants pools voor elastische databases zijn een rendabele manier tooprovide resources en beheren voor een groep van databases met onvoorspelbare werkbelastingen.</span><span class="sxs-lookup"><span data-stu-id="42500-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="42500-128">Met bepaalde workloadpatronen kan het al bij twee S3-databases voordelig zijn om ze door een pool te laten beheren.</span><span class="sxs-lookup"><span data-stu-id="42500-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![media](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="42500-130">Pools en Hallo-databases in pools moet bewaakte tooensure ze binnen acceptabele prestaties blijven.</span><span class="sxs-lookup"><span data-stu-id="42500-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="42500-131">Hallo groep configuratie toomeet Hallo behoeften van de cumulatieve werkbelasting Hallo van alle databases, ervoor te zorgen dat Hallo groepen met edtu's geschikt is voor Hallo stemmen Algehele werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="42500-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="42500-132">Hallo per database minimum- en per database max eDTU waarden tooappropriate waarden aanpassen voor uw specifieke vereisten.</span><span class="sxs-lookup"><span data-stu-id="42500-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="42500-133">Strategieën voor prestatiebeheer</span><span class="sxs-lookup"><span data-stu-id="42500-133">Performance management strategies</span></span>

* <span data-ttu-id="42500-134">tooavoid toomanually monitor prestaties, met het meest effectieve is te**waarschuwingen die wordt geactiveerd wanneer databases of groepen buiten het normale adresbereiken afwijken instellen**.</span><span class="sxs-lookup"><span data-stu-id="42500-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="42500-135">toorespond tooshort term schommelingen in Hallo cumulatieve prestatieniveau van een groep Hallo **pool-eDTU niveau kan worden geschaald omhoog of omlaag**.</span><span class="sxs-lookup"><span data-stu-id="42500-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="42500-136">Als deze fluctuatie op een basis reguliere of voorspelbare optreedt **schalen Hallo van toepassingen kan worden geplande toooccur automatisch**.</span><span class="sxs-lookup"><span data-stu-id="42500-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="42500-137">U kunt bijvoorbeeld omlaag schalen wanneer de workload licht is, zoals 's nachts of tijdens het weekend.</span><span class="sxs-lookup"><span data-stu-id="42500-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="42500-138">toorespond toolonger term schommelingen of wijzigingen in het aantal databases, Hallo **afzonderlijke databases kunnen worden verplaatst in andere groepen**.</span><span class="sxs-lookup"><span data-stu-id="42500-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="42500-139">toename van de toorespond tooshort term *afzonderlijke* belasting van de database **afzonderlijke databases kunnen worden genomen buiten een pool en een afzonderlijke prestatieniveau toegewezen**.</span><span class="sxs-lookup"><span data-stu-id="42500-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="42500-140">Zodra het Hallo laden wordt verminderd, kan Hallo-database vervolgens worden geretourneerd toohello van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="42500-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="42500-141">Wanneer dit van tevoren bekend, kunnen databases worden verplaatst pre-emptively tooensure Hallo-database heeft altijd Hallo resources moet en tooavoid impact op andere databases in de groep Hallo.</span><span class="sxs-lookup"><span data-stu-id="42500-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="42500-142">Deze vereiste is voorspelbaar, zoals een u wilt een snel uitgevoerd van de verkoop ticket voor een populaire gebeurtenis voordoet, kan dit gedrag management worden geïntegreerd in de toepassing hello.</span><span class="sxs-lookup"><span data-stu-id="42500-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="42500-143">Hallo [Azure-portal](https://portal.azure.com) biedt ingebouwde bewaking en waarschuwingen op de meeste bronnen.</span><span class="sxs-lookup"><span data-stu-id="42500-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="42500-144">Voor SQL Database zijn bewaking en waarschuwingen beschikbaar voor databases en pools.</span><span class="sxs-lookup"><span data-stu-id="42500-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="42500-145">Deze ingebouwde bewaking en waarschuwingen is resource-specifieke, zodat het handige toouse voor een klein aantal bronnen is, maar niet erg handig is als u werkt met veel resources.</span><span class="sxs-lookup"><span data-stu-id="42500-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="42500-146">Voor grootschalige scenario's waarin u met veel reources werkt [logboekanalyse (OMS)](sql-database-saas-tutorial-log-analytics.md) kan worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="42500-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="42500-147">Dit is een afzonderlijke Azure-service die in analyse via verzonden diagnostische logboeken en telemetrie verzameld in een log analytics-werkruimte voorziet.</span><span class="sxs-lookup"><span data-stu-id="42500-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="42500-148">Log Analytics kunt verzamelen van telemetriegegevens van veel services en gebruikte tooquery en waarschuwingen instellen.</span><span class="sxs-lookup"><span data-stu-id="42500-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="42500-149">Hallo Wingtip toepassing broncode en scripts ophalen</span><span class="sxs-lookup"><span data-stu-id="42500-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="42500-150">Hallo Wingtip SaaS-scripts en broncode van toepassing zijn beschikbaar in Hallo [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-opslagplaats.</span><span class="sxs-lookup"><span data-stu-id="42500-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="42500-151">[Stappen toodownload Hallo Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="42500-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="42500-152">Extra tenants inrichten</span><span class="sxs-lookup"><span data-stu-id="42500-152">Provision additional tenants</span></span>

<span data-ttu-id="42500-153">Groepen kunnen zijn met slechts twee S3 databases rendabele, Hallo meer databases die zich in Hallo groep Hallo rendabeler Hallo gemiddelde van kracht wordt.</span><span class="sxs-lookup"><span data-stu-id="42500-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="42500-154">U hebt voor deze zelfstudie ten minste 20 geïmplementeerde databases nodig om een goed inzicht te krijgen in de werking van het bewaken en beheren van prestaties op schaal.</span><span class="sxs-lookup"><span data-stu-id="42500-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="42500-155">Als u al een batch van tenants in een eerdere zelfstudie voorzien, gaat u verder toohello [simuleren-gebruik op alle databases van de tenant](#simulate-usage-on-all-tenant-databases) sectie.</span><span class="sxs-lookup"><span data-stu-id="42500-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="42500-156">Open... \\Learning-Modules\\prestatiebewaking en beheer\\*Demo PerformanceMonitoringAndManagement.ps1* in Hallo *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="42500-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="42500-157">Houd dit script open; u gaat verschillende scenario's uitvoeren tijdens deze zelfstudie.</span><span class="sxs-lookup"><span data-stu-id="42500-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="42500-158">Stel het volgende in: **$DemoScenario** = **1**, **Batch met tenants inrichten**</span><span class="sxs-lookup"><span data-stu-id="42500-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="42500-159">Druk op **F5** toorun Hallo script.</span><span class="sxs-lookup"><span data-stu-id="42500-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="42500-160">Hallo script implementeert 17 tenants in minder dan vijf minuten.</span><span class="sxs-lookup"><span data-stu-id="42500-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="42500-161">Hallo *nieuw TenantBatch* script maakt gebruik van een geneste of gekoppelde set [Resource Manager](../azure-resource-manager/index.md) sjablonen die maken van een batch-tenants, die standaard Hallo database kopieert **basetenantdb** op Hallo catalogus server toocreate Hallo nieuwe tenant-databases en vervolgens geregistreerd in de catalogus Hallo en ten slotte als wordt geïnitialiseerd met Hallo tenant naam en u wilt.</span><span class="sxs-lookup"><span data-stu-id="42500-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="42500-162">Dit komt overeen met de Hallo manier Hallo app voorziet in een nieuwe tenant.</span><span class="sxs-lookup"><span data-stu-id="42500-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="42500-163">Eventuele wijzigingen te*basetenantdb* toegepaste tooany nieuwe tenants daarna ingericht zijn.</span><span class="sxs-lookup"><span data-stu-id="42500-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="42500-164">Zie Hallo [Schemabeheer zelfstudie](sql-database-saas-tutorial-schema-management.md) toosee hoe toomake schema te verandert*bestaande* tenant-databases (inclusief Hallo *basetenantdb* database).</span><span class="sxs-lookup"><span data-stu-id="42500-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="42500-165">Gebruik simuleren op alle tenantdatabases</span><span class="sxs-lookup"><span data-stu-id="42500-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="42500-166">Hallo *Demo PerformanceMonitoringAndManagement.ps1* script is opgegeven dat een werkbelasting die wordt uitgevoerd op alle databases van de tenant simuleert.</span><span class="sxs-lookup"><span data-stu-id="42500-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="42500-167">Hallo load wordt gegenereerd met behulp van een Hallo beschikbare load-scenario's:</span><span class="sxs-lookup"><span data-stu-id="42500-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="42500-168">Demo</span><span class="sxs-lookup"><span data-stu-id="42500-168">Demo</span></span> | <span data-ttu-id="42500-169">Scenario</span><span class="sxs-lookup"><span data-stu-id="42500-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="42500-170">2</span><span class="sxs-lookup"><span data-stu-id="42500-170">2</span></span> | <span data-ttu-id="42500-171">Belasting met normale intensiteit genereren (ongeveer 40 DTU's)</span><span class="sxs-lookup"><span data-stu-id="42500-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="42500-172">3</span><span class="sxs-lookup"><span data-stu-id="42500-172">3</span></span> | <span data-ttu-id="42500-173">Load genereren met langere en frequentere bursts per database</span><span class="sxs-lookup"><span data-stu-id="42500-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="42500-174">4</span><span class="sxs-lookup"><span data-stu-id="42500-174">4</span></span> | <span data-ttu-id="42500-175">Load genereren met meer DTU-bursts per database (ongeveer 80 DTU's)</span><span class="sxs-lookup"><span data-stu-id="42500-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="42500-176">5</span><span class="sxs-lookup"><span data-stu-id="42500-176">5</span></span> | <span data-ttu-id="42500-177">Een normale load en hoge load genereren op één tenant (ongeveer 95 DTU's)</span><span class="sxs-lookup"><span data-stu-id="42500-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="42500-178">6</span><span class="sxs-lookup"><span data-stu-id="42500-178">6</span></span> | <span data-ttu-id="42500-179">Niet-gebalanceerde load genereren voor meerdere pools</span><span class="sxs-lookup"><span data-stu-id="42500-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="42500-180">Hallo load generator van toepassing is een *synthetische* alleen CPU-belasting tooevery tenant-database.</span><span class="sxs-lookup"><span data-stu-id="42500-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="42500-181">Hallo generator start een taak voor elke tenant-database, die een opgeslagen procedure periodiek die Hallo load genereert aanroept.</span><span class="sxs-lookup"><span data-stu-id="42500-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="42500-182">Hallo belastingsniveaus (in edtu's), duur en intervallen voor alle databases, onvoorspelbare tenant activiteit simuleren verspreid.</span><span class="sxs-lookup"><span data-stu-id="42500-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="42500-183">Open... \\Learning-Modules\\prestatiebewaking en beheer\\*Demo PerformanceMonitoringAndManagement.ps1* in Hallo *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="42500-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="42500-184">Houd dit script open; u gaat verschillende scenario's uitvoeren tijdens deze zelfstudie.</span><span class="sxs-lookup"><span data-stu-id="42500-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="42500-185">Stel **$DemoScenario** = **2**, *genereren normale intensiteit load*.</span><span class="sxs-lookup"><span data-stu-id="42500-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="42500-186">Druk op **F5** tooapply een load-tooall uw tenant-databases.</span><span class="sxs-lookup"><span data-stu-id="42500-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="42500-187">Wingtip is een SaaS-app en Hallo echte belasting van een SaaS-app is doorgaans sporadisch en onvoorspelbaar.</span><span class="sxs-lookup"><span data-stu-id="42500-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="42500-188">toosimulate dit Hallo load generator produceert een willekeurige belasting verdeeld over alle tenants.</span><span class="sxs-lookup"><span data-stu-id="42500-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="42500-189">Enkele minuten nodig zijn voor Hallo load patroon tooemerge, dus uitvoeren Hallo load generator gedurende 3-5 minuten voordat u probeert de werklast van toomonitor Hallo Hallo uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="42500-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="42500-190">Hallo load generator wordt uitgevoerd als een reeks taken in uw lokale PowerShell-sessie.</span><span class="sxs-lookup"><span data-stu-id="42500-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="42500-191">Hallo houden *Demo PerformanceMonitoringAndManagement.ps1* tabblad is geopend.</span><span class="sxs-lookup"><span data-stu-id="42500-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="42500-192">Als u Hallo tab sluiten of onderbreken van de computer, stopt Hallo load generator.</span><span class="sxs-lookup"><span data-stu-id="42500-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="42500-193">Hallo load generator blijft in een *aanroepen van de taak* status waar belasting van een nieuwe tenants die zijn ingericht genereert nadat Hallo generator is gestart.</span><span class="sxs-lookup"><span data-stu-id="42500-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="42500-194">Gebruik *Ctrl-C* toostop nieuwe taken en afsluiten Hallo script wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="42500-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="42500-195">Hallo load generator blijven toorun, maar alleen op bestaande tenants.</span><span class="sxs-lookup"><span data-stu-id="42500-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="42500-196">Resourcegebruik hello Azure-portal met bewaken</span><span class="sxs-lookup"><span data-stu-id="42500-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="42500-197">toomonitor hello Resourcegebruik die resultaten van Hallo laden wordt toegepast, open Hallo portal toohello groep met Hallo tenant databases:</span><span class="sxs-lookup"><span data-stu-id="42500-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="42500-198">Open Hallo [Azure-portal](https://portal.azure.com) en blader toohello *tenants1 -&lt;gebruiker&gt;*  server.</span><span class="sxs-lookup"><span data-stu-id="42500-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="42500-199">Scrol naar beneden, zoek de elastische pools en klik op **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="42500-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="42500-200">Deze groep bevat alle Hallo tenant databases gemaakt tot nu toe.</span><span class="sxs-lookup"><span data-stu-id="42500-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="42500-201">Hallo observeren **elastische pool bewaking** en **elastische database bewaken** grafieken.</span><span class="sxs-lookup"><span data-stu-id="42500-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="42500-202">Hallo is Resourcegebruik van de groep van toepassingen Hallo statistische database gebruik voor alle databases in Hallo-groep.</span><span class="sxs-lookup"><span data-stu-id="42500-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="42500-203">Hallo database diagram toont Hallo vijf gegevensbeheer databases:</span><span class="sxs-lookup"><span data-stu-id="42500-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="42500-204">Omdat er extra databases zijn in de groep Hallo buiten Hallo van bovenste vijf, Hallo groep gebruik toont activiteit die niet wordt weergegeven in het bovenste vijf databases grafiek Hallo.</span><span class="sxs-lookup"><span data-stu-id="42500-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="42500-205">Klik voor meer informatie **Database Resourcegebruik**:</span><span class="sxs-lookup"><span data-stu-id="42500-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="42500-206">Prestatiewaarschuwingen op Hallo van toepassingen instellen</span><span class="sxs-lookup"><span data-stu-id="42500-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="42500-207">Een waarschuwing instellen op Hallo van toepassingen die u activeert op \>75% gebruik als volgt:</span><span class="sxs-lookup"><span data-stu-id="42500-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="42500-208">Open *Pool1* (op Hallo *tenants1 -\<gebruiker\>*  server) in Hallo [Azure-portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="42500-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="42500-209">Klik op **Waarschuwingsregels** en klik vervolgens op **+ Waarschuwing toevoegen**:</span><span class="sxs-lookup"><span data-stu-id="42500-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![waarschuwing toevoegen](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="42500-211">Geef een naam op, bijvoorbeeld **hoog DTU**.</span><span class="sxs-lookup"><span data-stu-id="42500-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="42500-212">Stel Hallo volgende waarden:</span><span class="sxs-lookup"><span data-stu-id="42500-212">Set hello following values:</span></span>
   * <span data-ttu-id="42500-213">**Metriek = eDTU-percentage**</span><span class="sxs-lookup"><span data-stu-id="42500-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="42500-214">**Voorwaarde = groter dan**.</span><span class="sxs-lookup"><span data-stu-id="42500-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="42500-215">**Drempel = 75**.</span><span class="sxs-lookup"><span data-stu-id="42500-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="42500-216">**Periode = via Hallo afgelopen 30 minuten**.</span><span class="sxs-lookup"><span data-stu-id="42500-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="42500-217">Toevoegen van een e-mailadres toohello *aanvullende beheerder email(s)* vak en klikt u op **OK**.</span><span class="sxs-lookup"><span data-stu-id="42500-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![waarschuwing instellen](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="42500-219">Een zwaar belaste pool omhoog schalen</span><span class="sxs-lookup"><span data-stu-id="42500-219">Scale up a busy pool</span></span>

<span data-ttu-id="42500-220">Als Hallo cumulatieve load niveau op een groep toohello verhoogt dat het Hallo-pool maximaliseert en 100% eDTU-gebruik is bereikt, wordt klikt u vervolgens afzonderlijke databaseprestaties beïnvloed, mogelijk vertraging query responstijden voor alle databases in Hallo-groep.</span><span class="sxs-lookup"><span data-stu-id="42500-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="42500-221">**Korte termijn**, overweeg schaalt Hallo groep tooprovide aanvullende bronnen, of databases te verwijderen uit groep hello (verplaatsen van opslaggroepen tooother, of buiten het zelfstandige groepservicelaag tooa Hallo).</span><span class="sxs-lookup"><span data-stu-id="42500-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="42500-222">**Lange termijn**, u kunt query's of gebruik tooimprove databaseprestaties index.</span><span class="sxs-lookup"><span data-stu-id="42500-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="42500-223">Afhankelijk van Hallo van de toepassing gevoeligheid tooperformance, verstrekt de best practice tooscale een pool van voordat het eDTU-gebruik van 100% is bereikt.</span><span class="sxs-lookup"><span data-stu-id="42500-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="42500-224">Gebruik een waarschuwing toowarn u van tevoren.</span><span class="sxs-lookup"><span data-stu-id="42500-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="42500-225">Door toenemende Hallo belasting die wordt geproduceerd door Hallo generator, kunt u een groep bezet simuleren.</span><span class="sxs-lookup"><span data-stu-id="42500-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="42500-226">Waardoor Hallo databases tooburst vaker en voor statistische load langer, toenemende Hallo op Hallo van toepassingen zonder Hallo vereisten van de afzonderlijke databases Hallo.</span><span class="sxs-lookup"><span data-stu-id="42500-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="42500-227">Hallo groep schaalt gebeurt eenvoudig in Hallo-portal of PowerShell.</span><span class="sxs-lookup"><span data-stu-id="42500-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="42500-228">In deze oefening gebruikt Hallo-portal.</span><span class="sxs-lookup"><span data-stu-id="42500-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="42500-229">Stel *$DemoScenario* = **3**, _load genereren met langer en vaker bursts per database_ tooincrease Hallo intensiteit van Hallo cumulatieve belasting op Hallo-pool zonder Hallo piekbelasting vereist voor elke database.</span><span class="sxs-lookup"><span data-stu-id="42500-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="42500-230">Druk op **F5** tooapply een load-tooall uw tenant-databases.</span><span class="sxs-lookup"><span data-stu-id="42500-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="42500-231">Ga te**Pool1** in hello Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="42500-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="42500-232">Monitor Hallo eDTU-gebruik van toepassingen op de bovenste grafiek Hallo verhoogd.</span><span class="sxs-lookup"><span data-stu-id="42500-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="42500-233">Het duurt enkele minuten voordat Hallo nieuwe hogere belasting tookick, maar ziet u snel Hallo van toepassingen starten toohit max gebruik, en als Hallo load steadies in het nieuwe patroon Hallo, het Hallo-groep snel overloads.</span><span class="sxs-lookup"><span data-stu-id="42500-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="42500-234">tooscale up Hallo-groep, klikt u op **pool configureren** bovenaan Hallo Hallo **Pool1** pagina.</span><span class="sxs-lookup"><span data-stu-id="42500-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="42500-235">Hallo aanpassen **groeps-eDTU** instellen te**100**.</span><span class="sxs-lookup"><span data-stu-id="42500-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="42500-236">Hallo groeps-eDTU verandert niet Hallo per database-instellingen (dit is nog steeds 50 eDTU max per database).</span><span class="sxs-lookup"><span data-stu-id="42500-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="42500-237">U ziet Hallo per database-instellingen aan de rechterkant Hallo Hallo **pool configureren** pagina.</span><span class="sxs-lookup"><span data-stu-id="42500-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="42500-238">Klik op **opslaan** toosubmit Hallo aanvraag tooscale Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="42500-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="42500-239">Ga terug te**Pool1** > **overzicht** tooview Hallo bewaking grafieken.</span><span class="sxs-lookup"><span data-stu-id="42500-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="42500-240">Hallo effect van het bieden van Hallo van toepassingen met meer bronnen (Hoewel u met enkele databases en een willekeurige belasting is het niet altijd eenvoudig toosee afdoende totdat u enige tijd uitvoert) controleren.</span><span class="sxs-lookup"><span data-stu-id="42500-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="42500-241">Terwijl u bekijkt hello grafieken voorzien zijn rekening dan 100% op Hallo bovenste wordt nu grafiek vertegenwoordigt 100 edtu's, hoewel op Hallo lager is 100% van de grafiek is nog steeds 50 edtu's als Hallo per database max nog steeds 50 edtu's.</span><span class="sxs-lookup"><span data-stu-id="42500-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="42500-242">Databases blijft online en volledig beschikbaar tijdens Hallo-proces.</span><span class="sxs-lookup"><span data-stu-id="42500-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="42500-243">Momenteel Hallo zijn laatste ogenblik omdat elke database klaar toobe ingeschakeld met nieuwe groeps-eDTU hello, alle actieve verbindingen verbroken.</span><span class="sxs-lookup"><span data-stu-id="42500-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="42500-244">Toepassingscode altijd worden geschreven verbindingen tooretry verwijderd, en dus verbinding toohello database in Hallo omhoog geschaalde-pool wordt hersteld.</span><span class="sxs-lookup"><span data-stu-id="42500-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="42500-245">Taakverdeling tussen mediagroepen</span><span class="sxs-lookup"><span data-stu-id="42500-245">Load balance between pools</span></span>

<span data-ttu-id="42500-246">Als een alternatieve tooscaling up Hallo-groep, een tweede pool maken en verplaatsen van databases in de App toobalance Hallo laden tussen Hallo twee groepen.</span><span class="sxs-lookup"><span data-stu-id="42500-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="42500-247">Deze nieuwe pool Hallo moet worden gemaakt op toodo Hallo dezelfde server als Hallo eerst.</span><span class="sxs-lookup"><span data-stu-id="42500-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="42500-248">In Hallo [Azure-portal](https://portal.azure.com)Open Hallo **tenants1 -&lt;gebruiker&gt;**  server.</span><span class="sxs-lookup"><span data-stu-id="42500-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="42500-249">Klik op **+ nieuwe pool** toocreate een pool op Hallo huidige server.</span><span class="sxs-lookup"><span data-stu-id="42500-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="42500-250">Op Hallo **pool voor elastische database** sjabloon:</span><span class="sxs-lookup"><span data-stu-id="42500-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="42500-251">Stel **naam** te*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="42500-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="42500-252">Hallo prijscategorie als laat **Standaardpool**.</span><span class="sxs-lookup"><span data-stu-id="42500-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="42500-253">Klik op **Groep configureren**.</span><span class="sxs-lookup"><span data-stu-id="42500-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="42500-254">Stel **groeps-eDTU** te*50 eDTU*.</span><span class="sxs-lookup"><span data-stu-id="42500-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="42500-255">Klik op **databases toevoegen** toosee een lijst met databases op Hallo-server die te kunnen worden toegevoegd*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="42500-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="42500-256">Selecteer elke 10 databases toomove deze nieuwe toohello van toepassingen en klik vervolgens op **Selecteer**.</span><span class="sxs-lookup"><span data-stu-id="42500-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="42500-257">Als Hallo load generator aan u is uitgevoerd, weet Hallo-service al dat uw profiel prestaties vereist een grotere groep dan de standaardgrootte 50 eDTU Hallo raadt aan om te beginnen met een 100 eDTU-instelling.</span><span class="sxs-lookup"><span data-stu-id="42500-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![Aanbeveling](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="42500-259">Voor deze zelfstudie laat Hallo standaard op 50 edtu's en op **Selecteer** opnieuw.</span><span class="sxs-lookup"><span data-stu-id="42500-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="42500-260">Selecteer **OK** toocreate Hallo nieuwe pool en toomove Hallo databases geselecteerd in de App.</span><span class="sxs-lookup"><span data-stu-id="42500-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="42500-261">Hallo-toepassingen maken en verplaatsen van databases Hallo duurt een paar minuten.</span><span class="sxs-lookup"><span data-stu-id="42500-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="42500-262">Zoals databases, ze online en toegankelijk blijven totdat Hallo laatste tijdstip verplaatst worden, waarna worden alle geopende verbindingen gesloten.</span><span class="sxs-lookup"><span data-stu-id="42500-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="42500-263">Zolang u een aantal Pogingslogica hebt, maken clients toohello database in de nieuwe groep Hallo vervolgens verbinding.</span><span class="sxs-lookup"><span data-stu-id="42500-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="42500-264">Te bladeren**Pool2** (op Hallo *tenants1* server) tooopen Hallo van toepassingen en zijn prestaties controleren.</span><span class="sxs-lookup"><span data-stu-id="42500-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="42500-265">Als u deze niet ziet, wacht u totdat het inrichten van de nieuwe groep toocomplete Hallo.</span><span class="sxs-lookup"><span data-stu-id="42500-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="42500-266">U ziet nu dat Resourcegebruik op *Pool1* is verwijderd en dat *Pool2* nu op dezelfde manier is geladen.</span><span class="sxs-lookup"><span data-stu-id="42500-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="42500-267">Prestaties van één database beheren</span><span class="sxs-lookup"><span data-stu-id="42500-267">Manage performance of a single database</span></span>

<span data-ttu-id="42500-268">Als een individuele database in een pool een continue hoge belasting, afhankelijk van de configuratie van de groep Hallo krijgt, kan het vaak toodominate Hallo resources in de groep Hallo en invloed zijn op andere databases.</span><span class="sxs-lookup"><span data-stu-id="42500-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="42500-269">Als Hallo activiteit waarschijnlijk toocontinue gedurende een bepaalde periode, kan de Hallo database tijdelijk worden verplaatst buiten het Hallo-groep.</span><span class="sxs-lookup"><span data-stu-id="42500-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="42500-270">Hierdoor kunnen extra bronnen nodig heeft en andere databases geïsoleerd van Hallo Hallo database toohave Hallo.</span><span class="sxs-lookup"><span data-stu-id="42500-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="42500-271">In deze oefening simuleert Hallo effect van Contoso overleg Hall overbelast wanneer tickets verkoop voor een populaire samen.</span><span class="sxs-lookup"><span data-stu-id="42500-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="42500-272">Open Hallo... \\ *Demo PerformanceMonitoringAndManagement.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="42500-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="42500-273">Stel het volgende in: **$DemoScenario = 5, Een normale load en hoge load genereren op één tenant (ongeveer 95 DTU's).**</span><span class="sxs-lookup"><span data-stu-id="42500-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="42500-274">Stel **$SingleTenantDatabaseName = contosoconcerthall** in</span><span class="sxs-lookup"><span data-stu-id="42500-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="42500-275">Uitvoeren van script met behulp van Hallo **F5**.</span><span class="sxs-lookup"><span data-stu-id="42500-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="42500-276">In Hallo [Azure-portal](https://portal.azure.com) openen **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="42500-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="42500-277">Hallo inspecteren **elastische pool bewaking** grafiek en zoekt u Hallo verhoogd pool-eDTU-gebruik.</span><span class="sxs-lookup"><span data-stu-id="42500-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="42500-278">Na een minuut of twee Hallo hogere belasting tookick in moet beginnen en ziet u snel dat Hallo groep treffers 100% gebruik.</span><span class="sxs-lookup"><span data-stu-id="42500-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="42500-279">Hallo inspecteren **elastische database bewaken** weergave waarin Hallo gegevensbeheer databases in Hallo afgelopen uur.</span><span class="sxs-lookup"><span data-stu-id="42500-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="42500-280">Hallo *contosoconcerthall* database moet binnenkort worden weergegeven als een van de populairste databases Hallo vijf.</span><span class="sxs-lookup"><span data-stu-id="42500-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="42500-281">**Klik op het Hallo elastische database bewaken** **grafiek** en deze wordt geopend Hallo **Database Resourcegebruik** pagina waar u een van de databases Hallo kunt bewaken.</span><span class="sxs-lookup"><span data-stu-id="42500-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="42500-282">Hiermee kunt u weergeven voor Hallo Hallo isoleren *contosoconcerthall* database.</span><span class="sxs-lookup"><span data-stu-id="42500-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="42500-283">Hallo-lijst met databases, klik op **contosoconcerthall**.</span><span class="sxs-lookup"><span data-stu-id="42500-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="42500-284">Klik op **prijscategorie (schaal dtu's)** tooopen hello **prestaties configureren** pagina waarin u een zelfstandige prestatieniveau voor Hallo database kunt instellen.</span><span class="sxs-lookup"><span data-stu-id="42500-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="42500-285">Klik op Hallo **standaard** tooopen Hallo schalingsopties in Hallo standaardcategorie tabblad.</span><span class="sxs-lookup"><span data-stu-id="42500-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="42500-286">Schuif Hallo **DTU schuifregelaar** tooright tooselect **100** dtu's.</span><span class="sxs-lookup"><span data-stu-id="42500-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="42500-287">Dit komt overeen met de servicedoelstelling toohello Opmerking **S3**.</span><span class="sxs-lookup"><span data-stu-id="42500-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="42500-288">Klik op **toepassen** toomove Hallo database buiten het Hallo-toepassingen, waardoor het een *Standard-S3* database.</span><span class="sxs-lookup"><span data-stu-id="42500-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="42500-289">Zodra de schaal is voltooid, monitor Hallo effect op Hallo contosoconcerthall database en Pool1 op Hallo elastische toepassingen en de databasegegevens blades.</span><span class="sxs-lookup"><span data-stu-id="42500-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="42500-290">Zodra het Hallo hoge belasting van Hallo contosoconcerthall database subsidies retourneer het toohello groep tooreduce de kosten.</span><span class="sxs-lookup"><span data-stu-id="42500-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="42500-291">Als het is onduidelijk wanneer dat gebeurt u kan een waarschuwing op Hallo database instellen die wordt geactiveerd wanneer de DTU-gebruik onder Hallo per database zakt max op Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="42500-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="42500-292">Het verplaatsen van een database naar een pool wordt beschreven in oefening 5.</span><span class="sxs-lookup"><span data-stu-id="42500-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="42500-293">Andere patronen voor prestatiebeheer</span><span class="sxs-lookup"><span data-stu-id="42500-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="42500-294">**Preventieve schalen** In Hallo oefening waar u verkend hoe tooscale een geïsoleerde-database, u kent welke toolook database voor.</span><span class="sxs-lookup"><span data-stu-id="42500-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="42500-295">Als het Hallo-beheer van Contoso overleg Hall had op de hoogte Wingtips van Hallo aanstaande ticket verkoop, kan Hallo-database zijn verplaatst buiten het Hallo-pool pre-emptively.</span><span class="sxs-lookup"><span data-stu-id="42500-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="42500-296">Anders wordt moest deze waarschijnlijk worden een waarschuwing op Hallo van toepassingen of Hallo database toospot wat is er gebeurt.</span><span class="sxs-lookup"><span data-stu-id="42500-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="42500-297">Je wilt niet dat toolearn hierover van Hallo andere tenants in Hallo groep klagen van verminderde prestaties.</span><span class="sxs-lookup"><span data-stu-id="42500-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="42500-298">En als Hallo tenant kan voorspellen hoe lang ze aanvullende bronnen moet u een Azure Automation runbook toomove Hallo database buiten Hallo van toepassingen instellen en vervolgens weer op een ingesteld schema.</span><span class="sxs-lookup"><span data-stu-id="42500-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="42500-299">**Tenant selfservice schalen** omdat het schalen van een taak eenvoudig via Hallo management API aangeroepen, kunt u eenvoudig hello mogelijkheid tooscale tenant databases bouwen in uw toepassing tenant gerichte en aanbieden als onderdeel van uw SaaS-service.</span><span class="sxs-lookup"><span data-stu-id="42500-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="42500-300">Laat bijvoorbeeld tenants self-administer omhoog en omlaag schalen mogelijk rechtstreeks gekoppelde tootheir facturering!</span><span class="sxs-lookup"><span data-stu-id="42500-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="42500-301">**Een pool schalen omhoog en omlaag van de gebruikspatronen van een planning toomatch**</span><span class="sxs-lookup"><span data-stu-id="42500-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="42500-302">Wanneer het gebruik van de cumulatieve tenant volgt voorspelbare gebruikspatronen, kunt u Azure Automation tooscale een pool omhoog en omlaag volgens een schema.</span><span class="sxs-lookup"><span data-stu-id="42500-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="42500-303">Schaal een pool bijvoorbeeld omlaag na 18:00 uur en weer omhoog vóór 06:00 op dagen waarvan u weet dat er een afname in de benodigde resources is.</span><span class="sxs-lookup"><span data-stu-id="42500-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="42500-304">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="42500-304">Next steps</span></span>

<span data-ttu-id="42500-305">In deze zelfstudie leert u het volgende:</span><span class="sxs-lookup"><span data-stu-id="42500-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="42500-306">Gebruik op Hallo tenant databases door het uitvoeren van een opgegeven load generator simuleren</span><span class="sxs-lookup"><span data-stu-id="42500-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="42500-307">Monitor Hallo tenant zoals ze toohello toename van de load reageren-databases</span><span class="sxs-lookup"><span data-stu-id="42500-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="42500-308">Hallo opschalen met elastische pool in antwoord toohello toegenomen database laden</span><span class="sxs-lookup"><span data-stu-id="42500-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="42500-309">Een tweede elastische pool tooload saldo Hallo databaseactiviteiten inrichten</span><span class="sxs-lookup"><span data-stu-id="42500-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="42500-310">Zelfstudie Een individuele tenant terugzetten</span><span class="sxs-lookup"><span data-stu-id="42500-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="42500-311">Aanvullende bronnen</span><span class="sxs-lookup"><span data-stu-id="42500-311">Additional resources</span></span>

* <span data-ttu-id="42500-312">Aanvullende [zelfstudies waarin voort op Hallo Wingtip SaaS-toepassingsimplementatie bouwen](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="42500-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="42500-313">Elastische SQL-pools</span><span class="sxs-lookup"><span data-stu-id="42500-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="42500-314">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="42500-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="42500-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md): zelfstudie Log Analytics instellen en gebruiken</span><span class="sxs-lookup"><span data-stu-id="42500-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>
