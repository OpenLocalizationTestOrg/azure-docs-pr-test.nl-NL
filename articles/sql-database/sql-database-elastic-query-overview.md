---
title: Overzicht van Azure SQL Database elastische query | Microsoft Docs
description: Overzicht van de functie elastische query
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: 9b3151248a1d036117bbdc9af03a98dff71ca535
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="a8f56-103">Overzicht Azure SQL Database elastische query (preview)</span><span class="sxs-lookup"><span data-stu-id="a8f56-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="a8f56-104">De functie elastische query (in preview) kunt u een verspreid over meerdere databases in Azure SQL Database Transact-SQL-query uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="a8f56-104">The elastic query feature (in preview) enables you to run a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="a8f56-105">Hiermee kunt u cross-databasequery's voor toegang tot externe tabellen, en verbinding maken met Microsoft en derden hulpprogramma's (Excel, Power BI, Tableau, enz.) om op te vragen over gegevenslagen met meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-105">It allows you to perform cross-database queries to access remote tables, and to connect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) to query across data tiers with multiple databases.</span></span> <span data-ttu-id="a8f56-106">Met deze functie kunt u query's kunnen grote hoeveelheden gegevenslagen in SQL-Database uitbreiden en de resultaten weergeven in business intelligence (BI)-rapporten.</span><span class="sxs-lookup"><span data-stu-id="a8f56-106">Using this feature, you can scale out queries to large data tiers in SQL Database and visualize the results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="a8f56-107">Waarom elastische query's gebruiken?</span><span class="sxs-lookup"><span data-stu-id="a8f56-107">Why use elastic queries?</span></span>

<span data-ttu-id="a8f56-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="a8f56-108">**Azure SQL Database**</span></span>

<span data-ttu-id="a8f56-109">Vragen over Azure SQL-databases volledig in T-SQL.</span><span class="sxs-lookup"><span data-stu-id="a8f56-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="a8f56-110">Hierdoor kan alleen-lezen query's naar externe databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="a8f56-111">Dit biedt een optie voor het huidige lokale SQL Server-klanten voor het migreren van toepassingen met drie en vierkleuren part namen of gekoppelde server aan de SQL-database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-111">This provides an option for current on-premises SQL Server customers to migrate applications using three- and four-part names or linked server to SQL DB.</span></span>

<span data-ttu-id="a8f56-112">**Beschikbaar in standard-laag**</span><span class="sxs-lookup"><span data-stu-id="a8f56-112">**Available on standard tier**</span></span>

<span data-ttu-id="a8f56-113">Elastische query wordt ondersteund op de prestatielaag Standard naast de prestatielaag Premium.</span><span class="sxs-lookup"><span data-stu-id="a8f56-113">Elastic query is supported on the Standard performance tier in addition to the Premium performance tier.</span></span> <span data-ttu-id="a8f56-114">Zie het gedeelte over Preview beperkingen hieronder op prestaties beperkingen voor lagere prestatielagen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-114">See the section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="a8f56-115">**Push naar externe databases**</span><span class="sxs-lookup"><span data-stu-id="a8f56-115">**Push to remote databases**</span></span>

<span data-ttu-id="a8f56-116">Elastische query's kunnen nu push-SQL-parameters met de externe databases voor uitvoering.</span><span class="sxs-lookup"><span data-stu-id="a8f56-116">Elastic queries can now push SQL parameters to the remote databases for execution.</span></span>

<span data-ttu-id="a8f56-117">**Opgeslagen procedure kan worden uitgevoerd**</span><span class="sxs-lookup"><span data-stu-id="a8f56-117">**Stored procedure execution**</span></span>

<span data-ttu-id="a8f56-118">Uitvoeren van extern opgeslagen procedureaanroepen of externe functies met [sp\_uitvoeren \_externe](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="a8f56-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="a8f56-119">**Flexibiliteit**</span><span class="sxs-lookup"><span data-stu-id="a8f56-119">**Flexibility**</span></span>

<span data-ttu-id="a8f56-120">Externe tabellen met elastische query kunnen nu verwijzen naar externe tabellen met een ander schema of de tabelnaam.</span><span class="sxs-lookup"><span data-stu-id="a8f56-120">External tables with elastic query can now refer to remote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="a8f56-121">Elastische query scenario 's</span><span class="sxs-lookup"><span data-stu-id="a8f56-121">Elastic query scenarios</span></span>

<span data-ttu-id="a8f56-122">Het doel is het opvragen scenario's waarbij meerdere databases rijen in een enkel algehele resultaat bijdragen mogelijk te maken.</span><span class="sxs-lookup"><span data-stu-id="a8f56-122">The goal is to facilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="a8f56-123">De query kan ofwel worden samengesteld door de gebruiker of toepassing direct of indirect via hulpprogramma's die zijn verbonden met de database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-123">The query can either be composed by the user or application directly, or indirectly through tools that are connected to the database.</span></span> <span data-ttu-id="a8f56-124">Dit is vooral nuttig bij het maken van rapporten met commerciële BI of gegevens integratie-hulpprogramma's, of een toepassing die niet kan worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="a8f56-125">U kunt met een elastische query opvragen via verschillende databases met behulp van de vertrouwde ervaring van de SQL Server-connectiviteit in hulpprogramma's zoals Excel, Power BI, Tableau of Hiermee.</span><span class="sxs-lookup"><span data-stu-id="a8f56-125">With an elastic query, you can query across several databases using the familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="a8f56-126">Een elastische query kan eenvoudig toegang krijgen tot een hele verzameling-databases via query's die zijn uitgegeven door SQL Server Management Studio of Visual Studio en vereenvoudigt tussen meerdere databases opvragen van Entity Framework of andere ORM-omgevingen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-126">An elastic query allows easy access to an entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="a8f56-127">Afbeelding 1 toont een scenario waarbij een bestaande cloud toepassing (dat via de [clientbibliotheek voor elastische database](sql-database-elastic-database-client-library.md)) bouwt voort op de gegevens van een uitgebreide laag en een elastische query wordt gebruikt voor het melden van meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-127">Figure 1 shows a scenario where an existing cloud application (which uses the [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="a8f56-128">**Afbeelding 1** elastische query gebruikt op de uitgebreide gegevenslaag</span><span class="sxs-lookup"><span data-stu-id="a8f56-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastische query gebruikt op de uitgebreide gegevenslaag][1]

<span data-ttu-id="a8f56-130">Klant-scenario's voor de elastische query worden gekenmerkt door de volgende topologieën:</span><span class="sxs-lookup"><span data-stu-id="a8f56-130">Customer scenarios for elastic query are characterized by the following topologies:</span></span>

* <span data-ttu-id="a8f56-131">**Verticale partities - query's voor meerdere databases** (topologie 1): de gegevens verticaal is gepartitioneerd tussen een aantal databases in een gegevenslaag.</span><span class="sxs-lookup"><span data-stu-id="a8f56-131">**Vertical partitioning - Cross-database queries** (Topology 1): The data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="a8f56-132">Normaal gesproken zich verschillende sets van tabellen op verschillende databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="a8f56-133">Dat betekent dat het schema van andere databases verschilt.</span><span class="sxs-lookup"><span data-stu-id="a8f56-133">That means that the schema is different on different databases.</span></span> <span data-ttu-id="a8f56-134">Alle tabellen voor inventarisatie zijn bijvoorbeeld op de ene database terwijl alle accounting-gerelateerde tabellen op een tweede database zijn.</span><span class="sxs-lookup"><span data-stu-id="a8f56-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="a8f56-135">Algemene gebruiksvoorbeelden met deze topologie vereisen een query op of voor het compileren van rapporten over tabellen in verschillende databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-135">Common use cases with this topology require one to query across or to compile reports across tables in several databases.</span></span>
* <span data-ttu-id="a8f56-136">**Horizontale partitionering - Sharding** (topologie 2): de gegevens zijn gepartitioneerd horizontaal over te verdelen rijen een uitgebreid uit gegevens die laag.</span><span class="sxs-lookup"><span data-stu-id="a8f56-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally to distribute rows across a scaled out data tier.</span></span> <span data-ttu-id="a8f56-137">Met deze methode is het schema identiek zijn op alle deelnemende databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-137">With this approach, the schema is identical on all participating databases.</span></span> <span data-ttu-id="a8f56-138">Deze aanpak wordt ook 'sharding' genoemd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="a8f56-139">Sharding kan worden uitgevoerd en beheerd met behulp van (1) de elastische database hulpprogramma's voor bibliotheken of (2) self-sharding.</span><span class="sxs-lookup"><span data-stu-id="a8f56-139">Sharding can be performed and managed using (1) the elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="a8f56-140">Een elastische query wordt gebruikt voor een query uitvoert of het compileren van rapporten over veel shards.</span><span class="sxs-lookup"><span data-stu-id="a8f56-140">An elastic query is used to query or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="a8f56-141">Elastische query werkt het beste voor incidentele reporting scenario's waar de meeste van de verwerking kan worden uitgevoerd op de gegevenslaag.</span><span class="sxs-lookup"><span data-stu-id="a8f56-141">Elastic query works best for occasional reporting scenarios where most of the processing can be performed on the data tier.</span></span> <span data-ttu-id="a8f56-142">Voor zware reporting werklasten of datawarehousescenario's met meer complexe query's ook overwegen [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="a8f56-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="a8f56-143">Verticale partities - query's met meerdere databases</span><span class="sxs-lookup"><span data-stu-id="a8f56-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="a8f56-144">Als u wilt coderen, Zie [aan de slag met cross-databasequery (verticale partities)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-144">To begin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="a8f56-145">Een elastische query kan worden gebruikt om gegevens die zich in een SQL-database beschikbaar is voor andere SQL-databases te maken.</span><span class="sxs-lookup"><span data-stu-id="a8f56-145">An elastic query can be used to make data located in a SQL database available to other SQL databases.</span></span> <span data-ttu-id="a8f56-146">Hiermee kunt query's uit een database om te verwijzen naar tabellen in een andere externe SQL-database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-146">This allows queries from one database to refer to tables in any other remote SQL database.</span></span> <span data-ttu-id="a8f56-147">De eerste stap is voor het definiëren van een externe gegevensbron voor elke externe database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-147">The first step is to define an external data source for each remote database.</span></span> <span data-ttu-id="a8f56-148">De externe gegevensbron is gedefinieerd in de lokale database waaruit u wilt toegang te krijgen tot tabellen die zich op de externe database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-148">The external data source is defined in the local database from which you want to gain access to tables located on the remote database.</span></span> <span data-ttu-id="a8f56-149">Er zijn geen wijzigingen nodig op de externe database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-149">No changes are necessary on the remote database.</span></span> <span data-ttu-id="a8f56-150">Voor typische verticale partities scenario's waarbij verschillende databases verschillende schema's, kunnen elastische query's worden gebruikt voor het implementeren van algemene gebruiksvoorbeelden zoals toegang tot de referentiegegevens en uitvoeren van query's voor meerdere databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used to implement common use cases such as access to reference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8f56-151">U moet beschikken over een externe gegevensbron ALTER machtiging.</span><span class="sxs-lookup"><span data-stu-id="a8f56-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="a8f56-152">Deze machtiging is opgenomen in de machtiging ALTER DATABASE.</span><span class="sxs-lookup"><span data-stu-id="a8f56-152">This permission is included with the ALTER DATABASE permission.</span></span> <span data-ttu-id="a8f56-153">EEN externe gegevensbron ALTER machtigingen nodig om te verwijzen naar de onderliggende gegevensbron.</span><span class="sxs-lookup"><span data-stu-id="a8f56-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed to refer to the underlying data source.</span></span>
>

<span data-ttu-id="a8f56-154">**Referentiegegevens**: de topologie voor gegevensbeheer verwijzing wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="a8f56-154">**Reference data**: The topology is used for reference data management.</span></span> <span data-ttu-id="a8f56-155">In de onderstaande afbeelding worden twee tabellen (T1 en T2) referentiegegevens worden bewaard op een specifieke database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-155">In the figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="a8f56-156">Met een elastische query, u kunt nu toegang tot tabellen T1 en T2 op afstand uit andere databases, zoals weergegeven in de afbeelding.</span><span class="sxs-lookup"><span data-stu-id="a8f56-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in the figure.</span></span> <span data-ttu-id="a8f56-157">Topologie gebruik 1 als verwijzingsdimensies kleine of externe query's in de verwijzingstabel zijn hebben selectief predicaten.</span><span class="sxs-lookup"><span data-stu-id="a8f56-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="a8f56-158">**Afbeelding 2** verticale partities - met behulp van referentiegegevens elastische query-query</span><span class="sxs-lookup"><span data-stu-id="a8f56-158">**Figure 2** Vertical partitioning - Using elastic query to query reference data</span></span>

![Verticale partities - met behulp van referentiegegevens elastische query-query][3]

<span data-ttu-id="a8f56-160">**Opvragen van meerdere databases**: elastische query inschakelen gebruiksvoorbeelden waarvoor het uitvoeren van query's in verschillende SQL-databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="a8f56-161">Afbeelding 3 ziet u vier verschillende databases: CRM, inventaris, HR en producten.</span><span class="sxs-lookup"><span data-stu-id="a8f56-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="a8f56-162">Query's uitgevoerd in een van de databases moeten ook toegang tot een of alle de andere databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-162">Queries performed in one of the databases also need access to one or all the other databases.</span></span> <span data-ttu-id="a8f56-163">Een elastische query kunt u de database voor deze aanvraag configureren door het uitvoeren van een paar eenvoudige DDL-componenten op elk van de vier databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of the four databases.</span></span> <span data-ttu-id="a8f56-164">Toegang tot een externe tabel is na deze eenmalige configuratie net zo eenvoudig als het verwijst naar een lokale tabel van de T-SQL-query's of van uw BI-hulpprogramma's.</span><span class="sxs-lookup"><span data-stu-id="a8f56-164">After this one-time configuration, access to a remote table is as simple as referring to a local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="a8f56-165">Deze aanpak wordt aanbevolen als de externe query's niet veel resultaten retourneren.</span><span class="sxs-lookup"><span data-stu-id="a8f56-165">This approach is recommended if the remote queries do not return large results.</span></span>

<span data-ttu-id="a8f56-166">**Afbeelding 3** verticale partities - elastische query-query met via verschillende databases</span><span class="sxs-lookup"><span data-stu-id="a8f56-166">**Figure 3** Vertical partitioning - Using elastic query to query across various databases</span></span>

![Verticale partities - elastische query-query met via verschillende databases][4]

<span data-ttu-id="a8f56-168">De volgende stappen configureren elastische databasequery's voor verticale partities scenario's waarvoor toegang tot een tabel die zich op de externe SQL-databases met hetzelfde schema:</span><span class="sxs-lookup"><span data-stu-id="a8f56-168">The following steps configure elastic database queries for vertical partitioning scenarios that require access to a table located on remote SQL databases with the same schema:</span></span>

* <span data-ttu-id="a8f56-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="a8f56-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="a8f56-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="a8f56-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="a8f56-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource van het type **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="a8f56-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="a8f56-172">[CREATE/DROP externe tabel](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="a8f56-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="a8f56-173">U kunt toegang tot externe tabel "MijnTabel" alsof het een lokale tabel na het uitvoeren van de DDL-instructies.</span><span class="sxs-lookup"><span data-stu-id="a8f56-173">After running the DDL statements, you can access the remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="a8f56-174">Azure SQL Database automatisch een verbinding met de externe database wordt geopend, verwerkt uw aanvraag op de externe database en de resultaten geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-174">Azure SQL Database automatically opens a connection to the remote database, processes your request on the remote database, and returns the results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="a8f56-175">Horizontale partitioneren - sharding</span><span class="sxs-lookup"><span data-stu-id="a8f56-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="a8f56-176">Met elastische query voor het uitvoeren van rapportagetaken via een shard, dat wil zeggen, horizontaal is gepartitioneerd, gegevenslaag vereist een [elastische database shard-toewijzing](sql-database-elastic-scale-shard-map-management.md) vertegenwoordigt de databases van de gegevenslaag.</span><span class="sxs-lookup"><span data-stu-id="a8f56-176">Using elastic query to perform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) to represent the databases of the data tier .</span></span> <span data-ttu-id="a8f56-177">Normaal gesproken alleen een enkele shard-toewijzing in dit scenario wordt gebruikt en een specifieke database met elastische querymogelijkheden (hoofdknooppunt) fungeert als het toegangspunt voor het melden van query's.</span><span class="sxs-lookup"><span data-stu-id="a8f56-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as the entry point for reporting queries.</span></span> <span data-ttu-id="a8f56-178">Alleen deze specifieke database moet toegang tot de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="a8f56-178">Only this dedicated database needs access to the shard map.</span></span> <span data-ttu-id="a8f56-179">Afbeelding 4 ziet u deze topologie en de configuratie met de query voor elastische database en de shard-kaart.</span><span class="sxs-lookup"><span data-stu-id="a8f56-179">Figure 4 illustrates this topology and its configuration with the elastic query database and shard map.</span></span> <span data-ttu-id="a8f56-180">De databases in de gegevenslaag kunnen zijn van een Azure SQL Database versie of editie.</span><span class="sxs-lookup"><span data-stu-id="a8f56-180">The databases in the data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="a8f56-181">Zie voor meer informatie over de clientbibliotheek voor elastische database en het maken van kaarten shard [Shard kaart management](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-181">For more information about the elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="a8f56-182">**Afbeelding 4** horizontale partitioneren - elastische query gebruiken voor rapportage over de lagen van de gedeelde gegevens</span><span class="sxs-lookup"><span data-stu-id="a8f56-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Horizontale partitioneren - elastische query gebruiken voor rapportage over de lagen van de gedeelde gegevens][5]

> [!NOTE]
> <span data-ttu-id="a8f56-184">Elastische query uitvoeren op Database (hoofdknooppunt) mag een aparte database of kan dezelfde database die als host fungeert voor de shard-toewijzing.</span><span class="sxs-lookup"><span data-stu-id="a8f56-184">Elastic Query Database (head node) can be separate database, or it can be the same database that hosts the shard map.</span></span> <span data-ttu-id="a8f56-185">Welke configuratie u kiest, zorg ervoor dat die laag service en de prestaties van de database is hoog genoeg is voor het afhandelen van het verwachte aantal aanmelding/queryaanvragen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough to handle the expected  amount of login/query requests.</span></span>

<span data-ttu-id="a8f56-186">De volgende stappen configureren elastische databasequery's voor horizontale partitionering scenario's waarvoor toegang tot een set van de tabel die zich bevinden op (meestal) verschillende externe SQL-databases:</span><span class="sxs-lookup"><span data-stu-id="a8f56-186">The following steps configure elastic database queries for horizontal partitioning scenarios that require access to a set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="a8f56-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="a8f56-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="a8f56-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="a8f56-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="a8f56-189">Maak een [shard-toewijzing](sql-database-elastic-scale-shard-map-management.md) die de gegevenslaag met behulp van de clientbibliotheek voor elastische database.</span><span class="sxs-lookup"><span data-stu-id="a8f56-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using the elastic database client library.</span></span>   
* <span data-ttu-id="a8f56-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource van het type **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="a8f56-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="a8f56-191">[CREATE/DROP externe tabel](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="a8f56-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="a8f56-192">Wanneer u deze stappen hebt uitgevoerd, kunt u de horizontaal gepartitioneerde tabel "MijnTabel" openen alsof het een lokale tabel.</span><span class="sxs-lookup"><span data-stu-id="a8f56-192">Once you have performed these steps, you can access the horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="a8f56-193">Azure SQL Database automatisch wordt geopend meerdere parallelle verbindingen met de externe databases waarin de tabellen fysiek zijn opgeslagen, verwerkt de aanvragen van de externe databases en retourneert de resultaten.</span><span class="sxs-lookup"><span data-stu-id="a8f56-193">Azure SQL Database automatically opens multiple parallel connections to the remote databases where the tables are physically stored, processes the requests on the remote databases, and returns the results.</span></span>
<span data-ttu-id="a8f56-194">Meer informatie over de stappen die nodig zijn voor de horizontale partitionering scenario vindt u [elastische query voor het partitioneren van de horizontale](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-194">More information on the steps required for the horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="a8f56-195">Als u wilt coderen, Zie [aan de slag met elastische query voor horizontale partitioneren (sharding)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-195">To begin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="a8f56-196">T-SQL-query</span><span class="sxs-lookup"><span data-stu-id="a8f56-196">T-SQL querying</span></span>
<span data-ttu-id="a8f56-197">Als u uw externe gegevensbronnen en uw externe tabellen hebt gedefinieerd, kunt u reguliere SQL Server-verbindingsreeksen verbinding maken met de databases waar u uw externe tabellen gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings to connect to the databases where you defined your external tables.</span></span> <span data-ttu-id="a8f56-198">Vervolgens kunt u uitvoeren T-SQL-instructies over de externe tabellen voor die verbinding met de beperkingen die hieronder worden beschreven.</span><span class="sxs-lookup"><span data-stu-id="a8f56-198">You can then run T-SQL statements over your external tables on that connection with the limitations outlined below.</span></span> <span data-ttu-id="a8f56-199">U vindt meer informatie over en voorbeelden van T-SQL-query's in de documentatie-onderwerpen voor [horizontaal partitioneren](sql-database-elastic-query-horizontal-partitioning.md) en [verticale partities](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-199">You can find more information and examples of T-SQL queries in the documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="a8f56-200">Connectiviteit voor hulpprogramma 's</span><span class="sxs-lookup"><span data-stu-id="a8f56-200">Connectivity for tools</span></span>
<span data-ttu-id="a8f56-201">Reguliere verbindingsreeksen voor SQL Server kunt u verbinding maken met uw toepassingen en gegevens of BI-integratie-hulpprogramma's voor databases waarvoor externe tabellen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-201">You can use regular SQL Server connection strings to connect your applications and BI or data integration tools to databases that have external tables.</span></span> <span data-ttu-id="a8f56-202">Zorg ervoor dat SQL Server wordt ondersteund als een gegevensbron voor het hulpprogramma.</span><span class="sxs-lookup"><span data-stu-id="a8f56-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="a8f56-203">Eenmaal zijn verbonden, verwijzen naar de elastische database en de externe tabellen in de database, net zoals u zou doen met een andere SQL Server-database waarmee u verbinding met het hulpprogramma maakt.</span><span class="sxs-lookup"><span data-stu-id="a8f56-203">Once connected, refer to the elastic query database and the external tables in that database just like you would do with any other SQL Server database that you connect to with your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8f56-204">Verificatie met behulp van Azure Active Directory met elastische query's is momenteel niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="a8f56-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="a8f56-205">Kosten</span><span class="sxs-lookup"><span data-stu-id="a8f56-205">Cost</span></span>
<span data-ttu-id="a8f56-206">Elastische query is opgenomen in de kosten van Azure SQL Database-databases.</span><span class="sxs-lookup"><span data-stu-id="a8f56-206">Elastic query is included into the cost of Azure SQL Database databases.</span></span> <span data-ttu-id="a8f56-207">Denk eraan dat waar uw externe databases zich bevindt in een ander datacenter dan het eindpunt elastische query-topologieën worden ondersteund, maar de uitgaande gegevens uit externe databases worden in rekening gebracht regular [Azure tarieven](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="a8f56-207">Note that topologies where your remote databases are in a different data center than the elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="a8f56-208">Preview-beperkingen</span><span class="sxs-lookup"><span data-stu-id="a8f56-208">Preview limitations</span></span>
* <span data-ttu-id="a8f56-209">Uw eerste elastische query uit te voeren kan een paar minuten duren op de prestatielaag Standard.</span><span class="sxs-lookup"><span data-stu-id="a8f56-209">Running your first elastic query can take up to a few minutes on the Standard performance tier.</span></span> <span data-ttu-id="a8f56-210">Deze tijd is nodig om het laden van de elastische queryfunctionaliteit; laden van de prestaties worden verbeterd met hogere prestatielagen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-210">This time is necessary to load the elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="a8f56-211">Scripts van externe gegevensbronnen of externe tabellen van SSMS of SSDT is nog niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="a8f56-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="a8f56-212">Importeren/exporteren voor SQL database ondersteunt nog geen externe gegevensbronnen en externe tabellen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="a8f56-213">Als u gebruiken voor importeren/exporteren wilt, deze objecten verwijderen voordat u exporteert en vervolgens opnieuw maken na het importeren.</span><span class="sxs-lookup"><span data-stu-id="a8f56-213">If you need to use Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="a8f56-214">Elastische query ondersteunt momenteel alleen-lezen toegang tot externe tabellen.</span><span class="sxs-lookup"><span data-stu-id="a8f56-214">Elastic query currently only supports read-only access to external tables.</span></span> <span data-ttu-id="a8f56-215">U kunt alle functies van T-SQL echter gebruiken op de database waarbij de externe tabel is gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-215">You can, however, use full T-SQL functionality on the database where the external table is defined.</span></span> <span data-ttu-id="a8f56-216">Dit kan handig zijn bij, zoals tijdelijke resultaten gebruikt, bijvoorbeeld behouden, selecteert u < column_list > in < local_table > of voor het definiëren van opgeslagen procedures op de elastische database die verwijzen naar externe tabellen zijn.</span><span class="sxs-lookup"><span data-stu-id="a8f56-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or to define stored procedures on the elastic query database which refer to external tables.</span></span>
* <span data-ttu-id="a8f56-217">Met uitzondering van nvarchar(max), worden LOB-typen niet ondersteund in definities van de externe tabel.</span><span class="sxs-lookup"><span data-stu-id="a8f56-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="a8f56-218">Als tijdelijke oplossing kunt u een weergave op de externe database met het type LOB in nvarchar(max) cast maken, de externe tabel via de weergave in plaats van de basistabel definiëren en vervolgens geconverteerd naar het oorspronkelijke LOB-type in uw query's.</span><span class="sxs-lookup"><span data-stu-id="a8f56-218">As a workaround, you can create a view on the remote database that casts the LOB type into nvarchar(max), define your external table over the view instead of the base table and then cast it back into the original LOB type in your queries.</span></span>
* <span data-ttu-id="a8f56-219">Kolom statistieken over externe tabellen worden momenteel niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="a8f56-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="a8f56-220">Tabellen statistieken worden ondersteund, maar moeten handmatig worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="a8f56-220">Tables statistics are supported, but need to be created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="a8f56-221">Feedback</span><span class="sxs-lookup"><span data-stu-id="a8f56-221">Feedback</span></span>
<span data-ttu-id="a8f56-222">Geef feedback over uw ervaringen met elastische query's met ons op de onderstaande Disqus de MSDN-forums of delen op Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="a8f56-222">Please share feedback on your experience with elastic queries with us on Disqus below, the MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="a8f56-223">We zijn geïnteresseerd in alle soorten feedback over de service (defecte producten, ruwe randen, functie hiaten).</span><span class="sxs-lookup"><span data-stu-id="a8f56-223">We are interested in all kinds of feedback about the service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a8f56-224">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a8f56-224">Next steps</span></span>

* <span data-ttu-id="a8f56-225">Zie voor een verticale partitie zelfstudie [aan de slag met cross-databasequery (verticale partities)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="a8f56-226">Zie voor de syntaxis en voorbeelden query's voor verticaal gepartitioneerde gegevens [gegevens opvragen verticaal gepartitioneerd)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="a8f56-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="a8f56-227">Zie voor een zelfstudie horizontaal partitioneren (sharding) [aan de slag met elastische query voor horizontale partitioneren (sharding)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="a8f56-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="a8f56-228">Zie voor de syntaxis en voorbeelden query's voor horizontaal gepartitioneerde gegevens [gegevens opvragen horizontaal gepartitioneerd)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="a8f56-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="a8f56-229">Zie [sp\_uitvoeren \_externe](https://msdn.microsoft.com/library/mt703714) voor een opgeslagen procedure die een Transact-SQL-instructie op een enkele externe Azure SQL Database of een set van databases die fungeren als shards in een horizontale partitieschema wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a8f56-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
