---
title: Prestaties aanbevelingen - Azure SQL Database | Microsoft Docs
description: De Azure SQL-Database bevat aanbevelingen voor de SQL-Databases die u kunt de huidige queryprestaties verbeteren.
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 357a25a665894c86ddb0f93beeb4dd59d8837489
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="96cda-103">Aanbevelingen voor prestaties</span><span class="sxs-lookup"><span data-stu-id="96cda-103">Performance recommendations</span></span>

<span data-ttu-id="96cda-104">Azure SQL Database leert en aanpast aan uw toepassing en bevat aangepaste aanbevelingen zodat u voor de prestaties van uw SQL-databases.</span><span class="sxs-lookup"><span data-stu-id="96cda-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you to maximize the performance of your SQL databases.</span></span> <span data-ttu-id="96cda-105">Prestaties van uw wordt continu beoordeeld door het analyseren van uw gebruiksgeschiedenis SQL-Database.</span><span class="sxs-lookup"><span data-stu-id="96cda-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="96cda-106">De aanbevelingen die worden verstrekt zijn gebaseerd op een patroon van de unieke werkbelasting database en de prestaties te verbeteren.</span><span class="sxs-lookup"><span data-stu-id="96cda-106">The recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="96cda-107">Het is raadzaam van het gebruik van aanbevelingen doordat automatische afstemming van uw database.</span><span class="sxs-lookup"><span data-stu-id="96cda-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="96cda-108">Zie voor meer informatie [automatische afstemming](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="96cda-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="96cda-109">Indexaanbevelingen maken</span><span class="sxs-lookup"><span data-stu-id="96cda-109">Create index recommendations</span></span>
<span data-ttu-id="96cda-110">Azure SQL Database continu bewaakt de query's wordt uitgevoerd en identificeert de indexen die de prestaties kunnen verbeteren.</span><span class="sxs-lookup"><span data-stu-id="96cda-110">Azure SQL Database continuously monitors the queries being executed and identifies the indexes that could improve the performance.</span></span> <span data-ttu-id="96cda-111">Als voldoende vertrouwen is gebouwd die een bepaalde index ontbreekt, zal een nieuwe **Create index** aanbeveling wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="96cda-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="96cda-112">Azure SQL Database bouwt vertrouwen door het schatten van de index via tijd brengen wilt prestatieverbetering te bereiken.</span><span class="sxs-lookup"><span data-stu-id="96cda-112">Azure SQL Database builds confidence by estimating performance gain the index would bring through time.</span></span> <span data-ttu-id="96cda-113">Afhankelijk van de geschatte prestatieverbetering te bereiken, aanbevelingen gecategoriseerd als hoog, Gemiddeld of laag.</span><span class="sxs-lookup"><span data-stu-id="96cda-113">Depending on the estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="96cda-114">Indexen die zijn gemaakt met behulp van de aanbevelingen zijn altijd gemarkeerd als auto_created indexen.</span><span class="sxs-lookup"><span data-stu-id="96cda-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="96cda-115">U kunt zien welke indexen zijn auto_created door te kijken sys.indexes weergeven.</span><span class="sxs-lookup"><span data-stu-id="96cda-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="96cda-116">Automatisch gemaakt indexen blokkeren niet ALTER/RENAME-opdrachten.</span><span class="sxs-lookup"><span data-stu-id="96cda-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="96cda-117">Als u probeert te verwijderen van de kolom met een index worden gemaakt van het automatisch, de opdracht is geslaagd en de automatische index gemaakt met de opdracht ook is verwijderd.</span><span class="sxs-lookup"><span data-stu-id="96cda-117">If you try to drop the column that has an auto created index over it, the command passes and the auto created index is dropped with the command as well.</span></span> <span data-ttu-id="96cda-118">Gewone indexen zou de opdracht ALTER/RENAME op kolommen die zijn geïndexeerd blokkeren.</span><span class="sxs-lookup"><span data-stu-id="96cda-118">Regular indexes would block the ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="96cda-119">Zodra de indexaanbeveling maken wordt toegepast, wordt in Azure SQL Database prestaties van de query's met de basislijn vergelijken.</span><span class="sxs-lookup"><span data-stu-id="96cda-119">Once the create index recommendation is applied, Azure SQL Database will compare performance of the queries with the baseline performance.</span></span> <span data-ttu-id="96cda-120">Als u nieuwe index gebracht verbeteringen in de prestaties, aanbeveling gemarkeerd als geslaagd en impact rapport beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="96cda-120">If new index brought improvements in the performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="96cda-121">Als de index niet doen om de voordelen, worden deze automatisch hersteld.</span><span class="sxs-lookup"><span data-stu-id="96cda-121">In case the index didn’t bring the benefits, it will be automatically reverted.</span></span> <span data-ttu-id="96cda-122">Op deze manier Azure SQL Database zorgt ervoor dat met behulp van aanbevelingen alleen de prestaties van de database verbeteren wordt.</span><span class="sxs-lookup"><span data-stu-id="96cda-122">This way Azure SQL Database ensures that using recommendations will only improve the database performance.</span></span>

<span data-ttu-id="96cda-123">Alle **Create index** aanbeveling heeft een vorige uit beleid dat wordt toegestaan als de database of een groep DTU-gebruik hoger dan 80% in de afgelopen 20 minuten of is als de opslag dan 90% van het gebruik van is de aanbeveling zijn toegepast.</span><span class="sxs-lookup"><span data-stu-id="96cda-123">Any **Create index** recommendation has a back off policy that won’t allow applying the recommendation if the database or pool DTU usage was above 80% in last 20 minutes or if the storage is above 90% of usage.</span></span> <span data-ttu-id="96cda-124">In dit geval wordt de aanbeveling worden uitgesteld.</span><span class="sxs-lookup"><span data-stu-id="96cda-124">In this case, the recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="96cda-125">Aanbevelingen voor indexen verwijderen</span><span class="sxs-lookup"><span data-stu-id="96cda-125">Drop index recommendations</span></span>
<span data-ttu-id="96cda-126">Naast het herkennen van een ontbrekende index in Azure SQL Database voortdurend de prestaties van de bestaande indexen analyseert.</span><span class="sxs-lookup"><span data-stu-id="96cda-126">In addition to detecting a missing index, Azure SQL Database continuously analyzes the performance of existing indexes.</span></span> <span data-ttu-id="96cda-127">Als de index wordt niet gebruikt, wordt Azure SQL Database het beste neer te zetten.</span><span class="sxs-lookup"><span data-stu-id="96cda-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="96cda-128">Verwijderen van een index wordt in beide gevallen aangeraden:</span><span class="sxs-lookup"><span data-stu-id="96cda-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="96cda-129">Index is een duplicaat van een andere index (dezelfde geïndexeerd en kolom, partitie-schema en filters opgenomen)</span><span class="sxs-lookup"><span data-stu-id="96cda-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="96cda-130">Index wordt niet gebruikt voor een langere periode (93 dagen)</span><span class="sxs-lookup"><span data-stu-id="96cda-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="96cda-131">Aanbevelingen voor indexen verwijderen worden ook de controle na implementatie doorlopen.</span><span class="sxs-lookup"><span data-stu-id="96cda-131">Drop index recommendations also go through the verification after implementation.</span></span> <span data-ttu-id="96cda-132">Het rapport gevolgen zijn beschikbaar als de prestaties worden verbeterd.</span><span class="sxs-lookup"><span data-stu-id="96cda-132">If the performance is improved the impact report will be available.</span></span> <span data-ttu-id="96cda-133">Als de prestaties zijn afgenomen, wordt er aanbeveling hersteld.</span><span class="sxs-lookup"><span data-stu-id="96cda-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="96cda-134">Aanbevelingen voor query's voorzien</span><span class="sxs-lookup"><span data-stu-id="96cda-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="96cda-135">**Query's voorzien** aanbevelingen worden weergegeven wanneer u een of meer query's die zijn voortdurend wordt gecompileerd maar end hebt met hetzelfde abonnement voor de query kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="96cda-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with the same query execution plan.</span></span> <span data-ttu-id="96cda-136">Deze voorwaarde Hiermee opent u de gelegenheid om toe te passen geforceerde parameterisering, waardoor queryplannen worden in de cache opgeslagen en opnieuw worden gebruikt in de toekomstige verbeterde prestaties en Resourcegebruik verminderen.</span><span class="sxs-lookup"><span data-stu-id="96cda-136">This condition opens up an opportunity to apply forced parameterization, which will allow query plans to be cached and reused in the future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="96cda-137">Elke query uitgegeven voor de SQL Server in eerste instantie moet worden gecompileerd voor het genereren van een plan kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="96cda-137">Every query issued against SQL Server initially needs to be compiled to generate an execution plan.</span></span> <span data-ttu-id="96cda-138">Elk gegenereerde plan wordt toegevoegd aan de plancache en een volgende uitvoering van dezelfde query opnieuw kunnen gebruiken voor dit abonnement uit de cache, hoeft u de aanvullende compilatie.</span><span class="sxs-lookup"><span data-stu-id="96cda-138">Each generated plan is added to the plan cache and subsequent executions of the same query can reuse this plan from the cache, eliminating the need for additional compilation.</span></span> 

<span data-ttu-id="96cda-139">Toepassingen die verzenden van query's die niet-geparametriseerde waarden bevatten, kunnen leiden tot een prestatieoverhead waarin voor elke dergelijke query met andere parameterwaarden het uitvoeringsplan wordt gecompileerd opnieuw.</span><span class="sxs-lookup"><span data-stu-id="96cda-139">Applications that send queries, which include non-parameterized values, can lead to a performance overhead, where for every such query with different parameter values the execution plan is compiled again.</span></span> <span data-ttu-id="96cda-140">In veel gevallen de dezelfde query's met verschillende parameter waarden genereren de dezelfde uitvoering plannen, maar deze plannen nog steeds afzonderlijk worden toegevoegd aan de plancache.</span><span class="sxs-lookup"><span data-stu-id="96cda-140">In many cases the same queries with different parameter values generate the same execution plans, but these plans are still separately added to the plan cache.</span></span> <span data-ttu-id="96cda-141">Compileren uitvoering plannen database bronnen gebruiken, duur van de query verhogen en de plancache plannen om te worden verwijderd uit de cache veroorzaakt overloop.</span><span class="sxs-lookup"><span data-stu-id="96cda-141">Recompiling execution plans use database resources, increase the query duration time and overflow the plan cache causing plans to be evicted from the cache.</span></span> <span data-ttu-id="96cda-142">Dit gedrag van SQL Server kan worden gewijzigd door de optie geforceerde parameterisering op de database.</span><span class="sxs-lookup"><span data-stu-id="96cda-142">This behavior of SQL Server can be altered by setting the forced parameterization option on the database.</span></span> 

<span data-ttu-id="96cda-143">Als u de gevolgen van deze aanbeveling schatten, kunt worden u geleverd bij een vergelijking tussen de werkelijke CPU-gebruik en het verwachte CPU-gebruik (alsof de aanbeveling is toegepast).</span><span class="sxs-lookup"><span data-stu-id="96cda-143">To help you estimate the impact of this recommendation, you are provided with a comparison between the actual CPU usage and the projected CPU usage (as if the recommendation was applied).</span></span> <span data-ttu-id="96cda-144">Naast van CPU-gebruik, verlaagt u hiermee de duur van de query voor de tijd doorgebracht in de compilatie.</span><span class="sxs-lookup"><span data-stu-id="96cda-144">In addition to CPU savings, your query duration decreases for the time spent in compilation.</span></span> <span data-ttu-id="96cda-145">Er worden ook veel minder overhead op plancache, zodat de meerderheid van de abonnementen in de cache blijft en opnieuw worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="96cda-145">There will also be much less overhead on plan cache, allowing majority of the plans to stay in cache and be reused.</span></span> <span data-ttu-id="96cda-146">U kunt deze aanbeveling toepassen snel en eenvoudig door te klikken op de **toepassen** opdracht.</span><span class="sxs-lookup"><span data-stu-id="96cda-146">You can apply this recommendation quickly and easily by clicking on the **Apply** command.</span></span> 

<span data-ttu-id="96cda-147">Als u deze aanbeveling uitvoert, geforceerde parameterisering binnen enkele minuten in de database wordt het ingeschakeld en wordt het bewakingsproces die het duurt ongeveer 24 uur.</span><span class="sxs-lookup"><span data-stu-id="96cda-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts the monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="96cda-148">Na deze periode, kunt u zich kunt zien van het validatierapport voor CPU-gebruik van de database waarin de 24 uur voordat en nadat de aanbeveling is toegepast.</span><span class="sxs-lookup"><span data-stu-id="96cda-148">After this period, you will be able to see the validation report that shows CPU usage of your database 24 hours before and after the recommendation has been applied.</span></span> <span data-ttu-id="96cda-149">SQL Database Advisor is een beveiligingsmechanisme dat de toegepaste aanbeveling automatisch teruggezet als de regressie van een prestaties is gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="96cda-149">SQL Database Advisor has a safety mechanism that automatically reverts the applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="96cda-150">Aanbevelingen voor schema-problemen oplossen</span><span class="sxs-lookup"><span data-stu-id="96cda-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="96cda-151">**Los de problemen schema** aanbevelingen worden weergegeven wanneer de service SQL Database meldingen een afwijkingsdetectie in het aantal schema-gerelateerde SQL fouten op uw Azure SQL Database plaatsvinden.</span><span class="sxs-lookup"><span data-stu-id="96cda-151">**Fix schema issues** recommendations appear when the SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="96cda-152">Deze aanbeveling wordt doorgaans weergegeven wanneer de database meerdere fouten over schema (ongeldige kolomnaam, Ongeldige objectnaam, enzovoort) binnen een uur optreedt.</span><span class="sxs-lookup"><span data-stu-id="96cda-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="96cda-153">'Problemen met het schema' vormen een klasse syntaxisfouten in SQL Server die ontstaan wanneer de definitie van de SQL-query en de definitie van schema van de database zijn niet uitgelijnd.</span><span class="sxs-lookup"><span data-stu-id="96cda-153">“Schema issues” are a class of syntax errors in SQL Server that happen when the definition of the SQL query and the definition of the database schema are not aligned.</span></span> <span data-ttu-id="96cda-154">Bijvoorbeeld, een van de kolommen die werd verwacht door de query ontbreekt mogelijk in de doeltabel of vice versa.</span><span class="sxs-lookup"><span data-stu-id="96cda-154">For example, one of the columns expected by the query may be missing in the target table, or vice versa.</span></span> 

<span data-ttu-id="96cda-155">Aanbeveling 'Schema probleem op te lossen' wordt weergegeven wanneer Azure SQL Database-service een afwijkingsdetectie in het aantal schema-gerelateerde SQL fouten op uw Azure SQL Database plaatsvinden meldingen.</span><span class="sxs-lookup"><span data-stu-id="96cda-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in the number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="96cda-156">De volgende tabel ziet u de fouten die betrekking op schema problemen hebben:</span><span class="sxs-lookup"><span data-stu-id="96cda-156">The following table shows the errors that are related to schema issues:</span></span>

| <span data-ttu-id="96cda-157">SQL-foutcode</span><span class="sxs-lookup"><span data-stu-id="96cda-157">SQL Error Code</span></span> | <span data-ttu-id="96cda-158">Bericht</span><span class="sxs-lookup"><span data-stu-id="96cda-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="96cda-159">201</span><span class="sxs-lookup"><span data-stu-id="96cda-159">201</span></span> |<span data-ttu-id="96cda-160">Procedure of functie '*'verwacht dat de parameter'*', die niet is opgegeven.</span><span class="sxs-lookup"><span data-stu-id="96cda-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="96cda-161">207</span><span class="sxs-lookup"><span data-stu-id="96cda-161">207</span></span> |<span data-ttu-id="96cda-162">Ongeldige kolomnaam ' *'.</span><span class="sxs-lookup"><span data-stu-id="96cda-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="96cda-163">208</span><span class="sxs-lookup"><span data-stu-id="96cda-163">208</span></span> |<span data-ttu-id="96cda-164">Ongeldige objectnaam ' *'.</span><span class="sxs-lookup"><span data-stu-id="96cda-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="96cda-165">213</span><span class="sxs-lookup"><span data-stu-id="96cda-165">213</span></span> |<span data-ttu-id="96cda-166">Kolomnaam of -nummer van opgegeven waarden komt niet overeen met tabeldefinitie.</span><span class="sxs-lookup"><span data-stu-id="96cda-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="96cda-167">2812</span><span class="sxs-lookup"><span data-stu-id="96cda-167">2812</span></span> |<span data-ttu-id="96cda-168">Kan de opgeslagen procedure niet vinden ' *'.</span><span class="sxs-lookup"><span data-stu-id="96cda-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="96cda-169">8144</span><span class="sxs-lookup"><span data-stu-id="96cda-169">8144</span></span> |<span data-ttu-id="96cda-170">Procedure of functie * heeft te veel argumenten opgegeven.</span><span class="sxs-lookup"><span data-stu-id="96cda-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="96cda-171">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="96cda-171">Next steps</span></span>
<span data-ttu-id="96cda-172">Bewaken van uw aanbevelingen en blijven toepassen om de prestaties te verfijnen.</span><span class="sxs-lookup"><span data-stu-id="96cda-172">Monitor your recommendations and continue to apply them to refine performance.</span></span> <span data-ttu-id="96cda-173">Database-werkbelastingen zijn dynamisch en continu wijzigen.</span><span class="sxs-lookup"><span data-stu-id="96cda-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="96cda-174">SQL-Database advisor blijft om te controleren en aanbevelingen die potentieel prestaties van uw database kunt verbeteren.</span><span class="sxs-lookup"><span data-stu-id="96cda-174">SQL Database advisor continues to monitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="96cda-175">Zie [prestaties aanbevelingen in de Azure portal](sql-database-advisor-portal.md) voor stapsgewijze instructies voor het gebruik van prestaties aanbevelingen in de Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="96cda-175">See [Performance recommendations in the Azure portal](sql-database-advisor-portal.md) for steps on how to use performance recommendations in the Azure portal.</span></span>
* <span data-ttu-id="96cda-176">Zie [inzichten voor queryprestaties](sql-database-query-performance.md) leren kennen en de invloed op de prestaties van uw eerste query's weergeven.</span><span class="sxs-lookup"><span data-stu-id="96cda-176">See [Query Performance Insights](sql-database-query-performance.md) to learn about and view the performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="96cda-177">Aanvullende bronnen</span><span class="sxs-lookup"><span data-stu-id="96cda-177">Additional resources</span></span>
* [<span data-ttu-id="96cda-178">Query Store</span><span class="sxs-lookup"><span data-stu-id="96cda-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="96cda-179">INDEX MAKEN</span><span class="sxs-lookup"><span data-stu-id="96cda-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="96cda-180">Toegangsbeheer op basis van rollen</span><span class="sxs-lookup"><span data-stu-id="96cda-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)

