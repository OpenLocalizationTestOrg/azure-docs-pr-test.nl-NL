---
title: aaaDistributed transacties voor cloud-databases
description: Overzicht van transacties met Azure SQL Database elastische Database
services: sql-database
documentationcenter: 
author: torsteng
manager: jhubbard
editor: torsteng
ms.assetid: e14df7a3-7788-4cfb-bcd1-7ad6433ef1f9
ms.service: sql-database
ms.custom: scale out apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: sql-database
ms.date: 05/27/2016
ms.author: torsteng
ms.openlocfilehash: 9a18f2749108d337bf115b3dc21dd0c7828dd9c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-transactions-across-cloud-databases"></a><span data-ttu-id="58635-103">Over clouddatabases gedistribueerde transacties</span><span class="sxs-lookup"><span data-stu-id="58635-103">Distributed transactions across cloud databases</span></span>
<span data-ttu-id="58635-104">Elastische databasetransacties voor Azure SQL Database (SQL DB) kunnen u toorun transacties die verschillende databases in SQL-database omvatten.</span><span class="sxs-lookup"><span data-stu-id="58635-104">Elastic database transactions for Azure SQL Database (SQL DB) allow you toorun transactions that span several databases in SQL DB.</span></span> <span data-ttu-id="58635-105">Elastische databasetransacties voor SQL-database zijn beschikbaar voor .NET-toepassingen die gebruikmaken van ADO .NET en integreren met Hallo bekend programmeerervaring met Hallo [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) klassen.</span><span class="sxs-lookup"><span data-stu-id="58635-105">Elastic database transactions for SQL DB are available for .NET applications using ADO .NET and integrate with hello familiar programming experience using hello [System.Transaction](https://msdn.microsoft.com/library/system.transactions.aspx) classes.</span></span> <span data-ttu-id="58635-106">tooget hello bibliotheek, Zie [.NET Framework 4.6.1 (webinstallatie)](https://www.microsoft.com/download/details.aspx?id=49981).</span><span class="sxs-lookup"><span data-stu-id="58635-106">tooget hello library, see [.NET Framework 4.6.1 (Web Installer)](https://www.microsoft.com/download/details.aspx?id=49981).</span></span>

<span data-ttu-id="58635-107">On-premises vereist dergelijk scenario doorgaans Microsoft Distributed Transaction Coordinator (MSDTC) wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="58635-107">On premises, such a scenario usually required running Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="58635-108">Aangezien MSDTC is niet beschikbaar voor Platform-as-a-Service-toepassing in Azure, Hallo mogelijkheid toocoordinate gedistribueerde transacties is nu rechtstreeks geïntegreerd in SQL-database.</span><span class="sxs-lookup"><span data-stu-id="58635-108">Since MSDTC is not available for Platform-as-a-Service application in Azure, hello ability toocoordinate distributed transactions has now been directly integrated into SQL DB.</span></span> <span data-ttu-id="58635-109">Toepassingen kunnen verbinding maken tooany SQL-Database toolaunch gedistribueerde transacties en wordt een van de databases Hallo Hallo gedistribueerde transactie, transparant coördineren zoals weergegeven in de volgende afbeelding Hallo.</span><span class="sxs-lookup"><span data-stu-id="58635-109">Applications can connect tooany SQL Database toolaunch distributed transactions, and one of hello databases will transparently coordinate hello distributed transaction, as shown in hello following figure.</span></span> 

  ![<span data-ttu-id="58635-110">Gedistribueerde transacties met Azure SQL Database met behulp van transacties voor elastische database</span><span class="sxs-lookup"><span data-stu-id="58635-110">Distributed transactions with Azure SQL Database using elastic database transactions</span></span> ][1]

## <a name="common-scenarios"></a><span data-ttu-id="58635-111">Algemene scenario's</span><span class="sxs-lookup"><span data-stu-id="58635-111">Common scenarios</span></span>
<span data-ttu-id="58635-112">Elastische databasetransacties voor SQL-database inschakelen toepassingen toomake atomische wijzigingen toodata opgeslagen in een aantal verschillende SQL-Databases.</span><span class="sxs-lookup"><span data-stu-id="58635-112">Elastic database transactions for SQL DB enable applications toomake atomic changes toodata stored in several different SQL Databases.</span></span> <span data-ttu-id="58635-113">Hallo preview is gericht op de ervaringen van de client-side '-ontwikkeling in C# en .NET.</span><span class="sxs-lookup"><span data-stu-id="58635-113">hello preview focuses on client-side development experiences in C# and .NET.</span></span> <span data-ttu-id="58635-114">Een server-side '-ervaring met T-SQL is gepland voor een later tijdstip.</span><span class="sxs-lookup"><span data-stu-id="58635-114">A server-side experience using T-SQL is planned for a later time.</span></span>  
<span data-ttu-id="58635-115">Elastische database transacties doelen Hallo volgen scenario's:</span><span class="sxs-lookup"><span data-stu-id="58635-115">Elastic database transactions targets hello following scenarios:</span></span>

* <span data-ttu-id="58635-116">Toepassingen in Azure meerdere databases: met dit scenario gegevens is verticaal gepartitioneerd in verschillende databases in SQL-database zodanig dat verschillende soorten gegevens zich op andere databases bevinden.</span><span class="sxs-lookup"><span data-stu-id="58635-116">Multi-database applications in Azure: With this scenario, data is vertically partitioned across several databases in SQL DB such that different kinds of data reside on different databases.</span></span> <span data-ttu-id="58635-117">Bepaalde bewerkingen vereist wijzigingen toodata die wordt bewaard in twee of meer databases.</span><span class="sxs-lookup"><span data-stu-id="58635-117">Some operations require changes toodata which is kept in two or more databases.</span></span> <span data-ttu-id="58635-118">Hallo-toepassing maakt gebruik van de elastische database transacties toocoordinate Hallo wijzigingen over databases en zorg ervoor dat atomisch.</span><span class="sxs-lookup"><span data-stu-id="58635-118">hello application uses elastic database transactions toocoordinate hello changes across databases and ensure atomicity.</span></span>
* <span data-ttu-id="58635-119">Databasetoepassingen van de shard-in Azure: met dit scenario gebruikt gegevenslaag Hallo Hallo [clientbibliotheek voor elastische Database](sql-database-elastic-database-client-library.md) of self-sharding toohorizontally partitie Hallo gegevens tussen meerdere databases in SQL-database.</span><span class="sxs-lookup"><span data-stu-id="58635-119">Sharded database applications in Azure: With this scenario, hello data tier uses hello [Elastic Database client library](sql-database-elastic-database-client-library.md) or self-sharding toohorizontally partition hello data across many databases in SQL DB.</span></span> <span data-ttu-id="58635-120">Een opvallende gebruiksvoorbeeld is Hallo nodig tooperform atomische wijzigingen voor een toepassing met shard multitenant wanneer wijzigingen span tenants.</span><span class="sxs-lookup"><span data-stu-id="58635-120">One prominent use case is hello need tooperform atomic changes for a sharded multi-tenant application when changes span tenants.</span></span> <span data-ttu-id="58635-121">Beschouw bijvoorbeeld een overdracht van een tenant tooanother, beide die zich op verschillende databases.</span><span class="sxs-lookup"><span data-stu-id="58635-121">Think for instance of a transfer from one tenant tooanother, both residing on different databases.</span></span> <span data-ttu-id="58635-122">Een tweede geval is fijnmazig sharding tooaccommodate capaciteitsbehoeften voor een grote tenant die op zijn beurt doorgaans impliceert dat een aantal atomische bewerkingen behoeften toostretch over verschillende databases gebruikt voor Hallo dezelfde tenant.</span><span class="sxs-lookup"><span data-stu-id="58635-122">A second case is fine-grained sharding tooaccommodate capacity needs for a large tenant which in turn typically implies that some atomic operations needs toostretch across several databases used for hello same tenant.</span></span> <span data-ttu-id="58635-123">Een derde wordt atomic updates tooreference gegevens die worden gerepliceerd tussen databases.</span><span class="sxs-lookup"><span data-stu-id="58635-123">A third case is atomic updates tooreference data that are replicated across databases.</span></span> <span data-ttu-id="58635-124">Atomic, transactionele, bewerkingen langs deze regels kunnen nu worden gecoördineerd tussen verschillende databases met Hallo preview.</span><span class="sxs-lookup"><span data-stu-id="58635-124">Atomic, transacted, operations along these lines can now be coordinated across several databases using hello preview.</span></span>
  <span data-ttu-id="58635-125">Elastische databasetransacties gebruiken doorvoertransactie tooensure transactie atomisch in databases.</span><span class="sxs-lookup"><span data-stu-id="58635-125">Elastic database transactions use two-phase commit tooensure transaction atomicity across databases.</span></span> <span data-ttu-id="58635-126">Het is geschikt voor transacties met minder dan 100 databases op een tijdstip binnen een transactie.</span><span class="sxs-lookup"><span data-stu-id="58635-126">It is a good fit for transactions that involve less than 100 databases at a time within a single transaction.</span></span> <span data-ttu-id="58635-127">Deze limieten worden niet afgedwongen, maar een verwachte prestaties en het succespercentage voor elastische database transacties toosuffer wanneer deze limiet wordt overschreden.</span><span class="sxs-lookup"><span data-stu-id="58635-127">These limits are not enforced, but one should expect performance and success rates for elastic database transactions toosuffer when exceeding these limits.</span></span>

## <a name="installation-and-migration"></a><span data-ttu-id="58635-128">Installatie en migratie</span><span class="sxs-lookup"><span data-stu-id="58635-128">Installation and migration</span></span>
<span data-ttu-id="58635-129">Hallo-mogelijkheden voor elastische databasetransacties in SQL-database zijn opgenomen in updates toohello .NET-bibliotheken System.Data.dll en System.Transactions.dll.</span><span class="sxs-lookup"><span data-stu-id="58635-129">hello capabilities for elastic database transactions in SQL DB are provided through updates toohello .NET libraries System.Data.dll and System.Transactions.dll.</span></span> <span data-ttu-id="58635-130">Hallo dll's ervoor te zorgen dat doorvoertransactie wordt gebruikt, indien nodig tooensure atomisch.</span><span class="sxs-lookup"><span data-stu-id="58635-130">hello DLLs ensure that two-phase commit is used where necessary tooensure atomicity.</span></span> <span data-ttu-id="58635-131">toostart ontwikkelen toepassingen met elastische databasetransacties, installeren [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) of een latere versie.</span><span class="sxs-lookup"><span data-stu-id="58635-131">toostart developing applications using elastic database transactions, install [.NET Framework 4.6.1](https://www.microsoft.com/download/details.aspx?id=49981) or a later version.</span></span> <span data-ttu-id="58635-132">Wanneer dit wordt uitgevoerd op een eerdere versie van .NET framework voor hello, transacties toopromote tooa gedistribueerde transactie mislukt en wordt een uitzondering wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="58635-132">When running on an earlier version of hello .NET framework, transactions will fail toopromote tooa distributed transaction and an exception will be raised.</span></span>

<span data-ttu-id="58635-133">U kunt na de installatie Hallo gedistribueerde transactie API's gebruiken in System.Transactions met verbindingen tooSQL DB.</span><span class="sxs-lookup"><span data-stu-id="58635-133">After installation, you can use hello distributed transaction APIs in System.Transactions with connections tooSQL DB.</span></span> <span data-ttu-id="58635-134">Als er bestaande MSDTC-toepassingen met behulp van deze API's, gewoon uw bestaande .NET 4.6-toepassingen opnieuw na de installatie van Hallo 4.6.1 Framework.</span><span class="sxs-lookup"><span data-stu-id="58635-134">If you have existing MSDTC applications using these APIs, simply rebuild your existing applications for .NET 4.6 after installing hello 4.6.1 Framework.</span></span> <span data-ttu-id="58635-135">Als uw projecten .NET 4.6 richten, gebruiken ze automatisch bijgewerkt Hallo-dll's van Hallo nieuwe Framework-versie en de gedistribueerde transactie API-aanroepen in combinatie met verbindingen tooSQL die DB nu slaagt.</span><span class="sxs-lookup"><span data-stu-id="58635-135">If your projects target .NET 4.6, they will automatically use hello updated DLLs from hello new Framework version and distributed transaction API calls in combination with connections tooSQL DB will now succeed.</span></span>

<span data-ttu-id="58635-136">Houd er rekening mee dat transacties voor elastische database vereisen geen MSDTC installeren.</span><span class="sxs-lookup"><span data-stu-id="58635-136">Remember that elastic database transactions do not require installing MSDTC.</span></span> <span data-ttu-id="58635-137">In plaats daarvan worden elastische databasetransacties rechtstreeks beheerd door en binnen SQL-database.</span><span class="sxs-lookup"><span data-stu-id="58635-137">Instead, elastic database transactions are directly managed by and within SQL DB.</span></span> <span data-ttu-id="58635-138">Dit vereenvoudigt scenario's voor de aanzienlijk omdat een implementatie van MSDTC niet nodig toouse gedistribueerde transacties met SQL-database is.</span><span class="sxs-lookup"><span data-stu-id="58635-138">This significantly simplifies cloud scenarios since a deployment of MSDTC is not necessary toouse distributed transactions with SQL DB.</span></span> <span data-ttu-id="58635-139">Sectie 4 wordt in meer detail uitgelegd hoe toodeploy elastische databasetransacties en Hallo .NET framework samen met uw tooAzure cloud-toepassingen vereist.</span><span class="sxs-lookup"><span data-stu-id="58635-139">Section 4 explains in more detail how toodeploy elastic database transactions and hello required .NET framework together with your cloud applications tooAzure.</span></span>

## <a name="development-experience"></a><span data-ttu-id="58635-140">Ontwikkeling biedt</span><span class="sxs-lookup"><span data-stu-id="58635-140">Development experience</span></span>
### <a name="multi-database-applications"></a><span data-ttu-id="58635-141">Meerdere databasetoepassingen</span><span class="sxs-lookup"><span data-stu-id="58635-141">Multi-database applications</span></span>
<span data-ttu-id="58635-142">Hallo volgende voorbeeldcode maakt gebruik van Hallo bekend programmeerervaring met .NET System.Transactions.</span><span class="sxs-lookup"><span data-stu-id="58635-142">hello following sample code uses hello familiar programming experience with .NET System.Transactions.</span></span> <span data-ttu-id="58635-143">Hallo TransactionScope klasse stelt een ambient transactie in .NET.</span><span class="sxs-lookup"><span data-stu-id="58635-143">hello TransactionScope class establishes an ambient transaction in .NET.</span></span> <span data-ttu-id="58635-144">(Een 'ambient transactie' is een die zich in de huidige thread Hallo.) Alle verbindingen in Hallo TransactionScope geopend deel uitmaken van Hallo transactie.</span><span class="sxs-lookup"><span data-stu-id="58635-144">(An “ambient transaction” is one that lives in hello current thread.) All connections opened within hello TransactionScope participate in hello transaction.</span></span> <span data-ttu-id="58635-145">Als verschillende databases deelnemen, is het Hallo-transactie automatisch verhoogde tooa gedistribueerde transactie.</span><span class="sxs-lookup"><span data-stu-id="58635-145">If different databases participate, hello transaction is automatically elevated tooa distributed transaction.</span></span> <span data-ttu-id="58635-146">Hallo-resultaat van Hallo transactie wordt beheerd door Hallo bereik toocomplete tooindicate een doorvoer.</span><span class="sxs-lookup"><span data-stu-id="58635-146">hello outcome of hello transaction is controlled by setting hello scope toocomplete tooindicate a commit.</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = new SqlConnection(connStrDb1))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = new SqlConnection(connStrDb2))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T2 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }

### <a name="sharded-database-applications"></a><span data-ttu-id="58635-147">Shard databasetoepassingen</span><span class="sxs-lookup"><span data-stu-id="58635-147">Sharded database applications</span></span>
<span data-ttu-id="58635-148">Elastische databasetransacties voor SQL-database bieden ook ondersteuning voor gedistribueerde transacties waar u Hallo OpenConnectionForKey methode van Hallo elastische database-bibliotheek tooopen clientverbindingen voor een uitgebreid uit gegevens gebruiken coördineren laag.</span><span class="sxs-lookup"><span data-stu-id="58635-148">Elastic database transactions for SQL DB also support coordinating distributed transactions where you use hello OpenConnectionForKey method of hello elastic database client library tooopen connections for a scaled out data tier.</span></span> <span data-ttu-id="58635-149">Houd rekening met gevallen waarin u tooguarantee transactionele consistentie wijzigingen via diverse verschillende sharding-sleutelwaarden moet.</span><span class="sxs-lookup"><span data-stu-id="58635-149">Consider cases where you need tooguarantee transactional consistency for changes across several different sharding key values.</span></span> <span data-ttu-id="58635-150">Verbindingen toohello shards die als host fungeert voor Hallo verschillende sharding sleutelwaarden worden geleverd met OpenConnectionForKey.</span><span class="sxs-lookup"><span data-stu-id="58635-150">Connections toohello shards hosting hello different sharding key values are brokered using OpenConnectionForKey.</span></span> <span data-ttu-id="58635-151">In de algemene geval Hallo kunnen Hallo verbindingen toodifferent shards zijn, dat gezorgd transactionele garanties een gedistribueerde transactie vereist.</span><span class="sxs-lookup"><span data-stu-id="58635-151">In hello general case, hello connections can be toodifferent shards such that ensuring transactional guarantees requires a distributed transaction.</span></span> <span data-ttu-id="58635-152">Hallo volgende codevoorbeeld ziet u deze methode.</span><span class="sxs-lookup"><span data-stu-id="58635-152">hello following code sample illustrates this approach.</span></span> <span data-ttu-id="58635-153">Hierbij wordt ervan uitgegaan dat een variabele met de naam van shardmap gebruikte toorepresent een shard van clientbibliotheek voor elastische database Hallo toewijzen:</span><span class="sxs-lookup"><span data-stu-id="58635-153">It assumes that a variable called shardmap is used toorepresent a shard map from hello elastic database client library:</span></span>

    using (var scope = new TransactionScope())
    {
        using (var conn1 = shardmap.OpenConnectionForKey(tenantId1, credentialsStr))
        {
            conn1.Open();
            SqlCommand cmd1 = conn1.CreateCommand();
            cmd1.CommandText = string.Format("insert into T1 values(1)");
            cmd1.ExecuteNonQuery();
        }

        using (var conn2 = shardmap.OpenConnectionForKey(tenantId2, credentialsStr))
        {
            conn2.Open();
            var cmd2 = conn2.CreateCommand();
            cmd2.CommandText = string.Format("insert into T1 values(2)");
            cmd2.ExecuteNonQuery();
        }

        scope.Complete();
    }


## <a name="net-installation-for-azure-cloud-services"></a><span data-ttu-id="58635-154">.NET-installatie voor Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="58635-154">.NET installation for Azure Cloud Services</span></span>
<span data-ttu-id="58635-155">Azure biedt verschillende aanbiedingen toohost .NET-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="58635-155">Azure provides several offerings toohost .NET applications.</span></span> <span data-ttu-id="58635-156">Een vergelijking van verschillende Hallo-aanbiedingen is beschikbaar in [vergelijking van Azure App Service, Cloud Services en virtuele Machines](../app-service-web/choose-web-site-cloud-service-vm.md).</span><span class="sxs-lookup"><span data-stu-id="58635-156">A comparison of hello different offerings is available in [Azure App Service, Cloud Services, and Virtual Machines comparison](../app-service-web/choose-web-site-cloud-service-vm.md).</span></span> <span data-ttu-id="58635-157">Als hello gastbesturingssysteem van de aanbieding Hallo kleiner dan .NET 4.6.1 vereist voor de elastische transacties is, moet u tooupgrade Hallo Gast OS too4.6.1.</span><span class="sxs-lookup"><span data-stu-id="58635-157">If hello guest OS of hello offering is smaller than .NET 4.6.1 required for elastic transactions, you need tooupgrade hello guest OS too4.6.1.</span></span> 

<span data-ttu-id="58635-158">Upgrade voor Azure App Services toohello Gast die OS worden momenteel niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="58635-158">For Azure App Services, upgrades toohello guest OS are currently not supported.</span></span> <span data-ttu-id="58635-159">Voor Azure Virtual Machines gewoon aanmelden op Hallo VM en voer het Hallo-installatieprogramma voor Hallo nieuwste .NET framework.</span><span class="sxs-lookup"><span data-stu-id="58635-159">For Azure Virtual Machines, simply log into hello VM and run hello installer for hello latest .NET framework.</span></span> <span data-ttu-id="58635-160">Voor Azure Cloud Services moet u tooinclude Hallo installatie van een nieuwere versie van .NET in Hallo starten van de taken van uw implementatie.</span><span class="sxs-lookup"><span data-stu-id="58635-160">For Azure Cloud Services, you need tooinclude hello installation of a newer .NET version into hello startup tasks of your deployment.</span></span> <span data-ttu-id="58635-161">Hallo-concepten en stappen worden beschreven in [.NET installeren op een Cloud Service-functie](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="58635-161">hello concepts and steps are documented in [Install .NET on a Cloud Service Role](../cloud-services/cloud-services-dotnet-install-dotnet.md).</span></span>  

<span data-ttu-id="58635-162">Let op Hallo installatieprogramma voor .NET 4.6.1 mogelijk meer tijdelijke opslag tijdens het uitvoeren van de bootstrap-proces op Azure-cloudservices dan installatieprogramma voor .NET 4.6 Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="58635-162">Note that hello installer for .NET 4.6.1 may require more temporary storage during hello bootstrapping process on Azure cloud services than hello installer for .NET 4.6.</span></span> <span data-ttu-id="58635-163">tooensure een geslaagde installatie, moet u tooincrease tijdelijke opslag voor uw Azure-cloud-service in uw bestand ServiceDefinition.csdef in Hallo LocalResources sectie en omgevingsinstellingen Hallo van uw taak starten, zoals wordt weergegeven in de volgende Hallo Voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="58635-163">tooensure a successful installation, you need tooincrease temporary storage for your Azure cloud service in your ServiceDefinition.csdef file in hello LocalResources section and hello environment settings of your startup task, as shown in hello following sample:</span></span>

    <LocalResources>
    ...
        <LocalStorage name="TEMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
        <LocalStorage name="TMP" sizeInMB="5000" cleanOnRoleRecycle="false" />
    </LocalResources>
    <Startup>
        <Task commandLine="install.cmd" executionContext="elevated" taskType="simple">
            <Environment>
        ...
                <Variable name="TEMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TEMP']/@path" />
                </Variable>
                <Variable name="TMP">
                    <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/LocalResources/LocalResource[@name='TMP']/@path" />
                </Variable>
            </Environment>
        </Task>
    </Startup>

## <a name="transactions-across-multiple-servers"></a><span data-ttu-id="58635-164">Transacties op meerdere servers</span><span class="sxs-lookup"><span data-stu-id="58635-164">Transactions across multiple servers</span></span>
<span data-ttu-id="58635-165">Elastische databasetransacties worden ondersteund tussen de verschillende logische Azure SQL Database-servers.</span><span class="sxs-lookup"><span data-stu-id="58635-165">Elastic database transactions are supported across different logical servers in Azure SQL Database.</span></span> <span data-ttu-id="58635-166">Meerdere grenzen van de logische server, moeten Hallo deelnemende servers eerst toobe ingevoerd in een relatie wederzijdse communicatie.</span><span class="sxs-lookup"><span data-stu-id="58635-166">When transactions cross logical server boundaries, hello participating servers first need toobe entered into a mutual communication relationship.</span></span> <span data-ttu-id="58635-167">Zodra het Hallo communicatie relatie tot stand is gebracht, Hallo eender welke database in een van twee servers elastische transacties met databases van deelnemen kunnen Hallo andere server.</span><span class="sxs-lookup"><span data-stu-id="58635-167">Once hello communication relationship has been established, any database in any of hello two servers can participate in elastic transactions with databases from hello other server.</span></span> <span data-ttu-id="58635-168">Met transacties spanning van meer dan twee logische servers moet een relatie communicatie toobe in plaats voor elk paar logische servers.</span><span class="sxs-lookup"><span data-stu-id="58635-168">With transactions spanning more than two logical servers, a communication relationship needs toobe in place for any pair of logical servers.</span></span>

<span data-ttu-id="58635-169">Gebruik Hallo PowerShell-cmdlets toomanage communicatie tussen servers relaties voor elastische databasetransacties te volgen:</span><span class="sxs-lookup"><span data-stu-id="58635-169">Use hello following PowerShell cmdlets toomanage cross-server communication relationships for elastic database transactions:</span></span>

* <span data-ttu-id="58635-170">**Nieuwe AzureRmSqlServerCommunicationLink**: Gebruik deze cmdlet toocreate een nieuwe relatie van de communicatie tussen twee logische Azure SQL DB-servers.</span><span class="sxs-lookup"><span data-stu-id="58635-170">**New-AzureRmSqlServerCommunicationLink**: Use this cmdlet toocreate a new communication relationship between two logical servers in Azure SQL DB.</span></span> <span data-ttu-id="58635-171">Hallo-relatie is symmetrische dat beide servers kunnen initiëren transacties met Hallo andere server.</span><span class="sxs-lookup"><span data-stu-id="58635-171">hello relationship is symmetric which means both servers can initiate transactions with hello other server.</span></span>
* <span data-ttu-id="58635-172">**Get-AzureRmSqlServerCommunicationLink**: Gebruik deze cmdlet tooretrieve bestaande communicatie relaties en hun eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="58635-172">**Get-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooretrieve existing communication relationships and their properties.</span></span>
* <span data-ttu-id="58635-173">**Verwijder AzureRmSqlServerCommunicationLink**: Gebruik deze cmdlet tooremove een bestaande relatie voor de communicatie.</span><span class="sxs-lookup"><span data-stu-id="58635-173">**Remove-AzureRmSqlServerCommunicationLink**: Use this cmdlet tooremove an existing communication relationship.</span></span> 

## <a name="monitoring-transaction-status"></a><span data-ttu-id="58635-174">Controle van transactiestatus</span><span class="sxs-lookup"><span data-stu-id="58635-174">Monitoring transaction status</span></span>
<span data-ttu-id="58635-175">Gebruik dynamische beheerweergaven (DMV's) in SQL-database toomonitor status en voortgang van uw transacties lopende elastische database.</span><span class="sxs-lookup"><span data-stu-id="58635-175">Use Dynamic Management Views (DMVs) in SQL DB toomonitor status and progress of your ongoing elastic database transactions.</span></span> <span data-ttu-id="58635-176">Alle DMV's gerelateerde tootransactions zijn relevant voor gedistribueerde transacties die in SQL-database.</span><span class="sxs-lookup"><span data-stu-id="58635-176">All DMVs related tootransactions are relevant for distributed transactions in SQL DB.</span></span> <span data-ttu-id="58635-177">U kunt Hallo bijbehorende lijst van de DMV's hier vinden: [transactie gerelateerde dynamische Management weergaven en -functies (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span><span class="sxs-lookup"><span data-stu-id="58635-177">You can find hello corresponding list of DMVs here: [Transaction Related Dynamic Management Views and Functions (Transact-SQL)](https://msdn.microsoft.com/library/ms178621.aspx).</span></span>

<span data-ttu-id="58635-178">Deze DMV's zijn vooral handig:</span><span class="sxs-lookup"><span data-stu-id="58635-178">These DMVs are particularly useful:</span></span>

* <span data-ttu-id="58635-179">**sys.DM\_tran\_active\_transacties**: een lijst met huidige actieve transacties en hun status.</span><span class="sxs-lookup"><span data-stu-id="58635-179">**sys.dm\_tran\_active\_transactions**: Lists currently active transactions and their status.</span></span> <span data-ttu-id="58635-180">Hallo UOW (werkeenheid) kolom kunt identificeren Hallo verschillende onderliggende transacties die deel uitmaken van toohello dezelfde gedistribueerde transactie.</span><span class="sxs-lookup"><span data-stu-id="58635-180">hello UOW (Unit Of Work) column can identify hello different child transactions that belong toohello same distributed transaction.</span></span> <span data-ttu-id="58635-181">Alle transacties in dezelfde gedistribueerde transactie uitvoeren Hallo Hallo dezelfde UOW-waarde.</span><span class="sxs-lookup"><span data-stu-id="58635-181">All transactions within hello same distributed transaction carry hello same UOW value.</span></span> <span data-ttu-id="58635-182">Zie Hallo [DMV documentatie](https://msdn.microsoft.com/library/ms174302.aspx) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="58635-182">See hello [DMV documentation](https://msdn.microsoft.com/library/ms174302.aspx) for more details.</span></span>
* <span data-ttu-id="58635-183">**sys.DM\_tran\_database\_transacties**: biedt aanvullende informatie over transacties, zoals de plaatsing van Hallo transactie in Hallo logboek.</span><span class="sxs-lookup"><span data-stu-id="58635-183">**sys.dm\_tran\_database\_transactions**: Provides additional information about transactions, such as placement of hello transaction in hello log.</span></span> <span data-ttu-id="58635-184">Zie Hallo [DMV documentatie](https://msdn.microsoft.com/library/ms186957.aspx) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="58635-184">See hello [DMV documentation](https://msdn.microsoft.com/library/ms186957.aspx) for more details.</span></span>
* <span data-ttu-id="58635-185">**sys.DM\_tran\_vergrendelingen**: bevat informatie over Hallo vergrendelingen die momenteel zijn ingesteld door actieve transacties.</span><span class="sxs-lookup"><span data-stu-id="58635-185">**sys.dm\_tran\_locks**: Provides information about hello locks that are currently held by ongoing transactions.</span></span> <span data-ttu-id="58635-186">Zie Hallo [DMV documentatie](https://msdn.microsoft.com/library/ms190345.aspx) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="58635-186">See hello [DMV documentation](https://msdn.microsoft.com/library/ms190345.aspx) for more details.</span></span>

## <a name="limitations"></a><span data-ttu-id="58635-187">Beperkingen</span><span class="sxs-lookup"><span data-stu-id="58635-187">Limitations</span></span>
<span data-ttu-id="58635-188">Hallo beperkingen momenteel volgende van toepassing tooelastic databasetransacties in SQL-database:</span><span class="sxs-lookup"><span data-stu-id="58635-188">hello following limitations currently apply tooelastic database transactions in SQL DB:</span></span>

* <span data-ttu-id="58635-189">Alleen de transacties voor databases in SQL-database worden ondersteund.</span><span class="sxs-lookup"><span data-stu-id="58635-189">Only transactions across databases in SQL DB are supported.</span></span> <span data-ttu-id="58635-190">Andere [X / Open XA](https://en.wikipedia.org/wiki/X/Open_XA) resourceproviders en databases buiten SQL-database kunnen niet deelnemen aan elastische databasetransacties.</span><span class="sxs-lookup"><span data-stu-id="58635-190">Other [X/Open XA](https://en.wikipedia.org/wiki/X/Open_XA) resource providers and databases outside of SQL DB cannot participate in elastic database transactions.</span></span> <span data-ttu-id="58635-191">Dit betekent dat transacties voor elastische database kunnen niet uitrekken on-premises SQL Server en Azure SQL-Databases.</span><span class="sxs-lookup"><span data-stu-id="58635-191">That means that elastic database transactions cannot stretch across on premises SQL Server and Azure SQL Databases.</span></span> <span data-ttu-id="58635-192">Voor gedistribueerde transacties on-premises blijven toouse MSDTC.</span><span class="sxs-lookup"><span data-stu-id="58635-192">For distributed transactions on premises, continue toouse MSDTC.</span></span> 
* <span data-ttu-id="58635-193">Alleen client gecoördineerd transacties van een .NET-toepassing worden ondersteund.</span><span class="sxs-lookup"><span data-stu-id="58635-193">Only client-coordinated transactions from a .NET application are supported.</span></span> <span data-ttu-id="58635-194">Server-side-ondersteuning voor T-SQL zoals BEGIN DISTRIBUTED TRANSACTION is gepland, maar nog niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="58635-194">Server-side support for T-SQL such as BEGIN DISTRIBUTED TRANSACTION is planned, but not yet available.</span></span> 
* <span data-ttu-id="58635-195">Transacties die in de hele WCF-services worden niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="58635-195">Transactions across WCF services are not supported.</span></span> <span data-ttu-id="58635-196">U hebt bijvoorbeeld een WCF-service-methode die een transactie wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="58635-196">For example, you have a WCF service method that executes a transaction.</span></span> <span data-ttu-id="58635-197">Hallo-aanroepen vanuit een transactiebereik insluitende mislukt als een [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span><span class="sxs-lookup"><span data-stu-id="58635-197">Enclosing hello call within a transaction scope will fail as a [System.ServiceModel.ProtocolException](https://msdn.microsoft.com/library/system.servicemodel.protocolexception).</span></span>

## <a name="next-steps"></a><span data-ttu-id="58635-198">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="58635-198">Next steps</span></span>
<span data-ttu-id="58635-199">Voor vragen kunt contact toous op Hallo [SQL Database-forum](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) en voor functieaanvragen, deze toe te voegen toohello [forum met feedback van SQL-Database](https://feedback.azure.com/forums/217321-sql-database/).</span><span class="sxs-lookup"><span data-stu-id="58635-199">For questions, please reach out toous on hello [SQL Database forum](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted) and for feature requests, please add them toohello [SQL Database feedback forum](https://feedback.azure.com/forums/217321-sql-database/).</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-transactions-overview/distributed-transactions.png



