---
title: aaaUser verificatie voor API-Apps in Azure App Service | Microsoft Docs
description: Meer informatie over hoe een API-app in Azure App Service doordat tooprotect toegang krijgen tot enige tooauthenticated gebruikers.
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: 3896760d-46ff-4b67-b98a-edd233f24758
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: dotnet
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: alkarche
ms.openlocfilehash: 4702fc77fcfe736405e22b033c35d22ae3c5a300
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="user-authentication-for-api-apps-in-azure-app-service"></a><span data-ttu-id="189ef-103">Gebruikersverificatie voor API-Apps in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="189ef-103">User authentication for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="189ef-104">Overzicht</span><span class="sxs-lookup"><span data-stu-id="189ef-104">Overview</span></span>
<span data-ttu-id="189ef-105">Dit artikel laat zien hoe tooprotect een Azure-API-app zodat die alleen gebruikers geverifieerde deze kan aanroepen.</span><span class="sxs-lookup"><span data-stu-id="189ef-105">This article shows how tooprotect an Azure API app so that only authenticated users can call it.</span></span> <span data-ttu-id="189ef-106">Hallo artikel wordt ervan uitgegaan dat u Hallo hebt gelezen [overzicht van Azure App Service-authenticatie](../app-service/app-service-authentication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-106">hello article assumes that you have read hello [Azure App Service authentication overview](../app-service/app-service-authentication-overview.md).</span></span>

<span data-ttu-id="189ef-107">U leert het volgende:</span><span class="sxs-lookup"><span data-stu-id="189ef-107">You'll learn:</span></span>

* <span data-ttu-id="189ef-108">Hoe tooconfigure een verificatieprovider, met details voor Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="189ef-108">How tooconfigure an authentication provider, with details for Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="189ef-109">Hoe een API-app met behulp van beveiligde tooconsume Hallo [Active Directory Authentication Library (ADAL) voor JavaScript](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span><span class="sxs-lookup"><span data-stu-id="189ef-109">How tooconsume a protected API app by using hello [Active Directory Authentication Library (ADAL) for JavaScript](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span></span>

<span data-ttu-id="189ef-110">Hallo artikel bestaat uit twee gedeelten:</span><span class="sxs-lookup"><span data-stu-id="189ef-110">hello article contains two sections:</span></span>

* <span data-ttu-id="189ef-111">Hallo [hoe tooconfigure gebruikersverificatie in Azure App Service](#authconfig) sectie wordt uitgelegd hoe u algemene tooconfigure gebruikersverificatie voor API Apps en evenveel van toepassing is tooall frameworks die worden ondersteund door App Service, waaronder .NET, Node.js en Java.</span><span class="sxs-lookup"><span data-stu-id="189ef-111">hello [How tooconfigure user authentication in Azure App Service](#authconfig) section explains in general how tooconfigure user authentication for any API app and applies equally tooall frameworks supported by App Service, including .NET, Node.js, and Java.</span></span>
* <span data-ttu-id="189ef-112">Beginnen met Hallo [u doorgaat met de .NET API Apps-zelfstudies Hallo](#tutorialstart) sectie, Hallo artikel handleidingen u bij het configureren van een voorbeeldtoepassing met .NET back-end en een AngularJS-front-end dat gebruikmaakt van Azure Active Directory voor gebruiker -verificatie.</span><span class="sxs-lookup"><span data-stu-id="189ef-112">Starting with hello [Continuing hello .NET API Apps tutorials](#tutorialstart) section, hello article guides you through configuring a sample application with a .NET back end and an AngularJS front end so that it uses Azure Active Directory for user authentication.</span></span> 

## <span data-ttu-id="189ef-113"><a id="authconfig"></a>Hoe tooconfigure gebruikersverificatie in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="189ef-113"><a id="authconfig"></a> How tooconfigure user authentication in Azure App Service</span></span>
<span data-ttu-id="189ef-114">Deze sectie bevat algemene instructies die van toepassing zijn tooany API-app.</span><span class="sxs-lookup"><span data-stu-id="189ef-114">This section provides general instructions that apply tooany API app.</span></span> <span data-ttu-id="189ef-115">Ga te voor stappen specifieke toohello tooDo lijst .NET-voorbeeldtoepassing[u doorgaat zelfstudies .NET-aan de slag Hallo](#tutorialstart).</span><span class="sxs-lookup"><span data-stu-id="189ef-115">For steps specific toohello tooDo List .NET sample application, go too[Continuing hello .NET getting-started tutorials](#tutorialstart).</span></span>

1. <span data-ttu-id="189ef-116">In Hallo [Azure-portal](https://portal.azure.com/), navigeer toohello **instellingen** blade van Hallo API-app die u tooprotect, zoeken Hallo wilt **functies** sectie en klik vervolgens op  **Verificatie / autorisatie**.</span><span class="sxs-lookup"><span data-stu-id="189ef-116">In hello [Azure portal](https://portal.azure.com/), navigate toohello **Settings** blade of hello API app that you want tooprotect, find hello **Features** section, and then click **Authentication/ Authorization**.</span></span>
   
    ![Azure-portal-verificatie/autorisatie](./media/app-service-api-dotnet-user-principal-auth/features.png)
2. <span data-ttu-id="189ef-118">In Hallo **verificatie / autorisatie** blade, klikt u op **op**.</span><span class="sxs-lookup"><span data-stu-id="189ef-118">In hello **Authentication / Authorization** blade, click **On**.</span></span>
3. <span data-ttu-id="189ef-119">Selecteer een van de opties voor Hallo op Hallo **tootake actie wanneer de aanvraag is niet geverifieerd** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="189ef-119">Select one of hello options from hello **Action tootake when request is not authenticated** drop-down list.</span></span>
   
   * <span data-ttu-id="189ef-120">Als u wilt dat alleen geverifieerde aanroepen tooreach uw API-app, kiest u een Hallo **Meld u aan met...**  opties.</span><span class="sxs-lookup"><span data-stu-id="189ef-120">If you want only authenticated calls tooreach your API app, choose one of hello **Log in with ...** options.</span></span> <span data-ttu-id="189ef-121">Deze optie kunt u tooprotect Hallo API-app zonder het schrijven van code die in deze wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="189ef-121">This option enables you tooprotect hello API app without writing any code that runs in it.</span></span>
   * <span data-ttu-id="189ef-122">Als u wilt dat alle aanroepen tooreach uw API-app, kiest u **aanvraag toestaan (geen actie)**.</span><span class="sxs-lookup"><span data-stu-id="189ef-122">If you want all calls tooreach your API app, choose **Allow request (no action)**.</span></span> <span data-ttu-id="189ef-123">U kunt deze optie niet-geverifieerde toodirect aanroepfuncties tooa keuze van verificatieproviders gebruiken.</span><span class="sxs-lookup"><span data-stu-id="189ef-123">You can use this option toodirect unauthenticated callers tooa choice of authentication providers.</span></span> <span data-ttu-id="189ef-124">Met deze optie hebt u toowrite code toohandle autorisatie.</span><span class="sxs-lookup"><span data-stu-id="189ef-124">With this option you have toowrite code toohandle authorization.</span></span>
     
     <span data-ttu-id="189ef-125">Zie [Verificatie en autorisatie voor API Apps in Azure App Service](app-service-api-authentication.md#multiple-protection-options) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="189ef-125">For more information, see [Authentication and authorization for API Apps in Azure App Service](app-service-api-authentication.md#multiple-protection-options).</span></span>
4. <span data-ttu-id="189ef-126">Selecteer een of meer Hallo **verificatieproviders**.</span><span class="sxs-lookup"><span data-stu-id="189ef-126">Select one or more of hello **Authentication Providers**.</span></span>
   
    <span data-ttu-id="189ef-127">Hallo-afbeelding ziet u keuzes waarbij alle aanroepfuncties toobe geverifieerd door Azure AD.</span><span class="sxs-lookup"><span data-stu-id="189ef-127">hello image shows    choices that require all callers toobe authenticated by Azure AD.</span></span>
   
    ![Azure-verificatie/autorisatie-portalblade](./media/app-service-api-dotnet-user-principal-auth/authblade.png)
   
    <span data-ttu-id="189ef-129">Wanneer u een verificatieprovider kiest, wordt in Hallo portal wordt een blade configuratie weergegeven voor die provider.</span><span class="sxs-lookup"><span data-stu-id="189ef-129">When you choose an authentication provider, hello portal displays a configuration blade for that provider.</span></span> 
   
    <span data-ttu-id="189ef-130">Zie voor gedetailleerde instructies waarin wordt uitgelegd hoe tooconfigure verificatie provider configuratie blades Hallo [hoe tooconfigure uw App Service-toepassing toouse Azure Active Directory-aanmelding](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-130">For detailed instructions that explain how tooconfigure hello authentication provider configuration blades, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="189ef-131">(Hallo koppeling gaat tooan artikel over Azure AD, maar Hallo artikel zelf bevat tabbladen die een koppeling tooarticles voor Hallo andere verificatieproviders.)</span><span class="sxs-lookup"><span data-stu-id="189ef-131">(hello link goes tooan article about Azure AD, but hello article itself contains tabs that link tooarticles for hello other authentication providers.)</span></span>
5. <span data-ttu-id="189ef-132">Wanneer u met de Hallo verificatie provider configuratie blade bent klaar, klikt u op **OK**.</span><span class="sxs-lookup"><span data-stu-id="189ef-132">When you're done with hello authentication provider configuration blade, click **OK**.</span></span>
6. <span data-ttu-id="189ef-133">In Hallo **verificatie / autorisatie** blade, klikt u op **opslaan**.</span><span class="sxs-lookup"><span data-stu-id="189ef-133">In hello **Authentication / Authorization** blade, click **Save**.</span></span>

<span data-ttu-id="189ef-134">Wanneer dit wordt gedaan, wordt alle API-aanroepen in App Service geverifieerd voordat ze Hallo API-app bereiken.</span><span class="sxs-lookup"><span data-stu-id="189ef-134">When this is done, App Service authenticates all API calls before they reach hello API app.</span></span> <span data-ttu-id="189ef-135">Hallo-verificatie werken Hallo gelijk voor alle talen die App-service wordt ondersteund, waaronder .NET, Node.js en Java.</span><span class="sxs-lookup"><span data-stu-id="189ef-135">hello authentication services work hello same for all languages that App service supports, including .NET, Node.js, and Java.</span></span> 

<span data-ttu-id="189ef-136">toomake geverifieerd API-aanroepen, Hallo aanroeper bevat Hallo-verificatieprovider OAuth 2.0-bearer-token in autorisatie-header Hallo van HTTP-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="189ef-136">toomake authenticated API calls, hello caller includes hello authentication provider's OAuth 2.0 bearer token in hello Authorization header of HTTP requests.</span></span> <span data-ttu-id="189ef-137">Hallo-token kan worden verkregen met behulp van de SDK Hallo-verificatieprovider.</span><span class="sxs-lookup"><span data-stu-id="189ef-137">hello token can be acquired by using hello authentication provider's SDK.</span></span>

## <span data-ttu-id="189ef-138"><a id="tutorialstart"></a>U kunt doorgaan Hallo .NET API Apps-zelfstudies</span><span class="sxs-lookup"><span data-stu-id="189ef-138"><a id="tutorialstart"></a> Continuing hello .NET API Apps tutorials</span></span>
<span data-ttu-id="189ef-139">Als u Hallo Node.js of Java-zelfstudies voor API-apps volgt, slaat u het volgende artikel toohello, [principal verificatie van de service voor API-apps](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-139">If you are following hello Node.js or Java tutorials for API apps, skip toohello next article, [service principal authentication for API apps](app-service-api-dotnet-service-principal-auth.md).</span></span> 

<span data-ttu-id="189ef-140">Als u Hallo .NET-zelfstudie serie voor API-apps volgt en al Hallo voorbeeldtoepassing hebben geïmplementeerd zoals beschreven in Hallo [eerste](app-service-api-dotnet-get-started.md) en [tweede](app-service-api-cors-consume-javascript.md) zelfstudies overslaan toohello [instellen verificatie in App Service en Azure AD](#azureauth) sectie.</span><span class="sxs-lookup"><span data-stu-id="189ef-140">If you are following hello .NET tutorial series for API apps and have already deployed hello sample application as directed in hello [first](app-service-api-dotnet-get-started.md) and [second](app-service-api-cors-consume-javascript.md) tutorials, skip toohello [Set up authentication in App Service and Azure AD](#azureauth) section.</span></span>

<span data-ttu-id="189ef-141">Als u deze zelfstudie toofollow wilt zonder tussenkomst van de eerste en tweede zelfstudies hello, Hallo volgende stappen uit die wordt uitgelegd hoe tooget gestart met behulp van een geautomatiseerd proces toodeploy Hallo-voorbeeldtoepassing.</span><span class="sxs-lookup"><span data-stu-id="189ef-141">If you want toofollow this tutorial without going through hello first and second tutorials, do hello following steps which explain how tooget started by using an automated process toodeploy hello sample application.</span></span>

> [!NOTE]
> <span data-ttu-id="189ef-142">Hallo volgende stappen kunnen u dezelfde uitgangspunt als wanneer u de eerste twee zelfstudies, met één uitzondering Hallo toohello: Visual Studio al weet niet welk web-app of API-app die elk project wordt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="189ef-142">hello following steps get you toohello same starting point as if you did hello first two tutorials, with one exception: Visual Studio won't already know which web app or API app that each project gets deployed to.</span></span> <span data-ttu-id="189ef-143">Dit betekent dat u hebt geen exacte instructies in deze zelfstudie waarin wordt uitgelegd hoe toodeploy toohello rechts doelen.</span><span class="sxs-lookup"><span data-stu-id="189ef-143">That means you won't have exact instructions in this tutorial that explain how toodeploy toohello right targets.</span></span> <span data-ttu-id="189ef-144">Als u niet vertrouwd bent met uitzoeken hoe toodo Hallo zelf implementatiestappen, is het beter toofollow Hallo zelfstudie reeks van Hallo [eerste zelfstudie](app-service-api-dotnet-get-started.md) dan toostart met deze automatische implementatie.</span><span class="sxs-lookup"><span data-stu-id="189ef-144">If you're not comfortable with figuring out how toodo hello deployment steps on your own, it's better toofollow hello tutorial series from hello [first tutorial](app-service-api-dotnet-get-started.md) than toostart with this automated deployment process.</span></span>
> 
> 

1. <span data-ttu-id="189ef-145">Zorg ervoor dat u beschikt over alle Hallo vereisten in Hallo [eerste zelfstudie](app-service-api-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-145">Make sure that you have all of hello prerequisites listed in hello [first tutorial](app-service-api-dotnet-get-started.md).</span></span> <span data-ttu-id="189ef-146">Deze zelfstudies verificatie in toevoeging toohello vereisten die worden vermeld, wordt ervan uitgegaan dat u eerder hebt gewerkt met App Service-web-apps en API-apps in Visual Studio en hello Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="189ef-146">In addition toohello prerequisites listed, these authentication tutorials assume that you have worked with App Service web apps and API apps in Visual Studio and hello Azure portal.</span></span>
2. <span data-ttu-id="189ef-147">Klik op Hallo **tooAzure implementeren** knop in Hallo [tooDo lijst opslagplaats Leesmij-voorbeeldbestand](https://github.com/azure-samples/app-service-api-dotnet-todo-list/blob/master/readme.md) toodeploy Hallo API apps en Hallo web-app.</span><span class="sxs-lookup"><span data-stu-id="189ef-147">Click hello **Deploy tooAzure** button in hello [tooDo List sample repository readme file](https://github.com/azure-samples/app-service-api-dotnet-todo-list/blob/master/readme.md) toodeploy hello API apps and hello web app.</span></span> <span data-ttu-id="189ef-148">Noteer hello Azure-resourcegroep die wordt gemaakt, zoals u dit later toolook van web-app en API-app-namen kunt.</span><span class="sxs-lookup"><span data-stu-id="189ef-148">Make a note of hello Azure resource group that gets created, as you can use this later toolook up web app and API app names.</span></span>
3. <span data-ttu-id="189ef-149">Download of kloon Hallo [tooDo lijst voorbeeld opslagplaats](https://github.com/Azure-Samples/app-service-api-dotnet-todo-list) tooget Hallo code die u met lokaal in Visual Studio werkt.</span><span class="sxs-lookup"><span data-stu-id="189ef-149">Download or clone hello [tooDo List sample repository](https://github.com/Azure-Samples/app-service-api-dotnet-todo-list) tooget hello code that you'll work with locally in Visual Studio.</span></span>

## <span data-ttu-id="189ef-150"><a id="azureauth"></a>Verificatie in App Service en Azure AD instellen</span><span class="sxs-lookup"><span data-stu-id="189ef-150"><a id="azureauth"></a> Set up authentication in App Service and Azure AD</span></span>
<span data-ttu-id="189ef-151">U hebt nu Hallo toepassing die wordt uitgevoerd in Azure App Service zonder dat gebruikers worden geverifieerd.</span><span class="sxs-lookup"><span data-stu-id="189ef-151">You now have hello application running in Azure App Service without requiring that users be authenticated.</span></span> <span data-ttu-id="189ef-152">In deze sectie kunt u verificatie toevoegt als volgt Hallo taken te volgen:</span><span class="sxs-lookup"><span data-stu-id="189ef-152">In this section you add authentication by doing hello following tasks:</span></span>

* <span data-ttu-id="189ef-153">Verificatie van App Service toorequire Azure Active Directory (Azure AD) voor het aanroepen van Hallo middelste laag API-app configureren.</span><span class="sxs-lookup"><span data-stu-id="189ef-153">Configure App Service toorequire Azure Active Directory (Azure AD) authentication for calling hello middle tier API app.</span></span>
* <span data-ttu-id="189ef-154">Maak een Azure AD-toepassing.</span><span class="sxs-lookup"><span data-stu-id="189ef-154">Create an Azure AD application.</span></span>
* <span data-ttu-id="189ef-155">Configureer hello Azure AD-toepassing toosend hello bearer-token na aanmelding toohello AngularJS-front-end.</span><span class="sxs-lookup"><span data-stu-id="189ef-155">Configure hello Azure AD application toosend hello bearer token after logon toohello AngularJS front end.</span></span> 

<span data-ttu-id="189ef-156">Als u problemen bij de volgende zelfstudie Hallo-instructies, Zie Hallo [probleemoplossing](#troubleshooting) sectie aan einde van de zelfstudie Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-156">If you run into problems while following hello tutorial directions, see hello [Troubleshooting](#troubleshooting) section at hello end of hello tutorial.</span></span> 

### <a name="configure-authentication-for-hello-middle-tier-api-app"></a><span data-ttu-id="189ef-157">Verificatie voor de middelste laag Hallo API-app configureren</span><span class="sxs-lookup"><span data-stu-id="189ef-157">Configure authentication for hello middle tier API app</span></span>
1. <span data-ttu-id="189ef-158">In Hallo [Azure-portal](https://portal.azure.com/), navigeer toohello **instellingen** blade van Hallo API-app die u hebt gemaakt voor het project ToDoListAPI Hallo Hallo zoeken **functies** sectie, en vervolgens Klik op **verificatie / autorisatie**.</span><span class="sxs-lookup"><span data-stu-id="189ef-158">In hello [Azure portal](https://portal.azure.com/), navigate toohello **Settings** blade of hello API app that you created for hello ToDoListAPI project, find hello **Features** section, and then click **Authentication / Authorization**.</span></span>
   
    ![Azure-portal-verificatie/autorisatie](./media/app-service-api-dotnet-user-principal-auth/features.png)
2. <span data-ttu-id="189ef-160">In Hallo **verificatie / autorisatie** blade, klikt u op **op**.</span><span class="sxs-lookup"><span data-stu-id="189ef-160">In hello **Authentication / Authorization** blade, click **On**.</span></span>
3. <span data-ttu-id="189ef-161">In Hallo **tootake actie wanneer de aanvraag is niet geverifieerd** vervolgkeuzelijst, selecteer **aanmelden met Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="189ef-161">In hello **Action tootake when request is not authenticated** drop-down list, select **Log in with Azure Active Directory**.</span></span>
   
    <span data-ttu-id="189ef-162">Deze optie zorgt ervoor dat er geen aanvragen voor unauathenticated Hallo API-app wordt bereiken.</span><span class="sxs-lookup"><span data-stu-id="189ef-162">This option ensures that no unauathenticated requests will reach hello API app.</span></span> 
4. <span data-ttu-id="189ef-163">Onder **verificatieproviders**, klikt u op **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="189ef-163">Under **Authentication Providers**, click **Azure Active Directory**.</span></span>
   
    ![Azure-verificatie/autorisatie-portalblade](./media/app-service-api-dotnet-user-principal-auth/authblade.png)
5. <span data-ttu-id="189ef-165">In Hallo **Azure Active Directory-instellingen** blade, klikt u op **Express**</span><span class="sxs-lookup"><span data-stu-id="189ef-165">In hello **Azure Active Directory Settings** blade, click **Express**</span></span>
   
    ![Azure portal-verificatie/autorisatie Express optie](./media/app-service-api-dotnet-user-principal-auth/aadsettings.png)
   
    <span data-ttu-id="189ef-167">Hello **Express** optie App Service kunt automatisch een Azure AD-toepassing maken in uw Azure AD [tenant](https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#BKMK_WhatIsAnAzureADTenant).</span><span class="sxs-lookup"><span data-stu-id="189ef-167">With hello **Express** option, App Service can automatically create an Azure AD application in your Azure AD [tenant](https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#BKMK_WhatIsAnAzureADTenant).</span></span> 
   
    <span data-ttu-id="189ef-168">U hebt geen toocreate een tenant, omdat elke Azure-account automatisch een heeft.</span><span class="sxs-lookup"><span data-stu-id="189ef-168">You don't have toocreate a tenant, because every Azure account automatically has one.</span></span>
6. <span data-ttu-id="189ef-169">Onder **beheermodus**, klikt u op **nieuwe AD-App maken** als deze niet al is geselecteerd en Let op Hallo-waarde die in Hallo **App maken** tekstvak; u moet deze AAD opzoeken de toepassing in de klassieke Azure-portal later Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-169">Under **Management mode**, click **Create New AD App** if it isn't already selected, and notice hello value that is in hello **Create App** text box; you'll look up this AAD application in hello Azure classic portal later.</span></span>
   
    ![Azure-portal Azure AD-instellingen](./media/app-service-api-dotnet-user-principal-auth/aadsettings2.png)
   
    <span data-ttu-id="189ef-171">Azure maakt automatisch een Azure AD-toepassing met de opgegeven naam Hallo in uw Azure AD-tenant.</span><span class="sxs-lookup"><span data-stu-id="189ef-171">Azure will automatically create an Azure AD application with hello indicated name in your Azure AD tenant.</span></span> <span data-ttu-id="189ef-172">Naam standaard hello Azure AD-toepassing hello dezelfde als Hallo API-app.</span><span class="sxs-lookup"><span data-stu-id="189ef-172">By default, hello Azure AD application is named hello same as hello API app.</span></span> <span data-ttu-id="189ef-173">Als u liever, kunt u een andere naam.</span><span class="sxs-lookup"><span data-stu-id="189ef-173">If you prefer, you can enter a different name.</span></span>
7. <span data-ttu-id="189ef-174">Klik op **OK**.</span><span class="sxs-lookup"><span data-stu-id="189ef-174">Click **OK**.</span></span>
8. <span data-ttu-id="189ef-175">In Hallo **verificatie / autorisatie** blade, klikt u op **opslaan**.</span><span class="sxs-lookup"><span data-stu-id="189ef-175">In hello **Authentication / Authorization** blade, click **Save**.</span></span>
   
    ![Op Opslaan klikken](./media/app-service-api-dotnet-user-principal-auth/authsave.png)

<span data-ttu-id="189ef-177">Alleen gebruikers in uw Azure AD-tenant kunnen nu Hallo API-app aanroepen.</span><span class="sxs-lookup"><span data-stu-id="189ef-177">Now only users in your Azure AD tenant can call hello API app.</span></span>

### <a name="optional-test-hello-api-app"></a><span data-ttu-id="189ef-178">Optioneel: Hallo API app testen</span><span class="sxs-lookup"><span data-stu-id="189ef-178">Optional: Test hello API app</span></span>
1. <span data-ttu-id="189ef-179">Ga in een browser toohello-URL van Hallo API-app: in Hallo **API-app** blade in hello Azure-portal, klikt u op de koppeling onder Hallo **URL**.</span><span class="sxs-lookup"><span data-stu-id="189ef-179">In a browser go toohello URL of hello API app: in hello **API app** blade in hello Azure portal, click hello link under **URL**.</span></span>  
   
    <span data-ttu-id="189ef-180">U bent omgeleide tooa aanmeldingsscherm omdat niet-geverifieerde aanvragen tooreach Hallo API-app niet zijn toegestaan.</span><span class="sxs-lookup"><span data-stu-id="189ef-180">You are redirected tooa login screen because unauthenticated requests are not allowed tooreach hello API app.</span></span>
   
    <span data-ttu-id="189ef-181">Als uw browser toohello 'is gemaakt' pagina gaat, Hallo browser al kan worden geregistreerd op--in dat geval open een InPrivate- of Incognito-venster en ga toohello API-app-URL.</span><span class="sxs-lookup"><span data-stu-id="189ef-181">If your browser goes toohello "successfully created" page, hello browser might already be logged on -- in that case, open an InPrivate or Incognito window and go toohello API app's URL.</span></span>
2. <span data-ttu-id="189ef-182">Meld u aan met referenties voor een gebruiker in uw Azure AD-tenant.</span><span class="sxs-lookup"><span data-stu-id="189ef-182">Log on using credentials for a user in your Azure AD tenant.</span></span>
   
    <span data-ttu-id="189ef-183">Wanneer u bent aangemeld, wordt de pagina 'gemaakt' hello weergegeven in Hallo browser.</span><span class="sxs-lookup"><span data-stu-id="189ef-183">When you're logged on, hello "successfully created" page appears in hello browser.</span></span>
3. <span data-ttu-id="189ef-184">De browser sluiten Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-184">Close hello browser.</span></span>

### <a name="configure-hello-azure-ad-application"></a><span data-ttu-id="189ef-185">De toepassing hello Azure AD configureren</span><span class="sxs-lookup"><span data-stu-id="189ef-185">Configure hello Azure AD application</span></span>
<span data-ttu-id="189ef-186">Wanneer u Azure AD-verificatie hebt geconfigureerd, wordt in App Service een Azure AD-toepassing voor u gemaakt.</span><span class="sxs-lookup"><span data-stu-id="189ef-186">When you configured Azure AD authentication, App Service created an Azure AD application for you.</span></span> <span data-ttu-id="189ef-187">Hallo nieuwe Azure AD-toepassing is standaard geconfigureerd tooprovide hello bearer-token toohello van API-app-URL.</span><span class="sxs-lookup"><span data-stu-id="189ef-187">By default hello new Azure AD application was configured tooprovide hello bearer token toohello API app's URL.</span></span> <span data-ttu-id="189ef-188">In deze sectie configureert u hello Azure AD toepassing tooprovide hello bearer-token toohello AngularJS-front-end in plaats van rechtstreeks toohello middelste laag API-app.</span><span class="sxs-lookup"><span data-stu-id="189ef-188">In this section you configure hello Azure AD application tooprovide hello bearer token toohello AngularJS front end instead of directly toohello middle tier API app.</span></span> <span data-ttu-id="189ef-189">Hallo AngularJS-front-end stuurt Hallo token toohello API-app wanneer deze API-app Hallo aanroept.</span><span class="sxs-lookup"><span data-stu-id="189ef-189">hello AngularJS front end will send hello token toohello API app when it calls hello API app.</span></span>

> [!NOTE]
> <span data-ttu-id="189ef-190">tookeep hello proces zo eenvoudig mogelijk, voor deze zelfstudie wordt een enkele Azure AD gebruikt een toepassing voor zowel Hallo-front-end en Hallo middelste laag API-app.</span><span class="sxs-lookup"><span data-stu-id="189ef-190">tookeep hello process as simple as possible, this tutorial uses a single Azure AD application for both hello front end and hello middle tier API app.</span></span> <span data-ttu-id="189ef-191">Een andere optie is toouse twee Azure AD-toepassingen.</span><span class="sxs-lookup"><span data-stu-id="189ef-191">Another option is toouse two Azure AD applications.</span></span> <span data-ttu-id="189ef-192">In dat geval hebt u toogive Hallo-front-end van Azure AD-toepassing machtiging toocall Hallo middelste laag van Azure AD-toepassing.</span><span class="sxs-lookup"><span data-stu-id="189ef-192">In that case you would have toogive hello front end's Azure AD application permission toocall hello middle tier's Azure AD application.</span></span> <span data-ttu-id="189ef-193">Deze aanpak meerdere toepassingen, krijgt u meer gedetailleerde controle over machtigingen tooeach laag.</span><span class="sxs-lookup"><span data-stu-id="189ef-193">This multi-application approach would give you more granular control over permissions tooeach tier.</span></span>
> 
> 

1. <span data-ttu-id="189ef-194">In Hallo [klassieke Azure-portal](https://manage.windowsazure.com/), gaat u te**Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="189ef-194">In hello [Azure classic portal](https://manage.windowsazure.com/), go too**Azure Active Directory**.</span></span>
   
   <span data-ttu-id="189ef-195">U hebt toouse Hallo klassieke portal omdat bepaalde Azure Active Directory-instellingen die u moet toegang hebben tot tooare nog niet beschikbaar in Hallo huidige Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="189ef-195">You have toouse hello classic portal because certain Azure Active Directory settings that you need access tooare not yet available in hello current Azure portal.</span></span>
2. <span data-ttu-id="189ef-196">Op Hallo **Directory** tabblad, klikt u op uw AAD-tenant.</span><span class="sxs-lookup"><span data-stu-id="189ef-196">On hello **Directory** tab, click your AAD tenant.</span></span>
   
   ![Azure AD in de klassieke portal](./media/app-service-api-dotnet-user-principal-auth/selecttenant.png)
3. <span data-ttu-id="189ef-198">Klik op **toepassingen > Mijn bedrijf eigenaar is van toepassingen**, en klik vervolgens op het vinkje Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-198">Click **Applications > Applications my company owns**, and then click hello check mark.</span></span>
   
   <span data-ttu-id="189ef-199">Mogelijk hebt u ook toorefresh Hallo pagina toosee Hallo nieuwe toepassing.</span><span class="sxs-lookup"><span data-stu-id="189ef-199">You might also have toorefresh hello page toosee hello new application.</span></span>
4. <span data-ttu-id="189ef-200">Klik op Hallo naam Hallo die Azure voor u gemaakt wanneer u verificatie is ingeschakeld voor uw API-app in de lijst met toepassingen Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-200">In hello list of applications, click hello name of hello one that Azure created for you when you enabled authentication for your API app.</span></span>
   
   ![Op het tabblad Azure AD-toepassingen](./media/app-service-api-dotnet-user-principal-auth/appstab.png)
5. <span data-ttu-id="189ef-202">Klik op **Configureren**</span><span class="sxs-lookup"><span data-stu-id="189ef-202">Click **Configure**.</span></span>
   
   ![Tabblad met Azure AD configureren](./media/app-service-api-dotnet-user-principal-auth/configure.png)
6. <span data-ttu-id="189ef-204">Stel **aanmeldings-URL** toohello-URL voor uw AngularJS-web-app, geen afsluitende slash.</span><span class="sxs-lookup"><span data-stu-id="189ef-204">Set **Sign-on URL** toohello URL for your AngularJS web app, no trailing slash.</span></span>
   
   <span data-ttu-id="189ef-205">Bijvoorbeeld: https://todolistangular.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="189ef-205">For example: https://todolistangular.azurewebsites.net</span></span>
   
   ![Aanmeldings-URL](./media/app-service-api-dotnet-user-principal-auth/signonurlazure.png)
7. <span data-ttu-id="189ef-207">Stel **antwoord-URL** toohello-URL voor uw web-app geen afsluitende slash.</span><span class="sxs-lookup"><span data-stu-id="189ef-207">Set **Reply URL** toohello URL for your web app, no trailing slash.</span></span>
   
   <span data-ttu-id="189ef-208">Bijvoorbeeld: https://todolistsangular.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="189ef-208">For example: https://todolistsangular.azurewebsites.net</span></span>
8. <span data-ttu-id="189ef-209">Klik op **Opslaan**.</span><span class="sxs-lookup"><span data-stu-id="189ef-209">Click **Save**.</span></span>
   
   ![Antwoord-URL](./media/app-service-api-dotnet-user-principal-auth/replyurlazure.png)
9. <span data-ttu-id="189ef-211">Aan de onderkant van de Hallo van Hallo pagina, klikt u op **beheren manifest > downloaden manifest**.</span><span class="sxs-lookup"><span data-stu-id="189ef-211">At hello bottom of hello page, click **Manage manifest > Download manifest**.</span></span>
   
   ![Downloaden van het manifest](./media/app-service-api-dotnet-user-principal-auth/downloadmanifest.png)
10. <span data-ttu-id="189ef-213">Download Hallo tooa bestandslocatie waar u het kunt bewerken.</span><span class="sxs-lookup"><span data-stu-id="189ef-213">Download hello file tooa location where you can edit it.</span></span>
11. <span data-ttu-id="189ef-214">Zoek in Hallo gedownload van een manifestbestand op Hallo `oauth2AllowImplicitFlow` eigenschap.</span><span class="sxs-lookup"><span data-stu-id="189ef-214">In hello downloaded manifest file, search for hello  `oauth2AllowImplicitFlow` property.</span></span> <span data-ttu-id="189ef-215">Hallo-waarde van deze eigenschap van wijzigen `false` te`true`, en sla Hallo-bestand.</span><span class="sxs-lookup"><span data-stu-id="189ef-215">Change hello value of this property from `false` too`true`, and then save hello file.</span></span>
    
    <span data-ttu-id="189ef-216">Deze instelling is vereist voor toegang tot een JavaScript-toepassing voor één pagina.</span><span class="sxs-lookup"><span data-stu-id="189ef-216">This setting is required for access from a JavaScript single-page application.</span></span> <span data-ttu-id="189ef-217">Hiermee kunt Hallo Oauth 2.0 bearer-token toobe in Hallo URL-fragment geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="189ef-217">It enables hello Oauth 2.0 bearer token toobe returned in hello URL fragment.</span></span>
12. <span data-ttu-id="189ef-218">Klik op **beheren manifest > uploaden manifest**, en het uploaden van Hallo-bestand dat u in de voorgaande stap Hallo bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="189ef-218">Click **Manage manifest > Upload manifest**, and upload hello file that you updated in hello preceding step.</span></span>
    
    ![Uploaden van het manifest](./media/app-service-api-dotnet-user-principal-auth/uploadmanifest.png)
13. <span data-ttu-id="189ef-220">Kopiëren Hallo **Client-ID** waarde en sla dit op een locatie kunt u dit uit later downloaden.</span><span class="sxs-lookup"><span data-stu-id="189ef-220">Copy hello **Client ID** value and save it somewhere you can get it from later.</span></span>

## <a name="configure-hello-todolistangular-project-toouse-authentication"></a><span data-ttu-id="189ef-221">Hallo ToDoListAngular project toouse verificatie configureren</span><span class="sxs-lookup"><span data-stu-id="189ef-221">Configure hello ToDoListAngular project toouse authentication</span></span>
<span data-ttu-id="189ef-222">In deze sectie wijzigen Hallo AngularJS-front-end dat gebruikmaakt van Active Directory Authentication Library (ADAL) voor JS tooacquire bearer-token voor Hallo aangemelde gebruiker van Azure AD.</span><span class="sxs-lookup"><span data-stu-id="189ef-222">In this section you change hello AngularJS front end so that it uses Active Directory Authentication Library (ADAL) for JS tooacquire a bearer token for hello logged-on user from Azure AD.</span></span> <span data-ttu-id="189ef-223">Hallo code neemt Hallo-token in HTTP-aanvragen verzonden toohello middelste laag, zoals wordt weergegeven in het volgende diagram Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-223">hello code will include hello token in HTTP requests sent toohello middle tier, as shown in hello following diagram.</span></span> 

![Gebruiker-verificatiediagram](./media/app-service-api-dotnet-user-principal-auth/appdiagram.png)

<span data-ttu-id="189ef-225">Controleer Hallo toofiles wijzigingen in de project ToDoListAngular hello te volgen.</span><span class="sxs-lookup"><span data-stu-id="189ef-225">Make hello following changes toofiles in hello ToDoListAngular project.</span></span>

1. <span data-ttu-id="189ef-226">Open Hallo *index.cshtml* bestand.</span><span class="sxs-lookup"><span data-stu-id="189ef-226">Open hello *index.cshtml* file.</span></span>
2. <span data-ttu-id="189ef-227">Verwijder de opmerkingen in Hallo-regels die verwijzen naar Hallo Active Directory Authentication Library (ADAL) voor JS scripts.</span><span class="sxs-lookup"><span data-stu-id="189ef-227">Uncomment hello lines that reference hello Active Directory Authentication Library (ADAL) for JS scripts.</span></span>
   
        <script src="app/scripts/adal.js"></script>
        <script src="app/scripts/adal-angular.js"></script>
3. <span data-ttu-id="189ef-228">Open Hallo *app/scripts/app.js* bestand.</span><span class="sxs-lookup"><span data-stu-id="189ef-228">Open hello *app/scripts/app.js* file.</span></span>
4. <span data-ttu-id="189ef-229">Hallo codeblok commentaar gemarkeerd voor 'zonder verificatie' en verwijder het commentaarteken Hallo codeblok gemarkeerd voor 'met verificatie'.</span><span class="sxs-lookup"><span data-stu-id="189ef-229">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>
   
    <span data-ttu-id="189ef-230">Deze wijziging verwijst naar Hallo ADAL JS verificatieprovider en configuratie waarden tooit biedt.</span><span class="sxs-lookup"><span data-stu-id="189ef-230">This change references hello ADAL JS authentication provider and provides configuration values tooit.</span></span> <span data-ttu-id="189ef-231">In Hallo stappen stelt u Hallo configuratiewaarden voor uw API-app en Azure AD-toepassing.</span><span class="sxs-lookup"><span data-stu-id="189ef-231">In hello following steps you set hello configuration values for your API app and Azure AD application.</span></span>
5. <span data-ttu-id="189ef-232">Hallo-code die wordt ingesteld Hallo `endpoints` variabele, stel Hallo API URL toohello URL van Hallo API-app die u hebt gemaakt voor ToDoListAPI-project Hallo en stel hello Azure AD-toepassing-ID toohello client-ID die u hebt gekopieerd uit Hallo klassieke Azure-portal.</span><span class="sxs-lookup"><span data-stu-id="189ef-232">In hello code that sets hello `endpoints` variable, set hello API URL toohello URL of hello API app that you created for hello ToDoListAPI project, and set hello Azure AD application ID toohello client ID that you copied from hello Azure classic portal.</span></span>
   
    <span data-ttu-id="189ef-233">Hallo-code is nu vergelijkbare toohello voorbeeld te volgen.</span><span class="sxs-lookup"><span data-stu-id="189ef-233">hello code is now similar toohello following example.</span></span>
   
        var endpoints = {
            "https://todolistapi0121.azurewebsites.net/": "1cf55bc9-9ed8-4df31cf55bc9-9ed8-4df3"
        };
6. <span data-ttu-id="189ef-234">In Hallo roept te`adalProvider.init`stelt `tenant` tooyour tenantnaam en `clientId` toosame-waarde die u in de vorige stap Hallo gebruikt.</span><span class="sxs-lookup"><span data-stu-id="189ef-234">In hello call too`adalProvider.init`, set `tenant` tooyour tenant name and `clientId` toosame value you used in hello previous step.</span></span>
   
    <span data-ttu-id="189ef-235">Hallo-code is nu vergelijkbare toohello voorbeeld te volgen.</span><span class="sxs-lookup"><span data-stu-id="189ef-235">hello code is now similar toohello following example.</span></span>
   
        adalProvider.init(
            {
                instance: 'https://login.microsoftonline.com/', 
                tenant: 'contoso.onmicrosoft.com',
                clientId: '1cf55bc9-9ed8-4df31cf55bc9-9ed8-4df3',
                extraQueryParameter: 'nux=1',
                endpoints: endpoints
            },
            $httpProvider
            );
   
    <span data-ttu-id="189ef-236">Deze wijzigingen te`app.js` opgeven dat de aanroepende code Hallo en Hallo API aangeroepen in Hallo dezelfde Azure AD-toepassing zijn.</span><span class="sxs-lookup"><span data-stu-id="189ef-236">These changes too`app.js` specify that hello calling code and hello called API are in hello same Azure AD application.</span></span>
7. <span data-ttu-id="189ef-237">Open Hallo *app/scripts/homeCtrl.js* bestand.</span><span class="sxs-lookup"><span data-stu-id="189ef-237">Open hello *app/scripts/homeCtrl.js* file.</span></span>
8. <span data-ttu-id="189ef-238">Hallo codeblok commentaar gemarkeerd voor 'zonder verificatie' en verwijder het commentaarteken Hallo codeblok gemarkeerd voor 'met verificatie'.</span><span class="sxs-lookup"><span data-stu-id="189ef-238">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>
9. <span data-ttu-id="189ef-239">Open Hallo *app/scripts/indexCtrl.js* bestand.</span><span class="sxs-lookup"><span data-stu-id="189ef-239">Open hello *app/scripts/indexCtrl.js* file.</span></span>
10. <span data-ttu-id="189ef-240">Hallo codeblok commentaar gemarkeerd voor 'zonder verificatie' en verwijder het commentaarteken Hallo codeblok gemarkeerd voor 'met verificatie'.</span><span class="sxs-lookup"><span data-stu-id="189ef-240">Comment out hello block of code marked for "without authentication" and uncomment hello block of code marked for "with authentication".</span></span>

### <a name="deploy-hello-todolistangular-project-tooazure"></a><span data-ttu-id="189ef-241">Hallo ToDoListAngular project tooAzure implementeren</span><span class="sxs-lookup"><span data-stu-id="189ef-241">Deploy hello ToDoListAngular project tooAzure</span></span>
1. <span data-ttu-id="189ef-242">In **Solution Explorer**, met de rechtermuisknop op Hallo ToDoListAngular project en klik vervolgens op **publiceren**.</span><span class="sxs-lookup"><span data-stu-id="189ef-242">In **Solution Explorer**, right-click hello ToDoListAngular project, and then click **Publish**.</span></span>
2. <span data-ttu-id="189ef-243">Klik op **Publish**.</span><span class="sxs-lookup"><span data-stu-id="189ef-243">Click **Publish**.</span></span>
   
    <span data-ttu-id="189ef-244">Visual Studio implementeert Hallo-project en basis-URL in een browser toohello van web-app wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="189ef-244">Visual Studio deploys hello project and opens a browser toohello web app's base URL.</span></span> <span data-ttu-id="189ef-245">Hier ziet een fout 403-pagina normaal voor een poging toogo tooa Web API basis-URL vanuit een browser is.</span><span class="sxs-lookup"><span data-stu-id="189ef-245">This will show a 403 error page, which is normal for an attempt toogo tooa Web API base URL from a browser.</span></span>
   
    <span data-ttu-id="189ef-246">U hebt nog toomake wijziging toohello middelste laag API-app voordat u de toepassing hello kunt testen.</span><span class="sxs-lookup"><span data-stu-id="189ef-246">You still have toomake a change toohello middle tier API app before you can test hello application.</span></span>
3. <span data-ttu-id="189ef-247">De browser sluiten Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-247">Close hello browser.</span></span>

## <a name="configure-hello-todolistapi-project-toouse-authentication"></a><span data-ttu-id="189ef-248">Hallo ToDoListAPI-project toouse verificatie configureren</span><span class="sxs-lookup"><span data-stu-id="189ef-248">Configure hello ToDoListAPI project toouse authentication</span></span>
<span data-ttu-id="189ef-249">ToDoListAPI-project verzendt momenteel Hallo ' * ' als Hallo `owner` tooToDoListDataAPI waarde.</span><span class="sxs-lookup"><span data-stu-id="189ef-249">Currently hello ToDoListAPI project sends "*" as hello `owner` value tooToDoListDataAPI.</span></span> <span data-ttu-id="189ef-250">In deze sectie kunt u Hallo code toosend Hallo-ID van Hallo aangemelde gebruiker wijzigen.</span><span class="sxs-lookup"><span data-stu-id="189ef-250">In this section you change hello code toosend hello ID of hello logged-on user.</span></span>

<span data-ttu-id="189ef-251">Hallo volgende wijzigingen in Hallo ToDoListAPI-project maken</span><span class="sxs-lookup"><span data-stu-id="189ef-251">Make hello following changes in hello ToDoListAPI project.</span></span>

1. <span data-ttu-id="189ef-252">Open Hallo *Controllers/ToDoListController.cs* bestand en het commentaar verwijderen Hallo regel in elke actiemethode voor de die wordt ingesteld `owner` toohello Azure AD `NameIdentifier` claimwaarde.</span><span class="sxs-lookup"><span data-stu-id="189ef-252">Open hello *Controllers/ToDoListController.cs* file, and uncomment hello line in each action method that sets `owner` toohello Azure AD `NameIdentifier` claim value.</span></span> <span data-ttu-id="189ef-253">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="189ef-253">For example:</span></span>
   
        owner = ((ClaimsIdentity)User.Identity).FindFirst(ClaimTypes.NameIdentifier).Value;
   
    <span data-ttu-id="189ef-254">**Belangrijke**: Verwijder de code in Hallo geen opmerkingen `ToDoListDataAPI` methode; doet u dat later voor Hallo-zelfstudie voor verificatie.</span><span class="sxs-lookup"><span data-stu-id="189ef-254">**Important**: Don't uncomment code in hello `ToDoListDataAPI` method; you'll do that later for hello service principal authentication tutorial.</span></span>

### <a name="deploy-hello-todolistapi-project-tooazure"></a><span data-ttu-id="189ef-255">Hallo ToDoListAPI-project tooAzure implementeren</span><span class="sxs-lookup"><span data-stu-id="189ef-255">Deploy hello ToDoListAPI project tooAzure</span></span>
1. <span data-ttu-id="189ef-256">In **Solution Explorer**, met de rechtermuisknop op Hallo ToDoListAPI-project en klik vervolgens op **publiceren**.</span><span class="sxs-lookup"><span data-stu-id="189ef-256">In **Solution Explorer**, right-click hello ToDoListAPI project, and then click **Publish**.</span></span>
2. <span data-ttu-id="189ef-257">Klik op **Publish**.</span><span class="sxs-lookup"><span data-stu-id="189ef-257">Click **Publish**.</span></span>
   
    <span data-ttu-id="189ef-258">Visual Studio implementeert Hallo-project en basis-URL in een browser toohello van API-app wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="189ef-258">Visual Studio deploys hello project and opens a browser toohello API app's base URL.</span></span>
3. <span data-ttu-id="189ef-259">De browser sluiten Hallo.</span><span class="sxs-lookup"><span data-stu-id="189ef-259">Close hello browser.</span></span>

### <a name="test-hello-application"></a><span data-ttu-id="189ef-260">Hallo toepassing testen</span><span class="sxs-lookup"><span data-stu-id="189ef-260">Test hello application</span></span>
1. <span data-ttu-id="189ef-261">Ga toohello-URL van de web-app hello, **met behulp van HTTPS niet HTTP**.</span><span class="sxs-lookup"><span data-stu-id="189ef-261">Go toohello URL of hello web app, **using HTTPS, not HTTP**.</span></span>
2. <span data-ttu-id="189ef-262">Klik op Hallo **tooDo lijst** tabblad.</span><span class="sxs-lookup"><span data-stu-id="189ef-262">Click hello **tooDo List** tab.</span></span>
   
    <span data-ttu-id="189ef-263">U bent na vragen aan gebruiker toolog in.</span><span class="sxs-lookup"><span data-stu-id="189ef-263">You are prompted toolog in.</span></span>
3. <span data-ttu-id="189ef-264">Aanmelden met referenties op Hallo van een gebruiker in uw AAD-tenant.</span><span class="sxs-lookup"><span data-stu-id="189ef-264">Log in with hello credentials of a user in your AAD tenant.</span></span>
4. <span data-ttu-id="189ef-265">Hallo **tooDo lijst** pagina wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="189ef-265">hello **tooDo List** page appears.</span></span>
   
   ![pagina van de lijst met tooDo](./media/app-service-api-dotnet-user-principal-auth/webappindex.png)
   
   <span data-ttu-id="189ef-267">Er is geen taakitems worden weergegeven omdat tot op heden alle eigenaar zijn ' * '.</span><span class="sxs-lookup"><span data-stu-id="189ef-267">No to-do items are displayed because until now they have all been for owner "*".</span></span> <span data-ttu-id="189ef-268">Nu de middelste laag Hallo-items voor Hallo aangemelde gebruiker vraagt en geen nog zijn gemaakt.</span><span class="sxs-lookup"><span data-stu-id="189ef-268">Now hello middle tier is requesting items for hello logged-on user, and none have been created yet.</span></span>
5. <span data-ttu-id="189ef-269">Toevoegen van nieuwe taak items tooverify die toepassing hello werkt.</span><span class="sxs-lookup"><span data-stu-id="189ef-269">Add new to-do items tooverify that hello application is working.</span></span>
6. <span data-ttu-id="189ef-270">Ga in een ander browservenster toohello Swagger-gebruikersinterface-URL voor Hallo ToDoListDataAPI API-app en klik op **ToDoList > ophalen**.</span><span class="sxs-lookup"><span data-stu-id="189ef-270">In another browser window, go toohello Swagger UI URL for hello ToDoListDataAPI API app and click **ToDoList > Get**.</span></span> <span data-ttu-id="189ef-271">Geef een sterretje voor Hallo `owner` parameter en klik vervolgens op **Try it out in**.</span><span class="sxs-lookup"><span data-stu-id="189ef-271">Enter an asterisk for hello `owner` parameter, and then click **Try it out**.</span></span>
   
   <span data-ttu-id="189ef-272">antwoord Hallo ziet u dat nieuwe taakitems Hallo Hallo werkelijke Azure AD-gebruikers-ID in de eigenschap Owner Hallo hebben.</span><span class="sxs-lookup"><span data-stu-id="189ef-272">hello response shows that hello new to-do items have hello actual Azure AD user ID in hello Owner property.</span></span>
   
   ![Eigenaar-ID in JSON-antwoord](./media/app-service-api-dotnet-user-principal-auth/todolistapiauth.png)

## <a name="building-hello-projects-from-scratch"></a><span data-ttu-id="189ef-274">Hallo-projecten helemaal bouwen</span><span class="sxs-lookup"><span data-stu-id="189ef-274">Building hello projects from scratch</span></span>
<span data-ttu-id="189ef-275">Hallo twee Web API-projecten zijn gemaakt met behulp van Hallo **Azure API-App** sjabloon en vervang Hallo standaard waarden domeincontroller met een domeincontroller ToDoList project.</span><span class="sxs-lookup"><span data-stu-id="189ef-275">hello two Web API projects were created by using hello **Azure API App** project template and replacing hello default Values controller with a ToDoList controller.</span></span> 

<span data-ttu-id="189ef-276">Zie voor een single-page application ' AngularJS informatie over het te maken met een Web API 2 back-end, [handen op Lab: bouwen van een enkele toepassing pagina WACHTWOORDVERIFICATIE met ASP.NET Web API en Angular.js](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs).</span><span class="sxs-lookup"><span data-stu-id="189ef-276">For information about how too create an AngularJS single-page application with a Web API 2 back end, see  [Hands On Lab: Build a Single Page Application (SPA) with ASP.NET Web API and Angular.js](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs).</span></span> <span data-ttu-id="189ef-277">Voor informatie over het tooadd verificatiecode van Azure AD, Zie Hallo resources te volgen:</span><span class="sxs-lookup"><span data-stu-id="189ef-277">For information about how tooadd Azure AD authentication code, see hello following resources:</span></span>

* <span data-ttu-id="189ef-278">[Apps met Azure AD beveiligen AngularJS één pagina](../active-directory/active-directory-devquickstarts-angular.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-278">[Securing AngularJS Single Page Apps with Azure AD](../active-directory/active-directory-devquickstarts-angular.md).</span></span>
* [<span data-ttu-id="189ef-279">Introductie van ADAL JS v1</span><span class="sxs-lookup"><span data-stu-id="189ef-279">Introducing ADAL JS v1</span></span>](http://www.cloudidentity.com/blog/2015/02/19/introducing-adal-js-v1/)

## <a name="troubleshooting"></a><span data-ttu-id="189ef-280">Problemen oplossen</span><span class="sxs-lookup"><span data-stu-id="189ef-280">Troubleshooting</span></span>
[!INCLUDE [troubleshooting](../../includes/app-service-api-auth-troubleshooting.md)]

* <span data-ttu-id="189ef-281">Zorg ervoor dat u en niet door elkaar ToDoListAPI (middelste laag) ToDoListDataAPI (gegevenslaag).</span><span class="sxs-lookup"><span data-stu-id="189ef-281">Make sure that you don't confuse ToDoListAPI (middle tier) and ToDoListDataAPI (data tier).</span></span> <span data-ttu-id="189ef-282">Controleer bijvoorbeeld of u verificatie toohello middelste laag API-app, niet de gegevenslaag Hallo toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="189ef-282">For example, verify that you added authentication toohello middle tier API app, not hello data tier.</span></span> 
* <span data-ttu-id="189ef-283">Zorg ervoor dat Hallo AngularJS source code verwijzingen Hallo middelste laag API app-URL (ToDoListAPI, niet ToDoListDataAPI) en Hallo Azure AD-client-ID juist.</span><span class="sxs-lookup"><span data-stu-id="189ef-283">Make sure that hello AngularJS source code references hello middle tier API app URL (ToDoListAPI, not ToDoListDataAPI)and hello correct Azure AD client ID.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="189ef-284">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="189ef-284">Next steps</span></span>
<span data-ttu-id="189ef-285">In deze zelfstudie hebt u geleerd hoe toouse App Service-verificatie voor een API-app en hoe toocall API-app met behulp van Hallo Hallo ADAL JS library.</span><span class="sxs-lookup"><span data-stu-id="189ef-285">In this tutorial you learned how toouse App Service authentication for an API app and how toocall hello API app by using hello ADAL JS library.</span></span> <span data-ttu-id="189ef-286">In de volgende zelfstudie Hallo leert u hoe te[veilige toegang tooyour API-app voor scenario's voor service to service](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="189ef-286">In hello next tutorial you'll learn how too[secure access tooyour API app for service-to-service scenarios](app-service-api-dotnet-service-principal-auth.md).</span></span>

