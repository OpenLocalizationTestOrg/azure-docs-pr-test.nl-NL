---
title: Voer de validatie - hulpmiddel voor het modelleren van Microsoft Threat - Azure | Microsoft Docs
description: oplossingen voor bedreigingen die worden weergegeven in het hulpprogramma Threat Modeling
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: b7ce6f353cf8cf48d5fb038ee77b0d3fdae16fb7
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="72768-103">Beveiliging Frame: Invoervalidatie | Oplossingen</span><span class="sxs-lookup"><span data-stu-id="72768-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="72768-104">Product/Service</span><span class="sxs-lookup"><span data-stu-id="72768-104">Product/Service</span></span> | <span data-ttu-id="72768-105">Artikel</span><span class="sxs-lookup"><span data-stu-id="72768-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="72768-106">**Webtoepassing**</span><span class="sxs-lookup"><span data-stu-id="72768-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="72768-107">Schakel XSLT uitvoeren van scripts voor alle transformaties met behulp van niet-vertrouwde opmaakmodellen</span><span class="sxs-lookup"><span data-stu-id="72768-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="72768-108">Zorg ervoor dat elke pagina waarvan de gebruiker instelbare inhoud buiten automatische MIME-controle kiest</span><span class="sxs-lookup"><span data-stu-id="72768-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="72768-109">Beperken of XML-entiteit omzetting uitschakelen</span><span class="sxs-lookup"><span data-stu-id="72768-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="72768-110">Toepassingen die gebruikmaken van http.sys uitvoeren URL standaardisatie verificatie</span><span class="sxs-lookup"><span data-stu-id="72768-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="72768-111">Zorg passende controles zijn geïmplementeerd tijdens het accepteren van bestanden van gebruikers</span><span class="sxs-lookup"><span data-stu-id="72768-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="72768-112">Zorg ervoor dat type veilig parameters in webtoepassing worden gebruikt voor toegang tot gegevens</span><span class="sxs-lookup"><span data-stu-id="72768-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="72768-113">Afzonderlijke model binding klassen gebruiken of bindingsfilter weer om te voorkomen dat MVC massaopslag toewijzing beveiligingslek</span><span class="sxs-lookup"><span data-stu-id="72768-113">Use separate model binding classes or binding filter lists to prevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="72768-114">Niet-vertrouwde webuitvoer vóór rendering coderen</span><span class="sxs-lookup"><span data-stu-id="72768-114">Encode untrusted web output prior to rendering</span></span>](#rendering)</li><li>[<span data-ttu-id="72768-115">Validatie voor invoer- en filteren op alle tekenreekstype modeleigenschappen uitvoeren</span><span class="sxs-lookup"><span data-stu-id="72768-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="72768-116">Opschoning moet worden toegepast op formuliervelden die tekens, bijvoorbeeld, RTF-editor accepteren</span><span class="sxs-lookup"><span data-stu-id="72768-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="72768-117">Geen DOM elementen toewijzen aan put waarvoor geen ingebouwde codering</span><span class="sxs-lookup"><span data-stu-id="72768-117">Do not assign DOM elements to sinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="72768-118">Valideer alle omleidingen in de toepassing worden gesloten of veilig gedaan</span><span class="sxs-lookup"><span data-stu-id="72768-118">Validate all redirects within the application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="72768-119">Validatie voor invoer op alle tekenreeks typeparameters geaccepteerd door de methoden van de domeincontroller implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="72768-120">Bovengrens-out voor reguliere expressie om te voorkomen van DoS vanwege ongeldige reguliere expressies verwerken instellen</span><span class="sxs-lookup"><span data-stu-id="72768-120">Set upper limit timeout for regular expression processing to prevent DoS due to bad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="72768-121">Vermijd het gebruik van Html.Raw in Razor weergaven</span><span class="sxs-lookup"><span data-stu-id="72768-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="72768-122">**Database**</span><span class="sxs-lookup"><span data-stu-id="72768-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="72768-123">Gebruik geen dynamische query's in de opgeslagen procedures</span><span class="sxs-lookup"><span data-stu-id="72768-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="72768-124">**Web-API**</span><span class="sxs-lookup"><span data-stu-id="72768-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="72768-125">Zorg ervoor dat de validatie is uitgevoerd voor Web-API-methoden</span><span class="sxs-lookup"><span data-stu-id="72768-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="72768-126">Validatie voor invoer op alle tekenreeks typeparameters geaccepteerd door de methoden van de Web-API implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="72768-127">Zorg ervoor dat type veilig parameters in Web-API worden gebruikt voor toegang tot gegevens</span><span class="sxs-lookup"><span data-stu-id="72768-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="72768-128">**Azure Documentdb**</span><span class="sxs-lookup"><span data-stu-id="72768-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="72768-129">SQL-query's constructorreeks mag gebruiken voor DocumentDB</span><span class="sxs-lookup"><span data-stu-id="72768-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="72768-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="72768-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="72768-131">Validatie van de WCF-invoer via schemabinding</span><span class="sxs-lookup"><span data-stu-id="72768-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="72768-132">Validatie van de WCF - invoer via Parameter Inspectors</span><span class="sxs-lookup"><span data-stu-id="72768-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="72768-133"><a id="disable-xslt"></a>Schakel XSLT uitvoeren van scripts voor alle transformaties met behulp van niet-vertrouwde opmaakmodellen</span><span class="sxs-lookup"><span data-stu-id="72768-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="72768-134">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-134">Title</span></span>                   | <span data-ttu-id="72768-135">Details</span><span class="sxs-lookup"><span data-stu-id="72768-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-136">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-136">**Component**</span></span>               | <span data-ttu-id="72768-137">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-137">Web Application</span></span> | 
| <span data-ttu-id="72768-138">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-138">**SDL Phase**</span></span>               | <span data-ttu-id="72768-139">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-139">Build</span></span> |  
| <span data-ttu-id="72768-140">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-140">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-141">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-141">Generic</span></span> |
| <span data-ttu-id="72768-142">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-142">**Attributes**</span></span>              | <span data-ttu-id="72768-143">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-143">N/A</span></span>  |
| <span data-ttu-id="72768-144">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-144">**References**</span></span>              | <span data-ttu-id="72768-145">[Beveiliging van de XSLT-](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [eigenschap XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="72768-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="72768-146">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-146">**Steps**</span></span> | <span data-ttu-id="72768-147">XSLT ondersteunt scripting binnen StyleSheets met behulp van de `<msxml:script>` element.</span><span class="sxs-lookup"><span data-stu-id="72768-147">XSLT supports scripting inside style sheets using the `<msxml:script>` element.</span></span> <span data-ttu-id="72768-148">Hiermee kunt aangepaste functies worden gebruikt in een XSLT-transformatie.</span><span class="sxs-lookup"><span data-stu-id="72768-148">This allows custom functions to be used in an XSLT transformation.</span></span> <span data-ttu-id="72768-149">Het script wordt uitgevoerd onder de context van het proces voor het uitvoeren van de transformatie.</span><span class="sxs-lookup"><span data-stu-id="72768-149">The script is executed under the context of the process performing the transform.</span></span> <span data-ttu-id="72768-150">XSLT-script moet worden uitgeschakeld wanneer u zich in een niet-vertrouwde omgeving om te voorkomen dat de uitvoering van niet-vertrouwde code.</span><span class="sxs-lookup"><span data-stu-id="72768-150">XSLT script must be disabled when in an untrusted environment to prevent execution of untrusted code.</span></span> <span data-ttu-id="72768-151">*Als met .NET:* XSLT-scripting is standaard uitgeschakeld; echter, moet u ervoor zorgen dat deze is niet expliciet ingeschakeld via de `XsltSettings.EnableScript` eigenschap.</span><span class="sxs-lookup"><span data-stu-id="72768-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through the `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="72768-152">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET TO false
```

### <a name="example"></a><span data-ttu-id="72768-153">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-153">Example</span></span>
<span data-ttu-id="72768-154">Als u met behulp van MSXML 6.0, is XSLT-scripting standaard uitgeschakeld. echter, moet u ervoor zorgen dat deze is niet expliciet ingeschakeld via de eigenschap XML DOM-object AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="72768-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through the XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET TO false
```

### <a name="example"></a><span data-ttu-id="72768-155">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-155">Example</span></span>
<span data-ttu-id="72768-156">Als u van MSXML 5 gebruikmaakt of hieronder XSLT-scripting is standaard ingeschakeld en u expliciet moet uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="72768-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="72768-157">De eigenschap XML DOM-object AllowXsltScript ingesteld op false.</span><span class="sxs-lookup"><span data-stu-id="72768-157">Set the XML DOM object property AllowXsltScript to false.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting to false disables XSLT scripting.
```

## <span data-ttu-id="72768-158"><a id="out-sniffing"></a>Zorg ervoor dat elke pagina waarvan de gebruiker instelbare inhoud buiten automatische MIME-controle kiest</span><span class="sxs-lookup"><span data-stu-id="72768-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="72768-159">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-159">Title</span></span>                   | <span data-ttu-id="72768-160">Details</span><span class="sxs-lookup"><span data-stu-id="72768-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-161">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-161">**Component**</span></span>               | <span data-ttu-id="72768-162">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-162">Web Application</span></span> | 
| <span data-ttu-id="72768-163">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-163">**SDL Phase**</span></span>               | <span data-ttu-id="72768-164">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-164">Build</span></span> |  
| <span data-ttu-id="72768-165">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-165">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-166">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-166">Generic</span></span> |
| <span data-ttu-id="72768-167">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-167">**Attributes**</span></span>              | <span data-ttu-id="72768-168">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-168">N/A</span></span>  |
| <span data-ttu-id="72768-169">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-169">**References**</span></span>              | [<span data-ttu-id="72768-170">IE8 Beveiliging deel V - Uitgebreide beveiliging</span><span class="sxs-lookup"><span data-stu-id="72768-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="72768-171">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-171">**Steps**</span></span> | <p><span data-ttu-id="72768-172">Voor elke pagina die gebruiker instelbare inhoud kan bevatten, moet u de HTTP-Header `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="72768-172">For each page that could contain user controllable content, you must use the HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="72768-173">U kunt de vereiste koptekst per pagina voor deze pagina's die mogelijk door de gebruiker instelbare inhoud bevat ofwel instellen om te voldoen aan deze eis wordt voldaan, of kunt u deze globaal instellen voor alle pagina's in de toepassing.</span><span class="sxs-lookup"><span data-stu-id="72768-173">To comply with this requirement, you can either set the required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in the application.</span></span></p><p><span data-ttu-id="72768-174">Elk type bestand geleverd door een webserver heeft een bijbehorende [MIME-type](http://en.wikipedia.org/wiki/Mime_type) (ook wel een *inhoudstype*) die worden beschreven de aard van de inhoud (dat wil zeggen, image, tekst, toepassing, enz.)</span><span class="sxs-lookup"><span data-stu-id="72768-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes the nature of the content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="72768-175">De header X-inhoud-Type-opties is een HTTP-header waarmee ontwikkelaars om op te geven dat de inhoud ervan niet MIME-sniff worden moet.</span><span class="sxs-lookup"><span data-stu-id="72768-175">The X-Content-Type-Options header is an HTTP header that allows developers to specify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="72768-176">Deze header is ontworpen om te bekijken van MIME-aanvallen te verminderen.</span><span class="sxs-lookup"><span data-stu-id="72768-176">This header is designed to mitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="72768-177">Ondersteuning voor deze header is toegevoegd in Internet Explorer 8 (IE8)</span><span class="sxs-lookup"><span data-stu-id="72768-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="72768-178">Alleen gebruikers van Internet Explorer 8 (IE8) profiteren van de X-inhoud-Type-opties.</span><span class="sxs-lookup"><span data-stu-id="72768-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="72768-179">Vorige versies van Internet Explorer bieden momenteel geen ondersteuning voor de header X-inhoud-Type-opties</span><span class="sxs-lookup"><span data-stu-id="72768-179">Previous versions of Internet Explorer do not currently respect the X-Content-Type-Options header</span></span></p><p><span data-ttu-id="72768-180">Internet Explorer 8 (of hoger) zijn alleen primaire browsers voor het implementeren van een opt-out bekijken van MIME-functie.</span><span class="sxs-lookup"><span data-stu-id="72768-180">Internet Explorer 8 (and later) are the only major browsers to implement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="72768-181">Als andere belangrijke browsers (Firefox, Safari, Chrome) soortgelijke functies implementeren, zal deze aanbeveling worden bijgewerkt met de syntaxis voor deze browsers ook</span><span class="sxs-lookup"><span data-stu-id="72768-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated to include syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="72768-182">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-182">Example</span></span>
<span data-ttu-id="72768-183">Om de vereiste koptekst globaal voor alle pagina's in de toepassing, kunt u het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="72768-183">To enable the required header globally for all pages in the application, you can do one of the following:</span></span> 

* <span data-ttu-id="72768-184">De koptekst toevoegen in het web.config-bestand als de toepassing wordt gehost door Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="72768-184">Add the header in the web.config file if the application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="72768-185">De koptekst tot en met de globale toepassing toevoegen\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="72768-185">Add the header through the global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="72768-186">Aangepaste HTTP-module implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="72768-187">U kunt de vereiste koptekst alleen voor specifieke's toevoegen aan afzonderlijke antwoorden inschakelen:</span><span class="sxs-lookup"><span data-stu-id="72768-187">You can enable the required header only for specific pages by adding it to individual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="72768-188"><a id="xml-resolution"></a>Beperken of XML-entiteit omzetting uitschakelen</span><span class="sxs-lookup"><span data-stu-id="72768-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="72768-189">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-189">Title</span></span>                   | <span data-ttu-id="72768-190">Details</span><span class="sxs-lookup"><span data-stu-id="72768-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-191">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-191">**Component**</span></span>               | <span data-ttu-id="72768-192">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-192">Web Application</span></span> | 
| <span data-ttu-id="72768-193">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-193">**SDL Phase**</span></span>               | <span data-ttu-id="72768-194">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-194">Build</span></span> |  
| <span data-ttu-id="72768-195">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-195">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-196">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-196">Generic</span></span> |
| <span data-ttu-id="72768-197">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-197">**Attributes**</span></span>              | <span data-ttu-id="72768-198">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-198">N/A</span></span>  |
| <span data-ttu-id="72768-199">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-199">**References**</span></span>              | <span data-ttu-id="72768-200">[XML-entiteit uitbreiding](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service-aanvallen en beveiliging](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML beveiligingsoverzicht](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [aanbevolen procedures voor het beveiligen van MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocolnaslaginformatie](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [het omzetten van externe verwijzingen](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="72768-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="72768-201">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-201">**Steps**</span></span>| <p><span data-ttu-id="72768-202">Hoewel deze optie niet veel gebruikt is, is er een functie van XML waarmee de XML-parser macro entiteiten uitbreiden met waarden die zijn gedefinieerd in het document zichzelf of van externe bronnen.</span><span class="sxs-lookup"><span data-stu-id="72768-202">Although it is not widely used, there is a feature of XML that allows the XML parser to expand macro entities with values defined either within the document itself or from external sources.</span></span> <span data-ttu-id="72768-203">Kan het document een entiteit 'NaamBedrijf"met de waarde 'Microsoft', bijvoorbeeld zo definiëren dat telkens wanneer de tekst '&companyname;' wordt weergegeven in het document, wordt deze automatisch vervangen door de tekst van Microsoft.</span><span class="sxs-lookup"><span data-stu-id="72768-203">For example, the document might define an entity "companyname" with the value "Microsoft," so that every time the text "&companyname;" appears in the document, it is automatically replaced with the text Microsoft.</span></span> <span data-ttu-id="72768-204">Of het document een entiteit 'MSFTStock' dat verwijst naar een externe webservice voor het ophalen van de huidige waarde van Microsoft stock kunt definiëren.</span><span class="sxs-lookup"><span data-stu-id="72768-204">Or, the document might define an entity "MSFTStock" that references an external web service to fetch the current value of Microsoft stock.</span></span></p><p><span data-ttu-id="72768-205">Klik op elk gewenst moment '&MSFTStock;' wordt weergegeven in het document, wordt deze automatisch vervangen door de huidige aandelenkoersen.</span><span class="sxs-lookup"><span data-stu-id="72768-205">Then any time "&MSFTStock;" appears in the document, it is automatically replaced with the current stock price.</span></span> <span data-ttu-id="72768-206">Deze functionaliteit kan echter worden misbruikt voor het maken van denial-of-service (DoS) voorwaarden.</span><span class="sxs-lookup"><span data-stu-id="72768-206">However, this functionality can be abused to create denial of service (DoS) conditions.</span></span> <span data-ttu-id="72768-207">Een aanvaller kan meerdere entiteiten voor het maken van een uitbreiding van de exponentiële XML bomb die al het beschikbare geheugen op het systeem verbruikt nesten.</span><span class="sxs-lookup"><span data-stu-id="72768-207">An attacker can nest multiple entities to create an exponential expansion XML bomb that consumes all available memory on the system.</span></span> </p><p><span data-ttu-id="72768-208">U kunt ook hij een oneindige hoeveelheid gegevens kunt maken voor een externe verwijzing die back-streams of die de thread gewoon loopt vast.</span><span class="sxs-lookup"><span data-stu-id="72768-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs the thread.</span></span> <span data-ttu-id="72768-209">Als gevolg hiervan moeten alle teams interne en/of externe XML-entiteit resolutie uitschakelen volledig als de toepassing niet worden gebruikt of de hoeveelheid geheugen en het tijdstip waarop de toepassing voor het omzetten van de entiteit gebruiken kan als deze functionaliteit absoluut noodzakelijk is handmatig te beperken.</span><span class="sxs-lookup"><span data-stu-id="72768-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit the amount of memory and time that the application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="72768-210">Als de omzetting van de entiteit niet door uw toepassing vereist is, klikt u vervolgens het uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="72768-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="72768-211">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-211">Example</span></span>
<span data-ttu-id="72768-212">Voor .NET Framework-code, kunt u de volgende methoden gebruiken:</span><span class="sxs-lookup"><span data-stu-id="72768-212">For .NET Framework code, you can use the following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="72768-213">Houd er rekening mee dat de standaardwaarde van `ProhibitDtd` in `XmlReaderSettings` is ingesteld op true, maar in `XmlTextReader` ONWAAR is.</span><span class="sxs-lookup"><span data-stu-id="72768-213">Note that the default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="72768-214">Als u XmlReaderSettings gebruikt, u hoeft niet in te stellen ProhibitDtd op ' True ' expliciet, maar het wordt aanbevolen voor veiligheid verjaardagen doen.</span><span class="sxs-lookup"><span data-stu-id="72768-214">If you are using XmlReaderSettings, you do not need to set ProhibitDtd to true explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="72768-215">Let ook op dat de klasse XmlDocument entiteit resolutie standaard toestaat.</span><span class="sxs-lookup"><span data-stu-id="72768-215">Also note that the XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="72768-216">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-216">Example</span></span>
<span data-ttu-id="72768-217">U kunt de omzetting van de entiteit voor XmlDocuments uitschakelen met de `XmlDocument.Load(XmlReader)` van de overbelasting van de Load-methode en de juiste eigenschappen instellen in het argument XmlReader voor het uitschakelen van de resolutie, zoals geïllustreerd in de volgende code:</span><span class="sxs-lookup"><span data-stu-id="72768-217">To disable entity resolution for XmlDocuments, use the `XmlDocument.Load(XmlReader)` overload of the Load method and set the appropriate properties in the XmlReader argument to disable resolution, as illustrated in the following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="72768-218">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-218">Example</span></span>
<span data-ttu-id="72768-219">Als het uitschakelen van de omzetting van de entiteit is niet mogelijk voor uw toepassing, moet u de eigenschap XmlReaderSettings.MaxCharactersFromEntities ingesteld op een redelijke waarde volgens de behoeften van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="72768-219">If disabling entity resolution is not possible for your application, set the XmlReaderSettings.MaxCharactersFromEntities property to a reasonable value according to your application's needs.</span></span> <span data-ttu-id="72768-220">Dit beperkt de gevolgen van mogelijke uitbreiding van de exponentiële DoS-aanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-220">This will limit the impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="72768-221">De volgende code geeft een voorbeeld van deze benadering:</span><span class="sxs-lookup"><span data-stu-id="72768-221">The following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="72768-222">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-222">Example</span></span>
<span data-ttu-id="72768-223">Als u wilt oplossen inline entiteiten, maar dit niet nodig om op te lossen externe entiteiten, stel de eigenschap XmlReaderSettings.XmlResolver op null.</span><span class="sxs-lookup"><span data-stu-id="72768-223">If you need to resolve inline entities but do not need to resolve external entities, set the XmlReaderSettings.XmlResolver property to null.</span></span> <span data-ttu-id="72768-224">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="72768-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="72768-225">Houd er rekening mee dat in MSXML6, ProhibitDTD is standaard ingesteld op true (uitschakelen DTD-verwerking).</span><span class="sxs-lookup"><span data-stu-id="72768-225">Note that in MSXML6, ProhibitDTD is set to true (disabling DTD processing) by default.</span></span> <span data-ttu-id="72768-226">Apple iOS-OS x-code, er zijn twee XML-parsers kunt u: NSXMLParser en libXML2.</span><span class="sxs-lookup"><span data-stu-id="72768-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="72768-227"><a id="app-verification"></a>Toepassingen die gebruikmaken van http.sys uitvoeren URL standaardisatie verificatie</span><span class="sxs-lookup"><span data-stu-id="72768-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="72768-228">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-228">Title</span></span>                   | <span data-ttu-id="72768-229">Details</span><span class="sxs-lookup"><span data-stu-id="72768-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-230">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-230">**Component**</span></span>               | <span data-ttu-id="72768-231">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-231">Web Application</span></span> | 
| <span data-ttu-id="72768-232">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-232">**SDL Phase**</span></span>               | <span data-ttu-id="72768-233">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-233">Build</span></span> |  
| <span data-ttu-id="72768-234">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-234">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-235">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-235">Generic</span></span> |
| <span data-ttu-id="72768-236">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-236">**Attributes**</span></span>              | <span data-ttu-id="72768-237">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-237">N/A</span></span>  |
| <span data-ttu-id="72768-238">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-238">**References**</span></span>              | <span data-ttu-id="72768-239">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-239">N/A</span></span>  |
| <span data-ttu-id="72768-240">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-240">**Steps**</span></span> | <p><span data-ttu-id="72768-241">Een toepassing die gebruikmaakt van http.sys moet als volgt:</span><span class="sxs-lookup"><span data-stu-id="72768-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="72768-242">Beperkt de lengte van de URL niet meer dan 16.384 tekens (ASCII of Unicode).</span><span class="sxs-lookup"><span data-stu-id="72768-242">Limit the URL length to no more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="72768-243">Dit is het absoluut maximale URL-lengte op basis van de standaardinstelling voor Internet Information Services (IIS) 6.</span><span class="sxs-lookup"><span data-stu-id="72768-243">This is the absolute maximum URL length based on the default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="72768-244">Websites moeten streven voor korter is dan deze indien mogelijk</span><span class="sxs-lookup"><span data-stu-id="72768-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="72768-245">De standaard .NET Framework bestand i/o-klassen (zoals FileStream) gebruiken, zoals deze van de-regels in de .NET-FX profiteren</span><span class="sxs-lookup"><span data-stu-id="72768-245">Use the standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of the canonicalization rules in the .NET FX</span></span></li><li><span data-ttu-id="72768-246">Expliciet samen een toestaan-lijst met bekende bestandsnamen</span><span class="sxs-lookup"><span data-stu-id="72768-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="72768-247">Expliciet afwijzen bekende bestandstypen die u niet voor de UrlScan geweigerd: exe, bat-, cmd, com, htw, ida, idq, htr, idc, shtm-[l], stm, printer, ini, pol, dat bestanden</span><span class="sxs-lookup"><span data-stu-id="72768-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="72768-248">Catch de volgende uitzonderingen:</span><span class="sxs-lookup"><span data-stu-id="72768-248">Catch the following exceptions:</span></span><ul><li><span data-ttu-id="72768-249">System.ArgumentException (voor apparaatnamen)</span><span class="sxs-lookup"><span data-stu-id="72768-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="72768-250">System.NotSupportedException (voor gegevensstromen)</span><span class="sxs-lookup"><span data-stu-id="72768-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="72768-251">System.IO.FileNotFoundException (voor ongeldige escape-teken bestandsnamen)</span><span class="sxs-lookup"><span data-stu-id="72768-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="72768-252">System.IO.DirectoryNotFoundException (voor ongeldige escape-teken dir-opdrachten)</span><span class="sxs-lookup"><span data-stu-id="72768-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="72768-253">*Geen* naar Win32-bestand I/O APIs roepen.</span><span class="sxs-lookup"><span data-stu-id="72768-253">*Do not* call out to Win32 file I/O APIs.</span></span> <span data-ttu-id="72768-254">Op een ongeldige URL probleemloos retourneert een 400-fout voor de gebruiker en de echte fout vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="72768-254">On an invalid URL gracefully return a 400 error to the user, and log the real error.</span></span></li></ul>|

## <span data-ttu-id="72768-255"><a id="controls-users"></a>Zorg passende controles zijn geïmplementeerd tijdens het accepteren van bestanden van gebruikers</span><span class="sxs-lookup"><span data-stu-id="72768-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="72768-256">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-256">Title</span></span>                   | <span data-ttu-id="72768-257">Details</span><span class="sxs-lookup"><span data-stu-id="72768-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-258">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-258">**Component**</span></span>               | <span data-ttu-id="72768-259">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-259">Web Application</span></span> | 
| <span data-ttu-id="72768-260">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-260">**SDL Phase**</span></span>               | <span data-ttu-id="72768-261">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-261">Build</span></span> |  
| <span data-ttu-id="72768-262">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-262">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-263">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-263">Generic</span></span> |
| <span data-ttu-id="72768-264">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-264">**Attributes**</span></span>              | <span data-ttu-id="72768-265">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-265">N/A</span></span>  |
| <span data-ttu-id="72768-266">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-266">**References**</span></span>              | <span data-ttu-id="72768-267">[Bestand uploaden onbeperkte](https://www.owasp.org/index.php/Unrestricted_File_Upload), [bestand handtekening tabel](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="72768-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="72768-268">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-268">**Steps**</span></span> | <p><span data-ttu-id="72768-269">Geüploade bestanden vertegenwoordigen een aanzienlijke risico voor toepassingen.</span><span class="sxs-lookup"><span data-stu-id="72768-269">Uploaded files represent a significant risk to applications.</span></span></p><p><span data-ttu-id="72768-270">De eerste stap bij veel aanvallen is om op te halen van bepaalde code wordt het systeem om te worden aangevallen.</span><span class="sxs-lookup"><span data-stu-id="72768-270">The first step in many attacks is to get some code to the system to be attacked.</span></span> <span data-ttu-id="72768-271">De aanval alleen moet zoeken naar een manier om de code uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="72768-271">Then the attack only needs to find a way to get the code executed.</span></span> <span data-ttu-id="72768-272">Met uploaden van een bestand, kunt u de aanvaller de eerste stap bereiken.</span><span class="sxs-lookup"><span data-stu-id="72768-272">Using a file upload helps the attacker accomplish the first step.</span></span> <span data-ttu-id="72768-273">De gevolgen van het uploaden van een bestand kunnen variëren, met inbegrip van volledige systeem overname, een overbelaste bestandssysteem of de database, aanvallen back-end-systemen en eenvoudige defacement doorsturen.</span><span class="sxs-lookup"><span data-stu-id="72768-273">The consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks to back-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="72768-274">Dit is afhankelijk van de toepassing heeft met het geüploade bestand en met name wordt bewaard.</span><span class="sxs-lookup"><span data-stu-id="72768-274">It depends on what the application does with the uploaded file and especially where it is stored.</span></span> <span data-ttu-id="72768-275">Server side validatie van bestandsuploads ontbreekt.</span><span class="sxs-lookup"><span data-stu-id="72768-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="72768-276">Volgende beveiligingsmechanismen moet worden geïmplementeerd voor functionaliteit bestand laden:</span><span class="sxs-lookup"><span data-stu-id="72768-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="72768-277">Extensie bestandscontrole (een geldige reeks toegestane bestandstype moet worden geaccepteerd)</span><span class="sxs-lookup"><span data-stu-id="72768-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="72768-278">Limiet voor de maximale grootte</span><span class="sxs-lookup"><span data-stu-id="72768-278">Maximum file size limit</span></span></li><li><span data-ttu-id="72768-279">Bestand mag niet worden geüpload naar webroot; de locatie moet een map op niet-systeemstation</span><span class="sxs-lookup"><span data-stu-id="72768-279">File should not be uploaded to webroot; the location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="72768-280">Naamgevingsconventie moet worden gevolgd, zodanig dat de naam van het geüploade bestand sommige aanvraaggrootte, om te voorkomen dat bestand overschreven</span><span class="sxs-lookup"><span data-stu-id="72768-280">Naming convention should be followed, such that the uploaded file name have some randomness, so as to prevent file overwrites</span></span></li><li><span data-ttu-id="72768-281">Bestanden moeten worden gecontroleerd voor anti-virus voordat het schrijven naar de schijf</span><span class="sxs-lookup"><span data-stu-id="72768-281">Files should be scanned for anti-virus before writing to the disk</span></span></li><li><span data-ttu-id="72768-282">Zorg ervoor dat de bestandsnaam en andere metagegevens (zoals een bestandspad) worden gevalideerd voor schadelijke tekens</span><span class="sxs-lookup"><span data-stu-id="72768-282">Ensure that the file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="72768-283">Indeling van bestandshandtekening moet worden gecontroleerd om te voorkomen dat een gebruiker een masqueraded bestand uploaden (bijvoorbeeld een exe-bestand uploaden door extensie te wijzigen naar txt)</span><span class="sxs-lookup"><span data-stu-id="72768-283">File format signature should be checked, to prevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension to txt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="72768-284">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-284">Example</span></span>
<span data-ttu-id="72768-285">Raadpleeg de klasse hieronder voor meer informatie voor het laatste punt met betrekking tot de validatie van handtekening bestand:</span><span class="sxs-lookup"><span data-stu-id="72768-285">For the last point regarding file format signature validation, refer to the class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="72768-286"><a id="typesafe"></a>Zorg ervoor dat type veilig parameters in webtoepassing worden gebruikt voor toegang tot gegevens</span><span class="sxs-lookup"><span data-stu-id="72768-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="72768-287">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-287">Title</span></span>                   | <span data-ttu-id="72768-288">Details</span><span class="sxs-lookup"><span data-stu-id="72768-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-289">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-289">**Component**</span></span>               | <span data-ttu-id="72768-290">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-290">Web Application</span></span> | 
| <span data-ttu-id="72768-291">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-291">**SDL Phase**</span></span>               | <span data-ttu-id="72768-292">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-292">Build</span></span> |  
| <span data-ttu-id="72768-293">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-293">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-294">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-294">Generic</span></span> |
| <span data-ttu-id="72768-295">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-295">**Attributes**</span></span>              | <span data-ttu-id="72768-296">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-296">N/A</span></span>  |
| <span data-ttu-id="72768-297">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-297">**References**</span></span>              | <span data-ttu-id="72768-298">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-298">N/A</span></span>  |
| <span data-ttu-id="72768-299">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-299">**Steps**</span></span> | <p><span data-ttu-id="72768-300">Als u de parameterverzameling, SQL beschouwen is de invoer als een letterlijke waarde in plaats als uitvoerbare code.</span><span class="sxs-lookup"><span data-stu-id="72768-300">If you use the Parameters collection, SQL treats the input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="72768-301">De verzameling Parameters kan worden gebruikt voor het type en de lengte beperkingen toepassen op de invoergegevens.</span><span class="sxs-lookup"><span data-stu-id="72768-301">The Parameters collection can be used to enforce type and length constraints on input data.</span></span> <span data-ttu-id="72768-302">Waarden die buiten het bereik activeren een uitzondering.</span><span class="sxs-lookup"><span data-stu-id="72768-302">Values outside of the range trigger an exception.</span></span> <span data-ttu-id="72768-303">Als de type-safe SQL-parameters worden niet gebruikt, is het mogelijk dat aanvallers kunnen uitvoeren die zijn ingesloten in de ongefilterde invoer-injectieaanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-303">If type-safe SQL parameters are not used, attackers might be able to execute injection attacks that are embedded in the unfiltered input.</span></span></p><p><span data-ttu-id="72768-304">Veilige typeparameters tijdens het construeren van de SQL-query's gebruiken om te voorkomen dat mogelijk SQL-injectieaanvallen die zich met ongefilterde invoer voordoen kunnen.</span><span class="sxs-lookup"><span data-stu-id="72768-304">Use type safe parameters when constructing SQL queries to avoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="72768-305">U kunt veilig typeparameters met opgeslagen procedures en dynamische SQL-instructies.</span><span class="sxs-lookup"><span data-stu-id="72768-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="72768-306">Parameters worden behandeld als letterlijke waarden door de database en niet als uitvoerbare code.</span><span class="sxs-lookup"><span data-stu-id="72768-306">Parameters are treated as literal values by the database and not as executable code.</span></span> <span data-ttu-id="72768-307">Parameters zijn ook gecontroleerd op type en de lengte.</span><span class="sxs-lookup"><span data-stu-id="72768-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="72768-308">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-308">Example</span></span> 
<span data-ttu-id="72768-309">De volgende code toont hoe u veilige typeparameters met de SqlParameterCollection bij het aanroepen van een opgeslagen procedure.</span><span class="sxs-lookup"><span data-stu-id="72768-309">The following code shows how to use type safe parameters with the SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="72768-310">De invoerwaarde mag niet langer zijn dan 11 tekens in het vorige codevoorbeeld.</span><span class="sxs-lookup"><span data-stu-id="72768-310">In the preceding code example, the input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="72768-311">Als de gegevens niet met het type of de lengte die zijn gedefinieerd door de parameter overeen, genereert de klasse SqlParameter een uitzondering.</span><span class="sxs-lookup"><span data-stu-id="72768-311">If the data does not conform to the type or length defined by the parameter, the SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="72768-312"><a id="binding-mvc"></a>Afzonderlijke model binding klassen gebruiken of bindingsfilter weer om te voorkomen dat MVC massaopslag toewijzing beveiligingslek</span><span class="sxs-lookup"><span data-stu-id="72768-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists to prevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="72768-313">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-313">Title</span></span>                   | <span data-ttu-id="72768-314">Details</span><span class="sxs-lookup"><span data-stu-id="72768-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-315">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-315">**Component**</span></span>               | <span data-ttu-id="72768-316">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-316">Web Application</span></span> | 
| <span data-ttu-id="72768-317">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-317">**SDL Phase**</span></span>               | <span data-ttu-id="72768-318">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-318">Build</span></span> |  
| <span data-ttu-id="72768-319">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-319">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-320">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-321">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-321">**Attributes**</span></span>              | <span data-ttu-id="72768-322">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-322">N/A</span></span>  |
| <span data-ttu-id="72768-323">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-323">**References**</span></span>              | <span data-ttu-id="72768-324">[Metagegevenskenmerken](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [openbare sleutel beveiligingslek en Beveiligingsrisicobeperking](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [volledige handleiding voor massaopslag toewijzing in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [aan de slag met EF met MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="72768-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide to Mass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="72768-325">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-325">**Steps**</span></span> | <ul><li><span data-ttu-id="72768-326">**Wanneer moet ik letten te veel boeken beveiligingslekken? -** Te veel boeken beveiligingsproblemen kan optreden als een willekeurige plaats u modelklassen binding uit de invoer van de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="72768-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="72768-327">Frameworks zoals MVC kunnen gebruikersgegevens in aangepaste .NET-klassen, met inbegrip van gewone oude CLR-objecten (POCOs) vertegenwoordigen.</span><span class="sxs-lookup"><span data-stu-id="72768-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="72768-328">MVC wordt automatisch gevuld deze modelklassen met gegevens van de aanvraag bieden een handige weergave voor het omgaan met invoer van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="72768-328">MVC automatically populates these model classes with data from the request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="72768-329">Wanneer deze klassen eigenschappen die niet door de gebruiker moeten worden ingesteld bevatten, kan de toepassing kwetsbaar voor over-postingaanvallen, waardoor Gebruikersbeheer van gegevens die de toepassing nooit bedoeld zijn.</span><span class="sxs-lookup"><span data-stu-id="72768-329">When these classes include properties that should not be set by the user, the application can be vulnerable to over-posting attacks, which allow user control of data that the application never intended.</span></span> <span data-ttu-id="72768-330">Net als modelbinding MVC, database toegang tot technologieën zoals object relationele mappers zoals Entity Framework vaak ook ondersteuning POCO-objecten gebruiken om aan te duiden databasegegevens.</span><span class="sxs-lookup"><span data-stu-id="72768-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects to represent database data.</span></span> <span data-ttu-id="72768-331">Deze gegevens modelklassen bieden de dezelfde gebruiksgemak omgaan met gegevens uit een database, zoals MVC in omgaan met invoer van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="72768-331">These data model classes provide the same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="72768-332">Omdat zowel MVC als de database ondersteuning soortgelijke modellen, zoals POCO-objecten, lijkt het eenvoudig om opnieuw de dezelfde klassen voor beide doeleinden te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="72768-332">Because both MVC and the database support similar models, like POCO objects, it seems easy to reuse the same classes for both purposes.</span></span> <span data-ttu-id="72768-333">Deze procedure niet behouden scheiding van problemen en is een algemene gebied waar onbedoelde eigenschappen worden blootgesteld aan modelbinding, het inschakelen van te veel boeken aanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-333">This practice fails to preserve separation of concerns, and it is one common area where unintended properties are exposed to model binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="72768-334">**Waarom mag niet ik mijn modelklassen ongefilterde database als parameters op mijn acties MVC gebruiken? -** Omdat MVC modelbinding in deze klasse wordt gebonden.</span><span class="sxs-lookup"><span data-stu-id="72768-334">**Why shouldn't I use my unfiltered database model classes as parameters to my MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="72768-335">Zelfs als de gegevens niet wordt weergegeven in de weergave, een kwaadwillende gebruiker kan een HTTP-aanvraag verzenden met deze gegevens worden opgenomen en MVC wordt graag binden omdat de actie wordt gemeld dat database klasse de vorm van gegevens die deze voor invoer van gebruiker accepteren moet.</span><span class="sxs-lookup"><span data-stu-id="72768-335">Even if the data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is the shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="72768-336">**Waarom moet ik de vorm gebruikt voor het modelbinding interesseren? -** Met behulp van ASP.NET MVC modelbinding met makkelijk modellen beschrijft een toepassing op over-postingaanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-336">**Why should I care about the shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application to over-posting attacks.</span></span> <span data-ttu-id="72768-337">Te veel boeken aanvallers wijzigen toepassingsgegevens afgezien van wat de ontwikkelaar is bedoeld, zoals het overschrijven van de prijs van een item of de beveiligingsbevoegdheden voor een account kan worden ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="72768-337">Over-posting could enable attackers to change application data beyond what the developer intended, such as overriding the price for an item or the security privileges for an account.</span></span> <span data-ttu-id="72768-338">Toepassingen moeten specifieke acties binding modellen (of specifieke toegestane filter eigenschappenlijsten) om een expliciete contract voor welke niet-vertrouwde invoer om toe te staan via de modelbinding gebruiken.</span><span class="sxs-lookup"><span data-stu-id="72768-338">Applications should use action-specific binding models (or specific allowed property filter lists) to provide an explicit contract for what untrusted input to allow via model binding.</span></span></li><li><span data-ttu-id="72768-339">**Afzonderlijke binding modellen NET dupliceren code heeft? -** Nee, is een kwestie van scheiding van problemen.</span><span class="sxs-lookup"><span data-stu-id="72768-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="72768-340">Als u de databasemodellen in actiemethoden hergebruikt, wordt u een eigenschap (of een onderliggende eigenschap) gezegd in deze klasse kan worden ingesteld door de gebruiker in een HTTP-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="72768-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by the user in an HTTP request.</span></span> <span data-ttu-id="72768-341">Als dat niet naar wens MVC te doen, moet u een filterlijst of een afzonderlijke klasse vorm MVC weergeven welke gegevens kunnen afkomstig zijn van gebruikersinvoer in plaats daarvan.</span><span class="sxs-lookup"><span data-stu-id="72768-341">If that is not what you want MVC to do, you need a filter list or a separate class shape to show MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="72768-342">**Als ik afzonderlijke binding modellen voor invoer van de gebruiker hebt, heb ik mijn kenmerken voor de aantekening gegevens dubbele? -** Niet noodzakelijkerwijs.</span><span class="sxs-lookup"><span data-stu-id="72768-342">**If I have separate binding models for user input, do I have to duplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="72768-343">MetadataTypeAttribute kunt u op de modelklasse database koppelen aan de metagegevens voor een model binding-klasse.</span><span class="sxs-lookup"><span data-stu-id="72768-343">You can use MetadataTypeAttribute on the database model class to link to the metadata on a model binding class.</span></span> <span data-ttu-id="72768-344">NET Houd er rekening mee dat het type waarnaar wordt verwezen door de MetadataTypeAttribute moet een subset van het verwijzende type (mogelijk minder eigenschappen, maar niet meer).</span><span class="sxs-lookup"><span data-stu-id="72768-344">Just note that the type referenced by the MetadataTypeAttribute must be a subset of the referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="72768-345">**Verplaatsen van gegevens heen en weer tussen de gebruiker invoer modellen en databasemodellen is omslachtig. Kan ik alleen kopiëren via alle eigenschappen met reflectie? -** Ja.</span><span class="sxs-lookup"><span data-stu-id="72768-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="72768-346">De enige eigenschappen die worden weergegeven in de binding-modellen zijn die u hebt vastgesteld veilig voor invoer van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="72768-346">The only properties that appear in the binding models are the ones you have determined to be safe for user input.</span></span> <span data-ttu-id="72768-347">Er is geen reden beveiliging waarmee wordt voorkomen dat alle eigenschappen die gemeenschappelijk bestaan tussen deze twee modellen worden overschreven met behulp van reflectie.</span><span class="sxs-lookup"><span data-stu-id="72768-347">There is no security reason that prevents using reflection to copy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="72768-348">**Hoe zit [binden (uitsluiten = "¦ â €")]. Kan ik die in plaats van afzonderlijke binding modellen gebruiken? -** Deze methode wordt niet aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="72768-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="72768-349">Met behulp van [binden (uitsluiten = "¦ â €")] betekent dat een nieuwe eigenschap bindbare standaard.</span><span class="sxs-lookup"><span data-stu-id="72768-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="72768-350">Wanneer een nieuwe eigenschap wordt toegevoegd, er is een extra stap te onthouden dingen om veilig te houden, plaats van het ontwerp zijn standaard veilig.</span><span class="sxs-lookup"><span data-stu-id="72768-350">When a new property is added, there is an extra step to remember to keep things secure, rather than having the design be secure by default.</span></span> <span data-ttu-id="72768-351">Afhankelijk van de ontwikkelaar is het riskant deze lijst controleren telkens wanneer een eigenschap wordt toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="72768-351">Depending on the developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="72768-352">**Is [binden (inclusief = "¦ â €")] handig voor het bewerken? -** Nee.</span><span class="sxs-lookup"><span data-stu-id="72768-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="72768-353">[Binden (inclusief = "¦ â €")] is alleen geschikt voor INSERT-stijl-bewerkingen (toevoegen van nieuwe gegevens).</span><span class="sxs-lookup"><span data-stu-id="72768-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="72768-354">Gebruik een andere methode, zoals afzonderlijke binding modellen hebben of een expliciete lijst van toegestane eigenschappen doorgegeven aan UpdateModel of TryUpdateModel voor bewerkingen van UPDATE-stijl (herziening van bestaande gegevens).</span><span class="sxs-lookup"><span data-stu-id="72768-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties to UpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="72768-355">Toevoegen van een [binden (opnemen = "â €¦")] kenmerk voor een bewerking betekent dat MVC wordt een objectexemplaar maken en alleen de vermelde eigenschappen instellen als u alle andere gebruikers op hun standaardwaarden.</span><span class="sxs-lookup"><span data-stu-id="72768-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only the listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="72768-356">Wanneer de gegevens worden bewaard, wordt de bestaande entiteit, de standaardwaarden opnieuw instellen van de waarden voor de weggelaten eigenschappen volledig vervangen.</span><span class="sxs-lookup"><span data-stu-id="72768-356">When the data is persisted, it will entirely replace the existing entity, resetting the values for any omitted properties to their defaults.</span></span> <span data-ttu-id="72768-357">Bijvoorbeeld, als IsAdmin is weggelaten uit een [binden (inclusief = 'â €¦')] kenmerk voor een bewerking, een gebruiker waarvan de naam is bewerkt via deze actie zouden worden opnieuw ingesteld op IsAdmin = false (elke gebruiker bewerkte verliezen status van de administrator).</span><span class="sxs-lookup"><span data-stu-id="72768-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset to IsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="72768-358">Als u dat bepaalde eigenschappen van updates wilt, gebruikt u een van de andere methoden hierboven.</span><span class="sxs-lookup"><span data-stu-id="72768-358">If you want to prevent updates to certain properties, use one of the other approaches above.</span></span> <span data-ttu-id="72768-359">Houd er rekening mee dat sommige versies van MVC-tooling Controllerklassen met genereren [binden (inclusief = 'â €¦')] acties bewerken en impliceren dat een eigenschap te verwijderen uit de lijst u te veel boeken aanvallen voorkomt.</span><span class="sxs-lookup"><span data-stu-id="72768-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="72768-360">Echter zoals hierboven wordt beschreven, die benadering niet naar behoren werkt en in plaats daarvan alle gegevens in de eigenschappen van weggelaten wordt ingesteld op hun standaardwaarden.</span><span class="sxs-lookup"><span data-stu-id="72768-360">However, as described above, that approach does not work as intended and instead will reset any data in the omitted properties to their default values.</span></span></li><li><span data-ttu-id="72768-361">**Voor de bewerkingen maken, zijn er aanvullende opmerkingen met [binden (opnemen = "¦ â €")] in plaats van afzonderlijke binding modellen? -** Ja.</span><span class="sxs-lookup"><span data-stu-id="72768-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="72768-362">Deze methode werkt eerst niet voor scenario's bewerken, vereisen van twee afzonderlijke methoden voor alle te veel boeken zwakke plekken beperkende onderhouden.</span><span class="sxs-lookup"><span data-stu-id="72768-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="72768-363">Tweede, afzonderlijk binding modellen Dwing scheiding van zorgen tussen de vorm gebruikt voor invoer van de gebruiker en de vorm die is gebruikt voor persistentie, af iets [binden (inclusief = "â €¦")] wordt niet.</span><span class="sxs-lookup"><span data-stu-id="72768-363">Second, separate binding models enforce separation of concerns between the shape used for user input and the shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="72768-364">Derde, houd er rekening mee dat [binden (inclusief = 'â €¦')] zijn alleen geschikt voor eigenschappen op het hoogste niveau. u kunt alleen gedeelten van de onderliggende eigenschappen (zoals 'Details.Name') kan niet toestaan in het kenmerk.</span><span class="sxs-lookup"><span data-stu-id="72768-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in the attribute.</span></span> <span data-ttu-id="72768-365">Tot slot en mogelijk belangrijker is, met behulp van [binden (opnemen = "¦ â €")] voegt een extra stap die moet worden opgeslagen telkens wanneer u de klasse wordt gebruikt voor het modelbinding.</span><span class="sxs-lookup"><span data-stu-id="72768-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time the class is used for model binding.</span></span> <span data-ttu-id="72768-366">Als een nieuwe actiemethode wordt gekoppeld aan de gegevensklasse rechtstreeks en vergeet om op te nemen een [binden (opnemen = 'â €¦')]-kenmerk, het kan zijn kwetsbaar voor over-postingaanvallen, zodat de [binden (opnemen = "â €¦")] benadering standaard wat minder veilig is.</span><span class="sxs-lookup"><span data-stu-id="72768-366">If a new action method binds to the data class directly and forgets to include a [Bind(Include ="â€¦")] attribute, it can be vulnerable to over-posting attacks, so the [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="72768-367">Als u [binden (inclusief = 'â €¦')], altijd om te onthouden te geven telkens wanneer de gegevensklassen van uw worden weergegeven als actie-methodeparameters behandelen.</span><span class="sxs-lookup"><span data-stu-id="72768-367">If you use [Bind(Include ="â€¦")], take care always to remember to specify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="72768-368">**Voor de bewerkingen maken, hoe staat te stellen de [binden (opnemen = "¦ â €")]-kenmerk op de modelklasse zelf? Voorkomt dat niet op deze manier hoeft te onthouden plaatsen van het kenmerk op elke actiemethode? -** Deze benadering in sommige gevallen werkt.</span><span class="sxs-lookup"><span data-stu-id="72768-368">**For Create operations, what about putting the [Bind(Include ="â€¦")] attribute on the model class itself? Does not this approach avoid the need to remember putting the attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="72768-369">Met behulp van [binden (opnemen = 'â €¦')] van het modeltype zelf (in plaats van op Actieparameters in met behulp van deze klasse), hoeft te onthouden om op te nemen voorkomt dat de [binden (opnemen = 'â €¦')] kenmerk voor elke methode in te grijpen.</span><span class="sxs-lookup"><span data-stu-id="72768-369">Using [Bind(Include ="â€¦")] on the model type itself (rather than on action parameters using this class), does avoid the need to remember to include the [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="72768-370">Met het kenmerk effectief rechtstreeks op de klasse, maakt een afzonderlijke surface area van deze klasse voor model binding doeleinden.</span><span class="sxs-lookup"><span data-stu-id="72768-370">Using the attribute directly on the class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="72768-371">Deze methode kan echter slechts voor één model binding vorm per modelklasse.</span><span class="sxs-lookup"><span data-stu-id="72768-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="72768-372">Deze methode werkt niet als één actiemethode moet toestaan modelbinding van een veld (bijvoorbeeld een alleen-lezen beheerder actie die gebruikersrollen updates) en andere acties nodig om te voorkomen dat de modelbinding van dit veld.</span><span class="sxs-lookup"><span data-stu-id="72768-372">If one action method needs to allow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need to prevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="72768-373">Elke klasse kan slechts één vorm van binding; hebben. Als u verschillende acties moeten een ander model binding vormen, moeten ze deze afzonderlijke vormen met behulp van een afzonderlijke binding modelklassen of afzonderlijke [binden (opnemen = "¦ â €")] kenmerken voor het actiemethoden.</span><span class="sxs-lookup"><span data-stu-id="72768-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need to represent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on the action methods.</span></span></li><li><span data-ttu-id="72768-374">**Wat zijn het binden van modellen? Zijn ze hetzelfde als modellen weergeven -** Dit twee verwante concepten zijn.</span><span class="sxs-lookup"><span data-stu-id="72768-374">**What are binding models? Are they the same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="72768-375">De term binding model naar een model verwijst klasse die wordt gebruikt in een actie is parameterlijst (de vorm van MVC-modelbinding doorgegeven aan de actiemethode).</span><span class="sxs-lookup"><span data-stu-id="72768-375">The term binding model refers to a model class used in an action is parameter list (the shape passed from MVC model binding to the action method).</span></span> <span data-ttu-id="72768-376">Het model van de weergave term verwijst naar een modelklasse van een actiemethode doorgegeven aan een weergave.</span><span class="sxs-lookup"><span data-stu-id="72768-376">The term view model refers to a model class passed from an action method to a view.</span></span> <span data-ttu-id="72768-377">Met behulp van een weergave-specifieke model is een algemene benadering voor het doorgeven van gegevens van een actiemethode aan een weergave.</span><span class="sxs-lookup"><span data-stu-id="72768-377">Using a view-specific model is a common approach for passing data from an action method to a view.</span></span> <span data-ttu-id="72768-378">Vaak worden deze vorm is ook geschikt voor modelbinding en het model van de weergave term kan worden gebruikt om te verwijzen van hetzelfde model op beide plaatsen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="72768-378">Often, this shape is also suitable for model binding, and the term view model can be used to refer the same model used in both places.</span></span> <span data-ttu-id="72768-379">Een nauwkeurige, is deze procedure wordt gesproken over de binding van modellen, gericht op de vorm die is doorgegeven aan de actie is wat belangrijk is voor massaopslag toewijzing doeleinden.</span><span class="sxs-lookup"><span data-stu-id="72768-379">To be precise, this procedure talks specifically about binding models, focusing on the shape passed to the action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="72768-380"><a id="rendering"></a>Niet-vertrouwde webuitvoer vóór rendering coderen</span><span class="sxs-lookup"><span data-stu-id="72768-380"><a id="rendering"></a>Encode untrusted web output prior to rendering</span></span>

| <span data-ttu-id="72768-381">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-381">Title</span></span>                   | <span data-ttu-id="72768-382">Details</span><span class="sxs-lookup"><span data-stu-id="72768-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-383">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-383">**Component**</span></span>               | <span data-ttu-id="72768-384">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-384">Web Application</span></span> | 
| <span data-ttu-id="72768-385">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-385">**SDL Phase**</span></span>               | <span data-ttu-id="72768-386">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-386">Build</span></span> |  
| <span data-ttu-id="72768-387">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-387">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-388">Algemeen, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-389">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-389">**Attributes**</span></span>              | <span data-ttu-id="72768-390">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-390">N/A</span></span>  |
| <span data-ttu-id="72768-391">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-391">**References**</span></span>              | <span data-ttu-id="72768-392">[Om te voorkomen dat in ASP.NET Cross-site scripting](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross-Site Scripting) preventie cheats blad](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="72768-392">[How to prevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="72768-393">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-393">**Steps**</span></span> | <span data-ttu-id="72768-394">Cross-site scripting (vaak afgekort als XSS) is een aanvalsvector voor online services of een toepassing/onderdeel is dat invoer via het web verbruikt.</span><span class="sxs-lookup"><span data-stu-id="72768-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from the web.</span></span> <span data-ttu-id="72768-395">XSS beveiligingsproblemen kunnen een aanvaller script uitvoeren op de computer een andere gebruiker via een kwetsbaar webtoepassing.</span><span class="sxs-lookup"><span data-stu-id="72768-395">XSS vulnerabilities may allow an attacker to execute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="72768-396">Schadelijke scripts kunnen worden gebruikt voor het stelen van cookies en anders kunnen knoeien met de machine van een slachtoffer via JavaScript.</span><span class="sxs-lookup"><span data-stu-id="72768-396">Malicious scripts can be used to steal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="72768-397">XSS wordt voorkomen door het valideren van invoer van gebruiker, zodat is opgemaakt en codering voordat deze wordt weergegeven in een webpagina.</span><span class="sxs-lookup"><span data-stu-id="72768-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="72768-398">Validatie voor invoer en uitvoercodering kunnen worden gedaan met behulp van Web-bibliotheek voor beveiliging.</span><span class="sxs-lookup"><span data-stu-id="72768-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="72768-399">Voor beheerde code (C\#, VB.net, enz.), gebruikt u een of meer coderingsmethoden uit de bibliotheek Web beveiliging (Anti-XSS), afhankelijk van de context waarin de gebruikersinvoer opgehaald gemanifesteerd nodig:</span><span class="sxs-lookup"><span data-stu-id="72768-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from the Web Protection (Anti-XSS) Library, depending on the context where the user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="72768-400">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="72768-401"><a id="typemodel"></a>Validatie voor invoer- en filteren op alle tekenreekstype modeleigenschappen uitvoeren</span><span class="sxs-lookup"><span data-stu-id="72768-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="72768-402">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-402">Title</span></span>                   | <span data-ttu-id="72768-403">Details</span><span class="sxs-lookup"><span data-stu-id="72768-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-404">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-404">**Component**</span></span>               | <span data-ttu-id="72768-405">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-405">Web Application</span></span> | 
| <span data-ttu-id="72768-406">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-406">**SDL Phase**</span></span>               | <span data-ttu-id="72768-407">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-407">Build</span></span> |  
| <span data-ttu-id="72768-408">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-408">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-409">Algemeen, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-410">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-410">**Attributes**</span></span>              | <span data-ttu-id="72768-411">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-411">N/A</span></span>  |
| <span data-ttu-id="72768-412">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-412">**References**</span></span>              | <span data-ttu-id="72768-413">[Toe te voegen validatie](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [modelgegevens valideren in een MVC-toepassing](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [richtsnoer voor uw ASP.NET MVC-toepassingen](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="72768-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="72768-414">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-414">**Steps**</span></span> | <p><span data-ttu-id="72768-415">De invoerparameters moeten worden gevalideerd voordat ze worden gebruikt in de toepassing om ervoor te zorgen dat de toepassing zijn beveiligd tegen schadelijke gebruikersinvoer.</span><span class="sxs-lookup"><span data-stu-id="72768-415">All the input parameters must be validated before they are used in the application to ensure that the application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="72768-416">Valideren van de invoerwaarden met reguliere expressie validaties aan serverzijde met een strategie voor een lijst met geaccepteerde validatie.</span><span class="sxs-lookup"><span data-stu-id="72768-416">Validate the input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="72768-417">Gebruikersinvoer unsanitized / parameters doorgegeven aan de methoden kunnen leiden tot code injectie beveiligingsproblemen.</span><span class="sxs-lookup"><span data-stu-id="72768-417">Unsanitized user inputs / parameters passed to the methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="72768-418">Voor webtoepassingen bevatten toegangspunten ook formuliervelden, QueryStrings, cookies, HTTP-headers en web serviceparameters.</span><span class="sxs-lookup"><span data-stu-id="72768-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="72768-419">De volgende validatie voor invoer controles moeten worden uitgevoerd bij modelbinding:</span><span class="sxs-lookup"><span data-stu-id="72768-419">The following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="72768-420">De eigenschappen van het model moeten worden gemarkeerd met RegularExpression aantekening, voor het accepteren van toegestane aantal tekens en maximaal toegestane lengte</span><span class="sxs-lookup"><span data-stu-id="72768-420">The model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="72768-421">De controllermethoden ModelState geldigheid moeten worden uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="72768-421">The controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="72768-422"><a id="richtext"></a>Opschoning moet worden toegepast op formuliervelden die tekens, bijvoorbeeld, RTF-editor accepteren</span><span class="sxs-lookup"><span data-stu-id="72768-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="72768-423">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-423">Title</span></span>                   | <span data-ttu-id="72768-424">Details</span><span class="sxs-lookup"><span data-stu-id="72768-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-425">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-425">**Component**</span></span>               | <span data-ttu-id="72768-426">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-426">Web Application</span></span> | 
| <span data-ttu-id="72768-427">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-427">**SDL Phase**</span></span>               | <span data-ttu-id="72768-428">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-428">Build</span></span> |  
| <span data-ttu-id="72768-429">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-429">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-430">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-430">Generic</span></span> |
| <span data-ttu-id="72768-431">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-431">**Attributes**</span></span>              | <span data-ttu-id="72768-432">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-432">N/A</span></span>  |
| <span data-ttu-id="72768-433">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-433">**References**</span></span>              | <span data-ttu-id="72768-434">[Onveilige invoer coderen](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="72768-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="72768-435">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-435">**Steps**</span></span> | <p><span data-ttu-id="72768-436">Identificeer alle statische markup-labels die u wilt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="72768-436">Identify all static markup tags that you want to use.</span></span> <span data-ttu-id="72768-437">Vaak is het beperken van de opmaak op veilige HTML-elementen, zoals `<b>` (vet weergegeven) en `<i>` (cursief).</span><span class="sxs-lookup"><span data-stu-id="72768-437">A common practice is to restrict formatting to safe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="72768-438">Voordat u de gegevens, HTML en coderen schrijft deze.</span><span class="sxs-lookup"><span data-stu-id="72768-438">Before writing the data, HTML-encode it.</span></span> <span data-ttu-id="72768-439">Dit maakt schadelijke scripts veilig door waardoor moet worden verwerkt als tekst niet als uitvoerbare code.</span><span class="sxs-lookup"><span data-stu-id="72768-439">This makes any malicious script safe by causing it to be handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="72768-440">Validatie van de ASP.NET-aanvraag uitschakelen door het toevoegen van de ValidateRequest = 'false' kenmerk met de @-pagina-instructie</span><span class="sxs-lookup"><span data-stu-id="72768-440">Disable ASP.NET request validation by the adding the ValidateRequest="false" attribute to the @ Page directive</span></span></li><li><span data-ttu-id="72768-441">De tekenreeksinvoer met de methode HtmlEncode coderen</span><span class="sxs-lookup"><span data-stu-id="72768-441">Encode the string input with the HtmlEncode method</span></span></li><li><span data-ttu-id="72768-442">Gebruik een StringBuilder en roep de methode vervangen om selectief verwijderen de codering voor de HTML-elementen die u wilt toestaan</span><span class="sxs-lookup"><span data-stu-id="72768-442">Use a StringBuilder and call its Replace method to selectively remove the encoding on the HTML elements that you want to permit</span></span></li></ol><p><span data-ttu-id="72768-443">De pagina in de verwijzingen schakelt ASP.NET aanvraag gevalideerd door in te stellen `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="72768-443">The page-in the references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="72768-444">Het HTML-coderen van de invoer, waardoor selectief de `<b>` en `<i>` ook een .NET-bibliotheek voor HTML-opschoning kan ook worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="72768-444">It HTML-encodes the input and selectively allows the `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="72768-445">HtmlSanitizer is een .NET-bibliotheek voor het reinigen HTML-fragmenten en documenten van constructies die tot XSS-aanvallen leiden kunnen.</span><span class="sxs-lookup"><span data-stu-id="72768-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead to XSS attacks.</span></span> <span data-ttu-id="72768-446">AngleSharp wordt gebruikt om te parseren, bewerken en HTML en CSS weergeven.</span><span class="sxs-lookup"><span data-stu-id="72768-446">It uses AngleSharp to parse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="72768-447">HtmlSanitizer kan worden geïnstalleerd als een NuGet-pakket en de gebruikersinvoer kan worden doorgegeven via de relevante HTML of CSS-opschoning methoden, indien van toepassing op de server.</span><span class="sxs-lookup"><span data-stu-id="72768-447">HtmlSanitizer can be installed as a NuGet package, and the user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on the server side.</span></span> <span data-ttu-id="72768-448">Houd er rekening mee dat opschoning als een beveiligingscontrole alleen als een laatste optie moet worden beschouwd.</span><span class="sxs-lookup"><span data-stu-id="72768-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="72768-449">Validatie voor invoer en uitvoercodering worden beschouwd als de besturingselementen voor betere beveiliging.</span><span class="sxs-lookup"><span data-stu-id="72768-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="72768-450"><a id="inbuilt-encode"></a>Geen DOM elementen toewijzen aan put waarvoor geen ingebouwde codering</span><span class="sxs-lookup"><span data-stu-id="72768-450"><a id="inbuilt-encode"></a>Do not assign DOM elements to sinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="72768-451">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-451">Title</span></span>                   | <span data-ttu-id="72768-452">Details</span><span class="sxs-lookup"><span data-stu-id="72768-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-453">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-453">**Component**</span></span>               | <span data-ttu-id="72768-454">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-454">Web Application</span></span> | 
| <span data-ttu-id="72768-455">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-455">**SDL Phase**</span></span>               | <span data-ttu-id="72768-456">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-456">Build</span></span> |  
| <span data-ttu-id="72768-457">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-457">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-458">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-458">Generic</span></span> |
| <span data-ttu-id="72768-459">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-459">**Attributes**</span></span>              | <span data-ttu-id="72768-460">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-460">N/A</span></span>  |
| <span data-ttu-id="72768-461">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-461">**References**</span></span>              | <span data-ttu-id="72768-462">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-462">N/A</span></span>  |
| <span data-ttu-id="72768-463">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-463">**Steps**</span></span> | <span data-ttu-id="72768-464">Veel javascript-functies doen niet codering standaard.</span><span class="sxs-lookup"><span data-stu-id="72768-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="72768-465">Als u niet-vertrouwde invoer voor de DOM-elementen via dergelijke functies toewijst, kan leiden tot cross-site-script (XSS) uitvoeringen.</span><span class="sxs-lookup"><span data-stu-id="72768-465">When assigning untrusted input to DOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="72768-466">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-466">Example</span></span>
<span data-ttu-id="72768-467">Hieronder vindt u onveilige voorbeelden:</span><span class="sxs-lookup"><span data-stu-id="72768-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="72768-468">Gebruik geen `innerHtml`; gebruik in plaats daarvan `innerText`.</span><span class="sxs-lookup"><span data-stu-id="72768-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="72768-469">Op deze manier in plaats van `$("#elm").html()`, gebruiken`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="72768-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="72768-470"><a id="redirect-safe"></a>Valideer alle omleidingen in de toepassing worden gesloten of veilig gedaan</span><span class="sxs-lookup"><span data-stu-id="72768-470"><a id="redirect-safe"></a>Validate all redirects within the application are closed or done safely</span></span>

| <span data-ttu-id="72768-471">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-471">Title</span></span>                   | <span data-ttu-id="72768-472">Details</span><span class="sxs-lookup"><span data-stu-id="72768-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-473">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-473">**Component**</span></span>               | <span data-ttu-id="72768-474">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-474">Web Application</span></span> | 
| <span data-ttu-id="72768-475">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-475">**SDL Phase**</span></span>               | <span data-ttu-id="72768-476">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-476">Build</span></span> |  
| <span data-ttu-id="72768-477">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-477">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-478">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-478">Generic</span></span> |
| <span data-ttu-id="72768-479">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-479">**Attributes**</span></span>              | <span data-ttu-id="72768-480">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-480">N/A</span></span>  |
| <span data-ttu-id="72768-481">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-481">**References**</span></span>              | [<span data-ttu-id="72768-482">Het Framework van de autorisatie OAuth 2.0 - Open Redirectors</span><span class="sxs-lookup"><span data-stu-id="72768-482">The OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="72768-483">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-483">**Steps**</span></span> | <p><span data-ttu-id="72768-484">Ontwerp van de toepassing waarvoor omleiding naar een door de gebruiker opgegeven locatie moet de doelen mogelijke omleiding naar een vooraf gedefinieerde "veilig" lijst met sites of domeinen beperken.</span><span class="sxs-lookup"><span data-stu-id="72768-484">Application design requiring redirection to a user-supplied location must constrain the possible redirection targets to a predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="72768-485">Alle omleidingen in de toepassing moeten worden gesloten/veilig.</span><span class="sxs-lookup"><span data-stu-id="72768-485">All redirects in the application must be closed/safe.</span></span></p><p><span data-ttu-id="72768-486">Om dit te doen:</span><span class="sxs-lookup"><span data-stu-id="72768-486">To do this:</span></span></p><ul><li><span data-ttu-id="72768-487">Alle omleidingen identificeren</span><span class="sxs-lookup"><span data-stu-id="72768-487">Identify all redirects</span></span></li><li><span data-ttu-id="72768-488">Een juiste Risicobeperking voor het omleiden van elke implementeren.</span><span class="sxs-lookup"><span data-stu-id="72768-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="72768-489">Juiste oplossingen omvatten omleiding goedgekeurde IP-adressen of gebruiker bevestigen.</span><span class="sxs-lookup"><span data-stu-id="72768-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="72768-490">Als een website of de service met een beveiligingslek open omleiding identiteitsproviders OAuth-Facebook/OpenID gebruikt, kan een aanvaller stelen van een gebruiker aanmeldingstokens en die gebruiker imiteren.</span><span class="sxs-lookup"><span data-stu-id="72768-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="72768-491">Dit risico is wanneer met behulp van OAuth, die wordt beschreven in RFC 6749 'De OAuth 2.0 autorisatie Framework', sectie 10.15 'Open leidt' op dezelfde manier, referenties van gebruikers kunnen worden aangetast door spear phishing-aanvallen met open omleidingen</span><span class="sxs-lookup"><span data-stu-id="72768-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "The OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="72768-492"><a id="string-method"></a>Validatie voor invoer op alle tekenreeks typeparameters geaccepteerd door de methoden van de domeincontroller implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="72768-493">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-493">Title</span></span>                   | <span data-ttu-id="72768-494">Details</span><span class="sxs-lookup"><span data-stu-id="72768-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-495">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-495">**Component**</span></span>               | <span data-ttu-id="72768-496">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-496">Web Application</span></span> | 
| <span data-ttu-id="72768-497">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-497">**SDL Phase**</span></span>               | <span data-ttu-id="72768-498">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-498">Build</span></span> |  
| <span data-ttu-id="72768-499">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-499">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-500">Algemeen, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-501">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-501">**Attributes**</span></span>              | <span data-ttu-id="72768-502">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-502">N/A</span></span>  |
| <span data-ttu-id="72768-503">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-503">**References**</span></span>              | <span data-ttu-id="72768-504">[Valideren van modelgegevens in een MVC-toepassing](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [richtsnoer voor uw ASP.NET MVC-toepassingen](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="72768-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="72768-505">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-505">**Steps**</span></span> | <span data-ttu-id="72768-506">Methoden die primitief gegevenstype en geen modellen als argument accepteert, moet met een reguliere expressie voor validatie voor invoer worden gedaan.</span><span class="sxs-lookup"><span data-stu-id="72768-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="72768-507">Hier moet Regex.IsMatch worden gebruikt met een geldige regex-patroon.</span><span class="sxs-lookup"><span data-stu-id="72768-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="72768-508">Als de invoer komt niet overeen met de opgegeven reguliere expressie, besturingselement moet niet verder en een passende waarschuwing met betrekking tot mislukte validatie moet worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="72768-508">If the input doesn't match the specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="72768-509"><a id="dos-expression"></a>Bovengrens-out voor reguliere expressie om te voorkomen van DoS vanwege ongeldige reguliere expressies verwerken instellen</span><span class="sxs-lookup"><span data-stu-id="72768-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing to prevent DoS due to bad regular expressions</span></span>

| <span data-ttu-id="72768-510">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-510">Title</span></span>                   | <span data-ttu-id="72768-511">Details</span><span class="sxs-lookup"><span data-stu-id="72768-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-512">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-512">**Component**</span></span>               | <span data-ttu-id="72768-513">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-513">Web Application</span></span> | 
| <span data-ttu-id="72768-514">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-514">**SDL Phase**</span></span>               | <span data-ttu-id="72768-515">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-515">Build</span></span> |  
| <span data-ttu-id="72768-516">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-516">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-517">Algemeen, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="72768-518">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-518">**Attributes**</span></span>              | <span data-ttu-id="72768-519">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-519">N/A</span></span>  |
| <span data-ttu-id="72768-520">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-520">**References**</span></span>              | [<span data-ttu-id="72768-521">De eigenschap DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="72768-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="72768-522">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-522">**Steps**</span></span> | <span data-ttu-id="72768-523">Om ervoor te zorgen denial of service-aanvallen op onjuist ingesteld gemaakte reguliere expressies, waardoor een groot aantal backtracing als de time-out voor de algemene standaardwaarde.</span><span class="sxs-lookup"><span data-stu-id="72768-523">To ensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set the global default timeout.</span></span> <span data-ttu-id="72768-524">Als de verwerkingstijd langer dan de bovengrens van de gedefinieerde duurt, zou dit een time-out-uitzondering genereert.</span><span class="sxs-lookup"><span data-stu-id="72768-524">If the processing time takes longer than the defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="72768-525">Als er niets is geconfigureerd, zou de time-out van oneindig zijn.</span><span class="sxs-lookup"><span data-stu-id="72768-525">If nothing is configured, the timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="72768-526">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-526">Example</span></span>
<span data-ttu-id="72768-527">De volgende configuratie genereert bijvoorbeeld een RegexMatchTimeoutException als de verwerking langer dan 5 seconden duurt:</span><span class="sxs-lookup"><span data-stu-id="72768-527">For example, the following configuration will throw a RegexMatchTimeoutException, if the processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="72768-528"><a id="html-razor"></a>Vermijd het gebruik van Html.Raw in Razor weergaven</span><span class="sxs-lookup"><span data-stu-id="72768-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="72768-529">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-529">Title</span></span>                   | <span data-ttu-id="72768-530">Details</span><span class="sxs-lookup"><span data-stu-id="72768-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-531">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-531">**Component**</span></span>               | <span data-ttu-id="72768-532">Webtoepassing</span><span class="sxs-lookup"><span data-stu-id="72768-532">Web Application</span></span> | 
| <span data-ttu-id="72768-533">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-533">**SDL Phase**</span></span>               | <span data-ttu-id="72768-534">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-534">Build</span></span> |  
| <span data-ttu-id="72768-535">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-535">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-536">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-537">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-537">**Attributes**</span></span>              | <span data-ttu-id="72768-538">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-538">N/A</span></span>  |
| <span data-ttu-id="72768-539">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-539">**References**</span></span>              | <span data-ttu-id="72768-540">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-540">N/A</span></span>  |
| <span data-ttu-id="72768-541">Stap</span><span class="sxs-lookup"><span data-stu-id="72768-541">Step</span></span> | <span data-ttu-id="72768-542">ASP.Net-webpagina's (Razor) uitvoeren van automatische HTML-codering.</span><span class="sxs-lookup"><span data-stu-id="72768-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="72768-543">Alle tekenreeksen die worden afgedrukt door ingesloten code nuggets (@ blokken) zijn automatisch HTML-codering.</span><span class="sxs-lookup"><span data-stu-id="72768-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="72768-544">Echter, wanneer `HtmlHelper.Raw` methode wordt aangeroepen, resulteert dit in de opmaak die is geen HTML-codering.</span><span class="sxs-lookup"><span data-stu-id="72768-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="72768-545">Als `Html.Raw()` Help-methode wordt gebruikt, wordt de automatische codering bescherming die Razor biedt omzeild.</span><span class="sxs-lookup"><span data-stu-id="72768-545">If `Html.Raw()` helper method is used, it bypasses the automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="72768-546">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-546">Example</span></span>
<span data-ttu-id="72768-547">Hieronder volgt een onbeveiligde voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="72768-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="72768-548">Gebruik geen `Html.Raw()` tenzij u nodig hebt om opmaak weer te geven.</span><span class="sxs-lookup"><span data-stu-id="72768-548">Do not use `Html.Raw()` unless you need to display markup.</span></span> <span data-ttu-id="72768-549">Deze methode voert geen uitvoer impliciet codering.</span><span class="sxs-lookup"><span data-stu-id="72768-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="72768-550">Gebruik andere helpers ASP.NET bijv.`@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="72768-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="72768-551"><a id="stored-proc"></a>Gebruik geen dynamische query's in de opgeslagen procedures</span><span class="sxs-lookup"><span data-stu-id="72768-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="72768-552">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-552">Title</span></span>                   | <span data-ttu-id="72768-553">Details</span><span class="sxs-lookup"><span data-stu-id="72768-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-554">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-554">**Component**</span></span>               | <span data-ttu-id="72768-555">Database</span><span class="sxs-lookup"><span data-stu-id="72768-555">Database</span></span> | 
| <span data-ttu-id="72768-556">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-556">**SDL Phase**</span></span>               | <span data-ttu-id="72768-557">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-557">Build</span></span> |  
| <span data-ttu-id="72768-558">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-558">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-559">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-559">Generic</span></span> |
| <span data-ttu-id="72768-560">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-560">**Attributes**</span></span>              | <span data-ttu-id="72768-561">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-561">N/A</span></span>  |
| <span data-ttu-id="72768-562">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-562">**References**</span></span>              | <span data-ttu-id="72768-563">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-563">N/A</span></span>  |
| <span data-ttu-id="72768-564">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-564">**Steps**</span></span> | <p><span data-ttu-id="72768-565">Een SQL-injectieaanvallen gebruikmaakt van kwetsbaarheden in validatie voor invoer willekeurige opdrachten kunt uitvoeren in de database.</span><span class="sxs-lookup"><span data-stu-id="72768-565">A SQL injection attack exploits vulnerabilities in input validation to run arbitrary commands in the database.</span></span> <span data-ttu-id="72768-566">Dit kan optreden wanneer de toepassing gebruikmaakt van invoer om dynamische SQL-instructies voor toegang tot de database samen te stellen.</span><span class="sxs-lookup"><span data-stu-id="72768-566">It can occur when your application uses input to construct dynamic SQL statements to access the database.</span></span> <span data-ttu-id="72768-567">Het kan ook optreden als opgeslagen procedures die zijn doorgegeven tekenreeksen met onbewerkte gebruikersinvoer wordt gebruikt in uw code.</span><span class="sxs-lookup"><span data-stu-id="72768-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="72768-568">Met behulp van de SQL-injectieaanvallen, uitvoeren de aanvaller willekeurige opdrachten in de database.</span><span class="sxs-lookup"><span data-stu-id="72768-568">Using the SQL injection attack, the attacker can execute arbitrary commands in the database.</span></span> <span data-ttu-id="72768-569">De parameters van alle SQL-instructies (met inbegrip van de SQL-instructies in de opgeslagen procedures) moeten worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="72768-569">All SQL statements (including the SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="72768-570">SQL-instructies met parameters accepteert tekens met een speciale betekenis naar SQL (zoals enkel aanhalingsteken) zonder problemen omdat ze sterk getypeerd zijn.</span><span class="sxs-lookup"><span data-stu-id="72768-570">Parameterized SQL statements will accept characters that have special meaning to SQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="72768-571">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-571">Example</span></span>
<span data-ttu-id="72768-572">Hieronder volgt een voorbeeld van onbeveiligde dynamische opgeslagen Procedure:</span><span class="sxs-lookup"><span data-stu-id="72768-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="72768-573">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-573">Example</span></span>
<span data-ttu-id="72768-574">Hieronder vindt u de dezelfde opgeslagen procedure veilig geïmplementeerd:</span><span class="sxs-lookup"><span data-stu-id="72768-574">Following is the same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="72768-575"><a id="validation-api"></a>Zorg ervoor dat de validatie is uitgevoerd voor Web-API-methoden</span><span class="sxs-lookup"><span data-stu-id="72768-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="72768-576">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-576">Title</span></span>                   | <span data-ttu-id="72768-577">Details</span><span class="sxs-lookup"><span data-stu-id="72768-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-578">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-578">**Component**</span></span>               | <span data-ttu-id="72768-579">Web-API</span><span class="sxs-lookup"><span data-stu-id="72768-579">Web API</span></span> | 
| <span data-ttu-id="72768-580">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-580">**SDL Phase**</span></span>               | <span data-ttu-id="72768-581">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-581">Build</span></span> |  
| <span data-ttu-id="72768-582">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-582">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-583">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="72768-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="72768-584">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-584">**Attributes**</span></span>              | <span data-ttu-id="72768-585">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-585">N/A</span></span>  |
| <span data-ttu-id="72768-586">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-586">**References**</span></span>              | [<span data-ttu-id="72768-587">Modelvalidatie van het in ASP.NET-Web-API</span><span class="sxs-lookup"><span data-stu-id="72768-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="72768-588">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-588">**Steps**</span></span> | <span data-ttu-id="72768-589">Wanneer een client verzendt de gegevens naar een web-API, is het verplichte de om gegevens te valideren voordat de verwerking.</span><span class="sxs-lookup"><span data-stu-id="72768-589">When a client sends data to a web API, it is mandatory to validate the data before doing any processing.</span></span> <span data-ttu-id="72768-590">Gebruik gegevens aantekeningen op modellen validatieregels instellen voor de eigenschappen van het model voor ASP.NET Web-API's die modellen als invoer accepteren.</span><span class="sxs-lookup"><span data-stu-id="72768-590">For ASP.NET Web APIs which accept models as input, use data annotations on models to set validation rules on the properties of the model.</span></span>|

### <a name="example"></a><span data-ttu-id="72768-591">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-591">Example</span></span>
<span data-ttu-id="72768-592">De volgende code toont dezelfde:</span><span class="sxs-lookup"><span data-stu-id="72768-592">The following code demonstrates the same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="72768-593">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-593">Example</span></span>
<span data-ttu-id="72768-594">In de actiemethode van de API-controllers heeft de geldigheid van het model moet expliciet worden gecontroleerd zoals hieronder wordt weergegeven:</span><span class="sxs-lookup"><span data-stu-id="72768-594">In the action method of the API controllers, validity of the model has to be explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with the product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="72768-595"><a id="string-api"></a>Validatie voor invoer op alle tekenreeks typeparameters geaccepteerd door de methoden van de Web-API implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="72768-596">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-596">Title</span></span>                   | <span data-ttu-id="72768-597">Details</span><span class="sxs-lookup"><span data-stu-id="72768-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-598">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-598">**Component**</span></span>               | <span data-ttu-id="72768-599">Web-API</span><span class="sxs-lookup"><span data-stu-id="72768-599">Web API</span></span> | 
| <span data-ttu-id="72768-600">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-600">**SDL Phase**</span></span>               | <span data-ttu-id="72768-601">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-601">Build</span></span> |  
| <span data-ttu-id="72768-602">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-602">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-603">Algemene MVC 5, 6 MVC</span><span class="sxs-lookup"><span data-stu-id="72768-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="72768-604">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-604">**Attributes**</span></span>              | <span data-ttu-id="72768-605">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-605">N/A</span></span>  |
| <span data-ttu-id="72768-606">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-606">**References**</span></span>              | <span data-ttu-id="72768-607">[Valideren van modelgegevens in een MVC-toepassing](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [richtsnoer voor uw ASP.NET MVC-toepassingen](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="72768-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="72768-608">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-608">**Steps**</span></span> | <span data-ttu-id="72768-609">Methoden die primitief gegevenstype en geen modellen als argument accepteert, moet met een reguliere expressie voor validatie voor invoer worden gedaan.</span><span class="sxs-lookup"><span data-stu-id="72768-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="72768-610">Hier moet Regex.IsMatch worden gebruikt met een geldige regex-patroon.</span><span class="sxs-lookup"><span data-stu-id="72768-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="72768-611">Als de invoer komt niet overeen met de opgegeven reguliere expressie, besturingselement moet niet verder en een passende waarschuwing met betrekking tot mislukte validatie moet worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="72768-611">If the input doesn't match the specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="72768-612"><a id="typesafe-api"></a>Zorg ervoor dat type veilig parameters in Web-API worden gebruikt voor toegang tot gegevens</span><span class="sxs-lookup"><span data-stu-id="72768-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="72768-613">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-613">Title</span></span>                   | <span data-ttu-id="72768-614">Details</span><span class="sxs-lookup"><span data-stu-id="72768-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-615">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-615">**Component**</span></span>               | <span data-ttu-id="72768-616">Web-API</span><span class="sxs-lookup"><span data-stu-id="72768-616">Web API</span></span> | 
| <span data-ttu-id="72768-617">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-617">**SDL Phase**</span></span>               | <span data-ttu-id="72768-618">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-618">Build</span></span> |  
| <span data-ttu-id="72768-619">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-619">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-620">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-620">Generic</span></span> |
| <span data-ttu-id="72768-621">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-621">**Attributes**</span></span>              | <span data-ttu-id="72768-622">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-622">N/A</span></span>  |
| <span data-ttu-id="72768-623">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-623">**References**</span></span>              | <span data-ttu-id="72768-624">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-624">N/A</span></span>  |
| <span data-ttu-id="72768-625">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-625">**Steps**</span></span> | <p><span data-ttu-id="72768-626">Als u de parameterverzameling, SQL beschouwen is de invoer als een letterlijke waarde in plaats als uitvoerbare code.</span><span class="sxs-lookup"><span data-stu-id="72768-626">If you use the Parameters collection, SQL treats the input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="72768-627">De verzameling Parameters kan worden gebruikt voor het type en de lengte beperkingen toepassen op de invoergegevens.</span><span class="sxs-lookup"><span data-stu-id="72768-627">The Parameters collection can be used to enforce type and length constraints on input data.</span></span> <span data-ttu-id="72768-628">Waarden die buiten het bereik activeren een uitzondering.</span><span class="sxs-lookup"><span data-stu-id="72768-628">Values outside of the range trigger an exception.</span></span> <span data-ttu-id="72768-629">Als de type-safe SQL-parameters worden niet gebruikt, is het mogelijk dat aanvallers kunnen uitvoeren die zijn ingesloten in de ongefilterde invoer-injectieaanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-629">If type-safe SQL parameters are not used, attackers might be able to execute injection attacks that are embedded in the unfiltered input.</span></span></p><p><span data-ttu-id="72768-630">Veilige typeparameters tijdens het construeren van de SQL-query's gebruiken om te voorkomen dat mogelijk SQL-injectieaanvallen die zich met ongefilterde invoer voordoen kunnen.</span><span class="sxs-lookup"><span data-stu-id="72768-630">Use type safe parameters when constructing SQL queries to avoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="72768-631">U kunt veilig typeparameters met opgeslagen procedures en dynamische SQL-instructies.</span><span class="sxs-lookup"><span data-stu-id="72768-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="72768-632">Parameters worden behandeld als letterlijke waarden door de database en niet als uitvoerbare code.</span><span class="sxs-lookup"><span data-stu-id="72768-632">Parameters are treated as literal values by the database and not as executable code.</span></span> <span data-ttu-id="72768-633">Parameters zijn ook gecontroleerd op type en de lengte.</span><span class="sxs-lookup"><span data-stu-id="72768-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="72768-634">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="72768-634">Example</span></span>
<span data-ttu-id="72768-635">De volgende code toont hoe u veilige typeparameters met de SqlParameterCollection bij het aanroepen van een opgeslagen procedure.</span><span class="sxs-lookup"><span data-stu-id="72768-635">The following code shows how to use type safe parameters with the SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="72768-636">De invoerwaarde mag niet langer zijn dan 11 tekens in het vorige codevoorbeeld.</span><span class="sxs-lookup"><span data-stu-id="72768-636">In the preceding code example, the input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="72768-637">Als de gegevens niet met het type of de lengte die zijn gedefinieerd door de parameter overeen, genereert de klasse SqlParameter een uitzondering.</span><span class="sxs-lookup"><span data-stu-id="72768-637">If the data does not conform to the type or length defined by the parameter, the SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="72768-638"><a id="sql-docdb"></a>SQL-query's constructorreeks mag gebruiken voor Cosmos-DB</span><span class="sxs-lookup"><span data-stu-id="72768-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="72768-639">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-639">Title</span></span>                   | <span data-ttu-id="72768-640">Details</span><span class="sxs-lookup"><span data-stu-id="72768-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-641">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-641">**Component**</span></span>               | <span data-ttu-id="72768-642">Azure Documentdb</span><span class="sxs-lookup"><span data-stu-id="72768-642">Azure Document DB</span></span> | 
| <span data-ttu-id="72768-643">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-643">**SDL Phase**</span></span>               | <span data-ttu-id="72768-644">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-644">Build</span></span> |  
| <span data-ttu-id="72768-645">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-645">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-646">Algemene</span><span class="sxs-lookup"><span data-stu-id="72768-646">Generic</span></span> |
| <span data-ttu-id="72768-647">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-647">**Attributes**</span></span>              | <span data-ttu-id="72768-648">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-648">N/A</span></span>  |
| <span data-ttu-id="72768-649">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-649">**References**</span></span>              | [<span data-ttu-id="72768-650">SQL-Parameterisering in DocumentDB aangekondigd</span><span class="sxs-lookup"><span data-stu-id="72768-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="72768-651">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-651">**Steps**</span></span> | <span data-ttu-id="72768-652">Hoewel DocumentDB biedt alleen ondersteuning voor alleen-lezen-query's, is SQL-injectie nog steeds mogelijk als de query's worden gemaakt met cookievalidatie met invoer van gebruiker.</span><span class="sxs-lookup"><span data-stu-id="72768-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="72768-653">Het is mogelijk dat een gebruiker toegang te krijgen tot gegevens die ze mag niet in dezelfde verzameling openen door schadelijke SQL-query's.</span><span class="sxs-lookup"><span data-stu-id="72768-653">It might be possible for a user to gain access to data they shouldn’t be accessing within the same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="72768-654">Gebruik SQL-query's met parameters als de query's zijn samengesteld op basis van gebruikersinvoer.</span><span class="sxs-lookup"><span data-stu-id="72768-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="72768-655"><a id="schema-binding"></a>Validatie van de WCF-invoer via schemabinding</span><span class="sxs-lookup"><span data-stu-id="72768-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="72768-656">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-656">Title</span></span>                   | <span data-ttu-id="72768-657">Details</span><span class="sxs-lookup"><span data-stu-id="72768-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-658">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-658">**Component**</span></span>               | <span data-ttu-id="72768-659">WCF</span><span class="sxs-lookup"><span data-stu-id="72768-659">WCF</span></span> | 
| <span data-ttu-id="72768-660">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-660">**SDL Phase**</span></span>               | <span data-ttu-id="72768-661">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-661">Build</span></span> |  
| <span data-ttu-id="72768-662">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-662">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-663">Algemeen, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="72768-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="72768-664">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-664">**Attributes**</span></span>              | <span data-ttu-id="72768-665">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-665">N/A</span></span>  |
| <span data-ttu-id="72768-666">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-666">**References**</span></span>              | [<span data-ttu-id="72768-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="72768-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="72768-668">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-668">**Steps**</span></span> | <p><span data-ttu-id="72768-669">Gebrek aan validatie leidt tot een ander type injectieaanvallen.</span><span class="sxs-lookup"><span data-stu-id="72768-669">Lack of validation leads to different type injection attacks.</span></span></p><p><span data-ttu-id="72768-670">Berichtverificatie vertegenwoordigt één regel verdediging in de bescherming van uw WCF-toepassing.</span><span class="sxs-lookup"><span data-stu-id="72768-670">Message validation represents one line of defense in the protection of your WCF application.</span></span> <span data-ttu-id="72768-671">Met deze methode kunt u berichten schema's met WCF servicebewerkingen beschermen tegen een aanval door een schadelijke client valideren.</span><span class="sxs-lookup"><span data-stu-id="72768-671">With this approach, you validate messages using schemas to protect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="72768-672">Alle berichten ontvangen door de client naar de client te beschermen tegen een aanval door een kwaadwillende service valideren.</span><span class="sxs-lookup"><span data-stu-id="72768-672">Validate all messages received by the client to protect the client from attack by a malicious service.</span></span> <span data-ttu-id="72768-673">Berichtverificatie maakt het mogelijk om berichten te valideren wanneer bewerkingen verbruiken bericht contracten of gegevenscontracten, kunnen niet worden uitgevoerd met behulp van de validatie van parameters.</span><span class="sxs-lookup"><span data-stu-id="72768-673">Message validation makes it possible to validate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="72768-674">Berichtverificatie kunt u validatielogica binnen schema's, waardoor meer flexibiliteit en het ontwikkeling maken.</span><span class="sxs-lookup"><span data-stu-id="72768-674">Message validation allows you to create validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="72768-675">Schema's kunnen opnieuw worden gebruikt door verschillende toepassingen binnen de organisatie, standaarden voor weergave van gegevens maken.</span><span class="sxs-lookup"><span data-stu-id="72768-675">Schemas can be reused across different applications inside the organization, creating standards for data representation.</span></span> <span data-ttu-id="72768-676">Bovendien kunt berichtverificatie u bewerkingen beveiligen wanneer ze complexe gegevenstypen met betrekking tot contracten die zakelijke logica verbruiken.</span><span class="sxs-lookup"><span data-stu-id="72768-676">Additionally, message validation allows you to protect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="72768-677">Bericht als validatie wilt uitvoeren, moet u eerst een schema dat de bewerkingen van uw service en de gegevenstypen die wordt gebruikt door deze bewerkingen vertegenwoordigt bouwen.</span><span class="sxs-lookup"><span data-stu-id="72768-677">To perform message validation, you first build a schema that represents the operations of your service and the data types consumed by those operations.</span></span> <span data-ttu-id="72768-678">Vervolgens maakt u een .NET-klasse die een aangepaste clientinstellingen bericht inspector en aangepaste dispatcher bericht inspector voor het valideren van de berichten verzonden/ontvangen van de service implementeert.</span><span class="sxs-lookup"><span data-stu-id="72768-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector to validate the messages sent/received to/from the service.</span></span> <span data-ttu-id="72768-679">Vervolgens maakt implementeren u een aangepaste eindpuntgedrag zodat berichtverificatie op zowel de client als de service.</span><span class="sxs-lookup"><span data-stu-id="72768-679">Next, you implement a custom endpoint behavior to enable message validation on both the client and the service.</span></span> <span data-ttu-id="72768-680">Ten slotte implementeren u een aangepaste configuratie-element van de klasse die kunt u zichtbaar maken van de uitgebreide aangepaste eindpuntgedrag in het configuratiebestand van de service of de client'</span><span class="sxs-lookup"><span data-stu-id="72768-680">Finally, you implement a custom configuration element on the class that allows you to expose the extended custom endpoint behavior in the configuration file of the service or the client"</span></span></p>|

## <span data-ttu-id="72768-681"><a id="parameters"></a>Validatie van de WCF - invoer via Parameter Inspectors</span><span class="sxs-lookup"><span data-stu-id="72768-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="72768-682">Titel</span><span class="sxs-lookup"><span data-stu-id="72768-682">Title</span></span>                   | <span data-ttu-id="72768-683">Details</span><span class="sxs-lookup"><span data-stu-id="72768-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="72768-684">**Onderdeel**</span><span class="sxs-lookup"><span data-stu-id="72768-684">**Component**</span></span>               | <span data-ttu-id="72768-685">WCF</span><span class="sxs-lookup"><span data-stu-id="72768-685">WCF</span></span> | 
| <span data-ttu-id="72768-686">**SDL-fase**</span><span class="sxs-lookup"><span data-stu-id="72768-686">**SDL Phase**</span></span>               | <span data-ttu-id="72768-687">Ontwikkelen</span><span class="sxs-lookup"><span data-stu-id="72768-687">Build</span></span> |  
| <span data-ttu-id="72768-688">**Van toepassing technologieën**</span><span class="sxs-lookup"><span data-stu-id="72768-688">**Applicable Technologies**</span></span> | <span data-ttu-id="72768-689">Algemeen, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="72768-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="72768-690">**Kenmerken**</span><span class="sxs-lookup"><span data-stu-id="72768-690">**Attributes**</span></span>              | <span data-ttu-id="72768-691">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="72768-691">N/A</span></span>  |
| <span data-ttu-id="72768-692">**Verwijzingen**</span><span class="sxs-lookup"><span data-stu-id="72768-692">**References**</span></span>              | [<span data-ttu-id="72768-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="72768-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="72768-694">**Stappen**</span><span class="sxs-lookup"><span data-stu-id="72768-694">**Steps**</span></span> | <p><span data-ttu-id="72768-695">Invoer en gegevensvalidatie vertegenwoordigt een belangrijke line-of verdediging in de bescherming van uw WCF-toepassing.</span><span class="sxs-lookup"><span data-stu-id="72768-695">Input and data validation represents one important line of defense in the protection of your WCF application.</span></span> <span data-ttu-id="72768-696">U moet alle parameters die worden weergegeven in de bewerkingen van de WCF-service naar de service te beveiligen tegen een aanval door een schadelijke client valideren.</span><span class="sxs-lookup"><span data-stu-id="72768-696">You should validate all parameters exposed in WCF service operations to protect the service from attack by a malicious client.</span></span> <span data-ttu-id="72768-697">Als u daarentegen, moet u ook alle retourwaarden ontvangen door de client naar de client te beschermen tegen een aanval door een kwaadwillende service valideren</span><span class="sxs-lookup"><span data-stu-id="72768-697">Conversely, you should also validate all return values received by the client to protect the client from attack by a malicious service</span></span></p><p><span data-ttu-id="72768-698">WCF biedt andere uitbreidbaarheidspunten waarmee u kunt het gedrag van de runtime WCF aanpassen door het maken van aangepaste extensies.</span><span class="sxs-lookup"><span data-stu-id="72768-698">WCF provides different extensibility points that allow you to customize the WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="72768-699">Bericht inspecteurs en Parameter Inspectors zijn twee uitbreidbaarheid mechanismen meer controle krijgen over de gegevens die tussen een client en een service gebruikt.</span><span class="sxs-lookup"><span data-stu-id="72768-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used to gain greater control over the data passing between a client and a service.</span></span> <span data-ttu-id="72768-700">U moet de parameter inspectors gebruiken voor validatie voor invoer en inspectors bericht alleen gebruiken wanneer u moet het volledige bericht dat naar en vanuit een service te controleren.</span><span class="sxs-lookup"><span data-stu-id="72768-700">You should use parameter inspectors for input validation and use message inspectors only when you need to inspect the entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="72768-701">Om uit te voeren validatie voor invoer, u een .NET-klasse bouwen en implementeren van een aangepaste parameter inspector om parameters voor bewerkingen in uw service te valideren.</span><span class="sxs-lookup"><span data-stu-id="72768-701">To perform input validation, you will build a .NET class and implement a custom parameter inspector in order to validate parameters on operations in your service.</span></span> <span data-ttu-id="72768-702">Vervolgens implementeert u een aangepaste eindpuntgedrag zodat validatie op zowel de client als de service.</span><span class="sxs-lookup"><span data-stu-id="72768-702">You will then implement a custom endpoint behavior to enable validation on both the client and the service.</span></span> <span data-ttu-id="72768-703">Ten slotte wilt u een aangepaste configuratie-element op de klasse die kunt u zichtbaar maken van de uitgebreide aangepaste eindpuntgedrag in het configuratiebestand van de service of de client implementeren</span><span class="sxs-lookup"><span data-stu-id="72768-703">Finally, you will implement a custom configuration element on the class that allows you to expose the extended custom endpoint behavior in the configuration file of the service or the client</span></span></p>|
