---
title: "Azure Batch-pools van aangepaste installatiekopieën inrichten | Microsoft Docs"
description: "U kunt een Batch toepassingen van een aangepaste installatiekopie die u wilt inrichten rekenknooppunten die de software en gegevens die u nodig hebt voor uw toepassing bevatten. Aangepaste installatiekopieën zijn een efficiënte manier voor het configureren van rekenknooppunten om uit te voeren van uw Batch-workloads."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/07/2017
ms.author: tamram
ms.openlocfilehash: 3d655766b4f2a5efb0c8c29ffa81a89f84b3e17c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="use-a-custom-image-to-create-a-pool-of-virtual-machines"></a><span data-ttu-id="f9433-104">Een aangepaste installatiekopie gebruiken voor een pool van virtuele machines maken</span><span class="sxs-lookup"><span data-stu-id="f9433-104">Use a custom image to create a pool of virtual machines</span></span>

<span data-ttu-id="f9433-105">Wanneer u een pool van virtuele machines in Azure Batch maakt, geeft u de installatiekopie van een virtuele machine (VM) waarmee het besturingssysteem voor elk rekenknooppunt in de groep.</span><span class="sxs-lookup"><span data-stu-id="f9433-105">When you create a pool of virtual machines in Azure Batch, you specify a virtual machine (VM) image that provides the operating system for each compute node in the pool.</span></span> <span data-ttu-id="f9433-106">U kunt een pool van virtuele machines maken met behulp van een installatiekopie van een Azure Marketplace of door een aangepaste VHD-installatiekopie die u hebt voorbereid.</span><span class="sxs-lookup"><span data-stu-id="f9433-106">You can create a pool of virtual machines either by using an Azure Marketplace image, or by providing a custom VHD image that you have prepared.</span></span> <span data-ttu-id="f9433-107">Wanneer u een aangepaste installatiekopie opgeeft, hebt u controle over de manier waarop het besturingssysteem is geconfigureerd op het moment dat elk rekenknooppunt is ingericht.</span><span class="sxs-lookup"><span data-stu-id="f9433-107">When you provide a custom image, you have control over how the operating system is configured at the time that each compute node is provisioned.</span></span> <span data-ttu-id="f9433-108">Uw aangepaste installatiekopie kan ook toepassingen en referentiegegevens die beschikbaar op het rekenknooppunt zijn zodra deze is ingericht.</span><span class="sxs-lookup"><span data-stu-id="f9433-108">Your custom image can also include applications and reference data that are available on the compute node as soon as it is provisioned.</span></span>

<span data-ttu-id="f9433-109">Met een aangepaste installatiekopie kunt u bij het ophalen van uw pool tijd besparen rekenknooppunten gereed voor gebruik van uw Batch-werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="f9433-109">Using a custom image can save you time in getting your pool's compute nodes ready to run your Batch workload.</span></span> <span data-ttu-id="f9433-110">Terwijl u kunt altijd een Azure Marketplace-installatiekopie gebruiken en software op elk rekenknooppunt installeren nadat deze zijn ingericht, is het mogelijk dat deze aanpak minder efficiënt dan met een aangepaste installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="f9433-110">While you can always use an Azure Marketplace image and install software on each compute node after it has been provisioned, this approach may be less efficient than using a custom image.</span></span> 

<span data-ttu-id="f9433-111">Enkele redenen met een aangepaste installatiekopie die is geconfigureerd voor uw scenario zijn hoeven:</span><span class="sxs-lookup"><span data-stu-id="f9433-111">Some reasons to use a custom image that is configured for your scenario include needing to:</span></span>

- <span data-ttu-id="f9433-112">**Configureren van het besturingssysteem (OS)** geen speciale configuratie van het besturingssysteem voor de aangepaste installatiekopie kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f9433-112">**Configure the operating system (OS)** Any special configuration of the operating system can be performed on the custom image.</span></span> 
- <span data-ttu-id="f9433-113">**Grote toepassingen installeren.**</span><span class="sxs-lookup"><span data-stu-id="f9433-113">**Install large applications.**</span></span> <span data-ttu-id="f9433-114">Toepassingen installeren op een aangepaste installatiekopie is efficiënter dan installeren op elk rekenknooppunt nadat deze is ingericht.</span><span class="sxs-lookup"><span data-stu-id="f9433-114">Installing applications on a custom image is more efficient than installing them on each compute node after it is provisioned.</span></span>
- <span data-ttu-id="f9433-115">**Kopiëren van grote hoeveelheden gegevens.**</span><span class="sxs-lookup"><span data-stu-id="f9433-115">**Copy significant amounts of data.**</span></span> <span data-ttu-id="f9433-116">Als de gegevens gekopieerd naar de aangepaste installatiekopie, moet deze slechts één keer plaats op elk rekenknooppunt, tijd en bandbreedte besparen worden gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="f9433-116">If the data is copied to the custom image, it only needs to be copied once, rather than to each compute node, saving time and bandwidth.</span></span>
- <span data-ttu-id="f9433-117">**Start opnieuw op de virtuele machine tijdens de installatie.**</span><span class="sxs-lookup"><span data-stu-id="f9433-117">**Reboot the VM during the setup process.**</span></span> <span data-ttu-id="f9433-118">Opnieuw opstarten van de virtuele machine kan een tijdrovend proces zijn, met name als u een aantal rekenknooppunten.</span><span class="sxs-lookup"><span data-stu-id="f9433-118">Rebooting the VM can be a time-consuming process, especially if you have a number of compute nodes.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f9433-119">Vereisten</span><span class="sxs-lookup"><span data-stu-id="f9433-119">Prerequisites</span></span>

- <span data-ttu-id="f9433-120">**Een Batch-account is gemaakt met de gebruikerabonnement groep toewijzing-modus.**</span><span class="sxs-lookup"><span data-stu-id="f9433-120">**A Batch account created with the User Subscription pool allocation mode.**</span></span> <span data-ttu-id="f9433-121">Voor het gebruik van een aangepaste installatiekopie voor het inrichten van virtuele Machine van toepassingen, uw Batch-account te maken met abonnement van de gebruiker [groep toewijzing modus](batch-api-basics.md#pool-allocation-mode).</span><span class="sxs-lookup"><span data-stu-id="f9433-121">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription [pool allocation mode](batch-api-basics.md#pool-allocation-mode).</span></span> <span data-ttu-id="f9433-122">In deze modus worden Batch-pools toegewezen binnen het abonnement waarin het account zich bevindt.</span><span class="sxs-lookup"><span data-stu-id="f9433-122">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="f9433-123">Zie de [Account](batch-api-basics.md#account) in sectie [ontwikkelen grootschalige parallelle compute-oplossingen met Batch](batch-api-basics.md) voor informatie over het instellen van de modus van de toewijzing van toepassingen wanneer u een Batch-account maakt.</span><span class="sxs-lookup"><span data-stu-id="f9433-123">See the [Account](batch-api-basics.md#account) section in [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md) for information on setting the pool allocation mode when you create a Batch account.</span></span>

- <span data-ttu-id="f9433-124">Een **Azure Storage-account.**</span><span class="sxs-lookup"><span data-stu-id="f9433-124">**An Azure Storage account.**</span></span> <span data-ttu-id="f9433-125">Voor het maken van een pool van virtuele machines met een aangepaste installatiekopie, moet u een standaard, algemene Azure Storage-account in hetzelfde abonnement en dezelfde regio.</span><span class="sxs-lookup"><span data-stu-id="f9433-125">To create a pool of virtual machines using a custom image, you need a standard, general-purpose Azure Storage account in the same subscription and region.</span></span> <span data-ttu-id="f9433-126">Als u een aangepaste installatiekopie van een virtuele machine in Azure maakt, wordt u de installatiekopie kopiëren naar het opslagaccount waarin de besturingssysteemschijf van de VM zich bevindt en u hoeft niet te maken van een afzonderlijke opslagaccount.</span><span class="sxs-lookup"><span data-stu-id="f9433-126">If you create a custom image from an Azure VM, then you will copy the image to the storage account where the VM's OS disk resides, and you won't need to create a separate storage account.</span></span> 
    
## <a name="prepare-a-custom-image"></a><span data-ttu-id="f9433-127">Een aangepaste installatiekopie voorbereiden</span><span class="sxs-lookup"><span data-stu-id="f9433-127">Prepare a custom image</span></span>

<span data-ttu-id="f9433-128">Als u een aangepaste installatiekopie voorbereiden voor gebruik met Batch, moet u een bestaande installatie van Linux of Windows te generaliseren.</span><span class="sxs-lookup"><span data-stu-id="f9433-128">To prepare a custom image for use with Batch, you must generalize an existing installation of Linux or Windows.</span></span> <span data-ttu-id="f9433-129">De installatie van een besturingssysteem te generaliseren verwijdert systeemspecifieke gegevens.</span><span class="sxs-lookup"><span data-stu-id="f9433-129">Generalizing an operating system installation removes machine-specific information.</span></span> <span data-ttu-id="f9433-130">Het resultaat is een installatiekopie die kan worden geïnstalleerd op andere computers of virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="f9433-130">The result is an image that can be installed on other computers or VMs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="f9433-131">Batch ondersteunt momenteel geen gebruik van Azure installatiekopieën voor het inrichten van een groep beheerd.</span><span class="sxs-lookup"><span data-stu-id="f9433-131">Batch does not currently support using Azure managed images to provision a pool.</span></span> <span data-ttu-id="f9433-132">De aangepaste installatiekopie die u gebruikt voor het inrichten van een groep moet worden opgeslagen in Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f9433-132">The custom image you use to provision a pool must be stored in Azure Storage.</span></span> 
>
> <span data-ttu-id="f9433-133">Bij het voorbereiden van uw aangepaste installatiekopie, houd er rekening mee houden de volgende punten:</span><span class="sxs-lookup"><span data-stu-id="f9433-133">When preparing your custom image, keep in mind the following points:</span></span>
> - <span data-ttu-id="f9433-134">Zorg ervoor dat de basisinstallatiekopie voor het besturingssysteem die u gebruikt om uw Batch-pools in te richten geen vooraf geïnstalleerde Azure-extensies bevat, zoals de extensie Aangepast script.</span><span class="sxs-lookup"><span data-stu-id="f9433-134">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="f9433-135">Als de installatiekopie een vooraf geïnstalleerde extensie bevat, kunnen er binnen Azure problemen optreden bij het implementeren van de VM.</span><span class="sxs-lookup"><span data-stu-id="f9433-135">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="f9433-136">Zorg ervoor dat in de basisinstallatiekopie van het besturingssysteem die u opgeeft, gebruik wordt gemaakt van het reguliere tijdelijke station. De Batch-knooppuntagent verwacht momenteel namelijk het reguliere tijdelijke station.</span><span class="sxs-lookup"><span data-stu-id="f9433-136">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="f9433-137">Als een aangepaste installatiekopie kunt u eventuele bestaande voorbereide installatiekopie van een Windows- of Linux.</span><span class="sxs-lookup"><span data-stu-id="f9433-137">You can use any existing prepared Windows or Linux image as a custom image.</span></span> <span data-ttu-id="f9433-138">Bijvoorbeeld als u een lokale installatiekopie gebruiken wilt, klikt u vervolgens de installatiekopie uploadt naar een Azure-opslagaccount die zich in hetzelfde abonnement en dezelfde regio bevinden als uw Batch-account met [AzCopy](../storage/storage-use-azcopy.md) of een ander hulpprogramma voor het uploaden.</span><span class="sxs-lookup"><span data-stu-id="f9433-138">For example, if you wish to use a local image, then upload the image to an Azure Storage account that is in the same subscription and region as your Batch account using [AzCopy](../storage/storage-use-azcopy.md) or another upload tool.</span></span>

<span data-ttu-id="f9433-139">U kunt ook een aangepaste installatiekopie van een nieuwe of bestaande Azure-virtuele machine voorbereiden.</span><span class="sxs-lookup"><span data-stu-id="f9433-139">You can also prepare a custom image from a new or existing Azure VM.</span></span> <span data-ttu-id="f9433-140">Als u een nieuwe virtuele machine maakt, kunt u een Azure Marketplace-installatiekopie gebruiken als de basisinstallatiekopie voor uw aangepaste installatiekopie en deze aanpassen.</span><span class="sxs-lookup"><span data-stu-id="f9433-140">If you are creating a new VM, you can use an Azure Marketplace image as the base image for your custom image and then customize it.</span></span> <span data-ttu-id="f9433-141">Voor het aanpassen van de basisinstallatiekopie van een virtuele machine in Azure maken en uw toepassingen of gegevens toevoegen aan deze.</span><span class="sxs-lookup"><span data-stu-id="f9433-141">To customize the base image, create an Azure VM and add your applications or data to it.</span></span> <span data-ttu-id="f9433-142">Generaliseer vervolgens de virtuele machine om te fungeren als de aangepaste installatiekopie en opslaan in Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f9433-142">Then generalize the VM to serve as your custom image and save it to Azure Storage.</span></span> 

<span data-ttu-id="f9433-143">Als u een aangepaste installatiekopie van een virtuele machine in Azure, de volgende stappen uit:</span><span class="sxs-lookup"><span data-stu-id="f9433-143">To prepare a custom image from an Azure VM, follow these steps:</span></span>

1. <span data-ttu-id="f9433-144">Maak een **onbeheerde** Azure VM van de installatiekopie van een Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f9433-144">Create an **unmanaged** Azure VM from an Azure Marketplace image.</span></span> <span data-ttu-id="f9433-145">Azure Marketplace afbeeldingen bevat voor zowel [Windows](../virtual-machines/windows/quick-create-portal.md) en [Linux](../virtual-machines/linux/quick-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f9433-145">Azure Marketplace includes images for both [Windows](../virtual-machines/windows/quick-create-portal.md) and [Linux](../virtual-machines/linux/quick-create-portal.md).</span></span>
    
    <span data-ttu-id="f9433-146">Zorg ervoor dat u selecteert bij stap 3 van het proces voor het maken van VM **Nee** voor **opslag: gebruik beheerd schijven** optie.</span><span class="sxs-lookup"><span data-stu-id="f9433-146">On step 3 of the VM creation process, make sure that you select **No** for **Storage: Use Managed Disks** option.</span></span> <span data-ttu-id="f9433-147">Ook Noteer de naam van het opslagaccount voor de besturingssysteemschijf van de VM, omdat dit opslagaccount ook waar uw aangepaste installatiekopie wordt opgeslagen in Azure:</span><span class="sxs-lookup"><span data-stu-id="f9433-147">Also take note of the storage account name for the VM's OS disk, as this storage account is also where Azure will save your custom image:</span></span>

    ![Een niet-beheerde virtuele machine maken en noteer de opslagaccountnaam](media/batch-custom-images/vm-create-storage.png)
 
2. <span data-ttu-id="f9433-149">Het proces van het maken van uw virtuele machine te voltooien en wacht totdat deze door Azure worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="f9433-149">Complete the process of creating your VM, and wait for it to be allocated by Azure.</span></span> <span data-ttu-id="f9433-150">Hier volgt een afbeelding die laat zien van een virtuele machine in de Azure portal in de actieve status:</span><span class="sxs-lookup"><span data-stu-id="f9433-150">Here's an image that shows a VM in the Azure portal in the running state:</span></span>

    ![Een virtuele machine maken vanuit een marketplace-installatiekopie](media/batch-custom-images/vm-status-running.png)

3. <span data-ttu-id="f9433-152">Zodra de virtuele machine wordt uitgevoerd, verbinding maken via RDP (voor Windows) of SSH (voor Linux).</span><span class="sxs-lookup"><span data-stu-id="f9433-152">Once the VM is running, connect to it via RDP (for Windows) or SSH (for Linux).</span></span> <span data-ttu-id="f9433-153">Alle benodigde software installeren of gewenste gegevens kopiëren en vervolgens de virtuele machine te generaliseren.</span><span class="sxs-lookup"><span data-stu-id="f9433-153">Install any necessary software or copy desired data, and then generalize the VM.</span></span> <span data-ttu-id="f9433-154">Volg de stappen [Generalize van de virtuele machine](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span><span class="sxs-lookup"><span data-stu-id="f9433-154">Follow the steps described in [Generalize the VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span></span> 
   
4. <span data-ttu-id="f9433-155">Volg de stappen voor [aanmelden bij Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span><span class="sxs-lookup"><span data-stu-id="f9433-155">Follow the steps to [Log in to Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span></span> <span data-ttu-id="f9433-156">Zie het installeren van Azure PowerShell [overzicht van Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span><span class="sxs-lookup"><span data-stu-id="f9433-156">To install Azure PowerShell, see [Overview of Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span></span> 

5. <span data-ttu-id="f9433-157">Volg vervolgens de stappen voor [ongedaan gemaakt van de virtuele machine en de status ingesteld op algemene](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span><span class="sxs-lookup"><span data-stu-id="f9433-157">Next, follow the steps to [Deallocate the VM and set the state to generalized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span></span> 

    <span data-ttu-id="f9433-158">U ziet dat de virtuele machine toewijzing ongedaan wordt gemaakt in de Azure-portal:</span><span class="sxs-lookup"><span data-stu-id="f9433-158">In the Azure portal, notice that the VM is deallocated:</span></span>

    ![Zorg ervoor dat de virtuele machine in de toewijzing is opgeheven](media/batch-custom-images/vm-status-deallocated.png)

6.  <span data-ttu-id="f9433-160">Maken en opslaan van de VM-installatiekopie voor het gebruik van Azure Storage de [opslaan AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell-cmdlet.</span><span class="sxs-lookup"><span data-stu-id="f9433-160">Create and save the VM image to Azure Storage using the [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell cmdlet.</span></span> <span data-ttu-id="f9433-161">Volg de instructies die worden beschreven [maken van de installatiekopie](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span><span class="sxs-lookup"><span data-stu-id="f9433-161">Follow the instructions described in [Create the image](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span></span>
    
    <span data-ttu-id="f9433-162">De VM-installatiekopie wordt opgeslagen in de Azure Storage-account gemaakt wanneer de virtuele machine is gemaakt, zoals u in stap 1 van deze procedure.</span><span class="sxs-lookup"><span data-stu-id="f9433-162">The VM image is saved to the Azure Storage account created when the VM was created, as shown in step 1 of this procedure.</span></span> <span data-ttu-id="f9433-163">de cmdlet opslaan AzureRmVMImage slaat de installatiekopie naar de **system** container in dit opslagaccount.</span><span class="sxs-lookup"><span data-stu-id="f9433-163">the Save-AzureRmVMImage cmdlet saves the image to the **system** container in that storage account.</span></span> <span data-ttu-id="f9433-164">De `-DestinationContainername` parameter de namen van een virtuele map in de **system** container.</span><span class="sxs-lookup"><span data-stu-id="f9433-164">The `-DestinationContainername` parameter names a virtual directory within the **system** container.</span></span> <span data-ttu-id="f9433-165">De `-VHDNamePrefix` parameter geeft u een voorvoegsel voor de blob-naam.</span><span class="sxs-lookup"><span data-stu-id="f9433-165">The `-VHDNamePrefix` parameter specifies a prefix for the blob name.</span></span> <span data-ttu-id="f9433-166">Dit voorvoegsel wordt functienaam geplaatst om de blob-naam met een afbreekstreepje.</span><span class="sxs-lookup"><span data-stu-id="f9433-166">This prefix is prepended to the blob name with a hyphen.</span></span> 

    <span data-ttu-id="f9433-167">Stel bijvoorbeeld dat u opslaan AzureRmVMImage aanroepen met de volgende parameters:</span><span class="sxs-lookup"><span data-stu-id="f9433-167">For example, suppose you call Save-AzureRmVMImage with the following parameters:</span></span>  

        Save-AzureRmVMImage -ResourceGroupName sample-resource-group -Name vm-custom-image -DestinationContainerName batchimages -VHDNamePrefix custom -Path C:\Temp\Images\vm-custom-image.json

    <span data-ttu-id="f9433-168">De afbeelding is opgeslagen in de locatie en de blob-naam hier weergegeven:</span><span class="sxs-lookup"><span data-stu-id="f9433-168">The resulting image is saved to the location and blob name shown here:</span></span>

    ![Locatie van de VHD-opgeslagen in de systeemcontainer](media/batch-custom-images/vhd-in-vm-storage-account.png)

    > [!NOTE]
    > <span data-ttu-id="f9433-170">Een virtuele machine van Azure niet-beheerde maakt verschillende storage-accounts voor verschillende doeleinden.</span><span class="sxs-lookup"><span data-stu-id="f9433-170">An Azure unmanaged VM creates several storage accounts for different purposes.</span></span> <span data-ttu-id="f9433-171">Als u hebt niet de naam van de opslagcontainer voor de besturingssysteemschijf notitie wanneer de virtuele machine is gemaakt, klikt u vervolgens zoeken naar de gekoppelde opslag die account bevat de **system** container.</span><span class="sxs-lookup"><span data-stu-id="f9433-171">If you did not note the name of the storage container for the OS disk when the VM was created, then find the associated storage account that contains the **system** container.</span></span> <span data-ttu-id="f9433-172">Navigeer door de **system** container vinden van de aangepaste installatiekopie met de waarden die u hebt opgegeven voor de **opslaan AzureRmVMImage** opdracht.</span><span class="sxs-lookup"><span data-stu-id="f9433-172">Navigate through the **system** container to find the custom image using the values you specified for the **Save-AzureRmVMImage** command.</span></span>

## <a name="create-a-pool-from-a-custom-image-in-the-portal"></a><span data-ttu-id="f9433-173">Een pool maken van een aangepaste installatiekopie in de portal</span><span class="sxs-lookup"><span data-stu-id="f9433-173">Create a pool from a custom image in the portal</span></span>

<span data-ttu-id="f9433-174">Als u uw aangepaste installatiekopie hebt opgeslagen en u weet dat de locatie, kunt u een Batch-pool maken vanuit die installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="f9433-174">Once you have saved your custom image and you know its location, you can create a Batch pool from that image.</span></span> <span data-ttu-id="f9433-175">Volg deze stappen voor het maken van een pool van de Azure-portal:</span><span class="sxs-lookup"><span data-stu-id="f9433-175">Follow these steps to create a pool from the Azure portal:</span></span>

1. <span data-ttu-id="f9433-176">Ga in Azure Portal naar uw Batch-account.</span><span class="sxs-lookup"><span data-stu-id="f9433-176">Navigate to your Batch account in the Azure portal.</span></span> <span data-ttu-id="f9433-177">Dit account moet zich in hetzelfde abonnement en dezelfde regio als het opslagaccount met de aangepaste afbeelding.</span><span class="sxs-lookup"><span data-stu-id="f9433-177">This account must be in the same subscription and region as the storage account containing the custom image.</span></span> 
2. <span data-ttu-id="f9433-178">In de **instellingen** venster aan de linkerkant, selecteer de **Pools** menu-item.</span><span class="sxs-lookup"><span data-stu-id="f9433-178">In the **Settings** window on the left, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="f9433-179">In de **Pools** Selecteer de **toevoegen** opdracht.</span><span class="sxs-lookup"><span data-stu-id="f9433-179">In the **Pools** window, select the **Add** command.</span></span>
4. <span data-ttu-id="f9433-180">Op de **van toepassingen toevoegen** Selecteer **aangepaste installatiekopie (Linux/Windows)** van de **afbeeldingstype** vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="f9433-180">On the **Add Pool** window, select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="f9433-181">In de portal wordt de kiezer **Aangepaste installatiekopie** weergegeven.</span><span class="sxs-lookup"><span data-stu-id="f9433-181">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="f9433-182">Navigeer naar het opslagaccount waarin de aangepaste installatiekopie zich bevindt en selecteer de gewenste VHD in de container.</span><span class="sxs-lookup"><span data-stu-id="f9433-182">Navigate to the storage account where your custom image is located, and select the desired VHD from the container.</span></span> 
5. <span data-ttu-id="f9433-183">Selecteer de juiste **aanbieding-Publisher-Sku** voor uw aangepaste VHD.</span><span class="sxs-lookup"><span data-stu-id="f9433-183">Select the correct **Publisher/Offer/Sku** for your custom VHD.</span></span>
6. <span data-ttu-id="f9433-184">Geef de overige instellingen, inclusief vereist de **knooppuntgrootte**, **gericht op specifieke knooppunten**, en **knooppunten prioriteit laag**, maar ook een optionele instellingen gewenst.</span><span class="sxs-lookup"><span data-stu-id="f9433-184">Specify the remaining required settings, including the **Node size**, **Target dedicated nodes**, and **Low priority nodes**, as well as any desired optional settings.</span></span>

    <span data-ttu-id="f9433-185">Bijvoorbeeld: voor een aangepaste installatiekopie van de Microsoft Windows Server Datacenter 2016 de **van toepassingen toevoegen** venster wordt weergegeven als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="f9433-185">For example, for a Microsoft Windows Server Datacenter 2016 custom image, the **Add Pool** window appears as shown here:</span></span>

    ![Toepassingen toevoegen van aangepaste Windows-installatiekopie](media/batch-custom-images/add-pool-custom-image.png)
  
<span data-ttu-id="f9433-187">Als u wilt controleren of een bestaande pool is gebaseerd op een aangepaste installatiekopie, Zie de **besturingssysteem** eigenschap in de sectie voor de resource-samenvatting van de **groep** venster.</span><span class="sxs-lookup"><span data-stu-id="f9433-187">To check whether an existing pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** window.</span></span> <span data-ttu-id="f9433-188">Als de groep is gemaakt vanuit een aangepaste installatiekopie, is ingesteld op **aangepaste VM-installatiekopie**.</span><span class="sxs-lookup"><span data-stu-id="f9433-188">If the pool was created from a custom image, it is set to **Custom VM Image**.</span></span>

<span data-ttu-id="f9433-189">Alle aangepaste VHD's die zijn gekoppeld aan een groep worden weergegeven op de groep **eigenschappen** venster.</span><span class="sxs-lookup"><span data-stu-id="f9433-189">All custom VHDs associated with a pool are displayed on the pool's **Properties** window.</span></span>
 
## <a name="next-steps"></a><span data-ttu-id="f9433-190">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="f9433-190">Next steps</span></span>

- <span data-ttu-id="f9433-191">Zie voor een gedetailleerd overzicht van Batch [ontwikkelen grootschalige parallelle compute-oplossingen met Batch](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="f9433-191">For an in-depth overview of Batch, see [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md).</span></span>
- <span data-ttu-id="f9433-192">Zie voor meer informatie over het maken van een Batch-account [een Batch-account maken met de Azure portal](batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f9433-192">For information about creating a Batch account, see [Create a Batch account with the Azure portal](batch-account-create-portal.md).</span></span>