---
title: aaaAutomatically scale rekenknooppunten in een Azure Batch-pool | Microsoft Docs
description: Automatische schaling van inschakelen op een groep cloud toodynamically Hallo aantal rekenknooppunten in de pool Hallo aanpassen.
services: batch
documentationcenter: 
author: tamram
manager: timlt
editor: tysonn
ms.assetid: c624cdfc-c5f2-4d13-a7d7-ae080833b779
ms.service: batch
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: multiple
ms.date: 06/20/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6d1e0c5d8e0e56e15a4d3588150f2466a689f19
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="create-an-automatic-scaling-formula-for-scaling-compute-nodes-in-a-batch-pool"></a><span data-ttu-id="d2aa7-103">Een automatische schaling formule voor het schalen van rekenknooppunten in een Batch-pool maken</span><span class="sxs-lookup"><span data-stu-id="d2aa7-103">Create an automatic scaling formula for scaling compute nodes in a Batch pool</span></span>

<span data-ttu-id="d2aa7-104">Azure Batch kan pools op basis van de parameters die u definieert automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-104">Azure Batch can automatically scale pools based on parameters that you define.</span></span> <span data-ttu-id="d2aa7-105">Met automatisch schalen Batch dynamisch knooppunten tooa pool wordt toegevoegd als taak eisen toename en rekenknooppunten wordt verwijderd als ze afnemen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-105">With automatic scaling, Batch dynamically adds nodes tooa pool as task demands increase, and removes compute nodes as they decrease.</span></span> <span data-ttu-id="d2aa7-106">U kunt zowel tijd en geld opslaan door het aantal rekenknooppunten gebruikt door de Batch-toepassing hello automatisch aan te passen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-106">You can save both time and money by automatically adjusting hello number of compute nodes used by your Batch application.</span></span> 

<span data-ttu-id="d2aa7-107">Inschakelen van automatisch schalen op een pool van rekenknooppunten door te koppelen aan een *formule voor automatisch schalen* die u definieert.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-107">You enable automatic scaling on a pool of compute nodes by associating with it an *autoscale formula* that you define.</span></span> <span data-ttu-id="d2aa7-108">Hallo Batch-service gebruikt Hallo automatisch schalen formule toodetermine Hallo aantal rekenknooppunten die vereist tooexecute zijn uw workload.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-108">hello Batch service uses hello autoscale formula toodetermine hello number of compute nodes that are needed tooexecute your workload.</span></span> <span data-ttu-id="d2aa7-109">Knooppunten kunnen worden toegewezen knooppunten COMPUTE of [prioriteit Laag knooppunten](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-109">Compute nodes may be dedicated nodes or [low-priority nodes](batch-low-pri-vms.md).</span></span> <span data-ttu-id="d2aa7-110">Batch reageert tooservice metrische gegevens die regelmatig wordt verzameld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-110">Batch responds tooservice metrics data that is collected periodically.</span></span> <span data-ttu-id="d2aa7-111">Met deze metrische gegevens Batch aangepast Hallo aantal rekenknooppunten in Hallo-groep op basis van de formule en met een configureerbare interval.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-111">Using this metrics data, Batch adjusts hello number of compute nodes in hello pool based on your formula and at a configurable interval.</span></span>

<span data-ttu-id="d2aa7-112">U kunt inschakelen automatische schaling tijdens het maken van een groep of op een bestaande toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-112">You can enable automatic scaling either when a pool is created, or on an existing pool.</span></span> <span data-ttu-id="d2aa7-113">U kunt ook een bestaande formule op een groep die is geconfigureerd voor automatisch schalen wijzigen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-113">You can also change an existing formula on a pool that is configured for autoscaling.</span></span> <span data-ttu-id="d2aa7-114">Batch kunt u tooevaluate formules voordat het toewijzen van toopools en toomonitor Hallo-status van de automatische schaling wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-114">Batch enables you tooevaluate your formulas before assigning them toopools and toomonitor hello status of automatic scaling runs.</span></span>

<span data-ttu-id="d2aa7-115">Dit artikel wordt beschreven Hallo verschillende entiteiten die gezamenlijk uw formules automatisch schalen, met inbegrip van variabelen, operators, bewerkingen en functies.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-115">This article discusses hello various entities that make up your autoscale formulas, including variables, operators, operations, and functions.</span></span> <span data-ttu-id="d2aa7-116">Bespreken we hoe tooobtain verschillende compute resource en taak metrische gegevens in Batch.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-116">We discuss how tooobtain various compute resource and task metrics within Batch.</span></span> <span data-ttu-id="d2aa7-117">U kunt deze metrische gegevens tooadjust aantal van de knooppunten van de groep op basis van gebruiks- en resourcestatus gebruiken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-117">You can use these metrics tooadjust your pool's node count based on resource usage and task status.</span></span> <span data-ttu-id="d2aa7-118">Vervolgens wordt beschreven hoe een formule tooconstruct en schakel automatisch vergroten / verkleinen op een groep met behulp van beide Hallo Batch REST en .NET API's.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-118">We then describe how tooconstruct a formula and enable automatic scaling on a pool by using both hello Batch REST and .NET APIs.</span></span> <span data-ttu-id="d2aa7-119">Ten slotte voltooien we met een paar voorbeeld formules.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-119">Finally, we finish up with a few example formulas.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d2aa7-120">Wanneer u een Batch-account maakt, kunt u Hallo [accountconfiguratie](batch-api-basics.md#account), waarmee wordt bepaald of groepen in een Batch-service-abonnement (Hallo standaard), of in uw gebruikerabonnement zijn toegewezen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-120">When you create a Batch account, you can specify hello [account configuration](batch-api-basics.md#account), which determines whether pools are allocated in a Batch service subscription (hello default), or in your user subscription.</span></span> <span data-ttu-id="d2aa7-121">Als u uw Batch-account hebt gemaakt met de Batch-Service standaardconfiguratie hello, is uw account beperkt tooa kunt u het maximum aantal kernen die kunnen worden gebruikt voor verwerking.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-121">If you created your Batch account with hello default Batch Service configuration, then your account is limited tooa maximum number of cores that can be used for processing.</span></span> <span data-ttu-id="d2aa7-122">Hallo Batch-service schaalt rekenknooppunten alleen up toothat core limiet.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-122">hello Batch service scales compute nodes only up toothat core limit.</span></span> <span data-ttu-id="d2aa7-123">Om deze reden kan Hallo Batch-service niet Hallo doelaantal rekenknooppunten die zijn opgegeven met een formule voor automatisch schalen bereikt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-123">For this reason, hello Batch service may not reach hello target number of compute nodes specified by an autoscale formula.</span></span> <span data-ttu-id="d2aa7-124">Zie [quota en limieten voor hello Azure Batch-service](batch-quota-limit.md) voor informatie over het weergeven en uw accountquota verhogen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-124">See [Quotas and limits for hello Azure Batch service](batch-quota-limit.md) for information on viewing and increasing your account quotas.</span></span>
>
><span data-ttu-id="d2aa7-125">Als u uw account hebt gemaakt met de configuratie van de gebruikerabonnement Hallo, vervolgens deelt uw account in Hallo kerngeheugenquotum voor Hallo-abonnement.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-125">If you created your account with hello User Subscription configuration, then your account shares in hello core quota for hello subscription.</span></span> <span data-ttu-id="d2aa7-126">Zie [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) (Limieten voor Virtuele Machines) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md) (Azure-abonnement en servicelimieten, -quota en -beperkingen) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-126">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

## <a name="automatic-scaling-formulas"></a><span data-ttu-id="d2aa7-127">Automatische schaling formules</span><span class="sxs-lookup"><span data-stu-id="d2aa7-127">Automatic scaling formulas</span></span>
<span data-ttu-id="d2aa7-128">Een formule voor automatisch schalen is een string-waarde die u definieert die een of meer instructies bevat.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-128">An automatic scaling formula is a string value that you define that contains one or more statements.</span></span> <span data-ttu-id="d2aa7-129">Hallo-formule voor automatisch schalen van tooa pool is toegewezen [autoScaleFormula] [ rest_autoscaleformula] element (Batch REST) of [CloudPool.AutoScaleFormula] [ net_cloudpool_autoscaleformula] de eigenschap (Batch .NET).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-129">hello autoscale formula is assigned tooa pool's [autoScaleFormula][rest_autoscaleformula] element (Batch REST) or [CloudPool.AutoScaleFormula][net_cloudpool_autoscaleformula] property (Batch .NET).</span></span> <span data-ttu-id="d2aa7-130">Hallo Batch-service gebruikt uw formule toodetermine Hallo doelaantal rekenknooppunten in de groep Hallo voor de volgende interval hello wordt verwerkt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-130">hello Batch service uses your formula toodetermine hello target number of compute nodes in hello pool for hello next interval of processing.</span></span> <span data-ttu-id="d2aa7-131">Hallo formule tekenreeks mag niet meer dan 8 KB, up too100 instructies die worden gescheiden door puntkomma's en kunnen regeleinden en -opmerkingen bevatten kunt opnemen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-131">hello formula string cannot exceed 8 KB, can include up too100 statements that are separated by semicolons, and can include line breaks and comments.</span></span>

<span data-ttu-id="d2aa7-132">U kunt automatische schaling formules beschouwen als een Batch automatisch schalen 'taal'.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-132">You can think of automatic scaling formulas as a Batch autoscale "language."</span></span> <span data-ttu-id="d2aa7-133">Formule-instructies zijn gratis ingedeelde expressies die zowel de service gedefinieerde variabelen (variabelen die zijn gedefinieerd door Hallo Batch-service) als de gebruiker gedefinieerde variabelen (variabelen die u definieert) kunnen opnemen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-133">Formula statements are free-formed expressions that can include both service-defined variables (variables defined by hello Batch service) and user-defined variables (variables that you define).</span></span> <span data-ttu-id="d2aa7-134">Ze kunnen verschillende bewerkingen op deze waarden uitvoeren met behulp van de ingebouwde typen, operators en functies.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-134">They can perform various operations on these values by using built-in types, operators, and functions.</span></span> <span data-ttu-id="d2aa7-135">Een instructie duurt bijvoorbeeld Hallo formulier te volgen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-135">For example, a statement might take hello following form:</span></span>

```
$myNewVariable = function($ServiceDefinedVariable, $myCustomVariable);
```

<span data-ttu-id="d2aa7-136">Formules bevatten doorgaans meerdere instructies die bewerkingen uitvoeren op waarden die zijn verkregen in de vorige instructies.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-136">Formulas generally contain multiple statements that perform operations on values that are obtained in previous statements.</span></span> <span data-ttu-id="d2aa7-137">Bijvoorbeeld, eerst we een waarde voor aanvragen `variable1`, geeft u het tooa functie toopopulate `variable2`:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-137">For example, first we obtain a value for `variable1`, then pass it tooa function toopopulate `variable2`:</span></span>

```
$variable1 = function1($ServiceDefinedVariable);
$variable2 = function2($OtherServiceDefinedVariable, $variable1);
```

<span data-ttu-id="d2aa7-138">Deze instructies opnemen in uw formule tooarrive automatisch schalen op een doel-nummer van rekenknooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-138">Include these statements in your autoscale formula tooarrive at a target number of compute nodes.</span></span> <span data-ttu-id="d2aa7-139">Toegewezen knooppunten en knooppunten met lage prioriteit hebben hun eigen doelinstellingen zodat u kunt een doel voor elk type knooppunt definiëren.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-139">Dedicated nodes and low-priority nodes each have their own target settings, so that you can define a target for each type of node.</span></span> <span data-ttu-id="d2aa7-140">Een formule voor automatisch schalen kan een doelwaarde voor speciale knooppunten of een doelwaarde voor prioriteit Laag knooppunten bevatten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-140">An autoscale formula can include a target value for dedicated nodes, a target value for low-priority nodes, or both.</span></span>

<span data-ttu-id="d2aa7-141">Hallo doelaantal knooppunten mogelijk hogere en lagere of gelijk zijn aan het huidige aantal knooppunten van dat type in de groep Hallo HALLO hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-141">hello target number of nodes may be higher, lower, or hello same as hello current number of nodes of that type in hello pool.</span></span> <span data-ttu-id="d2aa7-142">Batch evalueert formule voor een pool automatisch schalen met een bepaald interval (Zie [automatisch vergroten / verkleinen intervallen](#automatic-scaling-interval)).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-142">Batch evaluates a pool's autoscale formula at a specific interval (see [automatic scaling intervals](#automatic-scaling-interval)).</span></span> <span data-ttu-id="d2aa7-143">Batch aangepast Hallo doelaantal van elk type van de knooppunten in Hallo groep toohello waarde waarmee de formule voor automatisch schalen op Hallo moment van evaluatie.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-143">Batch adjusts hello target number of each type of node in hello pool toohello number that your autoscale formula specifies at hello time of evaluation.</span></span>

### <a name="sample-autoscale-formula"></a><span data-ttu-id="d2aa7-144">Formule voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-144">Sample autoscale formula</span></span>

<span data-ttu-id="d2aa7-145">Hier volgt een voorbeeld van een formule voor automatisch schalen die aangepast toowork voor de meeste scenario's worden kan.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-145">Here is an example of an autoscale formula that can be adjusted toowork for most scenarios.</span></span> <span data-ttu-id="d2aa7-146">Hallo variabelen `startingNumberOfVMs` en `maxNumberofVMs` in Hallo voorbeeldformule worden aangepaste tooyour behoeften.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-146">hello variables `startingNumberOfVMs` and `maxNumberofVMs` in hello example formula can be adjusted tooyour needs.</span></span> <span data-ttu-id="d2aa7-147">Deze formule schaalt toegewezen knooppunten, maar het gewijzigde tooapply tooscale prioriteit laag ook knooppunten kan worden.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-147">This formula scales dedicated nodes, but can be modified tooapply tooscale low-priority nodes as well.</span></span> 

```
startingNumberOfVMs = 1;
maxNumberofVMs = 25;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);
```

<span data-ttu-id="d2aa7-148">Met deze formule voor automatisch schalen Hallo van toepassingen in eerste instantie gemaakt met een enkele virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-148">With this autoscale formula, hello pool is initially created with a single VM.</span></span> <span data-ttu-id="d2aa7-149">Hallo `$PendingTasks` metriek definieert Hallo aantal taken die uitgevoerd of in de wachtrij zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-149">hello `$PendingTasks` metric defines hello number of tasks that are running or queued.</span></span> <span data-ttu-id="d2aa7-150">Hallo formule Hallo gemiddelde aantal in behandeling zijnde taken vindt in Hallo afgelopen 180 seconden en stelt Hallo `$TargetDedicatedNodes` variabele dienovereenkomstig.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-150">hello formula finds hello average number of pending tasks in hello last 180 seconds and sets hello `$TargetDedicatedNodes` variable accordingly.</span></span> <span data-ttu-id="d2aa7-151">Hallo formule zorgt ervoor dat Hallo doelaantal knooppunten toegewezen nooit meer dan 25 virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-151">hello formula ensures that hello target number of dedicated nodes never exceeds 25 VMs.</span></span> <span data-ttu-id="d2aa7-152">Als nieuwe taken worden verzonden, wordt automatisch Hallo groep groeit.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-152">As new tasks are submitted, hello pool automatically grows.</span></span> <span data-ttu-id="d2aa7-153">Als taken zijn voltooid, virtuele machines worden gratis één voor één en formule voor automatisch schalen Hallo Hallo groep wordt verkleind.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-153">As tasks complete, VMs become free one by one and hello autoscaling formula shrinks hello pool.</span></span>

## <a name="variables"></a><span data-ttu-id="d2aa7-154">Variabelen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-154">Variables</span></span>
<span data-ttu-id="d2aa7-155">U kunt beide **service gedefinieerde** en **gebruiker gedefinieerde** variabelen in formules automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-155">You can use both **service-defined** and **user-defined** variables in your autoscale formulas.</span></span> <span data-ttu-id="d2aa7-156">Hallo service gedefinieerde variabelen zijn ingebouwd in toohello Batch-service.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-156">hello service-defined variables are built in toohello Batch service.</span></span> <span data-ttu-id="d2aa7-157">Sommige service gedefinieerde variabelen zijn alleen-lezen en sommige alleen-lezen zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-157">Some service-defined variables are read-write, and some are read-only.</span></span> <span data-ttu-id="d2aa7-158">Gebruiker gedefinieerde variabelen zijn variabelen die u definieert.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-158">User-defined variables are variables that you define.</span></span> <span data-ttu-id="d2aa7-159">In Hallo voorbeeldformule weergegeven in de vorige sectie hello, `$TargetDedicatedNodes` en `$PendingTasks` service gedefinieerde variabelen zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-159">In hello example formula shown in hello previous section, `$TargetDedicatedNodes` and `$PendingTasks` are service-defined variables.</span></span> <span data-ttu-id="d2aa7-160">Variabelen `startingNumberOfVMs` en `maxNumberofVMs` zijn van de gebruiker gedefinieerde variabelen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-160">Variables `startingNumberOfVMs` and `maxNumberofVMs` are user-defined variables.</span></span>

> [!NOTE]
> <span data-ttu-id="d2aa7-161">Service gedefinieerde variabelen worden altijd voorafgegaan door een dollarteken ($).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-161">Service-defined variables are always preceded by a dollar sign ($).</span></span> <span data-ttu-id="d2aa7-162">Hallo dollarteken is voor de gebruiker gedefinieerde variabelen, optioneel.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-162">For user-defined variables, hello dollar sign is optional.</span></span>
>
>

<span data-ttu-id="d2aa7-163">Hallo volgende tabellen ziet u beide lezen-schrijven en alleen-lezen-variabelen die zijn gedefinieerd door Hallo Batch-service.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-163">hello following tables show both read-write and read-only variables that are defined by hello Batch service.</span></span>

<span data-ttu-id="d2aa7-164">U kunt ophalen en het instellen van de Hallo waarden van deze service gedefinieerde variabelen toomanage Hallo aantal rekenknooppunten in een groep:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-164">You can get and set hello values of these service-defined variables toomanage hello number of compute nodes in a pool:</span></span>

| <span data-ttu-id="d2aa7-165">Lees-/ service gedefinieerde variabelen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-165">Read-write service-defined variables</span></span> | <span data-ttu-id="d2aa7-166">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d2aa7-166">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d2aa7-167">$TargetDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-167">$TargetDedicatedNodes</span></span> |<span data-ttu-id="d2aa7-168">Hallo doelaantal toegewezen rekenknooppunten voor Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-168">hello target number of dedicated compute nodes for hello pool.</span></span> <span data-ttu-id="d2aa7-169">Hallo aantal toegewezen knooppunten is opgegeven als een doel omdat een groep van toepassingen mogelijk niet altijd worden bereikt Hallo gewenst aantal knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-169">hello number of dedicated nodes is specified as a target because a pool may not always achieve hello desired number of nodes.</span></span> <span data-ttu-id="d2aa7-170">Als Hallo doelaantal knooppunten toegewezen wordt gewijzigd door een evaluatie met automatisch schalen voordat Hallo groep Hallo initiële doel heeft bereikt en Hallo van toepassingen mogelijk Hallo doel niet bereiken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-170">For example, if hello target number of dedicated nodes is modified by an autoscale evaluation before hello pool has reached hello initial target, then hello pool may not reach hello target.</span></span> <br /><br /> <span data-ttu-id="d2aa7-171">Een groep in een account dat is gemaakt met Hallo Batch-Service-configuratie kan niet het doel bereiken als Hallo doel een Batch-account knooppunt of core-quota overschrijdt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-171">A pool in an account created with hello Batch Service configuration may not achieve its target if hello target exceeds a Batch account node or core quota.</span></span> <span data-ttu-id="d2aa7-172">Een groep in een account dat is gemaakt met de configuratie van de Hallo-abonnement van de gebruiker kan het doel niet bereiken als doel Hallo Hallo gedeeld kerngeheugenquotum voor Hallo abonnement overschrijdt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-172">A pool in an account created with hello User Subscription configuration may not achieve its target if hello target exceeds hello shared core quota for hello subscription.</span></span>|
| <span data-ttu-id="d2aa7-173">$TargetLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-173">$TargetLowPriorityNodes</span></span> |<span data-ttu-id="d2aa7-174">Hallo doelaantal prioriteit Laag rekenknooppunten voor Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-174">hello target number of low-priority compute nodes for hello pool.</span></span> <span data-ttu-id="d2aa7-175">Hallo aantal knooppunten dat prioriteit laag is opgegeven als een doel omdat een groep van toepassingen mogelijk niet altijd worden bereikt Hallo gewenst aantal knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-175">hello number of low-priority nodes is specified as a target because a pool may not always achieve hello desired number of nodes.</span></span> <span data-ttu-id="d2aa7-176">Als Hallo doelaantal knooppunten prioriteit laag wordt gewijzigd door een evaluatie met automatisch schalen voordat Hallo groep Hallo initiële doel heeft bereikt en Hallo van toepassingen mogelijk Hallo doel niet bereiken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-176">For example, if hello target number of low-priority nodes is modified by an autoscale evaluation before hello pool has reached hello initial target, then hello pool may not reach hello target.</span></span> <span data-ttu-id="d2aa7-177">Een pool kan ook niet het doel bereiken als Hallo doel een Batch-account knooppunt of core-quota overschrijdt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-177">A pool may also not achieve its target if hello target exceeds a Batch account node or core quota.</span></span> <br /><br /> <span data-ttu-id="d2aa7-178">Zie voor meer informatie op prioriteit Laag rekenknooppunten [met lage prioriteit virtuele machines, met Batch (Preview)](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-178">For more information on low-priority compute nodes, see [Use low-priority VMs with Batch (Preview)](batch-low-pri-vms.md).</span></span> |
| <span data-ttu-id="d2aa7-179">$NodeDeallocationOption</span><span class="sxs-lookup"><span data-stu-id="d2aa7-179">$NodeDeallocationOption</span></span> |<span data-ttu-id="d2aa7-180">Hallo-actie die optreedt wanneer de rekenknooppunten worden verwijderd uit een groep.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-180">hello action that occurs when compute nodes are removed from a pool.</span></span> <span data-ttu-id="d2aa7-181">Mogelijke waarden zijn:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-181">Possible values are:</span></span><ul><li><span data-ttu-id="d2aa7-182">**requeue**--taken onmiddellijk beëindigd en weer in de taakwachtrij Hallo plaatst, zodat ze opnieuw worden gepland.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-182">**requeue**--Terminates tasks immediately and puts them back on hello job queue so that they are rescheduled.</span></span><li><span data-ttu-id="d2aa7-183">**beëindigen**--taken onmiddellijk beëindigd en worden deze verwijderd uit de wachtrij Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-183">**terminate**--Terminates tasks immediately and removes them from hello job queue.</span></span><li><span data-ttu-id="d2aa7-184">**taskcompletion**--wacht voor actief toofinish taken en Hallo knooppunt uit Hallo van toepassingen verwijdert.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-184">**taskcompletion**--Waits for currently running tasks toofinish and then removes hello node from hello pool.</span></span><li><span data-ttu-id="d2aa7-185">**retaineddata**--wacht op alle Hallo lokale taak bewaard gegevens op Hallo knooppunt toobe opgeruimd voordat het Hallo-knooppunt wordt verwijderd uit het Hallo-groep.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-185">**retaineddata**--Waits for all hello local task-retained data on hello node toobe cleaned up before removing hello node from hello pool.</span></span></ul> |

<span data-ttu-id="d2aa7-186">U kunt Hallo-waarde van deze service gedefinieerde variabelen toomake aanpassingen die zijn gebaseerd op metrische gegevens van de Batch-service Hallo krijgen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-186">You can get hello value of these service-defined variables toomake adjustments that are based on metrics from hello Batch service:</span></span>

| <span data-ttu-id="d2aa7-187">Alleen-lezen service gedefinieerde variabelen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-187">Read-only service-defined variables</span></span> | <span data-ttu-id="d2aa7-188">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d2aa7-188">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d2aa7-189">$CPUPercent</span><span class="sxs-lookup"><span data-stu-id="d2aa7-189">$CPUPercent</span></span> |<span data-ttu-id="d2aa7-190">Hallo gemiddelde percentage van CPU-gebruik.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-190">hello average percentage of CPU usage.</span></span> |
| <span data-ttu-id="d2aa7-191">$WallClockSeconds</span><span class="sxs-lookup"><span data-stu-id="d2aa7-191">$WallClockSeconds</span></span> |<span data-ttu-id="d2aa7-192">Hallo aantal seconden verbruikt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-192">hello number of seconds consumed.</span></span> |
| <span data-ttu-id="d2aa7-193">$MemoryBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-193">$MemoryBytes</span></span> |<span data-ttu-id="d2aa7-194">Hallo gemiddelde aantal megabytes gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-194">hello average number of megabytes used.</span></span> |
| <span data-ttu-id="d2aa7-195">$DiskBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-195">$DiskBytes</span></span> |<span data-ttu-id="d2aa7-196">Hallo gemiddelde aantal gigabytes op Hallo lokale schijven gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-196">hello average number of gigabytes used on hello local disks.</span></span> |
| <span data-ttu-id="d2aa7-197">$DiskReadBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-197">$DiskReadBytes</span></span> |<span data-ttu-id="d2aa7-198">Hallo aantal gelezen bytes.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-198">hello number of bytes read.</span></span> |
| <span data-ttu-id="d2aa7-199">$DiskWriteBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-199">$DiskWriteBytes</span></span> |<span data-ttu-id="d2aa7-200">Hallo aantal geschreven bytes.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-200">hello number of bytes written.</span></span> |
| <span data-ttu-id="d2aa7-201">$DiskReadOps</span><span class="sxs-lookup"><span data-stu-id="d2aa7-201">$DiskReadOps</span></span> |<span data-ttu-id="d2aa7-202">aantal gelezen schijfbewerkingen Hallo uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-202">hello count of read disk operations performed.</span></span> |
| <span data-ttu-id="d2aa7-203">$DiskWriteOps</span><span class="sxs-lookup"><span data-stu-id="d2aa7-203">$DiskWriteOps</span></span> |<span data-ttu-id="d2aa7-204">Hallo aantal schijf schrijfbewerkingen uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-204">hello count of write disk operations performed.</span></span> |
| <span data-ttu-id="d2aa7-205">$NetworkInBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-205">$NetworkInBytes</span></span> |<span data-ttu-id="d2aa7-206">Hallo aantal binnenkomende bytes.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-206">hello number of inbound bytes.</span></span> |
| <span data-ttu-id="d2aa7-207">$NetworkOutBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-207">$NetworkOutBytes</span></span> |<span data-ttu-id="d2aa7-208">Hallo aantal uitgaande bytes.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-208">hello number of outbound bytes.</span></span> |
| <span data-ttu-id="d2aa7-209">$SampleNodeCount</span><span class="sxs-lookup"><span data-stu-id="d2aa7-209">$SampleNodeCount</span></span> |<span data-ttu-id="d2aa7-210">Hallo aantal rekenknooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-210">hello count of compute nodes.</span></span> |
| <span data-ttu-id="d2aa7-211">$ActiveTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-211">$ActiveTasks</span></span> |<span data-ttu-id="d2aa7-212">Hallo aantal taken die gereed tooexecute zijn, maar nog niet zijn uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-212">hello number of tasks that are ready tooexecute but are not yet executing.</span></span> <span data-ttu-id="d2aa7-213">Hallo $ActiveTasks aantal bevat alle taken die zijn Hallo actieve status heeft en waarvan afhankelijkheden is voldaan.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-213">hello $ActiveTasks count includes all tasks that are in hello active state and whose dependencies have been satisfied.</span></span> <span data-ttu-id="d2aa7-214">Alle taken die zich in de actieve status Hallo maar waarvan afhankelijkheden niet is voldaan, worden uitgesloten van Hallo $ActiveTasks count.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-214">Any tasks that are in hello active state but whose dependencies have not been satisfied are excluded from hello $ActiveTasks count.</span></span>|
| <span data-ttu-id="d2aa7-215">$RunningTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-215">$RunningTasks</span></span> |<span data-ttu-id="d2aa7-216">Hallo aantal taken actief is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-216">hello number of tasks in a running state.</span></span> |
| <span data-ttu-id="d2aa7-217">$PendingTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-217">$PendingTasks</span></span> |<span data-ttu-id="d2aa7-218">Hallo som van $ActiveTasks en $RunningTasks.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-218">hello sum of $ActiveTasks and $RunningTasks.</span></span> |
| <span data-ttu-id="d2aa7-219">$SucceededTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-219">$SucceededTasks</span></span> |<span data-ttu-id="d2aa7-220">Hallo aantal taken dat voltooid is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-220">hello number of tasks that finished successfully.</span></span> |
| <span data-ttu-id="d2aa7-221">$FailedTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-221">$FailedTasks</span></span> |<span data-ttu-id="d2aa7-222">Hallo aantal taken dat is mislukt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-222">hello number of tasks that failed.</span></span> |
| <span data-ttu-id="d2aa7-223">$CurrentDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-223">$CurrentDedicatedNodes</span></span> |<span data-ttu-id="d2aa7-224">Hallo Huidig aantal toegewezen rekenknooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-224">hello current number of dedicated compute nodes.</span></span> |
| <span data-ttu-id="d2aa7-225">$CurrentLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-225">$CurrentLowPriorityNodes</span></span> |<span data-ttu-id="d2aa7-226">Huidig aantal prioriteit Laag Hallo rekenknooppunten, met inbegrip van alle knooppunten die verschoven zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-226">hello current number of low-priority compute nodes, including any nodes that have been pre-empted.</span></span> |
| <span data-ttu-id="d2aa7-227">$PreemptedNodeCount</span><span class="sxs-lookup"><span data-stu-id="d2aa7-227">$PreemptedNodeCount</span></span> | <span data-ttu-id="d2aa7-228">Hallo aantal knooppunten in het Hallo-groep die zich in een status verschoven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-228">hello number of nodes in hello pool that are in a pre-empted state.</span></span> |

> [!TIP]
> <span data-ttu-id="d2aa7-229">Hallo alleen-lezen, service gedefinieerde variabelen die worden weergegeven in de vorige tabel Hallo zijn *objecten* die verschillende methoden tooaccess gegevens die zijn gekoppeld aan elk bieden.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-229">hello read-only, service-defined variables that are shown in hello previous table are *objects* that provide various methods tooaccess data associated with each.</span></span> <span data-ttu-id="d2aa7-230">Zie voor meer informatie [verkrijgen voorbeeldgegevens](#getsampledata) verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-230">For more information, see [Obtain sample data](#getsampledata) later in this article.</span></span>
>
>

## <a name="types"></a><span data-ttu-id="d2aa7-231">Typen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-231">Types</span></span>
<span data-ttu-id="d2aa7-232">Deze typen worden ondersteund in een formule:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-232">These types are supported in a formula:</span></span>

* <span data-ttu-id="d2aa7-233">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-233">double</span></span>
* <span data-ttu-id="d2aa7-234">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-234">doubleVec</span></span>
* <span data-ttu-id="d2aa7-235">doubleVecList</span><span class="sxs-lookup"><span data-stu-id="d2aa7-235">doubleVecList</span></span>
* <span data-ttu-id="d2aa7-236">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-236">string</span></span>
* <span data-ttu-id="d2aa7-237">tijdstempel--tijdstempel is een samengestelde structuur die Hallo volgende leden bevat:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-237">timestamp--timestamp is a compound structure that contains hello following members:</span></span>

  * <span data-ttu-id="d2aa7-238">jaar</span><span class="sxs-lookup"><span data-stu-id="d2aa7-238">year</span></span>
  * <span data-ttu-id="d2aa7-239">maand (1-12)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-239">month (1-12)</span></span>
  * <span data-ttu-id="d2aa7-240">dag (1-31)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-240">day (1-31)</span></span>
  * <span data-ttu-id="d2aa7-241">werkdag (Hallo-indeling van het nummer; bijvoorbeeld: 1 voor maandag)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-241">weekday (in hello format of number; for example, 1 for Monday)</span></span>
  * <span data-ttu-id="d2aa7-242">uur (in 24-uurs notatie, bijvoorbeeld: 13 betekent 1 uur)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-242">hour (in 24-hour number format; for example, 13 means 1 PM)</span></span>
  * <span data-ttu-id="d2aa7-243">minuten (00-59)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-243">minute (00-59)</span></span>
  * <span data-ttu-id="d2aa7-244">tweede (00-59)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-244">second (00-59)</span></span>
* <span data-ttu-id="d2aa7-245">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-245">timeinterval</span></span>

  * <span data-ttu-id="d2aa7-246">TimeInterval_Zero</span><span class="sxs-lookup"><span data-stu-id="d2aa7-246">TimeInterval_Zero</span></span>
  * <span data-ttu-id="d2aa7-247">TimeInterval_100ns</span><span class="sxs-lookup"><span data-stu-id="d2aa7-247">TimeInterval_100ns</span></span>
  * <span data-ttu-id="d2aa7-248">TimeInterval_Microsecond</span><span class="sxs-lookup"><span data-stu-id="d2aa7-248">TimeInterval_Microsecond</span></span>
  * <span data-ttu-id="d2aa7-249">TimeInterval_Millisecond</span><span class="sxs-lookup"><span data-stu-id="d2aa7-249">TimeInterval_Millisecond</span></span>
  * <span data-ttu-id="d2aa7-250">TimeInterval_Second</span><span class="sxs-lookup"><span data-stu-id="d2aa7-250">TimeInterval_Second</span></span>
  * <span data-ttu-id="d2aa7-251">TimeInterval_Minute</span><span class="sxs-lookup"><span data-stu-id="d2aa7-251">TimeInterval_Minute</span></span>
  * <span data-ttu-id="d2aa7-252">TimeInterval_Hour</span><span class="sxs-lookup"><span data-stu-id="d2aa7-252">TimeInterval_Hour</span></span>
  * <span data-ttu-id="d2aa7-253">TimeInterval_Day</span><span class="sxs-lookup"><span data-stu-id="d2aa7-253">TimeInterval_Day</span></span>
  * <span data-ttu-id="d2aa7-254">TimeInterval_Week</span><span class="sxs-lookup"><span data-stu-id="d2aa7-254">TimeInterval_Week</span></span>
  * <span data-ttu-id="d2aa7-255">TimeInterval_Year</span><span class="sxs-lookup"><span data-stu-id="d2aa7-255">TimeInterval_Year</span></span>

## <a name="operations"></a><span data-ttu-id="d2aa7-256">Bewerkingen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-256">Operations</span></span>
<span data-ttu-id="d2aa7-257">Deze bewerkingen zijn toegestaan op Hallo-typen die worden vermeld in de vorige sectie Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-257">These operations are allowed on hello types that are listed in hello previous section.</span></span>

| <span data-ttu-id="d2aa7-258">Bewerking</span><span class="sxs-lookup"><span data-stu-id="d2aa7-258">Operation</span></span> | <span data-ttu-id="d2aa7-259">Ondersteunde operators</span><span class="sxs-lookup"><span data-stu-id="d2aa7-259">Supported operators</span></span> | <span data-ttu-id="d2aa7-260">Resultaattype</span><span class="sxs-lookup"><span data-stu-id="d2aa7-260">Result type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d2aa7-261">dubbele *operator* dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-261">double *operator* double</span></span> |<span data-ttu-id="d2aa7-262">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="d2aa7-262">+, -, *, /</span></span> |<span data-ttu-id="d2aa7-263">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-263">double</span></span> |
| <span data-ttu-id="d2aa7-264">dubbele *operator* timeinterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-264">double *operator* timeinterval</span></span> |* |<span data-ttu-id="d2aa7-265">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-265">timeinterval</span></span> |
| <span data-ttu-id="d2aa7-266">doubleVec *operator* dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-266">doubleVec *operator* double</span></span> |<span data-ttu-id="d2aa7-267">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="d2aa7-267">+, -, *, /</span></span> |<span data-ttu-id="d2aa7-268">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-268">doubleVec</span></span> |
| <span data-ttu-id="d2aa7-269">doubleVec *operator* doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-269">doubleVec *operator* doubleVec</span></span> |<span data-ttu-id="d2aa7-270">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="d2aa7-270">+, -, *, /</span></span> |<span data-ttu-id="d2aa7-271">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-271">doubleVec</span></span> |
| <span data-ttu-id="d2aa7-272">TimeInterval *operator* dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-272">timeinterval *operator* double</span></span> |<span data-ttu-id="d2aa7-273">*, /</span><span class="sxs-lookup"><span data-stu-id="d2aa7-273">*, /</span></span> |<span data-ttu-id="d2aa7-274">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-274">timeinterval</span></span> |
| <span data-ttu-id="d2aa7-275">TimeInterval *operator* timeinterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-275">timeinterval *operator* timeinterval</span></span> |<span data-ttu-id="d2aa7-276">+, -</span><span class="sxs-lookup"><span data-stu-id="d2aa7-276">+, -</span></span> |<span data-ttu-id="d2aa7-277">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-277">timeinterval</span></span> |
| <span data-ttu-id="d2aa7-278">TimeInterval *operator* tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-278">timeinterval *operator* timestamp</span></span> |+ |<span data-ttu-id="d2aa7-279">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-279">timestamp</span></span> |
| <span data-ttu-id="d2aa7-280">tijdstempel *operator* timeinterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-280">timestamp *operator* timeinterval</span></span> |+ |<span data-ttu-id="d2aa7-281">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-281">timestamp</span></span> |
| <span data-ttu-id="d2aa7-282">tijdstempel *operator* tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-282">timestamp *operator* timestamp</span></span> |- |<span data-ttu-id="d2aa7-283">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-283">timeinterval</span></span> |
| <span data-ttu-id="d2aa7-284">*operator*dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-284">*operator*double</span></span> |<span data-ttu-id="d2aa7-285">-, !</span><span class="sxs-lookup"><span data-stu-id="d2aa7-285">-, !</span></span> |<span data-ttu-id="d2aa7-286">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-286">double</span></span> |
| <span data-ttu-id="d2aa7-287">*operator*timeinterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-287">*operator*timeinterval</span></span> |- |<span data-ttu-id="d2aa7-288">TimeInterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-288">timeinterval</span></span> |
| <span data-ttu-id="d2aa7-289">dubbele *operator* dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-289">double *operator* double</span></span> |<span data-ttu-id="d2aa7-290"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="d2aa7-290"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="d2aa7-291">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-291">double</span></span> |
| <span data-ttu-id="d2aa7-292">tekenreeks *operator* tekenreeks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-292">string *operator* string</span></span> |<span data-ttu-id="d2aa7-293"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="d2aa7-293"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="d2aa7-294">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-294">double</span></span> |
| <span data-ttu-id="d2aa7-295">tijdstempel *operator* tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-295">timestamp *operator* timestamp</span></span> |<span data-ttu-id="d2aa7-296"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="d2aa7-296"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="d2aa7-297">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-297">double</span></span> |
| <span data-ttu-id="d2aa7-298">TimeInterval *operator* timeinterval</span><span class="sxs-lookup"><span data-stu-id="d2aa7-298">timeinterval *operator* timeinterval</span></span> |<span data-ttu-id="d2aa7-299"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="d2aa7-299"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="d2aa7-300">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-300">double</span></span> |
| <span data-ttu-id="d2aa7-301">dubbele *operator* dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-301">double *operator* double</span></span> |<span data-ttu-id="d2aa7-302">&&, &#124;&#124;</span><span class="sxs-lookup"><span data-stu-id="d2aa7-302">&&, &#124;&#124;</span></span> |<span data-ttu-id="d2aa7-303">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-303">double</span></span> |

<span data-ttu-id="d2aa7-304">Bij het testen van een Double-waarde met een ternaire operator (`double ? statement1 : statement2`), niet nul is **true**, en nul is **false**.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-304">When testing a double with a ternary operator (`double ? statement1 : statement2`), nonzero is **true**, and zero is **false**.</span></span>

## <a name="functions"></a><span data-ttu-id="d2aa7-305">Functies</span><span class="sxs-lookup"><span data-stu-id="d2aa7-305">Functions</span></span>
<span data-ttu-id="d2aa7-306">Deze vooraf gedefinieerde **functies** zijn beschikbaar voor toouse bij het definiëren van een formule voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-306">These predefined **functions** are available for you toouse in defining an automatic scaling formula.</span></span>

| <span data-ttu-id="d2aa7-307">Functie</span><span class="sxs-lookup"><span data-stu-id="d2aa7-307">Function</span></span> | <span data-ttu-id="d2aa7-308">Retourtype</span><span class="sxs-lookup"><span data-stu-id="d2aa7-308">Return type</span></span> | <span data-ttu-id="d2aa7-309">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d2aa7-309">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d2aa7-310">Avg(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-310">avg(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-311">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-311">double</span></span> |<span data-ttu-id="d2aa7-312">Retourneert Hallo gemiddelde waarde van alle waarden in Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-312">Returns hello average value for all values in hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-313">Len(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-313">len(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-314">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-314">double</span></span> |<span data-ttu-id="d2aa7-315">Retourneert Hallo de lengte van Hallo-vector is gemaakt van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-315">Returns hello length of hello vector that is created from hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-316">LG(Double)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-316">lg(double)</span></span> |<span data-ttu-id="d2aa7-317">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-317">double</span></span> |<span data-ttu-id="d2aa7-318">Retourneert Hallo logboek grondtal 2 Hallo dubbele.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-318">Returns hello log base 2 of hello double.</span></span> |
| <span data-ttu-id="d2aa7-319">LG(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-319">lg(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-320">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-320">doubleVec</span></span> |<span data-ttu-id="d2aa7-321">Hallo component-wise logboek retourneert grondtal 2 van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-321">Returns hello component-wise log base 2 of hello doubleVecList.</span></span> <span data-ttu-id="d2aa7-322">Een vec(double) moet expliciet voor Hallo-parameter worden doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-322">A vec(double) must be explicitly passed for hello parameter.</span></span> <span data-ttu-id="d2aa7-323">Anders wordt Hallo dubbele lg(double) versie verondersteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-323">Otherwise, hello double lg(double) version is assumed.</span></span> |
| <span data-ttu-id="d2aa7-324">ln(Double)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-324">ln(double)</span></span> |<span data-ttu-id="d2aa7-325">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-325">double</span></span> |<span data-ttu-id="d2aa7-326">Retourneert Hallo natuurlijke logboek van dubbele Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-326">Returns hello natural log of hello double.</span></span> |
| <span data-ttu-id="d2aa7-327">ln(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-327">ln(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-328">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-328">doubleVec</span></span> |<span data-ttu-id="d2aa7-329">Hallo component-wise logboek retourneert grondtal 2 van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-329">Returns hello component-wise log base 2 of hello doubleVecList.</span></span> <span data-ttu-id="d2aa7-330">Een vec(double) moet expliciet voor Hallo-parameter worden doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-330">A vec(double) must be explicitly passed for hello parameter.</span></span> <span data-ttu-id="d2aa7-331">Anders wordt Hallo dubbele lg(double) versie verondersteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-331">Otherwise, hello double lg(double) version is assumed.</span></span> |
| <span data-ttu-id="d2aa7-332">log(Double)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-332">log(double)</span></span> |<span data-ttu-id="d2aa7-333">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-333">double</span></span> |<span data-ttu-id="d2aa7-334">Retourneert Hallo logboek grondtal 10 van Hallo dubbele.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-334">Returns hello log base 10 of hello double.</span></span> |
| <span data-ttu-id="d2aa7-335">log(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-335">log(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-336">doubleVec</span><span class="sxs-lookup"><span data-stu-id="d2aa7-336">doubleVec</span></span> |<span data-ttu-id="d2aa7-337">Hallo component-wise logboek retourneert grondtal 10 van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-337">Returns hello component-wise log base 10 of hello doubleVecList.</span></span> <span data-ttu-id="d2aa7-338">Een vec(double) moet expliciet voor Hallo enkele dubbele parameter worden doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-338">A vec(double) must be explicitly passed for hello single double parameter.</span></span> <span data-ttu-id="d2aa7-339">Anders wordt Hallo dubbele log(double) versie verondersteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-339">Otherwise, hello double log(double) version is assumed.</span></span> |
| <span data-ttu-id="d2aa7-340">Max(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-340">max(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-341">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-341">double</span></span> |<span data-ttu-id="d2aa7-342">Retourneert Hallo de maximumwaarde in Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-342">Returns hello maximum value in hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-343">min(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-343">min(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-344">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-344">double</span></span> |<span data-ttu-id="d2aa7-345">Retourneert Hallo de minimumwaarde in Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-345">Returns hello minimum value in hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-346">norm(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-346">norm(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-347">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-347">double</span></span> |<span data-ttu-id="d2aa7-348">Retourneert Hallo twee-norm van Hallo-vector is gemaakt van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-348">Returns hello two-norm of hello vector that is created from hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-349">percentiel (v doubleVec, dubbele p)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-349">percentile(doubleVec v, double p)</span></span> |<span data-ttu-id="d2aa7-350">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-350">double</span></span> |<span data-ttu-id="d2aa7-351">Retourneert Hallo percentiel element van het Hallo-vector v.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-351">Returns hello percentile element of hello vector v.</span></span> |
| <span data-ttu-id="d2aa7-352">ASELECT()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-352">rand()</span></span> |<span data-ttu-id="d2aa7-353">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-353">double</span></span> |<span data-ttu-id="d2aa7-354">Retourneert een willekeurige waarde tussen 0,0 en 1,0 liggen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-354">Returns a random value between 0.0 and 1.0.</span></span> |
| <span data-ttu-id="d2aa7-355">Range(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-355">range(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-356">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-356">double</span></span> |<span data-ttu-id="d2aa7-357">Retourneert Hallo verschil tussen Hallo min en max-waarden in Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-357">Returns hello difference between hello min and max values in hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-358">Std(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-358">std(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-359">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-359">double</span></span> |<span data-ttu-id="d2aa7-360">Retourneert Hallo de standaarddeviatie van de steekproef van waarden in Hallo doubleVecList Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-360">Returns hello sample standard deviation of hello values in hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-361">Stop()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-361">stop()</span></span> | |<span data-ttu-id="d2aa7-362">Evaluatie van Hallo automatisch schalen expressie stopt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-362">Stops evaluation of hello autoscaling expression.</span></span> |
| <span data-ttu-id="d2aa7-363">SUM(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-363">sum(doubleVecList)</span></span> |<span data-ttu-id="d2aa7-364">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-364">double</span></span> |<span data-ttu-id="d2aa7-365">Retourneert Hallo de som van alle onderdelen van de Hallo van Hallo doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-365">Returns hello sum of all hello components of hello doubleVecList.</span></span> |
| <span data-ttu-id="d2aa7-366">tijd (string, dateTime = "")</span><span class="sxs-lookup"><span data-stu-id="d2aa7-366">time(string dateTime="")</span></span> |<span data-ttu-id="d2aa7-367">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="d2aa7-367">timestamp</span></span> |<span data-ttu-id="d2aa7-368">Retourneert de tijdstempel Hallo Hallo huidige tijd als er geen parameters worden doorgegeven of tijdstempel van een datum/tijd-tekenreeks Hallo Hallo als deze wordt doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-368">Returns hello time stamp of hello current time if no parameters are passed, or hello time stamp of hello dateTime string if it is passed.</span></span> <span data-ttu-id="d2aa7-369">Ondersteunde datum-/ tijdindelingen zijn W3C-DTF- en RFC 1123.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-369">Supported dateTime formats are W3C-DTF and RFC 1123.</span></span> |
| <span data-ttu-id="d2aa7-370">waarde opnemen (v doubleVec, dubbele i)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-370">val(doubleVec v, double i)</span></span> |<span data-ttu-id="d2aa7-371">dubbele</span><span class="sxs-lookup"><span data-stu-id="d2aa7-371">double</span></span> |<span data-ttu-id="d2aa7-372">Retourneert de waarde Hallo van Hallo-element dat is op locatie i in vector v, met een startIndex gelijk is aan nul.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-372">Returns hello value of hello element that is at location i in vector v, with a starting index of zero.</span></span> |

<span data-ttu-id="d2aa7-373">Sommige Hallo-functies die worden beschreven in de vorige tabel Hallo kan een lijst accepteren als een argument.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-373">Some of hello functions that are described in hello previous table can accept a list as an argument.</span></span> <span data-ttu-id="d2aa7-374">Hallo door komma's gescheiden lijst is een combinatie van *dubbele* en *doubleVec*.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-374">hello comma-separated list is any combination of *double* and *doubleVec*.</span></span> <span data-ttu-id="d2aa7-375">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-375">For example:</span></span>

`doubleVecList := ( (double | doubleVec)+(, (double | doubleVec) )* )?`

<span data-ttu-id="d2aa7-376">Hallo *doubleVecList* waarde is geconverteerd tooa één *doubleVec* voordat de evaluatie.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-376">hello *doubleVecList* value is converted tooa single *doubleVec* before evaluation.</span></span> <span data-ttu-id="d2aa7-377">Bijvoorbeeld, als `v = [1,2,3]`, klikt u vervolgens het aanroepen van `avg(v)` gelijkwaardige toocalling is `avg(1,2,3)`.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-377">For example, if `v = [1,2,3]`, then calling `avg(v)` is equivalent toocalling `avg(1,2,3)`.</span></span> <span data-ttu-id="d2aa7-378">Het aanroepen van `avg(v, 7)` is gelijkwaardig toocalling `avg(1,2,3,7)`.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-378">Calling `avg(v, 7)` is equivalent toocalling `avg(1,2,3,7)`.</span></span>

## <span data-ttu-id="d2aa7-379"><a name="getsampledata"></a>Voorbeeldgegevens downloaden</span><span class="sxs-lookup"><span data-stu-id="d2aa7-379"><a name="getsampledata"></a>Obtain sample data</span></span>
<span data-ttu-id="d2aa7-380">Automatisch schalen formules fungeren op metrische gegevens (voorbeelden) die wordt geleverd door Hallo Batch-service.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-380">Autoscale formulas act on metrics data (samples) that is provided by hello Batch service.</span></span> <span data-ttu-id="d2aa7-381">Een formule groeit of krimpt poolgrootte op basis van Hallo die wordt verkregen van Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-381">A formula grows or shrinks pool size based on hello values that it obtains from hello service.</span></span> <span data-ttu-id="d2aa7-382">Hallo service gedefinieerde variabelen die zijn beschreven zijn eerder objecten die verschillende methoden tooaccess-gegevens die is gekoppeld aan dit object te bieden.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-382">hello service-defined variables that were described previously are objects that provide various methods tooaccess data that is associated with that object.</span></span> <span data-ttu-id="d2aa7-383">Hallo ziet volgende expressie u bijvoorbeeld een aanvraag tooget Hallo laatste vijf minuten van CPU-gebruik:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-383">For example, hello following expression shows a request tooget hello last five minutes of CPU usage:</span></span>

```
$CPUPercent.GetSample(TimeInterval_Minute * 5)
```

| <span data-ttu-id="d2aa7-384">Methode</span><span class="sxs-lookup"><span data-stu-id="d2aa7-384">Method</span></span> | <span data-ttu-id="d2aa7-385">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d2aa7-385">Description</span></span> |
| --- | --- |
| <span data-ttu-id="d2aa7-386">GetSample()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-386">GetSample()</span></span> |<span data-ttu-id="d2aa7-387">Hallo `GetSample()` methode retourneert een vector van voorbeelden van gegevens.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-387">hello `GetSample()` method returns a vector of data samples.</span></span><br/><br/><span data-ttu-id="d2aa7-388">Een voorbeeld is 30 seconden metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-388">A sample is 30 seconds worth of metrics data.</span></span> <span data-ttu-id="d2aa7-389">Voorbeelden zijn met andere woorden, elke 30 seconden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-389">In other words, samples are obtained every 30 seconds.</span></span> <span data-ttu-id="d2aa7-390">Maar zoals hieronder aangegeven, er is een vertraging tussen wanneer een voorbeeld van een worden verzameld en wanneer het beschikbaar tooa formule is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-390">But as noted below, there is a delay between when a sample is collected and when it is available tooa formula.</span></span> <span data-ttu-id="d2aa7-391">Als zodanig kunnen niet alle voorbeelden voor een bepaalde periode niet beschikbaar voor evaluatie van een formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-391">As such, not all samples for a given time period may be available for evaluation by a formula.</span></span><ul><li>`doubleVec GetSample(double count)`<br/><span data-ttu-id="d2aa7-392">Geeft het aantal steekproeven tooobtain van de meest recente Hallo-voorbeelden die zijn verzameld Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-392">Specifies hello number of samples tooobtain from hello most recent samples that were collected.</span></span><br/><br/><span data-ttu-id="d2aa7-393">`GetSample(1)`retourneert de laatste beschikbare voorbeeld Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-393">`GetSample(1)` returns hello last available sample.</span></span> <span data-ttu-id="d2aa7-394">Metrische gegevens zoals `$CPUPercent`, maar dit mag niet worden gebruikt omdat het onmogelijk tooknow *wanneer* Hallo voorbeeld is verzameld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-394">For metrics like `$CPUPercent`, however, this should not be used because it is impossible tooknow *when* hello sample was collected.</span></span> <span data-ttu-id="d2aa7-395">Kan het zijn recente of vanwege problemen met het systeem, kan het veel ouder zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-395">It might be recent, or, because of system issues, it might be much older.</span></span> <span data-ttu-id="d2aa7-396">Het is beter in dergelijke gevallen toouse een tijdsinterval zoals hieronder wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-396">It is better in such cases toouse a time interval as shown below.</span></span><li>`doubleVec GetSample((timestamp or timeinterval) startTime [, double samplePercent])`<br/><span data-ttu-id="d2aa7-397">Hiermee geeft u een tijdsbestek voor het verzamelen van voorbeeldgegevens.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-397">Specifies a time frame for gathering sample data.</span></span> <span data-ttu-id="d2aa7-398">Eventueel ook wordt hiermee aangegeven Hallo percentage van de voorbeelden die beschikbaar zijn in Hallo tijdsbestek aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-398">Optionally, it also specifies hello percentage of samples that must be available in hello requested time frame.</span></span><br/><br/><span data-ttu-id="d2aa7-399">`$CPUPercent.GetSample(TimeInterval_Minute * 10)`Voorbeelden van 20 zou worden geretourneerd als alle voorbeelden voor laatste 10 minuten Hallo aanwezig in Hallo CPUPercent geschiedenis zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-399">`$CPUPercent.GetSample(TimeInterval_Minute * 10)` would return 20 samples if all samples for hello last 10 minutes are present in hello CPUPercent history.</span></span> <span data-ttu-id="d2aa7-400">Als Hallo laatste minuut van de geschiedenis niet beschikbaar is echter zou alleen 18 voorbeelden worden geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-400">If hello last minute of history was not available, however, only 18 samples would be returned.</span></span> <span data-ttu-id="d2aa7-401">In dit geval:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-401">In this case:</span></span><br/><br/><span data-ttu-id="d2aa7-402">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 95)`mislukken omdat slechts 90 procent van Hallo voorbeelden beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-402">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 95)` would fail because only 90 percent of hello samples are available.</span></span><br/><br/><span data-ttu-id="d2aa7-403">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 80)`zou slagen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-403">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 80)` would succeed.</span></span><li>`doubleVec GetSample((timestamp or timeinterval) startTime, (timestamp or timeinterval) endTime [, double samplePercent])`<br/><span data-ttu-id="d2aa7-404">Hiermee geeft u een tijdsbestek voor het verzamelen van gegevens met een begintijd en eindtijd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-404">Specifies a time frame for gathering data, with both a start time and an end time.</span></span><br/><br/><span data-ttu-id="d2aa7-405">Zoals eerder vermeld, is er een vertraging tussen wanneer een voorbeeld van een worden verzameld en wanneer het beschikbaar tooa formule is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-405">As mentioned above, there is a delay between when a sample is collected and when it is available tooa formula.</span></span> <span data-ttu-id="d2aa7-406">Houd rekening met deze vertraging wanneer u Hallo `GetSample` methode.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-406">Consider this delay when you use hello `GetSample` method.</span></span> <span data-ttu-id="d2aa7-407">Zie `GetSamplePercent` hieronder.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-407">See `GetSamplePercent` below.</span></span> |
| <span data-ttu-id="d2aa7-408">GetSamplePeriod()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-408">GetSamplePeriod()</span></span> |<span data-ttu-id="d2aa7-409">Hallo periode van voorbeelden die zijn uitgevoerd retourneert in een historische voorbeeldgegevensset.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-409">Returns hello period of samples that were taken in a historical sample data set.</span></span> |
| <span data-ttu-id="d2aa7-410">Count()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-410">Count()</span></span> |<span data-ttu-id="d2aa7-411">Retourneert Hallo totale aantal steekproeven in Hallo metrische geschiedenis.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-411">Returns hello total number of samples in hello metric history.</span></span> |
| <span data-ttu-id="d2aa7-412">HistoryBeginTime()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-412">HistoryBeginTime()</span></span> |<span data-ttu-id="d2aa7-413">Retourneert Hallo tijdstempel van Hallo oudste beschikbaar steekproef voor Hallo metriek.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-413">Returns hello time stamp of hello oldest available data sample for hello metric.</span></span> |
| <span data-ttu-id="d2aa7-414">GetSamplePercent()</span><span class="sxs-lookup"><span data-stu-id="d2aa7-414">GetSamplePercent()</span></span> |<span data-ttu-id="d2aa7-415">Retourneert Hallo percentage van de voorbeelden die beschikbaar voor een bepaald tijdsinterval zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-415">Returns hello percentage of samples that are available for a given time interval.</span></span> <span data-ttu-id="d2aa7-416">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-416">For example:</span></span><br/><br/>`doubleVec GetSamplePercent( (timestamp or timeinterval) startTime [, (timestamp or timeinterval) endTime] )`<br/><br/><span data-ttu-id="d2aa7-417">Omdat Hallo `GetSample` methode mislukt als Hallo percentage van de voorbeelden die zijn geretourneerd, kleiner dan Hallo is `samplePercent` opgegeven, kunt u Hallo `GetSamplePercent` methode toocheck eerste.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-417">Because hello `GetSample` method fails if hello percentage of samples returned is less than hello `samplePercent` specified, you can use hello `GetSamplePercent` method toocheck first.</span></span> <span data-ttu-id="d2aa7-418">Vervolgens kunt u een alternatieve actie uitvoeren onvoldoende voorbeelden aanwezig zijn, zonder automatische schaling evaluatie Hallo stoppen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-418">Then you can perform an alternate action if insufficient samples are present, without halting hello automatic scaling evaluation.</span></span> |

### <a name="samples-sample-percentage-and-hello-getsample-method"></a><span data-ttu-id="d2aa7-419">Voorbeelden en voorbeeld percentage Hallo *GetSample()* methode</span><span class="sxs-lookup"><span data-stu-id="d2aa7-419">Samples, sample percentage, and hello *GetSample()* method</span></span>
<span data-ttu-id="d2aa7-420">Hallo hoofdbewerking van een formule voor automatisch schalen is tooobtain taken en resources metrische gegevens en past u de poolgrootte op basis van die gegevens.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-420">hello core operation of an autoscale formula is tooobtain task and resource metric data and then adjust pool size based on that data.</span></span> <span data-ttu-id="d2aa7-421">Hierdoor is het belangrijk toohave een duidelijk beeld van de wisselwerking tussen de formules automatisch schalen met metrische gegevens (voorbeelden).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-421">As such, it is important toohave a clear understanding of how autoscale formulas interact with metrics data (samples).</span></span>

<span data-ttu-id="d2aa7-422">**Voorbeelden**</span><span class="sxs-lookup"><span data-stu-id="d2aa7-422">**Samples**</span></span>

<span data-ttu-id="d2aa7-423">Hallo Batch-service wordt regelmatig duurt voorbeelden van taken en resources metrische gegevens en maakt u ze beschikbaar tooyour automatisch schalen formules.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-423">hello Batch service periodically takes samples of task and resource metrics and makes them available tooyour autoscale formulas.</span></span> <span data-ttu-id="d2aa7-424">Deze voorbeelden worden elke 30 seconden door Hallo Batch-service geregistreerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-424">These samples are recorded every 30 seconds by hello Batch service.</span></span> <span data-ttu-id="d2aa7-425">Er is echter meestal een vertraging tussen wanneer deze voorbeelden zijn vastgelegd, en wanneer ze worden beschikbaar gesteld te (en kunnen worden gelezen door) automatisch schalen formules.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-425">However, there is typically a delay between when those samples were recorded and when they are made available too(and can be read by) your autoscale formulas.</span></span> <span data-ttu-id="d2aa7-426">Bovendien vanwege toovarious factoren zoals netwerk- of andere problemen infrastructuur, steekproeven mogelijk niet geregistreerd voor een bepaalde interval.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-426">Additionally, due toovarious factors such as network or other infrastructure issues, samples may not be recorded for a particular interval.</span></span>

<span data-ttu-id="d2aa7-427">**Percentage van de steekproef**</span><span class="sxs-lookup"><span data-stu-id="d2aa7-427">**Sample percentage**</span></span>

<span data-ttu-id="d2aa7-428">Wanneer `samplePercent` toohello wordt doorgegeven `GetSample()` methode of Hallo `GetSamplePercent()` methode wordt aangeroepen, _procent_ verwijst tooa vergelijking tussen Hallo mogelijke totale aantal voorbeelden die zijn vastgelegd door Hallo Batch-service en Hallo aantal voorbeelden die de formule voor automatisch schalen beschikbaar tooyour zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-428">When `samplePercent` is passed toohello `GetSample()` method or hello `GetSamplePercent()` method is called, _percent_ refers tooa comparison between hello total possible number of samples that are recorded by hello Batch service and hello number of samples that are available tooyour autoscale formula.</span></span>

<span data-ttu-id="d2aa7-429">We bekijken een timespan 10 minuten als voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-429">Let's look at a 10-minute timespan as an example.</span></span> <span data-ttu-id="d2aa7-430">Omdat voorbeelden worden elke 30 seconden binnen een timespan 10 minuten vastgelegd, zou Hallo maximum aantal voorbeelden die zijn vastgelegd door de Batch 20 steekproeven (2 per minuut) zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-430">Because samples are recorded every 30 seconds within a 10-minute timespan, hello maximum total number of samples that are recorded by Batch would be 20 samples (2 per minute).</span></span> <span data-ttu-id="d2aa7-431">Echter, vanwege toohello inherente latentie Hallo reporting mechanisme en andere problemen in Azure, kunnen er alleen 15 voorbeelden die beschikbaar tooyour automatisch schalen formule voor het lezen zijn.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-431">However, due toohello inherent latency of hello reporting mechanism and other issues within Azure, there may be only 15 samples that are available tooyour autoscale formula for reading.</span></span> <span data-ttu-id="d2aa7-432">Ja, bijvoorbeeld voor deze periode 10 minuten alleen 75% van totaal aantal steekproeven vastgelegd Hallo mogelijk beschikbaar tooyour formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-432">So, for example, for that 10-minute period, only 75% of hello total number of samples recorded may be available tooyour formula.</span></span>

<span data-ttu-id="d2aa7-433">**GetSample() en voorbeeld-bereiken**</span><span class="sxs-lookup"><span data-stu-id="d2aa7-433">**GetSample() and sample ranges**</span></span>

<span data-ttu-id="d2aa7-434">Automatisch schalen formules worden gaat toobe groeit en uw pools verkleinen &mdash; knooppunten toe te voegen of te verwijderen van knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-434">Your autoscale formulas are going toobe growing and shrinking your pools &mdash; adding nodes or removing nodes.</span></span> <span data-ttu-id="d2aa7-435">Omdat knooppunten geld kosten, wilt u tooensure met formules een intelligente methode van de analyse op basis van voldoende gegevens.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-435">Because nodes cost you money, you want tooensure that your formulas use an intelligent method of analysis that is based on sufficient data.</span></span> <span data-ttu-id="d2aa7-436">Daarom raden we u een trending-type-analyse gebruiken in uw formules.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-436">Therefore, we recommend that you use a trending-type analysis in your formulas.</span></span> <span data-ttu-id="d2aa7-437">Dit type groeit en uw pools op basis van een bereik van verzamelde steekproeven verkleind.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-437">This type grows and shrinks your pools based on a range of collected samples.</span></span>

<span data-ttu-id="d2aa7-438">toodo dus gebruiken `GetSample(interval look-back start, interval look-back end)` tooreturn een vector van voorbeelden:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-438">toodo so, use `GetSample(interval look-back start, interval look-back end)` tooreturn a vector of samples:</span></span>

```
$runningTasksSample = $RunningTasks.GetSample(1 * TimeInterval_Minute, 6 * TimeInterval_Minute);
```

<span data-ttu-id="d2aa7-439">Wanneer Hallo boven de regel wordt geëvalueerd door de Batch, wordt een reeks voorbeelden als vector van waarden.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-439">When hello above line is evaluated by Batch, it returns a range of samples as a vector of values.</span></span> <span data-ttu-id="d2aa7-440">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-440">For example:</span></span>

```
$runningTasksSample=[1,1,1,1,1,1,1,1,1,1];
```

<span data-ttu-id="d2aa7-441">Zodra u Hallo vector van voorbeelden hebt verzameld, vervolgens kunt u functies zoals `min()`, `max()`, en `avg()` tooderive zinvolle waarden uit Hallo verzameld bereik.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-441">Once you've collected hello vector of samples, you can then use functions like `min()`, `max()`, and `avg()` tooderive meaningful values from hello collected range.</span></span>

<span data-ttu-id="d2aa7-442">Voor extra beveiliging kunt u een formule-evaluatie toofail afdwingen als minder dan een bepaald percentage van het voorbeeld beschikbaar voor een bepaalde periode is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-442">For additional security, you can force a formula evaluation toofail if less than a certain sample percentage is available for a particular time period.</span></span> <span data-ttu-id="d2aa7-443">Wanneer u een formule-evaluatie toofail afdwingt, vertelt u Batch toocease verdere evaluatie van de formule Hallo Hallo opgegeven percentage van de voorbeelden is niet beschikbaar als.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-443">When you force a formula evaluation toofail, you instruct Batch toocease further evaluation of hello formula if hello specified percentage of samples is not available.</span></span> <span data-ttu-id="d2aa7-444">In dit geval worden niet gewijzigd toohello poolgrootte.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-444">In this case, no change is made toohello pool size.</span></span> <span data-ttu-id="d2aa7-445">toospecify vereist percentage van de voorbeelden voor Hallo evaluatie toosucceed, dit opgeven als de derde parameter te Hallo`GetSample()`.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-445">toospecify a required percentage of samples for hello evaluation toosucceed, specify it as hello third parameter too`GetSample()`.</span></span> <span data-ttu-id="d2aa7-446">Hier wordt een vereiste van 75 procent van de voorbeelden is opgegeven:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-446">Here, a requirement of 75 percent of samples is specified:</span></span>

```
$runningTasksSample = $RunningTasks.GetSample(60 * TimeInterval_Second, 120 * TimeInterval_Second, 75);
```

<span data-ttu-id="d2aa7-447">Omdat er een vertraging optreden in de steekproef beschikbaarheid, is het belangrijk tooalways Geef een periode met een uiterlijk-back-begintijd die ouder is dan een minuut.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-447">Because there may be a delay in sample availability, it is important tooalways specify a time range with a look-back start time that is older than one minute.</span></span> <span data-ttu-id="d2aa7-448">Het duurt ongeveer een minuut voor voorbeelden toopropagate via Hallo-systeem, dus voorbeelden in Hallo bereik `(0 * TimeInterval_Second, 60 * TimeInterval_Second)` mogelijk niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-448">It takes approximately one minute for samples toopropagate through hello system, so samples in hello range `(0 * TimeInterval_Second, 60 * TimeInterval_Second)` may not be available.</span></span> <span data-ttu-id="d2aa7-449">Nogmaals, kunt u Hallo percentage parameter van `GetSample()` tooforce een bepaalde voorbeeld percentage vereiste.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-449">Again, you can use hello percentage parameter of `GetSample()` tooforce a particular sample percentage requirement.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d2aa7-450">We **aangeraden** die u hebt **voorkomen relying *alleen* op `GetSample(1)` in formules automatisch schalen**.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-450">We **strongly recommend** that you **avoid relying *only* on `GetSample(1)` in your autoscale formulas**.</span></span> <span data-ttu-id="d2aa7-451">Dit komt doordat `GetSample(1)` in wezen zegt toohello Batch-service, "Geef me Hallo laatste steekproef die u hebt, niet van belang hoe lang geleden u opgehaald."</span><span class="sxs-lookup"><span data-stu-id="d2aa7-451">This is because `GetSample(1)` essentially says toohello Batch service, "Give me hello last sample you have, no matter how long ago you retrieved it."</span></span> <span data-ttu-id="d2aa7-452">Omdat dit slechts een enkele voorbeeld is en kan een oudere voorbeeld, mogelijk vertegenwoordiger van grotere afbeelding Hallo van recente taak of resource staat niet meer.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-452">Since it is only a single sample, and it may be an older sample, it may not be representative of hello larger picture of recent task or resource state.</span></span> <span data-ttu-id="d2aa7-453">Als u gebruik maakt van `GetSample(1)`en zorg ervoor dat het deel van een grotere instructie uitmaakt niet Hallo alleen gegevenspunt dat afhankelijk is van de formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-453">If you do use `GetSample(1)`, make sure that it's part of a larger statement and not hello only data point that your formula relies on.</span></span>
>
>

## <a name="metrics"></a><span data-ttu-id="d2aa7-454">Metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="d2aa7-454">Metrics</span></span>
<span data-ttu-id="d2aa7-455">U kunt zowel de bron- als de taak metrische gegevens gebruiken wanneer u bij het definiëren van een formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-455">You can use both resource and task metrics when you're defining a formula.</span></span> <span data-ttu-id="d2aa7-456">U aanpassen Hallo doelaantal toegewezen knooppunten in het Hallo-groep op basis van Hallo metrische gegevens die u ophalen en evalueren.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-456">You adjust hello target number of dedicated nodes in hello pool based on hello metrics data that you obtain and evaluate.</span></span> <span data-ttu-id="d2aa7-457">Zie Hallo [variabelen](#variables) sectie hierboven voor meer informatie over elke metriek.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-457">See hello [Variables](#variables) section above for more information on each metric.</span></span>

<table>
  <tr>
    <th><span data-ttu-id="d2aa7-458">Gegevens</span><span class="sxs-lookup"><span data-stu-id="d2aa7-458">Metric</span></span></th>
    <th><span data-ttu-id="d2aa7-459">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="d2aa7-459">Description</span></span></th>
  </tr>
  <tr>
    <td><span data-ttu-id="d2aa7-460"><b>Resource</b></span><span class="sxs-lookup"><span data-stu-id="d2aa7-460"><b>Resource</b></span></span></td>
    <td><p><span data-ttu-id="d2aa7-461">Metrische gegevens voor resources zijn gebaseerd op Hallo CPU, Hallo bandbreedte, geheugengebruik Hallo van rekenknooppunten en Hallo aantal knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-461">Resource metrics are based on hello CPU, hello bandwidth, hello memory usage of compute nodes, and hello number of nodes.</span></span></p>
        <p> <span data-ttu-id="d2aa7-462">Deze service gedefinieerde variabelen zijn handig voor het uitvoeren van aanpassingen op basis van het aantal knooppunten:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-462">These service-defined variables are useful for making adjustments based on node count:</span></span></p>
    <p><ul>
            <li><span data-ttu-id="d2aa7-463">$TargetDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-463">$TargetDedicatedNodes</span></span></li>
            <li><span data-ttu-id="d2aa7-464">$TargetLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-464">$TargetLowPriorityNodes</span></span></li>
            <li><span data-ttu-id="d2aa7-465">$CurrentDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-465">$CurrentDedicatedNodes</span></span></li>
            <li><span data-ttu-id="d2aa7-466">$CurrentLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-466">$CurrentLowPriorityNodes</span></span></li>
            <li><span data-ttu-id="d2aa7-467">$preemptedNodeCount</span><span class="sxs-lookup"><span data-stu-id="d2aa7-467">$preemptedNodeCount</span></span></li>
            <li><span data-ttu-id="d2aa7-468">$SampleNodeCount</span><span class="sxs-lookup"><span data-stu-id="d2aa7-468">$SampleNodeCount</span></span></li>
    </ul></p>
    <p><span data-ttu-id="d2aa7-469">Deze service gedefinieerde variabelen zijn nuttig voor het uitvoeren van aanpassingen op basis van knooppunt Resourcegebruik:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-469">These service-defined variables are useful for making adjustments based on node resource usage:</span></span></p>
    <p><ul>
      <li><span data-ttu-id="d2aa7-470">$CPUPercent</span><span class="sxs-lookup"><span data-stu-id="d2aa7-470">$CPUPercent</span></span></li>
      <li><span data-ttu-id="d2aa7-471">$WallClockSeconds</span><span class="sxs-lookup"><span data-stu-id="d2aa7-471">$WallClockSeconds</span></span></li>
      <li><span data-ttu-id="d2aa7-472">$MemoryBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-472">$MemoryBytes</span></span></li>
      <li><span data-ttu-id="d2aa7-473">$DiskBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-473">$DiskBytes</span></span></li>
      <li><span data-ttu-id="d2aa7-474">$DiskReadBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-474">$DiskReadBytes</span></span></li>
      <li><span data-ttu-id="d2aa7-475">$DiskWriteBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-475">$DiskWriteBytes</span></span></li>
      <li><span data-ttu-id="d2aa7-476">$DiskReadOps</span><span class="sxs-lookup"><span data-stu-id="d2aa7-476">$DiskReadOps</span></span></li>
      <li><span data-ttu-id="d2aa7-477">$DiskWriteOps</span><span class="sxs-lookup"><span data-stu-id="d2aa7-477">$DiskWriteOps</span></span></li>
      <li><span data-ttu-id="d2aa7-478">$NetworkInBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-478">$NetworkInBytes</span></span></li>
      <li><span data-ttu-id="d2aa7-479">$NetworkOutBytes</span><span class="sxs-lookup"><span data-stu-id="d2aa7-479">$NetworkOutBytes</span></span></li></ul></p>
  </tr>
  <tr>
    <td><span data-ttu-id="d2aa7-480"><b>Taak</b></span><span class="sxs-lookup"><span data-stu-id="d2aa7-480"><b>Task</b></span></span></td>
    <td><p><span data-ttu-id="d2aa7-481">Taak metrische gegevens op basis van Hallo status van taken, zoals actief, in behandeling, en voltooid.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-481">Task metrics are based on hello status of tasks, such as Active, Pending, and Completed.</span></span> <span data-ttu-id="d2aa7-482">Hallo zijn volgende service gedefinieerde variabelen handig voor groepsgrootte aanpassingen op basis van de taak metrische gegevens:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-482">hello following service-defined variables are useful for making pool-size adjustments based on task metrics:</span></span></p>
    <p><ul>
      <li><span data-ttu-id="d2aa7-483">$ActiveTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-483">$ActiveTasks</span></span></li>
      <li><span data-ttu-id="d2aa7-484">$RunningTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-484">$RunningTasks</span></span></li>
      <li><span data-ttu-id="d2aa7-485">$PendingTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-485">$PendingTasks</span></span></li>
      <li><span data-ttu-id="d2aa7-486">$SucceededTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-486">$SucceededTasks</span></span></li>
            <li><span data-ttu-id="d2aa7-487">$FailedTasks</span><span class="sxs-lookup"><span data-stu-id="d2aa7-487">$FailedTasks</span></span></li></ul></p>
        </td>
  </tr>
</table>

## <a name="write-an-autoscale-formula"></a><span data-ttu-id="d2aa7-488">Schrijven van een formule voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-488">Write an autoscale formula</span></span>
<span data-ttu-id="d2aa7-489">U een formule voor automatisch schalen verder door de instructies die gebruikmaken van Hallo hierboven onderdelen vormen en vervolgens deze instructies naar een volledige formule combineren.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-489">You build an autoscale formula by forming statements that use hello above components, then combine those statements into a complete formula.</span></span> <span data-ttu-id="d2aa7-490">In deze sectie maken we een formule voor het automatisch schalen van voorbeeld die een echte vergroten/verkleinen beslissingen kunt uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-490">In this section, we create an example autoscale formula that can perform some real-world scaling decisions.</span></span>

<span data-ttu-id="d2aa7-491">Eerst laten we Hallo vereisten definiëren voor onze nieuwe formule voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-491">First, let's define hello requirements for our new autoscale formula.</span></span> <span data-ttu-id="d2aa7-492">Hallo formule moet het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-492">hello formula should:</span></span>

1. <span data-ttu-id="d2aa7-493">Hallo doelaantal knooppunten in een pool speciale berekenings verhogen als hoog CPU-gebruik.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-493">Increase hello target number of dedicated compute nodes in a pool if CPU usage is high.</span></span>
2. <span data-ttu-id="d2aa7-494">Hallo doelaantal knooppunten in een pool speciale berekenings afnemen als CPU-gebruik laag is.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-494">Decrease hello target number of dedicated compute nodes in a pool when CPU usage is low.</span></span>
3. <span data-ttu-id="d2aa7-495">Maximum aantal toegewezen knooppunten too400 Hallo altijd beperken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-495">Always restrict hello maximum number of dedicated nodes too400.</span></span>

<span data-ttu-id="d2aa7-496">tooincrease hello aantal knooppunten hoog CPU-gebruik tijdens het Hallo-instructie die de gebruiker gedefinieerde variabele vult definiëren (`$totalDedicatedNodes`) met een waarde die is 110 procent van Hallo Huidig doelaantal toegewezen knooppunten, maar alleen als Hallo minimale gemiddelde CPU-gebruik tijdens het Hallo was de laatste tien minuten dan 70 procent.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-496">tooincrease hello number of nodes during high CPU usage, define hello statement that populates a user-defined variable (`$totalDedicatedNodes`) with a value that is 110 percent of hello current target number of dedicated nodes, but only if hello minimum average CPU usage during hello last 10 minutes was above 70 percent.</span></span> <span data-ttu-id="d2aa7-497">Gebruik anders Hallo-waarde voor het huidige aantal toegewezen knooppunten Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-497">Otherwise, use hello value for hello current number of dedicated nodes.</span></span>

```
$totalDedicatedNodes =
    (min($CPUPercent.GetSample(TimeInterval_Minute * 10)) > 0.7) ?
    ($CurrentDedicatedNodes * 1.1) : $CurrentDedicatedNodes;
```

<span data-ttu-id="d2aa7-498">te*verkleinen* aantal toegewezen knooppunten Hallo tijdens het lage CPU-gebruik, volgende instructie in onze formule sets Hallo Hallo dezelfde `$totalDedicatedNodes` variabele too90 procent van Hallo Huidig doelaantal toegewezen knooppunten als hello gemiddelde CPU-gebruik in Hallo is afgelopen 60 minuten onder 20 procent.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-498">too*decrease* hello number of dedicated nodes during low CPU usage, hello next statement in our formula sets hello same `$totalDedicatedNodes` variable too90 percent of hello current target number of dedicated nodes if hello average CPU usage in hello past 60 minutes was under 20 percent.</span></span> <span data-ttu-id="d2aa7-499">Gebruik anders de huidige waarde van Hallo `$totalDedicatedNodes` die we ingevuld in bovenstaande Hallo-instructie.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-499">Otherwise, use hello current value of `$totalDedicatedNodes` that we populated in hello statement above.</span></span>

```
$totalDedicatedNodes =
    (avg($CPUPercent.GetSample(TimeInterval_Minute * 60)) < 0.2) ?
    ($CurrentDedicatedNodes * 0.9) : $totalDedicatedNodes;
```

<span data-ttu-id="d2aa7-500">Hallo doelaantal speciale berekenings-knooppunten maximaal 400 tooa nu beperken:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-500">Now limit hello target number of dedicated compute nodes tooa maximum of 400:</span></span>

```
$TargetDedicatedNodes = min(400, $totalDedicatedNodes)
```

<span data-ttu-id="d2aa7-501">Dit is de volledige formule Hallo:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-501">Here's hello complete formula:</span></span>

```
$totalDedicatedNodes =
    (min($CPUPercent.GetSample(TimeInterval_Minute * 10)) > 0.7) ?
    ($CurrentDedicatedNodes * 1.1) : $CurrentDedicatedNodes;
$totalDedicatedNodes =
    (avg($CPUPercent.GetSample(TimeInterval_Minute * 60)) < 0.2) ?
    ($CurrentDedicatedNodes * 0.9) : $totalDedicatedNodes;
$TargetDedicatedNodes = min(400, $totalDedicatedNodes)
```

## <a name="create-an-autoscale-enabled-pool-with-net"></a><span data-ttu-id="d2aa7-502">Een pool automatisch schalen ingeschakeld maken met .NET</span><span class="sxs-lookup"><span data-stu-id="d2aa7-502">Create an autoscale-enabled pool with .NET</span></span>

<span data-ttu-id="d2aa7-503">een groep met automatisch schalen die zijn ingeschakeld in .NET toocreate als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-503">toocreate a pool with autoscaling enabled in .NET, follow these steps:</span></span>

1. <span data-ttu-id="d2aa7-504">Maak Hallo-adresgroep met [BatchClient.PoolOperations.CreatePool](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.createpool).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-504">Create hello pool with [BatchClient.PoolOperations.CreatePool](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.createpool).</span></span>
2. <span data-ttu-id="d2aa7-505">Set Hallo [CloudPool.AutoScaleEnabled](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleenabled) eigenschap te`true`.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-505">Set hello [CloudPool.AutoScaleEnabled](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleenabled) property too`true`.</span></span>
3. <span data-ttu-id="d2aa7-506">Set Hallo [CloudPool.AutoScaleFormula](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula) eigenschap met de formule voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-506">Set hello [CloudPool.AutoScaleFormula](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula) property with your autoscale formula.</span></span>
4. <span data-ttu-id="d2aa7-507">(Optioneel) Set Hallo [CloudPool.AutoScaleEvaluationInterval](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval) eigenschap (de standaardwaarde is 15 minuten).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-507">(Optional) Set hello [CloudPool.AutoScaleEvaluationInterval](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval) property (default is 15 minutes).</span></span>
5. <span data-ttu-id="d2aa7-508">Hallo-adresgroep met doorvoeren [CloudPool.Commit](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commit) of [CommitAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commitasync).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-508">Commit hello pool with [CloudPool.Commit](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commit) or [CommitAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commitasync).</span></span>

<span data-ttu-id="d2aa7-509">Hallo maakt volgende codefragment een groep voor automatisch schalen die zijn ingeschakeld in .NET.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-509">hello following code snippet creates an autoscale-enabled pool in .NET.</span></span> <span data-ttu-id="d2aa7-510">Hallo stelt van pool automatisch schalen formule Hallo doelaantal knooppunten toegewezen too5 op maandag en 1 op om de dag van week Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-510">hello pool's autoscale formula sets hello target number of dedicated nodes too5 on Mondays, and 1 on every other day of hello week.</span></span> <span data-ttu-id="d2aa7-511">Hallo [automatisch vergroten/verkleinen interval](#automatic-scaling-interval) is too30 minuten ingesteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-511">hello [automatic scaling interval](#automatic-scaling-interval) is set too30 minutes.</span></span> <span data-ttu-id="d2aa7-512">In deze en andere codefragmenten C# in dit artikel Hallo `myBatchClient` is een goed geïnitialiseerd exemplaar van Hallo [BatchClient] [ net_batchclient] klasse.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-512">In this and hello other C# snippets in this article, `myBatchClient` is a properly initialized instance of hello [BatchClient][net_batchclient] class.</span></span>

```csharp
CloudPool pool = myBatchClient.PoolOperations.CreatePool(
                    poolId: "mypool",
                    virtualMachineSize: "small", // single-core, 1.75 GB memory, 225 GB disk
                    cloudServiceConfiguration: new CloudServiceConfiguration(osFamily: "5"));    
pool.AutoScaleEnabled = true;
pool.AutoScaleFormula = "$TargetDedicatedNodes = (time().weekday == 1 ? 5:1);";
pool.AutoScaleEvaluationInterval = TimeSpan.FromMinutes(30);
await pool.CommitAsync();
```

> [!IMPORTANT]
> <span data-ttu-id="d2aa7-513">Wanneer u een groep automatisch schalen ingeschakeld maakt, geef geen Hallo _targetDedicatedComputeNodes_ parameter of Hallo _targetLowPriorityComputeNodes_ parameter op Hallo aanroepen te **CreatePool**.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-513">When you create an autoscale-enabled pool, do not specify hello _targetDedicatedComputeNodes_ parameter or hello _targetLowPriorityComputeNodes_ parameter on hello call too**CreatePool**.</span></span> <span data-ttu-id="d2aa7-514">Geef in plaats daarvan Hallo **AutoScaleEnabled** en **AutoScaleFormula** eigenschappen op Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-514">Instead, specify hello **AutoScaleEnabled** and **AutoScaleFormula** properties on hello pool.</span></span> <span data-ttu-id="d2aa7-515">Hallo-waarden voor deze eigenschappen bepalen Hallo doelaantal van elk type knooppunt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-515">hello values for these properties determine hello target number of each type of node.</span></span> <span data-ttu-id="d2aa7-516">Bovendien toomanually vergroten of verkleinen van een groep automatisch schalen is ingeschakeld (bijvoorbeeld met [BatchClient.PoolOperations.ResizePoolAsync][net_poolops_resizepoolasync]), eerste **uitschakelen** automatisch schalen op Hallo groep en vervolgens het formaat.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-516">Also, toomanually resize an autoscale-enabled pool (for example, with [BatchClient.PoolOperations.ResizePoolAsync][net_poolops_resizepoolasync]), first **disable** automatic scaling on hello pool, then resize it.</span></span>
>
>

<span data-ttu-id="d2aa7-517">Bovendien tooBatch .NET, kunt u een van de andere Hallo [Batch-SDK's](batch-apis-tools.md#azure-accounts-for-batch-development), [Batch REST](https://docs.microsoft.com/rest/api/batchservice/), [Batch PowerShell-cmdlets](batch-powershell-cmdlets-get-started.md), en Hallo [Batch CLI](batch-cli-get-started.md)tooconfigure automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-517">In addition tooBatch .NET, you can use any of hello other [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), [Batch REST](https://docs.microsoft.com/rest/api/batchservice/), [Batch PowerShell cmdlets](batch-powershell-cmdlets-get-started.md), and hello [Batch CLI](batch-cli-get-started.md) tooconfigure autoscaling.</span></span>


### <a name="automatic-scaling-interval"></a><span data-ttu-id="d2aa7-518">Interval voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-518">Automatic scaling interval</span></span>
<span data-ttu-id="d2aa7-519">Standaard aangepast Hallo Batch-service een groepsgrootte tooits volgens de formule voor automatisch schalen om de 15 minuten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-519">By default, hello Batch service adjusts a pool's size according tooits autoscale formula every 15 minutes.</span></span> <span data-ttu-id="d2aa7-520">Dit interval kan worden geconfigureerd met behulp van Hallo groepseigenschappen te volgen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-520">This interval is configurable by using hello following pool properties:</span></span>

* <span data-ttu-id="d2aa7-521">[CloudPool.AutoScaleEvaluationInterval] [ net_cloudpool_autoscaleevalinterval] (Batch .NET)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-521">[CloudPool.AutoScaleEvaluationInterval][net_cloudpool_autoscaleevalinterval] (Batch .NET)</span></span>
* <span data-ttu-id="d2aa7-522">[autoScaleEvaluationInterval] [ rest_autoscaleinterval] (REST-API)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-522">[autoScaleEvaluationInterval][rest_autoscaleinterval] (REST API)</span></span>

<span data-ttu-id="d2aa7-523">Hallo minimuminterval is vijf minuten en maximale Hallo is 168 uur.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-523">hello minimum interval is five minutes, and hello maximum is 168 hours.</span></span> <span data-ttu-id="d2aa7-524">Als een interval buiten dit bereik is opgegeven, geeft Hallo Batch-service een fout Ongeldige aanvraag (400).</span><span class="sxs-lookup"><span data-stu-id="d2aa7-524">If an interval outside this range is specified, hello Batch service returns a Bad Request (400) error.</span></span>

> [!NOTE]
> <span data-ttu-id="d2aa7-525">Automatisch schalen is niet op dit moment beoogde toorespond toochanges in minder dan een minuut, maar in plaats daarvan is tooadjust Hallo grootte van uw pool geleidelijk bedoeld als u een werkbelasting worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-525">Autoscaling is not currently intended toorespond toochanges in less than a minute, but rather is intended tooadjust hello size of your pool gradually as you run a workload.</span></span>
>
>

## <a name="enable-autoscaling-on-an-existing-pool"></a><span data-ttu-id="d2aa7-526">Automatisch schalen op een bestaande toepassingen inschakelen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-526">Enable autoscaling on an existing pool</span></span>

<span data-ttu-id="d2aa7-527">Elke Batch-SDK biedt een manier tooenable automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-527">Each Batch SDK provides a way tooenable autoscaling.</span></span> <span data-ttu-id="d2aa7-528">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-528">For example:</span></span>

* <span data-ttu-id="d2aa7-529">[BatchClient.PoolOperations.EnableAutoScaleAsync] [ net_enableautoscaleasync] (Batch .NET)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-529">[BatchClient.PoolOperations.EnableAutoScaleAsync][net_enableautoscaleasync] (Batch .NET)</span></span>
* <span data-ttu-id="d2aa7-530">[Inschakelen van automatisch schalen op een pool] [ rest_enableautoscale] (REST-API)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-530">[Enable automatic scaling on a pool][rest_enableautoscale] (REST API)</span></span>

<span data-ttu-id="d2aa7-531">Wanneer u automatisch schalen op een bestaande pool inschakelt, houd er rekening mee Hallo volgende punten:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-531">When you enable autoscaling on an existing pool, keep in mind hello following points:</span></span>

* <span data-ttu-id="d2aa7-532">Als automatische schaling is momenteel uitgeschakeld op Hallo van toepassingen wanneer u automatisch schalen Hallo aanvraag tooenable verzendt, moet u een formule voor automatisch schalen die geldige opgeven wanneer u Hallo aanvraag verzendt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-532">If automatic scaling is currently disabled on hello pool when you issue hello request tooenable autoscaling, you must specify a valid autoscale formula when you issue hello request.</span></span> <span data-ttu-id="d2aa7-533">U kunt optioneel een evaluatie-interval voor automatisch schalen opgeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-533">You can optionally specify an autoscale evaluation interval.</span></span> <span data-ttu-id="d2aa7-534">Als u een interval niet opgeeft, wordt de standaardwaarde Hallo van 15 minuten gebruikt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-534">If you do not specify an interval, hello default value of 15 minutes is used.</span></span>
* <span data-ttu-id="d2aa7-535">Als voor automatisch schalen die momenteel is ingeschakeld op Hallo van toepassingen, kunt u een formule voor automatisch schalen, een evaluatie-interval of beide opgeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-535">If autoscale is currently enabled on hello pool, you can specify an autoscale formula, an evaluation interval, or both.</span></span> <span data-ttu-id="d2aa7-536">U moet ten minste één van deze eigenschappen opgeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-536">You must specify at least one of these properties.</span></span>

  * <span data-ttu-id="d2aa7-537">Als u een nieuwe evaluatie interval voor automatisch schalen opgeeft, bestaande evaluatieplanning hello wordt gestopt en er wordt een nieuw schema gestart.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-537">If you specify a new autoscale evaluation interval, then hello existing evaluation schedule is stopped and a new schedule is started.</span></span> <span data-ttu-id="d2aa7-538">Hallo nieuwe planning start tijdstip is Hallo op welke Hallo aanvraag tooenable automatisch schalen is uitgegeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-538">hello new schedule's start time is hello time at which hello request tooenable autoscaling was issued.</span></span>
  * <span data-ttu-id="d2aa7-539">Als u beide hello automatisch schalen formule of evaluatie-interval weglaat, blijft Hallo Batch-service toouse Hallo huidige waarde van de instelling.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-539">If you omit either hello autoscale formula or evaluation interval, hello Batch service continues toouse hello current value of that setting.</span></span>

> [!NOTE]
> <span data-ttu-id="d2aa7-540">Als u de waarden voor Hallo opgegeven *targetDedicatedComputeNodes* of *targetLowPriorityComputeNodes* parameters Hallo **CreatePool** methode wanneer u Hallo gemaakt groep van toepassingen in .NET, of voor Hallo vergelijkbare parameters in een andere taal, worden deze waarden worden genegeerd tijdens het Hallo automatisch vergroten / verkleinen formule wordt geëvalueerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-540">If you specified values for hello *targetDedicatedComputeNodes* or *targetLowPriorityComputeNodes* parameters of hello **CreatePool** method when you created hello pool in .NET, or for hello comparable parameters in another language, then those values are ignored when hello automatic scaling formula is evaluated.</span></span>
>
>

<span data-ttu-id="d2aa7-541">Dit C#-codefragment maakt gebruik van Hallo [Batch .NET] [ net_api] bibliotheek tooenable automatisch schalen op een bestaande toepassingen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-541">This C# code snippet uses hello [Batch .NET][net_api] library tooenable autoscaling on an existing pool:</span></span>

```csharp
// Define hello autoscaling formula. This formula sets hello target number of nodes
// too5 on Mondays, and 1 on every other day of hello week
string myAutoScaleFormula = "$TargetDedicatedNodes = (time().weekday == 1 ? 5:1);";

// Set hello autoscale formula on hello existing pool
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleFormula: myAutoScaleFormula);
```

### <a name="update-an-autoscale-formula"></a><span data-ttu-id="d2aa7-542">Bijwerken van een formule voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-542">Update an autoscale formula</span></span>

<span data-ttu-id="d2aa7-543">op een bestaande automatisch schalen ingeschakeld toepassingen, aanroep Hallo bewerking tooenable automatisch schalen opnieuw met de nieuwe formule Hallo tooupdate Hallo-formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-543">tooupdate hello formula on an existing autoscale-enabled pool, call hello operation tooenable autoscaling again with hello new formula.</span></span> <span data-ttu-id="d2aa7-544">Bijvoorbeeld, als u automatisch schalen is al ingeschakeld op `myexistingpool` wanneer Hallo na .NET-code wordt uitgevoerd, de formule voor automatisch schalen is vervangen door Hallo inhoud van `myNewFormula`.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-544">For example, if autoscaling is already enabled on `myexistingpool` when hello following .NET code is executed, its autoscale formula is replaced with hello contents of `myNewFormula`.</span></span>

```csharp
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleFormula: myNewFormula);
```

### <a name="update-hello-autoscale-interval"></a><span data-ttu-id="d2aa7-545">Hallo-update-interval voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-545">Update hello autoscale interval</span></span>

<span data-ttu-id="d2aa7-546">tooupdate hello automatisch schalen evaluatie-interval van een bestaande automatisch schalen ingeschakeld pool, aanroep Hallo bewerking tooenable automatisch schalen opnieuw met een nieuwe hello-interval.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-546">tooupdate hello autoscale evaluation interval of an existing autoscale-enabled pool, call hello operation tooenable autoscaling again with hello new interval.</span></span> <span data-ttu-id="d2aa7-547">Bijvoorbeeld: tooset Hallo automatisch schalen evaluatie interval too60 minuten voor een pool die al automatisch schalen in .NET is ingeschakeld:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-547">For example, tooset hello autoscale evaluation interval too60 minutes for a pool that's already autoscale-enabled in .NET:</span></span>

```csharp
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleEvaluationInterval: TimeSpan.FromMinutes(60));
```

## <a name="evaluate-an-autoscale-formula"></a><span data-ttu-id="d2aa7-548">Evalueren van een formule voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-548">Evaluate an autoscale formula</span></span>

<span data-ttu-id="d2aa7-549">U kunt een formule evalueren voordat dit wordt toegepast tooa van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-549">You can evaluate a formula before applying it tooa pool.</span></span> <span data-ttu-id="d2aa7-550">Op deze manier kunt u Hallo formule toosee hoe de instructies evalueren voordat u Hallo formule in productie plaatsen testen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-550">In this way, you can test hello formula toosee how its statements evaluate before you put hello formula into production.</span></span>

<span data-ttu-id="d2aa7-551">tooevaluate een formule voor automatisch schalen, moet u eerst automatisch schalen op Hallo van toepassingen met een geldige formule inschakelen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-551">tooevaluate an autoscale formula, you must first enable autoscaling on hello pool with a valid formula.</span></span> <span data-ttu-id="d2aa7-552">tootest een formule in een groep die nog geen automatisch schalen is ingeschakeld, gebruik Hallo één regel formule `$TargetDedicatedNodes = 0` wanneer u automatisch schalen voor het eerst inschakelt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-552">tootest a formula on a pool that doesn't yet have autoscaling enabled, use hello one-line formula `$TargetDedicatedNodes = 0` when you first enable autoscaling.</span></span> <span data-ttu-id="d2aa7-553">Gebruik vervolgens een Hallo tooevaluate Hallo formule gewenste tootest te volgen:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-553">Then, use one of hello following tooevaluate hello formula you want tootest:</span></span>

* <span data-ttu-id="d2aa7-554">[BatchClient.PoolOperations.EvaluateAutoScale](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscale) of [EvaluateAutoScaleAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscaleasync)</span><span class="sxs-lookup"><span data-stu-id="d2aa7-554">[BatchClient.PoolOperations.EvaluateAutoScale](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscale) or [EvaluateAutoScaleAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscaleasync)</span></span>

    <span data-ttu-id="d2aa7-555">Deze methoden Batch .NET vereisen Hallo-ID van een bestaande pool en een tekenreeks met de formule voor automatisch schalen-tooevaluate Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-555">These Batch .NET methods require hello ID of an existing pool and a string containing hello autoscale formula tooevaluate.</span></span>

* [<span data-ttu-id="d2aa7-556">Evalueren van een formule voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-556">Evaluate an automatic scaling formula</span></span>](https://docs.microsoft.com/rest/api/batchservice/evaluate-an-automatic-scaling-formula)

    <span data-ttu-id="d2aa7-557">Geef Hallo pool-ID in Hallo URI in deze aanvraag REST-API en de formule voor automatisch schalen in Hallo Hallo *autoScaleFormula* element van het Hallo-aanvraagtekst.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-557">In this REST API request, specify hello pool ID in hello URI, and hello autoscale formula in hello *autoScaleFormula* element of hello request body.</span></span> <span data-ttu-id="d2aa7-558">Hallo-antwoord van Hallo-bewerking bevat informatie over de fout die mogelijk gerelateerde toohello formule.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-558">hello response of hello operation contains any error information that might be related toohello formula.</span></span>

<span data-ttu-id="d2aa7-559">In deze [Batch .NET] [ net_api] codefragment, we een formule voor automatisch schalen evalueren.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-559">In this [Batch .NET][net_api] code snippet, we evaluate an autoscale formula.</span></span> <span data-ttu-id="d2aa7-560">Als Hallo van toepassingen geen automatisch schalen die zijn ingeschakeld heeft, wordt dit inschakelen eerst.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-560">If hello pool does not have autoscaling enabled, we enable it first.</span></span>

```csharp
// First obtain a reference tooan existing pool
CloudPool pool = await batchClient.PoolOperations.GetPoolAsync("myExistingPool");

// If autoscaling isn't already enabled on hello pool, enable it.
// You can't evaluate an autoscale formula on non-autoscale-enabled pool.
if (pool.AutoScaleEnabled == false)
{
    // We need a valid autoscale formula tooenable autoscaling on the
    // pool. This formula is valid, but won't resize hello pool:
    await pool.EnableAutoScaleAsync(
        autoscaleFormula: "$TargetDedicatedNodes = {pool.CurrentDedicatedNodes};",
        autoscaleEvaluationInterval: TimeSpan.FromMinutes(5));

    // Batch limits EnableAutoScaleAsync calls tooonce every 30 seconds.
    // Because we want tooapply our new autoscale formula below if it
    // evaluates successfully, and we *just* enabled autoscaling on
    // this pool, we pause here tooensure we pass that threshold.
    Thread.Sleep(TimeSpan.FromSeconds(31));

    // Refresh hello properties of hello pool so that we've got the
    // latest value for AutoScaleEnabled
    await pool.RefreshAsync();
}

// We must ensure that autoscaling is enabled on hello pool prior to
// evaluating a formula
if (pool.AutoScaleEnabled == true)
{
    // hello formula tooevaluate - adjusts target number of nodes based on
    // day of week and time of day
    string myFormula = @"
        $curTime = time();
        $workHours = $curTime.hour >= 8 && $curTime.hour < 18;
        $isWeekday = $curTime.weekday >= 1 && $curTime.weekday <= 5;
        $isWorkingWeekdayHour = $workHours && $isWeekday;
        $TargetDedicatedNodes = $isWorkingWeekdayHour ? 20:10;
    ";

    // Perform hello autoscale formula evaluation. Note that this code does not
    // actually apply hello formula toohello pool.
    AutoScaleRun eval =
        await batchClient.PoolOperations.EvaluateAutoScaleAsync(pool.Id, myFormula);

    if (eval.Error == null)
    {
        // Evaluation success - print hello results of hello AutoScaleRun.
        // This will display hello values of each variable as evaluated by the
        // autoscale formula.
        Console.WriteLine("AutoScaleRun.Results: " +
            eval.Results.Replace("$", "\n    $"));

        // Apply hello formula toohello pool since it evaluated successfully
        await batchClient.PoolOperations.EnableAutoScaleAsync(pool.Id, myFormula);
    }
    else
    {
        // Evaluation failed, output hello message associated with hello error
        Console.WriteLine("AutoScaleRun.Error.Message: " +
            eval.Error.Message);
    }
}
```

<span data-ttu-id="d2aa7-561">Geslaagde evaluatie van Hallo formule weergegeven in dit codefragment van de resultaten van vergelijkbaar met:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-561">Successful evaluation of hello formula shown in this code snippet produces results similar to:</span></span>

```
AutoScaleRun.Results:
    $TargetDedicatedNodes=10;
    $NodeDeallocationOption=requeue;
    $curTime=2016-10-13T19:18:47.805Z;
    $isWeekday=1;
    $isWorkingWeekdayHour=0;
    $workHours=0
```

## <a name="get-information-about-autoscale-runs"></a><span data-ttu-id="d2aa7-562">Informatie ophalen over automatisch schalen die wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="d2aa7-562">Get information about autoscale runs</span></span>

<span data-ttu-id="d2aa7-563">tooensure die de formule uitvoert als het is raadzaam dat u regelmatig Hallo resultaten controleren van Hallo automatisch schalen wordt uitgevoerd waarmee Batch wordt uitgevoerd op uw pool werd verwacht.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-563">tooensure that your formula is performing as expected, we recommend that you periodically check hello results of hello autoscaling runs that Batch performs on your pool.</span></span> <span data-ttu-id="d2aa7-564">toodo dus ophalen (of vernieuwen) een verwijzing toohello pool en bekijk het Hallo-eigenschappen van de laatste automatisch schalen die wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-564">toodo so, get (or refresh) a reference toohello pool, and examine hello properties of its last autoscale run.</span></span>

<span data-ttu-id="d2aa7-565">Hallo in Batch .NET [CloudPool.AutoScaleRun](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscalerun) eigenschap heeft verschillende eigenschappen die informatie geven over Hallo nieuwste automatische schaling uitgevoerd op Hallo van toepassingen worden uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-565">In Batch .NET, hello [CloudPool.AutoScaleRun](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscalerun) property has several properties that provide information about hello latest automatic scaling run performed on hello pool:</span></span>

* [<span data-ttu-id="d2aa7-566">AutoScaleRun.Timestamp</span><span class="sxs-lookup"><span data-stu-id="d2aa7-566">AutoScaleRun.Timestamp</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.timestamp)
* [<span data-ttu-id="d2aa7-567">AutoScaleRun.Results</span><span class="sxs-lookup"><span data-stu-id="d2aa7-567">AutoScaleRun.Results</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.results)
* [<span data-ttu-id="d2aa7-568">AutoScaleRun.Error</span><span class="sxs-lookup"><span data-stu-id="d2aa7-568">AutoScaleRun.Error</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.error)

<span data-ttu-id="d2aa7-569">Hallo in Hallo REST-API, [informatie ophalen over een pool](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool) aanvraag retourneert informatie over het Hallo-toepassingen, waaronder Hallo nieuwste automatische schaling uitgevoerd van de informatie in Hallo [autoScaleRun](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool#bk_autrun) eigenschap.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-569">In hello REST API, hello [Get information about a pool](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool) request returns information about hello pool, which includes hello latest automatic scaling run information in hello [autoScaleRun](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool#bk_autrun) property.</span></span>

<span data-ttu-id="d2aa7-570">Hallo volgende C#-codefragment maakt gebruik van Hallo Batch .NET-bibliotheek tooprint informatie over Hallo laatste automatisch schalen uitvoeren op de groep _myPool_:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-570">hello following C# code snippet uses hello Batch .NET library tooprint information about hello last autoscaling run on pool _myPool_:</span></span>

```csharp
await Cloud pool = myBatchClient.PoolOperations.GetPoolAsync("myPool");
Console.WriteLine("Last execution: " + pool.AutoScaleRun.Timestamp);
Console.WriteLine("Result:" + pool.AutoScaleRun.Results.Replace("$", "\n  $"));
Console.WriteLine("Error: " + pool.AutoScaleRun.Error);
```

<span data-ttu-id="d2aa7-571">Voorbeeld van uitvoer Hallo voorgaande codefragment:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-571">Sample output of hello preceding snippet:</span></span>

```
Last execution: 10/14/2016 18:36:43
Result:
  $TargetDedicatedNodes=10;
  $NodeDeallocationOption=requeue;
  $curTime=2016-10-14T18:36:43.282Z;
  $isWeekday=1;
  $isWorkingWeekdayHour=0;
  $workHours=0
Error:
```

## <a name="example-autoscale-formulas"></a><span data-ttu-id="d2aa7-572">Voorbeeld voor automatisch schalen formules</span><span class="sxs-lookup"><span data-stu-id="d2aa7-572">Example autoscale formulas</span></span>
<span data-ttu-id="d2aa7-573">Bekijken we enkele formules die verschillende manieren tooadjust Hallo hoeveelheid rekenresources in een pool weergeven.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-573">Let's look at a few formulas that show different ways tooadjust hello amount of compute resources in a pool.</span></span>

### <a name="example-1-time-based-adjustment"></a><span data-ttu-id="d2aa7-574">Voorbeeld 1: Op basis van tijd aanpassing</span><span class="sxs-lookup"><span data-stu-id="d2aa7-574">Example 1: Time-based adjustment</span></span>
<span data-ttu-id="d2aa7-575">Stel dat u wilt dat tooadjust Hallo-groepsgrootte op basis van de dag van week Hallo Hallo en het tijdstip van de dag.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-575">Suppose you want tooadjust hello pool size based on hello day of hello week and time of day.</span></span> <span data-ttu-id="d2aa7-576">Dit voorbeeld toont hoe tooincrease of afname Hallo aantal knooppunten in Hallo groep dienovereenkomstig.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-576">This example shows how tooincrease or decrease hello number of nodes in hello pool accordingly.</span></span>

<span data-ttu-id="d2aa7-577">Hallo formule verkrijgt eerst Hallo huidige tijd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-577">hello formula first obtains hello current time.</span></span> <span data-ttu-id="d2aa7-578">Als dit een weekdag (1-5 is) en binnen werkuren (8 AM too6 PM), Hallo doel groepsgrootte too20 knooppunten is ingesteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-578">If it's a weekday (1-5) and within working hours (8 AM too6 PM), hello target pool size is set too20 nodes.</span></span> <span data-ttu-id="d2aa7-579">Anders wordt deze ingesteld too10 knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-579">Otherwise, it's set too10 nodes.</span></span>

```
$curTime = time();
$workHours = $curTime.hour >= 8 && $curTime.hour < 18;
$isWeekday = $curTime.weekday >= 1 && $curTime.weekday <= 5;
$isWorkingWeekdayHour = $workHours && $isWeekday;
$TargetDedicatedNodes = $isWorkingWeekdayHour ? 20:10;
```

### <a name="example-2-task-based-adjustment"></a><span data-ttu-id="d2aa7-580">Voorbeeld 2: Taakgebaseerde aanpassing</span><span class="sxs-lookup"><span data-stu-id="d2aa7-580">Example 2: Task-based adjustment</span></span>
<span data-ttu-id="d2aa7-581">Hallo-groepsgrootte wordt aangepast op basis van het aantal taken in de wachtrij Hallo Hallo in dit voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-581">In this example, hello pool size is adjusted based on hello number of tasks in hello queue.</span></span> <span data-ttu-id="d2aa7-582">Alle opmerkingen en regeleinden zijn acceptabel in formule tekenreeksen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-582">Both comments and line breaks are acceptable in formula strings.</span></span>

```csharp
// Get pending tasks for hello past 15 minutes.
$samples = $ActiveTasks.GetSamplePercent(TimeInterval_Minute * 15);
// If we have fewer than 70 percent data points, we use hello last sample point,
// otherwise we use hello maximum of last sample point and hello history average.
$tasks = $samples < 70 ? max(0,$ActiveTasks.GetSample(1)) : max( $ActiveTasks.GetSample(1), avg($ActiveTasks.GetSample(TimeInterval_Minute * 15)));
// If number of pending tasks is not 0, set targetVM toopending tasks, otherwise
// half of current dedicated.
$targetVMs = $tasks > 0? $tasks:max(0, $TargetDedicatedNodes/2);
// hello pool size is capped at 20, if target VM value is more than that, set it
// too20. This value should be adjusted according tooyour use case.
$TargetDedicatedNodes = max(0, min($targetVMs, 20));
// Set node deallocation mode - keep nodes active only until tasks finish
$NodeDeallocationOption = taskcompletion;
```

### <a name="example-3-accounting-for-parallel-tasks"></a><span data-ttu-id="d2aa7-583">Voorbeeld 3: Accounting voor parallelle taken</span><span class="sxs-lookup"><span data-stu-id="d2aa7-583">Example 3: Accounting for parallel tasks</span></span>
<span data-ttu-id="d2aa7-584">In dit voorbeeld wordt aangepast op basis van het aantal taken Hallo Hallo-groepsgrootte.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-584">This example adjusts hello pool size based on hello number of tasks.</span></span> <span data-ttu-id="d2aa7-585">Deze formule houdt ook account Hallo [MaxTasksPerComputeNode] [ net_maxtasks] waarde die is ingesteld voor Hallo van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-585">This formula also takes into account hello [MaxTasksPerComputeNode][net_maxtasks] value that has been set for hello pool.</span></span> <span data-ttu-id="d2aa7-586">Deze methode is handig in situaties waar [parallelle uitvoering van de taak](batch-parallel-node-tasks.md) is ingeschakeld op uw pool.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-586">This approach is useful in situations where [parallel task execution](batch-parallel-node-tasks.md) has been enabled on your pool.</span></span>

```csharp
// Determine whether 70 percent of hello samples have been recorded in hello past
// 15 minutes; if not, use last sample
$samples = $ActiveTasks.GetSamplePercent(TimeInterval_Minute * 15);
$tasks = $samples < 70 ? max(0,$ActiveTasks.GetSample(1)) : max( $ActiveTasks.GetSample(1),avg($ActiveTasks.GetSample(TimeInterval_Minute * 15)));
// Set hello number of nodes tooadd tooone-fourth hello number of active tasks (the
// MaxTasksPerComputeNode property on this pool is set too4, adjust this number
// for your use case)
$cores = $TargetDedicatedNodes * 4;
$extraVMs = (($tasks - $cores) + 3) / 4;
$targetVMs = ($TargetDedicatedNodes + $extraVMs);
// Attempt toogrow hello number of compute nodes toomatch hello number of active
// tasks, with a maximum of 3
$TargetDedicatedNodes = max(0,min($targetVMs,3));
// Keep hello nodes active until hello tasks finish
$NodeDeallocationOption = taskcompletion;
```

### <a name="example-4-setting-an-initial-pool-size"></a><span data-ttu-id="d2aa7-587">Voorbeeld 4: De grootte van een eerste groep van toepassingen instellen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-587">Example 4: Setting an initial pool size</span></span>
<span data-ttu-id="d2aa7-588">Het aantal knooppunten in dit voorbeeld toont een C# code codefragment met een formule voor automatisch schalen die ingesteld Hallo groep grootte tooa opgegeven voor een eerste periode.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-588">This example shows a C# code snippet with an autoscale formula that sets hello pool size tooa specified number of nodes for an initial time period.</span></span> <span data-ttu-id="d2aa7-589">Vervolgens wordt deze aangepast Hallo poolgrootte op basis van het aantal uitgevoerd Hallo en actieve taken na de initiële Hallo-periode is verstreken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-589">Then it adjusts hello pool size based on hello number of running and active tasks after hello initial time period has elapsed.</span></span>

<span data-ttu-id="d2aa7-590">Hallo formule in het volgende codefragment Hallo:</span><span class="sxs-lookup"><span data-stu-id="d2aa7-590">hello formula in hello following code snippet:</span></span>

* <span data-ttu-id="d2aa7-591">Hallo initiële adresgroep instellen grootte toofour knooppunten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-591">Sets hello initial pool size toofour nodes.</span></span>
* <span data-ttu-id="d2aa7-592">Niet aangepast Hallo groepsgrootte binnen Hallo eerste 10 minuten van de levenscyclus van Hallo pool.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-592">Does not adjust hello pool size within hello first 10 minutes of hello pool's lifecycle.</span></span>
* <span data-ttu-id="d2aa7-593">Na 10 minuten verkrijgt Hallo max-waarde van Hallo nummer van het uitvoeren en actieve taken binnen Hallo afgelopen 60 minuten.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-593">After 10 minutes, obtains hello max value of hello number of running and active tasks within hello past 60 minutes.</span></span>
  * <span data-ttu-id="d2aa7-594">Als beide waarden zijn 0 (waarmee wordt aangegeven dat er geen taken uitgevoerd of is actief in Hallo laatste 60 minuten zijn), is de poolgrootte Hallo too0 ingesteld.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-594">If both values are 0 (indicating that no tasks were running or active in hello last 60 minutes), hello pool size is set too0.</span></span>
  * <span data-ttu-id="d2aa7-595">Als een waarde groter dan nul is, worden niet gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-595">If either value is greater than zero, no change is made.</span></span>

```csharp
string now = DateTime.UtcNow.ToString("r");
string formula = string.Format(@"
    $TargetDedicatedNodes = {1};
    lifespan         = time() - time(""{0}"");
    span             = TimeInterval_Minute * 60;
    startup          = TimeInterval_Minute * 10;
    ratio            = 50;

    $TargetDedicatedNodes = (lifespan > startup ? (max($RunningTasks.GetSample(span, ratio), $ActiveTasks.GetSample(span, ratio)) == 0 ? 0 : $TargetDedicatedNodes) : {1});
    ", now, 4);
```

## <a name="next-steps"></a><span data-ttu-id="d2aa7-596">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="d2aa7-596">Next steps</span></span>
* <span data-ttu-id="d2aa7-597">[Azure Batch compute Resourcegebruik met gelijktijdige knooppunt taken maximaliseren](batch-parallel-node-tasks.md) bevat details over hoe u meerdere taken tegelijkertijd op Hallo van rekenknooppunten in uw groep uitvoeren kunt.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-597">[Maximize Azure Batch compute resource usage with concurrent node tasks](batch-parallel-node-tasks.md) contains details about how you can execute multiple tasks simultaneously on hello compute nodes in your pool.</span></span> <span data-ttu-id="d2aa7-598">Bovendien tooautoscaling, deze functie kunt toolower taak duur voor sommige werkbelastingen, u geld besparen.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-598">In addition tooautoscaling, this feature may help toolower job duration for some workloads, saving you money.</span></span>
* <span data-ttu-id="d2aa7-599">Voor een andere efficiëntie booster, moet u ervoor zorgen dat uw Batch-toepassing-query's Batch-service in de meeste optimaal Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-599">For another efficiency booster, ensure that your Batch application queries hello Batch service in hello most optimal way.</span></span> <span data-ttu-id="d2aa7-600">Zie [hello Azure Batch-service efficiënt Query](batch-efficient-list-queries.md) toolearn hoe toolimit Hallo hoeveelheid gegevens die over de kabel Hallo als u een query Hallo status van mogelijk duizenden compute-knooppunten of taken.</span><span class="sxs-lookup"><span data-stu-id="d2aa7-600">See [Query hello Azure Batch service efficiently](batch-efficient-list-queries.md) toolearn how toolimit hello amount of data that crosses hello wire when you query hello status of potentially thousands of compute nodes or tasks.</span></span>

[net_api]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch
[net_batchclient]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.batchclient
[net_cloudpool_autoscaleformula]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula
[net_cloudpool_autoscaleevalinterval]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval
[net_enableautoscaleasync]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.enableautoscaleasync
[net_maxtasks]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.maxtaskspercomputenode
[net_poolops_resizepoolasync]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.resizepoolasync

[rest_api]: https://docs.microsoft.com/rest/api/batchservice/
[rest_autoscaleformula]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
[rest_autoscaleinterval]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
[rest_enableautoscale]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
