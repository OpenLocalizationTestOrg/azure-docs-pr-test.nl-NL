---
title: Rekenintensieve Azure VM's gebruiken met Batch | Microsoft Docs
description: Hoe kunt u profiteren van de RDMA-compatibele of GPU ingeschakeld VM-grootte in Azure Batch-pools
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: c52a054e4fc8f61f871acd9f35b9a3e6247e48ef
ms.sourcegitcommit: 422efcbac5b6b68295064bd545132fcc98349d01
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/29/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="4dd0d-103">Gebruik van RDMA-compatibele of GPU ingeschakeld exemplaren in Batch-pools</span><span class="sxs-lookup"><span data-stu-id="4dd0d-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="4dd0d-104">Voor het uitvoeren van bepaalde Batch-taken, is het raadzaam om te profiteren van Azure VM-grootten die zijn ontworpen voor grootschalige berekeningen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-104">To run certain Batch jobs, you might want to take advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="4dd0d-105">Bijvoorbeeld, om het uitvoeren van meerdere exemplaren [MPI belastingen](batch-mpi.md), kunt u A8, A9, of H-serie-groottes met een netwerk interface voor Remote Direct Memory Access (RDMA).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-105">For example, to run multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="4dd0d-106">Deze formaten verbinden met een InfiniBand-netwerk voor de communicatie tussen knooppunten, die MPI-toepassingen kan versnellen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-106">These sizes connect to an InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="4dd0d-107">Of voor CUDA toepassingen, kunt u N-serie grootten die NVIDIA Tesla afbeeldingen verwerken kaarten GPU (unit) bevatten.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="4dd0d-108">Dit artikel bevat richtlijnen en voorbeelden aan sommige gespecialiseerde grootten van Azure gebruiken in de Batch-pools.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-108">This article provides guidance and examples to use some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="4dd0d-109">Zie voor technische specificaties en achtergrond:</span><span class="sxs-lookup"><span data-stu-id="4dd0d-109">For specs and background, see:</span></span>

* <span data-ttu-id="4dd0d-110">Hoge prestaties compute-VM-grootten ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="4dd0d-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="4dd0d-111">VM-grootten GPU-functionaliteit ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="4dd0d-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="4dd0d-112">Abonnement en limieten</span><span class="sxs-lookup"><span data-stu-id="4dd0d-112">Subscription and account limits</span></span>

* <span data-ttu-id="4dd0d-113">**Quota's** -een of meer Azure-quota kunnen beperken het nummer of het type van knooppunten die u aan een Batch-pool toevoegen kunt.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-113">**Quotas** - One or more Azure quotas may limit the number or type of nodes you can add to a Batch pool.</span></span> <span data-ttu-id="4dd0d-114">U waarschijnlijk worden beperkt wanneer u RDMA-compatibele GPU ingeschakeld of andere multicore VM-grootten kiest.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-114">You are more likely to be limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="4dd0d-115">Afhankelijk van het type Batch-account die u hebt gemaakt, kunnen het toepassen van de quota's aan het account zelf of uw abonnement.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-115">Depending on the type of Batch account you created, the quotas could apply to the account itself or to your subscription.</span></span>

    * <span data-ttu-id="4dd0d-116">Als u hebt gemaakt van uw Batch-account in de **Batch-service** configuratie, worden beperkt door de [toegewezen kernen quotum per Batch-account](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-116">If you created your Batch account in the **Batch service** configuration, you are limited by the [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="4dd0d-117">Standaard is dit quotum 20 kernen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="4dd0d-118">Een afzonderlijke quotum van toepassing op [prioriteit Laag VMs](batch-low-pri-vms.md), als u deze gebruikt.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-118">A separate quota applies to [low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="4dd0d-119">Als het maken van het account in de **gebruikerabonnement** configuratie, uw abonnement limieten voor het aantal VM cores per regio.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-119">If you created the account in the **User subscription** configuration, your subscription limits the number of VM cores per region.</span></span> <span data-ttu-id="4dd0d-120">Zie [Azure-abonnement en Servicelimieten, quota's en beperkingen](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="4dd0d-121">Uw abonnement geldt ook een regionale quotum voor bepaalde VM-grootten, met inbegrip van HPC en GPU-exemplaren.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-121">Your subscription also applies a regional quota to certain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="4dd0d-122">In de Gebruikersconfiguratie abonnement geen extra quota van toepassing op het Batch-account.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-122">In the user subscription configuration, no additional quotas apply to the Batch account.</span></span> 

  <span data-ttu-id="4dd0d-123">U moet mogelijk een of meer quota verhogen als u een speciale VM-grootte in Batch.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-123">You might need to increase one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="4dd0d-124">Als u een verhoging van het quotum wilt aanvragen, opent u een [online een ondersteuningsverzoek](../azure-supportability/how-to-create-azure-support-request.md). Hiervoor worden geen kosten in rekening gebracht.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-124">To request a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="4dd0d-125">**Beschikbaarheid in regio's** - rekenintensieve VM's mogelijk niet beschikbaar in de regio's waar u uw Batch-accounts maken.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-125">**Region availability** - Compute-intensive VMs might not be available in the regions where you create your Batch accounts.</span></span> <span data-ttu-id="4dd0d-126">Om te controleren of een grootte beschikbaar zijn, Zie [producten die beschikbaar zijn in elke regio](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-126">To check that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="4dd0d-127">Afhankelijkheden</span><span class="sxs-lookup"><span data-stu-id="4dd0d-127">Dependencies</span></span>

<span data-ttu-id="4dd0d-128">De RDMA en GPU-mogelijkheden van rekenintensieve grootten worden alleen ondersteund in bepaalde besturingssystemen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-128">The RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="4dd0d-129">Afhankelijk van het besturingssysteem moet u mogelijk installeren of configureren van extra stuurprogramma of andere software.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-129">Depending on your operating system, you might need to install or configure additional driver or other software.</span></span> <span data-ttu-id="4dd0d-130">De volgende tabellen geven een overzicht van deze afhankelijkheden.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-130">The following tables summarize these dependencies.</span></span> <span data-ttu-id="4dd0d-131">Zie gekoppelde artikelen voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-131">See linked articles for details.</span></span> <span data-ttu-id="4dd0d-132">Zie voor de opties voor het configureren van de Batch-pools, verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-132">For options to configure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="4dd0d-133">Groepen van Linux - Virtuele-machineconfiguratie</span><span class="sxs-lookup"><span data-stu-id="4dd0d-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="4dd0d-134">Grootte</span><span class="sxs-lookup"><span data-stu-id="4dd0d-134">Size</span></span> | <span data-ttu-id="4dd0d-135">Mogelijkheid</span><span class="sxs-lookup"><span data-stu-id="4dd0d-135">Capability</span></span> | <span data-ttu-id="4dd0d-136">Besturingssystemen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-136">Operating systems</span></span> | <span data-ttu-id="4dd0d-137">Vereiste software</span><span class="sxs-lookup"><span data-stu-id="4dd0d-137">Required software</span></span> | <span data-ttu-id="4dd0d-138">Instellingen voor toepassingen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="4dd0d-139">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="4dd0d-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="4dd0d-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="4dd0d-140">RDMA</span></span> | <span data-ttu-id="4dd0d-141">SUSE Linux Enterprise Server 12 HPC of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="4dd0d-142">Op basis van centOS HPC</span><span class="sxs-lookup"><span data-stu-id="4dd0d-142">CentOS-based HPC</span></span><br/><span data-ttu-id="4dd0d-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-143">(Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="4dd0d-144">Intel MPI 5</span></span> | <span data-ttu-id="4dd0d-145">Communicatie tussen knooppunten inschakelen, uitschakelen van de uitvoering van gelijktijdige taken</span><span class="sxs-lookup"><span data-stu-id="4dd0d-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="4dd0d-146">NC reeks *</span><span class="sxs-lookup"><span data-stu-id="4dd0d-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="4dd0d-147">NVIDIA Tesla R80 GPU</span><span class="sxs-lookup"><span data-stu-id="4dd0d-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="4dd0d-148">Ubuntu 16.04 TNS.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="4dd0d-149">Red Hat Enterprise Linux 7.3, of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="4dd0d-150">7.3 op basis van CentOS</span><span class="sxs-lookup"><span data-stu-id="4dd0d-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="4dd0d-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-151">(Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-152">NVIDIA CUDA Toolkit 8.0 stuurprogramma 's</span><span class="sxs-lookup"><span data-stu-id="4dd0d-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="4dd0d-153">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-153">N/A</span></span> | 
| [<span data-ttu-id="4dd0d-154">NV reeks</span><span class="sxs-lookup"><span data-stu-id="4dd0d-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="4dd0d-155">NVIDIA Tesla M60 GPU</span><span class="sxs-lookup"><span data-stu-id="4dd0d-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="4dd0d-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="4dd0d-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="4dd0d-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="4dd0d-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="4dd0d-158">7.3 op basis van CentOS</span><span class="sxs-lookup"><span data-stu-id="4dd0d-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="4dd0d-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-159">(Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-160">NVIDIA RASTER 4.3 stuurprogramma 's</span><span class="sxs-lookup"><span data-stu-id="4dd0d-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="4dd0d-161">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-161">N/A</span></span> |

<span data-ttu-id="4dd0d-162">* RDMA-connectiviteit op NC24r VM's wordt op 7.3 HPC met Intel MPI op basis van CentOS ondersteund.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="4dd0d-163">Windows-groepen - configuratie van virtuele machine</span><span class="sxs-lookup"><span data-stu-id="4dd0d-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="4dd0d-164">Grootte</span><span class="sxs-lookup"><span data-stu-id="4dd0d-164">Size</span></span> | <span data-ttu-id="4dd0d-165">Mogelijkheid</span><span class="sxs-lookup"><span data-stu-id="4dd0d-165">Capability</span></span> | <span data-ttu-id="4dd0d-166">Besturingssystemen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-166">Operating systems</span></span> | <span data-ttu-id="4dd0d-167">Vereiste software</span><span class="sxs-lookup"><span data-stu-id="4dd0d-167">Required software</span></span> | <span data-ttu-id="4dd0d-168">Instellingen voor toepassingen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="4dd0d-169">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="4dd0d-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="4dd0d-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="4dd0d-170">RDMA</span></span> | <span data-ttu-id="4dd0d-171">Windows Server 2012 R2 of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="4dd0d-172">WindowsServer 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-173">Microsoft MPI 2012 R2 of hoger, of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="4dd0d-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="4dd0d-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="4dd0d-175">HpcVMDrivers Azure VM-extensie</span><span class="sxs-lookup"><span data-stu-id="4dd0d-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="4dd0d-176">Communicatie tussen knooppunten inschakelen, uitschakelen van de uitvoering van gelijktijdige taken</span><span class="sxs-lookup"><span data-stu-id="4dd0d-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="4dd0d-177">NC reeks *</span><span class="sxs-lookup"><span data-stu-id="4dd0d-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="4dd0d-178">NVIDIA Tesla R80 GPU</span><span class="sxs-lookup"><span data-stu-id="4dd0d-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="4dd0d-179">WindowsServer 2016 of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="4dd0d-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-181">NVIDIA Tesla stuurprogramma's of CUDA Toolkit 8.0 's</span><span class="sxs-lookup"><span data-stu-id="4dd0d-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="4dd0d-182">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-182">N/A</span></span> | 
| [<span data-ttu-id="4dd0d-183">NV reeks</span><span class="sxs-lookup"><span data-stu-id="4dd0d-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="4dd0d-184">NVIDIA Tesla M60 GPU</span><span class="sxs-lookup"><span data-stu-id="4dd0d-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="4dd0d-185">WindowsServer 2016 of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="4dd0d-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="4dd0d-187">NVIDIA RASTER 4.3 stuurprogramma 's</span><span class="sxs-lookup"><span data-stu-id="4dd0d-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="4dd0d-188">N.v.t.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-188">N/A</span></span> |

<span data-ttu-id="4dd0d-189">* RDMA-connectiviteit op NC24r VM's wordt ondersteund op Windows Server 2012 R2 met de extensie HpcVMDrivers en Microsoft MPI of Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="4dd0d-190">Windows-groepen - configuratie voor Cloud-services</span><span class="sxs-lookup"><span data-stu-id="4dd0d-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="4dd0d-191">N-serie grootten worden niet ondersteund in de Batch-pools met de configuratie van de cloud-services.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-191">N-series sizes are not supported in Batch pools with the cloud services configuration.</span></span>
>

| <span data-ttu-id="4dd0d-192">Grootte</span><span class="sxs-lookup"><span data-stu-id="4dd0d-192">Size</span></span> | <span data-ttu-id="4dd0d-193">Mogelijkheid</span><span class="sxs-lookup"><span data-stu-id="4dd0d-193">Capability</span></span> | <span data-ttu-id="4dd0d-194">Besturingssystemen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-194">Operating systems</span></span> | <span data-ttu-id="4dd0d-195">Vereiste software</span><span class="sxs-lookup"><span data-stu-id="4dd0d-195">Required software</span></span> | <span data-ttu-id="4dd0d-196">Instellingen voor toepassingen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="4dd0d-197">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="4dd0d-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="4dd0d-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="4dd0d-198">RDMA</span></span> | <span data-ttu-id="4dd0d-199">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="4dd0d-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="4dd0d-200">WindowsServer 2012 of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="4dd0d-201">Windows Server 2008 R2 (Gast OS-familie)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="4dd0d-202">Microsoft MPI 2012 R2 of hoger, of</span><span class="sxs-lookup"><span data-stu-id="4dd0d-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="4dd0d-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="4dd0d-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="4dd0d-204">HpcVMDrivers Azure VM-extensie</span><span class="sxs-lookup"><span data-stu-id="4dd0d-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="4dd0d-205">Communicatie tussen knooppunten, inschakelen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="4dd0d-206">uitvoering van gelijktijdige taken uitschakelen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="4dd0d-207">Groep configuratie-opties</span><span class="sxs-lookup"><span data-stu-id="4dd0d-207">Pool configuration options</span></span>

<span data-ttu-id="4dd0d-208">Voor het configureren van een gespecialiseerde VM-grootte voor uw Batch-pool, bieden de Batch-API's en hulpprogramma's voor verschillende opties voor het installeren van vereiste software of stuurprogramma's, met inbegrip van:</span><span class="sxs-lookup"><span data-stu-id="4dd0d-208">To configure a specialized VM size for your Batch pool, the Batch APIs and tools provide several options to install required software or drivers, including:</span></span>

* <span data-ttu-id="4dd0d-209">[Begintaak](batch-api-basics.md#start-task) -een installatiepakket voor als een resource-bestand uploaden naar Azure storage-account in dezelfde regio bevinden als het Batch-account.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file to an Azure storage account in the same region as the Batch account.</span></span> <span data-ttu-id="4dd0d-210">Maak een opdrachtregel start-taak voor het bronbestand voor de achtergrond installeren wanneer de groep van toepassingen wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-210">Create a start task command line to install the resource file silently when the pool starts.</span></span> <span data-ttu-id="4dd0d-211">Zie voor meer informatie de [REST API-documentatie](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-211">For more information, see the [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="4dd0d-212">De begintaak moet worden uitgevoerd met verhoogde bevoegdheden (admin) machtigingen en het voor een correcte werking moet wachten.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-212">The start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="4dd0d-213">[Toepassingspakket](batch-application-packages.md) : een gecomprimeerde installatiepakket toevoegen aan uw Batch-account en het configureren van de verwijzing naar een pakket in de groep.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-213">[Application package](batch-application-packages.md) - Add a zipped installation package to your Batch account, and configure a package reference in the pool.</span></span> <span data-ttu-id="4dd0d-214">Deze instelling wordt geüpload en het pakket op alle knooppunten in de pool wordt uitgepakt.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-214">This setting uploads and unzips the package on all nodes in the pool.</span></span> <span data-ttu-id="4dd0d-215">Als het pakket een installatieprogramma, maakt u een begin taak vanaf de opdrachtregel voor de achtergrond de app te installeren op alle knooppunten van de groep van toepassingen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-215">If the package is an installer, create a start task command line to silently install the app on all pool nodes.</span></span> <span data-ttu-id="4dd0d-216">Installeer het pakket desgewenst wanneer een taak is gepland op een knooppunt worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-216">Optionally, install the package when a task is scheduled to run on a node.</span></span>

* <span data-ttu-id="4dd0d-217">[Afbeelding van aangepaste toepassingen](batch-api-basics.md#pool) - maken van een aangepaste Windows of Linux-VM-installatiekopie met stuurprogramma's, software, of andere instellingen die vereist zijn voor de VM-grootte.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for the VM size.</span></span> <span data-ttu-id="4dd0d-218">Als u uw Batch-account in de configuratie van het abonnement hebt gemaakt, geeft u de aangepaste afbeelding voor uw Batch-pool.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-218">If you created your Batch account in the user subscription configuration, specify the custom image for your Batch pool.</span></span> <span data-ttu-id="4dd0d-219">(Aangepaste installatiekopieën worden niet ondersteund in de configuratie van de Batch-service-accounts.) Aangepaste installatiekopieën kunnen alleen worden gebruikt met toepassingen die in de configuratie van de virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-219">(Custom images are not supported in accounts in the Batch service configuration.) Custom images can only be used with pools in the virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="4dd0d-220">U niet in Batch-pools momenteel een aangepaste installatiekopie gemaakt met beheerde schijven of met Premium-opslag gebruiken.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="4dd0d-221">[Batch-scheepswerf](https://github.com/Azure/batch-shipyard) configureert automatisch de GPU en RDMA transparant werken met beperkte workloads in Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures the GPU and RDMA to work transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="4dd0d-222">Batch scheepswerf wordt volledig aangedreven met configuratiebestanden.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="4dd0d-223">Er zijn veel voorbeeld recept configuraties beschikbaar waarmee GPU en RDMA werkbelastingen, zoals de [CNTK GPU recept](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) die configureert vooraf GPU-stuurprogramma's op virtuele machines N-reeks en cognitieve Toolkit voor Microsoft-software als een Docker-installatiekopie wordt geladen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as the [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="4dd0d-224">Voorbeeld: Microsoft MPI op een groep A8-VM</span><span class="sxs-lookup"><span data-stu-id="4dd0d-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="4dd0d-225">Windows MPI-toepassingen op een pool van Azure A8 knooppunten, hebt u nodig voor het installeren van een ondersteunde MPI-implementatie.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-225">To run Windows MPI applications on a pool of Azure A8 nodes, you need to install a supported MPI implementation.</span></span> <span data-ttu-id="4dd0d-226">Hier vindt u voorbeelden van stappen beschreven voor het installeren van [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) op een Windows-groep met behulp van een Batch-toepassingspakket.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-226">Here are sample steps to install [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="4dd0d-227">Download de [installatiepakket](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) voor de meest recente versie van Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-227">Download the [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for the latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="4dd0d-228">Maak een zipbestand van het pakket.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-228">Create a zip file of the package.</span></span>
3. <span data-ttu-id="4dd0d-229">Uploaden van het pakket aan uw Batch-account.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-229">Upload the package to your Batch account.</span></span> <span data-ttu-id="4dd0d-230">Zie voor stappen de [toepassingspakketten](batch-application-packages.md) richtlijnen.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-230">For steps, see the [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="4dd0d-231">Geef een toepassings-id zoals *MSMPI*, en een versie zoals *8.1*.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="4dd0d-232">Maak een pool met de Batch-API's of Azure-portal in de cloud services-configuratie met het gewenste aantal knooppunten en de schaal.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-232">Using the Batch APIs or Azure portal, create a pool in the cloud services configuration with the desired number of nodes and scale.</span></span> <span data-ttu-id="4dd0d-233">De volgende tabel ziet u voorbeelden van instellingen voor het instellen van MPI in met behulp van een begintaak zonder toezicht:</span><span class="sxs-lookup"><span data-stu-id="4dd0d-233">The following table shows sample settings to set up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="4dd0d-234">Instelling</span><span class="sxs-lookup"><span data-stu-id="4dd0d-234">Setting</span></span> | <span data-ttu-id="4dd0d-235">Waarde</span><span class="sxs-lookup"><span data-stu-id="4dd0d-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="4dd0d-236">**Type installatiekopie**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-236">**Image Type**</span></span> | <span data-ttu-id="4dd0d-237">Cloudservices</span><span class="sxs-lookup"><span data-stu-id="4dd0d-237">Cloud Services</span></span> |
| <span data-ttu-id="4dd0d-238">**OS-familie**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-238">**OS family**</span></span> | <span data-ttu-id="4dd0d-239">Windows Server 2012 R2 (OS-familie 4)</span><span class="sxs-lookup"><span data-stu-id="4dd0d-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="4dd0d-240">**De grootte van knooppunt**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-240">**Node size**</span></span> | <span data-ttu-id="4dd0d-241">A8-standaard</span><span class="sxs-lookup"><span data-stu-id="4dd0d-241">A8 Standard</span></span> |
| <span data-ttu-id="4dd0d-242">**De communicatie tussen knooppunten is ingeschakeld**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-242">**Internode communication enabled**</span></span> | <span data-ttu-id="4dd0d-243">True</span><span class="sxs-lookup"><span data-stu-id="4dd0d-243">True</span></span> |
| <span data-ttu-id="4dd0d-244">**Maximum aantal taken per knooppunt**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-244">**Max tasks per node**</span></span> | <span data-ttu-id="4dd0d-245">1</span><span class="sxs-lookup"><span data-stu-id="4dd0d-245">1</span></span> |
| <span data-ttu-id="4dd0d-246">**Verwijzingen naar Application-pakket**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-246">**Application package references**</span></span> | <span data-ttu-id="4dd0d-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="4dd0d-247">MSMPI</span></span> |
| <span data-ttu-id="4dd0d-248">**Begintaak ingeschakeld**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-248">**Start task enabled**</span></span> | <span data-ttu-id="4dd0d-249">True</span><span class="sxs-lookup"><span data-stu-id="4dd0d-249">True</span></span><br><span data-ttu-id="4dd0d-250">**Vanaf de opdrachtregel** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="4dd0d-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="4dd0d-251">**Gebruikersidentiteit** -Pool autouser, admin</span><span class="sxs-lookup"><span data-stu-id="4dd0d-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="4dd0d-252">**Wacht tot succes** : True</span><span class="sxs-lookup"><span data-stu-id="4dd0d-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="4dd0d-253">Voorbeeld: NVIDIA Tesla stuurprogramma's op de NC-VM-groep</span><span class="sxs-lookup"><span data-stu-id="4dd0d-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="4dd0d-254">CUDA toepassingen op een pool van Linux NC-knooppunten uitgevoerd, moet u CUDA Toolkit 8.0 installeren op de knooppunten.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-254">To run CUDA applications on a pool of Linux NC nodes, you need to install CUDA Toolkit 8.0 on the nodes.</span></span> <span data-ttu-id="4dd0d-255">De Toolkit installeert de benodigde NVIDIA Tesla GPU-stuurprogramma's.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-255">The Toolkit installs the necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="4dd0d-256">Hier volgen voorbeelden van stappen beschreven voor het implementeren van een aangepaste installatiekopie Ubuntu 16.04 TNS met de GPU-stuurprogramma's:</span><span class="sxs-lookup"><span data-stu-id="4dd0d-256">Here are sample steps to deploy a custom Ubuntu 16.04 LTS image with the GPU drivers:</span></span>

1. <span data-ttu-id="4dd0d-257">Implementeer een Azure-NC6 VM Ubuntu 16.04 TNS uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="4dd0d-258">Bijvoorbeeld, de virtuele machine maken in de regio VS Zuid-centraal.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-258">For example, create the VM in the US South Central region.</span></span> <span data-ttu-id="4dd0d-259">Zorg ervoor dat u de virtuele machine met de standard-opslag maken en *zonder* schijven die worden beheerd.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-259">Make sure that you create the VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="4dd0d-260">Volg de stappen voor het verbinding maken met de virtuele machine en [CUDA stuurprogramma's installeren](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-260">Follow the steps to connect to the VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="4dd0d-261">De Linux-agent inrichting ervan ongedaan en vervolgens vastleggen Linux VM-installatiekopie met de Azure CLI 1.0-opdrachten.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-261">Deprovision the Linux agent, and then capture Linux VM image using the Azure CLI 1.0 commands.</span></span> <span data-ttu-id="4dd0d-262">Zie voor stappen [vastleggen van een virtuele Linux-machine uitgevoerd op Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="4dd0d-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="4dd0d-263">Noteer de URI van de installatiekopie.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-263">Make a note of the image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="4dd0d-264">Gebruik geen 2.0 voor Azure CLI-opdrachten voor het vastleggen van de afbeelding voor Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-264">Do not use Azure CLI 2.0 commands to capture the image for Azure Batch.</span></span> <span data-ttu-id="4dd0d-265">De opdrachten CLI 2.0 vastleggen op dit moment alleen virtuele machines die zijn gemaakt met behulp van beheerde schijven.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-265">Currently the CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="4dd0d-266">Maak een Batch-account met de configuratie van de gebruiker abonnement in een regio die ondersteuning biedt voor NC virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-266">Create a Batch account, with the user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="4dd0d-267">Met de Batch-API's of Azure-portal een pool maken met de aangepaste installatiekopie en met het gewenste aantal knooppunten en de schaal.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-267">Using the Batch APIs or Azure portal, create a pool using the custom image and with the desired number of nodes and scale.</span></span> <span data-ttu-id="4dd0d-268">De volgende tabel ziet u voorbeelden van toepassingen van instellingen voor de installatiekopie:</span><span class="sxs-lookup"><span data-stu-id="4dd0d-268">The following table shows sample pool settings for the image:</span></span>

| <span data-ttu-id="4dd0d-269">Instelling</span><span class="sxs-lookup"><span data-stu-id="4dd0d-269">Setting</span></span> | <span data-ttu-id="4dd0d-270">Waarde</span><span class="sxs-lookup"><span data-stu-id="4dd0d-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="4dd0d-271">**Type installatiekopie**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-271">**Image Type**</span></span> | <span data-ttu-id="4dd0d-272">Aangepaste installatiekopie</span><span class="sxs-lookup"><span data-stu-id="4dd0d-272">Custom Image</span></span> |
| <span data-ttu-id="4dd0d-273">**Aangepaste installatiekopie**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-273">**Custom Image**</span></span> | <span data-ttu-id="4dd0d-274">Afbeelding URI van het formulier`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="4dd0d-274">Image URI of the form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="4dd0d-275">**Knooppunt agent SKU**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-275">**Node agent SKU**</span></span> | <span data-ttu-id="4dd0d-276">batch.node.Ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="4dd0d-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="4dd0d-277">**De grootte van knooppunt**</span><span class="sxs-lookup"><span data-stu-id="4dd0d-277">**Node size**</span></span> | <span data-ttu-id="4dd0d-278">Standard NC6</span><span class="sxs-lookup"><span data-stu-id="4dd0d-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="4dd0d-279">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="4dd0d-279">Next steps</span></span>

* <span data-ttu-id="4dd0d-280">Zie voor informatie over het uitvoeren van MPI-taken op een Azure Batch-pool de [Windows](batch-mpi.md) of [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) voorbeelden.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-280">To run MPI jobs on an Azure Batch pool, see the [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="4dd0d-281">Zie voor voorbeelden van GPU werkbelastingen op Batch de [Batch scheepswerf](https://github.com/Azure/batch-shipyard/) recepten.</span><span class="sxs-lookup"><span data-stu-id="4dd0d-281">For examples of GPU workloads on Batch, see the [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>