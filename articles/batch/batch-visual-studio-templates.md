---
title: met Visual Studio-projectsjablonen - Azure Batch-oplossingen bouwen aaaStart | Microsoft Docs
description: Meer informatie over hoe sjablonen voor Visual Studio-project kunt implementeren en uitvoeren van uw rekenintensieve workloads op Azure Batch.
services: batch
documentationcenter: .net
author: fayora
manager: timlt
editor: 
ms.assetid: 5e041ae2-25af-4882-a79e-3aa63c4bfb20
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 02/27/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a61c480ddc4dffd66c01220a137a3e852e39c338
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="use-visual-studio-project-templates-toojump-start-batch-solutions"></a><span data-ttu-id="cd8f6-103">Visual Studio-project sjablonen toojump start Batch-oplossingen gebruiken</span><span class="sxs-lookup"><span data-stu-id="cd8f6-103">Use Visual Studio project templates toojump-start Batch solutions</span></span>

<span data-ttu-id="cd8f6-104">Hallo **Job Manager** en **taak Processor Visual Studio sjablonen** bieden voor Batch code toohelp u tooimplement en voer uw rekenintensieve workloads op Batch met Hallo minste inspanning.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-104">hello **Job Manager** and **Task Processor Visual Studio templates** for Batch provide code toohelp you tooimplement and run your compute-intensive workloads on Batch with hello least amount of effort.</span></span> <span data-ttu-id="cd8f6-105">Dit document beschrijft deze sjablonen en biedt richtlijnen voor het toouse ze.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-105">This document describes these templates and provides guidance for how toouse them.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cd8f6-106">In dit artikel wordt besproken enige informatie die van toepassing zijn toothese twee sjablonen en wordt ervan uitgegaan dat u bekend met Hallo Batch-service en de belangrijkste concepten gerelateerde tooit bent: opslaggroepen, rekenknooppunten, jobs en taken, jobbeheertaken, omgevingsvariabelen en andere relevante informatie.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-106">This article discusses only information applicable toothese two templates, and assumes that you are familiar with hello Batch service and key concepts related tooit: pools, compute nodes, jobs and tasks, job manager tasks, environment variables, and other relevant information.</span></span> <span data-ttu-id="cd8f6-107">U vindt meer informatie in [basisbeginselen van Azure Batch](batch-technical-overview.md), [overzicht van de Batch-functies voor ontwikkelaars](batch-api-basics.md), en [aan de slag met hello Azure Batch-bibliotheek voor .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-107">You can find more information in [Basics of Azure Batch](batch-technical-overview.md), [Batch feature overview for developers](batch-api-basics.md), and [Get started with hello Azure Batch library for .NET](batch-dotnet-get-started.md).</span></span>
> 
> 

## <a name="high-level-overview"></a><span data-ttu-id="cd8f6-108">Overzicht</span><span class="sxs-lookup"><span data-stu-id="cd8f6-108">High-level overview</span></span>
<span data-ttu-id="cd8f6-109">Hallo Job Manager en de processorsnelheid van de taak sjablonen zijn gebruikte toocreate twee nuttig onderdelen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-109">hello Job Manager and Task Processor templates can be used toocreate two useful components:</span></span>

* <span data-ttu-id="cd8f6-110">Een jobbeheertaak waarmee de splitser van een taak die een taak verbreken kunt omlaag in meerdere taken die onafhankelijk, parallel kunnen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-110">A job manager task that implements a job splitter that can break a job down into multiple tasks that can run independently, in parallel.</span></span>
* <span data-ttu-id="cd8f6-111">Een taak processor die gebruikt tooperform vooraf verwerken en naverwerking rond een toepassing vanaf de opdrachtregel worden kan.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-111">A task processor that can be used tooperform pre-processing and post-processing around an application command line.</span></span>

<span data-ttu-id="cd8f6-112">Bijvoorbeeld in een scenario film rendering zou Hallo taak splitser zet een taak één film in honderden of duizenden afzonderlijke taken die afzonderlijke frames afzonderlijk wilt verwerken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-112">For example, in a movie rendering scenario, hello job splitter would turn a single movie job into hundreds or thousands of separate tasks that would process individual frames separately.</span></span> <span data-ttu-id="cd8f6-113">Dienovereenkomstig, Hallo taak processor zou Hallo rendering toepassing en alle afhankelijke processen die vereist toorender zijn elk frame aanroepen, evenals aanvullende acties (bijvoorbeeld kopiëren Hallo weergegeven frame tooa opslaglocatie) uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-113">Correspondingly, hello task processor would invoke hello rendering application and all dependent processes that are needed toorender each frame, as well as perform any additional actions (for example, copying hello rendered frame tooa storage location).</span></span>

> [!NOTE]
> <span data-ttu-id="cd8f6-114">Hallo Job Manager en de processorsnelheid van de taak sjablonen zijn onafhankelijk van elkaar, dus u toouse beide of slechts één van beide, afhankelijk van Hallo vereisten van uw compute-taak en op uw voorkeuren kunt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-114">hello Job Manager and Task Processor templates are independent of each other, so you can choose toouse both, or only one of them, depending on hello requirements of your compute job and on your preferences.</span></span>
> 
> 

<span data-ttu-id="cd8f6-115">Zoals u in het onderstaande diagram kunt hello, doorlopen een compute-taak die gebruikmaakt van deze sjablonen drie fasen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-115">As shown in hello diagram below, a compute job that uses these templates will go through three stages:</span></span>

1. <span data-ttu-id="cd8f6-116">Hallo clientcode (bijvoorbeeld toepassingen, web-service, enzovoort) verzendt een taak toohello Batch-service op Azure, als de taak manager taak Hallo job manager programma opgeven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-116">hello client code (e.g., application, web service, etc.) submits a job toohello Batch service on Azure, specifying as its job manager task hello job manager program.</span></span>
2. <span data-ttu-id="cd8f6-117">Hallo Batch-service wordt Hallo jobbeheertaak op een rekenknooppunt uitgevoerd en hello taak splitser gestart Hallo opgegeven aantal taak processor taken op als veel waar nodig rekenknooppunten, op basis van het Hallo-parameters en specificaties in Hallo taak splitser code.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-117">hello Batch service runs hello job manager task on a compute node and hello job splitter launches hello specified number of task processor tasks, on as many compute nodes as required, based on hello parameters and specifications in hello job splitter code.</span></span>
3. <span data-ttu-id="cd8f6-118">Hallo taak processor taken onafhankelijk uitvoeren, parallel tooprocess Hallo invoergegevens en uitvoergegevens Hallo genereren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-118">hello task processor tasks run independently, in parallel, tooprocess hello input data and generate hello output data.</span></span>

![Diagram die weergeeft hoe clientcode samenwerkt met Hallo Batch-service][diagram01]

## <a name="prerequisites"></a><span data-ttu-id="cd8f6-120">Vereisten</span><span class="sxs-lookup"><span data-stu-id="cd8f6-120">Prerequisites</span></span>
<span data-ttu-id="cd8f6-121">toouse hello Batch sjablonen, moet u de volgende Hallo:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-121">toouse hello Batch templates, you will need hello following:</span></span>

* <span data-ttu-id="cd8f6-122">Een computer met Visual Studio 2015 geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-122">A computer with Visual Studio 2015 installed.</span></span> <span data-ttu-id="cd8f6-123">Batch-sjablonen zijn momenteel alleen ondersteund voor Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-123">Batch templates are currently only supported for Visual Studio 2015.</span></span>
* <span data-ttu-id="cd8f6-124">Hallo Batch sjablonen, die beschikbaar zijn vanuit Hallo [Visual Studio-galerie] [ vs_gallery] als Visual Studio-extensies.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-124">hello Batch templates, which are available from hello [Visual Studio Gallery][vs_gallery] as Visual Studio extensions.</span></span> <span data-ttu-id="cd8f6-125">Er zijn twee manieren tooget Hallo-sjablonen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-125">There are two ways tooget hello templates:</span></span>
  
  * <span data-ttu-id="cd8f6-126">Hallo sjablonen met behulp van Hallo installeren **uitbreidingen en Updates** dialoogvenster in Visual Studio (Zie voor meer informatie [zoeken en met behulp van Visual Studio Extensions][vs_find_use_ext]).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-126">Install hello templates using hello **Extensions and Updates** dialog box in Visual Studio (for more information, see [Finding and Using Visual Studio Extensions][vs_find_use_ext]).</span></span> <span data-ttu-id="cd8f6-127">In Hallo **uitbreidingen en Updates** dialoogvenster, zoeken en downloaden Hallo beide uitbreidingen te volgen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-127">In hello **Extensions and Updates** dialog box, search and download hello following two extensions:</span></span>
    
    * <span data-ttu-id="cd8f6-128">Azure Batch-Job Manager met de taak splitsen</span><span class="sxs-lookup"><span data-stu-id="cd8f6-128">Azure Batch Job Manager with Job Splitter</span></span>
    * <span data-ttu-id="cd8f6-129">Processor van Azure Batch-taak</span><span class="sxs-lookup"><span data-stu-id="cd8f6-129">Azure Batch Task Processor</span></span>
  * <span data-ttu-id="cd8f6-130">Hallo sjablonen downloaden uit de online galerie Hallo voor Visual Studio: [projectsjablonen voor Microsoft Azure-Batch][vs_gallery_templates]</span><span class="sxs-lookup"><span data-stu-id="cd8f6-130">Download hello templates from hello online gallery for Visual Studio: [Microsoft Azure Batch Project Templates][vs_gallery_templates]</span></span>
* <span data-ttu-id="cd8f6-131">Als u van plan toouse hello bent [toepassingspakketten](batch-application-packages.md) functie toodeploy Hallo job manager en taak processor toohello Batch-rekenknooppunten, moet u toolink een storage account tooyour Batch-account.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-131">If you plan toouse hello [Application Packages](batch-application-packages.md) feature toodeploy hello job manager and task processor toohello Batch compute nodes, you need toolink a storage account tooyour Batch account.</span></span>

## <a name="preparation"></a><span data-ttu-id="cd8f6-132">Voorbereiding</span><span class="sxs-lookup"><span data-stu-id="cd8f6-132">Preparation</span></span>
<span data-ttu-id="cd8f6-133">Het is raadzaam om een oplossing met uw job manager, evenals de processor taak maken omdat dit eenvoudiger tooshare code tussen uw job manager en de taak processor-programma's kunt aanbrengen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-133">We recommend creating a solution that can contain your job manager as well as your task processor, because this can make it easier tooshare code between your job manager and task processor programs.</span></span> <span data-ttu-id="cd8f6-134">toocreate deze oplossing als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-134">toocreate this solution, follow these steps:</span></span>

1. <span data-ttu-id="cd8f6-135">Open Visual Studio en selecteer **bestand** > **nieuw** > **Project**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-135">Open Visual Studio and select **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="cd8f6-136">Onder **sjablonen**, vouw **andere projecttypen**, klikt u op **Visual Studio-oplossingen**, en selecteer vervolgens **blanco-oplossing**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-136">Under **Templates**, expand **Other Project Types**, click **Visual Studio Solutions**, and then select **Blank Solution**.</span></span>
3. <span data-ttu-id="cd8f6-137">Typ een naam die uw toepassing en Hallo doel van deze oplossing (bijvoorbeeld ' LitwareBatchTaskPrograms').</span><span class="sxs-lookup"><span data-stu-id="cd8f6-137">Type a name that describes your application and hello purpose of this solution (e.g., "LitwareBatchTaskPrograms").</span></span>
4. <span data-ttu-id="cd8f6-138">toocreate Hallo nieuwe oplossing, klikt u op **OK**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-138">toocreate hello new solution, click **OK**.</span></span>

## <a name="job-manager-template"></a><span data-ttu-id="cd8f6-139">Taak Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="cd8f6-139">Job Manager template</span></span>
<span data-ttu-id="cd8f6-140">Hallo Job Manager-sjabloon kunt tooimplement een jobbeheertaak die Hallo van de volgende activiteiten kunt uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-140">hello Job Manager template helps you tooimplement a job manager task that can perform hello following actions:</span></span>

* <span data-ttu-id="cd8f6-141">Een job onderverdeeld in meerdere taken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-141">Split a job into multiple tasks.</span></span>
* <span data-ttu-id="cd8f6-142">Deze toorun taken in Batch verzenden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-142">Submit those tasks toorun on Batch.</span></span>

> [!NOTE]
> <span data-ttu-id="cd8f6-143">Zie voor meer informatie over jobbeheertaken [overzicht van de Batch-functies voor ontwikkelaars](batch-api-basics.md#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-143">For more information about job manager tasks, see [Batch feature overview for developers](batch-api-basics.md#job-manager-task).</span></span>
> 
> 

### <a name="create-a-job-manager-using-hello-template"></a><span data-ttu-id="cd8f6-144">Een Job Manager met Hallo-sjabloon maken</span><span class="sxs-lookup"><span data-stu-id="cd8f6-144">Create a Job Manager using hello template</span></span>
<span data-ttu-id="cd8f6-145">tooadd een job manager toohello oplossing die u eerder hebt gemaakt, als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-145">tooadd a job manager toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="cd8f6-146">Open uw bestaande oplossing in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-146">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="cd8f6-147">Klik in Solution Explorer met de rechtermuisknop op Hallo-oplossing, klikt u op **toevoegen** > **nieuw Project**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-147">In Solution Explorer, right-click hello solution, click **Add** > **New Project**.</span></span>
3. <span data-ttu-id="cd8f6-148">Onder **Visual C#**, klikt u op **Cloud**, en klik vervolgens op **Azure Batch-Job Manager met taak splitser**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-148">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Job Manager with Job Splitter**.</span></span>
4. <span data-ttu-id="cd8f6-149">Typ een naam waarmee u een beschrijving van uw toepassing en dit project (bijvoorbeeld als Hallo job manager identificeert 'LitwareJobManager').</span><span class="sxs-lookup"><span data-stu-id="cd8f6-149">Type a name that describes your application and identifies this project as hello job manager (e.g. "LitwareJobManager").</span></span>
5. <span data-ttu-id="cd8f6-150">toocreate Hallo-project, klik op **OK**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-150">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="cd8f6-151">Ten slotte build Hallo project tooforce Visual Studio tooload alle waarnaar wordt verwezen NuGet-pakketten en tooverify die Hallo project geldig is voordat u begint met het wijzigen van deze.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-151">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="job-manager-template-files-and-their-purpose"></a><span data-ttu-id="cd8f6-152">De sjabloonbestanden Job Manager en hun doel</span><span class="sxs-lookup"><span data-stu-id="cd8f6-152">Job Manager template files and their purpose</span></span>
<span data-ttu-id="cd8f6-153">Wanneer u een project met Hallo Job Manager-sjabloon maakt, genereert het codebestanden drie groepen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-153">When you create a project using hello Job Manager template, it generates three groups of code files:</span></span>

* <span data-ttu-id="cd8f6-154">Hallo belangrijkste programmabestand (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-154">hello main program file (Program.cs).</span></span> <span data-ttu-id="cd8f6-155">Dit bevat toegangspunt Hallo-programma en op het hoogste niveau uitzonderingsverwerking.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-155">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="cd8f6-156">U mag niet normaal gesproken deze toomodify nodig.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-156">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="cd8f6-157">Hallo Framework-map.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-157">hello Framework directory.</span></span> <span data-ttu-id="cd8f6-158">Dit document bevat Hallo-bestanden die verantwoordelijk is voor Hallo 'standaard' werk dat door Hallo taak programma manager – uitpakken van de parameters, toe te voegen taken toohello batchverwerking, enzovoort. U mag niet toomodify normaal gesproken moet deze bestanden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-158">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="cd8f6-159">Hallo taak splitser bestand (JobSplitter.cs).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-159">hello job splitter file (JobSplitter.cs).</span></span> <span data-ttu-id="cd8f6-160">Dit is waar u uw toepassingsspecifieke logica voor het splitsen van een taak in taken wordt geplaatst.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-160">This is where you will put your application-specific logic for splitting a job into tasks.</span></span>

<span data-ttu-id="cd8f6-161">Natuurlijk kunt u aanvullende bestanden toevoegen als vereiste toosupport uw taak splitser code, afhankelijk van de complexiteit Hallo van Hallo taak logica splitsen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-161">Of course you can add additional files as required toosupport your job splitter code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="cd8f6-162">Hallo sjabloon genereert ook standaard .NET projectbestanden zoals een .csproj-bestand, app.config, packages.config, enz.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-162">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="cd8f6-163">Hallo rest van deze sectie beschrijft Hallo verschillende bestanden en de codestructuur en wordt uitgelegd wat elke klasse doet.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-163">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![Visual Studio Solution Explorer toont van Hallo Job Manager sjabloonoplossing][solution_explorer01]

<span data-ttu-id="cd8f6-165">**Framework-bestanden**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-165">**Framework files**</span></span>

* <span data-ttu-id="cd8f6-166">`Configuration.cs`: Ingekapseld Hallo laden van gegevens van de taak configuratie zoals Batch accountdetails, gekoppelde opslagaccountreferenties taak en informatie en taakparameters.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-166">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="cd8f6-167">Het bevat ook toegang tooBatch gedefinieerde omgevingsvariabelen (Zie omgevingsinstellingen voor taken in Batch-documentatie voor Hallo) via Hallo Configuration.EnvironmentVariable klasse.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-167">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="cd8f6-168">`IConfiguration.cs`: Samenvattingen Hallo-implementatie van Hallo Configuration-klasse, zodat u kunt eenheid testen uw taak splitser met behulp van een valse of mock configuration-object.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-168">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="cd8f6-169">`JobManager.cs`: Het Hallo-onderdelen van Hallo job manager programma ingedeeld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-169">`JobManager.cs`: Orchestrates hello components of hello job manager program.</span></span> <span data-ttu-id="cd8f6-170">Is verantwoordelijk voor Hallo Hallo taak splitser, aanroepen van Hallo taak splitser, initialiseren en tijdens het verzenden van taken Hallo geretourneerd door Hallo taak splitser toohello taak submitter.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-170">It is responsible for hello initializing hello job splitter, invoking hello job splitter, and dispatching hello tasks returned by hello job splitter toohello task submitter.</span></span>
* <span data-ttu-id="cd8f6-171">`JobManagerException.cs`: Vertegenwoordigt een fout die Hallo job manager tooterminate vereist.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-171">`JobManagerException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="cd8f6-172">JobManagerException is gebruikte toowrap 'verwacht' fouten waarin specifieke diagnostische informatie kan worden opgegeven als onderdeel van de beëindiging.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-172">JobManagerException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>
* <span data-ttu-id="cd8f6-173">`TaskSubmitter.cs`: Deze klasse is geretourneerd door Hallo taak splitser toohello Batch-job verantwoordelijk tooadding-taken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-173">`TaskSubmitter.cs`: This class is responsible tooadding tasks returned by hello job splitter toohello Batch job.</span></span> <span data-ttu-id="cd8f6-174">Hallo Taakbeheer heeft klasse aggregeert Hallo reeks taken in batches voor efficiënt, maar tijdige toevoeging toohello taak vervolgens TaskSubmitter.SubmitTasks aanroepen in een achtergrondthread voor elke batch.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-174">hello JobManager class aggregates hello sequence of tasks into batches for efficient but timely addition toohello job, then calls TaskSubmitter.SubmitTasks on a background thread for each batch.</span></span>

<span data-ttu-id="cd8f6-175">**Taak splitsen**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-175">**Job Splitter**</span></span>

<span data-ttu-id="cd8f6-176">`JobSplitter.cs`: Deze klasse bevat toepassingsspecifieke logica voor het splitsen van Hallo taak in taken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-176">`JobSplitter.cs`: This class contains application-specific logic for splitting hello job into tasks.</span></span> <span data-ttu-id="cd8f6-177">Hallo framework roept Hallo JobSplitter.Split methode tooobtain een reeks van taken, die wordt toegevoegd toohello taak als Hallo-methode retourneert ze.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-177">hello framework invokes hello JobSplitter.Split method tooobtain a sequence of tasks, which it adds toohello job as hello method returns them.</span></span> <span data-ttu-id="cd8f6-178">Dit is Hallo klasse waarop u Hallo logica van de taak wordt invoeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-178">This is hello class where you will inject hello logic of your job.</span></span> <span data-ttu-id="cd8f6-179">Hallo gesplitste methode tooreturn een reeks CloudTask-exemplaren die Hallo taken waarin u toopartition Hallo taak wilt implementeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-179">Implement hello Split method tooreturn a sequence of CloudTask instances representing hello tasks into which you want toopartition hello job.</span></span>

<span data-ttu-id="cd8f6-180">**Standaard projectbestanden voor .NET-opdrachtregel**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-180">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="cd8f6-181">`App.config`: De standaard .NET toepassingsconfiguratiebestand.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-181">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="cd8f6-182">`Packages.config`: Standaard bestand NuGet-pakket voor afhankelijkheid.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-182">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="cd8f6-183">`Program.cs`: Bevat Hallo programma toegangspunt en uitzonderingsverwerking op het hoogste niveau.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-183">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

### <a name="implementing-hello-job-splitter"></a><span data-ttu-id="cd8f6-184">Hallo taak splitser implementeren</span><span class="sxs-lookup"><span data-stu-id="cd8f6-184">Implementing hello job splitter</span></span>
<span data-ttu-id="cd8f6-185">Wanneer u Hallo Job Manager sjabloonproject opent, hebben Hallo project Hallo JobSplitter.cs bestand standaard geopend.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-185">When you open hello Job Manager template project, hello project will have hello JobSplitter.cs file open by default.</span></span> <span data-ttu-id="cd8f6-186">U kunt implementeren Hallo splitsen logica voor Hallo taken in uw workload met Hallo Split() methode weergeven hieronder:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-186">You can implement hello split logic for hello tasks in your workload by using hello Split() method show below:</span></span>

```csharp
/// <summary>
/// Gets hello tasks into which toosplit hello job. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello job manager framework invokes hello Split method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation should return tasks lazily, for example using a C#
/// iterator and hello "yield return" statement; this allows tasks toobe added
/// and toostart running while splitting is still in progress.
/// </summary>
/// <returns>hello tasks toobe added toohello job. Tasks are added automatically
/// by hello job manager framework as they are returned by this method.</returns>
public IEnumerable<CloudTask> Split()
{
    // Your code for hello split logic goes here.
    int startFrame = Convert.ToInt32(_parameters["StartFrame"]);
    int endFrame = Convert.ToInt32(_parameters["EndFrame"]);

    for (int i = startFrame; i <= endFrame; i++)
    {
        yield return new CloudTask("myTask" + i, "cmd /c dir");
    }
}
```

> [!NOTE]
> <span data-ttu-id="cd8f6-187">Hallo aangetekend sectie in Hallo `Split()` methode is alleen-lezen gedeelte Hallo Hallo Job Manager sjablooncode die is bedoeld voor u toomodify door Hallo logica toosplit uw taken toe te voegen in verschillende taken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-187">hello annotated section in hello `Split()` method is hello only section of hello Job Manager template code that is intended for you toomodify by adding hello logic toosplit your jobs into different tasks.</span></span> <span data-ttu-id="cd8f6-188">Als u een andere sectie van de sjabloon Hallo toomodify wilt, zorg ervoor dat u met Batch werking, zijn familiarized en probeer uit een aantal Hallo [Batch-codevoorbeelden][github_samples].</span><span class="sxs-lookup"><span data-stu-id="cd8f6-188">If you want toomodify a different section of hello template, please ensure you are familiarized with how Batch works, and try out a few of hello [Batch code samples][github_samples].</span></span>
> 
> 

<span data-ttu-id="cd8f6-189">Uw implementatie Split() heeft toegang tot:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-189">Your Split() implementation has access to:</span></span>

* <span data-ttu-id="cd8f6-190">Hallo taakparameters via Hallo `_parameters` veld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-190">hello job parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="cd8f6-191">Hallo CloudJob object dat Hallo-taak, via Hallo `_job` veld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-191">hello CloudJob object representing hello job, via hello `_job` field.</span></span>
* <span data-ttu-id="cd8f6-192">Hallo CloudTask object dat Hallo jobbeheertaak, via Hallo `_jobManagerTask` veld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-192">hello CloudTask object representing hello job manager task, via hello `_jobManagerTask` field.</span></span>

<span data-ttu-id="cd8f6-193">Uw `Split()` implementatie hoeft tooadd taken toohello taak niet rechtstreeks.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-193">Your `Split()` implementation does not need tooadd tasks toohello job directly.</span></span> <span data-ttu-id="cd8f6-194">In plaats daarvan een reeks CloudTask objecten in uw code moet worden geretourneerd en worden deze toegevoegd toohello taak automatisch door Hallo framework klassen die Hallo taak splitser aanroepen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-194">Instead, your code should return a sequence of CloudTask objects, and these will be added toohello job automatically by hello framework classes that invoke hello job splitter.</span></span> <span data-ttu-id="cd8f6-195">Het algemene toouse C# iterator is (`yield return`) functie tooimplement taak splitsbalken omdat hierdoor Hallo taken toostart zo snel mogelijk worden uitgevoerd in plaats van alle taken toobe wachten berekend.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-195">It's common toouse C#'s iterator (`yield return`) feature tooimplement job splitters as this allows hello tasks toostart running as soon as possible rather than waiting for all tasks toobe calculated.</span></span>

<span data-ttu-id="cd8f6-196">**Taak splitser is mislukt**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-196">**Job splitter failure**</span></span>

<span data-ttu-id="cd8f6-197">Als de splitser taak er een fout optreedt, moet deze ofwel het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-197">If your job splitter encounters an error, it should either:</span></span>

* <span data-ttu-id="cd8f6-198">Hallo-reeks met behulp van Hallo C# beëindigen `yield break` -instructie waarin case Hallo Taakbeheer wordt beschouwd als geslaagd; of</span><span class="sxs-lookup"><span data-stu-id="cd8f6-198">Terminate hello sequence using hello C# `yield break` statement, in which case hello job manager will be treated as successful; or</span></span>
* <span data-ttu-id="cd8f6-199">Veroorzaak een uitzondering, waarbij case Hallo Taakbeheer wordt beschouwd als mislukt en mogelijk opnieuw worden geprobeerd, afhankelijk van hoe Hallo client deze heeft geconfigureerd).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-199">Throw an exception, in which case hello job manager will be treated as failed and may be retried depending on how hello client has configured it).</span></span>

<span data-ttu-id="cd8f6-200">In beide gevallen taken al geretourneerd door Hallo taak splitser en batchverwerking toegevoegde toohello worden in aanmerking komende toorun.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-200">In both cases, any tasks already returned by hello job splitter and added toohello Batch job will be eligible toorun.</span></span> <span data-ttu-id="cd8f6-201">Als u niet dat deze toohappen wilt, klikt u vervolgens kunt u:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-201">If you don't want this toohappen, then you could:</span></span>

* <span data-ttu-id="cd8f6-202">Hallo taak beëindigen voordat u terugkeert uit Hallo taak splitsen</span><span class="sxs-lookup"><span data-stu-id="cd8f6-202">Terminate hello job before returning from hello job splitter</span></span>
* <span data-ttu-id="cd8f6-203">Hallo gehele taak in de verzameling voordat deze wordt teruggezonden formuleren (dat wil zeggen, retourneren een `ICollection<CloudTask>` of `IList<CloudTask>` in plaats van de implementatie van uw taak splitser met behulp van een iterator C#)</span><span class="sxs-lookup"><span data-stu-id="cd8f6-203">Formulate hello entire task collection before returning it (that is, return an `ICollection<CloudTask>` or `IList<CloudTask>` instead of implementing your job splitter using a C# iterator)</span></span>
* <span data-ttu-id="cd8f6-204">Taak afhankelijkheden toomake die alle taken is afhankelijk van Hallo is gelukt Hallo job manager gebruiken</span><span class="sxs-lookup"><span data-stu-id="cd8f6-204">Use task dependencies toomake all tasks depend on hello successful completion of hello job manager</span></span>

<span data-ttu-id="cd8f6-205">**Nieuwe pogingen van Job manager**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-205">**Job manager retries**</span></span>

<span data-ttu-id="cd8f6-206">Als Hallo job manager is mislukt, wordt deze opnieuw uitgevoerd door de Batch-service, afhankelijk van de clientinstellingen voor opnieuw proberen Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-206">If hello job manager fails, it may be retried by hello Batch service depending on hello client retry settings.</span></span> <span data-ttu-id="cd8f6-207">Dit is in het algemeen veilig, omdat het als Hallo framework taken toohello taak toevoegt, worden alle taken die al bestaan genegeerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-207">In general, this is safe, because when hello framework adds tasks toohello job, it ignores any tasks that already exist.</span></span> <span data-ttu-id="cd8f6-208">Echter, als het berekenen van taken dure is, niet kunt u tooincur Hallo kosten voor het berekenen van de taken die al zijn toegevoegd toohello taak; Als u daarentegen als Hallo opnieuw uitvoeren is niet gegarandeerd toogenerate Hallo dezelfde taak-id's en vervolgens Hallo negeren van duplicaten gedrag wordt niet starten.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-208">However, if calculating tasks is expensive, you may not wish tooincur hello cost of recalculating tasks that have already been added toohello job; conversely, if hello re-run is not guaranteed toogenerate hello same task IDs then hello 'ignore duplicates' behavior will not kick in.</span></span> <span data-ttu-id="cd8f6-209">In dergelijke gevallen moet u uw taak splitser toodetect Hallo werk die al is uitgevoerd en wordt niet herhaald, bijvoorbeeld door het uitvoeren van een CloudJob.ListTasks voordat u begint tooyield taken ontwerpen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-209">In these cases you should design your job splitter toodetect hello work that has already been done and not repeat it, for example by performing a CloudJob.ListTasks before starting tooyield tasks.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-job-manager-template"></a><span data-ttu-id="cd8f6-210">Sluit codes en uitzonderingen in Hallo Job Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="cd8f6-210">Exit codes and exceptions in hello Job Manager template</span></span>
<span data-ttu-id="cd8f6-211">Afsluitcodes en uitzonderingen bieden een mechanisme toodetermine Hallo resultaat van het uitvoeren van een programma, en ze kunt tooidentify Hallo uitvoering van programma Hallo-problemen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-211">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help tooidentify any problems with hello execution of hello program.</span></span> <span data-ttu-id="cd8f6-212">Hallo Job Manager sjabloon implementeert Hallo afsluitcodes en uitzonderingen in deze sectie beschreven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-212">hello Job Manager template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="cd8f6-213">Een jobbeheertaak die wordt geïmplementeerd met Hallo Job Manager-sjabloon kunt drie mogelijke afsluitcodes retourneren:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-213">A job manager task that is implemented with hello Job Manager template can return three possible exit codes:</span></span>

| <span data-ttu-id="cd8f6-214">Code</span><span class="sxs-lookup"><span data-stu-id="cd8f6-214">Code</span></span> | <span data-ttu-id="cd8f6-215">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cd8f6-215">Description</span></span> |
| --- | --- |
| <span data-ttu-id="cd8f6-216">0</span><span class="sxs-lookup"><span data-stu-id="cd8f6-216">0</span></span> |<span data-ttu-id="cd8f6-217">Hallo job manager is voltooid.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-217">hello job manager completed successfully.</span></span> <span data-ttu-id="cd8f6-218">De code van de splitser taak toocompletion uitgevoerd en alle taken zijn toohello taak toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-218">Your job splitter code ran toocompletion, and all tasks were added toohello job.</span></span> |
| <span data-ttu-id="cd8f6-219">1</span><span class="sxs-lookup"><span data-stu-id="cd8f6-219">1</span></span> |<span data-ttu-id="cd8f6-220">Hallo jobbeheertaak is mislukt met een uitzondering in een 'verwachte' onderdeel van het Hallo-programma.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-220">hello job manager task failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="cd8f6-221">Hallo-uitzondering was vertaalde tooa JobManagerException met diagnostische gegevens en, indien mogelijk, suggesties voor het oplossen van Hallo is mislukt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-221">hello exception was translated tooa JobManagerException with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="cd8f6-222">2</span><span class="sxs-lookup"><span data-stu-id="cd8f6-222">2</span></span> |<span data-ttu-id="cd8f6-223">Hallo jobbeheertaak is mislukt met een 'onverwachte'-uitzondering.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-223">hello job manager task failed with an 'unexpected' exception.</span></span> <span data-ttu-id="cd8f6-224">Hallo uitzondering is vastgelegd toostandard uitvoer, maar Hallo job manager kan geen tooadd eventuele aanvullende informatie voor diagnose of herstel.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-224">hello exception was logged toostandard output, but hello job manager was unable tooadd any additional diagnostic or remediation information.</span></span> |

<span data-ttu-id="cd8f6-225">In geval van job manager taakfout Hallo sommige taken zijn mogelijk nog steeds toegevoegd toohello service voordat het Hallo-fout is opgetreden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-225">In hello case of job manager task failure, some tasks may still have been added toohello service before hello error occurred.</span></span> <span data-ttu-id="cd8f6-226">Deze taken worden uitgevoerd die normaal werken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-226">These tasks will run as normal.</span></span> <span data-ttu-id="cd8f6-227">Zie 'Splitser taakfout' hierboven voor bespreking van dit codepad.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-227">See "Job Splitter Failure" above for discussion of this code path.</span></span>

<span data-ttu-id="cd8f6-228">Alle Hallo-gegevens geretourneerd door de uitzonderingen worden geschreven in stdout.txt en stderr.txt-bestanden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-228">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="cd8f6-229">Zie voor meer informatie [fouten afhandelen](batch-api-basics.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-229">For more information, see [Error Handling](batch-api-basics.md#error-handling).</span></span>

### <a name="client-considerations"></a><span data-ttu-id="cd8f6-230">Overwegingen voor clients</span><span class="sxs-lookup"><span data-stu-id="cd8f6-230">Client considerations</span></span>
<span data-ttu-id="cd8f6-231">Deze sectie beschrijft de vereisten voor een implementatie van de client wanneer een job manager op basis van deze sjabloon wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-231">This section describes some client implementation requirements when invoking a job manager based on this template.</span></span> <span data-ttu-id="cd8f6-232">Zie [hoe toopass parameters en variabelen van clientcode Hallo](#pass-environment-settings) voor meer informatie over parameters en omgevingsinstellingen wordt doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-232">See [How toopass parameters and environment variables from hello client code](#pass-environment-settings) for details on passing parameters and environment settings.</span></span>

<span data-ttu-id="cd8f6-233">**Verplichte referenties**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-233">**Mandatory credentials**</span></span>

<span data-ttu-id="cd8f6-234">In de volgorde tooadd taken toohello Azure Batch-job vereist jobbeheertaak Hallo de URL van de Azure Batch-account en -sleutel.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-234">In order tooadd tasks toohello Azure Batch job, hello job manager task requires your Azure Batch account URL and key.</span></span> <span data-ttu-id="cd8f6-235">U moet deze in de omgevingsvariabelen met de naam YOUR_BATCH_URL en YOUR_BATCH_KEY doorgeven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-235">You must pass these in environment variables named YOUR_BATCH_URL and YOUR_BATCH_KEY.</span></span> <span data-ttu-id="cd8f6-236">U kunt deze in Hallo Job Manager instellen omgevingsinstellingen voor taken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-236">You can set these in hello Job Manager task environment settings.</span></span> <span data-ttu-id="cd8f6-237">Bijvoorbeeld in een C#-client:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-237">For example, in a C# client:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    new EnvironmentSetting("YOUR_BATCH_URL", "https://account.region.batch.azure.com"),
    new EnvironmentSetting("YOUR_BATCH_KEY", "{your_base64_encoded_account_key}"),
};
```
<span data-ttu-id="cd8f6-238">**Storage-referenties**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-238">**Storage credentials**</span></span>

<span data-ttu-id="cd8f6-239">Normaal gesproken Hallo client hoeft niet tooprovide Hallo gekoppelde storage-account referenties toohello jobbeheertaak omdat (a) meeste taak managers geen tooexplicitly toegang Hallo gekoppelde storage-account hoeven en (b) hello gekoppelde storage-account is vaak opgegeven tooall taken als een algemene omgevingsinstelling voor Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-239">Typically, hello client does not need tooprovide hello linked storage account credentials toohello job manager task because (a) most job managers do not need tooexplicitly access hello linked storage account and (b) hello linked storage account is often provided tooall tasks as a common environment setting for hello job.</span></span> <span data-ttu-id="cd8f6-240">Als u niet aanbiedt Hallo gekoppelde storage-account via het algemene omgevingsinstellingen Hallo, Taakbeheer Hallo toegang toolinked opslag vereist en moet u als volgt Hallo gekoppelde storage-referenties opgeven:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-240">If you are not providing hello linked storage account via hello common environment settings, and hello job manager requires access toolinked storage, then you should supply hello linked storage credentials as follows:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    /* other environment settings */
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="cd8f6-241">**Instellingen voor de taken van Job manager**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-241">**Job manager task settings**</span></span>

<span data-ttu-id="cd8f6-242">Hallo-client moet Hallo Taakbeheer ingesteld *killJobOnCompletion* te markeren**false**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-242">hello client should set hello job manager *killJobOnCompletion* flag too**false**.</span></span>

<span data-ttu-id="cd8f6-243">Het is doorgaans veilig voor Hallo client tooset *runExclusive* te**false**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-243">It is usually safe for hello client tooset *runExclusive* too**false**.</span></span>

<span data-ttu-id="cd8f6-244">Hallo-client moet gebruiken Hallo *resourceFiles* of *applicationPackageReferences* verzameling toohave Hallo Taakbeheer uitvoerbare (en de vereiste DLL-bestanden) toohello rekenknooppunt geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-244">hello client should use hello *resourceFiles* or *applicationPackageReferences* collection toohave hello job manager executable (and its required DLLs) deployed toohello compute node.</span></span>

<span data-ttu-id="cd8f6-245">Standaard Hallo job manager wordt niet opnieuw worden uitgevoerd als deze uitvalt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-245">By default, hello job manager will not be retried if it fails.</span></span> <span data-ttu-id="cd8f6-246">Afhankelijk van de logica van de manager taak wil Hallo client tooenable pogingen via *beperkingen*/*maxTaskRetryCount*.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-246">Depending on your job manager logic, hello client may want tooenable retries via *constraints*/*maxTaskRetryCount*.</span></span>

<span data-ttu-id="cd8f6-247">**Instellingen van de taak**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-247">**Job settings**</span></span>

<span data-ttu-id="cd8f6-248">Als Hallo taak splitser taken met afhankelijkheden verzendt, moet Hallo client Hallo-taak usesTaskDependencies tootrue instellen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-248">If hello job splitter emits tasks with dependencies, hello client must set hello job's usesTaskDependencies tootrue.</span></span>

<span data-ttu-id="cd8f6-249">In Hallo taak splitser model is ongebruikelijk voor clients toowish tooadd taken toojobs naast welke taak Hallo splitser wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-249">In hello job splitter model, it is unusual for clients toowish tooadd tasks toojobs over and above what hello job splitter creates.</span></span> <span data-ttu-id="cd8f6-250">Hallo-taak moet daarom normaal ingesteld door Hallo client *onAllTasksComplete* te**terminatejob**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-250">hello client should therefore normally set hello job's *onAllTasksComplete* too**terminatejob**.</span></span>

## <a name="task-processor-template"></a><span data-ttu-id="cd8f6-251">Sjabloon voor taak-Processor</span><span class="sxs-lookup"><span data-stu-id="cd8f6-251">Task Processor template</span></span>
<span data-ttu-id="cd8f6-252">Een taak Processor-sjabloon kunt u tooimplement een taak processor Hallo van de volgende activiteiten kunt uitvoeren:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-252">A Task Processor template helps you tooimplement a task processor that can perform hello following actions:</span></span>

* <span data-ttu-id="cd8f6-253">Hallo-informatie die vereist zijn voor elke Batch-taak toorun instellen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-253">Set up hello information required by each Batch task toorun.</span></span>
* <span data-ttu-id="cd8f6-254">Alle acties die zijn vereist voor elke Batch-taak uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-254">Run all actions required by each Batch task.</span></span>
* <span data-ttu-id="cd8f6-255">Opslaan van taak uitvoer toopersistent opslag.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-255">Save task outputs toopersistent storage.</span></span>

<span data-ttu-id="cd8f6-256">Hoewel een processor van de taak niet vereist toorun taken in Batch is, is Hallo groot voordeel van het gebruik van een processor van de taak dat deze een wrapper-tooimplement alle acties in de taak kan worden uitgevoerd op één locatie levert.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-256">Although a task processor is not required toorun tasks on Batch, hello key advantage of using a task processor is that it provides a wrapper tooimplement all task execution actions in one location.</span></span> <span data-ttu-id="cd8f6-257">Bijvoorbeeld, als u meerdere toepassingen in de context van Hallo van elke taak toorun moet of als u moet toocopy gegevensopslag toopersistent na het voltooien van elke taak.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-257">For example, if you need toorun several applications in hello context of each task, or if you need toocopy data toopersistent storage after completing each task.</span></span>

<span data-ttu-id="cd8f6-258">Hallo-bewerkingen worden uitgevoerd door Hallo taak processor mag zijn als eenvoudig of complex zijn, en zo veel of weinig, zoals vereist door uw workload.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-258">hello actions performed by hello task processor can be as simple or complex, and as many or as few, as required by your workload.</span></span> <span data-ttu-id="cd8f6-259">Bovendien door het implementeren van alle acties in de taak in één taak processor, kunt u direct bijwerken of toevoegen op basis van wijzigingen tooapplications of werkbelasting vereisten acties.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-259">Additionally, by implementing all task actions into one task processor, you can readily update or add actions based on changes tooapplications or workload requirements.</span></span> <span data-ttu-id="cd8f6-260">Echter, in sommige gevallen een processor van de taak mogelijk geen Hallo optimale oplossing voor uw implementatie zoals deze onnodige complexiteit, bijvoorbeeld wanneer de uitvoering van taken die snel kunnen worden gestart vanaf een opdrachtregel eenvoudig kunt toevoegen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-260">However, in some cases a task processor might not be hello optimal solution for your implementation as it can add unnecessary complexity, for example when running jobs that can be quickly started from a simple command line.</span></span>

### <a name="create-a-task-processor-using-hello-template"></a><span data-ttu-id="cd8f6-261">Een taak Processor met Hallo-sjabloon maken</span><span class="sxs-lookup"><span data-stu-id="cd8f6-261">Create a Task Processor using hello template</span></span>
<span data-ttu-id="cd8f6-262">tooadd een taak processor toohello oplossing die u eerder hebt gemaakt, als volgt te werk:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-262">tooadd a task processor toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="cd8f6-263">Open uw bestaande oplossing in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-263">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="cd8f6-264">Klik in Solution Explorer met de rechtermuisknop op Hallo-oplossing, klikt u op **toevoegen**, en klik vervolgens op **nieuw Project**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-264">In Solution Explorer, right-click hello solution, click **Add**, and then click **New Project**.</span></span>
3. <span data-ttu-id="cd8f6-265">Onder **Visual C#**, klikt u op **Cloud**, en klik vervolgens op **Azure Batch-taak Processor**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-265">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Task Processor**.</span></span>
4. <span data-ttu-id="cd8f6-266">Typ een naam waarmee u een beschrijving van uw toepassing en dit project wordt aangemerkt als taak processor (bijvoorbeeld Hallo 'LitwareTaskProcessor').</span><span class="sxs-lookup"><span data-stu-id="cd8f6-266">Type a name that describes your application and identifies this project as hello task processor (e.g. "LitwareTaskProcessor").</span></span>
5. <span data-ttu-id="cd8f6-267">toocreate Hallo-project, klik op **OK**.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-267">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="cd8f6-268">Ten slotte build Hallo project tooforce Visual Studio tooload alle waarnaar wordt verwezen NuGet-pakketten en tooverify die Hallo project geldig is voordat u begint met het wijzigen van deze.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-268">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="task-processor-template-files-and-their-purpose"></a><span data-ttu-id="cd8f6-269">Taak Processor sjabloonbestanden en hun doel</span><span class="sxs-lookup"><span data-stu-id="cd8f6-269">Task Processor template files and their purpose</span></span>
<span data-ttu-id="cd8f6-270">Wanneer u een project met behulp van Hallo taak processor sjabloon maakt, genereert het codebestanden drie groepen:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-270">When you create a project using hello task processor template, it generates three groups of code files:</span></span>

* <span data-ttu-id="cd8f6-271">Hallo belangrijkste programmabestand (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-271">hello main program file (Program.cs).</span></span> <span data-ttu-id="cd8f6-272">Dit bevat toegangspunt Hallo-programma en op het hoogste niveau uitzonderingsverwerking.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-272">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="cd8f6-273">U mag niet normaal gesproken deze toomodify nodig.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-273">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="cd8f6-274">Hallo Framework-map.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-274">hello Framework directory.</span></span> <span data-ttu-id="cd8f6-275">Dit document bevat Hallo-bestanden die verantwoordelijk is voor Hallo 'standaard' werk dat door Hallo taak programma manager – uitpakken van de parameters, toe te voegen taken toohello batchverwerking, enzovoort. U mag niet toomodify normaal gesproken moet deze bestanden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-275">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="cd8f6-276">Hallo-processor-bestand (TaskProcessor.cs).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-276">hello task processor file (TaskProcessor.cs).</span></span> <span data-ttu-id="cd8f6-277">Dit is waar u uw toepassingsspecifieke logica voor het uitvoeren van een taak (doorgaans door het aanroepen van tooan bestaande uitvoerbare bestand) wordt geplaatst.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-277">This is where you will put your application-specific logic for executing a task (typically by calling out tooan existing executable).</span></span> <span data-ttu-id="cd8f6-278">Vóór en na verwerking komt, zoals aanvullende gegevens te downloaden of uploaden van bestanden met resultaten, ook hier code.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-278">Pre- and post-processing code, such as downloading additional data or uploading result files, also goes here.</span></span>

<span data-ttu-id="cd8f6-279">Natuurlijk kunt u aanvullende bestanden toevoegen als vereiste toosupport uw taak processor code, afhankelijk van de complexiteit Hallo van Hallo taak logica splitsen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-279">Of course you can add additional files as required toosupport your task processor code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="cd8f6-280">Hallo sjabloon genereert ook standaard .NET projectbestanden zoals een .csproj-bestand, app.config, packages.config, enz.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-280">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="cd8f6-281">Hallo rest van deze sectie beschrijft Hallo verschillende bestanden en de codestructuur en wordt uitgelegd wat elke klasse doet.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-281">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![Visual Studio Solution Explorer toont van Hallo taak Processor sjabloonoplossing][solution_explorer02]

<span data-ttu-id="cd8f6-283">**Framework-bestanden**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-283">**Framework files**</span></span>

* <span data-ttu-id="cd8f6-284">`Configuration.cs`: Ingekapseld Hallo laden van gegevens van de taak configuratie zoals Batch accountdetails, gekoppelde opslagaccountreferenties taak en informatie en taakparameters.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-284">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="cd8f6-285">Het bevat ook toegang tooBatch gedefinieerde omgevingsvariabelen (Zie omgevingsinstellingen voor taken in Batch-documentatie voor Hallo) via Hallo Configuration.EnvironmentVariable klasse.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-285">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="cd8f6-286">`IConfiguration.cs`: Samenvattingen Hallo-implementatie van Hallo Configuration-klasse, zodat u kunt eenheid testen uw taak splitser met behulp van een valse of mock configuration-object.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-286">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="cd8f6-287">`TaskProcessorException.cs`: Vertegenwoordigt een fout die Hallo job manager tooterminate vereist.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-287">`TaskProcessorException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="cd8f6-288">TaskProcessorException is gebruikte toowrap 'verwacht' fouten waarin specifieke diagnostische informatie kan worden opgegeven als onderdeel van de beëindiging.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-288">TaskProcessorException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>

<span data-ttu-id="cd8f6-289">**Taak-Processor**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-289">**Task Processor**</span></span>

* <span data-ttu-id="cd8f6-290">`TaskProcessor.cs`: Hallo-taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-290">`TaskProcessor.cs`: Runs hello task.</span></span> <span data-ttu-id="cd8f6-291">Hallo framework aanroept Hallo TaskProcessor.Run methode.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-291">hello framework invokes hello TaskProcessor.Run method.</span></span> <span data-ttu-id="cd8f6-292">Dit is Hallo klasse waarop u Hallo toepassingsspecifieke logica van de taak wordt invoeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-292">This is hello class where you will inject hello application-specific logic of your task.</span></span> <span data-ttu-id="cd8f6-293">Hallo Run-methode om te implementeren:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-293">Implement hello Run method to:</span></span>
  * <span data-ttu-id="cd8f6-294">Parseren en valideer de taakparameters van een</span><span class="sxs-lookup"><span data-stu-id="cd8f6-294">Parse and validate any task parameters</span></span>
  * <span data-ttu-id="cd8f6-295">Hallo-opdrachtregel opstellen voor alle externe programma's die u wilt tooinvoke</span><span class="sxs-lookup"><span data-stu-id="cd8f6-295">Compose hello command line for any external program you want tooinvoke</span></span>
  * <span data-ttu-id="cd8f6-296">Meld u diagnostische informatie die hebt u mogelijk nodig voor foutopsporing</span><span class="sxs-lookup"><span data-stu-id="cd8f6-296">Log any diagnostic information you may require for debugging purposes</span></span>
  * <span data-ttu-id="cd8f6-297">Een proces starten met deze opdrachtregel</span><span class="sxs-lookup"><span data-stu-id="cd8f6-297">Start a process using that command line</span></span>
  * <span data-ttu-id="cd8f6-298">Wachten op Hallo proces tooexit</span><span class="sxs-lookup"><span data-stu-id="cd8f6-298">Wait for hello process tooexit</span></span>
  * <span data-ttu-id="cd8f6-299">Hallo afsluitcode Hallo proces toodetermine vastleggen als deze is geslaagd of mislukt</span><span class="sxs-lookup"><span data-stu-id="cd8f6-299">Capture hello exit code of hello process toodetermine if it succeeded or failed</span></span>
  * <span data-ttu-id="cd8f6-300">Tookeep toopersistent opslag van uitvoerbestanden die u wilt opslaan</span><span class="sxs-lookup"><span data-stu-id="cd8f6-300">Save any output files you want tookeep toopersistent storage</span></span>

<span data-ttu-id="cd8f6-301">**Standaard projectbestanden voor .NET-opdrachtregel**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-301">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="cd8f6-302">`App.config`: De standaard .NET toepassingsconfiguratiebestand.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-302">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="cd8f6-303">`Packages.config`: Standaard bestand NuGet-pakket voor afhankelijkheid.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-303">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="cd8f6-304">`Program.cs`: Bevat Hallo programma toegangspunt en uitzonderingsverwerking op het hoogste niveau.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-304">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

## <a name="implementing-hello-task-processor"></a><span data-ttu-id="cd8f6-305">Hallo taak processor implementeren</span><span class="sxs-lookup"><span data-stu-id="cd8f6-305">Implementing hello task processor</span></span>
<span data-ttu-id="cd8f6-306">Wanneer u Hallo taak Processor sjabloonproject opent, hebben Hallo project Hallo TaskProcessor.cs bestand standaard geopend.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-306">When you open hello Task Processor template project, hello project will have hello TaskProcessor.cs file open by default.</span></span> <span data-ttu-id="cd8f6-307">U kunt uitvoeren Hallo logica voor Hallo taken in uw werkbelasting implementeren met behulp van Hallo Run() methode hieronder weergegeven:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-307">You can implement hello run logic for hello tasks in your workload by using hello Run() method shown below:</span></span>

```csharp
/// <summary>
/// Runs hello task processing logic. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello task processor framework invokes hello Run method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation will execute an external program (from resource files or
/// an application package), check hello exit code of that program and
/// save output files toopersistent storage.
/// </summary>
public async Task<int> Run()

{
    try
    {
        //Your code for hello task processor goes here.
        var command = $"compare {_parameters["Frame1"]} {_parameters["Frame2"]} compare.gif";
        using (var process = Process.Start($"cmd /c {command}"))
        {
            process.WaitForExit();
            var taskOutputStorage = new TaskOutputStorage(
            _configuration.StorageAccount,
            _configuration.JobId,
            _configuration.TaskId
            );
            await taskOutputStorage.SaveAsync(
            TaskOutputKind.TaskOutput,
            @"..\stdout.txt",
            @"stdout.txt"
            );
            return process.ExitCode;
        }
    }
    catch (Exception ex)
    {
        throw new TaskProcessorException(
        $"{ex.GetType().Name} exception in run task processor: {ex.Message}",
        ex
        );
    }
}
```
> [!NOTE]
> <span data-ttu-id="cd8f6-308">Hallo is aantekeningen sectie in Hallo Run() methode alleen-lezen gedeelte Hallo van Hallo taak Processor sjablooncode die is bedoeld voor u toomodify door Hallo uitvoeren logica voor Hallo taken toe te voegen in uw werkbelasting.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-308">hello annotated section in hello Run() method is hello only section of hello Task Processor template code that is intended for you toomodify by adding hello run logic for hello tasks in your workload.</span></span> <span data-ttu-id="cd8f6-309">Als u een andere sectie van de sjabloon Hallo toomodify wilt, moet eerst raken met de werking van Batch door Hallo Batch documentatie controleren en enkele van de Batch-codevoorbeelden Hallo uitprobeert.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-309">If you want toomodify a different section of hello template, please first familiarize yourself with how Batch works by reviewing hello Batch documentation and trying out a few of hello Batch code samples.</span></span>
> 
> 

<span data-ttu-id="cd8f6-310">Hallo methode Run() is verantwoordelijk voor het starten vanaf de opdrachtregel hello, vanaf een of meer processen, alle proces toocomplete wachten, Hallo resultaten worden opgeslagen en ten slotte terug met de afsluitcode.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-310">hello Run() method is responsible for launching hello command line, starting one or more processes, waiting for all process toocomplete, saving hello results, and finally returning with an exit code.</span></span> <span data-ttu-id="cd8f6-311">Hallo methode Run() is waar u Hallo verwerking logica voor uw taken implementeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-311">hello Run() method is where you implement hello processing logic for your tasks.</span></span> <span data-ttu-id="cd8f6-312">Hallo taak processor framework aanroept Hallo Run() methode. u hoeft geen toocall deze zelf.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-312">hello task processor framework invokes hello Run() method for you; you do not need toocall it yourself.</span></span>

<span data-ttu-id="cd8f6-313">Uw implementatie Run() heeft toegang tot:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-313">Your Run() implementation has access to:</span></span>

* <span data-ttu-id="cd8f6-314">de taakparameters via Hallo Hallo `_parameters` veld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-314">hello task parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="cd8f6-315">taak en taak-id's, via Hallo Hallo `_jobId` en `_taskId` velden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-315">hello job and task ids, via hello `_jobId` and `_taskId` fields.</span></span>
* <span data-ttu-id="cd8f6-316">de taakconfiguratie Hallo via Hallo `_configuration` veld.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-316">hello task configuration, via hello `_configuration` field.</span></span>

<span data-ttu-id="cd8f6-317">**Taak mislukt**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-317">**Task failure**</span></span>

<span data-ttu-id="cd8f6-318">In geval van storing, kunt u de methode Run() Hallo afsluiten door er een uitzondering is opgetreden, maar dit Hallo bovenste niveau uitzonderings-handler voor de controle op Hallo taak afsluitcode verlaat.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-318">In case of failure, you can exit hello Run() method by throwing an exception, but this leaves hello top level exception handler in control of hello task exit code.</span></span> <span data-ttu-id="cd8f6-319">Als u toocontrol Hallo afsluitcode nodig zodat u kunt verschillende soorten mislukt, bijvoorbeeld voor diagnostische doeleinden onderscheiden of omdat een aantal fout-modi moeten worden beëindigd Hallo taak en andere beter niet en vervolgens moet u Hallo Run() methode afsluiten door te retourneren een de afsluitcode dan nul.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-319">If you need toocontrol hello exit code so that you can distinguish different types of failure, for example for diagnostic purposes or because some failure modes should terminate hello job and others should not, then you should exit hello Run() method by returning a non-zero exit code.</span></span> <span data-ttu-id="cd8f6-320">Dit wordt de afsluitcode Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-320">This becomes hello task exit code.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-task-processor-template"></a><span data-ttu-id="cd8f6-321">Codes en uitzonderingen in Hallo taak Processor sjabloon sluiten</span><span class="sxs-lookup"><span data-stu-id="cd8f6-321">Exit codes and exceptions in hello Task Processor template</span></span>
<span data-ttu-id="cd8f6-322">Bieden een mechanisme toodetermine Hallo resultaat van het uitvoeren van een programma afsluitcodes en uitzonderingen en ze Hallo uitvoering van programma Hallo-problemen kunnen identificeren.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-322">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help identify any problems with hello execution of hello program.</span></span> <span data-ttu-id="cd8f6-323">Hallo taak Processor sjabloon implementeert Hallo afsluitcodes en uitzonderingen in deze sectie beschreven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-323">hello Task Processor template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="cd8f6-324">Processor met een taak die is geïmplementeerd met Hallo taak Processor sjabloon kunt drie mogelijke afsluitcodes retourneren:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-324">A task processor task that is implemented with hello Task Processor template can return three possible exit codes:</span></span>

| <span data-ttu-id="cd8f6-325">Code</span><span class="sxs-lookup"><span data-stu-id="cd8f6-325">Code</span></span> | <span data-ttu-id="cd8f6-326">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="cd8f6-326">Description</span></span> |
| --- | --- |
| <span data-ttu-id="cd8f6-327">[Process.ExitCode][process_exitcode]</span><span class="sxs-lookup"><span data-stu-id="cd8f6-327">[Process.ExitCode][process_exitcode]</span></span> |<span data-ttu-id="cd8f6-328">Hallo taak processor toocompletion hebt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-328">hello task processor ran toocompletion.</span></span> <span data-ttu-id="cd8f6-329">Houd er rekening mee dat dit impliceert niet dat u aangeroepen Hallo-programma is gelukt – alleen Hallo taak processor is aangeroepen en uitgevoerd na verwerking zonder uitzonderingen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-329">Note that this does not imply that hello program you invoked was successful – only that hello task processor invoked it successfully and performed any post-processing without exceptions.</span></span> <span data-ttu-id="cd8f6-330">Hallo betekenis van de afsluitcode Hallo Hallo aangeroepen programma afhangt – doorgaans afsluitcode 0 betekent Hallo programma is voltooid en andere afsluitcode Hallo programma is mislukt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-330">hello meaning of hello exit code depends on hello invoked program – typically exit code 0 means hello program succeeded and any other exit code means hello program failed.</span></span> |
| <span data-ttu-id="cd8f6-331">1</span><span class="sxs-lookup"><span data-stu-id="cd8f6-331">1</span></span> |<span data-ttu-id="cd8f6-332">Hallo taak processor is mislukt met een uitzondering in een 'verwachte' onderdeel van het Hallo-programma.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-332">hello task processor failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="cd8f6-333">Hallo uitzondering was vertaalde tooa `TaskProcessorException` met diagnostische gegevens en, indien mogelijk, suggesties voor het oplossen van Hallo is mislukt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-333">hello exception was translated tooa `TaskProcessorException` with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="cd8f6-334">2</span><span class="sxs-lookup"><span data-stu-id="cd8f6-334">2</span></span> |<span data-ttu-id="cd8f6-335">Hallo taak processor is mislukt met een 'onverwachte'-uitzondering.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-335">hello task processor failed with an 'unexpected' exception.</span></span> <span data-ttu-id="cd8f6-336">Hallo uitzondering is vastgelegd toostandard uitvoer, maar Hallo taak processor kan geen tooadd eventuele aanvullende informatie voor diagnose of herstel.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-336">hello exception was logged toostandard output, but hello task processor was unable tooadd any additional diagnostic or remediation information.</span></span> |

> [!NOTE]
> <span data-ttu-id="cd8f6-337">Als u aanroept Hallo-programma afsluiten codes 1 en 2 tooindicate specifieke fout modi gebruikt, is vervolgens met afsluitcodes 1 en 2 voor taak processor fouten dubbelzinnig.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-337">If hello program you invoke uses exit codes 1 and 2 tooindicate specific failure modes, then using exit codes 1 and 2 for task processor errors is ambiguous.</span></span> <span data-ttu-id="cd8f6-338">U kunt deze taak processor codes toodistinctive afsluiten foutcodes wijzigen door het Hallo uitzondering aanvragen in het bestand Program.cs Hallo bewerken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-338">You can change these task processor error codes toodistinctive exit codes by editing hello exception cases in hello Program.cs file.</span></span>
> 
> 

<span data-ttu-id="cd8f6-339">Alle Hallo-gegevens geretourneerd door de uitzonderingen worden geschreven in stdout.txt en stderr.txt-bestanden.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-339">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="cd8f6-340">Zie de sectie afhandeling van de fout in Hallo Batch-documentatie voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-340">For more information, see Error Handling, in hello Batch documentation.</span></span>

### <a name="client-considerations"></a><span data-ttu-id="cd8f6-341">Overwegingen voor clients</span><span class="sxs-lookup"><span data-stu-id="cd8f6-341">Client considerations</span></span>
<span data-ttu-id="cd8f6-342">**Storage-referenties**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-342">**Storage credentials**</span></span>

<span data-ttu-id="cd8f6-343">Als de processor taak gebruikmaakt van Azure blob storage toopersist uitvoer, bijvoorbeeld met behulp van Hallo bestand conventies hulpbibliotheek en vervolgens te toegang moet*beide* Hallo cloud opslagaccountreferenties *of* een URL van de blob-container die een shared access signature (SAS) bevat.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-343">If your task processor uses Azure blob storage toopersist outputs, for example using hello file conventions helper library, then it needs access too*either* hello cloud storage account credentials *or* a blob container URL that includes a shared access signature (SAS).</span></span> <span data-ttu-id="cd8f6-344">Hallo-sjabloon biedt ondersteuning voor het opgeven van de referenties via algemene omgevingsvariabelen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-344">hello template includes support for providing credentials via common environment variables.</span></span> <span data-ttu-id="cd8f6-345">De client kan doorgeven Hallo storage-referenties als volgt:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-345">Your client can pass hello storage credentials as follows:</span></span>

```csharp
job.CommonEnvironmentSettings = new [] {
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="cd8f6-346">Hallo storage-account is beschikbaar in Hallo TaskProcessor klasse via Hallo `_configuration.StorageAccount` eigenschap.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-346">hello storage account is then available in hello TaskProcessor class via hello `_configuration.StorageAccount` property.</span></span>

<span data-ttu-id="cd8f6-347">Als u liever een container-URL met SAS toouse, u kunt dit ook doorgeven via een gemeenschappelijke omgevingsinstelling van taak, maar Hallo taak processor sjabloon omvat ingebouwde ondersteuning voor dit niet op dit moment.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-347">If you prefer toouse a container URL with SAS, you can also pass this via an job common environment setting, but hello task processor template does not currently include built-in support for this.</span></span>

<span data-ttu-id="cd8f6-348">**Setup van opslag**</span><span class="sxs-lookup"><span data-stu-id="cd8f6-348">**Storage setup**</span></span>

<span data-ttu-id="cd8f6-349">Het wordt aanbevolen dat Hallo-client of de taak manager-taak maken geen containers die voor de taken vereist voordat het Hallo taken toohello taak toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-349">It is recommended that hello client or job manager task create any containers required by tasks before adding hello tasks toohello job.</span></span> <span data-ttu-id="cd8f6-350">Dit is verplicht dat als u de URL van een container met SAS, als zodanig een URL bevat geen machtiging toocreate Hallo container.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-350">This is mandatory if you use a container URL with SAS, as such a URL does not include permission toocreate hello container.</span></span> <span data-ttu-id="cd8f6-351">Het verdient aanbeveling zelfs als u opslagaccountreferenties, zoals elke taak toocall CloudBlobContainer.CreateIfNotExistsAsync op Hallo-container die wordt opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-351">It is recommended even if you pass storage account credentials, as it saves every task having toocall CloudBlobContainer.CreateIfNotExistsAsync on hello container.</span></span>

## <a name="pass-parameters-and-environment-variables"></a><span data-ttu-id="cd8f6-352">Pass-parameters en variabelen</span><span class="sxs-lookup"><span data-stu-id="cd8f6-352">Pass parameters and environment variables</span></span>
### <a name="pass-environment-settings"></a><span data-ttu-id="cd8f6-353">Omgevingsinstellingen doorgeven</span><span class="sxs-lookup"><span data-stu-id="cd8f6-353">Pass environment settings</span></span>
<span data-ttu-id="cd8f6-354">Een client kan informatie toohello jobbeheertaak in de vorm Hallo van omgevingsinstellingen worden doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-354">A client can pass information toohello job manager task in hello form of environment settings.</span></span> <span data-ttu-id="cd8f6-355">Deze informatie kan vervolgens worden gebruikt door Hallo jobbeheertaak wanneer genereren Hallo taak processor taken die worden uitgevoerd als onderdeel van Hallo-taak COMPUTE.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-355">This information can then be used by hello job manager task when generating hello task processor tasks that will run as part of hello compute job.</span></span> <span data-ttu-id="cd8f6-356">Voorbeelden van Hallo-informatie die u als omgevingsinstellingen doorgeven kunt zijn:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-356">Examples of hello information that you can pass as environment settings are:</span></span>

* <span data-ttu-id="cd8f6-357">Naam en het account toegangscodes voor opslag</span><span class="sxs-lookup"><span data-stu-id="cd8f6-357">Storage account name and account keys</span></span>
* <span data-ttu-id="cd8f6-358">URL van de batch-account</span><span class="sxs-lookup"><span data-stu-id="cd8f6-358">Batch account URL</span></span>
* <span data-ttu-id="cd8f6-359">De sleutel van de batch-account</span><span class="sxs-lookup"><span data-stu-id="cd8f6-359">Batch account key</span></span>

<span data-ttu-id="cd8f6-360">Hallo Batch-service heeft een eenvoudig mechanisme toopass omgeving instellingen tooa jobbeheertaak met behulp van Hallo `EnvironmentSettings` eigenschap in [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span><span class="sxs-lookup"><span data-stu-id="cd8f6-360">hello Batch service has a simple mechanism toopass environment settings tooa job manager task by using hello `EnvironmentSettings` property in [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span></span>

<span data-ttu-id="cd8f6-361">Bijvoorbeeld: tooget hello `BatchClient` exemplaar voor een Batch-account, kunt u als omgevingsvariabelen van client Hallo Hallo URL code en sleutel referenties voor de Batch-account Hallo gedeelde doorgeven.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-361">For example, tooget hello `BatchClient` instance for a Batch account, you can pass as environment variables from hello client code hello URL and shared key credentials for hello Batch account.</span></span> <span data-ttu-id="cd8f6-362">Evenzo tooaccess Hallo storage-account dat is gekoppeld toohello Batch-account, kunt u de opslagaccountnaam hello en Hallo opslagaccountsleutel doorgeven als omgevingsvariabelen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-362">Likewise, tooaccess hello storage account that is linked toohello Batch account, you can pass hello storage account name and hello storage account key as environment variables.</span></span>

### <a name="pass-parameters-toohello-job-manager-template"></a><span data-ttu-id="cd8f6-363">Doorgegeven parameters toohello Job Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="cd8f6-363">Pass parameters toohello Job Manager template</span></span>
<span data-ttu-id="cd8f6-364">In veel gevallen is nuttig toopass per taak parameters toohello jobbeheertaak, ofwel toocontrol Hallo taak proces splitsen of tooconfigure Hallo taken voor het Hallo-taak.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-364">In many cases, it's useful toopass per-job parameters toohello job manager task, either toocontrol hello job splitting process or tooconfigure hello tasks for hello job.</span></span> <span data-ttu-id="cd8f6-365">U kunt dit doen door het uploaden van een JSON-bestand parameters.json met de naam als een bronbestand voor Hallo jobbeheertaak.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-365">You can do this by uploading a JSON file named parameters.json as a resource file for hello job manager task.</span></span> <span data-ttu-id="cd8f6-366">Hallo-parameters kunnen vervolgens beschikbaar gesteld in Hallo `JobSplitter._parameters` veld in Hallo Job Manager-sjabloon.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-366">hello parameters can then become available in hello `JobSplitter._parameters` field in hello Job Manager template.</span></span>

> [!NOTE]
> <span data-ttu-id="cd8f6-367">Hallo ingebouwde parameter handler ondersteunt alleen string-naar-tekenreeks woordenlijsten.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-367">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="cd8f6-368">Als u toopass complexe JSON-waarden als parameterwaarden wilt, u wordt toopass deze als tekenreeksen nodig en ze in Hallo taak splitser parseert of wijzigen van het framework Hallo `Configuration.GetJobParameters` methode.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-368">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello job splitter, or modify hello framework's `Configuration.GetJobParameters` method.</span></span>
> 
> 

### <a name="pass-parameters-toohello-task-processor-template"></a><span data-ttu-id="cd8f6-369">Parameters toohello taak Processor sjabloon doorgeven</span><span class="sxs-lookup"><span data-stu-id="cd8f6-369">Pass parameters toohello Task Processor template</span></span>
<span data-ttu-id="cd8f6-370">U kunt parameters ook doorgeven tooindividual taken geïmplementeerd met behulp van Hallo taak Processor sjabloon.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-370">You can also pass parameters tooindividual tasks implemented using hello Task Processor template.</span></span> <span data-ttu-id="cd8f6-371">Net zoals met Hallo job manager-sjabloon zoekt Hallo taak processor sjabloon naar een resource-bestand met de naam</span><span class="sxs-lookup"><span data-stu-id="cd8f6-371">Just as with hello job manager template, hello task processor template looks for a resource file named</span></span>

<span data-ttu-id="cd8f6-372">parameters.JSON, en, indien deze gevonden als Hallo parameters woordenlijst laadt.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-372">parameters.json, and if found it loads it as hello parameters dictionary.</span></span> <span data-ttu-id="cd8f6-373">Er zijn een aantal opties voor hoe toopass parameters toohello task processor-taken:</span><span class="sxs-lookup"><span data-stu-id="cd8f6-373">There are a couple of options for how toopass parameters toohello task processor tasks:</span></span>

* <span data-ttu-id="cd8f6-374">Hallo taakparameters JSON hergebruiken.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-374">Reuse hello job parameters JSON.</span></span> <span data-ttu-id="cd8f6-375">Dit werkt goed als Hallo alleen parameters taak wide (voor bijvoorbeeld een render hoogte en breedte zijn).</span><span class="sxs-lookup"><span data-stu-id="cd8f6-375">This works well if hello only parameters are job-wide ones (for example, a render height and width).</span></span> <span data-ttu-id="cd8f6-376">toodo, wanneer u een CloudTask in Hallo taak splitser, een object van het bestand parameters.json resource van verwijzing toohello vanuit Hallo jobbeheertaak van ResourceFiles toevoegen (`JobSplitter._jobManagerTask.ResourceFiles`) van toohello CloudTask ResourceFiles verzameling.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-376">toodo this, when creating a CloudTask in hello job splitter, add a reference toohello parameters.json resource file object from hello job manager task's ResourceFiles (`JobSplitter._jobManagerTask.ResourceFiles`) toohello CloudTask's ResourceFiles collection.</span></span>
* <span data-ttu-id="cd8f6-377">Genereren en uploaden van een document taakspecifieke parameters.json als onderdeel van de splitser taakuitvoering en verwijzen naar blob in van de taak Hallo resource bestanden verzameling.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-377">Generate and upload a task-specific parameters.json document as part of job splitter execution, and reference that blob in hello task's resource files collection.</span></span> <span data-ttu-id="cd8f6-378">Dit is nodig als u verschillende taken verschillende parameters hebben.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-378">This is necessary if different tasks have different parameters.</span></span> <span data-ttu-id="cd8f6-379">Een voorbeeld is mogelijk een 3D-rendering scenario waarbij Hallo frame-index toohello taak is doorgegeven als parameter.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-379">An example might be a 3D rendering scenario where hello frame index is passed toohello task as a parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="cd8f6-380">Hallo ingebouwde parameter handler ondersteunt alleen string-naar-tekenreeks woordenlijsten.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-380">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="cd8f6-381">Als u toopass complexe JSON-waarden als parameterwaarden wilt, u wordt toopass deze als tekenreeksen nodig in Hallo taak processor worden geparseerd en wijzigen van het framework Hallo `Configuration.GetTaskParameters` methode.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-381">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello task processor, or modify hello framework's `Configuration.GetTaskParameters` method.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="cd8f6-382">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="cd8f6-382">Next steps</span></span>
### <a name="persist-job-and-task-output-tooazure-storage"></a><span data-ttu-id="cd8f6-383">Taak behouden en de taak uitvoer tooAzure opslag</span><span class="sxs-lookup"><span data-stu-id="cd8f6-383">Persist job and task output tooAzure Storage</span></span>
<span data-ttu-id="cd8f6-384">Een ander handig hulpmiddel in ontwikkeling van de Batch-oplossingen is [Azure Batch-bestand conventies][nuget_package].</span><span class="sxs-lookup"><span data-stu-id="cd8f6-384">Another helpful tool in Batch solution development is [Azure Batch File Conventions][nuget_package].</span></span> <span data-ttu-id="cd8f6-385">Deze klasse .NET-bibliotheek (momenteel in preview) te gebruiken in uw Batch .NET-toepassingen tooeasily store en taak uitvoer tooand ophalen uit Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-385">Use this .NET class library (currently in preview) in your Batch .NET applications tooeasily store and retrieve task outputs tooand from Azure Storage.</span></span> <span data-ttu-id="cd8f6-386">[Azure Batch-taak en uitvoer behouden](batch-task-output.md) bevat een volledige beschrijving van het Hallo-bibliotheek en het gebruik ervan.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-386">[Persist Azure Batch job and task output](batch-task-output.md) contains a full discussion of hello library and its usage.</span></span>

### <a name="batch-forum"></a><span data-ttu-id="cd8f6-387">Batch-Forum</span><span class="sxs-lookup"><span data-stu-id="cd8f6-387">Batch Forum</span></span>
<span data-ttu-id="cd8f6-388">Hallo [Azure Batch-Forum] [ forum] is uitermate toodiscuss Batch plaats en vragen over Hallo-service op MSDN.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-388">hello [Azure Batch Forum][forum] on MSDN is a great place toodiscuss Batch and ask questions about hello service.</span></span> <span data-ttu-id="cd8f6-389">Kop op via voor nuttige 'een tijdelijke' berichten, en stel uw vragen wanneer deze zich voordoen tijdens het bouwen van uw Batch-oplossingen.</span><span class="sxs-lookup"><span data-stu-id="cd8f6-389">Head on over for helpful "sticky" posts, and post your questions as they arise while you build your Batch solutions.</span></span>

[forum]: https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=azurebatch
[net_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.jobmanagertask.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[nuget_package]: https://www.nuget.org/packages/Microsoft.Azure.Batch.Conventions.Files
[process_exitcode]: https://msdn.microsoft.com/library/system.diagnostics.process.exitcode.aspx
[vs_gallery]: https://visualstudiogallery.msdn.microsoft.com/
[vs_gallery_templates]: https://go.microsoft.com/fwlink/?linkid=820714
[vs_find_use_ext]: https://msdn.microsoft.com/library/dd293638.aspx

[diagram01]: ./media/batch-visual-studio-templates/diagram01.png
[solution_explorer01]: ./media/batch-visual-studio-templates/solution_explorer01.png
[solution_explorer02]: ./media/batch-visual-studio-templates/solution_explorer02.png
