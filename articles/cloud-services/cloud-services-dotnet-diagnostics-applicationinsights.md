---
title: aaaTroubleshoot Cloud Services met Application Insights | Microsoft Docs
description: Meer informatie over hoe tootroubleshoot cloudservice problemen met behulp van Application Insights tooprocess gegevens van Azure Diagnostics.
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 972924d9e6d1fe33d5c19b006d482de52ffb0ef7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="fa440-103">Problemen met Cloud Services met Application Insights</span><span class="sxs-lookup"><span data-stu-id="fa440-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="fa440-104">Met [Azure SDK 2.8](https://azure.microsoft.com/downloads/) en Azure diagnostics extensie 1.5, kunt u Azure Diagnostics-gegevens verzenden voor uw Cloudservice rechtstreeks tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="fa440-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly tooApplication Insights.</span></span> <span data-ttu-id="fa440-105">Hallo logboeken die worden verzameld door Azure Diagnostics&mdash;inclusief toepassingslogboeken, Windows-gebeurtenislogboeken ETW-logboeken en prestatiemeteritems&mdash;tooApplication Insights kunnen worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="fa440-105">hello logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent tooApplication Insights.</span></span> <span data-ttu-id="fa440-106">U kunt vervolgens visualiseren van deze informatie in de gebruikersinterface voor Hallo Application Insights-portal.</span><span class="sxs-lookup"><span data-stu-id="fa440-106">You can then visualize this information in hello Application Insights portal UI.</span></span> <span data-ttu-id="fa440-107">Vervolgens kunt u Hallo Application Insights-SDK tooget inzicht in de metrische gegevens en de logboeken die afkomstig zijn van uw toepassing, evenals de Hallo systeem en het niveau van de infrastructuur-gegevens die afkomstig zijn van Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="fa440-107">You can then use hello Application Insights SDK tooget insights into metrics and logs that come from your application, as well as hello system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-toosend-data-tooapplication-insights"></a><span data-ttu-id="fa440-108">Azure Diagnostics toosend gegevens tooApplication Insights configureren</span><span class="sxs-lookup"><span data-stu-id="fa440-108">Configure Azure Diagnostics toosend data tooApplication Insights</span></span>
<span data-ttu-id="fa440-109">Volg deze stappen tooset van uw cloud service-project toosend Azure Diagnostics gegevens tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="fa440-109">Follow these steps tooset up your cloud service project toosend Azure Diagnostics data tooApplication Insights.</span></span>

1. <span data-ttu-id="fa440-110">In Visual Studio Solution Explorer met de rechtermuisknop op een rol en selecteer **eigenschappen** tooopen Hallo rol designer.</span><span class="sxs-lookup"><span data-stu-id="fa440-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** tooopen hello Role designer.</span></span>

    ![Solution Explorer Role-eigenschappen][1]

2. <span data-ttu-id="fa440-112">In Hallo **Diagnostics** sectie Hallo rol Designer, selecteer Hallo **verzenden van diagnostische gegevens tooApplication Insights** optie.</span><span class="sxs-lookup"><span data-stu-id="fa440-112">In hello **Diagnostics** section of hello Role designer, select hello **Send diagnostics data tooApplication Insights** option.</span></span>

    ![Rol designer diagnostische gegevens verzenden gegevens tooapplication insights][2]

3. <span data-ttu-id="fa440-114">Selecteer Hallo Application Insights-resource die u wilt dat toosend hello Azure diagnostics-gegevens naar Hallo in het dialoogvenster dat wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="fa440-114">In hello dialog box that pops up, select hello Application Insights resource that you want toosend hello Azure diagnostics data to.</span></span> <span data-ttu-id="fa440-115">Hallo-dialoogvenster kunt u een bestaande Application Insights-resource uit uw abonnement tooselect of toomanually Geef een instrumentatiesleutel voor Application Insights-resource.</span><span class="sxs-lookup"><span data-stu-id="fa440-115">hello dialog box allows you tooselect an existing Application Insights resource from your subscription or toomanually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="fa440-116">Zie voor meer informatie over het maken van een Application Insights-resource [Maak een nieuwe Application Insights-resource](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="fa440-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![Selecteer application insights-resource][3]

    <span data-ttu-id="fa440-118">Nadat u Hallo Application Insights-resource hebt toegevoegd, Hallo instrumentatiesleutel voor die bron wordt opgeslagen als een service-configuratie-instelling met de naam van de Hallo **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="fa440-118">Once you have added hello Application Insights resource, hello instrumentation key for that resource is stored as a service configuration setting with hello name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="fa440-119">U kunt deze configuratie-instelling voor elke configuratie van de service of de omgeving kunt wijzigen.</span><span class="sxs-lookup"><span data-stu-id="fa440-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="fa440-120">Selecteer een andere configuratie van Hallo toodo **serviceconfiguratie** lijst en geeft u een nieuwe instrumentatiesleutel voor dat de configuratie.</span><span class="sxs-lookup"><span data-stu-id="fa440-120">toodo so, select a different configuration from hello **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![Selecteer de configuratie van de service][4]

    <span data-ttu-id="fa440-122">Hallo **APPINSIGHTS_INSTRUMENTATIONKEY** configuratie-instelling wordt gebruikt door de extensie voor Visual Studio tooconfigure Hallo diagnostische gegevens met Hallo geschikte Application Insights broninformatie tijdens de publicatie.</span><span class="sxs-lookup"><span data-stu-id="fa440-122">hello **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="fa440-123">Hallo-configuratie-instelling is een handige manier om verschillende instrumentatiesleutels voor verschillende configuraties te definiÃ«ren.</span><span class="sxs-lookup"><span data-stu-id="fa440-123">hello configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="fa440-124">Visual Studio wordt die instelling vertalen en plaats deze in Hallo diagnostics extensie openbare configuratie tijdens het Hallo publicatieproces.</span><span class="sxs-lookup"><span data-stu-id="fa440-124">Visual Studio will translate that setting and insert it into hello diagnostics extension public configuration during hello publish process.</span></span> <span data-ttu-id="fa440-125">toosimplify hello proces van het Hallo-extensie voor diagnostische gegevens configureren met PowerShell, Hallo pakket uitvoer vanuit Visual Studio ook Hallo openbare configuratie-XML met Hallo geschikte Application Insights-instrumentatiesleutel bevat.</span><span class="sxs-lookup"><span data-stu-id="fa440-125">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML with hello appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="fa440-126">Hallo openbare config-bestanden worden gemaakt in de map extensies Hallo en Hallo patroon volgen *PaaSDiagnostics.&lt; RoleName&gt;. PubConfig.xml*.</span><span class="sxs-lookup"><span data-stu-id="fa440-126">hello public config files are created in hello Extensions folder and follow hello pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="fa440-127">Alle implementaties op basis van PowerShell kunnen gebruiken dit patroon toomap elke configuratie tooa-rol.</span><span class="sxs-lookup"><span data-stu-id="fa440-127">Any PowerShell-based deployments can use this pattern toomap each configuration tooa role.</span></span>

4) <span data-ttu-id="fa440-128">tooconfigure Azure diagnostics toosend alle prestatiemeteritems en foutniveau logboeken verzameld door hello Azure diagnostics agent tooApplication Insights inschakelen Hallo **verzenden van diagnostische gegevens tooApplication Insights** optie.</span><span class="sxs-lookup"><span data-stu-id="fa440-128">tooconfigure Azure diagnostics toosend all performance counters and error-level logs collected by hello Azure diagnostics agent tooApplication Insights, enable hello **Send diagnostics data tooApplication Insights** option.</span></span> 

    <span data-ttu-id="fa440-129">Als u toofurther wilt configureren welke gegevens tooApplication Insights wordt verzonden, moet u handmatig Hallo bewerken *diagnostics.wadcfgx* -bestand voor elke rol.</span><span class="sxs-lookup"><span data-stu-id="fa440-129">If you want toofurther configure what data is sent tooApplication Insights, you must manually edit hello *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="fa440-130">Zie [configureren Azure Diagnostics toosend gegevens tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn meer over het handmatig bijwerken Hallo-configuratie.</span><span class="sxs-lookup"><span data-stu-id="fa440-130">See [Configure Azure Diagnostics toosend data tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn more about manually updating hello configuration.</span></span>

<span data-ttu-id="fa440-131">Wanneer cloudservice Hallo geconfigureerde toosend Azure diagnostics gegevens tooapplication insights is, kunt u implementeren tooAzure normaal gesproken om ervoor te zorgen hello Azure diagnostics-extensie is ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="fa440-131">When hello cloud service is configured toosend Azure diagnostics data tooapplication insights, you can deploy it tooAzure normally, making sure hello Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="fa440-132">Zie voor meer informatie [publiceren van een Cloudservice met Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="fa440-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="fa440-133">Azure diagnostics-gegevens weergeven in Application Insights</span><span class="sxs-lookup"><span data-stu-id="fa440-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="fa440-134">Hello Azure diagnostische telemetrie weergegeven in Application Insights-bron is geconfigureerd voor uw cloudservice Hallo.</span><span class="sxs-lookup"><span data-stu-id="fa440-134">hello Azure diagnostic telemetry shows up in hello Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="fa440-135">Azure diagnostics logboek typen toegewezen tooApplication Insights concepten op de volgende manieren:</span><span class="sxs-lookup"><span data-stu-id="fa440-135">Azure diagnostics log types map tooApplication Insights concepts in these ways:</span></span>

* <span data-ttu-id="fa440-136">Prestatie-items worden weergegeven als aangepaste metrische gegevens in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="fa440-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="fa440-137">Windows-gebeurtenislogboeken weergegeven als traceringen en aangepaste gebeurtenissen in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="fa440-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="fa440-138">Toepassing Logboeken, ETW-logboeken en de logboekbestanden van de infrastructuur van diagnostische gegevens worden weergegeven als de traceringen in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="fa440-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="fa440-139">tooview Azure diagnostics-gegevens in Application Insights, voer een van de volgende Hallo:</span><span class="sxs-lookup"><span data-stu-id="fa440-139">tooview Azure diagnostics data in Application Insights, do one of hello following:</span></span>

* <span data-ttu-id="fa440-140">Gebruik [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize eventuele aangepaste prestatiemeteritems uit of telt van verschillende soorten gebeurtenissen van de Windows-gebeurtenislogboek.</span><span class="sxs-lookup"><span data-stu-id="fa440-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Aangepaste metrische gegevens in Metrics Explorer][5]

* <span data-ttu-id="fa440-142">Gebruik [Search](../application-insights/app-insights-diagnostic-search.md) toosearch over Hallo traceerlogboeken verzonden door Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="fa440-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) toosearch across hello  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="fa440-143">Bijvoorbeeld, als een onverwerkte uitzondering heeft veroorzaakt Hallo rol toocrash en recyclen, informatie over Hallo uitzondering wordt weergegeven in Hallo *toepassing* kanaal van *Windows-gebeurtenislogboek*.</span><span class="sxs-lookup"><span data-stu-id="fa440-143">For example, if an unhandled exception has caused hello role toocrash and recycle, information about hello exception shows up in hello *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="fa440-144">U kunt zoeken toolook gebruiken op Windows-gebeurtenislogboek fout Hallo en Hallo volledige stack-tracering voor Hallo uitzondering toohelp zoeken Hallo oorzaak van het probleem Hallo ophalen.</span><span class="sxs-lookup"><span data-stu-id="fa440-144">You can use search toolook at hello Windows Event Log error and get hello full stack trace for hello exception toohelp find hello cause of hello issue.</span></span>

    ![Traceringen zoeken][6]

## <a name="next-steps"></a><span data-ttu-id="fa440-146">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="fa440-146">Next Steps</span></span>
* <span data-ttu-id="fa440-147">[Hallo Application Insights-SDK tooyour cloudservice toevoegen](../application-insights/app-insights-cloudservices.md) toosend gegevens over aanvragen, uitzonderingen, afhankelijkheden en eventuele aangepaste telemetrie van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="fa440-147">[Add hello Application Insights SDK tooyour cloud service](../application-insights/app-insights-cloudservices.md) toosend data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="fa440-148">In combinatie met hello Azure Diagnostics-gegevens, deze informatie krijgt u een compleet beeld van uw toepassing en het systeem, Hallo allemaal in dezelfde toepassing inzicht resource.</span><span class="sxs-lookup"><span data-stu-id="fa440-148">When combined with hello Azure Diagnostics data, this information you can get a complete view of your application and system, all in hello same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png
