---
title: aaaHow tooupdate een cloudservice | Microsoft Docs
description: Meer informatie over hoe tooupdate cloud-services in Azure. Meer informatie over hoe een update op een cloudservice tooensure beschikbaarheid wordt voortgezet.
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 7e4c8bd46e51a555b4309ea8927d120e8efcf0ea
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooupdate-a-cloud-service"></a><span data-ttu-id="a154e-104">Hoe tooupdate een cloudservice</span><span class="sxs-lookup"><span data-stu-id="a154e-104">How tooupdate a cloud service</span></span>

<span data-ttu-id="a154e-105">Bijwerken van een cloudservice, inclusief de functies en de gastbesturingssysteem, is een proces drie stappen.</span><span class="sxs-lookup"><span data-stu-id="a154e-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="a154e-106">Eerst Hallo binaire bestanden en de configuratiebestanden voor de nieuwe Hallo cloudservice of versie van het besturingssysteem moet worden geüpload.</span><span class="sxs-lookup"><span data-stu-id="a154e-106">First, hello binaries and configuration files for hello new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="a154e-107">Vervolgens reserveert Azure compute- en netwerkbronnen voor op basis van de vereisten van de nieuwe versie van cloud service Hallo HALLO hallo-cloudservice.</span><span class="sxs-lookup"><span data-stu-id="a154e-107">Next, Azure reserves compute and network resources for hello cloud service based on hello requirements of hello new cloud service version.</span></span> <span data-ttu-id="a154e-108">Ten slotte voert Azure een rolling upgrade tooincrementally hello tenant toohello nieuwe versie van de update of het gastbesturingssysteem, behoud uw beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="a154e-108">Finally, Azure performs a rolling upgrade tooincrementally update hello tenant toohello new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="a154e-109">Dit artikel worden de details op Hallo van deze laatste stap – Hallo rolling upgrade.</span><span class="sxs-lookup"><span data-stu-id="a154e-109">This article discusses hello details of this last step – hello rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="a154e-110">Een Azure-Service bijwerken</span><span class="sxs-lookup"><span data-stu-id="a154e-110">Update an Azure Service</span></span>
<span data-ttu-id="a154e-111">Azure worden uw rolinstanties georganiseerd in logische groepen indelen upgradedomeinen (UD) genoemd.</span><span class="sxs-lookup"><span data-stu-id="a154e-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="a154e-112">Upgradedomeinen (UD) zijn logische verzamelingen rolexemplaren die als een groep worden bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="a154e-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="a154e-113">Azure-updates een cloud service één UD tegelijk, waardoor exemplaren worden weergegeven in andere UDs toocontinue behoeve van verkeer.</span><span class="sxs-lookup"><span data-stu-id="a154e-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs toocontinue serving traffic.</span></span>

<span data-ttu-id="a154e-114">Hallo standaardaantal upgradedomeinen is 5.</span><span class="sxs-lookup"><span data-stu-id="a154e-114">hello default number of upgrade domains is 5.</span></span> <span data-ttu-id="a154e-115">U kunt een verschillend aantal upgradedomeinen opgeven door Hallo upgradeDomainCount kenmerk in Hallo van servicedefinitiebestand (.csdef).</span><span class="sxs-lookup"><span data-stu-id="a154e-115">You can specify a different number of upgrade domains by including hello upgradeDomainCount attribute in hello service’s definition file (.csdef).</span></span> <span data-ttu-id="a154e-116">Zie voor meer informatie over Hallo upgradeDomainCount kenmerk [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) of [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="a154e-116">For more information about hello upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="a154e-117">Wanneer u een update in plaats van een of meer rollen in uw service uitvoert, Azure-updates sets rolinstanties volgens toohello upgradedomein toowhich die ze behoren.</span><span class="sxs-lookup"><span data-stu-id="a154e-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according toohello upgrade domain toowhich they belong.</span></span> <span data-ttu-id="a154e-118">Azure alle Hallo-exemplaren in een opgegeven upgradedomein – stoppen, bijwerken, worden gezet online – back-updates gaat vervolgens naar de volgende Hallo-domein.</span><span class="sxs-lookup"><span data-stu-id="a154e-118">Azure updates all of hello instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto hello next domain.</span></span> <span data-ttu-id="a154e-119">Door te stoppen alleen Hallo instanties die worden uitgevoerd in de huidige Hallo upgradedomein, Azure zorgt ervoor dat een update gebeurt met Hallo zo weinig mogelijk impact toohello waarop service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a154e-119">By stopping only hello instances running in hello current upgrade domain, Azure makes sure that an update occurs with hello least possible impact toohello running service.</span></span> <span data-ttu-id="a154e-120">Zie voor meer informatie [hoe Hallo update voortgezet](#howanupgradeproceeds) verderop in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="a154e-120">For more information, see [How hello update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="a154e-121">Tijdens het Hallo-voorwaarden **bijwerken** en **upgrade** iets andere betekenis hebben in de context van hello Azure, kan door elkaar Hallo processen en beschrijvingen van functies in dit document hello worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="a154e-121">While hello terms **update** and **upgrade** have slightly different meaning in hello context Azure, they can be used interchangeably for hello processes and descriptions of hello features in this document.</span></span>
>
>

<span data-ttu-id="a154e-122">Uw service moet ten minste twee exemplaren van een rol voor deze rol toobe bijgewerkt ter plekke zonder uitvaltijd definiëren.</span><span class="sxs-lookup"><span data-stu-id="a154e-122">Your service must define at least two instances of a role for that role toobe updated in-place without downtime.</span></span> <span data-ttu-id="a154e-123">Als het Hallo-service bestaat uit slechts één exemplaar van een rol, zijn uw service niet beschikbaar totdat hello InPlace-update is voltooid.</span><span class="sxs-lookup"><span data-stu-id="a154e-123">If hello service consists of only one instance of one role, your service will be unavailable until hello in-place update has finished.</span></span>

<span data-ttu-id="a154e-124">Dit onderwerp bevat informatie over Azure-updates na Hallo:</span><span class="sxs-lookup"><span data-stu-id="a154e-124">This topic covers hello following information about Azure updates:</span></span>

* [<span data-ttu-id="a154e-125">Servicewijzigingen toegestaan tijdens het bijwerken</span><span class="sxs-lookup"><span data-stu-id="a154e-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="a154e-126">Hoe een upgrade wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="a154e-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="a154e-127">Terugdraaien van een update</span><span class="sxs-lookup"><span data-stu-id="a154e-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="a154e-128">Meerdere mutating bewerkingen op een actieve implementatie initiëren</span><span class="sxs-lookup"><span data-stu-id="a154e-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="a154e-129">Distributie van functies tussen domeinen upgraden</span><span class="sxs-lookup"><span data-stu-id="a154e-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="a154e-130">Servicewijzigingen toegestaan tijdens het bijwerken</span><span class="sxs-lookup"><span data-stu-id="a154e-130">Allowed service changes during an update</span></span>
<span data-ttu-id="a154e-131">Hallo ziet volgende tabel u Hallo toegestaan wijzigingen tooa service tijdens het bijwerken:</span><span class="sxs-lookup"><span data-stu-id="a154e-131">hello following table shows hello allowed changes tooa service during an update:</span></span>

| <span data-ttu-id="a154e-132">Wijzigingen worden toegestaan toohosting, services en functies</span><span class="sxs-lookup"><span data-stu-id="a154e-132">Changes permitted toohosting, services, and roles</span></span> | <span data-ttu-id="a154e-133">InPlace-update</span><span class="sxs-lookup"><span data-stu-id="a154e-133">In-place update</span></span> | <span data-ttu-id="a154e-134">Gefaseerde (VIP's wisselen)</span><span class="sxs-lookup"><span data-stu-id="a154e-134">Staged (VIP swap)</span></span> | <span data-ttu-id="a154e-135">Verwijderen en opnieuw implementeren</span><span class="sxs-lookup"><span data-stu-id="a154e-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a154e-136">Besturingssysteem</span><span class="sxs-lookup"><span data-stu-id="a154e-136">Operating system version</span></span> |<span data-ttu-id="a154e-137">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-137">Yes</span></span> |<span data-ttu-id="a154e-138">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-138">Yes</span></span> |<span data-ttu-id="a154e-139">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-139">Yes</span></span> |
| <span data-ttu-id="a154e-140">.NET-vertrouwensniveau</span><span class="sxs-lookup"><span data-stu-id="a154e-140">.NET trust level</span></span> |<span data-ttu-id="a154e-141">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-141">Yes</span></span> |<span data-ttu-id="a154e-142">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-142">Yes</span></span> |<span data-ttu-id="a154e-143">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-143">Yes</span></span> |
| <span data-ttu-id="a154e-144">Grootte van virtuele machine<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="a154e-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="a154e-145">Ja<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="a154e-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="a154e-146">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-146">Yes</span></span> |<span data-ttu-id="a154e-147">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-147">Yes</span></span> |
| <span data-ttu-id="a154e-148">Instellingen voor de lokale opslag</span><span class="sxs-lookup"><span data-stu-id="a154e-148">Local storage settings</span></span> |<span data-ttu-id="a154e-149">Alleen verhogen<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="a154e-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="a154e-150">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-150">Yes</span></span> |<span data-ttu-id="a154e-151">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-151">Yes</span></span> |
| <span data-ttu-id="a154e-152">Toevoegen of verwijderen van rollen in een service</span><span class="sxs-lookup"><span data-stu-id="a154e-152">Add or remove roles in a service</span></span> |<span data-ttu-id="a154e-153">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-153">Yes</span></span> |<span data-ttu-id="a154e-154">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-154">Yes</span></span> |<span data-ttu-id="a154e-155">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-155">Yes</span></span> |
| <span data-ttu-id="a154e-156">Aantal exemplaren van een bepaalde rol</span><span class="sxs-lookup"><span data-stu-id="a154e-156">Number of instances of a particular role</span></span> |<span data-ttu-id="a154e-157">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-157">Yes</span></span> |<span data-ttu-id="a154e-158">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-158">Yes</span></span> |<span data-ttu-id="a154e-159">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-159">Yes</span></span> |
| <span data-ttu-id="a154e-160">Aantal of type eindpunten voor een service</span><span class="sxs-lookup"><span data-stu-id="a154e-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="a154e-161">Ja<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="a154e-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="a154e-162">Nee</span><span class="sxs-lookup"><span data-stu-id="a154e-162">No</span></span> |<span data-ttu-id="a154e-163">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-163">Yes</span></span> |
| <span data-ttu-id="a154e-164">Namen en waarden van configuratie-instellingen</span><span class="sxs-lookup"><span data-stu-id="a154e-164">Names and values of configuration settings</span></span> |<span data-ttu-id="a154e-165">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-165">Yes</span></span> |<span data-ttu-id="a154e-166">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-166">Yes</span></span> |<span data-ttu-id="a154e-167">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-167">Yes</span></span> |
| <span data-ttu-id="a154e-168">Waarden (maar niet de namen van) van configuratie-instellingen</span><span class="sxs-lookup"><span data-stu-id="a154e-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="a154e-169">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-169">Yes</span></span> |<span data-ttu-id="a154e-170">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-170">Yes</span></span> |<span data-ttu-id="a154e-171">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-171">Yes</span></span> |
| <span data-ttu-id="a154e-172">Nieuwe certificaten toevoegen</span><span class="sxs-lookup"><span data-stu-id="a154e-172">Add new certificates</span></span> |<span data-ttu-id="a154e-173">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-173">Yes</span></span> |<span data-ttu-id="a154e-174">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-174">Yes</span></span> |<span data-ttu-id="a154e-175">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-175">Yes</span></span> |
| <span data-ttu-id="a154e-176">Wijzigen van bestaande certificaten</span><span class="sxs-lookup"><span data-stu-id="a154e-176">Change existing certificates</span></span> |<span data-ttu-id="a154e-177">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-177">Yes</span></span> |<span data-ttu-id="a154e-178">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-178">Yes</span></span> |<span data-ttu-id="a154e-179">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-179">Yes</span></span> |
| <span data-ttu-id="a154e-180">Implementeer nieuwe code</span><span class="sxs-lookup"><span data-stu-id="a154e-180">Deploy new code</span></span> |<span data-ttu-id="a154e-181">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-181">Yes</span></span> |<span data-ttu-id="a154e-182">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-182">Yes</span></span> |<span data-ttu-id="a154e-183">Ja</span><span class="sxs-lookup"><span data-stu-id="a154e-183">Yes</span></span> |

<span data-ttu-id="a154e-184"><sup>1</sup> wijziging van grootte beperkt toohello subset van grootten beschikbaar voor Hallo cloudservice.</span><span class="sxs-lookup"><span data-stu-id="a154e-184"><sup>1</sup> Size change limited toohello subset of sizes available for hello cloud service.</span></span>

<span data-ttu-id="a154e-185"><sup>2</sup> vereist Azure SDK 1.5 of hoger.</span><span class="sxs-lookup"><span data-stu-id="a154e-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="a154e-186">Het wijzigen van de grootte van de virtuele machine Hallo vernietigt lokale gegevens.</span><span class="sxs-lookup"><span data-stu-id="a154e-186">Changing hello virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="a154e-187">Hallo volgende items worden niet ondersteund tijdens het bijwerken:</span><span class="sxs-lookup"><span data-stu-id="a154e-187">hello following items are not supported during an update:</span></span>

* <span data-ttu-id="a154e-188">Hallo-naam van een rol wijzigen.</span><span class="sxs-lookup"><span data-stu-id="a154e-188">Changing hello name of a role.</span></span> <span data-ttu-id="a154e-189">Verwijderen en voeg vervolgens Hallo-rol met de nieuwe naam Hallo.</span><span class="sxs-lookup"><span data-stu-id="a154e-189">Remove and then add hello role with hello new name.</span></span>
* <span data-ttu-id="a154e-190">Hallo aantal Upgrade wijzigen.</span><span class="sxs-lookup"><span data-stu-id="a154e-190">Changing of hello Upgrade Domain count.</span></span>
* <span data-ttu-id="a154e-191">Verkleinen Hallo Hallo lokale bronnen.</span><span class="sxs-lookup"><span data-stu-id="a154e-191">Decreasing hello size of hello local resources.</span></span>

<span data-ttu-id="a154e-192">Als u andere updates tooyour van servicedefinitie doorvoert, zoals Hallo verkleinen van een lokale bron, moet u een VIP wisselen update uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="a154e-192">If you are making other updates tooyour service's definition, such as decreasing hello size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="a154e-193">Zie voor meer informatie [wisselen implementatie](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="a154e-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="a154e-194">Hoe een upgrade wordt uitgevoerd</span><span class="sxs-lookup"><span data-stu-id="a154e-194">How an upgrade proceeds</span></span>
<span data-ttu-id="a154e-195">U kunt beslissen of u tooupdate alle Hallo rollen in uw service of een enkele rol bij het Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="a154e-195">You can decide whether you want tooupdate all of hello roles in your service or a single role in hello service.</span></span> <span data-ttu-id="a154e-196">In beide gevallen worden alle exemplaren van elke rol die wordt bijgewerkt en deel uitmaken van de eerste upgradedomein toohello gestopt, bijgewerkt en weer online.</span><span class="sxs-lookup"><span data-stu-id="a154e-196">In either case, all instances of each role that is being upgraded and belong toohello first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="a154e-197">Zodra deze weer online, zijn Hallo-exemplaren in de tweede upgradedomein Hallo gestopt, bijgewerkt en weer online.</span><span class="sxs-lookup"><span data-stu-id="a154e-197">Once they are back online, hello instances in hello second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="a154e-198">Een cloudservice kan maximaal één upgrade tegelijk actief hebben.</span><span class="sxs-lookup"><span data-stu-id="a154e-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="a154e-199">Hallo-upgrade wordt altijd uitgevoerd tegen Hallo meest recente versie van Hallo-cloudservice.</span><span class="sxs-lookup"><span data-stu-id="a154e-199">hello upgrade is always performed against hello latest version of hello cloud service.</span></span>

<span data-ttu-id="a154e-200">Hallo volgende diagram illustreert hoe Hallo upgrade wordt uitgevoerd als u een van alle Hallo rollen in Hallo-service upgrade:</span><span class="sxs-lookup"><span data-stu-id="a154e-200">hello following diagram illustrates how hello upgrade proceeds if you are upgrading all of hello roles in hello service:</span></span>

<span data-ttu-id="a154e-201">![Upgrade van service](media/cloud-services-update-azure-service/IC345879.png "Upgrade van service")</span><span class="sxs-lookup"><span data-stu-id="a154e-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="a154e-202">Deze volgende diagram illustreert hoe Hallo update wordt uitgevoerd als u slechts één functie bijwerkt:</span><span class="sxs-lookup"><span data-stu-id="a154e-202">This next diagram illustrates how hello update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="a154e-203">![Upgrade rol](media/cloud-services-update-azure-service/IC345880.png "Upgrade rol")</span><span class="sxs-lookup"><span data-stu-id="a154e-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="a154e-204">Tijdens een automatische update hello Azure-Infrastructuurcontroller periodiek geëvalueerd Hallo status van Hallo cloud service toodetermine wanneer de veilige toowalk Hallo volgende UD.</span><span class="sxs-lookup"><span data-stu-id="a154e-204">During an automatic update, hello Azure Fabric Controller periodically evaluates hello health of hello cloud service toodetermine when it’s safe toowalk hello next UD.</span></span> <span data-ttu-id="a154e-205">Deze health-evaluatie wordt uitgevoerd op basis van per rol en overweegt alleen exemplaren in Hallo meest recente versie (dat wil zeggen de exemplaren van UDs die al zijn gelopen).</span><span class="sxs-lookup"><span data-stu-id="a154e-205">This health evaluation is performed on a per-role basis and considers only instances in hello latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="a154e-206">Controleert of dat een minimum aantal rolexemplaren, voor elke rol, hebben een goede definitieve status bereikt.</span><span class="sxs-lookup"><span data-stu-id="a154e-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="a154e-207">Time-out voor de Start van de rol exemplaar</span><span class="sxs-lookup"><span data-stu-id="a154e-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="a154e-208">Hallo Infrastructuurcontroller wacht 30 minuten voor elke rol exemplaar tooreach een status gestart.</span><span class="sxs-lookup"><span data-stu-id="a154e-208">hello Fabric Controller will wait 30 minutes for each role instance tooreach a Started state.</span></span> <span data-ttu-id="a154e-209">Als de time-outduur Hallo verstrijkt, blijft Hallo Infrastructuurcontroller toohello volgende rolinstantie lopen.</span><span class="sxs-lookup"><span data-stu-id="a154e-209">If hello timeout duration elapses, hello Fabric Controller will continue walking toohello next role instance.</span></span>

### <a name="impact-toodrive-data-during-cloud-service-upgrades"></a><span data-ttu-id="a154e-210">Gegevens van de impact toodrive tijdens Cloudservice upgrades</span><span class="sxs-lookup"><span data-stu-id="a154e-210">Impact toodrive data during Cloud Service upgrades</span></span>

<span data-ttu-id="a154e-211">Bij het bijwerken van een service van een enkele instantie toomultiple exemplaren wordt uw service worden verbroken tijdens het Hallo-upgrade wordt uitgevoerd vanwege toohello manier die Azure services worden bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="a154e-211">When upgrading a service from a single instance toomultiple instances your service will be brought down while hello upgrade is performed due toohello way Azure upgrades services.</span></span> <span data-ttu-id="a154e-212">Hallo service level agreement aansprakelijke servicebeschikbaarheid tooservices die zijn geïmplementeerd met meer dan één exemplaar is alleen van toepassing.</span><span class="sxs-lookup"><span data-stu-id="a154e-212">hello service level agreement guaranteeing service availability only applies tooservices that are deployed with more than one instance.</span></span> <span data-ttu-id="a154e-213">Hallo hieronder wordt beschreven hoe gegevens op elk station hello wordt beïnvloed door elke Azure-service-upgrade scenario:</span><span class="sxs-lookup"><span data-stu-id="a154e-213">hello following list describes how hello data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="a154e-214">Scenario</span><span class="sxs-lookup"><span data-stu-id="a154e-214">Scenario</span></span>|<span data-ttu-id="a154e-215">C-schijf</span><span class="sxs-lookup"><span data-stu-id="a154e-215">C Drive</span></span>|<span data-ttu-id="a154e-216">D-station</span><span class="sxs-lookup"><span data-stu-id="a154e-216">D Drive</span></span>|<span data-ttu-id="a154e-217">E-station</span><span class="sxs-lookup"><span data-stu-id="a154e-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="a154e-218">VM opnieuw wordt opgestart</span><span class="sxs-lookup"><span data-stu-id="a154e-218">VM reboot</span></span>|<span data-ttu-id="a154e-219">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-219">Preserved</span></span>|<span data-ttu-id="a154e-220">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-220">Preserved</span></span>|<span data-ttu-id="a154e-221">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-221">Preserved</span></span>|
|<span data-ttu-id="a154e-222">Portal opnieuw opstarten</span><span class="sxs-lookup"><span data-stu-id="a154e-222">Portal reboot</span></span>|<span data-ttu-id="a154e-223">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-223">Preserved</span></span>|<span data-ttu-id="a154e-224">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-224">Preserved</span></span>|<span data-ttu-id="a154e-225">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-225">Destroyed</span></span>|
|<span data-ttu-id="a154e-226">Portal terugzetten van de installatiekopie</span><span class="sxs-lookup"><span data-stu-id="a154e-226">Portal reimage</span></span>|<span data-ttu-id="a154e-227">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-227">Preserved</span></span>|<span data-ttu-id="a154e-228">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-228">Destroyed</span></span>|<span data-ttu-id="a154e-229">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-229">Destroyed</span></span>|
|<span data-ttu-id="a154e-230">In-Place Upgrade</span><span class="sxs-lookup"><span data-stu-id="a154e-230">In-Place Upgrade</span></span>|<span data-ttu-id="a154e-231">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-231">Preserved</span></span>|<span data-ttu-id="a154e-232">Behouden</span><span class="sxs-lookup"><span data-stu-id="a154e-232">Preserved</span></span>|<span data-ttu-id="a154e-233">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-233">Destroyed</span></span>|
|<span data-ttu-id="a154e-234">Migratie van knooppunt</span><span class="sxs-lookup"><span data-stu-id="a154e-234">Node migration</span></span>|<span data-ttu-id="a154e-235">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-235">Destroyed</span></span>|<span data-ttu-id="a154e-236">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-236">Destroyed</span></span>|<span data-ttu-id="a154e-237">Vernietigd</span><span class="sxs-lookup"><span data-stu-id="a154e-237">Destroyed</span></span>|

<span data-ttu-id="a154e-238">Houd er rekening mee dat in Hallo boven lijst Hallo station E: basisstation Hallo-rol en mag geen vastgelegde.</span><span class="sxs-lookup"><span data-stu-id="a154e-238">Note that, in hello above list, hello E: drive represents hello role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="a154e-239">Gebruik in plaats daarvan Hallo **% RoleRoot %** omgeving variabele toorepresent Hallo station.</span><span class="sxs-lookup"><span data-stu-id="a154e-239">Instead, use hello **%RoleRoot%** environment variable toorepresent hello drive.</span></span>

<span data-ttu-id="a154e-240">toominimize hello uitvaltijd bij een upgrade van een service single instance een nieuwe meerdere exemplaren service toohello staging-server implementeren en geen VIP's wisselen.</span><span class="sxs-lookup"><span data-stu-id="a154e-240">toominimize hello downtime when upgrading a single-instance service, deploy a new multi-instance service toohello staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="a154e-241">Terugdraaien van een update</span><span class="sxs-lookup"><span data-stu-id="a154e-241">Rollback of an update</span></span>
<span data-ttu-id="a154e-242">Azure biedt flexibiliteit voor het beheren van services tijdens het bijwerken doordat u kunt aanvullende bewerkingen op een service starten na Hallo initiële update-aanvraag wordt geaccepteerd door hello Azure-Infrastructuurcontroller.</span><span class="sxs-lookup"><span data-stu-id="a154e-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after hello initial update request is accepted by hello Azure Fabric Controller.</span></span> <span data-ttu-id="a154e-243">Terugdraaien kan alleen worden uitgevoerd wanneer een update (configuratie wijzigen) of upgrade wordt Hallo **Bezig** status op Hallo-implementatie.</span><span class="sxs-lookup"><span data-stu-id="a154e-243">A rollback can only be performed when an update (configuration change) or upgrade is in hello **in progress** state on hello deployment.</span></span> <span data-ttu-id="a154e-244">Een update of upgrade wordt beschouwd als toobe wordt uitgevoerd, zolang er is ten minste één exemplaar van het Hallo-service die nog niet bijgewerkt toohello nieuwe versie is.</span><span class="sxs-lookup"><span data-stu-id="a154e-244">An update or upgrade is considered toobe in-progress as long as there is at least one instance of hello service which has not yet been updated toohello new version.</span></span> <span data-ttu-id="a154e-245">tootest of een terugdraaibewerking is toegestaan, Controleer Hallo-waarde van Hallo RollbackAllowed vlag die wordt geretourneerd door [ophalen implementatie](https://msdn.microsoft.com/library/azure/ee460804.aspx) en [Cloud Service-eigenschappen ophalen](https://msdn.microsoft.com/library/azure/ee460806.aspx) bewerkingen, tootrue is ingesteld.</span><span class="sxs-lookup"><span data-stu-id="a154e-245">tootest whether a rollback is allowed, check hello value of hello RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set tootrue.</span></span>

> [!NOTE]
> <span data-ttu-id="a154e-246">U stelt alleen zin toocall terugdraaien op een **in-place** bijwerken of bijwerken omdat het VIP wisselen upgrades hebben betrekking op één volledige actief exemplaar van uw service met een andere vervangen.</span><span class="sxs-lookup"><span data-stu-id="a154e-246">It only makes sense toocall Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="a154e-247">Terugdraaien van een update wordt uitgevoerd heeft de volgende gevolgen voor de implementatie van Hallo Hallo:</span><span class="sxs-lookup"><span data-stu-id="a154e-247">Rollback of an in-progress update has hello following effects on hello deployment:</span></span>

* <span data-ttu-id="a154e-248">Alle rolinstanties die nieuwe versie bijgewerkt of bijgewerkte toohello nog niet was is niet bijgewerkt of bijgewerkt, omdat deze instanties al Hallo doelversie van Hallo-service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a154e-248">Any role instances which had not yet been updated or upgraded toohello new version are not updated or upgraded, because those instances are already running hello target version of hello service.</span></span>
* <span data-ttu-id="a154e-249">Een rol van exemplaren die al is bijgewerkt of de nieuwe versie van de bijgewerkte toohello van Hallo servicepakket (\*.cspkg) bestand of Hallo serviceconfiguratie (\*.cscfg)-bestand (of beide bestanden) zijn teruggekeerde toohello vóór de upgrade-versie van Deze bestanden.</span><span class="sxs-lookup"><span data-stu-id="a154e-249">Any role instances which had already been updated or upgraded toohello new version of hello service package (\*.cspkg) file or hello service configuration (\*.cscfg) file (or both files) are reverted toohello pre-upgrade version of these files.</span></span>

<span data-ttu-id="a154e-250">Dit gebeurt functioneel door Hallo volgende kenmerken:</span><span class="sxs-lookup"><span data-stu-id="a154e-250">This functionally is provided by hello following features:</span></span>

* <span data-ttu-id="a154e-251">Hallo [terugdraaien bijwerken of bijwerken](https://msdn.microsoft.com/library/azure/hh403977.aspx) bewerking die kan worden aangeroepen voor een configuratie-update (geactiveerd door het aanroepen van [implementatie-configuratie wijzigen](https://msdn.microsoft.com/library/azure/ee460809.aspx)) of een upgrade (geactiveerd door het aanroepen van [ Upgrade-implementatie](https://msdn.microsoft.com/library/azure/ee460793.aspx)), zolang er ten minste één exemplaar in Hallo service is toohello nieuwe versie die nog niet is bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="a154e-251">hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in hello service which has not yet been updated toohello new version.</span></span>
* <span data-ttu-id="a154e-252">Hallo vergrendeld element en Hallo RollbackAllowed element die worden geretourneerd als onderdeel van de antwoordtekst Hallo Hallo [ophalen implementatie](https://msdn.microsoft.com/library/azure/ee460804.aspx) en [Cloud Service-eigenschappen ophalen](https://msdn.microsoft.com/library/azure/ee460806.aspx) bewerkingen:</span><span class="sxs-lookup"><span data-stu-id="a154e-252">hello Locked element and hello RollbackAllowed element, which are returned as part of hello response body of hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="a154e-253">Hallo vergrendeld element kunt u toodetect wanneer een mutating bewerking kan worden aangeroepen voor een bepaalde implementatie.</span><span class="sxs-lookup"><span data-stu-id="a154e-253">hello Locked element allows you toodetect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="a154e-254">Hallo RollbackAllowed element kunt u toodetect wanneer hello [terugdraaien van de Update of Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) bewerking kan worden aangeroepen voor een bepaalde implementatie.</span><span class="sxs-lookup"><span data-stu-id="a154e-254">hello RollbackAllowed element allows you toodetect when hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="a154e-255">In de volgorde tooperform terugdraaien, hoeft u geen toocheck zowel vergrendeld Hallo Hallo RollbackAllowed elementen.</span><span class="sxs-lookup"><span data-stu-id="a154e-255">In order tooperform a rollback, you do not have toocheck both hello Locked and hello RollbackAllowed elements.</span></span> <span data-ttu-id="a154e-256">Deze achtervoegsels tooconfirm dat RollbackAllowed tootrue is ingesteld.</span><span class="sxs-lookup"><span data-stu-id="a154e-256">It suffices tooconfirm that RollbackAllowed is set tootrue.</span></span> <span data-ttu-id="a154e-257">Deze elementen zijn alleen geretourneerd als deze methoden worden aangeroepen met behulp van Hallo aanvraagheader stellen te ' x-ms-version: 2011-10-01 ' of een latere versie.</span><span class="sxs-lookup"><span data-stu-id="a154e-257">These elements are only returned if these methods are invoked by using hello request header set too“x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="a154e-258">Zie voor meer informatie over kopteksten versioning [Management Serviceversiebeheer](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="a154e-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="a154e-259">Zijn er situaties waarin een terugdraaien van een update of upgrade wordt niet ondersteund, dit als volgt zijn:</span><span class="sxs-lookup"><span data-stu-id="a154e-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="a154e-260">Verlaging van de lokale bronnen - kunnen als Hallo update toeneemt Hallo lokale bronnen voor een functie hello Azure-platform niet worden teruggedraaid.</span><span class="sxs-lookup"><span data-stu-id="a154e-260">Reduction in local resources - If hello update increases hello local resources for a role hello Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="a154e-261">Quotumbeperkingen - als Hallo-update is een schaal omlaag bewerking die u mogelijk niet meer voldoende compute quotum toocomplete Hallo terugdraaibewerking hebben.</span><span class="sxs-lookup"><span data-stu-id="a154e-261">Quota limitations - If hello update was a scale down operation you may no longer have sufficient compute quota toocomplete hello rollback operation.</span></span> <span data-ttu-id="a154e-262">Elk Azure-abonnement heeft een quotum gekoppeld waarmee Hallo kunt u het maximum aantal kernen dat kan worden gebruikt door alle gehoste services die deel uitmaken van toothat abonnement.</span><span class="sxs-lookup"><span data-stu-id="a154e-262">Each Azure subscription has a quota associated with it that specifies hello maximum number of cores which can be consumed by all hosted services that belong toothat subscription.</span></span> <span data-ttu-id="a154e-263">Als u dat terugdraaien van een bepaalde update uw abonnement via quotum vervolgens die plaatst wordt een rollback niet ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="a154e-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="a154e-264">Race condition - als de initiële update Hallo heeft voltooid, terugdraaien is niet mogelijk.</span><span class="sxs-lookup"><span data-stu-id="a154e-264">Race condition - If hello initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="a154e-265">Een voorbeeld van wanneer Hallo terugdraaien van een update mogelijk nuttig is als u Hallo [Upgrade-implementatie](https://msdn.microsoft.com/library/azure/ee460793.aspx) bewerking in de handmatige modus toocontrol Hallo frequentie waarmee een primaire in-place upgrade tooyour Azure service gehoste is geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="a154e-265">An example of when hello rollback of an update might be useful is if you are using hello [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode toocontrol hello rate at which a major in-place upgrade tooyour Azure hosted service is rolled out.</span></span>

<span data-ttu-id="a154e-266">Tijdens implementatie van de upgrade Hallo Hallo u aanroepen [Upgrade-implementatie](https://msdn.microsoft.com/library/azure/ee460793.aspx) in de handmatige modus en upgradedomeinen toowalk beginnen.</span><span class="sxs-lookup"><span data-stu-id="a154e-266">During hello rollout of hello upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin toowalk upgrade domains.</span></span> <span data-ttu-id="a154e-267">Als op een bepaald moment tijdens het controleren van Hallo upgrade u notitie sommige rolinstanties in Hallo eerste upgradedomeinen die u hebt niet meer reageren, kunt u Hallo aanroepen [terugdraaien van de Update of Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) bewerking op de implementatie van Hallo die blijft ongewijzigd Hallo-serverexemplaren die was nog niet zijn bijgewerkt en terugdraaien-serverexemplaren die was bijgewerkt toohello vorige servicepakket en configuratie.</span><span class="sxs-lookup"><span data-stu-id="a154e-267">If at some point, as you monitor hello upgrade, you note some role instances in hello first upgrade domains that you examine have become unresponsive, you can call hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on hello deployment, which will leave untouched hello instances which had not yet been upgraded and rollback instances which had been upgraded toohello previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="a154e-268">Meerdere mutating bewerkingen op een actieve implementatie initiëren</span><span class="sxs-lookup"><span data-stu-id="a154e-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="a154e-269">In sommige gevallen kunt u tooinitiate meerdere gelijktijdige mutating bewerkingen op een actieve implementatie.</span><span class="sxs-lookup"><span data-stu-id="a154e-269">In some cases you may want tooinitiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="a154e-270">Bijvoorbeeld, u kunt een service-update uitvoeren en, terwijl deze update is teruggedraaid uit over uw service, gewenste toomake een andere, bijvoorbeeld tooroll Hallo update terug, een andere update toepassen of zelfs verwijderen Hallo-implementatie.</span><span class="sxs-lookup"><span data-stu-id="a154e-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want toomake some change, e.g. tooroll hello update back, apply a different update, or even delete hello deployment.</span></span> <span data-ttu-id="a154e-271">Een aanvraag waarin dit wordt mogelijk nodig is als een service-upgrade bevat buggy code die ervoor zorgt een bijgewerkte rol exemplaar toorepeatedly vastlopen dat.</span><span class="sxs-lookup"><span data-stu-id="a154e-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance toorepeatedly crash.</span></span> <span data-ttu-id="a154e-272">Hello Azure-Infrastructuurcontroller worden in dit geval niet kunnen toomake uitgevoerd bij het toepassen van die worden bijgewerkt omdat een onvoldoende aantal exemplaren in de bijgewerkte domein Hallo zijn in orde.</span><span class="sxs-lookup"><span data-stu-id="a154e-272">In this case, hello Azure Fabric Controller will not be able toomake progress in applying that upgrade because an insufficient number of instances in hello upgraded domain are healthy.</span></span> <span data-ttu-id="a154e-273">Deze status is waarnaar wordt verwezen tooas een *vastgelopen implementatie*.</span><span class="sxs-lookup"><span data-stu-id="a154e-273">This state is referred tooas a *stuck deployment*.</span></span> <span data-ttu-id="a154e-274">U kunt Hallo implementatie Registreer door terugdraaien Hallo update of een nieuwe update toepassen via bovenaan Hallo een mislukt.</span><span class="sxs-lookup"><span data-stu-id="a154e-274">You can unstick hello deployment by rolling back hello update or applying a fresh update over top of hello failing one.</span></span>

<span data-ttu-id="a154e-275">Nadat Hallo eerste aanvraag tooupdate of upgrade Hallo-service door hello Azure-Infrastructuurcontroller is ontvangen, kunt u de volgende mutating bewerkingen starten.</span><span class="sxs-lookup"><span data-stu-id="a154e-275">Once hello initial request tooupdate or upgrade hello service has been received by hello Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="a154e-276">Dat wil zeggen, hoeft u geen toowait voor Hallo initiële bewerking toocomplete voordat u kunt een andere mutating bewerking.</span><span class="sxs-lookup"><span data-stu-id="a154e-276">That is, you do not have toowait for hello initial operation toocomplete before you can start another mutating operation.</span></span>

<span data-ttu-id="a154e-277">Een tweede update-bewerking starten terwijl de eerste update hello uitgevoerd wordt, wordt vergelijkbaar toohello terugdraaibewerking is uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a154e-277">Initiating a second update operation while hello first update is ongoing will perform similar toohello rollback operation.</span></span> <span data-ttu-id="a154e-278">Als tweede Hallo-update in de automatische modus is, de eerste upgradedomein Hallo onmiddellijk worden geüpgraded, mogelijk tooinstances voorloopspaties uit meerdere upgradedomeinen offline op Hallo dezelfde tijdstip voor herstel.</span><span class="sxs-lookup"><span data-stu-id="a154e-278">If hello second update is in automatic mode, hello first upgrade domain will be upgraded immediately, possibly leading tooinstances from multiple upgrade domains being offline at hello same point in time.</span></span>

<span data-ttu-id="a154e-279">Hallo mutating bewerkingen zijn als volgt: [implementatie-configuratie wijzigen](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade-implementatie](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Implementatiestatus](https://msdn.microsoft.com/library/azure/ee460808.aspx), [verwijderen Implementatie](https://msdn.microsoft.com/library/azure/ee460815.aspx), en [terugdraaien van de Update of Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="a154e-279">hello mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="a154e-280">Twee bewerkingen [ophalen implementatie](https://msdn.microsoft.com/library/azure/ee460804.aspx) en [Cloud Service-eigenschappen ophalen](https://msdn.microsoft.com/library/azure/ee460806.aspx), Hallo vergrendeld vlag die onderzocht toodetermine worden kunnen of een mutating bewerking kan worden aangeroepen voor een bepaalde implementatie te retourneren.</span><span class="sxs-lookup"><span data-stu-id="a154e-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return hello Locked flag which can be examined toodetermine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="a154e-281">In de volgorde toocall Hallo versie van deze methoden die als Hallo vergrendeld vlag resultaat, moet u aanvraagheader te instellen ' x-ms-version: 2011-10-01 ' of een later.</span><span class="sxs-lookup"><span data-stu-id="a154e-281">In order toocall hello version of these methods which returns hello Locked flag, you must set request header too“x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="a154e-282">Zie voor meer informatie over kopteksten versioning [Management Serviceversiebeheer](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="a154e-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="a154e-283">Distributie van functies tussen domeinen upgraden</span><span class="sxs-lookup"><span data-stu-id="a154e-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="a154e-284">Azure worden exemplaren van een rol gelijkmatig over een bepaald aantal upgradedomeinen die kan worden geconfigureerd als onderdeel van hello (.csdef) servicedefinitiebestand verdeeld.</span><span class="sxs-lookup"><span data-stu-id="a154e-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of hello service definition (.csdef) file.</span></span> <span data-ttu-id="a154e-285">maximum aantal upgradedomeinen Hallo is 20 en Hallo standaardwaarde is 5.</span><span class="sxs-lookup"><span data-stu-id="a154e-285">hello max number of upgrade domains is 20 and hello default is 5.</span></span> <span data-ttu-id="a154e-286">Zie voor meer informatie over hoe toomodify servicedefinitiebestand Hallo [Azure Service definitie Schema (.csdef-bestand)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="a154e-286">For more information about how toomodify hello service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="a154e-287">Bijvoorbeeld, als uw rol tien exemplaren heeft, bevat elk upgradedomein standaard twee exemplaren.</span><span class="sxs-lookup"><span data-stu-id="a154e-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="a154e-288">Als uw rol 14 exemplaren heeft, bevat vier hello upgradedomeinen drie exemplaren en een vijfde domein bevat twee.</span><span class="sxs-lookup"><span data-stu-id="a154e-288">If your role has 14 instances, then four of hello upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="a154e-289">Upgradedomeinen worden aangeduid met een op nul gebaseerde index: eerste upgradedomein Hallo heeft een ID van 0 en Hallo tweede upgradedomein heeft een ID van 1, enzovoort.</span><span class="sxs-lookup"><span data-stu-id="a154e-289">Upgrade domains are identified with a zero-based index: hello first upgrade domain has an ID of 0, and hello second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="a154e-290">Hallo volgende diagram illustreert hoe een service dan bevat twee rollen worden gedistribueerd wanneer Hallo service definieert twee upgradedomeinen.</span><span class="sxs-lookup"><span data-stu-id="a154e-290">hello following diagram illustrates how a service than contains two roles are distributed when hello service defines two upgrade domains.</span></span> <span data-ttu-id="a154e-291">Hallo-service wordt uitgevoerd acht exemplaren van Hallo-Webrol en negen exemplaren van Hallo-werkrol.</span><span class="sxs-lookup"><span data-stu-id="a154e-291">hello service is running eight instances of hello web role and nine instances of hello worker role.</span></span>

<span data-ttu-id="a154e-292">![Distributie van Upgradedomeinen](media/cloud-services-update-azure-service/IC345533.png "distributie van Upgradedomeinen")</span><span class="sxs-lookup"><span data-stu-id="a154e-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="a154e-293">Houd er rekening mee dat Azure bepaalt hoe exemplaren worden toegewezen via upgradedomeinen.</span><span class="sxs-lookup"><span data-stu-id="a154e-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="a154e-294">Het is niet mogelijk toospecify welke exemplaren toowhich domein zijn toegewezen.</span><span class="sxs-lookup"><span data-stu-id="a154e-294">It's not possible toospecify which instances are allocated toowhich domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="a154e-295">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a154e-295">Next steps</span></span>
[<span data-ttu-id="a154e-296">Hoe tooManage Cloud-Services</span><span class="sxs-lookup"><span data-stu-id="a154e-296">How tooManage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="a154e-297">Hoe tooMonitor Cloud-Services</span><span class="sxs-lookup"><span data-stu-id="a154e-297">How tooMonitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="a154e-298">Hoe tooConfigure Cloud-Services</span><span class="sxs-lookup"><span data-stu-id="a154e-298">How tooConfigure Cloud Services</span></span>](cloud-services-how-to-configure.md)  
