---
title: aaaTroubleshooting Cloud toewijzingsfout bij | Microsoft Docs
description: Toewijzingsfouten oplossen die zijn opgetreden bij het implementeren van Cloud Services in Azure
services: azure-service-management, cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 529157eb-e4a1-4388-aa2b-09e8b923af74
ms.service: cloud-services
ms.workload: na
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: dfd5cc4663ccc6ed1b27ca9df579182737363b0e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshooting-allocation-failure-when-you-deploy-cloud-services-in-azure"></a><span data-ttu-id="2a746-103">Toewijzingsfouten oplossen die zijn opgetreden bij het implementeren van Cloud Services in Azure</span><span class="sxs-lookup"><span data-stu-id="2a746-103">Troubleshooting allocation failure when you deploy Cloud Services in Azure</span></span>
## <a name="summary"></a><span data-ttu-id="2a746-104">Samenvatting</span><span class="sxs-lookup"><span data-stu-id="2a746-104">Summary</span></span>
<span data-ttu-id="2a746-105">Als u exemplaren tooa Cloudservice implementeren of nieuwe web- of worker-rolexemplaren toevoegen, wijst Microsoft Azure compute-bronnen.</span><span class="sxs-lookup"><span data-stu-id="2a746-105">When you deploy instances tooa Cloud Service or add new web or worker role instances, Microsoft Azure allocates compute resources.</span></span> <span data-ttu-id="2a746-106">Tijd tot tijd krijgt u fouten bij het uitvoeren van deze bewerkingen zelfs voordat u hello Azure-abonnement limieten bereiken.</span><span class="sxs-lookup"><span data-stu-id="2a746-106">You may occasionally receive errors when performing these operations even before you reach hello Azure subscription limits.</span></span> <span data-ttu-id="2a746-107">In dit artikel wordt uitgelegd Hallo oorzaken van een aantal algemene toewijzingsfouten Hallo en mogelijke herstel wordt voorgesteld.</span><span class="sxs-lookup"><span data-stu-id="2a746-107">This article explains hello causes of some of hello common allocation failures and suggests possible remediation.</span></span> <span data-ttu-id="2a746-108">Hallo-informatie is mogelijk ook handig wanneer u van plan Hallo-implementatie van uw services bent.</span><span class="sxs-lookup"><span data-stu-id="2a746-108">hello information may also be useful when you plan hello deployment of your services.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

### <a name="background--how-allocation-works"></a><span data-ttu-id="2a746-109">Achtergrond – de werking van toewijzing</span><span class="sxs-lookup"><span data-stu-id="2a746-109">Background – How allocation works</span></span>
<span data-ttu-id="2a746-110">Hallo-servers in Azure-datacenters worden in clusters gepartitioneerd.</span><span class="sxs-lookup"><span data-stu-id="2a746-110">hello servers in Azure datacenters are partitioned into clusters.</span></span> <span data-ttu-id="2a746-111">Een nieuwe toewijzingsaanvraag voor cloud-service wordt uitgevoerd in meerdere clusters.</span><span class="sxs-lookup"><span data-stu-id="2a746-111">A new cloud service allocation request is attempted in multiple clusters.</span></span> <span data-ttu-id="2a746-112">Wanneer de eerste instantie Hallo geïmplementeerde tooa cloudservice (in fasering of productie), die de cloudservice is vastgemaakt tooa cluster opgehaald.</span><span class="sxs-lookup"><span data-stu-id="2a746-112">When hello first instance is deployed tooa cloud service(in either staging or production), that cloud service gets pinned tooa cluster.</span></span> <span data-ttu-id="2a746-113">Verdere implementaties voor Hallo cloudservice in Hallo hetzelfde gebeurt cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-113">Any further deployments for hello cloud service will happen in hello same cluster.</span></span> <span data-ttu-id="2a746-114">In dit artikel verwijzen we toothis als 'vastgemaakt tooa cluster'.</span><span class="sxs-lookup"><span data-stu-id="2a746-114">In this article, we'll refer toothis as "pinned tooa cluster".</span></span> <span data-ttu-id="2a746-115">Afbeelding 1 hieronder ziet u Hallo geval van een normale toewijzing die wordt uitgevoerd in meerdere clusters; Diagram 2 ziet u Hallo geval van een toewijzing die vastgemaakt tooCluster 2 omdat die is waar Hallo bestaande CS_1 voor Cloud-Service wordt gehost.</span><span class="sxs-lookup"><span data-stu-id="2a746-115">Diagram 1 below illustrates hello case of a normal allocation which is attempted in multiple clusters; Diagram 2 illustrates hello case of an allocation that's pinned tooCluster 2 because that's where hello existing Cloud Service CS_1 is hosted.</span></span>

![Diagram van toewijzing](./media/cloud-services-allocation-failure/Allocation1.png)

### <a name="why-allocation-failure-happens"></a><span data-ttu-id="2a746-117">Waarom toewijzingsfout gebeurt</span><span class="sxs-lookup"><span data-stu-id="2a746-117">Why allocation failure happens</span></span>
<span data-ttu-id="2a746-118">Wanneer een aanvraag voor geheugentoewijzing vastgemaakt tooa cluster is, is er een hogere kans van resources vrij voor toofind mislukken omdat Hallo beschikbaar resourcegroep beperkt tooa cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-118">When an allocation request is pinned tooa cluster, there's a higher chance of failing toofind free resources since hello available resource pool is limited tooa cluster.</span></span> <span data-ttu-id="2a746-119">Bovendien, als uw aanvraag voor geheugentoewijzing vastgemaakt tooa cluster is maar Hallo type resource dat u hebt aangevraagd wordt niet ondersteund door dit cluster, uw aanvraag mislukt zelfs als Hallo cluster gratis resource heeft.</span><span class="sxs-lookup"><span data-stu-id="2a746-119">Furthermore, if your allocation request is pinned tooa cluster but hello type of resource you requested is not supported by that cluster, your request will fail even if hello cluster has free resource.</span></span> <span data-ttu-id="2a746-120">Diagram 3 hieronder ziet u Hallo geval waarbij een vastgezette toewijzing mislukt, omdat Hallo alleen candidate cluster geen gratis resources heeft.</span><span class="sxs-lookup"><span data-stu-id="2a746-120">Diagram 3 below illustrates hello case where a pinned allocation fails because hello only candidate cluster does not have free resources.</span></span> <span data-ttu-id="2a746-121">Diagram 4 wordt Hallo geval waarbij een vastgezette toewijzing mislukt, omdat Hallo alleen candidate cluster biedt geen ondersteuning voor Hallo aangevraagde VM-grootte, hoewel Hallo cluster resources vrij heeft.</span><span class="sxs-lookup"><span data-stu-id="2a746-121">Diagram 4 illustrates hello case where a pinned allocation fails because hello only candidate cluster does not support hello requested VM size, even though hello cluster has free resources.</span></span>

![Vastgemaakte geheugentoewijzing is mislukt](./media/cloud-services-allocation-failure/Allocation2.png)

## <a name="troubleshooting-allocation-failure-for-cloud-services"></a><span data-ttu-id="2a746-123">Toewijzingsfouten voor cloudservices oplossen</span><span class="sxs-lookup"><span data-stu-id="2a746-123">Troubleshooting allocation failure for cloud services</span></span>
### <a name="error-message"></a><span data-ttu-id="2a746-124">Foutbericht</span><span class="sxs-lookup"><span data-stu-id="2a746-124">Error Message</span></span>
<span data-ttu-id="2a746-125">Hallo volgende foutbericht weergegeven:</span><span class="sxs-lookup"><span data-stu-id="2a746-125">You may see hello following error message:</span></span>

    "Azure operation '{operation id}' failed with code Compute.ConstrainedAllocationFailed. Details: Allocation failed; unable toosatisfy constraints in request. hello requested new service deployment is bound tooan Affinity Group, or it targets a Virtual Network, or there is an existing deployment under this hosted service. Any of these conditions constrains hello new deployment toospecific Azure resources. Please retry later or try reducing hello VM size or number of role instances. Alternatively, if possible, remove hello aforementioned constraints or try deploying tooa different region."

### <a name="common-issues"></a><span data-ttu-id="2a746-126">Algemene problemen</span><span class="sxs-lookup"><span data-stu-id="2a746-126">Common Issues</span></span>
<span data-ttu-id="2a746-127">Hier volgen Hallo algemene toewijzing scenario's die ertoe leiden een toewijzing aanvraag toobe vastgemaakt tooa één cluster dat.</span><span class="sxs-lookup"><span data-stu-id="2a746-127">Here are hello common allocation scenarios that cause an allocation request toobe pinned tooa single cluster.</span></span>

* <span data-ttu-id="2a746-128">TooStaging sleuf - implementeren als een cloudservice een implementatie in een sleuf heeft, vervolgens Hallo volledige in de cloud-service is vastgemaakt tooa specifieke cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-128">Deploying tooStaging Slot - If a cloud service has a deployment in either slot, then hello entire cloud service is pinned tooa specific cluster.</span></span>  <span data-ttu-id="2a746-129">Dit betekent dat als een implementatie al in de productiesite hello bestaat, vervolgens een nieuwe implementatie van de test kan alleen worden toegewezen in hetzelfde cluster als productiesite Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="2a746-129">This means that if a deployment already exists in hello production slot, then a new staging deployment can only be allocated in hello same cluster as hello production slot.</span></span> <span data-ttu-id="2a746-130">Als het Hallo-cluster heeft capaciteit bijna bereikt, mislukken Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="2a746-130">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="2a746-131">Schalen: het toevoegen van nieuwe exemplaren tooan bestaande cloudservice moet toewijzen in Hallo hetzelfde cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-131">Scaling - Adding new instances tooan existing cloud service must allocate in hello same cluster.</span></span>  <span data-ttu-id="2a746-132">Kleine schaal aanvragen kan doorgaans worden verdeeld, maar niet altijd.</span><span class="sxs-lookup"><span data-stu-id="2a746-132">Small scaling requests can usually be allocated, but not always.</span></span> <span data-ttu-id="2a746-133">Als het Hallo-cluster heeft capaciteit bijna bereikt, mislukken Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="2a746-133">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="2a746-134">Affiniteitsgroep - een nieuwe implementatie tooan leeg cloudservice kan worden toegewezen door Hallo fabric in een cluster in deze regio, tenzij het Hallo-cloudservice is vastgemaakt tooan affiniteitsgroep.</span><span class="sxs-lookup"><span data-stu-id="2a746-134">Affinity Group - A new deployment tooan empty cloud service can be allocated by hello fabric in any cluster in that region, unless hello cloud service is pinned tooan affinity group.</span></span> <span data-ttu-id="2a746-135">Implementaties toohello dezelfde affiniteitsgroep worden geprobeerd op Hallo hetzelfde cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-135">Deployments toohello same affinity group will be attempted on hello same cluster.</span></span> <span data-ttu-id="2a746-136">Als het Hallo-cluster heeft capaciteit bijna bereikt, mislukken Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="2a746-136">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="2a746-137">Affiniteitsgroep vNet - oudere virtuele netwerken zijn gebonden tooaffinity groepen in plaats van de regio's en cloudservices in deze virtuele netwerken is vastgemaakt toohello affiniteitsgroep cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-137">Affinity Group vNet - Older Virtual Networks were tied tooaffinity groups instead of regions, and cloud services in these Virtual Networks would be pinned toohello affinity group cluster.</span></span> <span data-ttu-id="2a746-138">Implementaties toothis type virtueel netwerk wordt een poging op Hallo vastgemaakt cluster.</span><span class="sxs-lookup"><span data-stu-id="2a746-138">Deployments toothis type of virtual network will be attempted on hello pinned cluster.</span></span> <span data-ttu-id="2a746-139">Als het Hallo-cluster heeft capaciteit bijna bereikt, mislukken Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="2a746-139">If hello cluster is nearing capacity, hello request may fail.</span></span>

## <a name="solutions"></a><span data-ttu-id="2a746-140">Oplossingen</span><span class="sxs-lookup"><span data-stu-id="2a746-140">Solutions</span></span>
1. <span data-ttu-id="2a746-141">In dat geval tooa nieuwe cloudservice - deze oplossing is waarschijnlijk toobe meest succesvolle als Hallo platform toochoose van alle clusters in deze regio kunt.</span><span class="sxs-lookup"><span data-stu-id="2a746-141">Redeploy tooa new cloud service - This solution is likely toobe most successful as it allows hello platform toochoose from all clusters in that region.</span></span>

   * <span data-ttu-id="2a746-142">Hallo werkbelasting tooa nieuwe cloudservice implementeren</span><span class="sxs-lookup"><span data-stu-id="2a746-142">Deploy hello workload tooa new cloud service</span></span>  
   * <span data-ttu-id="2a746-143">Hallo CNAME of A record toopoint verkeer toohello nieuwe cloudservice bijwerken</span><span class="sxs-lookup"><span data-stu-id="2a746-143">Update hello CNAME or A record toopoint traffic toohello new cloud service</span></span>
   * <span data-ttu-id="2a746-144">Zodra nul verkeer de oude site toohello gaat, kunt u de oude cloudservice Hallo verwijderen.</span><span class="sxs-lookup"><span data-stu-id="2a746-144">Once zero traffic is going toohello old site, you can delete hello old cloud service.</span></span> <span data-ttu-id="2a746-145">Deze oplossing moet rekening worden gebracht zonder uitvaltijd.</span><span class="sxs-lookup"><span data-stu-id="2a746-145">This solution should incur zero downtime.</span></span>
2. <span data-ttu-id="2a746-146">Verwijderen van de productie- en staging-sleuven: deze oplossing uw bestaande DNS-naam blijft behouden, maar zal leiden tot uitvaltijd tooyour toepassing.</span><span class="sxs-lookup"><span data-stu-id="2a746-146">Delete both production and staging slots - This solution will preserve your existing DNS name, but will cause downtime tooyour application.</span></span>

   * <span data-ttu-id="2a746-147">Hallo productie- en staging-sleuven van een bestaande cloudservice zodat Hallo-cloudservice leeg is, verwijderen en vervolgens</span><span class="sxs-lookup"><span data-stu-id="2a746-147">Delete hello production and staging slots of an existing cloud service so that hello cloud service is empty, and then</span></span>
   * <span data-ttu-id="2a746-148">Maak een nieuwe implementatie in een bestaande cloudservice Hallo.</span><span class="sxs-lookup"><span data-stu-id="2a746-148">Create a new deployment in hello existing cloud service.</span></span> <span data-ttu-id="2a746-149">Dit wordt opnieuw geprobeerd tooallocation in alle clusters in Hallo regio.</span><span class="sxs-lookup"><span data-stu-id="2a746-149">This will re-attempt tooallocation on all clusters in hello region.</span></span> <span data-ttu-id="2a746-150">Zorg ervoor dat Hallo cloud-service is niet gebonden tooan affiniteitsgroep.</span><span class="sxs-lookup"><span data-stu-id="2a746-150">Ensure hello cloud service is not tied tooan affinity group.</span></span>
3. <span data-ttu-id="2a746-151">Gereserveerd IP - behoudt deze oplossing voor uw bestaande IP-adres, maar zal leiden tot uitvaltijd tooyour toepassing.</span><span class="sxs-lookup"><span data-stu-id="2a746-151">Reserved IP -  This solution will preserve your existing IP address, but will cause downtime tooyour application.</span></span>  

   * <span data-ttu-id="2a746-152">Maken van een ReservedIP voor uw bestaande implementatie met behulp van Powershell</span><span class="sxs-lookup"><span data-stu-id="2a746-152">Create a ReservedIP for your existing deployment using Powershell</span></span>

     ```
     New-AzureReservedIP -ReservedIPName {new reserved IP name} -Location {location} -ServiceName {existing service name}
     ```
   * <span data-ttu-id="2a746-153">Ga als volgt #2 hierboven, waardoor ervoor toospecify Hallo nieuwe ReservedIP in CSCFG Hallo-service.</span><span class="sxs-lookup"><span data-stu-id="2a746-153">Follow #2 from above, making sure toospecify hello new ReservedIP in hello service's CSCFG.</span></span>
4. <span data-ttu-id="2a746-154">Verwijder affiniteitsgroep voor nieuwe implementaties - Affiniteitsgroepen niet langer worden aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="2a746-154">Remove affinity group for new deployments - Affinity Groups are no longer recommended.</span></span> <span data-ttu-id="2a746-155">Volg de stappen voor #1 hierboven toodeploy een nieuwe cloudservice.</span><span class="sxs-lookup"><span data-stu-id="2a746-155">Follow steps for #1 above toodeploy a new cloud service.</span></span> <span data-ttu-id="2a746-156">Zorg ervoor dat cloudservice is niet in een affiniteitsgroep.</span><span class="sxs-lookup"><span data-stu-id="2a746-156">Ensure cloud service is not in an affinity group.</span></span>
5. <span data-ttu-id="2a746-157">Converteren van tooa regionaal virtueel netwerk - Zie [hoe toomigrate van Affiniteitsgroepen tooa regionaal virtueel netwerk (VNet)](../virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="2a746-157">Convert tooa Regional Virtual Network - See [How toomigrate from Affinity Groups tooa Regional Virtual Network (VNet)](../virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span></span>
