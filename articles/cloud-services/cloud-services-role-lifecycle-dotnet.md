---
title: gebeurtenissen van de aaaHandle Cloud Service lifecycle | Microsoft Docs
description: Meer informatie over hoe Hallo lifecycle methoden van een Cloudservice-rol kunnen worden gebruikt in .NET
services: cloud-services
documentationcenter: .net
author: Thraka
manager: timlt
editor: 
ms.assetid: 39b30acd-57b9-48b7-a7c4-40ea3430e451
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/18/2017
ms.author: adegeo
ms.openlocfilehash: cc0ccc5f055b965202b6e081a6ab72ad5d39b034
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="customize-hello-lifecycle-of-a-web-or-worker-role-in-net"></a><span data-ttu-id="59e5f-103">Hallo levenscyclus van een Web- of Worker-rol in .NET aanpassen</span><span class="sxs-lookup"><span data-stu-id="59e5f-103">Customize hello Lifecycle of a Web or Worker role in .NET</span></span>
<span data-ttu-id="59e5f-104">Wanneer u een werkrol maakt, u Hallo uitbreiden [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) klasse biedt methoden voor u toooverride waarmee u kunt reageren toolifecycle gebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="59e5f-104">When you create a worker role, you extend hello [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) class which provides methods for you toooverride that let you respond toolifecycle events.</span></span> <span data-ttu-id="59e5f-105">Deze klasse is voor webrollen optioneel, zodat u toorespond toolifecycle gebeurtenissen moet gebruiken.</span><span class="sxs-lookup"><span data-stu-id="59e5f-105">For web roles this class is optional, so you must use it toorespond toolifecycle events.</span></span>

## <a name="extend-hello-roleentrypoint-class"></a><span data-ttu-id="59e5f-106">Hallo RoleEntryPoint klasse uitbreiden</span><span class="sxs-lookup"><span data-stu-id="59e5f-106">Extend hello RoleEntryPoint class</span></span>
<span data-ttu-id="59e5f-107">Hallo [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) klasse bevat methoden die door Azure worden aangeroepen wanneer het **begint**, **wordt uitgevoerd**, of **stopt** een web- of worker-rol.</span><span class="sxs-lookup"><span data-stu-id="59e5f-107">hello [RoleEntryPoint](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx) class includes methods that are called by Azure when it **starts**, **runs**, or **stops** a web or worker role.</span></span> <span data-ttu-id="59e5f-108">U kunt eventueel deze methoden toomanage rol initialisatie, rol afsluiten reeksen of Hallo uitvoeringsthread van Hallo rol overschrijven.</span><span class="sxs-lookup"><span data-stu-id="59e5f-108">You can optionally override these methods toomanage role initialization, role shutdown sequences, or hello execution thread of hello role.</span></span> 

<span data-ttu-id="59e5f-109">Wanneer u uitbreidt **RoleEntryPoint**, u moet rekening houden met de Hallo gedrag van Hallo methoden volgen:</span><span class="sxs-lookup"><span data-stu-id="59e5f-109">When extending **RoleEntryPoint**, you should be aware of hello following behaviors of hello methods:</span></span>

* <span data-ttu-id="59e5f-110">Hallo [OnStart](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx) en [OnStop](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) methoden retourneren een Booleaanse waarde, dus is het mogelijk tooreturn **false** van deze methoden.</span><span class="sxs-lookup"><span data-stu-id="59e5f-110">hello [OnStart](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx) and [OnStop](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) methods return a boolean value, so it is possible tooreturn **false** from these methods.</span></span>
  
   <span data-ttu-id="59e5f-111">Als uw code retourneert **false**, Hallo rol proces is onverwacht beëindigd, zonder dat elke afsluitvolgorde uitgevoerd mogelijk hebt u in plaats.</span><span class="sxs-lookup"><span data-stu-id="59e5f-111">If your code returns **false**, hello role process is abruptly terminated, without running any shutdown sequence you may have in place.</span></span> <span data-ttu-id="59e5f-112">In het algemeen moet u vermijden retourneren **false** van Hallo **OnStart** methode.</span><span class="sxs-lookup"><span data-stu-id="59e5f-112">In general, you should avoid returning **false** from hello **OnStart** method.</span></span>
* <span data-ttu-id="59e5f-113">Een onbekende uitzondering opgetreden binnen een overload van een **RoleEntryPoint** methode wordt behandeld als een onverwerkte uitzondering.</span><span class="sxs-lookup"><span data-stu-id="59e5f-113">Any uncaught exception within an overload of a **RoleEntryPoint** method is treated as an unhandled exception.</span></span>
  
   <span data-ttu-id="59e5f-114">Als er een uitzondering optreedt binnen één Hallo lifecycle methoden, Azure Hallo verhoogt [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) gebeurtenis, en vervolgens Hallo-proces is beëindigd.</span><span class="sxs-lookup"><span data-stu-id="59e5f-114">If an exception occurs within one of hello lifecycle methods, Azure will raise hello [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) event, and then hello process is terminated.</span></span> <span data-ttu-id="59e5f-115">Nadat uw rol heeft offline is gezet, wordt deze opnieuw starten door Azure.</span><span class="sxs-lookup"><span data-stu-id="59e5f-115">After your role has been taken offline, it will be restarted by Azure.</span></span> <span data-ttu-id="59e5f-116">Wanneer een niet-verwerkte uitzondering optreedt, hello [stoppen](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx) gebeurtenis wordt niet gegenereerd en Hallo **OnStop** methode is niet aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="59e5f-116">When an unhandled exception occurs, hello [Stopping](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.stopping.aspx) event is not raised, and hello **OnStop** method is not called.</span></span>

<span data-ttu-id="59e5f-117">Als uw rol niet gestart wordt of is recycling tussen Hallo initialiseren, statussen bezet en stoppen, kan uw code worden er wordt een onverwerkte uitzondering binnen één Hallo lifecycle gebeurtenissen die elke keer Hallo rol opnieuw wordt opgestart.</span><span class="sxs-lookup"><span data-stu-id="59e5f-117">If your role does not start, or is recycling between hello initializing, busy, and stopping states, your code may be throwing an unhandled exception within one of hello lifecycle events each time hello role restarts.</span></span> <span data-ttu-id="59e5f-118">In dit geval gebruiken Hallo [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) gebeurtenis toodetermine oorzaak van de uitzondering Hallo Hallo en op juiste manier verwerken.</span><span class="sxs-lookup"><span data-stu-id="59e5f-118">In this case, use hello [UnhandledException](https://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx) event toodetermine hello cause of hello exception and handle it appropriately.</span></span> <span data-ttu-id="59e5f-119">Uw rol kan ook worden teruggekeerd uit Hallo [uitvoeren](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx) methode waardoor Hallo rol toorestart.</span><span class="sxs-lookup"><span data-stu-id="59e5f-119">Your role may also be returning from hello [Run](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx) method, which causes hello role toorestart.</span></span> <span data-ttu-id="59e5f-120">Zie voor meer informatie over implementatiestatussen [veelvoorkomende problemen die oorzaak rollen tooRecycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md).</span><span class="sxs-lookup"><span data-stu-id="59e5f-120">For more information about deployment states, see [Common Issues Which Cause Roles tooRecycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md).</span></span>

> [!NOTE]
> <span data-ttu-id="59e5f-121">Als u van Hallo gebruikmaakt **Azure-hulpprogramma's voor Microsoft Visual Studio** toodevelop uw toepassing hello rol projectsjablonen automatisch uitbreiden Hallo **RoleEntryPoint** klasse voor u, in Hallo *WebRole.cs* en *WorkerRole.cs* bestanden.</span><span class="sxs-lookup"><span data-stu-id="59e5f-121">If you are using hello **Azure Tools for Microsoft Visual Studio** toodevelop your application, hello role project templates automatically extend hello **RoleEntryPoint** class for you, in hello *WebRole.cs* and *WorkerRole.cs* files.</span></span>
> 
> 

## <a name="onstart-method"></a><span data-ttu-id="59e5f-122">OnStart-methode</span><span class="sxs-lookup"><span data-stu-id="59e5f-122">OnStart method</span></span>
<span data-ttu-id="59e5f-123">Hallo **OnStart** methode wordt aangeroepen wanneer uw rolexemplaar online is gebracht door Azure.</span><span class="sxs-lookup"><span data-stu-id="59e5f-123">hello **OnStart** method is called when your role instance is brought online by Azure.</span></span> <span data-ttu-id="59e5f-124">Tijdens het Hallo OnStart code wordt uitgevoerd, Hallo rolinstantie is gemarkeerd als **bezet** en er is geen externe verkeer worden gerichte tooit door Hallo load balancer.</span><span class="sxs-lookup"><span data-stu-id="59e5f-124">While hello OnStart code is executing, hello role instance is marked as **Busy** and no external traffic will be directed tooit by hello load balancer.</span></span> <span data-ttu-id="59e5f-125">U kunt dit werk methode tooperform initialisatie, zoals het implementeren van gebeurtenis-handlers en worden gestart overschrijven [Azure Diagnostics](cloud-services-how-to-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="59e5f-125">You can override this method tooperform initialization work, such as implementing event handlers and starting [Azure Diagnostics](cloud-services-how-to-monitor.md).</span></span>

<span data-ttu-id="59e5f-126">Als **OnStart** retourneert **true**, Hallo-exemplaar is geïnitialiseerd en Azure roept Hallo **RoleEntryPoint.Run** methode.</span><span class="sxs-lookup"><span data-stu-id="59e5f-126">If **OnStart** returns **true**, hello instance is successfully initialized and Azure calls hello **RoleEntryPoint.Run** method.</span></span> <span data-ttu-id="59e5f-127">Als **OnStart** retourneert **false**, Hallo rol beëindigt onmiddellijk, zonder eventuele reeksen geplande afsluiting wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="59e5f-127">If **OnStart** returns **false**, hello role terminates immediately, without executing any planned shutdown sequences.</span></span>

<span data-ttu-id="59e5f-128">Hallo van de volgende code voorbeeld ziet u hoe toooverride hello **OnStart** methode.</span><span class="sxs-lookup"><span data-stu-id="59e5f-128">hello following code example shows how toooverride hello **OnStart** method.</span></span> <span data-ttu-id="59e5f-129">Deze methode wordt geconfigureerd en een diagnostische monitor wordt gestart wanneer Hallo rolinstantie wordt gestart en stelt u een overdracht gegevens tooa storage-account aan te melden:</span><span class="sxs-lookup"><span data-stu-id="59e5f-129">This method configures and starts a diagnostic monitor when hello role instance starts and sets up a transfer of logging data tooa storage account:</span></span>

```csharp
public override bool OnStart()
{
    var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

    config.DiagnosticInfrastructureLogs.ScheduledTransferLogLevelFilter = LogLevel.Error;
    config.DiagnosticInfrastructureLogs.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

    DiagnosticMonitor.Start("DiagnosticsConnectionString", config);

    return true;
}
```

## <a name="onstop-method"></a><span data-ttu-id="59e5f-130">OnStop methode</span><span class="sxs-lookup"><span data-stu-id="59e5f-130">OnStop method</span></span>
<span data-ttu-id="59e5f-131">Hallo **OnStop** methode wordt aangeroepen nadat een rolinstantie offline is genomen door Azure en voordat het Hallo-proces wordt afgesloten.</span><span class="sxs-lookup"><span data-stu-id="59e5f-131">hello **OnStop** method is called after a role instance has been taken offline by Azure and before hello process exits.</span></span> <span data-ttu-id="59e5f-132">U kunt deze methode toocall code vereist is voor uw rol exemplaar toocleanly afgesloten overschrijven.</span><span class="sxs-lookup"><span data-stu-id="59e5f-132">You can override this method toocall code required for your role instance toocleanly shut down.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="59e5f-133">Code die wordt uitgevoerd in Hallo **OnStop** methode heeft een beperkte periode toofinish wanneer deze wordt aangeroepen voor andere doeleinden dan een afsluiten van de gebruiker is gestart.</span><span class="sxs-lookup"><span data-stu-id="59e5f-133">Code running in hello **OnStop** method has a limited time toofinish when it is called for reasons other than a user-initiated shutdown.</span></span> <span data-ttu-id="59e5f-134">Nadat deze tijd is verstreken, Hallo-proces wordt beëindigd, dus moet u ervoor zorgen dat de code in Hallo **OnStop** methode snel kunt uitvoeren of maximaal wordt niet uitgevoerd toocompletion toegestaan.</span><span class="sxs-lookup"><span data-stu-id="59e5f-134">After this time elapses, hello process is terminated, so you must make sure that code in hello **OnStop** method can run quickly or tolerates not running toocompletion.</span></span> <span data-ttu-id="59e5f-135">Hallo **OnStop** methode wordt aangeroepen nadat Hallo **stoppen** gebeurtenis is opgetreden.</span><span class="sxs-lookup"><span data-stu-id="59e5f-135">hello **OnStop** method is called after hello **Stopping** event is raised.</span></span>
> 
> 

## <a name="run-method"></a><span data-ttu-id="59e5f-136">Methode niet uitvoeren</span><span class="sxs-lookup"><span data-stu-id="59e5f-136">Run method</span></span>
<span data-ttu-id="59e5f-137">U kunt onderdrukken Hallo **uitvoeren** methode tooimplement een langlopende-thread voor uw rolexemplaar.</span><span class="sxs-lookup"><span data-stu-id="59e5f-137">You can override hello **Run** method tooimplement a long-running thread for your role instance.</span></span>

<span data-ttu-id="59e5f-138">Hallo overschrijven **uitvoeren** methode is niet vereist; Hallo standaardimplementatie een thread die permanent sluimert begint.</span><span class="sxs-lookup"><span data-stu-id="59e5f-138">Overriding hello **Run** method is not required; hello default implementation starts a thread that sleeps forever.</span></span> <span data-ttu-id="59e5f-139">Als u Hallo onderdrukken **uitvoeren** methode, uw code dient te blokkeren voor onbepaalde tijd.</span><span class="sxs-lookup"><span data-stu-id="59e5f-139">If you do override hello **Run** method, your code should block indefinitely.</span></span> <span data-ttu-id="59e5f-140">Als hello **uitvoeren** methode retourneert, Hallo-rol wordt automatisch probleemloos gerecycled; met andere woorden, Azure genereert Hallo **stoppen** gebeurtenis en aanroepen Hallo **OnStop** methode zodat dat uw reeksen afsluiten kunnen worden uitgevoerd voordat de rol Hallo offline wordt gezet.</span><span class="sxs-lookup"><span data-stu-id="59e5f-140">If hello **Run** method returns, hello role is automatically gracefully recycled; in other words, Azure raises hello **Stopping** event and calls hello **OnStop** method so that your shutdown sequences may be executed before hello role is taken offline.</span></span>

### <a name="implementing-hello-aspnet-lifecycle-methods-for-a-web-role"></a><span data-ttu-id="59e5f-141">Hallo ASP.NET lifecycle methoden voor een Webrol implementeren</span><span class="sxs-lookup"><span data-stu-id="59e5f-141">Implementing hello ASP.NET lifecycle methods for a web role</span></span>
<span data-ttu-id="59e5f-142">U kunt Hallo ASP.NET lifecycle methoden gebruiken bovendien toothose geleverd door Hallo **RoleEntryPoint** klasse, toomanage initialisatie en afsluiten die gebruikmaken van een Webrol.</span><span class="sxs-lookup"><span data-stu-id="59e5f-142">You can use hello ASP.NET lifecycle methods, in addition toothose provided by hello **RoleEntryPoint** class, toomanage initialization and shutdown sequences for a web role.</span></span> <span data-ttu-id="59e5f-143">Dit kan zijn handig voor compatibiliteit als u bij het overbrengen van een bestaande tooAzure voor ASP.NET-toepassing.</span><span class="sxs-lookup"><span data-stu-id="59e5f-143">This may be useful for compatibility purposes if you are porting an existing ASP.NET application tooAzure.</span></span> <span data-ttu-id="59e5f-144">Hallo ASP.NET lifecycle methoden worden aangeroepen vanuit Hallo **RoleEntryPoint** methoden.</span><span class="sxs-lookup"><span data-stu-id="59e5f-144">hello ASP.NET lifecycle methods are called from within hello **RoleEntryPoint** methods.</span></span> <span data-ttu-id="59e5f-145">Hallo **toepassing\_Start** methode wordt aangeroepen nadat Hallo **RoleEntryPoint.OnStart** methode is voltooid.</span><span class="sxs-lookup"><span data-stu-id="59e5f-145">hello **Application\_Start** method is called after hello **RoleEntryPoint.OnStart** method finishes.</span></span> <span data-ttu-id="59e5f-146">Hallo **toepassing\_End** methode wordt aangeroepen voordat Hallo **RoleEntryPoint.OnStop** methode wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="59e5f-146">hello **Application\_End** method is called before hello **RoleEntryPoint.OnStop** method is called.</span></span>

## <a name="next-steps"></a><span data-ttu-id="59e5f-147">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="59e5f-147">Next steps</span></span>
<span data-ttu-id="59e5f-148">Meer informatie over hoe te[maken van een cloud service-pakket](cloud-services-model-and-package.md).</span><span class="sxs-lookup"><span data-stu-id="59e5f-148">Learn how too[create a cloud service package](cloud-services-model-and-package.md).</span></span>

