---
title: aaaBest procedures voor automatisch schalen | Microsoft Docs
description: Patronen voor automatisch schalen in Azure voor Web-Apps, Virtual Machine-schaalsets en Cloud-Services
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: eb731c15e440af93a2675210583878814d0d8818
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="32607-103">Aanbevolen procedures voor Automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-103">Best practices for Autoscale</span></span>
<span data-ttu-id="32607-104">In dit artikel leert best practices tooautoscale in Azure.</span><span class="sxs-lookup"><span data-stu-id="32607-104">This article teaches best practices tooautoscale in Azure.</span></span> <span data-ttu-id="32607-105">Monitor voor automatisch schalen die Azure geldt alleen te[virtuele-Machineschaalsets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloudservices](https://azure.microsoft.com/services/cloud-services/), en [App Service - Web-Apps](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="32607-105">Azure Monitor autoscale applies only too[Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="32607-106">Andere Azure-services verschillende schalen methoden gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32607-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="32607-107">Concepten voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-107">Autoscale concepts</span></span>
* <span data-ttu-id="32607-108">Een resource kan alleen hebben *één* instelling voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="32607-109">Een instelling voor automatisch schalen kan een of meer profielen en elk profiel zijn een of meer regels voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="32607-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="32607-110">Een instelling voor automatisch schalen schaalt exemplaren horizontaal, namelijk *uit* doordat Hallo exemplaren en *in* door te verlagen Hallo aantal exemplaren.</span><span class="sxs-lookup"><span data-stu-id="32607-110">An autoscale setting scales instances horizontally, which is *out* by increasing hello instances and *in* by decreasing hello number of instances.</span></span>
  <span data-ttu-id="32607-111">Een instelling voor automatisch schalen heeft een maximale, minimale en standaardwaarde van exemplaren.</span><span class="sxs-lookup"><span data-stu-id="32607-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="32607-112">Een taak voor automatisch schalen leest altijd Hallo metrische tooscale controleren door gekoppeld als het geconfigureerde drempelwaarde Hallo voor scale-out of de schaal is gepasseerd.</span><span class="sxs-lookup"><span data-stu-id="32607-112">An autoscale job always reads hello associated metric tooscale by, checking if it has crossed hello configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="32607-113">U kunt een lijst weergeven van metrische gegevens die automatisch schalen kunt schalen door op [Azure Monitor automatisch schalen algemene metrische gegevens](insights-autoscale-common-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="32607-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="32607-114">Alle drempelwaarden zijn berekend op het niveau van een exemplaar.</span><span class="sxs-lookup"><span data-stu-id="32607-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="32607-115">Bijvoorbeeld ' scale door 1 exemplaar wanneer gemiddelde CPU > 80% wanneer het aantal exemplaren is 2 ', scale-out betekent dat als de gemiddelde CPU Hallo over alle exemplaren groter dan 80 is %.</span><span class="sxs-lookup"><span data-stu-id="32607-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when hello average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="32607-116">U ontvangt altijd fout meldingen via e-mail.</span><span class="sxs-lookup"><span data-stu-id="32607-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="32607-117">In het bijzonder ontvangen Hallo eigenaar, bijdrager en lezers van Hallo doelbron e-mail.</span><span class="sxs-lookup"><span data-stu-id="32607-117">Specifically, hello owner, contributor, and readers of hello target resource receive email.</span></span> <span data-ttu-id="32607-118">U ontvangt ook altijd een *herstel* Stuur een e-mail wanneer automatisch schalen vanuit een fout herstelt en begint met het normaal functioneert.</span><span class="sxs-lookup"><span data-stu-id="32607-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="32607-119">U kunt aanmelden tooreceive een geslaagde scale actie-melding via e-mail en webhooks.</span><span class="sxs-lookup"><span data-stu-id="32607-119">You can opt-in tooreceive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="32607-120">Aanbevolen procedures voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-120">Autoscale best practices</span></span>
<span data-ttu-id="32607-121">Gebruik Hallo volgende aanbevolen procedures als u automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="32607-121">Use hello following best practices as you use autoscale.</span></span>

### <a name="ensure-hello-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="32607-122">Zorg ervoor dat Hallo maximale en minimale waarden zijn verschillend en een voldoende marge tussen deze twee hebben</span><span class="sxs-lookup"><span data-stu-id="32607-122">Ensure hello maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="32607-123">Als u een instelling van minimaal hebt = 2, maximale = 2 en het huidige aantal exemplaren Hallo 2 is geen schaalactie kan optreden.</span><span class="sxs-lookup"><span data-stu-id="32607-123">If you have a setting that has minimum=2, maximum=2 and hello current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="32607-124">Houd een voldoende marge tussen Hallo maximale en minimale exemplaar aantallen, inclusief zijn.</span><span class="sxs-lookup"><span data-stu-id="32607-124">Keep an adequate margin between hello maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="32607-125">Automatisch schalen schaalt altijd tussen deze limieten.</span><span class="sxs-lookup"><span data-stu-id="32607-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="32607-126">Handmatig schalen wordt opnieuw ingesteld door automatisch schalen min en max</span><span class="sxs-lookup"><span data-stu-id="32607-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="32607-127">Als u handmatig werk Hallo exemplaar aantal tooa waarde boven of onder Hallo-maximum Hallo engine voor het automatisch schalen automatisch wordt geschaald back toohello minimale (indien hieronder) of Hallo maximale (indien hierboven).</span><span class="sxs-lookup"><span data-stu-id="32607-127">If you manually update hello instance count tooa value above or below hello maximum, hello autoscale engine automatically scales back toohello minimum (if below) or hello maximum (if above).</span></span> <span data-ttu-id="32607-128">Bijvoorbeeld, opgeven u Hallo waarde tussen 3 en 6.</span><span class="sxs-lookup"><span data-stu-id="32607-128">For example, you set hello range between 3 and 6.</span></span> <span data-ttu-id="32607-129">Als u een actief exemplaar hebt, schaalt Hallo automatisch schalen engine too3 instanties op de volgende keer wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32607-129">If you have one running instance, hello autoscale engine scales too3 instances on its next run.</span></span> <span data-ttu-id="32607-130">Ook kan het zou schaal in 8 exemplaren back-too6 op de volgende keer wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32607-130">Likewise, it would scale-in 8 instances back too6 on its next run.</span></span>  <span data-ttu-id="32607-131">Handmatig schalen is zeer tijdelijk tenzij u Hallo automatisch schalen regels ook opnieuw instellen.</span><span class="sxs-lookup"><span data-stu-id="32607-131">Manual scaling is very temporary unless you reset hello autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="32607-132">Gebruik altijd een combinatie van scale-out en schaal in regel waarmee een verhogen en de afname</span><span class="sxs-lookup"><span data-stu-id="32607-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="32607-133">Als u slechts één deel van de combinatie hello, is automatisch schalen scale-dat in enkele uit of in, tot Hallo maximum of minimum, bereikt.</span><span class="sxs-lookup"><span data-stu-id="32607-133">If you use only one part of hello combination, autoscale scale-in that single out, or in, until hello maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-hello-azure-portal-and-hello-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="32607-134">Niet overschakelen tussen hello Azure-portal en de klassieke Azure-portal Hallo bij het beheren van automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-134">Do not switch between hello Azure portal and hello Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="32607-135">Hello Azure-portal (portal.azure.com) toocreate gebruiken en beheren van instellingen voor automatisch schalen voor Cloudservices en App-Services (Web-Apps).</span><span class="sxs-lookup"><span data-stu-id="32607-135">For Cloud Services and App Services (Web Apps), use hello Azure portal (portal.azure.com) toocreate and manage autoscale settings.</span></span> <span data-ttu-id="32607-136">Gebruik voor de virtuele-Machineschaalsets toocreate PowerShell, CLI of REST-API en beheren van de instelling voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="32607-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API toocreate and manage autoscale setting.</span></span> <span data-ttu-id="32607-137">Niet schakelen tussen Hallo klassieke Azure-portal (manage.windowsazure.com) en hello Azure-portal (portal.azure.com) bij het beheren van configuraties voor automatisch schalen.</span><span class="sxs-lookup"><span data-stu-id="32607-137">Do not switch between hello Azure classic portal (manage.windowsazure.com) and hello Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="32607-138">Hallo klassieke Azure-portal en de onderliggende back-end heeft beperkingen.</span><span class="sxs-lookup"><span data-stu-id="32607-138">hello Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="32607-139">Verplaats toohello Azure portal toomanage automatisch schalen met een grafische gebruikersinterface.</span><span class="sxs-lookup"><span data-stu-id="32607-139">Move toohello Azure portal toomanage autoscale using a graphical user interface.</span></span> <span data-ttu-id="32607-140">Hallo-opties zijn toouse Hallo automatisch schalen PowerShell, CLI of REST-API (via Azure Resource Explorer).</span><span class="sxs-lookup"><span data-stu-id="32607-140">hello options are toouse hello autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-hello-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="32607-141">De juiste statistiek Hallo voor uw metriek diagnostische gegevens kiezen</span><span class="sxs-lookup"><span data-stu-id="32607-141">Choose hello appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="32607-142">Voor de metrische gegevens voor diagnostische gegevens, kunt u kiezen uit *gemiddelde*, *Minimum*, *maximale* en *totale* als een metrische tooscale door.</span><span class="sxs-lookup"><span data-stu-id="32607-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric tooscale by.</span></span> <span data-ttu-id="32607-143">de meest voorkomende statistieken Hallo *gemiddelde*.</span><span class="sxs-lookup"><span data-stu-id="32607-143">hello most common statistic is *Average*.</span></span>

### <a name="choose-hello-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="32607-144">Hallo drempelwaarden zorgvuldig voor alle metrische typen kiezen</span><span class="sxs-lookup"><span data-stu-id="32607-144">Choose hello thresholds carefully for all metric types</span></span>
<span data-ttu-id="32607-145">Het is raadzaam om verschillende drempelwaarden voor scale-out en schaal in op basis van praktische situaties zorgvuldig te kiezen.</span><span class="sxs-lookup"><span data-stu-id="32607-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="32607-146">We *wordt niet aanbevolen* de instellingen voor automatisch schalen zoals Hallo voorbeelden hieronder met dezelfde of een vergelijkbaar drempelwaarden voor out en in situaties Hallo:</span><span class="sxs-lookup"><span data-stu-id="32607-146">We *do not recommend* autoscale settings like hello examples below with hello same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="32607-147">Exemplaren verhoogd met 1 tellen wanneer aantal threads < = 600</span><span class="sxs-lookup"><span data-stu-id="32607-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="32607-148">Exemplaren verlagen door 1 tellen wanneer aantal threads > = 600</span><span class="sxs-lookup"><span data-stu-id="32607-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="32607-149">Bekijk een voorbeeld van wat kan leiden tooa gedrag ontstaan.</span><span class="sxs-lookup"><span data-stu-id="32607-149">Let's look at an example of what can lead tooa behavior that may seem confusing.</span></span> <span data-ttu-id="32607-150">Houd rekening met Hallo sequence te volgen.</span><span class="sxs-lookup"><span data-stu-id="32607-150">Consider hello following sequence.</span></span>

1. <span data-ttu-id="32607-151">Wordt ervan uitgegaan dat er 2 exemplaren toobegin met en vervolgens Hallo kunt u het gemiddelde aantal threads per exemplaar too625 groeit.</span><span class="sxs-lookup"><span data-stu-id="32607-151">Assume there are 2 instances toobegin with and then hello average number of threads per instance grows too625.</span></span>
2. <span data-ttu-id="32607-152">Automatisch schalen uitgeschaald een 3e exemplaar toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="32607-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="32607-153">Vervolgens wordt ervan uitgegaan dat Hallo gemiddelde threads tussen exemplaar too575 valt.</span><span class="sxs-lookup"><span data-stu-id="32607-153">Next, assume that hello average thread count across instance falls too575.</span></span>
4. <span data-ttu-id="32607-154">Voordat het verkleinen, probeert automatisch schalen tooestimate welke eindstatus Hallo worden als deze aangepast.</span><span class="sxs-lookup"><span data-stu-id="32607-154">Before scaling down, autoscale tries tooestimate what hello final state will be if it scaled in.</span></span> <span data-ttu-id="32607-155">Voorbeeld: 575 x 3 (huidige aantal exemplaren) = 1,725 / 2 (definitieve aantal exemplaren als verkleind) = 862.5 threads.</span><span class="sxs-lookup"><span data-stu-id="32607-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="32607-156">Dit betekent dat automatisch schalen zou tooimmediately scale-out opnieuw zelfs nadat deze wordt geschaald als Hallo gemiddelde thread aantal blijft Hallo dezelfde of zelfs slechts een kleine hoeveelheid valt.</span><span class="sxs-lookup"><span data-stu-id="32607-156">This means autoscale would have tooimmediately scale-out again even after it scaled in, if hello average thread count remains hello same or even falls only a small amount.</span></span> <span data-ttu-id="32607-157">Als deze opgeschaald opnieuw het hele proces hello wilt herhalen, leidt echter tooan oneindige lus.</span><span class="sxs-lookup"><span data-stu-id="32607-157">However, if it scaled up again, hello whole process would repeat, leading tooan infinite loop.</span></span>
5. <span data-ttu-id="32607-158">tooavoid deze situatie ('flapping' genoemd), automatisch schalen niet kan worden uitgebreid naar beneden op alle.</span><span class="sxs-lookup"><span data-stu-id="32607-158">tooavoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="32607-159">In plaats daarvan wordt overgeslagen en reevaluates Hallo voorwaarde opnieuw Hallo volgende time Hallo-service de taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32607-159">Instead, it skips and reevaluates hello condition again hello next time hello service's job executes.</span></span> <span data-ttu-id="32607-160">Dit kan veel mensen verwarrend omdat automatisch schalen wouldn't toowork wordt weergegeven wanneer het gemiddelde aantal threads Hallo 575 is.</span><span class="sxs-lookup"><span data-stu-id="32607-160">This could confuse many people because autoscale wouldn't appear toowork when hello average thread count was 575.</span></span>

<span data-ttu-id="32607-161">Schatting tijdens een scale-in is beoogde tooavoid 'op en neer' situaties waarbij schaal in en scale-out acties voortdurend heen en weer gaat.</span><span class="sxs-lookup"><span data-stu-id="32607-161">Estimation during a scale-in is intended tooavoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="32607-162">Houd rekening met dit gedrag wanneer u dezelfde drempels voor scale-out en in Hallo kiest.</span><span class="sxs-lookup"><span data-stu-id="32607-162">Keep this behavior in mind when you choose hello same thresholds for scale-out and in.</span></span>

<span data-ttu-id="32607-163">U wordt aangeraden een voldoende marge tussen Hallo scale-out en in de drempelwaarden te kiezen.</span><span class="sxs-lookup"><span data-stu-id="32607-163">We recommend choosing an adequate margin between hello scale-out and in thresholds.</span></span> <span data-ttu-id="32607-164">Een voorbeeld kunt u beter Hallo betere combinatie van de regel te volgen.</span><span class="sxs-lookup"><span data-stu-id="32607-164">As an example, consider hello following better rule combination.</span></span>

* <span data-ttu-id="32607-165">Exemplaren verhoogd met 1 tellen wanneer CPU-percentage > = 80</span><span class="sxs-lookup"><span data-stu-id="32607-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="32607-166">Exemplaren verlagen door 1 tellen wanneer CPU-percentage < = 60</span><span class="sxs-lookup"><span data-stu-id="32607-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="32607-167">In dit geval</span><span class="sxs-lookup"><span data-stu-id="32607-167">In this case</span></span>  

1. <span data-ttu-id="32607-168">Wordt ervan uitgegaan dat er 2 exemplaren toostart met zijn.</span><span class="sxs-lookup"><span data-stu-id="32607-168">Assume there are 2 instances toostart with.</span></span>
2. <span data-ttu-id="32607-169">Als de gemiddelde CPU-percentage Hallo over exemplaren gaat too80, schaalt automatisch schalen uit het toevoegen van een derde exemplaar.</span><span class="sxs-lookup"><span data-stu-id="32607-169">If hello average CPU% across instances goes too80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="32607-170">Nu wordt ervan uitgegaan dat de % via tijd Hallo CPU too60 valt.</span><span class="sxs-lookup"><span data-stu-id="32607-170">Now assume that over time hello CPU% falls too60.</span></span>
4. <span data-ttu-id="32607-171">Automatisch schalen van schaal in regel maakt een schatting van de eindstatus Hallo alsof het tooscale in.</span><span class="sxs-lookup"><span data-stu-id="32607-171">Autoscale's scale-in rule estimates hello final state if it were tooscale-in.</span></span> <span data-ttu-id="32607-172">Voorbeeld: 60 x 3 (huidige aantal exemplaren) = 180 / 2 (definitieve aantal exemplaren als verkleind) = 90.</span><span class="sxs-lookup"><span data-stu-id="32607-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="32607-173">Dus voor automatisch schalen biedt niet schaal aan omdat deze zou tooscale-out onmiddellijk opnieuw.</span><span class="sxs-lookup"><span data-stu-id="32607-173">So autoscale does not scale-in because it would have tooscale-out again immediately.</span></span> <span data-ttu-id="32607-174">In plaats daarvan overgeslagen bij het verkleinen.</span><span class="sxs-lookup"><span data-stu-id="32607-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="32607-175">Hallo volgende tijd automatisch schalen Hallo CPU blijft toofall too50 wordt gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="32607-175">hello next time autoscale checks, hello CPU continues toofall too50.</span></span> <span data-ttu-id="32607-176">Schat opnieuw - exemplaar 50 x 3 = 150 / 2 exemplaren = 75, dat zich onder de drempelwaarde voor het scale-out van 80, Hallo zodat het schalen in is too2 exemplaren.</span><span class="sxs-lookup"><span data-stu-id="32607-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below hello scale-out threshold of 80, so it scales in successfully too2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="32607-177">Overwegingen voor het schalen van drempelwaarden voor speciale metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="32607-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="32607-178">Hallo-drempelwaarde is voor speciale metrieken zoals opslag- of Service Bus-wachtrij lengte metriek Hallo kunt u het gemiddelde aantal berichten per huidige aantal exemplaren van beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="32607-178">For special metrics such as Storage or Service Bus Queue length metric, hello threshold is hello average number of messages available per current number of instances.</span></span> <span data-ttu-id="32607-179">Kies zorgvuldig Hallo Hallo drempelwaarde voor deze metrische gegevens kiezen.</span><span class="sxs-lookup"><span data-stu-id="32607-179">Carefully choose hello choose hello threshold value for this metric.</span></span>

<span data-ttu-id="32607-180">Wordt toegelicht aan deze met een voorbeeld tooensure u Hallo gedrag beter begrijpt.</span><span class="sxs-lookup"><span data-stu-id="32607-180">Let's illustrate it with an example tooensure you understand hello behavior better.</span></span>

* <span data-ttu-id="32607-181">Exemplaren verhogen door 1 aantal wanneer Opslagwachtrij bericht count > = 50</span><span class="sxs-lookup"><span data-stu-id="32607-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="32607-182">Exemplaren met 1 aantal verlagen als Opslagwachtrij mailbericht aantal < = 10</span><span class="sxs-lookup"><span data-stu-id="32607-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="32607-183">Houd rekening met Hallo volgende volgorde:</span><span class="sxs-lookup"><span data-stu-id="32607-183">Consider hello following sequence:</span></span>

1. <span data-ttu-id="32607-184">Er zijn exemplaren van de wachtrij 2 opslag.</span><span class="sxs-lookup"><span data-stu-id="32607-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="32607-185">Berichten houden afkomstig is en wanneer u hello opslagwachtrij bekijkt, het totale aantal Hallo 50 leest.</span><span class="sxs-lookup"><span data-stu-id="32607-185">Messages keep coming and when you review hello storage queue, hello total count reads 50.</span></span> <span data-ttu-id="32607-186">U kunt wordt ervan uitgegaan dat automatisch schalen een scale-out-actie moet worden gestart.</span><span class="sxs-lookup"><span data-stu-id="32607-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="32607-187">Echter, houd er rekening mee dat het nog steeds 50/2 = 25-berichten per exemplaar.</span><span class="sxs-lookup"><span data-stu-id="32607-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="32607-188">Scale-out wordt dus niet uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32607-188">So, scale-out does not occur.</span></span> <span data-ttu-id="32607-189">Voor de eerste een scale-out toohappen Hallo moet Hallo totale aantal berichten in wachtrij voor Hallo opslag 100.</span><span class="sxs-lookup"><span data-stu-id="32607-189">For hello first scale-out toohappen, hello total message count in hello storage queue should be 100.</span></span>
3. <span data-ttu-id="32607-190">Vervolgens wordt ervan uitgegaan dat Hallo totale aantal berichten gelijk is aan 100.</span><span class="sxs-lookup"><span data-stu-id="32607-190">Next, assume that hello total message count reaches 100.</span></span>
4. <span data-ttu-id="32607-191">Een 3e exemplaar van de storage-wachtrij is toegevoegd vanwege tooa scale-out actie.</span><span class="sxs-lookup"><span data-stu-id="32607-191">A 3rd storage queue instance is added due tooa scale-out action.</span></span>  <span data-ttu-id="32607-192">Hallo volgende scale-out actie gebeurt niet totdat Hallo totaal aantal berichten in wachtrij Hallo 150 bereikt omdat 150/3 = 50.</span><span class="sxs-lookup"><span data-stu-id="32607-192">hello next scale-out action will not happen until hello total message count in hello queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="32607-193">Nu wordt het aantal berichten in wachtrij Hallo Hallo verkleind.</span><span class="sxs-lookup"><span data-stu-id="32607-193">Now hello number of messages in hello queue gets smaller.</span></span> <span data-ttu-id="32607-194">Met 3 exemplaren eerste Hallo schaal in actie gebeurt er wanneer hello totaal aantal berichten in alle wachtrijen too30 optellen omdat 30/3 = 10 berichten per instantie Hallo schaal in de drempelwaarde.</span><span class="sxs-lookup"><span data-stu-id="32607-194">With 3 instances, hello first scale-in action happens when hello total messages in all queues add up too30 because 30/3 = 10 messages per instance, which is hello scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="32607-195">Overwegingen voor het schalen van wanneer er meerdere profielen worden geconfigureerd in een instelling voor automatisch schalen</span><span class="sxs-lookup"><span data-stu-id="32607-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="32607-196">U kunt een standaard-profiel altijd zonder een afhankelijkheid op schema of tijd toegepast wordt, in een instelling voor automatisch schalen, of kunt u een terugkerende profiel of een profiel voor een bepaalde periode met een bereik van de datum en tijd.</span><span class="sxs-lookup"><span data-stu-id="32607-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="32607-197">Als de service automatisch schalen verwerkt, controleert deze altijd in Hallo volgorde:</span><span class="sxs-lookup"><span data-stu-id="32607-197">When autoscale service processes them, it always checks in hello following order:</span></span>

1. <span data-ttu-id="32607-198">Vaste datum profiel</span><span class="sxs-lookup"><span data-stu-id="32607-198">Fixed Date profile</span></span>
2. <span data-ttu-id="32607-199">Terugkerende profiel</span><span class="sxs-lookup"><span data-stu-id="32607-199">Recurring profile</span></span>
3. <span data-ttu-id="32607-200">Standaard-profiel ("Always")</span><span class="sxs-lookup"><span data-stu-id="32607-200">Default ("Always") profile</span></span>

<span data-ttu-id="32607-201">Als een profiel voorwaarde wordt voldaan, wordt automatisch schalen Hallo volgende profiel voorwaarde eronder niet gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="32607-201">If a profile condition is met, autoscale does not check hello next profile condition below it.</span></span> <span data-ttu-id="32607-202">Automatisch schalen verwerkt alleen één profiel tegelijk.</span><span class="sxs-lookup"><span data-stu-id="32607-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="32607-203">Dit betekent dat als u wilt dat tooalso omvatten een verwerkingsvoorwaarde van een lagere lagen-profiel, moet u deze regels ook opnemen in het huidige profiel Hallo.</span><span class="sxs-lookup"><span data-stu-id="32607-203">This means if you want tooalso include a processing condition from a lower-tier profile, you must include those rules as well in hello current profile.</span></span>

<span data-ttu-id="32607-204">Laten we Controleer dit met een voorbeeld:</span><span class="sxs-lookup"><span data-stu-id="32607-204">Let's review this using an example:</span></span>

<span data-ttu-id="32607-205">Hallo in onderstaande afbeelding ziet u een instelling voor automatisch schalen met een standaardprofiel met minimale exemplaren = 2- en maximumaantal exemplaren = 10.</span><span class="sxs-lookup"><span data-stu-id="32607-205">hello image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="32607-206">In dit voorbeeld zijn regels geconfigureerd tooscale-out als aantal voor Hallo-berichten in wachtrij Hallo groter dan 10 en de schaal is als aantal voor Hallo-berichten in wachtrij Hallo minder dan 3 is.</span><span class="sxs-lookup"><span data-stu-id="32607-206">In this example, rules are configured tooscale-out when hello message count in hello queue is greater than 10 and scale-in when hello message count in hello queue is less than 3.</span></span> <span data-ttu-id="32607-207">Hallo resource kan nu worden geschaald tussen 2 en 10 exemplaren.</span><span class="sxs-lookup"><span data-stu-id="32607-207">So now hello resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="32607-208">Er is bovendien een terugkerende profiel instellen voor maandag.</span><span class="sxs-lookup"><span data-stu-id="32607-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="32607-209">Deze waarde is ingesteld voor minimale exemplaren = 2- en maximumaantal exemplaren = 12.</span><span class="sxs-lookup"><span data-stu-id="32607-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="32607-210">Dit betekent dat op maandag, Hallo eerste tijd automatisch schalen voor deze voorwaarde controleert als Hallo exemplaren 2 is, het nieuwe minimum van 3 toohello schalen.</span><span class="sxs-lookup"><span data-stu-id="32607-210">This means on Monday, hello first time autoscale checks for this condition, if hello instance count is 2, it scales toohello new minimum of 3.</span></span> <span data-ttu-id="32607-211">Zolang automatisch schalen blijft toofind deze voorwaarde profiel overeenkomende (maandag), wordt alleen verwerkt Hallo op basis van CPU scale-out/in regels die zijn geconfigureerd voor dit profiel.</span><span class="sxs-lookup"><span data-stu-id="32607-211">As long as autoscale continues toofind this profile condition matched (Monday), it only processes hello CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="32607-212">Deze controleert op dit moment niet op Hallo wachtrijlengte.</span><span class="sxs-lookup"><span data-stu-id="32607-212">At this time, it does not check for hello queue length.</span></span> <span data-ttu-id="32607-213">Echter als u ook Hallo wachtrij lengte voorwaarde toobe is ingeschakeld wilt, u moet deze regels opnemen uit Hallo standaardprofiel ook in uw profiel maandag.</span><span class="sxs-lookup"><span data-stu-id="32607-213">However, if you also want hello queue length condition toobe checked, you should include those rules from hello default profile as well in your Monday profile.</span></span>

<span data-ttu-id="32607-214">Op dezelfde manier als voor automatisch schalen back toohello standaardprofiel verandert, controleert eerst deze als Hallo minimum en maximum voorwaarden wordt voldaan.</span><span class="sxs-lookup"><span data-stu-id="32607-214">Similarly, when autoscale switches back toohello default profile, it first checks if hello minimum and maximum conditions are met.</span></span> <span data-ttu-id="32607-215">Als Hallo aantal exemplaren op Hallo moment 12, schalen het in too10, Hallo maximaal is toegestaan voor Hallo standaardprofiel.</span><span class="sxs-lookup"><span data-stu-id="32607-215">If hello number of instances at hello time is 12, it scales in too10, hello maximum allowed for hello default profile.</span></span>

![instellingen voor automatisch schalen](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="32607-217">Overwegingen voor het schalen van wanneer meerdere regels zijn geconfigureerd in een profiel</span><span class="sxs-lookup"><span data-stu-id="32607-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="32607-218">Er zijn ook gevallen waarbij u tooset meerdere regels in een profiel wellicht.</span><span class="sxs-lookup"><span data-stu-id="32607-218">There are cases where you may have tooset multiple rules in a profile.</span></span> <span data-ttu-id="32607-219">Hallo volgende reeks regels voor automatisch schalen die worden gebruikt door services gebruikt wanneer meerdere regels worden ingesteld.</span><span class="sxs-lookup"><span data-stu-id="32607-219">hello following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="32607-220">Op *uitschalen*, automatisch schalen die wordt uitgevoerd als alle regels is voldaan.</span><span class="sxs-lookup"><span data-stu-id="32607-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="32607-221">Op *schaal in*, automatisch schalen is vereist voor alle regels toobe voldaan.</span><span class="sxs-lookup"><span data-stu-id="32607-221">On *scale-in*, autoscale require all rules toobe met.</span></span>

<span data-ttu-id="32607-222">tooillustrate, wordt ervan uitgegaan dat u hebt Hallo 4 regels voor automatisch schalen:</span><span class="sxs-lookup"><span data-stu-id="32607-222">tooillustrate, assume that you have hello following 4 autoscale rules:</span></span>

* <span data-ttu-id="32607-223">Als CPU < 30% schaal in met 1</span><span class="sxs-lookup"><span data-stu-id="32607-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="32607-224">Als geheugen < 50% schaal in met 1</span><span class="sxs-lookup"><span data-stu-id="32607-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="32607-225">Als CPU > 75%, scale-out van 1</span><span class="sxs-lookup"><span data-stu-id="32607-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="32607-226">Als geheugen > 75%, scale-out van 1</span><span class="sxs-lookup"><span data-stu-id="32607-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="32607-227">Vervolgens vindt plaats Hallo volgen:</span><span class="sxs-lookup"><span data-stu-id="32607-227">Then hello follow occurs:</span></span>

* <span data-ttu-id="32607-228">Als geheugen is 50% CPU is 76% we scale-out.</span><span class="sxs-lookup"><span data-stu-id="32607-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="32607-229">Als is 50% van CPU en geheugen 76% we scale is-out.</span><span class="sxs-lookup"><span data-stu-id="32607-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="32607-230">Daarentegen op Hallo als is 25% van CPU en geheugen 51% automatisch schalen biedt **niet** schaal in.</span><span class="sxs-lookup"><span data-stu-id="32607-230">On hello other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="32607-231">In volgorde tooscale in moet CPU 29% en geheugen 49%.</span><span class="sxs-lookup"><span data-stu-id="32607-231">In order tooscale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="32607-232">Altijd een veilige standaardexemplaren selecteren</span><span class="sxs-lookup"><span data-stu-id="32607-232">Always select a safe default instance count</span></span>
<span data-ttu-id="32607-233">Hallo standaardexemplaren is belangrijk voor automatisch schalen uw aantal toothat wordt geschaald wanneer metrische gegevens niet beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="32607-233">hello default instance count is important autoscale scales your service toothat count when metrics are not available.</span></span> <span data-ttu-id="32607-234">Selecteer daarom een standaard-exemplaren die voor uw werkbelastingen veilig is.</span><span class="sxs-lookup"><span data-stu-id="32607-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="32607-235">Meldingen over automatisch schalen configureren</span><span class="sxs-lookup"><span data-stu-id="32607-235">Configure autoscale notifications</span></span>
<span data-ttu-id="32607-236">Automatisch schalen waarschuwt Hallo-beheerders en medewerkers van de resource Hallo per e-mail als een van de volgende voorwaarden Hallo optreedt:</span><span class="sxs-lookup"><span data-stu-id="32607-236">Autoscale notifies hello administrators and contributors of hello resource by email if any of hello following conditions occur:</span></span>

* <span data-ttu-id="32607-237">de service automatisch schalen mislukt tootake een actie.</span><span class="sxs-lookup"><span data-stu-id="32607-237">autoscale service fails tootake an action.</span></span>
* <span data-ttu-id="32607-238">Metrische gegevens zijn niet beschikbaar voor automatisch schalen service toomake een beslissing schaal.</span><span class="sxs-lookup"><span data-stu-id="32607-238">Metrics are not available for autoscale service toomake a scale decision.</span></span>
* <span data-ttu-id="32607-239">Metrische gegevens zijn beschikbaar (herstelserver) opnieuw toomake een beslissing schaal.</span><span class="sxs-lookup"><span data-stu-id="32607-239">Metrics are available (recovery) again toomake a scale decision.</span></span>
  <span data-ttu-id="32607-240">Bovendien toohello voorwaarden bovenstaande, kunt u e-mailadres of webhook meldingen tooget de hoogte gesteld van geslaagde scale acties.</span><span class="sxs-lookup"><span data-stu-id="32607-240">In addition toohello conditions above, you can configure email or webhook notifications tooget notified for successful scale actions.</span></span>
  
<span data-ttu-id="32607-241">U kunt ook een activiteitenlogboek waarschuwing toomonitor Hallo gezondheid van de engine voor het automatisch schalen hello gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32607-241">You can also use an Activity Log alert toomonitor hello health of hello autoscale engine.</span></span> <span data-ttu-id="32607-242">Hier volgen voorbeelden te[maken van een activiteit logboek waarschuwing toomonitor alle automatisch schalen engine bewerkingen voor uw abonnement](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) of te[maken van een activiteit logboek waarschuwing toomonitor alle is mislukt voor automatisch schalen schaal / operations uitbreiden op uw abonnement](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span><span class="sxs-lookup"><span data-stu-id="32607-242">Here are examples too[create an Activity Log Alert toomonitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or too[create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="32607-243">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="32607-243">Next Steps</span></span>
- [<span data-ttu-id="32607-244">Maak een activiteit logboek waarschuwing toomonitor alle automatisch schalen engine bewerkingen voor uw abonnement.</span><span class="sxs-lookup"><span data-stu-id="32607-244">Create an Activity Log Alert toomonitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="32607-245">Een activiteit logboek waarschuwing toomonitor alle is mislukt voor automatisch schalen schaal / uitschalen bewerkingen op uw abonnement maken</span><span class="sxs-lookup"><span data-stu-id="32607-245">Create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
