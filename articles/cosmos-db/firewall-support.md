---
title: aaaAzure Cosmos DB firewallondersteuning & IP-toegangsbeheer | Microsoft Docs
description: Meer informatie over hoe toouse IP-beleid voor toegangsbeheer voor firewall ondersteuning bieden voor Azure Cosmos DB database accounts.
keywords: Toegangsbeheer voor IP-, firewallondersteuning
services: cosmos-db
author: shahankur11
manager: jhubbard
editor: 
tags: azure-resource-manager
documentationcenter: 
ms.assetid: c1b9ede0-ed93-411a-ac9a-62c113a8e887
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/22/2017
ms.author: ankshah
ms.openlocfilehash: b5cdbdb28e9d7ee0fd0ea54aad277167b699929f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-firewall-support"></a><span data-ttu-id="5be50-104">Ondersteuning van Azure DB Cosmos-firewall</span><span class="sxs-lookup"><span data-stu-id="5be50-104">Azure Cosmos DB firewall support</span></span>
<span data-ttu-id="5be50-105">toosecure gegevens opgeslagen in een databaseaccount Azure Cosmos DB, Azure Cosmos DB heeft biedt ondersteuning voor een geheim op basis van [autorisatie model](https://msdn.microsoft.com/library/azure/dn783368.aspx) die gebruikmaakt van een sterke Hash-based message authentication code (HMAC).</span><span class="sxs-lookup"><span data-stu-id="5be50-105">toosecure data stored in an Azure Cosmos DB database account, Azure Cosmos DB has provided support for a secret based [authorization model](https://msdn.microsoft.com/library/azure/dn783368.aspx) that utilizes a strong Hash-based message authentication code (HMAC).</span></span> <span data-ttu-id="5be50-106">Nu bovendien autorisatie-model op basis van toohello geheim, Azure Cosmos DB beleid aangestuurd IP gebaseerd toegangsbeheer voor binnenkomende firewallondersteuning ondersteunt.</span><span class="sxs-lookup"><span data-stu-id="5be50-106">Now, in addition toohello secret based authorization model, Azure Cosmos DB supports policy driven IP-based access controls for inbound firewall support.</span></span> <span data-ttu-id="5be50-107">Dit model is heel vergelijkbaar toohello firewallregels van een systeem van traditionele databases en biedt een extra verificatieniveau beveiliging toohello databaseaccount Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5be50-107">This model is very similar toohello firewall rules of a traditional database system and provides an additional level of security toohello Azure Cosmos DB database account.</span></span> <span data-ttu-id="5be50-108">Met dit model, u kunt nu een alleen toegankelijk vanuit een goedgekeurde set machines van Azure DB die Cosmos database account toobe configureren en/of cloudservices.</span><span class="sxs-lookup"><span data-stu-id="5be50-108">With this model, you can now configure an Azure Cosmos DB database account toobe accessible only from an approved set of machines and/or cloud services.</span></span> <span data-ttu-id="5be50-109">Toegang tot tooAzure Cosmos DB bronnen van deze goedgekeurde sets machines en services vereisen nog steeds Hallo aanroeper toopresent een geldige verificatietoken.</span><span class="sxs-lookup"><span data-stu-id="5be50-109">Access tooAzure Cosmos DB resources from these approved sets of machines and services still require hello caller toopresent a valid authorization token.</span></span>

## <a name="ip-access-control-overview"></a><span data-ttu-id="5be50-110">IP-Toegangsbeheer-overzicht</span><span class="sxs-lookup"><span data-stu-id="5be50-110">IP access control overview</span></span>
<span data-ttu-id="5be50-111">Een Azure DB die Cosmos-databaseaccount is standaard toegankelijk is vanaf het openbare internet, zolang het Hallo-aanvraag vergezeld gaat van een geldige verificatietoken.</span><span class="sxs-lookup"><span data-stu-id="5be50-111">By default, an Azure Cosmos DB database account is accessible from public internet as long as hello request is accompanied by a valid authorization token.</span></span> <span data-ttu-id="5be50-112">tooconfigure IP op basis van beleid voor toegangsbeheer, Hallo gebruiker moet Hallo reeks IP-adressen of IP-adresbereiken in CIDR-formulier toobe opgenomen als Hallo toegestane lijst met client-IP-adressen voor een bepaalde database-account opgeven.</span><span class="sxs-lookup"><span data-stu-id="5be50-112">tooconfigure IP policy-based access control, hello user must provide hello set of IP addresses or IP address ranges in CIDR form toobe included as hello allowed list of client IPs for a given database account.</span></span> <span data-ttu-id="5be50-113">Nadat deze configuratie is toegepast, worden alle aanvragen die afkomstig zijn van computers buiten deze lijst met toegestane wordt geblokkeerd door Hallo-server.</span><span class="sxs-lookup"><span data-stu-id="5be50-113">Once this configuration is applied, all requests originating from machines outside this allowed list will be blocked by hello server.</span></span>  <span data-ttu-id="5be50-114">Hallo verbinding verwerking van de stroom voor Hallo toegangsbeheer op basis van IP is beschreven in het volgende diagram Hallo.</span><span class="sxs-lookup"><span data-stu-id="5be50-114">hello connection processing flow for hello IP-based access control is described in hello following diagram.</span></span>

![Diagram van Hallo verbindingsproces voor toegangsbeheer op basis van IP](./media/firewall-support/firewall-support-flow.png)

## <a name="connections-from-cloud-services"></a><span data-ttu-id="5be50-116">Verbindingen met cloudservices</span><span class="sxs-lookup"><span data-stu-id="5be50-116">Connections from cloud services</span></span>
<span data-ttu-id="5be50-117">Cloudservices zijn in Azure, een veelgebruikte manier voor het hosten van de middelste laag service logica met behulp van Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5be50-117">In Azure, cloud services are a very common way for hosting middle tier service logic using Azure Cosmos DB.</span></span> <span data-ttu-id="5be50-118">tooenable toegang tooan Azure Cosmos DB databaseaccount van een cloudservice, openbare IP-adres van de cloudservice Hallo Hallo moet toegevoegde toohello toegestane lijst met IP-adressen die zijn gekoppeld aan uw Azure DB die Cosmos-databaseaccount door [configureren IP-beleid voor toegangsbeheer Hallo](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="5be50-118">tooenable access tooan Azure Cosmos DB database account from a cloud service, hello public IP address of hello cloud service must be added toohello allowed list of IP addresses associated with your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span>  <span data-ttu-id="5be50-119">Dit zorgt ervoor dat alle rolexemplaren van cloud-services toegang tooyour databaseaccount Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5be50-119">This ensures that all role instances of cloud services have access tooyour Azure Cosmos DB database account.</span></span> <span data-ttu-id="5be50-120">U kunt IP-adressen ophalen voor uw cloudservices in hello Azure-portal, zoals wordt weergegeven in de volgende schermafbeelding Hallo.</span><span class="sxs-lookup"><span data-stu-id="5be50-120">You can retrieve IP addresses for your cloud services in hello Azure portal, as shown in hello following screenshot.</span></span>

![Schermopname van het openbare IP-adres Hallo voor een cloudservice die worden weergegeven in hello Azure-portal](./media/firewall-support/public-ip-addresses.png)

<span data-ttu-id="5be50-122">Wanneer u uw cloudservice uitbreiden door aanvullende rol exemplaren toe te voegen, die nieuwe exemplaren automatisch toegang toohello Azure DB die Cosmos-databaseaccount hebt omdat ze deel van Hallo uitmaken dezelfde cloudservice.</span><span class="sxs-lookup"><span data-stu-id="5be50-122">When you scale out your cloud service by adding additional role instance(s), those new instances will automatically have access toohello Azure Cosmos DB database account since they are part of hello same cloud service.</span></span>

## <a name="connections-from-virtual-machines"></a><span data-ttu-id="5be50-123">Verbindingen van virtuele machines</span><span class="sxs-lookup"><span data-stu-id="5be50-123">Connections from virtual machines</span></span>
<span data-ttu-id="5be50-124">[Virtuele machines](https://azure.microsoft.com/services/virtual-machines/) of [virtuele-machineschaalsets](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) kan ook worden gebruikt toohost middelste laag services met behulp van Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5be50-124">[Virtual machines](https://azure.microsoft.com/services/virtual-machines/) or [virtual machine scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) can also be used toohost middle tier services using Azure Cosmos DB.</span></span>  <span data-ttu-id="5be50-125">tooconfigure hello Azure Cosmos DB account tooallow toegang tot de database van virtuele machines, openbare IP-adressen van virtuele machine en/of de virtuele-machineschaalset moet worden geconfigureerd als een toegestane IP-adressen voor het account van uw Azure DB die Cosmos-database door Hallo [Hallo IP-beleid voor toegangsbeheer configureren](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="5be50-125">tooconfigure hello Azure Cosmos DB database account tooallow access from virtual machines, public IP addresses of virtual machine and/or virtual machine scale set must be configured as one of hello allowed IP addresses for your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span> <span data-ttu-id="5be50-126">Zoals wordt weergegeven in de volgende schermafbeelding Hallo, kunt u IP-adressen voor virtuele machines in Azure-portal Hallo ophalen.</span><span class="sxs-lookup"><span data-stu-id="5be50-126">You can retrieve IP addresses for virtual machines in hello Azure portal, as shown in hello following screenshot.</span></span>

![Schermopname van een openbaar IP-adres voor een virtuele machine weergegeven in hello Azure-portal](./media/firewall-support/public-ip-addresses-dns.png)

<span data-ttu-id="5be50-128">Wanneer u aanvullende virtuele machine-exemplaren toohello groep toevoegt, worden ze automatisch toegang tooyour Azure DB die Cosmos-databaseaccount opgegeven.</span><span class="sxs-lookup"><span data-stu-id="5be50-128">When you add additional virtual machine instances toohello group, they are automatically provided access tooyour Azure Cosmos DB database account.</span></span>

## <a name="connections-from-hello-internet"></a><span data-ttu-id="5be50-129">Verbindingen van internet Hallo</span><span class="sxs-lookup"><span data-stu-id="5be50-129">Connections from hello internet</span></span>
<span data-ttu-id="5be50-130">Wanneer u toegang tot een Cosmos Azure DB database account vanaf een computer op internet hello, moet hello client IP-adres of IP-adresbereik van de machine Hallo toegevoegde toohello lijst met IP-adres voor hello Azure DB die Cosmos-databaseaccount toegestaan.</span><span class="sxs-lookup"><span data-stu-id="5be50-130">When you access an Azure Cosmos DB database account from a computer on hello internet, hello client IP address or IP address range of hello machine must be added toohello allowed list of IP address for hello Azure Cosmos DB database account.</span></span> 

## <span data-ttu-id="5be50-131"><a id="configure-ip-policy"></a>Hallo IP-beleid voor toegangsbeheer configureren</span><span class="sxs-lookup"><span data-stu-id="5be50-131"><a id="configure-ip-policy"></a> Configuring hello IP access control policy</span></span>
<span data-ttu-id="5be50-132">Hallo IP-beleid voor toegangsbeheer kunt u instellen in hello Azure-portal of programmatisch via [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), of Hallo [REST-API](/rest/api/documentdb/) door Hallo bijwerken`ipRangeFilter` eigenschap.</span><span class="sxs-lookup"><span data-stu-id="5be50-132">hello IP access control policy can be set in hello Azure portal, or programmatically through [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), or hello [REST API](/rest/api/documentdb/) by updating hello `ipRangeFilter` property.</span></span> <span data-ttu-id="5be50-133">IP-adressen of-adresbereiken moet door komma's gescheiden en mag geen spaties bevatten.</span><span class="sxs-lookup"><span data-stu-id="5be50-133">IP addresses/ranges must be comma separated and must not contain any spaces.</span></span> <span data-ttu-id="5be50-134">Voorbeeld: '13.91.6.132,13.91.6.1/24'.</span><span class="sxs-lookup"><span data-stu-id="5be50-134">Example: "13.91.6.132,13.91.6.1/24".</span></span> <span data-ttu-id="5be50-135">Wanneer uw databaseaccount wordt bijgewerkt via deze methoden, worden toopopulate ervoor dat alle Hallo eigenschappen tooprevent toodefault instellingen herstellen.</span><span class="sxs-lookup"><span data-stu-id="5be50-135">When updating your database account through these methods, be sure toopopulate all of hello properties tooprevent resetting toodefault settings.</span></span>

> [!NOTE]
> <span data-ttu-id="5be50-136">Als u een IP-toegangsbeleid voor het account van uw Azure DB die Cosmos-database, toegestaan alle toegang tooyour Azure Cosmos DB databaseaccount vanaf computers buiten Hallo geconfigureerd lijst met IP-adresbereiken worden geblokkeerd.</span><span class="sxs-lookup"><span data-stu-id="5be50-136">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="5be50-137">Doordat dit model Hallo gegevensbewerking vlak van Hallo portal bladeren worden ook geblokkeerde tooensure Hallo integriteit van toegangsbeheer.</span><span class="sxs-lookup"><span data-stu-id="5be50-137">By virtue of this model, browsing hello data plane operation from hello portal will also be blocked tooensure hello integrity of access control.</span></span>

<span data-ttu-id="5be50-138">toosimplify ontwikkeling, hello Azure-portal helpt u te identificeren en Hallo IP-adres van uw client machine toohello lijst toegestaan toevoegen zodat apps die worden uitgevoerd van de computer toegang heeft tot hello Azure DB die Cosmos-account.</span><span class="sxs-lookup"><span data-stu-id="5be50-138">toosimplify development, hello Azure portal helps you identify and add hello IP of your client machine toohello allowed list, so that apps running your machine can access hello Azure Cosmos DB account.</span></span> <span data-ttu-id="5be50-139">Houd er rekening mee dat Hallo IP-clientadres Hier wordt gedetecteerd, zoals weergegeven door het Hallo-portal.</span><span class="sxs-lookup"><span data-stu-id="5be50-139">Note that hello client IP address here is detected as seen by hello portal.</span></span> <span data-ttu-id="5be50-140">Hallo client-IP-adres van uw computer is mogelijk, maar dit kan ook worden Hallo IP-adres van de gateway van uw netwerk.</span><span class="sxs-lookup"><span data-stu-id="5be50-140">It may be hello client IP address of your machine, but it could also be hello IP address of your network gateway.</span></span> <span data-ttu-id="5be50-141">Vergeet niet tooremove het eerder tooproduction gaat.</span><span class="sxs-lookup"><span data-stu-id="5be50-141">Do not forget tooremove it before going tooproduction.</span></span>

<span data-ttu-id="5be50-142">tooset hello IP-beleid voor toegangsbeheer in hello Azure-portal navigeert blade toohello Azure DB die Cosmos-account, klikt u op **Firewall** in het navigatiemenu hello, klik vervolgens op **ON**</span><span class="sxs-lookup"><span data-stu-id="5be50-142">tooset hello IP access control policy in hello Azure portal, navigate toohello Azure Cosmos DB account blade, click **Firewall** in hello navigation menu, then click **ON**</span></span> 

![Schermopname die laat zien hoe tooopen Hallo Firewall blade in hello Azure-portal](./media/firewall-support/azure-portal-firewall.png)

<span data-ttu-id="5be50-144">Opgeven of hello Azure-portal kunt toegang Hallo-account tot, en voeg desgewenst andere adressen en -bereiken toe en klik vervolgens in het nieuwe deelvenster hello, **opslaan**.</span><span class="sxs-lookup"><span data-stu-id="5be50-144">In hello new pane, specify whether hello Azure portal can access hello account, and add other addresses and ranges as appropriate, then click **Save**.</span></span>  

> [!NOTE]
> <span data-ttu-id="5be50-145">Wanneer u een IP-beleid voor toegangsbeheer inschakelt, moet u tooadd Hallo IP-adres voor hello Azure portal toomaintain toegang.</span><span class="sxs-lookup"><span data-stu-id="5be50-145">When you enable an IP access control policy, you need tooadd hello IP address for hello Azure portal toomaintain access.</span></span> <span data-ttu-id="5be50-146">Hallo portal IP-adressen zijn:</span><span class="sxs-lookup"><span data-stu-id="5be50-146">hello portal IP addresses are:</span></span>
> |<span data-ttu-id="5be50-147">Regio</span><span class="sxs-lookup"><span data-stu-id="5be50-147">Region</span></span>|<span data-ttu-id="5be50-148">IP-adres</span><span class="sxs-lookup"><span data-stu-id="5be50-148">IP address</span></span>|
> |------|----------|
> |<span data-ttu-id="5be50-149">Alle regio's die zijn opgegeven behalve hieronder</span><span class="sxs-lookup"><span data-stu-id="5be50-149">All regions except those specified below</span></span>| <span data-ttu-id="5be50-150">104.42.195.92</span><span class="sxs-lookup"><span data-stu-id="5be50-150">104.42.195.92</span></span>|
> |<span data-ttu-id="5be50-151">Duitsland</span><span class="sxs-lookup"><span data-stu-id="5be50-151">Germany</span></span>|<span data-ttu-id="5be50-152">51.4.229.218</span><span class="sxs-lookup"><span data-stu-id="5be50-152">51.4.229.218</span></span>|
> |<span data-ttu-id="5be50-153">China</span><span class="sxs-lookup"><span data-stu-id="5be50-153">China</span></span>|<span data-ttu-id="5be50-154">139.217.8.252</span><span class="sxs-lookup"><span data-stu-id="5be50-154">139.217.8.252</span></span>|
> |<span data-ttu-id="5be50-155">VS (overheid) - Arizona</span><span class="sxs-lookup"><span data-stu-id="5be50-155">US Gov Arizona</span></span>|<span data-ttu-id="5be50-156">52.244.48.71</span><span class="sxs-lookup"><span data-stu-id="5be50-156">52.244.48.71</span></span>|
>

![Schermopname die laat zien hoe u een tooconfigure firewall-instellingen in hello Azure-portal](./media/firewall-support/azure-portal-firewall-configure.png)

## <a name="troubleshooting-hello-ip-access-control-policy"></a><span data-ttu-id="5be50-158">Het oplossen van problemen Hallo IP-beleid voor toegangsbeheer</span><span class="sxs-lookup"><span data-stu-id="5be50-158">Troubleshooting hello IP access control policy</span></span>
### <a name="portal-operations"></a><span data-ttu-id="5be50-159">Portal-bewerkingen</span><span class="sxs-lookup"><span data-stu-id="5be50-159">Portal operations</span></span>
<span data-ttu-id="5be50-160">Als u een IP-toegangsbeleid voor het account van uw Azure DB die Cosmos-database, toegestaan alle toegang tooyour Azure Cosmos DB databaseaccount vanaf computers buiten Hallo geconfigureerd lijst met IP-adresbereiken worden geblokkeerd.</span><span class="sxs-lookup"><span data-stu-id="5be50-160">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="5be50-161">Als u tooenable portal gegevens vlak bewerkingen wilt zoals het bladeren door verzamelingen en query-documenten, moet u daarom tooexplicitly toestaan van Azure portal-toegang met behulp van Hallo **Firewall** blade in Hallo-portal.</span><span class="sxs-lookup"><span data-stu-id="5be50-161">Therefore if you want tooenable portal data plane operations like browsing collections and query documents, you need tooexplicitly allow Azure portal access using hello **Firewall** blade in hello portal.</span></span> 

![Schermopname die laat zien hoe u een tooenable toegang toohello Azure-portal](./media/firewall-support/azure-portal-access-firewall.png)

### <a name="sdk--rest-api"></a><span data-ttu-id="5be50-163">SDK & Rest-API</span><span class="sxs-lookup"><span data-stu-id="5be50-163">SDK & Rest API</span></span>
<span data-ttu-id="5be50-164">Voor toegang via SDK of REST-API van computers niet in de lijst met toegestane Hallo uit veiligheidsoverwegingen het resultaat van algemene 404 niet gevonden zonder extra details.</span><span class="sxs-lookup"><span data-stu-id="5be50-164">For security reasons, access via SDK or REST API from machines not on hello allowed list will return a generic 404 Not Found response with no additional details.</span></span> <span data-ttu-id="5be50-165">Controleer of dat Hallo IP toegestane lijst die zijn geconfigureerd voor Azure Cosmos DB database tooensure Hallo juiste beleid voor configuratie van uw account is toegepaste tooyour databaseaccount Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="5be50-165">Please verify hello IP allowed list configured for your Azure Cosmos DB database account tooensure hello correct policy configuration is applied tooyour Azure Cosmos DB database account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5be50-166">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="5be50-166">Next steps</span></span>
<span data-ttu-id="5be50-167">Zie voor informatie over het netwerk gerelateerde prestatietips [tips voor betere prestaties](performance-tips.md).</span><span class="sxs-lookup"><span data-stu-id="5be50-167">For information about network related performance tips, see [Performance tips](performance-tips.md).</span></span>

