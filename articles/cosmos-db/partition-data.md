---
title: aaaPartitioning en horizontaal schalen in Azure Cosmos DB | Microsoft Docs
description: Meer informatie over hoe partitionering werkt in Azure Cosmos DB hoe tooconfigure partitioneren en partitiesleutels en hoe toopick Hallo rechts partitie-sleutel voor uw toepassing.
services: cosmos-db
author: arramac
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: cac9a8cd-b5a3-4827-8505-d40bb61b2416
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: arramac
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 87d56db8c4ccc6b94b1650baff0fcfb3db6d1777
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="how-toopartition-and-scale-in-azure-cosmos-db"></a><span data-ttu-id="56ff1-103">Hoe toopartition en schalen in Azure Cosmos-DB</span><span class="sxs-lookup"><span data-stu-id="56ff1-103">How toopartition and scale in Azure Cosmos DB</span></span>

<span data-ttu-id="56ff1-104">[Microsoft Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is een globale gedistribueerde en modellen database service ontworpen toohelp u bereiken snelle en voorspelbare prestaties en schaalbaarheid naadloos samen met uw toepassing wanneer het groeit.</span><span class="sxs-lookup"><span data-stu-id="56ff1-104">[Microsoft Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) is a global distributed, multi-model database service designed toohelp you achieve fast, predictable performance and scale seamlessly along with your application as it grows.</span></span> <span data-ttu-id="56ff1-105">Dit artikel bevat een overzicht van hoe partitioneren werkt voor alle Hallo-gegevens in Azure Cosmos DB modellen, en wordt beschreven hoe u kunt configureren Azure Cosmos DB containers tooeffectively schalen uw toepassingen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-105">This article provides an overview of how partitioning works for all hello data models in Azure Cosmos DB, and describes how you can configure Azure Cosmos DB containers tooeffectively scale your applications.</span></span>

<span data-ttu-id="56ff1-106">Partitionering en partitiesleutels worden ook besproken in deze Azure video met Scott Hanselman en Azure Cosmos DB Principal Engineering Manager, Shireesh Thota vrijdag.</span><span class="sxs-lookup"><span data-stu-id="56ff1-106">Partitioning and partition keys are also covered in this Azure Friday video with Scott Hanselman and Azure Cosmos DB Principal Engineering Manager, Shireesh Thota.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Azure-Friday/Azure-DocumentDB-Elastic-Scale-Partitioning/player]
> 

## <a name="partitioning-in-azure-cosmos-db"></a><span data-ttu-id="56ff1-107">Partitioneren in Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="56ff1-107">Partitioning in Azure Cosmos DB</span></span>
<span data-ttu-id="56ff1-108">U kunt in Azure Cosmos DB, opslaan en opvragen van schema minder gegevens met de volgorde van milliseconde reactietijden op elke schaal.</span><span class="sxs-lookup"><span data-stu-id="56ff1-108">In Azure Cosmos DB, you can store and query schema-less data with order-of-millisecond response times at any scale.</span></span> <span data-ttu-id="56ff1-109">Cosmos DB containers biedt voor het opslaan van gegevens aangeroepen **verzamelingen (voor het document), grafieken of tabellen**.</span><span class="sxs-lookup"><span data-stu-id="56ff1-109">Cosmos DB provides containers for storing data called **collections (for document), graphs, or tables**.</span></span> <span data-ttu-id="56ff1-110">Containers zijn logische resources en kunnen een of meer fysieke partities of servers omvatten.</span><span class="sxs-lookup"><span data-stu-id="56ff1-110">Containers are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="56ff1-111">Hallo aantal partities wordt bepaald door de Cosmos-DB op basis van Hallo opslaggrootte en ingerichte doorvoer Hallo van Hallo-container.</span><span class="sxs-lookup"><span data-stu-id="56ff1-111">hello number of partitions is determined by Cosmos DB based on hello storage size and hello provisioned throughput of hello container.</span></span> <span data-ttu-id="56ff1-112">Elke partitie in Cosmos-database heeft een vaste hoeveelheid back SSD opslag gekoppeld en is gerepliceerd voor hoge beschikbaarheid.</span><span class="sxs-lookup"><span data-stu-id="56ff1-112">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="56ff1-113">Partitie management volledig wordt beheerd door Azure Cosmos DB, en u niet hebt toowrite complexe code of beheren van uw partities.</span><span class="sxs-lookup"><span data-stu-id="56ff1-113">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="56ff1-114">Cosmos DB containers zijn onbeperkte in termen van opslag en doorvoer.</span><span class="sxs-lookup"><span data-stu-id="56ff1-114">Cosmos DB containers are unlimited in terms of storage and throughput.</span></span> 

![horizontale](./media/introduction/azure-cosmos-db-partitioning.png) 

<span data-ttu-id="56ff1-116">Partitioneren is transparant tooyour toepassing.</span><span class="sxs-lookup"><span data-stu-id="56ff1-116">Partitioning is transparent tooyour application.</span></span> <span data-ttu-id="56ff1-117">Snelle leest en schrijft, query's, transactionele logica, consistentieniveaus en verfijnd toegangsbeheer via de methoden/API's tooa enkele containerresource biedt ondersteuning voor cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="56ff1-117">Cosmos DB supports fast reads and writes, queries, transactional logic, consistency levels, and fine-grained access control via methods/APIs tooa single container resource.</span></span> <span data-ttu-id="56ff1-118">Hallo-service verwerkt gegevens over partities verdeeld en routering query aanvragen toohello rechts partitie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-118">hello service handles distributing data across partitions and routing query requests toohello right partition.</span></span> 

<span data-ttu-id="56ff1-119">Hoe partitioneren werkt?</span><span class="sxs-lookup"><span data-stu-id="56ff1-119">How does partitioning work?</span></span> <span data-ttu-id="56ff1-120">Elk item moet hebben een partitiesleutel en een rijsleutel die worden geïdentificeerd.</span><span class="sxs-lookup"><span data-stu-id="56ff1-120">Each item must have a partition key and a row key, which uniquely identify it.</span></span> <span data-ttu-id="56ff1-121">De partitiesleutel fungeert als een logische partitie voor uw gegevens en de grens van een natuurlijke Cosmos DB biedt voor het distribueren van gegevens meerdere partities.</span><span class="sxs-lookup"><span data-stu-id="56ff1-121">Your partition key acts as a logical partition for your data, and provides Cosmos DB with a natural boundary for distributing data across partitions.</span></span> <span data-ttu-id="56ff1-122">Kort samengevat: dit is hoe partitioneren werkt in Azure Cosmos DB:</span><span class="sxs-lookup"><span data-stu-id="56ff1-122">In brief, here is how partitioning works in Azure Cosmos DB:</span></span>

* <span data-ttu-id="56ff1-123">Inrichten van een Cosmos-DB-container met `T` doorvoer van aanvragen/s</span><span class="sxs-lookup"><span data-stu-id="56ff1-123">You provision a Cosmos DB container with `T` requests/s throughput</span></span>
* <span data-ttu-id="56ff1-124">Achter de schermen hello, Cosmos DB bepalingen partities nodig tooserve `T` aanvragen/s.</span><span class="sxs-lookup"><span data-stu-id="56ff1-124">Behind hello scenes, Cosmos DB provisions partitions needed tooserve `T` requests/s.</span></span> <span data-ttu-id="56ff1-125">Als `T` hoger is dan de maximale doorvoer per partitie Hallo `t`, klikt u vervolgens de bepalingen van de Cosmos-DB `N`  =  `T/t` partities</span><span class="sxs-lookup"><span data-stu-id="56ff1-125">If `T` is higher than hello maximum throughput per partition `t`, then Cosmos DB provisions `N` = `T/t` partitions</span></span>
* <span data-ttu-id="56ff1-126">Cosmos DB ruimte wordt toegewezen Hallo sleutel van de partitie sleutel hashes gelijkmatig over Hallo `N` partities.</span><span class="sxs-lookup"><span data-stu-id="56ff1-126">Cosmos DB allocates hello key space of partition key hashes evenly across hello `N` partitions.</span></span> <span data-ttu-id="56ff1-127">Dus elke partitie (fysieke partitie) als host fungeert voor de partitie 1 N sleutelwaarden (logische partities)</span><span class="sxs-lookup"><span data-stu-id="56ff1-127">So, each partition (physical partition) hosts 1-N partition key values (logical partitions)</span></span>
* <span data-ttu-id="56ff1-128">Wanneer een fysieke partitie `p` bereikt de opslaglimiet bereikt, Cosmos DB naadloos splitst `p` in twee nieuwe partities `p1` en `p2` en waarden die overeenkomen tooroughly half Hallo sleutels tooeach Hallo distribueert partities.</span><span class="sxs-lookup"><span data-stu-id="56ff1-128">When a physical partition `p` reaches its storage limit, Cosmos DB seamlessly splits `p` into two new partitions `p1` and `p2` and distributes values corresponding tooroughly half hello keys tooeach of hello partitions.</span></span> <span data-ttu-id="56ff1-129">Deze bewerking gesplitste is onzichtbaar tooyour toepassing.</span><span class="sxs-lookup"><span data-stu-id="56ff1-129">This split operation is invisible tooyour application.</span></span>
* <span data-ttu-id="56ff1-130">Op dezelfde manier als het inrichten van doorvoer die hoger is dan `t*N` doorvoer, Cosmos DB splitst een of meer van de partities toosupport Hallo hogere doorvoer</span><span class="sxs-lookup"><span data-stu-id="56ff1-130">Similarly, when you provision throughput higher than `t*N` throughput, Cosmos DB splits one or more of your partitions toosupport hello higher throughput</span></span>

<span data-ttu-id="56ff1-131">Hallo semantiek voor partitiesleutels zijn enigszins verschillen toomatch Hallo semantiek van elke API, zoals wordt weergegeven in de volgende tabel Hallo:</span><span class="sxs-lookup"><span data-stu-id="56ff1-131">hello semantics for partition keys are slightly different toomatch hello semantics of each API, as shown in hello following table:</span></span>

| <span data-ttu-id="56ff1-132">API</span><span class="sxs-lookup"><span data-stu-id="56ff1-132">API</span></span> | <span data-ttu-id="56ff1-133">Partitiesleutel</span><span class="sxs-lookup"><span data-stu-id="56ff1-133">Partition Key</span></span> | <span data-ttu-id="56ff1-134">Rijsleutel</span><span class="sxs-lookup"><span data-stu-id="56ff1-134">Row Key</span></span> |
| --- | --- | --- |
| <span data-ttu-id="56ff1-135">DocumentDB</span><span class="sxs-lookup"><span data-stu-id="56ff1-135">DocumentDB</span></span> | <span data-ttu-id="56ff1-136">Aangepaste partitie sleutelpad</span><span class="sxs-lookup"><span data-stu-id="56ff1-136">custom partition key path</span></span> | <span data-ttu-id="56ff1-137">vaste`id`</span><span class="sxs-lookup"><span data-stu-id="56ff1-137">fixed `id`</span></span> | 
| <span data-ttu-id="56ff1-138">MongoDB</span><span class="sxs-lookup"><span data-stu-id="56ff1-138">MongoDB</span></span> | <span data-ttu-id="56ff1-139">aangepaste shard-sleutel</span><span class="sxs-lookup"><span data-stu-id="56ff1-139">custom shard key</span></span>  | <span data-ttu-id="56ff1-140">vaste`_id`</span><span class="sxs-lookup"><span data-stu-id="56ff1-140">fixed `_id`</span></span> | 
| <span data-ttu-id="56ff1-141">Graph</span><span class="sxs-lookup"><span data-stu-id="56ff1-141">Graph</span></span> | <span data-ttu-id="56ff1-142">Aangepaste partitie sleuteleigenschap</span><span class="sxs-lookup"><span data-stu-id="56ff1-142">custom partition key property</span></span> | <span data-ttu-id="56ff1-143">vaste`id`</span><span class="sxs-lookup"><span data-stu-id="56ff1-143">fixed `id`</span></span> | 
| <span data-ttu-id="56ff1-144">Tabel</span><span class="sxs-lookup"><span data-stu-id="56ff1-144">Table</span></span> | <span data-ttu-id="56ff1-145">vaste`PartitionKey`</span><span class="sxs-lookup"><span data-stu-id="56ff1-145">fixed `PartitionKey`</span></span> | <span data-ttu-id="56ff1-146">vaste`RowKey`</span><span class="sxs-lookup"><span data-stu-id="56ff1-146">fixed `RowKey`</span></span> | 

<span data-ttu-id="56ff1-147">Cosmos DB gebruikt op basis van de hash partitionering.</span><span class="sxs-lookup"><span data-stu-id="56ff1-147">Cosmos DB uses hash-based partitioning.</span></span> <span data-ttu-id="56ff1-148">Bij het schrijven van een item Cosmos DB hash-waarde voor de partitiesleutel Hallo en gebruik Hallo opgedeeld resultaat toodetermine welke partitie toostore Hallo-item in.</span><span class="sxs-lookup"><span data-stu-id="56ff1-148">When you write an item, Cosmos DB hashes hello partition key value and use hello hashed result toodetermine which partition toostore hello item in.</span></span> <span data-ttu-id="56ff1-149">Cosmos DB slaat alle items met dezelfde partitiesleutel in Hallo Hallo dezelfde fysieke partitie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-149">Cosmos DB stores all items with hello same partition key in hello same physical partition.</span></span> <span data-ttu-id="56ff1-150">Hallo gekozen Hallo partitiesleutel is erg belangrijk dat u hebt de toomake tijdens de ontwerpfase.</span><span class="sxs-lookup"><span data-stu-id="56ff1-150">hello choice of hello partition key is an important decision that you have toomake at design time.</span></span> <span data-ttu-id="56ff1-151">U moet een eigenschapsnaam die heeft een breed scala aan waarden en zelfs toegangspatronen kiezen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-151">You must pick a property name that has a wide range of values and has even access patterns.</span></span>

> [!NOTE]
> <span data-ttu-id="56ff1-152">Het is een best practice toohave een partitiesleutel met veel afzonderlijke waarden (100s-1000 minimaal).</span><span class="sxs-lookup"><span data-stu-id="56ff1-152">It is a best practice toohave a partition key with many distinct values (100s-1000s at a minimum).</span></span>
>

<span data-ttu-id="56ff1-153">Azure DB Cosmos-containers kunnen worden gemaakt als 'fixed' of "onbeperkte."</span><span class="sxs-lookup"><span data-stu-id="56ff1-153">Azure Cosmos DB containers can be created as "fixed" or "unlimited."</span></span> <span data-ttu-id="56ff1-154">Containers met vaste grootte hebben een maximale limiet van 10 GB en doorvoer van 10.000 RU/s.</span><span class="sxs-lookup"><span data-stu-id="56ff1-154">Fixed-size containers have a maximum limit of 10 GB and 10,000 RU/s throughput.</span></span> <span data-ttu-id="56ff1-155">Sommige API's maken Hallo partitie sleutel toobe voor vaste grootte containers worden weggelaten.</span><span class="sxs-lookup"><span data-stu-id="56ff1-155">Some APIs allow hello partition key toobe omitted for fixed-size containers.</span></span> <span data-ttu-id="56ff1-156">een container als onbeperkte toocreate, moet u een minimale doorvoer van 2500 RU/s.</span><span class="sxs-lookup"><span data-stu-id="56ff1-156">toocreate a container as unlimited, you must specify a minimum throughput of 2500 RU/s.</span></span>

## <a name="partitioning-and-provisioned-throughput"></a><span data-ttu-id="56ff1-157">Partitionering en ingerichte doorvoer</span><span class="sxs-lookup"><span data-stu-id="56ff1-157">Partitioning and provisioned throughput</span></span>
<span data-ttu-id="56ff1-158">Cosmos DB is ontworpen voor voorspelbare prestaties.</span><span class="sxs-lookup"><span data-stu-id="56ff1-158">Cosmos DB is designed for predictable performance.</span></span> <span data-ttu-id="56ff1-159">Wanneer u een container maakt, u doorvoer in termen van reserveren  **[aanvraageenheden](request-units.md) (RU) per seconde met een potentiële invoegtoepassing voor RU per minuut**.</span><span class="sxs-lookup"><span data-stu-id="56ff1-159">When you create a container, you reserve throughput in terms of **[request units](request-units.md) (RU) per second with a potential add-on for RU per minute**.</span></span> <span data-ttu-id="56ff1-160">Elke aanvraag is een aanvraag eenheid kosten die evenredig toohello hoeveelheid systeembronnen, zoals CPU, geheugen en i/o verbruikt door Hallo-bewerking is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-160">Each request is assigned a request unit charge that is proportionate toohello amount of system resources like CPU, Memory, and IO consumed by hello operation.</span></span> <span data-ttu-id="56ff1-161">Het lezen van een document 1 KB met sessieconsistentie verbruikt één eenheid van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="56ff1-161">A read of a 1-KB document with Session consistency consumes one request unit.</span></span> <span data-ttu-id="56ff1-162">Een leesbewerking is 1 RU ongeacht het aantal items Hallo opgeslagen of het aantal gelijktijdige aanvragen die actief zijn op Hallo Hallo hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="56ff1-162">A read is 1 RU regardless of hello number of items stored or hello number of concurrent requests running at hello same time.</span></span> <span data-ttu-id="56ff1-163">Grotere items moet hoger aanvraageenheden, afhankelijk van Hallo grootte.</span><span class="sxs-lookup"><span data-stu-id="56ff1-163">Larger items require higher request units depending on hello size.</span></span> <span data-ttu-id="56ff1-164">Als u weet Hallo grootte van de entiteiten en aantal leesbewerkingen Hallo moet u toosupport voor uw toepassing, kunt u de exacte hoeveelheid doorvoer die nodig is voor uw toepassing moet vindt Hallo inrichten.</span><span class="sxs-lookup"><span data-stu-id="56ff1-164">If you know hello size of your entities and hello number of reads you need toosupport for your application, you can provision hello exact amount of throughput required for your application's read needs.</span></span> 

> [!NOTE]
> <span data-ttu-id="56ff1-165">tooachieve hello volledige doorvoer van Hallo-container, moet u een partitiesleutel waarmee u tooevenly distribueren aanvragen tussen sommige sleutelwaarden afzonderlijke partitie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-165">tooachieve hello full throughput of hello container, you must choose a partition key that allows you tooevenly distribute requests among some distinct partition key values.</span></span>
> 
> 

<a name="designing-for-partitioning"></a>
## <a name="working-with-hello-azure-cosmos-db-apis"></a><span data-ttu-id="56ff1-166">Werken met hello Azure Cosmos DB API 's</span><span class="sxs-lookup"><span data-stu-id="56ff1-166">Working with hello Azure Cosmos DB APIs</span></span>
<span data-ttu-id="56ff1-167">U kunt gebruiken hello Azure-portal of Azure CLI toocreate containers en op elk gewenst moment worden geschaald.</span><span class="sxs-lookup"><span data-stu-id="56ff1-167">You can use hello Azure portal or Azure CLI toocreate containers and scale them at any time.</span></span> <span data-ttu-id="56ff1-168">Deze sectie wordt beschreven hoe toocreate containers en geef Hallo doorvoer en partitie sleuteldefinitie in elk Hallo API's ondersteund.</span><span class="sxs-lookup"><span data-stu-id="56ff1-168">This section shows how toocreate containers and specify hello throughput and partition key definition in each of hello supported APIs.</span></span>

### <a name="documentdb-api"></a><span data-ttu-id="56ff1-169">DocumentDB-API</span><span class="sxs-lookup"><span data-stu-id="56ff1-169">DocumentDB API</span></span>
<span data-ttu-id="56ff1-170">Hallo volgende voorbeeld ziet u hoe een container (verzameling) met toocreate Hallo DocumentDB-API.</span><span class="sxs-lookup"><span data-stu-id="56ff1-170">hello following sample shows how toocreate a container (collection) using hello DocumentDB API.</span></span> <span data-ttu-id="56ff1-171">U vindt meer informatie in [partitioneren met DocumentDB API](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="56ff1-171">You can find more details in [Partitioning with DocumentDB API](partition-data.md).</span></span>

```csharp
DocumentClient client = new DocumentClient(new Uri(endpoint), authKey);
await client.CreateDatabaseAsync(new Database { Id = "db" });

DocumentCollection myCollection = new DocumentCollection();
myCollection.Id = "coll";
myCollection.PartitionKey.Paths.Add("/deviceId");

await client.CreateDocumentCollectionAsync(
    UriFactory.CreateDatabaseUri("db"),
    myCollection,
    new RequestOptions { OfferThroughput = 20000 });
```

<span data-ttu-id="56ff1-172">Vindt u een item (document) met behulp van Hallo `GET` methode in Hallo REST-API of met behulp van `ReadDocumentAsync` in een Hallo SDK's.</span><span class="sxs-lookup"><span data-stu-id="56ff1-172">You can read an item (document) using hello `GET` method in hello REST API or using `ReadDocumentAsync` in one of hello SDKs.</span></span>

```csharp
// Read document. Needs hello partition key and hello ID toobe specified
DeviceReading document = await client.ReadDocumentAsync<DeviceReading>(
  UriFactory.CreateDocumentUri("db", "coll", "XMS-001-FE24C"), 
  new RequestOptions { PartitionKey = new PartitionKey("XMS-0001") });
```

### <a name="mongodb-api"></a><span data-ttu-id="56ff1-173">MongoDB-API</span><span class="sxs-lookup"><span data-stu-id="56ff1-173">MongoDB API</span></span>
<span data-ttu-id="56ff1-174">Met de Hallo MongoDB-API, kunt u een verzameling shard via uw favoriete hulpprogramma, het stuurprogramma of de SDK.</span><span class="sxs-lookup"><span data-stu-id="56ff1-174">With hello MongoDB API, you can create a sharded collection through your favorite tool, driver, or SDK.</span></span> <span data-ttu-id="56ff1-175">In dit voorbeeld gebruiken we Hallo Mongo-Shell voor het maken van de verzameling Hallo.</span><span class="sxs-lookup"><span data-stu-id="56ff1-175">In this example, we use hello Mongo Shell for hello collection creation.</span></span>

<span data-ttu-id="56ff1-176">Hallo Mongo-Shell in:</span><span class="sxs-lookup"><span data-stu-id="56ff1-176">In hello Mongo Shell:</span></span>

```
db.runCommand( { shardCollection: "admin.people", key: { region: "hashed" } } )
```
    
<span data-ttu-id="56ff1-177">Resultaten:</span><span class="sxs-lookup"><span data-stu-id="56ff1-177">Results:</span></span>

```JSON
{
    "_t" : "ShardCollectionResponse",
    "ok" : 1,
    "collectionsharded" : "admin.people"
}
```

### <a name="table-api"></a><span data-ttu-id="56ff1-178">Tabel-API</span><span class="sxs-lookup"><span data-stu-id="56ff1-178">Table API</span></span>

<span data-ttu-id="56ff1-179">Met Hallo tabel API u Hallo doorvoer voor tabellen in Hallo appSettings-configuratie voor uw toepassing:</span><span class="sxs-lookup"><span data-stu-id="56ff1-179">With hello Table API, you specify hello throughput for tables in hello appSettings configuration for your application:</span></span>

```xml
<configuration>
    <appSettings>
      <!--Table creation options -->
      <add key="TableThroughput" value="700"/>
    </appSettings>
</configuration>
```

<span data-ttu-id="56ff1-180">Vervolgens maakt u een tabel met hello Azure Table storage SDK.</span><span class="sxs-lookup"><span data-stu-id="56ff1-180">Then you create a table using hello Azure Table storage SDK.</span></span> <span data-ttu-id="56ff1-181">Hallo partitiesleutel is impliciet gemaakt als Hallo `PartitionKey` waarde.</span><span class="sxs-lookup"><span data-stu-id="56ff1-181">hello partition key is implicitly created as hello `PartitionKey` value.</span></span> 

```csharp
CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

CloudTable table = tableClient.GetTableReference("people");
table.CreateIfNotExists();
```

<span data-ttu-id="56ff1-182">U kunt met behulp van de volgende codefragment Hallo één entiteit ophalen:</span><span class="sxs-lookup"><span data-stu-id="56ff1-182">You can retrieve a single entity using hello following snippet:</span></span>

```csharp
// Create a retrieve operation that takes a customer entity.
TableOperation retrieveOperation = TableOperation.Retrieve<CustomerEntity>("Smith", "Ben");

// Execute hello retrieve operation.
TableResult retrievedResult = table.Execute(retrieveOperation);
```
<span data-ttu-id="56ff1-183">Zie [ontwikkelen met Hallo tabel API](tutorial-develop-table-dotnet.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-183">See [Developing with hello Table API](tutorial-develop-table-dotnet.md) for more details.</span></span>

### <a name="graph-api"></a><span data-ttu-id="56ff1-184">Graph API</span><span class="sxs-lookup"><span data-stu-id="56ff1-184">Graph API</span></span>

<span data-ttu-id="56ff1-185">Met de Hallo Graph API, moet u hello Azure-portal of CLI toocreate containers.</span><span class="sxs-lookup"><span data-stu-id="56ff1-185">With hello Graph API, you must use hello Azure portal or CLI toocreate containers.</span></span> <span data-ttu-id="56ff1-186">U kunt ook omdat Azure Cosmos DB met meerdere modellen, kunt u een Hallo andere toocreate modellen en schalen van uw grafiek container.</span><span class="sxs-lookup"><span data-stu-id="56ff1-186">Alternatively, since Azure Cosmos DB is multi-model, you can use one of hello other models toocreate and scale your graph container.</span></span>

<span data-ttu-id="56ff1-187">U kunt geen hoekpunt of edge met Hallo partitiesleutel en -id in Gremlin lezen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-187">You can read any vertex or edge using hello partition key and id in Gremlin.</span></span> <span data-ttu-id="56ff1-188">Voor een grafiek met regio ('VS') als partitiesleutel Hallo en "Seattle" Als de rijsleutel hello, kunt u bijvoorbeeld een hoekpunt met behulp van de volgende syntaxis Hallo vinden:</span><span class="sxs-lookup"><span data-stu-id="56ff1-188">For example, for a graph with region ("USA") as hello partition key, and "Seattle" as hello row key, you can find a vertex using hello following syntax:</span></span>

```
g.V(['USA', 'Seattle'])
```

<span data-ttu-id="56ff1-189">Dezelfde met randen, u kunt verwijzen naar een edge met behulp van de partitiesleutel Hallo en rijsleutel.</span><span class="sxs-lookup"><span data-stu-id="56ff1-189">Same with edges, you can reference an edge using hello partition key and row key.</span></span>

```
g.E(['USA', 'I5'])
```

<span data-ttu-id="56ff1-190">Zie [Gremlin ondersteuning voor Cosmos DB](gremlin-support.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-190">See [Gremlin support for Cosmos DB](gremlin-support.md) for more details.</span></span>


<a name="designing-for-partitioning"></a>
## <a name="designing-for-partitioning"></a><span data-ttu-id="56ff1-191">Ontwerpen voor het partitioneren</span><span class="sxs-lookup"><span data-stu-id="56ff1-191">Designing for partitioning</span></span>
<span data-ttu-id="56ff1-192">tooscale effectief met Azure Cosmos DB, moet u een goede partitiesleutel toopick wanneer u de container maken.</span><span class="sxs-lookup"><span data-stu-id="56ff1-192">tooscale effectively with Azure Cosmos DB, you need toopick a good partition key when you create your container.</span></span> <span data-ttu-id="56ff1-193">Er zijn twee belangrijke overwegingen voor het kiezen van een partitiesleutel:</span><span class="sxs-lookup"><span data-stu-id="56ff1-193">There are two key considerations for choosing a partition key:</span></span>

* <span data-ttu-id="56ff1-194">**Grens voor query's en transacties**: uw keuze van partitiesleutel moet worden verdeeld Hallo tooenable Hallo moet het gebruik van transacties tegen Hallo vereiste toodistribute uw entiteiten meerdere partitie sleutels tooensure schaalbare oplossing.</span><span class="sxs-lookup"><span data-stu-id="56ff1-194">**Boundary for query and transactions**: Your choice of partition key should balance hello need tooenable hello use of transactions against hello requirement toodistribute your entities across multiple partition keys tooensure a scalable solution.</span></span> <span data-ttu-id="56ff1-195">Op één extreme, kunt u instellen Hallo dezelfde partitiesleutel voor alle objecten, maar dit Hallo schaalbaarheid van uw oplossing kan beperken.</span><span class="sxs-lookup"><span data-stu-id="56ff1-195">At one extreme, you could set hello same partition key for all your items, but this may limit hello scalability of your solution.</span></span> <span data-ttu-id="56ff1-196">Op Hallo andere extreme, kunt u een unieke partitiesleutel voor elk item dat is zeer schaalbaar, maar zou voorkomen dat u over verschillende document transacties via opgeslagen procedures en triggers toewijzen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-196">At hello other extreme, you could assign a unique partition key for each item, which would be highly scalable but would prevent you from using cross document transactions via stored procedures and triggers.</span></span> <span data-ttu-id="56ff1-197">Een ideaal partitiesleutel is een waarmee u toouse efficiënt query's en met voldoende kardinaliteit tooensure uw oplossing schaalbaar is.</span><span class="sxs-lookup"><span data-stu-id="56ff1-197">An ideal partition key is one that enables you toouse efficient queries and that has sufficient cardinality tooensure your solution is scalable.</span></span> 
* <span data-ttu-id="56ff1-198">**Er is geen opslag en prestaties knelpunten**: het is belangrijk een eigenschap waarmee toopick schrijft toobe verdeeld over verschillende afzonderlijke waarden.</span><span class="sxs-lookup"><span data-stu-id="56ff1-198">**No storage and performance bottlenecks**: It is important toopick a property that allows writes toobe distributed across various distinct values.</span></span> <span data-ttu-id="56ff1-199">Aanvragen toohello dezelfde partitiesleutel mag niet langer dan de doorvoer Hallo van één partitie en zijn beperkt.</span><span class="sxs-lookup"><span data-stu-id="56ff1-199">Requests toohello same partition key cannot exceed hello throughput of a single partition, and are throttled.</span></span> <span data-ttu-id="56ff1-200">Het is daarom belangrijk toopick partitiesleutel niet in 'hotspots' in uw toepassing resulteert.</span><span class="sxs-lookup"><span data-stu-id="56ff1-200">So it is important toopick a partition key that does not result in "hot spots" within your application.</span></span> <span data-ttu-id="56ff1-201">Omdat alle Hallo-gegevens voor een sleutel met één partitie moet worden opgeslagen in een partitie ook verdient tooavoid partitiesleutels waarvoor grote hoeveelheden gegevens voor Hallo dezelfde waarde.</span><span class="sxs-lookup"><span data-stu-id="56ff1-201">Since all hello data for a single partition key must be stored within a partition, it is also recommended tooavoid partition keys that have high volumes of data for hello same value.</span></span> 

<span data-ttu-id="56ff1-202">Bekijk enkele praktijkscenario's en goede partitiesleutels voor elk:</span><span class="sxs-lookup"><span data-stu-id="56ff1-202">Let's look at a few real-world scenarios, and good partition keys for each:</span></span>
* <span data-ttu-id="56ff1-203">Als u een back-end gebruiker profiel implementeren, is een goede keuze voor partitiesleutel met Hallo gebruikers-ID.</span><span class="sxs-lookup"><span data-stu-id="56ff1-203">If you’re implementing a user profile backend, then hello user ID is a good choice for partition key.</span></span>
* <span data-ttu-id="56ff1-204">Als u IoT gegevens bijvoorbeeld de status van het apparaat opslaat, wordt door een apparaat-ID een goede keuze voor de partitiesleutel is.</span><span class="sxs-lookup"><span data-stu-id="56ff1-204">If you’re storing IoT data for example, device state, a device ID is a good choice for partition key.</span></span>
* <span data-ttu-id="56ff1-205">Als u van Azure DB die Cosmos gebruikmaakt voor logboekregistratie timeseries gegevens, vervolgens Hallo hostnaam of proces-ID is een goede keuze voor partitiesleutel.</span><span class="sxs-lookup"><span data-stu-id="56ff1-205">If you’re using Azure Cosmos DB for logging time-series data, then hello hostname or process ID is a good choice for partition key.</span></span>
* <span data-ttu-id="56ff1-206">Als u een architectuur met meerdere tenants hebt, is Hallo tenant-ID een goede keuze voor partitiesleutel.</span><span class="sxs-lookup"><span data-stu-id="56ff1-206">If you have a multi-tenant architecture, hello tenant ID is a good choice for partition key.</span></span>

<span data-ttu-id="56ff1-207">In sommige gevallen, zoals IoT en gebruikersprofielen, Hallo partitiesleutel mogelijk gebruik Hallo u dezelfde als uw id (documentsleutel).</span><span class="sxs-lookup"><span data-stu-id="56ff1-207">In some use cases like IoT and user profiles, hello partition key might be hello same as your id (document key).</span></span> <span data-ttu-id="56ff1-208">In andere gevallen zoals Hallo tijd reeksgegevens wellicht u een partitiesleutel die anders is dan het Hallo-id.</span><span class="sxs-lookup"><span data-stu-id="56ff1-208">In others like hello time series data, you might have a partition key that’s different than hello id.</span></span>

### <a name="partitioning-and-loggingtime-series-data"></a><span data-ttu-id="56ff1-209">Partitionering en logboekregistratie-tijdreeks gegevens</span><span class="sxs-lookup"><span data-stu-id="56ff1-209">Partitioning and logging/time-series data</span></span>
<span data-ttu-id="56ff1-210">Een van de algemene gebruiksvoorbeelden Hallo van Cosmos-database is voor logboekregistratie en telemetrie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-210">One of hello common use cases of Cosmos DB is for logging and telemetry.</span></span> <span data-ttu-id="56ff1-211">Het is belangrijk toopick een goede partitiesleutel aangezien u tooread schrijftijd enorme hoeveelheden gegevens wellicht.</span><span class="sxs-lookup"><span data-stu-id="56ff1-211">It is important toopick a good partition key since you might need tooread/write vast volumes of data.</span></span> <span data-ttu-id="56ff1-212">Hallo keuze is afhankelijk van uw lezen en schrijven tarieven en typen query's die u toorun verwacht.</span><span class="sxs-lookup"><span data-stu-id="56ff1-212">hello choice depends on your read and write rates and kinds of queries you expect toorun.</span></span> <span data-ttu-id="56ff1-213">Hier volgen enkele tips voor het toochoose een goede partitiesleutel.</span><span class="sxs-lookup"><span data-stu-id="56ff1-213">Here are some tips on how toochoose a good partition key.</span></span>

* <span data-ttu-id="56ff1-214">Als uw gebruiksvoorbeeld een klein aantal omvat schrijft opgebouwd gedurende een langere periode van de tijd moet tooquery door bereiken van tijdstempels en andere filters en vervolgens met behulp van een updatepakket van het Hallo timestamp, bijvoorbeeld als een partitiesleutel is een goede benadering datum.</span><span class="sxs-lookup"><span data-stu-id="56ff1-214">If your use case involves a small rate of writes accumulating over a long period of time, and need tooquery by ranges of timestamps and other filters, then using a rollup of hello timestamp, for example,  date as a partition key is a good approach.</span></span> <span data-ttu-id="56ff1-215">Hiermee kunt u tooquery via alle Hallo-gegevens voor een datum van één partitie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-215">This allows you tooquery over all hello data for a date from a single partition.</span></span> 
* <span data-ttu-id="56ff1-216">Als uw werkbelasting is geschreven zware die veelvoorkomende, moet u een partitiesleutel die niet gebaseerd op tijdstempel zodat Cosmos DB schrijfbewerkingen meerdere verschillende partities verdelen kunt.</span><span class="sxs-lookup"><span data-stu-id="56ff1-216">If your workload is written heavy, which is more common, you should use a partition key that’s not based on timestamp so that Cosmos DB can distribute writes evenly across various partitions.</span></span> <span data-ttu-id="56ff1-217">Een hostnaam, proces-ID, activiteits-ID of een andere eigenschap met hoge kardinaliteit is hier een goede keuze.</span><span class="sxs-lookup"><span data-stu-id="56ff1-217">Here a hostname, process ID, activity ID, or another property with high cardinality is a good choice.</span></span> 
* <span data-ttu-id="56ff1-218">Een derde aanpak is een hybride een wanneer u meerdere containers, één voor elke dag/maand werkt en Hallo partitiesleutel is een gedetailleerd eigenschap als de hostnaam.</span><span class="sxs-lookup"><span data-stu-id="56ff1-218">A third approach is a hybrid one where you have multiple containers, one for each day/month and hello partition key is a granular property like hostname.</span></span> <span data-ttu-id="56ff1-219">Hallo voordeel die u kunt verschillende doorvoer op basis van het tijdvenster Hallo instellen is, bijvoorbeeld Hallo-container voor de huidige maand Hallo is ingericht met hogere doorvoer omdat dit lees- en schrijfbewerkingen, terwijl de voorafgaande maanden met lagere doorvoer sinds ze bedienen leest alleen.</span><span class="sxs-lookup"><span data-stu-id="56ff1-219">This has hello benefit that you can set different throughput based on hello time window, for example, hello container for hello current month is provisioned with higher throughput since it serves reads and writes, whereas previous months with lower throughput since they only serve reads.</span></span>

### <a name="partitioning-and-multi-tenancy"></a><span data-ttu-id="56ff1-220">Partitionering en multi-tenancymodus</span><span class="sxs-lookup"><span data-stu-id="56ff1-220">Partitioning and multi-tenancy</span></span>
<span data-ttu-id="56ff1-221">Als u een multitenant-toepassing met behulp van de Cosmos-DB implementeert, zijn er twee populaire patronen – een partitiesleutel per tenant en een container per tenant.</span><span class="sxs-lookup"><span data-stu-id="56ff1-221">If you are implementing a multi-tenant application using Cosmos DB, there are two popular patterns – one partition key per tenant, and one container per tenant.</span></span> <span data-ttu-id="56ff1-222">Hier volgen Hallo-voor- en nadelen voor elk:</span><span class="sxs-lookup"><span data-stu-id="56ff1-222">Here are hello pros and cons for each:</span></span>

* <span data-ttu-id="56ff1-223">Een partitiesleutel per tenant: In dit model tenants binnen een enkele container worden geplaatst.</span><span class="sxs-lookup"><span data-stu-id="56ff1-223">One Partition Key per tenant: In this model, tenants are collocated within a single container.</span></span> <span data-ttu-id="56ff1-224">Maar query's en voegt voor items binnen een enkele tenant kunnen worden uitgevoerd op een enkele partitie.</span><span class="sxs-lookup"><span data-stu-id="56ff1-224">But queries and inserts for items within a single tenant can be performed against a single partition.</span></span> <span data-ttu-id="56ff1-225">U kunt ook transactionele logica implementeren voor alle items in een tenant.</span><span class="sxs-lookup"><span data-stu-id="56ff1-225">You can also implement transactional logic across all items within a tenant.</span></span> <span data-ttu-id="56ff1-226">Omdat meerdere tenants een container delen, kunt u opslag en doorvoer kosten besparen door groeperen van bronnen voor tenants binnen een enkele container dan extra ruimte voor elke tenant wordt ingericht.</span><span class="sxs-lookup"><span data-stu-id="56ff1-226">Since multiple tenants share a container, you can save storage and throughput costs by pooling resources for tenants within a single container rather than provisioning extra headroom for each tenant.</span></span> <span data-ttu-id="56ff1-227">Hallo nadeel is dat u geen isolatie van de prestaties per tenant hebt.</span><span class="sxs-lookup"><span data-stu-id="56ff1-227">hello drawback is that you do not have performance isolation per tenant.</span></span> <span data-ttu-id="56ff1-228">Prestaties/doorvoer toeneemt toepassing toohello volledige container tegenover gericht toeneemt voor tenants.</span><span class="sxs-lookup"><span data-stu-id="56ff1-228">Performance/throughput increases apply toohello entire container vs targeted increases for tenants.</span></span>
* <span data-ttu-id="56ff1-229">Een Container per tenant: elke tenant heeft zijn eigen container.</span><span class="sxs-lookup"><span data-stu-id="56ff1-229">One Container per tenant: Each tenant has its own container.</span></span> <span data-ttu-id="56ff1-230">In dit model, kunt u de prestaties per tenant reserveren.</span><span class="sxs-lookup"><span data-stu-id="56ff1-230">In this model, you can reserve performance per tenant.</span></span> <span data-ttu-id="56ff1-231">Dit model is met het Cosmos-database nieuwe leveren prijzen model, rendabeler voor multitenant-toepassingen met een paar tenants.</span><span class="sxs-lookup"><span data-stu-id="56ff1-231">With Cosmos DB's new provisioning pricing model, this model is more cost-effective for multi-tenant applications with a few tenants.</span></span>

<span data-ttu-id="56ff1-232">U kunt ook een combinatie/gelaagde benadering die kleine tenants collocates en grotere tenants tootheir eigen container wordt gemigreerd.</span><span class="sxs-lookup"><span data-stu-id="56ff1-232">You can also use a combination/tiered approach that collocates small tenants and migrates larger tenants tootheir own container.</span></span>

## <a name="next-steps"></a><span data-ttu-id="56ff1-233">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="56ff1-233">Next steps</span></span>
<span data-ttu-id="56ff1-234">In dit artikel wordt een overzicht opgegeven voor een overzicht van de concepten en aanbevolen procedures voor het partitioneren van Azure Cosmos DB API.</span><span class="sxs-lookup"><span data-stu-id="56ff1-234">In this article, we provided an overview for an overview of concepts and best practices for partitioning with any Azure Cosmos DB API.</span></span> 

* <span data-ttu-id="56ff1-235">Meer informatie over [ingerichte doorvoer in Azure Cosmos-DB](request-units.md)</span><span class="sxs-lookup"><span data-stu-id="56ff1-235">Learn about [provisioned throughput in Azure Cosmos DB](request-units.md)</span></span>
* <span data-ttu-id="56ff1-236">Meer informatie over [globale distributie in Azure Cosmos-DB](distribute-data-globally.md)</span><span class="sxs-lookup"><span data-stu-id="56ff1-236">Learn about [global distribution in Azure Cosmos DB](distribute-data-globally.md)</span></span>



