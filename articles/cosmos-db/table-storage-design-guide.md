---
title: Gids voor opslag tabel aaaAzure | Microsoft Docs
description: Ontwerp schaalbare en zodat tabellen in de Azure-tabelopslag
services: cosmos-db
documentationcenter: na
author: mimig1
manager: tadb
editor: tysonn
ms.assetid: 8e228b0c-2998-4462-8101-9f16517393ca
ms.service: cosmos-db
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage
ms.date: 02/28/2017
ms.author: mimig
ms.openlocfilehash: 059f05a1d20e4d9537034b7ca133c5334bbefa04
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-table-design-guide-designing-scalable-and-performant-tables"></a><span data-ttu-id="5f918-103">Ontwerphandleiding voor Azure Storage-tabel: Het ontwerpen van schaalbare en de zodat tabellen</span><span class="sxs-lookup"><span data-stu-id="5f918-103">Azure Storage Table Design Guide: Designing Scalable and Performant Tables</span></span>
[!INCLUDE [storage-table-cosmos-db-tip-include](../../includes/storage-table-cosmos-db-tip-include.md)]

<span data-ttu-id="5f918-104">toodesign schaalbare en zodat tabellen moet u rekening houden met een aantal factoren, zoals prestaties, schaalbaarheid en kosten.</span><span class="sxs-lookup"><span data-stu-id="5f918-104">toodesign scalable and performant tables you must consider a number of factors such as performance, scalability, and cost.</span></span> <span data-ttu-id="5f918-105">Als u eerder schema's voor relationele databases hebt ontworpen, zijn deze overwegingen bekend tooyou, maar er zijn een aantal overeenkomsten tussen hello Azure Table storage servicemodel en relationele modellen, maar er zijn ook veel belangrijk de verschillen.</span><span class="sxs-lookup"><span data-stu-id="5f918-105">If you have previously designed schemas for relational databases, these considerations will be familiar tooyou, but while there are some similarities between hello Azure Table service storage model and relational models, there are also many important differences.</span></span> <span data-ttu-id="5f918-106">Deze verschillen leiden doorgaans toovery verschillende ontwerpen die lijkt erg intuïtief of onjuiste toosomeone bekend bent met relationele databases, maar maak die zinvol als u voor een NoSQL-sleutel/waarde-archief zoals hello Azure Table-service ontwerpt.</span><span class="sxs-lookup"><span data-stu-id="5f918-106">These differences typically lead toovery different designs that may look counter-intuitive or wrong toosomeone familiar with relational databases, but which do make good sense if you are designing for a NoSQL key/value store such as hello Azure Table service.</span></span> <span data-ttu-id="5f918-107">Veel van de verschillen in het ontwerp geeft Hallo feit dat de tabelservice Hallo ontworpen toosupport cloud-toepassingen met miljarden entiteiten (rijen in een relationele database-terminologie) van gegevens of voor gegevenssets die zeer hoge moet ondersteunen transactie-volumes: daarom moet toothink anders over hoe u uw gegevens opslaat en begrijpen hoe Hallo tabelservice werkt.</span><span class="sxs-lookup"><span data-stu-id="5f918-107">Many of your design differences will reflect hello fact that hello Table service is designed toosupport cloud-scale applications that can contain billions of entities (rows in relational database terminology) of data or for datasets that must support very high transaction volumes: therefore, you need toothink differently about how you store your data and understand how hello Table service works.</span></span> <span data-ttu-id="5f918-108">Een goed ontworpen NoSQL-gegevensarchief kunt uw oplossing tooscale inschakelen veel meer (en, tegen lagere kosten) dan een oplossing die gebruikmaakt van een relationele database.</span><span class="sxs-lookup"><span data-stu-id="5f918-108">A well designed NoSQL data store can enable your solution tooscale much further (and at a lower cost) than a solution that uses a relational database.</span></span> <span data-ttu-id="5f918-109">Deze handleiding helpt u met deze onderwerpen.</span><span class="sxs-lookup"><span data-stu-id="5f918-109">This guide helps you with these topics.</span></span>  

## <a name="about-hello-azure-table-service"></a><span data-ttu-id="5f918-110">Over hello Azure Table-service</span><span class="sxs-lookup"><span data-stu-id="5f918-110">About hello Azure Table service</span></span>
<span data-ttu-id="5f918-111">Deze sectie worden enkele Hallo belangrijkste functies van de tabelservice Hallo die vooral relevant toodesigning voor prestaties en schaalbaarheid.</span><span class="sxs-lookup"><span data-stu-id="5f918-111">This section highlights some of hello key features of hello Table service that are especially relevant toodesigning for performance and scalability.</span></span> <span data-ttu-id="5f918-112">Als u nieuwe tooAzure opslag en Hallo tabelservice, lees eerst [tooMicrosoft inleiding Azure Storage](../storage/common/storage-introduction.md) en [aan de slag met Azure Table Storage met .NET](table-storage-how-to-use-dotnet.md) voordat het lezen van de rest van dit Hallo artikel.</span><span class="sxs-lookup"><span data-stu-id="5f918-112">If you are new tooAzure Storage and hello Table service, first read [Introduction tooMicrosoft Azure Storage](../storage/common/storage-introduction.md) and [Get started with Azure Table Storage using .NET](table-storage-how-to-use-dotnet.md) before reading hello remainder of this article.</span></span> <span data-ttu-id="5f918-113">Hoewel de focus Hallo van deze handleiding op Hallo tabelservice, bevat deze sommige bespreking van hello Azure Queue en services Blob, en hoe u ze samen met de Hallo service van de tabel in een oplossing mogelijk gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-113">Although hello focus of this guide is on hello Table service, it will include some discussion of hello Azure Queue and Blob services, and how you might use them along with hello Table service in a solution.</span></span>  

<span data-ttu-id="5f918-114">Wat is tabelservice Hallo?</span><span class="sxs-lookup"><span data-stu-id="5f918-114">What is hello Table service?</span></span> <span data-ttu-id="5f918-115">Zoals u van Hallo-naam verwachten zou, gebruikt Hallo tabelservice een tabelindeling toostore-gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-115">As you might expect from hello name, hello Table service uses a tabular format toostore data.</span></span> <span data-ttu-id="5f918-116">Elke rij van de tabel Hallo een entiteit vertegenwoordigt in standaard Hallo-terminologie en Hallo kolommen store Hallo verschillende eigenschappen van die entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-116">In hello standard terminology, each row of hello table represents an entity, and hello columns store hello various properties of that entity.</span></span> <span data-ttu-id="5f918-117">Elke entiteit heeft een paar sleutels toouniquely worden geïdentificeerd en een timestamp-kolom die de tabelservice Hallo tootrack gebruikt wanneer Hallo entiteit voor het laatst is bijgewerkt (dit gebeurt automatisch en Hallo tijdstempel kan niet handmatig worden overschreven met een willekeurige waarde).</span><span class="sxs-lookup"><span data-stu-id="5f918-117">Every entity has a pair of keys toouniquely identify it, and a timestamp column that hello Table service uses tootrack when hello entity was last updated (this happens automatically and you cannot manually overwrite hello timestamp with an arbitrary value).</span></span> <span data-ttu-id="5f918-118">Hallo tabelservice maakt gebruik van deze optimistische gelijktijdigheid van laatste wijziging tijdstempel (LMT) toomanage.</span><span class="sxs-lookup"><span data-stu-id="5f918-118">hello Table service uses this last-modified timestamp (LMT) toomanage optimistic concurrency.</span></span>  

> [!NOTE]
> <span data-ttu-id="5f918-119">Hallo tabel servicebewerkingen REST API ook retourneren een **ETag** waarde die deze is afgeleid van Hallo last-modified tijdstempel (LMT).</span><span class="sxs-lookup"><span data-stu-id="5f918-119">hello Table service REST API operations also return an **ETag** value that it derives from hello last-modified timestamp (LMT).</span></span> <span data-ttu-id="5f918-120">In dit document we gebruiken Hallo termen ETag en LMT door elkaar omdat ze toohello verwijzen dezelfde onderliggende gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-120">In this document we will use hello terms ETag and LMT interchangeably because they refer toohello same underlying data.</span></span>  
> 
> 

<span data-ttu-id="5f918-121">Hallo volgende voorbeeld ziet u een eenvoudige tabel ontwerp toostore entiteiten werknemer en afdeling.</span><span class="sxs-lookup"><span data-stu-id="5f918-121">hello following example shows a simple table design toostore employee and department entities.</span></span> <span data-ttu-id="5f918-122">Veel van Hallo voorbeelden die verderop in deze handleiding zijn gebaseerd op dit eenvoudige ontwerp.</span><span class="sxs-lookup"><span data-stu-id="5f918-122">Many of hello examples shown later in this guide are based on this simple design.</span></span>  

<table>
<tr>
<th><span data-ttu-id="5f918-123">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="5f918-123">PartitionKey</span></span></th>
<th><span data-ttu-id="5f918-124">RowKey</span><span class="sxs-lookup"><span data-stu-id="5f918-124">RowKey</span></span></th>
<th><span data-ttu-id="5f918-125">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="5f918-125">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-126">Marketing</span><span class="sxs-lookup"><span data-stu-id="5f918-126">Marketing</span></span></td>
<td><span data-ttu-id="5f918-127">00001</span><span class="sxs-lookup"><span data-stu-id="5f918-127">00001</span></span></td>
<td><span data-ttu-id="5f918-128">2014-08-22T00:50:32Z</span><span class="sxs-lookup"><span data-stu-id="5f918-128">2014-08-22T00:50:32Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-129">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-129">FirstName</span></span></th>
<th><span data-ttu-id="5f918-130">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-130">LastName</span></span></th>
<th><span data-ttu-id="5f918-131">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-131">Age</span></span></th>
<th><span data-ttu-id="5f918-132">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-132">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-133">Jan</span><span class="sxs-lookup"><span data-stu-id="5f918-133">Don</span></span></td>
<td><span data-ttu-id="5f918-134">Hall</span><span class="sxs-lookup"><span data-stu-id="5f918-134">Hall</span></span></td>
<td><span data-ttu-id="5f918-135">34</span><span class="sxs-lookup"><span data-stu-id="5f918-135">34</span></span></td>
<td>donh@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="5f918-136">Marketing</span><span class="sxs-lookup"><span data-stu-id="5f918-136">Marketing</span></span></td>
<td><span data-ttu-id="5f918-137">00002</span><span class="sxs-lookup"><span data-stu-id="5f918-137">00002</span></span></td>
<td><span data-ttu-id="5f918-138">2014-08-22T00:50:34Z</span><span class="sxs-lookup"><span data-stu-id="5f918-138">2014-08-22T00:50:34Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-139">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-139">FirstName</span></span></th>
<th><span data-ttu-id="5f918-140">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-140">LastName</span></span></th>
<th><span data-ttu-id="5f918-141">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-141">Age</span></span></th>
<th><span data-ttu-id="5f918-142">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-142">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-143">Jun</span><span class="sxs-lookup"><span data-stu-id="5f918-143">Jun</span></span></td>
<td><span data-ttu-id="5f918-144">CaO</span><span class="sxs-lookup"><span data-stu-id="5f918-144">Cao</span></span></td>
<td><span data-ttu-id="5f918-145">47</span><span class="sxs-lookup"><span data-stu-id="5f918-145">47</span></span></td>
<td>junc@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="5f918-146">Marketing</span><span class="sxs-lookup"><span data-stu-id="5f918-146">Marketing</span></span></td>
<td><span data-ttu-id="5f918-147">Afdeling</span><span class="sxs-lookup"><span data-stu-id="5f918-147">Department</span></span></td>
<td><span data-ttu-id="5f918-148">2014-08-22T00:50:30Z</span><span class="sxs-lookup"><span data-stu-id="5f918-148">2014-08-22T00:50:30Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-149">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="5f918-149">DepartmentName</span></span></th>
<th><span data-ttu-id="5f918-150">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="5f918-150">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-151">Marketing</span><span class="sxs-lookup"><span data-stu-id="5f918-151">Marketing</span></span></td>
<td><span data-ttu-id="5f918-152">153</span><span class="sxs-lookup"><span data-stu-id="5f918-152">153</span></span></td>
</tr>
</table>
</td>
</tr>
<tr>
<td><span data-ttu-id="5f918-153">Verkoop</span><span class="sxs-lookup"><span data-stu-id="5f918-153">Sales</span></span></td>
<td><span data-ttu-id="5f918-154">00010</span><span class="sxs-lookup"><span data-stu-id="5f918-154">00010</span></span></td>
<td><span data-ttu-id="5f918-155">2014-08-22T00:50:44Z</span><span class="sxs-lookup"><span data-stu-id="5f918-155">2014-08-22T00:50:44Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-156">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-156">FirstName</span></span></th>
<th><span data-ttu-id="5f918-157">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-157">LastName</span></span></th>
<th><span data-ttu-id="5f918-158">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-158">Age</span></span></th>
<th><span data-ttu-id="5f918-159">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-159">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-160">Ken</span><span class="sxs-lookup"><span data-stu-id="5f918-160">Ken</span></span></td>
<td><span data-ttu-id="5f918-161">Kwok</span><span class="sxs-lookup"><span data-stu-id="5f918-161">Kwok</span></span></td>
<td><span data-ttu-id="5f918-162">23</span><span class="sxs-lookup"><span data-stu-id="5f918-162">23</span></span></td>
<td>kenk@contoso.com</td>
</tr>
</table>
</td>
</tr>
</table>


<span data-ttu-id="5f918-163">Tot nu toe, ziet deze eruit vergelijkbaar tooa tabel in een relationele database met Hallo belangrijke verschillen wordt Hallo verplichte kolommen en hello mogelijkheid toostore meerdere entiteit van het type in Hallo dezelfde tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-163">So far, this looks very similar tooa table in a relational database with hello key differences being hello mandatory columns, and hello ability toostore multiple entity types in hello same table.</span></span> <span data-ttu-id="5f918-164">Bovendien elk van de gebruiker gedefinieerde eigenschappen zoals Hallo **FirstName** of **leeftijd** heeft een gegevenstype, zoals geheel getal of tekenreeks, net zoals een kolom in een relationele database.</span><span class="sxs-lookup"><span data-stu-id="5f918-164">In addition, each of hello user-defined properties such as **FirstName** or **Age** has a data type, such as integer or string, just like a column in a relational database.</span></span> <span data-ttu-id="5f918-165">Hoewel in tegenstelling tot in een relationele database Hallo schema minder aard van Hallo tabel-service betekent dat een eigenschap moet geen Hallo hetzelfde gegevenstype voor elke entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-165">Although unlike in a relational database, hello schema-less nature of hello Table service means that a property need not have hello same data type on each entity.</span></span> <span data-ttu-id="5f918-166">toostore complexe gegevenstypen in één eigenschap, moet u een zoals JSON of XML-serialisatie-indeling.</span><span class="sxs-lookup"><span data-stu-id="5f918-166">toostore complex data types in a single property, you must use a serialized format such as JSON or XML.</span></span> <span data-ttu-id="5f918-167">Zie voor meer informatie over Hallo tabel-service, zoals ondersteunde gegevenstypen, ondersteunde datumbereiken naamgevingsregels en beperkingen voor [Understanding Hallo Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-167">For more information about hello table service such as supported data types, supported date ranges, naming rules, and size constraints, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>

<span data-ttu-id="5f918-168">Zoals u ziet, uw keuze van **PartitionKey** en **RowKey** fundamentele toogood tabelontwerp is.</span><span class="sxs-lookup"><span data-stu-id="5f918-168">As you will see, your choice of **PartitionKey** and **RowKey** is fundamental toogood table design.</span></span> <span data-ttu-id="5f918-169">Elke entiteit die is opgeslagen in een tabel moet een unieke combinatie van **PartitionKey** en **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-169">Every entity stored in a table must have a unique combination of **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="5f918-170">Net als bij de sleutels in een relationele database, Hallo **PartitionKey** en **RowKey** waarden zijn geïndexeerde toocreate een geclusterde index waarmee u snel te zoeken; echter Hallo service tabel maakt geen een secundaire indexen, zodat deze Hallo slechts twee geïndexeerde eigenschappen (aantal Hallo patronen verderop tonen hoe u deze duidelijk beperking kunt omzeilen).</span><span class="sxs-lookup"><span data-stu-id="5f918-170">As with keys in a relational database table, hello **PartitionKey** and **RowKey** values are indexed toocreate a clustered index that enables fast look-ups; however, hello Table service does not create any secondary indexes so these are hello only two indexed properties (some of hello patterns described later show how you can work around this apparent limitation).</span></span>  

<span data-ttu-id="5f918-171">Een tabel bestaat uit een of meer partities en zoals u ziet, veel Hallo beslissingen die u zal worden rond het kiezen van een geschikte ontwerp **PartitionKey** en **RowKey** toooptimize uw oplossing.</span><span class="sxs-lookup"><span data-stu-id="5f918-171">A table is made up of one or more partitions, and as you will see, many of hello design decisions you make will be around choosing a suitable **PartitionKey** and **RowKey** toooptimize your solution.</span></span> <span data-ttu-id="5f918-172">Een oplossing kan bestaan uit slechts één tabel die de entiteiten die zijn onderverdeeld in partities bevat, maar doorgaans een oplossing heeft meerdere tabellen.</span><span class="sxs-lookup"><span data-stu-id="5f918-172">A solution could consist of just a single table that contains all your entities organized into partitions, but typically a solution will have multiple tables.</span></span> <span data-ttu-id="5f918-173">Tabellen kunt u toologically ordenen uw entiteiten, u helpt toegang toohello gegevens met toegangsbeheerlijsten en u kunt een hele tabel met een één opslag-bewerking neerzetten.</span><span class="sxs-lookup"><span data-stu-id="5f918-173">Tables help you toologically organize your entities, help you manage access toohello data using access control lists, and you can drop an entire table using a single storage operation.</span></span>  

### <a name="table-partitions"></a><span data-ttu-id="5f918-174">Tabelpartities</span><span class="sxs-lookup"><span data-stu-id="5f918-174">Table partitions</span></span>
<span data-ttu-id="5f918-175">Hallo-accountnaam, de tabelnaam en **PartitionKey** Hallo partitie in opslagservice Hallo waar tabelservice Hallo Hallo entiteit opgeslagen samen te identificeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-175">hello account name, table name and **PartitionKey** together identify hello partition within hello storage service where hello table service stores hello entity.</span></span> <span data-ttu-id="5f918-176">Onderdeel van Hallo adresschema voor entiteiten zijn, partities een bereik voor transacties definiëren (Zie [entiteit groepstransacties](#entity-group-transactions) hieronder), en formulier Hallo op basis van hoe Hallo tabelservice schaalt.</span><span class="sxs-lookup"><span data-stu-id="5f918-176">As well as being part of hello addressing scheme for entities, partitions define a scope for transactions (see [Entity Group Transactions](#entity-group-transactions) below), and form hello basis of how hello table service scales.</span></span> <span data-ttu-id="5f918-177">Zie voor meer informatie over partities [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="5f918-177">For more information on partitions see [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span></span>  

<span data-ttu-id="5f918-178">Een afzonderlijke knooppunten services in Hallo service tabel, een of meer partities voltooien en service schaalt door dynamisch taakverdeling Hallo partities over knooppunten.</span><span class="sxs-lookup"><span data-stu-id="5f918-178">In hello Table service, an individual node services one or more complete partitions and hello service scales by dynamically load-balancing partitions across nodes.</span></span> <span data-ttu-id="5f918-179">Als een knooppunt belast wordt, Hallo tabelservice kunt *splitsen* Hallo bereik van partities wordt onderhouden door dat knooppunt op verschillende knooppunten; wanneer verkeer subsidies, Hallo-service kan *samenvoegen* Hallo partitie variërend van stille knooppunten terug op één knooppunt.</span><span class="sxs-lookup"><span data-stu-id="5f918-179">If a node is under load, hello table service can *split* hello range of partitions serviced by that node onto different nodes; when traffic subsides, hello service can *merge* hello partition ranges from quiet nodes back onto a single node.</span></span>  

<span data-ttu-id="5f918-180">Voor meer informatie over Hallo interne details van Hallo Tabelservice en in het bijzonder hoe Hallo service partities beheert, Zie Hallo papier [Microsoft Azure Storage: een maximaal beschikbare Cloudopslagservice met sterke consistentie](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-180">For more information about hello internal details of hello Table service, and in particular how hello service manages partitions, see hello paper [Microsoft Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span></span>  

### <a name="entity-group-transactions"></a><span data-ttu-id="5f918-181">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-181">Entity Group Transactions</span></span>
<span data-ttu-id="5f918-182">In Hallo tabel-service zijn transacties entiteit (EGTs) Hallo alleen ingebouwde mechanisme voor het uitvoeren van atomaire updates tussen meerdere entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-182">In hello Table service, Entity Group Transactions (EGTs) are hello only built-in mechanism for performing atomic updates across multiple entities.</span></span> <span data-ttu-id="5f918-183">Er zijn ook EGTs waarnaar wordt verwezen tooas *batch transacties* in sommige documentatie.</span><span class="sxs-lookup"><span data-stu-id="5f918-183">EGTs are also referred tooas *batch transactions* in some documentation.</span></span> <span data-ttu-id="5f918-184">EGTs werkt alleen voor entiteiten die zijn opgeslagen in Hallo dezelfde partitie (share Hallo dezelfde partitiesleutel in een bepaalde tabel), telkens wanneer u atomic transactionele gedrag tussen meerdere entiteiten moet er daarom tooensure die deze entiteiten in Hallo dezelfde partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-184">EGTs can only operate on entities stored in hello same partition (share hello same partition key in a given table), so anytime you need atomic transactional behavior across multiple entities you need tooensure that those entities are in hello same partition.</span></span> <span data-ttu-id="5f918-185">Dit is vaak een reden voor het behouden van meerdere Entiteitstypen in Hallo dezelfde tabel (en partitie) en meerdere tabellen voor verschillende Entiteitstypen niet gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-185">This is often a reason for keeping multiple entity types in hello same table (and partition) and not using multiple tables for different entity types.</span></span> <span data-ttu-id="5f918-186">Een enkele EGT kan werken op maximaal 100 entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-186">A single EGT can operate on at most 100 entities.</span></span>  <span data-ttu-id="5f918-187">Als u meerdere gelijktijdige EGTs indienen voor verwerking van het is belangrijk tooensure werkt deze EGTs niet op de entiteiten die voor EGTs gelden zoals anders verwerking kan worden vertraagd.</span><span class="sxs-lookup"><span data-stu-id="5f918-187">If you submit multiple concurrent EGTs for processing it is important tooensure  those EGTs do not operate on entities that are common across EGTs as otherwise processing can be delayed.</span></span>

<span data-ttu-id="5f918-188">EGTs ook een mogelijke waarde voor tooevaluate in uw ontwerp geïntroduceerd: Hallo schaalbaarheid van uw toepassing met behulp van meer partities wordt verhoogd omdat Azure heeft meer mogelijkheden voor aanvragen voor taakverdeling over de knooppunten, maar dit Hallo mogelijk beperken de mogelijkheid van uw toepassing tooperform-atomic transacties en sterke consistentie voor uw gegevens onderhouden.</span><span class="sxs-lookup"><span data-stu-id="5f918-188">EGTs also introduce a potential trade-off for you tooevaluate in your design: using more partitions will increase hello scalability of your application because Azure has more opportunities for load balancing requests across nodes, but this might limit hello ability of your application tooperform atomic transactions and maintain strong consistency for your data.</span></span> <span data-ttu-id="5f918-189">Bovendien de schaalbaarheidsdoelen van specifieke op Hallo niveau van een partitie die Hallo doorvoer van transacties die u voor één knooppunt verwachten kunt kan beperken er zijn: voor meer informatie over Hallo schaalbaarheidsdoelen voor Azure storage-accounts en Hallo tabel service, raadpleegt [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="5f918-189">Furthermore, there are specific scalability targets at hello level of a partition that might limit hello throughput of transactions you can expect for a single node: for more information about hello scalability targets for Azure storage accounts and hello table service, see [Azure Storage Scalability and Performance Targets](../storage/common/storage-scalability-targets.md).</span></span> <span data-ttu-id="5f918-190">Latere secties van deze handleiding worden verschillende ontwerp strategieën die u helpen bij verschillen zoals deze beheren en optimale toochoose uw partitiesleutel op basis van specifieke vereisten van uw clienttoepassing hello bespreken.</span><span class="sxs-lookup"><span data-stu-id="5f918-190">Later sections of this guide discuss various design strategies that help you manage trade-offs such as this one, and discuss how best toochoose your partition key based on hello specific requirements of your client application.</span></span>  

### <a name="capacity-considerations"></a><span data-ttu-id="5f918-191">Overwegingen voor capaciteitsplanning</span><span class="sxs-lookup"><span data-stu-id="5f918-191">Capacity considerations</span></span>
<span data-ttu-id="5f918-192">Hallo bevat volgende tabel enkele Hallo sleutelwaarden toobe op de hoogte van tijdens het ontwerpen van een oplossing voor tabel-service:</span><span class="sxs-lookup"><span data-stu-id="5f918-192">hello following table includes some of hello key values toobe aware of when you are designing a Table service solution:</span></span>  

| <span data-ttu-id="5f918-193">Totale capaciteit van een Azure storage-account</span><span class="sxs-lookup"><span data-stu-id="5f918-193">Total capacity of an Azure storage account</span></span> | <span data-ttu-id="5f918-194">500 TB</span><span class="sxs-lookup"><span data-stu-id="5f918-194">500 TB</span></span> |
| --- | --- |
| <span data-ttu-id="5f918-195">Aantal tabellen in een Azure storage-account</span><span class="sxs-lookup"><span data-stu-id="5f918-195">Number of tables in an Azure storage account</span></span> |<span data-ttu-id="5f918-196">Alleen beperkt door het Hallo-capaciteit van Hallo storage-account</span><span class="sxs-lookup"><span data-stu-id="5f918-196">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="5f918-197">Aantal partities in een tabel</span><span class="sxs-lookup"><span data-stu-id="5f918-197">Number of partitions in a table</span></span> |<span data-ttu-id="5f918-198">Alleen beperkt door het Hallo-capaciteit van Hallo storage-account</span><span class="sxs-lookup"><span data-stu-id="5f918-198">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="5f918-199">Aantal entiteiten in een partitie</span><span class="sxs-lookup"><span data-stu-id="5f918-199">Number of entities in a partition</span></span> |<span data-ttu-id="5f918-200">Alleen beperkt door het Hallo-capaciteit van Hallo storage-account</span><span class="sxs-lookup"><span data-stu-id="5f918-200">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="5f918-201">Grootte van een afzonderlijke entiteit</span><span class="sxs-lookup"><span data-stu-id="5f918-201">Size of an individual entity</span></span> |<span data-ttu-id="5f918-202">Omhoog too1 MB van maximaal 255 eigenschappen (inclusief Hallo **PartitionKey**, **RowKey**, en **tijdstempel**)</span><span class="sxs-lookup"><span data-stu-id="5f918-202">Up too1 MB with a maximum of 255 properties (including hello **PartitionKey**, **RowKey**, and **Timestamp**)</span></span> |
| <span data-ttu-id="5f918-203">Grootte van Hallo **PartitionKey**</span><span class="sxs-lookup"><span data-stu-id="5f918-203">Size of hello **PartitionKey**</span></span> |<span data-ttu-id="5f918-204">Een tekenreeks van too1 KB groot</span><span class="sxs-lookup"><span data-stu-id="5f918-204">A string up too1 KB in size</span></span> |
| <span data-ttu-id="5f918-205">Grootte van Hallo **RowKey**</span><span class="sxs-lookup"><span data-stu-id="5f918-205">Size of hello **RowKey**</span></span> |<span data-ttu-id="5f918-206">Een tekenreeks van too1 KB groot</span><span class="sxs-lookup"><span data-stu-id="5f918-206">A string up too1 KB in size</span></span> |
| <span data-ttu-id="5f918-207">Grootte van een entiteit groep-transactie</span><span class="sxs-lookup"><span data-stu-id="5f918-207">Size of an Entity Group Transaction</span></span> |<span data-ttu-id="5f918-208">Een transactie kan maximaal 100 entiteiten bevatten en Hallo nettolading moet minder dan 4 MB groot.</span><span class="sxs-lookup"><span data-stu-id="5f918-208">A transaction can include at most 100 entities and hello payload must be less than 4 MB in size.</span></span> <span data-ttu-id="5f918-209">Een EGT kan slechts eenmaal bijwerken een entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-209">An EGT can only update an entity once.</span></span> |

<span data-ttu-id="5f918-210">Zie voor meer informatie [Understanding Hallo Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-210">For more information, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>  

### <a name="cost-considerations"></a><span data-ttu-id="5f918-211">Kosten overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-211">Cost considerations</span></span>
<span data-ttu-id="5f918-212">Tabelopslag relatief goedkope is, maar moet u kosten maakt een schatting voor beide capaciteit gebruiks- en Hallo aantal transacties opnemen als onderdeel van de evaluatie van een oplossing die gebruikmaakt van Hallo tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-212">Table storage is relatively inexpensive, but you should include cost estimates for both capacity usage and hello quantity of transactions as part of your evaluation of any solution that uses hello Table service.</span></span> <span data-ttu-id="5f918-213">In veel scenario's voor het opslaan van gedenormaliseerd of dubbele gegevens in de volgorde tooimprove Hallo is prestaties en schaalbaarheid van uw oplossing echter een tootake geldig benadering.</span><span class="sxs-lookup"><span data-stu-id="5f918-213">However, in many scenarios storing denormalized or duplicate data in order tooimprove hello performance or scalability of your solution is a valid approach tootake.</span></span> <span data-ttu-id="5f918-214">Zie voor meer informatie over prijzen [prijzen voor Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="5f918-214">For more information about pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

## <a name="guidelines-for-table-design"></a><span data-ttu-id="5f918-215">Richtlijnen voor het tabelontwerp van de</span><span class="sxs-lookup"><span data-stu-id="5f918-215">Guidelines for table design</span></span>
<span data-ttu-id="5f918-216">Deze lijsten samenvatten aantal Hallo sleutel richtlijnen die u rekening houden moet bij het ontwerpen van uw tabellen en deze handleiding los deze allemaal in meer detail later in.</span><span class="sxs-lookup"><span data-stu-id="5f918-216">These lists summarize some of hello key guidelines you should keep in mind when you are designing your tables, and this guide will address them all in more detail later in.</span></span> <span data-ttu-id="5f918-217">Deze richtlijnen zijn heel verschillend van Hallo richtlijnen die u doorgaans als voor het ontwerp van relationele database volgt.</span><span class="sxs-lookup"><span data-stu-id="5f918-217">These guidelines are very different from hello guidelines you would typically follow for relational database design.</span></span>  

<span data-ttu-id="5f918-218">Het ontwerpen van uw tabel-service-oplossing toobe *lezen* efficiënt:</span><span class="sxs-lookup"><span data-stu-id="5f918-218">Designing your Table service solution toobe *read* efficient:</span></span>

* <span data-ttu-id="5f918-219">***Ontwerpen voor het uitvoeren van toepassingen waarin lezen veel query's.***</span><span class="sxs-lookup"><span data-stu-id="5f918-219">***Design for querying in read-heavy applications.***</span></span> <span data-ttu-id="5f918-220">Tijdens het ontwerpen van uw tabellen nadenken over Hallo query's (met name Hallo latentie gevoelig die) die zal worden uitgevoerd voordat u nadenken over hoe u uw entiteiten wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="5f918-220">When you are designing your tables, think about hello queries (especially hello latency sensitive ones) that you will execute before you think about how you will update your entities.</span></span> <span data-ttu-id="5f918-221">Dit leidt meestal tot een efficiënte en zodat oplossing.</span><span class="sxs-lookup"><span data-stu-id="5f918-221">This typically results in an efficient and performant solution.</span></span>  
* <span data-ttu-id="5f918-222">***Geef zowel PartitionKey en RowKey in uw query's.***</span><span class="sxs-lookup"><span data-stu-id="5f918-222">***Specify both PartitionKey and RowKey in your queries.***</span></span> <span data-ttu-id="5f918-223">*Query's wijst* zoals deze zijn Hallo meest efficiënt tabel service query's.</span><span class="sxs-lookup"><span data-stu-id="5f918-223">*Point queries* such as these are hello most efficient table service queries.</span></span>  
* <span data-ttu-id="5f918-224">***Houd rekening met dubbele exemplaren van entiteiten opslaan.***</span><span class="sxs-lookup"><span data-stu-id="5f918-224">***Consider storing duplicate copies of entities.***</span></span> <span data-ttu-id="5f918-225">Tabelopslag is goedkope moet dezelfde entiteit meerdere keren (met verschillende sleutels) opslaan Hallo tooenable efficiënter query's.</span><span class="sxs-lookup"><span data-stu-id="5f918-225">Table storage is cheap so consider storing hello same entity multiple times (with different keys) tooenable more efficient queries.</span></span>  
* <span data-ttu-id="5f918-226">***U kunt uw gegevens denormalizing.***</span><span class="sxs-lookup"><span data-stu-id="5f918-226">***Consider denormalizing your data.***</span></span> <span data-ttu-id="5f918-227">Tabelopslag goedkope is dus Overweeg denormalizing van uw gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-227">Table storage is cheap so consider denormalizing your data.</span></span> <span data-ttu-id="5f918-228">Samenvatting entiteiten bijvoorbeeld opslaan zodat query's voor statistische gegevens slechts één entiteit tooaccess hoeft.</span><span class="sxs-lookup"><span data-stu-id="5f918-228">For example, store summary entities so that queries for aggregate data only need tooaccess a single entity.</span></span>  
* <span data-ttu-id="5f918-229">***Gebruik de samengestelde sleutel komt.***</span><span class="sxs-lookup"><span data-stu-id="5f918-229">***Use compound key values.***</span></span> <span data-ttu-id="5f918-230">Hallo alleen sleutels die u hebt zijn **PartitionKey** en **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-230">hello only keys you have are **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="5f918-231">Gebruik bijvoorbeeld samengestelde sleutelwaarden tooenable alternatieve sleutelhash toegang paden tooentities.</span><span class="sxs-lookup"><span data-stu-id="5f918-231">For example, use compound key values tooenable alternate keyed access paths tooentities.</span></span>  
* <span data-ttu-id="5f918-232">***Query-projectie gebruiken.***</span><span class="sxs-lookup"><span data-stu-id="5f918-232">***Use query projection.***</span></span> <span data-ttu-id="5f918-233">U kunt verkleinen Hallo hoeveelheid gegevens die u via Hallo netwerk overbrengen met behulp van query's die alleen Hallo velden, u moet selecteert.</span><span class="sxs-lookup"><span data-stu-id="5f918-233">You can reduce hello amount of data that you transfer over hello network by using queries that select just hello fields you need.</span></span>  

<span data-ttu-id="5f918-234">Het ontwerpen van uw tabel-service-oplossing toobe *schrijven* efficiënt:</span><span class="sxs-lookup"><span data-stu-id="5f918-234">Designing your Table service solution toobe *write* efficient:</span></span>  

* <span data-ttu-id="5f918-235">***Maak geen hot partities.***</span><span class="sxs-lookup"><span data-stu-id="5f918-235">***Do not create hot partitions.***</span></span> <span data-ttu-id="5f918-236">Kies toetsen waarmee u toospread uw aanvragen over meerdere partities op elk moment.</span><span class="sxs-lookup"><span data-stu-id="5f918-236">Choose keys that enable you toospread your requests across multiple partitions at any point of time.</span></span>  
* <span data-ttu-id="5f918-237">***Vermijd pieken in het verkeer.***</span><span class="sxs-lookup"><span data-stu-id="5f918-237">***Avoid spikes in traffic.***</span></span> <span data-ttu-id="5f918-238">Hallo-verkeer via een redelijke periode vloeiend en pieken in het verkeer worden vermeden.</span><span class="sxs-lookup"><span data-stu-id="5f918-238">Smooth hello traffic over a reasonable period of time and avoid spikes in traffic.</span></span>
* <span data-ttu-id="5f918-239">***Niet per se een afzonderlijke tabel voor elk type entiteit maken.***</span><span class="sxs-lookup"><span data-stu-id="5f918-239">***Don't necessarily create a separate table for each type of entity.***</span></span> <span data-ttu-id="5f918-240">Wanneer u atomische transacties op Entiteitstypen vereisen, slaat u deze meerdere Entiteitstypen in dezelfde partitie in Hallo Hallo dezelfde tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-240">When you require atomic transactions across entity types, you can store these multiple entity types in hello same partition in hello same table.</span></span>
* <span data-ttu-id="5f918-241">***U kunt de maximale doorvoer Hallo die moeten worden gerealiseerd.***</span><span class="sxs-lookup"><span data-stu-id="5f918-241">***Consider hello maximum throughput you must achieve.***</span></span> <span data-ttu-id="5f918-242">U moet rekening houden met de Hallo schaalbaarheidsdoelen voor Hallo tabelservice en zorg ervoor dat uw ontwerp niet u tooexceed tot leidt ze.</span><span class="sxs-lookup"><span data-stu-id="5f918-242">You must be aware of hello scalability targets for hello Table service and ensure that your design will not cause you tooexceed them.</span></span>  

<span data-ttu-id="5f918-243">Als u deze handleiding leest, ziet u voorbeelden die al deze principes in de praktijk geplaatst.</span><span class="sxs-lookup"><span data-stu-id="5f918-243">As you read this guide, you will see examples that put all of these principles into practice.</span></span>  

## <a name="design-for-querying"></a><span data-ttu-id="5f918-244">Ontwerp voor het uitvoeren van query 's</span><span class="sxs-lookup"><span data-stu-id="5f918-244">Design for querying</span></span>
<span data-ttu-id="5f918-245">Oplossingen voor tabel-service kunnen worden gelezen intensief, schrijven intensief of een combinatie van Hallo twee.</span><span class="sxs-lookup"><span data-stu-id="5f918-245">Table service solutions may be read intensive, write intensive, or a mix of hello two.</span></span> <span data-ttu-id="5f918-246">In deze sectie richt zich op Hallo dingen toobear in rekening wanneer u uw tabel service toosupport leesbewerkingen efficiënt ontwerpt.</span><span class="sxs-lookup"><span data-stu-id="5f918-246">This section focuses on hello things toobear in mind when you are designing your Table service toosupport read operations efficiently.</span></span> <span data-ttu-id="5f918-247">Een ontwerp dat ondersteunt lees-en schrijfopdrachten efficiënt is meestal ook efficiënt voor schrijfbewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-247">Typically, a design that supports read operations efficiently is also efficient for write operations.</span></span> <span data-ttu-id="5f918-248">Er zijn echter aanvullende overwegingen toobear in rekening wanneer ontwerpen toosupport schrijfbewerkingen, die wordt besproken in de volgende sectie hello, [ontwerp voor wijziging van gegevens](#design-for-data-modification).</span><span class="sxs-lookup"><span data-stu-id="5f918-248">However, there are additional considerations toobear in mind when designing toosupport write operations, discussed in hello next section, [Design for data modification](#design-for-data-modification).</span></span>

<span data-ttu-id="5f918-249">Een goed uitgangspunt voor het ontwerpen van uw tooenable tabel-service-oplossing u tooread gegevens efficiënt is tooask "welke query wordt mijn nodig tooexecute tooretrieve Hallo toepassingsgegevens uit de tabelservice Hallo moet?"</span><span class="sxs-lookup"><span data-stu-id="5f918-249">A good starting point for designing your Table service solution tooenable you tooread data efficiently is tooask "What queries will my application need tooexecute tooretrieve hello data it needs from hello Table service?"</span></span>  

> [!NOTE]
> <span data-ttu-id="5f918-250">Met de Hallo tabelservice, is het belangrijk tooget Hallo ontwerp juiste vooraf omdat het is moeilijk en kostbaar proces toochange later.</span><span class="sxs-lookup"><span data-stu-id="5f918-250">With hello Table service, it's important tooget hello design correct up front because it's difficult and expensive toochange it later.</span></span> <span data-ttu-id="5f918-251">Bijvoorbeeld in een relationele database, is het vaak mogelijk tooaddress prestatieproblemen gewoon door toe te voegen de bestaande database tooan indexeert: dit is geen optie Hello tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-251">For example, in a relational database it's often possible tooaddress performance issues simply by adding indexes tooan existing database: this is not an option with hello Table service.</span></span>  
> 
> 

<span data-ttu-id="5f918-252">Deze sectie legt de nadruk op Hallo sleutel die u houden moet bij het ontwerpen van uw tabellen voor het uitvoeren van query's.</span><span class="sxs-lookup"><span data-stu-id="5f918-252">This section focuses on hello key issues you must address when you design your tables for querying.</span></span> <span data-ttu-id="5f918-253">Hallo-onderwerpen in deze sectie zijn onder andere:</span><span class="sxs-lookup"><span data-stu-id="5f918-253">hello topics covered in this section include:</span></span>

* [<span data-ttu-id="5f918-254">Hoe uw keuze van PartitionKey en RowKey van invloed is op prestaties van query 's</span><span class="sxs-lookup"><span data-stu-id="5f918-254">How your choice of PartitionKey and RowKey impacts query performance</span></span>](#how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance)
* [<span data-ttu-id="5f918-255">Een juiste PartitionKey kiezen</span><span class="sxs-lookup"><span data-stu-id="5f918-255">Choosing an appropriate PartitionKey</span></span>](#choosing-an-appropriate-partitionkey)
* [<span data-ttu-id="5f918-256">Query's voor Hallo tabelservice optimaliseren</span><span class="sxs-lookup"><span data-stu-id="5f918-256">Optimizing queries for hello Table service</span></span>](#optimizing-queries-for-the-table-service)
* [<span data-ttu-id="5f918-257">Sorteren van gegevens in Hallo tabelservice</span><span class="sxs-lookup"><span data-stu-id="5f918-257">Sorting data in hello Table service</span></span>](#sorting-data-in-the-table-service)

### <a name="how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance"></a><span data-ttu-id="5f918-258">Hoe uw keuze van PartitionKey en RowKey van invloed is op prestaties van query 's</span><span class="sxs-lookup"><span data-stu-id="5f918-258">How your choice of PartitionKey and RowKey impacts query performance</span></span>
<span data-ttu-id="5f918-259">Hallo volgende voorbeelden wordt ervan uitgegaan dat het opslaan van tabelservice Hallo is werknemer entiteiten met Hallo structuur te volgen (Hallo voorbeelden de meeste weglaten Hallo **tijdstempel** eigenschap voor de duidelijkheid):</span><span class="sxs-lookup"><span data-stu-id="5f918-259">hello following examples assume hello table service is storing employee entities with hello following structure (most of hello examples omit hello **Timestamp** property for clarity):</span></span>  

| <span data-ttu-id="5f918-260">*Kolomnaam*</span><span class="sxs-lookup"><span data-stu-id="5f918-260">*Column name*</span></span> | <span data-ttu-id="5f918-261">*Gegevenstype*</span><span class="sxs-lookup"><span data-stu-id="5f918-261">*Data type*</span></span> |
| --- | --- |
| <span data-ttu-id="5f918-262">**PartitionKey** (naam van de afdeling)</span><span class="sxs-lookup"><span data-stu-id="5f918-262">**PartitionKey** (Department Name)</span></span> |<span data-ttu-id="5f918-263">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="5f918-263">String</span></span> |
| <span data-ttu-id="5f918-264">**RowKey** (werknemer-Id)</span><span class="sxs-lookup"><span data-stu-id="5f918-264">**RowKey** (Employee Id)</span></span> |<span data-ttu-id="5f918-265">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="5f918-265">String</span></span> |
| <span data-ttu-id="5f918-266">**Voornaam**</span><span class="sxs-lookup"><span data-stu-id="5f918-266">**FirstName**</span></span> |<span data-ttu-id="5f918-267">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="5f918-267">String</span></span> |
| <span data-ttu-id="5f918-268">**Achternaam**</span><span class="sxs-lookup"><span data-stu-id="5f918-268">**LastName**</span></span> |<span data-ttu-id="5f918-269">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="5f918-269">String</span></span> |
| <span data-ttu-id="5f918-270">**Leeftijd**</span><span class="sxs-lookup"><span data-stu-id="5f918-270">**Age**</span></span> |<span data-ttu-id="5f918-271">Geheel getal</span><span class="sxs-lookup"><span data-stu-id="5f918-271">Integer</span></span> |
| <span data-ttu-id="5f918-272">**EmailAddress**</span><span class="sxs-lookup"><span data-stu-id="5f918-272">**EmailAddress**</span></span> |<span data-ttu-id="5f918-273">Tekenreeks</span><span class="sxs-lookup"><span data-stu-id="5f918-273">String</span></span> |

<span data-ttu-id="5f918-274">Hallo eerdere sectie [overzicht van de service Azure Table](#overview) beschrijft een aantal Hallo belangrijkste functies van hello Azure Table-service waarvoor een directe invloed op ontwerpen voor query.</span><span class="sxs-lookup"><span data-stu-id="5f918-274">hello earlier section [Azure Table service overview](#overview) describes some of hello key features of hello Azure Table service that have a direct influence on designing for query.</span></span> <span data-ttu-id="5f918-275">Deze leiden tot Hallo algemene richtlijnen voor het ontwerpen van query's tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-275">These result in hello following general guidelines for designing Table service queries.</span></span> <span data-ttu-id="5f918-276">Houd er rekening mee dat Hallo filtersyntaxis in onderstaande Hallo voorbeelden gebruikt uit Hallo tabelservice REST API, Zie voor meer informatie [Query entiteiten](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-276">Note that hello filter syntax used in hello examples below is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

* <span data-ttu-id="5f918-277">Een ***punt Query*** Hallo meest efficiënt lookup toouse en wordt aanbevolen toobe gebruikt voor zoekopdrachten met hoog volume of zoekacties laagste latentie vereisen.</span><span class="sxs-lookup"><span data-stu-id="5f918-277">A ***Point Query*** is hello most efficient lookup toouse and is recommended toobe used for high-volume lookups or lookups requiring lowest latency.</span></span> <span data-ttu-id="5f918-278">Dergelijke query kan zeer efficiënt Hallo indexen toolocate een afzonderlijke entiteit gebruiken door op te geven beide Hallo **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-278">Such a query can use hello indexes toolocate an individual entity very efficiently by specifying both hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-279">Bijvoorbeeld: $filter = (PartitionKey eq 'Sales') en (RowKey eq '2')</span><span class="sxs-lookup"><span data-stu-id="5f918-279">For example: $filter=(PartitionKey eq 'Sales') and (RowKey eq '2')</span></span>  
* <span data-ttu-id="5f918-280">Tweede in de rij is een ***Bereikquery*** die gebruikmaakt van Hallo **PartitionKey** en filters op een reeks **RowKey** waarden tooreturn meer dan één entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-280">Second best is a ***Range Query*** that uses hello **PartitionKey** and filters on a range of **RowKey** values tooreturn more than one entity.</span></span> <span data-ttu-id="5f918-281">Hallo **PartitionKey** waarde identificeert een specifieke partitie en Hallo **RowKey** waarden een subset van Hallo entiteiten in de betreffende partitie identificeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-281">hello **PartitionKey** value identifies a specific partition, and hello **RowKey** values identify a subset of hello entities in that partition.</span></span> <span data-ttu-id="5f918-282">Bijvoorbeeld: $filter = PartitionKey eq 'Verkoop en de RowKey ge' en RowKey lt t '</span><span class="sxs-lookup"><span data-stu-id="5f918-282">For example: $filter=PartitionKey eq 'Sales' and RowKey ge 'S' and RowKey lt 'T'</span></span>  
* <span data-ttu-id="5f918-283">Derde beste is een ***partitie scannen*** die gebruikmaakt van Hallo **PartitionKey** en filters op een andere niet-sleutelkenmerk eigenschap en die mogelijk meer dan één entiteit geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-283">Third best is a ***Partition Scan*** that uses hello **PartitionKey** and filters on another non-key property and that may return more than one entity.</span></span> <span data-ttu-id="5f918-284">Hallo **PartitionKey** waarde identificeert een specifieke partitie en Hallo eigenschap waarden selecteren voor een subset van Hallo entiteiten in de betreffende partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-284">hello **PartitionKey** value identifies a specific partition, and hello property values select for a subset of hello entities in that partition.</span></span> <span data-ttu-id="5f918-285">Bijvoorbeeld: $filter = PartitionKey eq 'Verkoop' en LastName eq 'Smith'</span><span class="sxs-lookup"><span data-stu-id="5f918-285">For example: $filter=PartitionKey eq 'Sales' and LastName eq 'Smith'</span></span>  
* <span data-ttu-id="5f918-286">Een ***tabel scannen*** omvat geen Hallo **PartitionKey** en zeer inefficiënte omdat alle partities Hallo die gezamenlijk uw tabel voor de overeenkomende entiteiten op zijn beurt wordt doorzocht.</span><span class="sxs-lookup"><span data-stu-id="5f918-286">A ***Table Scan*** does not include hello **PartitionKey** and is very inefficient because it searches all of hello partitions that make up your table in turn for any matching entities.</span></span> <span data-ttu-id="5f918-287">Wordt uitgevoerd om een tabelscan ongeacht of het filter Hallo gebruikt **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-287">It will perform a table scan regardless of whether or not your filter uses hello **RowKey**.</span></span> <span data-ttu-id="5f918-288">Bijvoorbeeld: $filter = LastName eq 'Jones'</span><span class="sxs-lookup"><span data-stu-id="5f918-288">For example: $filter=LastName eq 'Jones'</span></span>  
* <span data-ttu-id="5f918-289">Query's die meerdere entiteiten retourneren retourneren ze gesorteerd **PartitionKey** en **RowKey** volgorde.</span><span class="sxs-lookup"><span data-stu-id="5f918-289">Queries that return multiple entities return them sorted in **PartitionKey** and **RowKey** order.</span></span> <span data-ttu-id="5f918-290">tooavoid sorteren Hallo entiteiten in Hallo-client, kies een **RowKey** Hallo meest voorkomende sorteervolgorde te definiëren.</span><span class="sxs-lookup"><span data-stu-id="5f918-290">tooavoid resorting hello entities in hello client, choose a **RowKey** that defines hello most common sort order.</span></span>  

<span data-ttu-id="5f918-291">Houd er rekening mee dat als u met een '**of**' toospecify een filter op basis van **RowKey** waarden resulteert in een partitie scan en wordt niet behandeld als een bereikquery.</span><span class="sxs-lookup"><span data-stu-id="5f918-291">Note that using an "**or**" toospecify a filter based on **RowKey** values results in a partition scan and is not treated as a range query.</span></span> <span data-ttu-id="5f918-292">U moet daarom query's die worden gebruikt, zoals filters: $filter = PartitionKey eq 'Sales' (RowKey eq '121' of een RowKey eq '322')</span><span class="sxs-lookup"><span data-stu-id="5f918-292">Therefore, you should avoid queries that use filters such as: $filter=PartitionKey eq 'Sales' and (RowKey eq '121' or RowKey eq '322')</span></span>  

<span data-ttu-id="5f918-293">Zie voor voorbeelden van clientcode die gebruikmaken van Hallo Storage-clientbibliotheek tooexecute efficiënt query's:</span><span class="sxs-lookup"><span data-stu-id="5f918-293">For examples of client-side code that use hello Storage Client Library tooexecute efficient queries, see:</span></span>  

* [<span data-ttu-id="5f918-294">Uitvoeren van een punt-query Hallo Storage-clientbibliotheek</span><span class="sxs-lookup"><span data-stu-id="5f918-294">Executing a point query using hello Storage Client Library</span></span>](#executing-a-point-query-using-the-storage-client-library)
* [<span data-ttu-id="5f918-295">Bij het ophalen van meerdere entiteiten met behulp van LINQ</span><span class="sxs-lookup"><span data-stu-id="5f918-295">Retrieving multiple entities using LINQ</span></span>](#retrieving-multiple-entities-using-linq)
* [<span data-ttu-id="5f918-296">Projectie-serverzijde</span><span class="sxs-lookup"><span data-stu-id="5f918-296">Server-side projection</span></span>](#server-side-projection)  

<span data-ttu-id="5f918-297">Voor voorbeelden van clientcode dat meerdere entiteit kan verwerken typen opgeslagen in Hallo dezelfde tabel, Zie:</span><span class="sxs-lookup"><span data-stu-id="5f918-297">For examples of client-side code that can handle multiple entity types stored in hello same table, see:</span></span>  

* [<span data-ttu-id="5f918-298">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-298">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="choosing-an-appropriate-partitionkey"></a><span data-ttu-id="5f918-299">Een juiste PartitionKey kiezen</span><span class="sxs-lookup"><span data-stu-id="5f918-299">Choosing an appropriate PartitionKey</span></span>
<span data-ttu-id="5f918-300">Uw keuze van **PartitionKey** moeten worden verdeeld Hallo nodig tooenables Hallo gebruik van EGTs (consistentie van tooensure) tegen Hallo vereiste toodistribute uw entiteiten meerdere partities (tooensure schaalbare oplossing).</span><span class="sxs-lookup"><span data-stu-id="5f918-300">Your choice of **PartitionKey** should balance hello need tooenables hello use of EGTs (tooensure consistency) against hello requirement toodistribute your entities across multiple partitions (tooensure a scalable solution).</span></span>  

<span data-ttu-id="5f918-301">Aan één extreme u alle entiteiten in uw kan opslaan in een enkele partitie, maar dit Hallo schaalbaarheid van uw oplossing kan beperken en zou verhinderen Hallo tabelservice kunnen tooload-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="5f918-301">At one extreme, you could store all your entities in a single partition, but this may limit hello scalability of your solution and would prevent hello table service from being able tooload-balance requests.</span></span> <span data-ttu-id="5f918-302">Op Hallo andere extreme, kunt u één entiteit per partitie, die wel uiterst schaalbare en waardoor Hallo tabel serviceaanvragen tooload saldo, maar dat zou voorkomen dat u entiteitstransacties opslaan.</span><span class="sxs-lookup"><span data-stu-id="5f918-302">At hello other extreme, you could store one entity per partition, which would be highly scalable and which enables hello table service tooload-balance requests, but which would prevent you from using entity group transactions.</span></span>  

<span data-ttu-id="5f918-303">Een ideaal **PartitionKey** is een waarmee u toouse efficiënt query's en die voldoende partities tooensure heeft uw oplossing schaalbaar is.</span><span class="sxs-lookup"><span data-stu-id="5f918-303">An ideal **PartitionKey** is one that enables you toouse efficient queries and that has sufficient partitions tooensure your solution is scalable.</span></span> <span data-ttu-id="5f918-304">Normaal gesproken zult u merken dat uw entiteiten een geschikte eigenschap die de entiteiten over voldoende partities verdeelt hebben.</span><span class="sxs-lookup"><span data-stu-id="5f918-304">Typically, you will find that your entities will have a suitable property that distributes your entities across sufficient partitions.</span></span>

> [!NOTE]
> <span data-ttu-id="5f918-305">Bijvoorbeeld in een systeem dat wordt informatie over gebruikers- of werknemers opgeslagen, gebruikers-id is mogelijk een goede PartitionKey.</span><span class="sxs-lookup"><span data-stu-id="5f918-305">For example, in a system that stores information about users or employees, UserID may be a good PartitionKey.</span></span> <span data-ttu-id="5f918-306">Mogelijk hebt u verschillende entiteiten die een opgegeven gebruikers-id als partitiesleutel hello gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-306">You may have several entities that use a given UserID as hello partition key.</span></span> <span data-ttu-id="5f918-307">Elke entiteit die gegevens over een gebruiker opslaat in een enkele partitie worden gegroepeerd en dus deze entiteiten zijn toegankelijk via entiteit groepstransacties, terwijl u nog steeds zeer schaalbaar.</span><span class="sxs-lookup"><span data-stu-id="5f918-307">Each entity that stores data about a user is grouped into a single partition, and so these entities are accessible via entity group transactions, while still being highly scalable.</span></span>
> 
> 

<span data-ttu-id="5f918-308">Er zijn aanvullende overwegingen bij de keuze van **PartitionKey** die betrekking hebben toohow wordt u invoegen, bijwerken en verwijderen van entiteiten: Zie de sectie Hallo [ontwerp voor wijziging van gegevens](#design-for-data-modification) hieronder.</span><span class="sxs-lookup"><span data-stu-id="5f918-308">There are additional considerations in your choice of **PartitionKey** that relate toohow you will insert, update, and delete entities: see hello section [Design for data modification](#design-for-data-modification) below.</span></span>  

### <a name="optimizing-queries-for-hello-table-service"></a><span data-ttu-id="5f918-309">Query's voor Hallo tabelservice optimaliseren</span><span class="sxs-lookup"><span data-stu-id="5f918-309">Optimizing queries for hello Table service</span></span>
<span data-ttu-id="5f918-310">Hallo tabelservice indexeert automatisch de entiteiten met Hallo **PartitionKey** en **RowKey** waarden in een enkele geclusterde index daarom reden dat punt query's efficiëntste toouse zijn Hallo Hallo .</span><span class="sxs-lookup"><span data-stu-id="5f918-310">hello Table service automatically indexes your entities using hello **PartitionKey** and **RowKey** values in a single clustered index, hence hello reason that point queries are hello most efficient toouse.</span></span> <span data-ttu-id="5f918-311">Er zijn echter geen indexen dan die op een geclusterde index op Hallo Hallo **PartitionKey** en **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-311">However, there are no indexes other than that on hello clustered index on hello **PartitionKey** and **RowKey**.</span></span>

<span data-ttu-id="5f918-312">Veel ontwerpen moeten voldoen aan vereisten tooenable lookup entiteiten op basis van meerdere criteria.</span><span class="sxs-lookup"><span data-stu-id="5f918-312">Many designs must meet requirements tooenable lookup of entities based on multiple criteria.</span></span> <span data-ttu-id="5f918-313">Bijvoorbeeld zoeken naar werknemer entiteiten op basis van e-mailadres werknemer-id of achternaam op.</span><span class="sxs-lookup"><span data-stu-id="5f918-313">For example, locating employee entities based on email, employee id, or last name.</span></span> <span data-ttu-id="5f918-314">Hallo volgende patronen in de sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) deze typen vereiste op te lossen en manieren om te werken om Hallo feit Hallo tabel-service biedt geen secundaire indexen te beschrijven:</span><span class="sxs-lookup"><span data-stu-id="5f918-314">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address these types of requirement and describe ways of working around hello fact that hello Table service does not provide secondary indexes:</span></span>  

* <span data-ttu-id="5f918-315">[Intra-partitie secundaire index patroon](#intra-partition-secondary-index-pattern) -opslaan meerdere exemplaren van elke entiteit met behulp van verschillende **RowKey** waarden (in Hallo dezelfde partitie) tooenable snelle en efficiënte zoekacties en alternatieve sorteren orders door gebruik te maken andere **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-315">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="5f918-316">[Secundaire tussen partitioneren van index patroon](#inter-partition-secondary-index-pattern) : opslaan van meerdere exemplaren van elke entiteit met verschillende waarden voor de RowKey in afzonderlijke partities of afzonderlijke tabellen tooenable snel en efficiënt zoekacties en alternatieve sorteren orders met behulp van verschillende **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-316">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="5f918-317">[Index entiteiten patroon](#index-entities-pattern) -onderhouden entiteiten tooenable efficiënt zoekacties in de index die lijsten van entiteiten retourneren.</span><span class="sxs-lookup"><span data-stu-id="5f918-317">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

### <a name="sorting-data-in-hello-table-service"></a><span data-ttu-id="5f918-318">Sorteren van gegevens in Hallo tabelservice</span><span class="sxs-lookup"><span data-stu-id="5f918-318">Sorting data in hello Table service</span></span>
<span data-ttu-id="5f918-319">Hallo tabelservice retourneert entiteiten in oplopende volgorde op basis van gesorteerd **PartitionKey** en vervolgens op **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-319">hello Table service returns entities sorted in ascending order based on **PartitionKey** and then by **RowKey**.</span></span> <span data-ttu-id="5f918-320">Deze sleutels worden tekenreekswaarden en tooensure die numerieke waarden correct sorteren die u moet deze tooa vaste lengte converteren en ze worden opgevuld met nullen.</span><span class="sxs-lookup"><span data-stu-id="5f918-320">These keys are string values and tooensure that numeric values sort correctly, you should convert them tooa fixed length and pad them with zeroes.</span></span> <span data-ttu-id="5f918-321">Bijvoorbeeld, als hello werknemer-id-waarde u als Hallo **RowKey** is een geheel getal, moet u de werknemer-id converteren **123** te**00000123**.</span><span class="sxs-lookup"><span data-stu-id="5f918-321">For example, if hello employee id value you use as hello **RowKey** is an integer value, you should convert employee id **123** too**00000123**.</span></span>  

<span data-ttu-id="5f918-322">Veel toepassingen hebben vereisten toouse gegevens gesorteerd in verschillende volgorden: werknemers bijvoorbeeld sorteren op naam of door datum.</span><span class="sxs-lookup"><span data-stu-id="5f918-322">Many applications have requirements toouse data sorted in different orders: for example, sorting employees by name, or by joining date.</span></span> <span data-ttu-id="5f918-323">Hallo volgende patronen in de sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) adres hoe tooalternate sorteervolgorde van de entiteiten:</span><span class="sxs-lookup"><span data-stu-id="5f918-323">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address how tooalternate sort orders for your entities:</span></span>  

* <span data-ttu-id="5f918-324">[Intra-partitie secundaire index patroon](#intra-partition-secondary-index-pattern) -meerdere exemplaren van elke entiteit met verschillende waarden voor de RowKey opslaan (in Hallo dezelfde partitie) tooenable snelle en efficiënte zoekacties en alternatieve sorteren orders met behulp van verschillende RowKey waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-324">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>  
* <span data-ttu-id="5f918-325">[Secundaire tussen partitioneren van index patroon](#inter-partition-secondary-index-pattern) : opslaan van meerdere exemplaren van elke entiteit met behulp van verschillende waarden voor de RowKey in afzonderlijke partities in afzonderlijke tabellen tooenable snel en efficiënt zoekacties en alternatieve sorteren orders met behulp van verschillende RowKey waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-325">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions in separate tables tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>
* <span data-ttu-id="5f918-326">[Logboek tail patroon](#log-tail-pattern) -ophalen Hallo  *n*  tooa partitie entiteiten meest recent toegevoegd met behulp van een **RowKey** waarde die in omgekeerde datum en tijd volgorde worden gesorteerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-326">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="design-for-data-modification"></a><span data-ttu-id="5f918-327">Ontwerp voor wijziging van gegevens</span><span class="sxs-lookup"><span data-stu-id="5f918-327">Design for data modification</span></span>
<span data-ttu-id="5f918-328">Deze sectie richt zich op Hallo ontwerpoverwegingen voor het optimaliseren van toevoegingen, updates, en worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="5f918-328">This section focuses on hello design considerations for optimizing inserts, updates, and deletes.</span></span> <span data-ttu-id="5f918-329">In sommige gevallen moet u tooevaluate Hallo compromis tussen ontwerpen die voor een query op modellen die voor wijziging van gegevens, optimaliseren net als in ontwerpen voor relationele databases (Hoewel Hallo technieken voor het beheren van ontwerp Hallo optimaliseren verschillen zijn verschillend in een relationele database).</span><span class="sxs-lookup"><span data-stu-id="5f918-329">In some cases, you will need tooevaluate hello trade-off between designs that optimize for querying against designs that optimize for data modification just as you do in designs for relational databases (although hello techniques for managing hello design trade-offs are different in a relational database).</span></span> <span data-ttu-id="5f918-330">sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) sommige gedetailleerde ontwerppatronen voor Hallo service tabel wordt beschreven en worden enkele deze verschillen.</span><span class="sxs-lookup"><span data-stu-id="5f918-330">hello section [Table Design Patterns](#table-design-patterns) describes some detailed design patterns for hello Table service and highlights some these trade-offs.</span></span> <span data-ttu-id="5f918-331">In de praktijk vindt u veel ontwerpen die zijn geoptimaliseerd voor het uitvoeren van query's entiteiten ook geschikt voor entiteiten wijzigen.</span><span class="sxs-lookup"><span data-stu-id="5f918-331">In practice, you will find that many designs optimized for querying entities also work well for modifying entities.</span></span>  

### <a name="optimizing-hello-performance-of-insert-update-and-delete-operations"></a><span data-ttu-id="5f918-332">Hallo prestaties optimaliseren van invoegen, bijwerken en verwijderen bewerkingen</span><span class="sxs-lookup"><span data-stu-id="5f918-332">Optimizing hello performance of insert, update, and delete operations</span></span>
<span data-ttu-id="5f918-333">tooupdate of een entiteit verwijderen, moet u kunnen tooidentify deze met behulp van Hallo **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-333">tooupdate or delete an entity, you must be able tooidentify it by using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-334">In dit opzicht van uw keuze **PartitionKey** en **RowKey** voor het wijzigen van entiteiten moet volgen vergelijkbare criteria tooyour keuze toosupport wijst u query's omdat u wilt dat tooidentify entiteiten als efficiënt mogelijk.</span><span class="sxs-lookup"><span data-stu-id="5f918-334">In this respect, your choice of **PartitionKey** and **RowKey** for modifying entities should follow similar criteria tooyour choice toosupport point queries because you want tooidentify entities as efficiently as possible.</span></span> <span data-ttu-id="5f918-335">U niet wilt dat een inefficiënte partitie of tabel scan toolocate een entiteit in volgorde toodiscover hello toouse **PartitionKey** en **RowKey** waarden tooupdate of u deze verwijderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-335">You do not want toouse an inefficient partition or table scan toolocate an entity in order toodiscover hello **PartitionKey** and **RowKey** values you need tooupdate or delete it.</span></span>  

<span data-ttu-id="5f918-336">Hallo volgende patronen in de sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) adres optimaliseren Hallo prestaties of uw invoegen, bijwerken en verwijderen van bewerkingen:</span><span class="sxs-lookup"><span data-stu-id="5f918-336">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address optimizing hello performance or your insert, update, and delete operations:</span></span>  

* <span data-ttu-id="5f918-337">[Hoog volume patroon verwijderen](#high-volume-delete-pattern) -Enable Hallo verwijdering van een groot aantal entiteiten doordat alle Hallo-entiteiten voor gelijktijdige verwijdering in hun eigen afzonderlijke tabel; u Hallo entiteiten verwijderen door Hallo tabel te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-337">[High volume delete pattern](#high-volume-delete-pattern) - Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  
* <span data-ttu-id="5f918-338">[Patroon van de reeks gegevens](#data-series-pattern) -Store voltooid gegevensreeksen in een enkele entiteit toominimize Hallo aantal aanvragen die u aanbrengt.</span><span class="sxs-lookup"><span data-stu-id="5f918-338">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  
* <span data-ttu-id="5f918-339">[Wide entiteiten patroon](#wide-entities-pattern) -gebruik van meerdere fysieke entiteiten toostore logische entiteiten met meer dan 252 eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="5f918-339">[Wide entities pattern](#wide-entities-pattern) - Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  
* <span data-ttu-id="5f918-340">[Grote entiteiten patroon](#large-entities-pattern) -gebruik blob storage toostore grote eigenschapswaarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-340">[Large entities pattern](#large-entities-pattern) - Use blob storage toostore large property values.</span></span>  

### <a name="ensuring-consistency-in-your-stored-entities"></a><span data-ttu-id="5f918-341">Uw opgeslagen entiteiten consistent te houden</span><span class="sxs-lookup"><span data-stu-id="5f918-341">Ensuring consistency in your stored entities</span></span>
<span data-ttu-id="5f918-342">andere belangrijke factor waarmee uw keuze van sleutels voor het optimaliseren van gegevenswijzigingen is Hallo hoe tooensure consistentie met behulp van atomische transacties.</span><span class="sxs-lookup"><span data-stu-id="5f918-342">hello other key factor that influences your choice of keys for optimizing data modifications is how tooensure consistency by using atomic transactions.</span></span> <span data-ttu-id="5f918-343">U kunt alleen een toooperate EGT gebruiken voor entiteiten die zijn opgeslagen in Hallo dezelfde partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-343">You can only use an EGT toooperate on entities stored in hello same partition.</span></span>  

<span data-ttu-id="5f918-344">Hallo volgende patronen in de sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) adres consistentie beheren:</span><span class="sxs-lookup"><span data-stu-id="5f918-344">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address managing consistency:</span></span>  

* <span data-ttu-id="5f918-345">[Intra-partitie secundaire index patroon](#intra-partition-secondary-index-pattern) -opslaan meerdere exemplaren van elke entiteit met behulp van verschillende **RowKey** waarden (in Hallo dezelfde partitie) tooenable snelle en efficiënte zoekacties en alternatieve sorteren orders door gebruik te maken andere **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-345">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="5f918-346">[Secundaire tussen partitioneren van index patroon](#inter-partition-secondary-index-pattern) : opslaan van meerdere exemplaren van elke entiteit met verschillende waarden voor de RowKey in afzonderlijke partities of afzonderlijke tabellen tooenable snel en efficiënt zoekacties en alternatieve sorteren orders met behulp van verschillende **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-346">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="5f918-347">[Uiteindelijk consistent transacties patroon](#eventually-consistent-transactions-pattern) -uiteindelijk consistent gedrag over grenzen van partities of opslag system grenzen inschakelen met behulp van Azure wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="5f918-347">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) - Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>
* <span data-ttu-id="5f918-348">[Index entiteiten patroon](#index-entities-pattern) -onderhouden entiteiten tooenable efficiënt zoekacties in de index die lijsten van entiteiten retourneren.</span><span class="sxs-lookup"><span data-stu-id="5f918-348">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  
* <span data-ttu-id="5f918-349">[Denormalization patroon](#denormalization-pattern) -combineren van de bijbehorende gegevens samen in een enkele entiteit tooenable tooretrieve u alle gegevens die u met een query één punt moet Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-349">[Denormalization pattern](#denormalization-pattern) - Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  
* <span data-ttu-id="5f918-350">[Patroon van de reeks gegevens](#data-series-pattern) -Store voltooid gegevensreeksen in een enkele entiteit toominimize Hallo aantal aanvragen die u aanbrengt.</span><span class="sxs-lookup"><span data-stu-id="5f918-350">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

<span data-ttu-id="5f918-351">Zie voor informatie over entiteit groepstransacties Hallo sectie [entiteit groepstransacties](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="5f918-351">For information about entity group transactions, see hello section [Entity Group Transactions](#entity-group-transactions).</span></span>  

### <a name="ensuring-your-design-for-efficient-modifications-facilitates-efficient-queries"></a><span data-ttu-id="5f918-352">Uw ontwerp voor efficiënte wijzigingen gezorgd vereenvoudigt efficiënt query 's</span><span class="sxs-lookup"><span data-stu-id="5f918-352">Ensuring your design for efficient modifications facilitates efficient queries</span></span>
<span data-ttu-id="5f918-353">Een ontwerp voor een efficiënte query resulteert in efficiënt wijzigingen, maar u moet altijd in veel gevallen evalueren of dit Hallo-aanvraag voor uw specifieke scenario.</span><span class="sxs-lookup"><span data-stu-id="5f918-353">In many cases, a design for efficient querying results in efficient modifications, but you should always evaluate whether this is hello case for your specific scenario.</span></span> <span data-ttu-id="5f918-354">Aantal van patronen in de sectie Hallo Hallo [ontwerppatronen voor tabel](#table-design-patterns) expliciet evalueren verschillen tussen het uitvoeren van query's en entiteiten wijzigen en u moet altijd rekening gehouden Hallo het nummer van elk type bewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-354">Some of hello patterns in hello section [Table Design Patterns](#table-design-patterns) explicitly evaluate trade-offs between querying and modifying entities, and you should always take into account hello number of each type of operation.</span></span>  

<span data-ttu-id="5f918-355">Hallo volgende patronen in de sectie Hallo [ontwerppatronen voor tabel](#table-design-patterns) adres verschillen tussen ontwerpen voor efficiënt query's en ontwerpen voor wijziging van efficiënte gegevens:</span><span class="sxs-lookup"><span data-stu-id="5f918-355">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address trade-offs between designing for efficient queries and designing for efficient data modification:</span></span>  

* <span data-ttu-id="5f918-356">[Samengestelde sleutelpatroon](#compound-key-pattern) -gebruik samengestelde **RowKey** waarden tooenable een client toolookup gerelateerde gegevens met een query één punt.</span><span class="sxs-lookup"><span data-stu-id="5f918-356">[Compound key pattern](#compound-key-pattern) - Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  
* <span data-ttu-id="5f918-357">[Logboek tail patroon](#log-tail-pattern) -ophalen Hallo  *n*  tooa partitie entiteiten meest recent toegevoegd met behulp van een **RowKey** waarde die in omgekeerde datum en tijd volgorde worden gesorteerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-357">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="encrypting-table-data"></a><span data-ttu-id="5f918-358">Versleuteling van tabelgegevens</span><span class="sxs-lookup"><span data-stu-id="5f918-358">Encrypting Table Data</span></span>
<span data-ttu-id="5f918-359">Hallo .NET Azure Storage-clientbibliotheek ondersteunt de versleuteling van entiteitseigenschappen tekenreeks voor invoegen en vervang bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-359">hello .NET Azure Storage Client Library supports encryption of string entity properties for insert and replace operations.</span></span> <span data-ttu-id="5f918-360">Hallo versleutelde tekenreeksen op Hallo-service worden opgeslagen als binaire eigenschappen en ze back toostrings na de decodering worden omgezet.</span><span class="sxs-lookup"><span data-stu-id="5f918-360">hello encrypted strings are stored on hello service as binary properties, and they are converted back toostrings after decryption.</span></span>    

<span data-ttu-id="5f918-361">Voor tabellen bovendien toohello versleutelingsbeleid, gebruikers moeten opgeven Hallo eigenschappen toobe versleuteld.</span><span class="sxs-lookup"><span data-stu-id="5f918-361">For tables, in addition toohello encryption policy, users must specify hello properties toobe encrypted.</span></span> <span data-ttu-id="5f918-362">Dit kan worden gedaan door een kenmerk [EncryptProperty] (voor POCO-entiteiten die zijn afgeleid van TableEntity) of een omzetter versleuteling in de aanvraag-opties.</span><span class="sxs-lookup"><span data-stu-id="5f918-362">This can be done by either specifying an [EncryptProperty] attribute (for POCO entities that derive from TableEntity) or an encryption resolver in request options.</span></span> <span data-ttu-id="5f918-363">Een oplossing versleuteling is een gemachtigde die ervoor zorgt dat een partitiesleutel, rijsleutel en de naam van eigenschap retourneert een Booleaanse waarde die aangeeft of de eigenschap die moet worden versleuteld.</span><span class="sxs-lookup"><span data-stu-id="5f918-363">An encryption resolver is a delegate that takes a partition key, row key, and property name and returns a Boolean that indicates whether that property should be encrypted.</span></span> <span data-ttu-id="5f918-364">Hallo-clientbibliotheek gebruiken tijdens het versleutelen kan deze informatie toodecide toe of een eigenschap tijdens het schrijven van toohello kabel moet worden versleuteld.</span><span class="sxs-lookup"><span data-stu-id="5f918-364">During encryption, hello client library will use this information toodecide whether a property should be encrypted while writing toohello wire.</span></span> <span data-ttu-id="5f918-365">Hallo gemachtigde biedt ook de mogelijkheid Hallo van logica over hoe eigenschappen zijn gecodeerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-365">hello delegate also provides for hello possibility of logic around how properties are encrypted.</span></span> <span data-ttu-id="5f918-366">(Bijvoorbeeld als X, vervolgens versleutelen eigenschap A; anders versleutelen eigenschappen A en B.) Houd er rekening mee dat deze is niet nodig tooprovide deze informatie tijdens het lezen of het uitvoeren van query's entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-366">(For example, if X, then encrypt property A; otherwise encrypt properties A and B.) Note that it is not necessary tooprovide this information while reading or querying entities.</span></span>

<span data-ttu-id="5f918-367">Houd er rekening mee dat samenvoegen wordt momenteel niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="5f918-367">Note that merge is not currently supported.</span></span> <span data-ttu-id="5f918-368">Omdat een subset van eigenschappen mogelijk zijn versleuteld eerder met een andere sleutel, leidt gewoon samenvoegen Hallo nieuwe eigenschappen en bijwerken van Hallo metagegevens tot verlies van gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-368">Since a subset of properties may have been encrypted previously using a different key, simply merging hello new properties and updating hello metadata will result in data loss.</span></span> <span data-ttu-id="5f918-369">Samenvoegen van een vereist extra service waardoor tooread Hallo vooraf bestaande entiteit aanroepen vanaf Hallo service of met een nieuwe sleutel per eigenschap, die beide zijn niet geschikt voor betere prestaties.</span><span class="sxs-lookup"><span data-stu-id="5f918-369">Merging either requires making extra service calls tooread hello pre-existing entity from hello service, or using a new key per property, both of which are not suitable for performance reasons.</span></span>     

<span data-ttu-id="5f918-370">Zie voor meer informatie over het coderen van tabelgegevens [Client-Side-versleuteling en Azure Key Vault voor Microsoft Azure Storage](../storage/common/storage-client-side-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="5f918-370">For information about encrypting table data, see [Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage](../storage/common/storage-client-side-encryption.md).</span></span>  

## <a name="modelling-relationships"></a><span data-ttu-id="5f918-371">Modellering van relaties</span><span class="sxs-lookup"><span data-stu-id="5f918-371">Modelling relationships</span></span>
<span data-ttu-id="5f918-372">Ontwikkelen van domeinmodellen is een belangrijke stap in de ontwerp Hallo van complexe systemen.</span><span class="sxs-lookup"><span data-stu-id="5f918-372">Building domain models is a key step in hello design of complex systems.</span></span> <span data-ttu-id="5f918-373">Normaal gesproken gebruikt u Hallo modellering proces tooidentify entiteiten en relaties tussen deze als een manier toounderstand Hallo Hallo business-domein en Hallo ontwerp van uw systeem te informeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-373">Typically, you use hello modelling process tooidentify entities and hello relationships between them as a way toounderstand hello business domain and inform hello design of your system.</span></span> <span data-ttu-id="5f918-374">Deze sectie richt zich op hoe Vertaal Hallo voorkomende relatie typen gevonden in domein modellen toodesigns voor Hallo tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-374">This section focuses on how you can translate some of hello common relationship types found in domain models toodesigns for hello Table service.</span></span> <span data-ttu-id="5f918-375">Hallo wordt-toewijzing van een logische-gegevensmodel tooa fysieke gebaseerd NoSQL-gegevensmodel sterk verschilt van die gebruikt bij het ontwerpen van een relationele database.</span><span class="sxs-lookup"><span data-stu-id="5f918-375">hello process of mapping from a logical data-model tooa physical NoSQL based data-model is very different from that used when designing a relational database.</span></span> <span data-ttu-id="5f918-376">Relationele databases ontwerp neemt doorgaans een gegevens-normalisatie-proces geoptimaliseerd voor het minimaliseren van redundantie – en een declaratieve opvragen capaciteit die samenvattingen Hallo hoe implementatie van de werking van Hallo-database.</span><span class="sxs-lookup"><span data-stu-id="5f918-376">Relational databases design typically assumes a data normalization process optimized for minimizing redundancy – and a declarative querying capability that abstracts how hello implementation of how hello database works.</span></span>  

### <a name="one-to-many-relationships"></a><span data-ttu-id="5f918-377">Een-op-veel-relaties</span><span class="sxs-lookup"><span data-stu-id="5f918-377">One-to-many relationships</span></span>
<span data-ttu-id="5f918-378">Een-op-veel-relaties tussen bedrijven domeinobjecten heel vaak gebeuren: één afdeling heeft bijvoorbeeld veel werknemers.</span><span class="sxs-lookup"><span data-stu-id="5f918-378">One-to-many relationships between business domain objects occur very frequently: for example, one department has many employees.</span></span> <span data-ttu-id="5f918-379">Er zijn verschillende manieren tooimplement een-op-veel-relaties in Hallo tabelservice, elk met de voor- en nadelen die mogelijk relevant toohello bepaald scenario.</span><span class="sxs-lookup"><span data-stu-id="5f918-379">There are several ways tooimplement one-to-many relationships in hello Table service each with pros and cons that may be relevant toohello particular scenario.</span></span>  

<span data-ttu-id="5f918-380">Bekijk Hallo voorbeeld van een grote onderneming met meerdere nationale met tienduizenden afdelingen en werknemer entiteiten waar elke afdeling heeft veel werknemers en elke werknemer die gekoppeld is aan een bepaalde afdeling.</span><span class="sxs-lookup"><span data-stu-id="5f918-380">Consider hello example of a large multi-national corporation with tens of thousands of departments and employee entities where every department has many employees and each employee as associated with one specific department.</span></span> <span data-ttu-id="5f918-381">Een aanpak is toostore afzonderlijke afdeling en entiteiten van de werknemer zoals deze:</span><span class="sxs-lookup"><span data-stu-id="5f918-381">One approach is toostore separate department and employee entities such as these:</span></span>  

![][1]

<span data-ttu-id="5f918-382">Dit voorbeeld ziet u een impliciete een-op-veel-relatie tussen Hallo typen op basis van Hallo **PartitionKey** waarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-382">This example shows an implicit one-to-many relationship between hello types based on hello **PartitionKey** value.</span></span> <span data-ttu-id="5f918-383">Elke afdeling kan veel werknemers hebben.</span><span class="sxs-lookup"><span data-stu-id="5f918-383">Each department can have many employees.</span></span>  

<span data-ttu-id="5f918-384">In dit voorbeeld toont ook een entiteit afdeling en de gerelateerde werknemer entiteiten in dezelfde partitie Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-384">This example also shows a department entity and its related employee entities in hello same partition.</span></span> <span data-ttu-id="5f918-385">U kunt verschillende partities toouse, tabellen of zelfs storage-accounts voor de verschillende Entiteitstypen Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-385">You could choose toouse different partitions, tables, or even storage accounts for hello different entity types.</span></span>  

<span data-ttu-id="5f918-386">Een alternatieve methode is toodenormalize zoals weergegeven in het volgende voorbeeld Hallo uw gegevens en store enige werknemer entiteiten met gedenormaliseerd afdelingsgegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-386">An alternative approach is toodenormalize your data and store only employee entities with denormalized department data as shown in hello following example.</span></span> <span data-ttu-id="5f918-387">In dit specifieke scenario gedenormaliseerd hiervan mogelijk niet Hallo aanbevolen als u een vereiste toobe kunnen toochange Hallo details van een afdelingsmanager hebt omdat toodo dit u tooupdate moet elke werknemer in het Hallo-afdeling.</span><span class="sxs-lookup"><span data-stu-id="5f918-387">In this particular scenario, this denormalized approach may not be hello best if you have a requirement toobe able toochange hello details of a department manager because toodo this you need tooupdate every employee in hello department.</span></span>  

![][2]

<span data-ttu-id="5f918-388">Zie voor meer informatie, Hallo [Denormalization patroon](#denormalization-pattern) verderop in deze handleiding.</span><span class="sxs-lookup"><span data-stu-id="5f918-388">For more information, see hello [Denormalization pattern](#denormalization-pattern) later in this guide.</span></span>  

<span data-ttu-id="5f918-389">Hallo volgende tabel ziet u Hallo-voor- en nadelen van elke Hallo benaderingen die hierboven worden beschreven voor het opslaan van de werknemer en afdeling entiteiten met een-op-veel-relatie een.</span><span class="sxs-lookup"><span data-stu-id="5f918-389">hello following table summarizes hello pros and cons of each of hello approaches outlined above for storing employee and department entities that have a one-to-many relationship.</span></span> <span data-ttu-id="5f918-390">U moet ook overwegen hoe vaak verwacht u dat tooperform verschillende bewerkingen: acceptabele toohave een ontwerp waarin een dure bewerking als die voor deze bewerking alleen zelden gebeurt kan zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-390">You should also consider how often you expect tooperform various operations: it may be acceptable toohave a design that includes an expensive operation if that operation only happens infrequently.</span></span>  

<table>
<tr>
<th><span data-ttu-id="5f918-391">Benadering</span><span class="sxs-lookup"><span data-stu-id="5f918-391">Approach</span></span></th>
<th><span data-ttu-id="5f918-392">Professionals</span><span class="sxs-lookup"><span data-stu-id="5f918-392">Pros</span></span></th>
<th><span data-ttu-id="5f918-393">Nadelen</span><span class="sxs-lookup"><span data-stu-id="5f918-393">Cons</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-394">Afzonderlijke Entiteitstypen, dezelfde partitie, dezelfde tabel</span><span class="sxs-lookup"><span data-stu-id="5f918-394">Separate entity types, same partition, same table</span></span></td>
<td>
<ul>
<li><span data-ttu-id="5f918-395">U kunt een entiteit afdeling bijwerken met één bewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-395">You can update a department entity with a single operation.</span></span></li>
<li><span data-ttu-id="5f918-396">U kunt een EGT toomaintain consistentie als er een vereiste toomodify een entiteit afdeling wanneer u update, invoegen, verwijderen een werknemer entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-396">You can use an EGT toomaintain consistency if you have a requirement toomodify a department entity whenever you update/insert/delete an employee entity.</span></span> <span data-ttu-id="5f918-397">Bijvoorbeeld als u een aantal afdelingen medewerkers voor elke afdeling onderhouden.</span><span class="sxs-lookup"><span data-stu-id="5f918-397">For example if you maintain a departmental employee count for each department.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="5f918-398">Mogelijk moet u tooretrieve een werknemer en een entiteit van de afdeling voor sommige activiteiten van de client.</span><span class="sxs-lookup"><span data-stu-id="5f918-398">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="5f918-399">Opslagbewerkingen gebeuren in Hallo dezelfde partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-399">Storage operations happen in hello same partition.</span></span> <span data-ttu-id="5f918-400">Hoge transactie volumes, kan dit resulteren in een hotspot.</span><span class="sxs-lookup"><span data-stu-id="5f918-400">At high transaction volumes, this may result in a hotspot.</span></span></li>
<li><span data-ttu-id="5f918-401">U kunt het nieuwe afdeling van een werknemer tooa met behulp van een EGT niet verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5f918-401">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="5f918-402">Afzonderlijke Entiteitstypen, verschillende partities of tabellen of storage-accounts</span><span class="sxs-lookup"><span data-stu-id="5f918-402">Separate entity types, different partitions or tables or storage accounts</span></span></td>
<td>
<ul>
<li><span data-ttu-id="5f918-403">U kunt een entiteit van de afdeling of de werknemer entiteit bijwerken met één bewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-403">You can update a department entity or employee entity with a single operation.</span></span></li>
<li><span data-ttu-id="5f918-404">Op hoog transactie volumes, kunnen hierdoor verspreiding Hallo load meerdere meer partities.</span><span class="sxs-lookup"><span data-stu-id="5f918-404">At high transaction volumes, this may help spread hello load across more partitions.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="5f918-405">Mogelijk moet u tooretrieve een werknemer en een entiteit van de afdeling voor sommige activiteiten van de client.</span><span class="sxs-lookup"><span data-stu-id="5f918-405">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="5f918-406">U kunt EGTs toomaintain consistentie niet gebruiken wanneer u update, invoegen, verwijderen van een werknemer en update een afdeling.</span><span class="sxs-lookup"><span data-stu-id="5f918-406">You cannot use EGTs toomaintain consistency when you update/insert/delete an employee and update a department.</span></span> <span data-ttu-id="5f918-407">Een aantal werknemers in een entiteit afdeling bijvoorbeeld wordt bijgewerkt.</span><span class="sxs-lookup"><span data-stu-id="5f918-407">For example, updating an employee count in a department entity.</span></span></li>
<li><span data-ttu-id="5f918-408">U kunt het nieuwe afdeling van een werknemer tooa met behulp van een EGT niet verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5f918-408">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="5f918-409">Denormalize in één entiteitstype</span><span class="sxs-lookup"><span data-stu-id="5f918-409">Denormalize into single entity type</span></span></td>
<td>
<ul>
<li><span data-ttu-id="5f918-410">U kunt alle met één aanvraag benodigde Hallo-gegevens ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-410">You can retrieve all hello information you need with a single request.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="5f918-411">Consistentie van dure toomaintain kan zijn als u tooupdate afdeling informatie (Hiermee vereist u tooupdate alle Hallo werknemers in een afdeling).</span><span class="sxs-lookup"><span data-stu-id="5f918-411">It may be expensive toomaintain consistency if you need tooupdate department information (this would require you tooupdate all hello employees in a department).</span></span></li>
</ul>
</td>
</tr>
</table>

<span data-ttu-id="5f918-412">Hoe u kiezen tussen deze opties en welke van Hallo-professionals en nadelen van de meest significante zijn afhankelijk van uw specifieke toepassingsscenario's.</span><span class="sxs-lookup"><span data-stu-id="5f918-412">How you choose between these options, and which of hello pros and cons are most significant, depends on your specific application scenarios.</span></span> <span data-ttu-id="5f918-413">Bijvoorbeeld, hoe vaak u Wijzig afdeling entiteiten; moeten alle werknemers-query's meer afdelingen informatie Hallo; hoe dicht weet u toohello limieten voor schaalbaarheid van de partities of uw storage-account?</span><span class="sxs-lookup"><span data-stu-id="5f918-413">For example, how often do you modify department entities; do all your employee queries need hello additional departmental information; how close are you toohello scalability limits on your partitions or your storage account?</span></span>  

### <a name="one-to-one-relationships"></a><span data-ttu-id="5f918-414">-Op-een-relaties</span><span class="sxs-lookup"><span data-stu-id="5f918-414">One-to-one relationships</span></span>
<span data-ttu-id="5f918-415">Domeinmodellen kunnen-op-een-relaties tussen entiteiten bevatten.</span><span class="sxs-lookup"><span data-stu-id="5f918-415">Domain models may include one-to-one relationships between entities.</span></span> <span data-ttu-id="5f918-416">Als u een-op-een relatie in service tabel Hallo tooimplement moet, moet u ook kiezen hoe toolink twee gerelateerde entiteiten Hallo wanneer u tooretrieve ze beide nodig.</span><span class="sxs-lookup"><span data-stu-id="5f918-416">If you need tooimplement a one-to-one relationship in hello Table service, you must also choose how toolink hello two related entities when you need tooretrieve them both.</span></span> <span data-ttu-id="5f918-417">Deze koppeling kan impliciete, op basis van een conventie in Hallo sleutelwaarden of expliciete worden door het opslaan van een koppeling in de vorm van Hallo **PartitionKey** en **RowKey** waarden in elke entiteit tooits gerelateerde entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-417">This link can be either implicit, based on a convention in hello key values, or explicit by storing a link in hello form of **PartitionKey** and **RowKey** values in each entity tooits related entity.</span></span> <span data-ttu-id="5f918-418">Gerelateerde entiteiten voor een beschrijving van de of Hallo moeten worden opgeslagen in dezelfde partitie Hallo, Zie de sectie Hallo [een-op-veel relaties](#one-to-many-relationships).</span><span class="sxs-lookup"><span data-stu-id="5f918-418">For a discussion of whether you should store hello related entities in hello same partition, see hello section [One-to-many relationships](#one-to-many-relationships).</span></span>  

<span data-ttu-id="5f918-419">Houd er rekening mee dat er zijn ook overwegingen bij de implementatie die, u tooimplement-op-een-relaties in de tabelservice Hallo leiden kunnen:</span><span class="sxs-lookup"><span data-stu-id="5f918-419">Note that there are also implementation considerations that might lead you tooimplement one-to-one relationships in hello Table service:</span></span>  

* <span data-ttu-id="5f918-420">Verwerking van grote entiteiten (Zie voor meer informatie [grote entiteiten patroon](#large-entities-pattern)).</span><span class="sxs-lookup"><span data-stu-id="5f918-420">Handling large entities (for more information, see [Large Entities Pattern](#large-entities-pattern)).</span></span>  
* <span data-ttu-id="5f918-421">Toegangsbeheer implementeren (Zie voor meer informatie [beheren van toegang met Shared Access Signatures](#controlling-access-with-shared-access-signatures)).</span><span class="sxs-lookup"><span data-stu-id="5f918-421">Implementing access controls (for more information, see [Controlling access with Shared Access Signatures](#controlling-access-with-shared-access-signatures)).</span></span>  

### <a name="join-in-hello-client"></a><span data-ttu-id="5f918-422">Deelnemen aan Hallo-client</span><span class="sxs-lookup"><span data-stu-id="5f918-422">Join in hello client</span></span>
<span data-ttu-id="5f918-423">Hoewel er manieren toomodel relaties in Hallo tabelservice zijn, moet u niet vergeet dat Hallo twee belangrijkste redenen voor het gebruik van de tabelservice Hallo schaalbaarheid en prestaties zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-423">Although there are ways toomodel relationships in hello Table service, you should not forget that hello two prime reasons for using hello Table service are scalability and performance.</span></span> <span data-ttu-id="5f918-424">Als u dat u veel-relaties die een bedreiging Hallo prestaties en schaalbaarheid van uw oplossing vormen zijn modellering vindt, vraagt u uzelf dat als het benodigde toobuild Hallo alle relaties tussen gegevens in uw tabelontwerp voor een.</span><span class="sxs-lookup"><span data-stu-id="5f918-424">If you find you are modelling many relationships that compromise hello performance and scalability of your solution, you should ask yourself if it is necessary toobuild all hello data relationships into your table design.</span></span> <span data-ttu-id="5f918-425">U kunt kunnen toosimplify Hallo ontwerp worden en verbeteren Hallo schaalbaarheid en prestaties van uw oplossing als u toestaat dat de clienttoepassing alle benodigde joins uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-425">You may be able toosimplify hello design and improve hello scalability and performance of your solution if you let your client application perform any necessary joins.</span></span>  

<span data-ttu-id="5f918-426">Bijvoorbeeld, hebt u een kleine tabellen die gegevens bevatten die niet vaak veranderen, kunt vervolgens u deze gegevens eenmaal ophalen en cache te plaatsen op Hallo-client.</span><span class="sxs-lookup"><span data-stu-id="5f918-426">For example, if you have small tables that contain data that does not change very often, then you can retrieve this data once and cache it on hello client.</span></span> <span data-ttu-id="5f918-427">Dit kan voorkomen herhaalde interactie tooretrieve Hallo dezelfde gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-427">This can avoid repeated roundtrips tooretrieve hello same data.</span></span> <span data-ttu-id="5f918-428">In de voorbeelden Hallo die we in deze handleiding hebt bekeken, is hello reeks afdelingen in een kleine organisatie waarschijnlijk toobe klein en wijzig zelden waardoor het een goede kandidaat voor de gegevens eenmaal in client-toepassing kan worden gedownload en cache als opzoeken van gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-428">In hello examples we have looked at in this guide, hello set of departments in a small organization is likely toobe small and change infrequently making it a good candidate for data that client application can download once and cache as look up data.</span></span>  

### <a name="inheritance-relationships"></a><span data-ttu-id="5f918-429">Relaties voor overname</span><span class="sxs-lookup"><span data-stu-id="5f918-429">Inheritance relationships</span></span>
<span data-ttu-id="5f918-430">Als u de clienttoepassing gebruikmaakt van een set klassen die deel van een relatie voor overname toorepresent bedrijfsentiteiten uitmaken, kunt u eenvoudig deze entiteiten in Hallo tabelservice bewaard.</span><span class="sxs-lookup"><span data-stu-id="5f918-430">If your client application uses a set of classes that form part of an inheritance relationship toorepresent business entities, you can easily persist those entities in hello Table service.</span></span> <span data-ttu-id="5f918-431">Bijvoorbeeld, u wellicht Hallo set klassen gedefinieerd in uw clienttoepassing te volgen waarbij **persoon** is een abstracte klasse.</span><span class="sxs-lookup"><span data-stu-id="5f918-431">For example, you might have hello following set of classes defined in your client application where **Person** is an abstract class.</span></span>

![][3]

<span data-ttu-id="5f918-432">U kunt deze persistent maken exemplaren van Hallo twee concrete klassen in Hallo service van de tabel met één personentabel met entiteiten in die zijn opgemaakt als volgt:</span><span class="sxs-lookup"><span data-stu-id="5f918-432">You can persist instances of hello two concrete classes in hello Table service using a single Person table using entities in that look like this:</span></span>  

![][4]

<span data-ttu-id="5f918-433">Zie voor meer informatie over het werken met meerdere Entiteitstypen in dezelfde tabel in de clientcode Hallo Hallo sectie [werken met heterogene Entiteitstypen](#working-with-heterogeneous-entity-types) verderop in deze handleiding.</span><span class="sxs-lookup"><span data-stu-id="5f918-433">For more information about working with multiple entity types in hello same table in client code, see hello section [Working with heterogeneous entity types](#working-with-heterogeneous-entity-types) later in this guide.</span></span> <span data-ttu-id="5f918-434">Dit vindt u voorbeelden van hoe toorecognize Hallo entiteitstype in clientcode.</span><span class="sxs-lookup"><span data-stu-id="5f918-434">This provides examples of how toorecognize hello entity type in client code.</span></span>  

## <a name="table-design-patterns"></a><span data-ttu-id="5f918-435">Ontwerppatronen voor tabel</span><span class="sxs-lookup"><span data-stu-id="5f918-435">Table Design Patterns</span></span>
<span data-ttu-id="5f918-436">U hebt een aantal uitgebreide informatie over hoe toooptimize uw tabel ontwerpen voor beide entiteitsgegevens op te halen met behulp van query's en voor het invoegen, bijwerken en verwijderen van entiteitsgegevens gezien in de vorige secties.</span><span class="sxs-lookup"><span data-stu-id="5f918-436">In previous sections, you have seen some detailed discussions about how toooptimize your table design for both retrieving entity data using queries and for inserting, updating, and deleting entity data.</span></span> <span data-ttu-id="5f918-437">Deze sectie beschrijft een aantal patronen geschikt voor gebruik met oplossingen voor tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-437">This section describes some patterns appropriate for use with Table service solutions.</span></span> <span data-ttu-id="5f918-438">Bovendien ziet u hoe u bepaalde Hallo problemen en verschillen die eerder in deze handleiding wordt geactiveerd op vrijwel kunt oplossen.</span><span class="sxs-lookup"><span data-stu-id="5f918-438">In addition, you will see how you can practically address some of hello issues and trade-offs raised previously in this guide.</span></span> <span data-ttu-id="5f918-439">Hallo volgende diagram geeft een overzicht van Hallo relaties tussen de verschillende patronen Hallo:</span><span class="sxs-lookup"><span data-stu-id="5f918-439">hello following diagram summarizes hello relationships between hello different patterns:</span></span>  

![][5]

<span data-ttu-id="5f918-440">Hallo patroon kaart hierboven licht sommige relaties tussen patronen (blauw) en anti patronen (oranje) die in deze handleiding worden beschreven.</span><span class="sxs-lookup"><span data-stu-id="5f918-440">hello pattern map above highlights some relationships between patterns (blue) and anti-patterns (orange) that are documented in this guide.</span></span> <span data-ttu-id="5f918-441">Er zijn natuurlijk veel andere patronen die moeten overwogen worden.</span><span class="sxs-lookup"><span data-stu-id="5f918-441">There are of course many other patterns that are worth considering.</span></span> <span data-ttu-id="5f918-442">Een van de Hallo belangrijke scenario's voor tabel-Service is bijvoorbeeld toouse hello [gematerialiseerd weergave patroon](https://msdn.microsoft.com/library/azure/dn589782.aspx) van Hallo [opdracht Query verantwoordelijkheid scheiding (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) patroon.</span><span class="sxs-lookup"><span data-stu-id="5f918-442">For example, one of hello key scenarios for Table Service is toouse hello [Materialized View Pattern](https://msdn.microsoft.com/library/azure/dn589782.aspx) from hello [Command Query Responsibility Segregation (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) pattern.</span></span>  

### <a name="intra-partition-secondary-index-pattern"></a><span data-ttu-id="5f918-443">Intra-partitie secundaire index patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-443">Intra-partition secondary index pattern</span></span>
<span data-ttu-id="5f918-444">Opslaan van meerdere exemplaren van elke entiteit met behulp van verschillende **RowKey** waarden (in Hallo dezelfde partitie) tooenable snelle en efficiënte zoekacties en alternatieve sorteren orders met behulp van verschillende **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-444">Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span> <span data-ttu-id="5f918-445">Updates tussen kopieën consistent kunnen worden gehouden met behulp van EGT.</span><span class="sxs-lookup"><span data-stu-id="5f918-445">Updates between copies can be kept consistent using EGT's.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-446">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-446">Context and problem</span></span>
<span data-ttu-id="5f918-447">Hallo tabelservice indexeert automatisch entiteiten met Hallo **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-447">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-448">Hierdoor kan een client toepassing tooretrieve een entiteit efficiënt gebruik maakt van deze waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-448">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="5f918-449">Bijvoorbeeld, met Hallo tabelstructuur hieronder wordt weergegeven, een clienttoepassing kunt gebruiken een punt query tooretrieve een afzonderlijke werknemer entiteit met behulp van de naam van de afdeling Hallo en Hallo werknemer-id (Hallo **PartitionKey** en  **RowKey** waarden).</span><span class="sxs-lookup"><span data-stu-id="5f918-449">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="5f918-450">Een client kan ook gesorteerd op werknemer-id binnen elke afdeling entiteiten ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-450">A client can also retrieve entities sorted by employee id within each department.</span></span>

![][6]

<span data-ttu-id="5f918-451">Als u wilt dat ook toobe kunnen toofind een werknemer entiteit gebaseerd op Hallo-waarde van een andere eigenschap, zoals e-mailadres, moet u een minder efficiënte partitie scan toofind een overeenkomst.</span><span class="sxs-lookup"><span data-stu-id="5f918-451">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="5f918-452">Dit is omdat Hallo tabel-service geen secundaire indexen biedt.</span><span class="sxs-lookup"><span data-stu-id="5f918-452">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="5f918-453">Er is bovendien geen optie toorequest een lijst met werknemers gesorteerd in een andere volgorde dan **RowKey** volgorde.</span><span class="sxs-lookup"><span data-stu-id="5f918-453">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-454">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-454">Solution</span></span>
<span data-ttu-id="5f918-455">toowork rond Hallo gebrek aan secundaire indexen, kunt u meerdere exemplaren van elke entiteit bij elk exemplaar met een andere opslaan **RowKey** waarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-455">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using a different **RowKey** value.</span></span> <span data-ttu-id="5f918-456">Als u een entiteit met Hallo structuren hieronder opslaat, kunt u efficiënt werknemer entiteiten op basis van e-adres of de werknemer-id ophalen. voorvoegsel waarden voor Hallo Hallo **RowKey**, 'empid_' en 'email_' kunt u tooquery voor één werknemer of een bereik van werknemers met behulp van een bereik van e-mailadressen of werknemer-id's.</span><span class="sxs-lookup"><span data-stu-id="5f918-456">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **RowKey**, "empid_" and "email_" enable you tooquery for a single employee or a range of employees by using a range of email addresses or employee ids.</span></span>  

![][7]

<span data-ttu-id="5f918-457">Hallo na twee filtercriteria (één opzoeken op basis van de werknemer-id en een opzoeken op basis van e-mailadres) Geef beide punt query's:</span><span class="sxs-lookup"><span data-stu-id="5f918-457">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="5f918-458">$filter = (PartitionKey eq 'Sales') en (RowKey eq 'empid_000223')</span><span class="sxs-lookup"><span data-stu-id="5f918-458">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'empid_000223')</span></span>  
* <span data-ttu-id="5f918-459">$filter = (PartitionKey eq 'Sales') en (RowKey eq 'email_jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="5f918-459">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'email_jonesj@contoso.com')</span></span>  

<span data-ttu-id="5f918-460">Als u een query voor een bereik van de werknemer entiteiten uitvoert, kunt u een bereik gesorteerd in volgorde van de werknemer-id of een bereik in e-mailadres volgorde gesorteerd op basis van een query uitvoert voor entiteiten met het juiste voorvoegsel in Hallo Hallo **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-460">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="5f918-461">toofind alle Hallo werknemers in de afdeling verkoop Hallo met een werknemer-id in Hallo bereik 000100 too000199 gebruiken: $filter = (PartitionKey eq 'Sales') en (RowKey ge 'empid_000100') en (RowKey RP 'empid_000199')</span><span class="sxs-lookup"><span data-stu-id="5f918-461">toofind all hello employees in hello Sales department with an employee id in hello range 000100 too000199 use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000100') and (RowKey le 'empid_000199')</span></span>  
* <span data-ttu-id="5f918-462">alle werknemers in de afdeling verkoop Hallo Hallo met een e-mailadres begint met de Hallo toofind letter "a" gebruik: $filter = (PartitionKey eq 'Sales') en (RowKey ge 'email_a') en (RowKey lt 'email_b')</span><span class="sxs-lookup"><span data-stu-id="5f918-462">toofind all hello employees in hello Sales department with an email address starting with hello letter 'a' use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'email_a') and (RowKey lt 'email_b')</span></span>  
  
  <span data-ttu-id="5f918-463">Houd er rekening mee dat Hallo filtersyntaxis gebruikt in de bovenstaande voorbeelden van Hallo uit Hallo tabelservice REST API, Zie voor meer informatie [Query entiteiten](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-463">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-464">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-464">Issues and considerations</span></span>
<span data-ttu-id="5f918-465">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-465">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-466">Table storage is relatief goedkope toouse Hallo kosten overhead voor het opslaan van dubbele gegevens mag geen groot belang.</span><span class="sxs-lookup"><span data-stu-id="5f918-466">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="5f918-467">U moet echter altijd geëvalueerd Hallo kosten van het ontwerp op basis van de vereisten van uw verwachting benodigde opslag en alleen toevoegen dubbele entiteiten toosupport Hallo query's die de clienttoepassing wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-467">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="5f918-468">Omdat Hallo secundaire index entiteiten worden opgeslagen in dezelfde partitie als de oorspronkelijke entiteiten Hallo hello, moet u ervoor zorgen dat u de schaalbaarheidsdoelen Hallo voor een afzonderlijke partitie niet overschrijden.</span><span class="sxs-lookup"><span data-stu-id="5f918-468">Because hello secondary index entities are stored in hello same partition as hello original entities, you should ensure that you do not exceed hello scalability targets for an individual partition.</span></span>  
* <span data-ttu-id="5f918-469">U kunt uw dubbele entiteiten consistent zijn met elkaar houden met behulp van EGTs tooupdate Hallo twee exemplaren van de entiteit Hallo moment.</span><span class="sxs-lookup"><span data-stu-id="5f918-469">You can keep your duplicate entities consistent with each other by using EGTs tooupdate hello two copies of hello entity atomically.</span></span> <span data-ttu-id="5f918-470">Dit betekent dat u alle exemplaren van een entiteit moet opslaan in Hallo dezelfde partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-470">This implies that you should store all copies of an entity in hello same partition.</span></span> <span data-ttu-id="5f918-471">Zie voor meer informatie, Hallo sectie [entiteitstransacties met behulp van](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="5f918-471">For more information, see hello section [Using Entity Group Transactions](#entity-group-transactions).</span></span>  
* <span data-ttu-id="5f918-472">waarde die wordt gebruikt voor Hallo Hallo **RowKey** moet uniek zijn voor elke entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-472">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="5f918-473">Overweeg het gebruik van de samengestelde sleutel komt.</span><span class="sxs-lookup"><span data-stu-id="5f918-473">Consider using compound key values.</span></span>  
* <span data-ttu-id="5f918-474">Numerieke waarden Hallo opvulling **RowKey** (bijvoorbeeld Hallo werknemer-id 000223), kunt sorteren en filteren op basis van hoofdletters en de ondergrenzen corrigeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-474">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="5f918-475">Hoeft u niet per se tooduplicate alle Hallo-eigenschappen van uw entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-475">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="5f918-476">Bijvoorbeeld, als hello query's die e-lookup Hallo entiteiten met Hallo adres uit Hallo **RowKey** nooit moet de leeftijd van de werknemer hello, deze entiteiten kunnen Hallo structuur te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-476">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>

![][8]

* <span data-ttu-id="5f918-477">Het is doorgaans beter toostore dubbele gegevens en ervoor te zorgen dat u alle Hallo-gegevens die u nodig hebt met één query kunt ophalen, dan toouse één query toolocate een entiteit en een andere toolookup Hallo gegevens vereist.</span><span class="sxs-lookup"><span data-stu-id="5f918-477">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query, than toouse one query toolocate an entity and another toolookup hello required data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-478">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-478">When toouse this pattern</span></span>
<span data-ttu-id="5f918-479">Dit patroon gebruiken wanneer u de clienttoepassing moet tooretrieve entiteiten met een aantal verschillende sleutels wanneer de client tooretrieve entiteiten in verschillende sorteervolgorde moet en waar u elke entiteit met een aantal unieke waarden kunt identificeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-479">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="5f918-480">U moet echter zeker limieten voor schaalbaarheid van Hallo partitie niet te overschrijden wanneer u de entiteit zoekacties met behulp van verschillende Hallo uitvoert **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-480">However, you should be sure that you do not exceed hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-481">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-481">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-482">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-482">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-483">Secundaire tussen partitioneren van index patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-483">Inter-partition secondary index pattern</span></span>](#inter-partition-secondary-index-pattern)
* [<span data-ttu-id="5f918-484">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-484">Compound key pattern</span></span>](#compound-key-pattern)
* [<span data-ttu-id="5f918-485">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-485">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="5f918-486">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-486">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="inter-partition-secondary-index-pattern"></a><span data-ttu-id="5f918-487">Secundaire tussen partitioneren van index patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-487">Inter-partition secondary index pattern</span></span>
<span data-ttu-id="5f918-488">Opslaan van meerdere exemplaren van elke entiteit met behulp van verschillende **RowKey** waarden in afzonderlijke partities of in afzonderlijke tabellen tooenable snelle en efficiënte zoekacties en alternatieve sorteervolgorde met behulp van verschillende **RowKey**waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-488">Store multiple copies of each entity using different **RowKey** values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-489">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-489">Context and problem</span></span>
<span data-ttu-id="5f918-490">Hallo tabelservice indexeert automatisch entiteiten met Hallo **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-490">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-491">Hierdoor kan een client toepassing tooretrieve een entiteit efficiënt gebruik maakt van deze waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-491">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="5f918-492">Bijvoorbeeld, met Hallo tabelstructuur hieronder wordt weergegeven, een clienttoepassing kunt gebruiken een punt query tooretrieve een afzonderlijke werknemer entiteit met behulp van de naam van de afdeling Hallo en Hallo werknemer-id (Hallo **PartitionKey** en  **RowKey** waarden).</span><span class="sxs-lookup"><span data-stu-id="5f918-492">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="5f918-493">Een client kan ook gesorteerd op werknemer-id binnen elke afdeling entiteiten ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-493">A client can also retrieve entities sorted by employee id within each department.</span></span>  

![][9]

<span data-ttu-id="5f918-494">Als u wilt dat ook toobe kunnen toofind een werknemer entiteit gebaseerd op Hallo-waarde van een andere eigenschap, zoals e-mailadres, moet u een minder efficiënte partitie scan toofind een overeenkomst.</span><span class="sxs-lookup"><span data-stu-id="5f918-494">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="5f918-495">Dit is omdat Hallo tabel-service geen secundaire indexen biedt.</span><span class="sxs-lookup"><span data-stu-id="5f918-495">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="5f918-496">Er is bovendien geen optie toorequest een lijst met werknemers gesorteerd in een andere volgorde dan **RowKey** volgorde.</span><span class="sxs-lookup"><span data-stu-id="5f918-496">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

<span data-ttu-id="5f918-497">U bent anticiperen op een zeer groot aantal transacties tegen deze entiteiten en toominimize Hallo risico Hallo tabelservice beperking van de client wilt.</span><span class="sxs-lookup"><span data-stu-id="5f918-497">You are anticipating a very high volume of transactions against these entities and want toominimize hello risk of hello Table service throttling your client.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-498">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-498">Solution</span></span>
<span data-ttu-id="5f918-499">toowork rond Hallo gebrek aan secundaire indexen, kunt u meerdere exemplaren van elke entiteit met het gebruik van elk exemplaar andere opslaan **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-499">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using different **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-500">Als u een entiteit met Hallo structuren hieronder opslaat, kunt u efficiënt werknemer entiteiten op basis van e-adres of de werknemer-id ophalen. voorvoegsel waarden voor Hallo Hallo **PartitionKey**, 'empid_' en 'email_', kunt u tooidentify die index die u wilt dat toouse voor een query.</span><span class="sxs-lookup"><span data-stu-id="5f918-500">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **PartitionKey**, "empid_" and "email_" enable you tooidentify which index you want toouse for a query.</span></span>  

![][10]

<span data-ttu-id="5f918-501">Hallo na twee filtercriteria (één opzoeken op basis van de werknemer-id en een opzoeken op basis van e-mailadres) Geef beide punt query's:</span><span class="sxs-lookup"><span data-stu-id="5f918-501">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="5f918-502">$filter = (PartitionKey eq ' empid_Sales') en (RowKey eq '000223')</span><span class="sxs-lookup"><span data-stu-id="5f918-502">$filter=(PartitionKey eq 'empid_Sales') and (RowKey eq '000223')</span></span>
* <span data-ttu-id="5f918-503">$filter = (PartitionKey eq ' email_Sales') en (RowKey eq 'jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="5f918-503">$filter=(PartitionKey eq 'email_Sales') and (RowKey eq 'jonesj@contoso.com')</span></span>  

<span data-ttu-id="5f918-504">Als u een query voor een bereik van de werknemer entiteiten uitvoert, kunt u een bereik gesorteerd in volgorde van de werknemer-id of een bereik in e-mailadres volgorde gesorteerd op basis van een query uitvoert voor entiteiten met het juiste voorvoegsel in Hallo Hallo **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-504">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="5f918-505">alle werknemers in Hallo toofind Hallo verkoopafdeling met een werknemer-id in Hallo bereik **000100** te**000199** in gebruik door werknemers-id volgorde gesorteerd: $filter = (PartitionKey eq ' empid_Sales') en (RowKey ge ' 000100') en (RowKey RP '000199')</span><span class="sxs-lookup"><span data-stu-id="5f918-505">toofind all hello employees in hello Sales department with an employee id in hello range **000100** too**000199** sorted in employee id order use: $filter=(PartitionKey eq 'empid_Sales') and (RowKey ge '000100') and (RowKey le '000199')</span></span>  
* <span data-ttu-id="5f918-506">toofind alle Hallo werknemers in Hallo verkoopafdeling met een e-mailadres dat begint met "a" gesorteerde in e-mailadres volgorde van gebruik: $filter = (PartitionKey eq ' email_Sales') en (RowKey ge "a") en (RowKey lt "b")</span><span class="sxs-lookup"><span data-stu-id="5f918-506">toofind all hello employees in hello Sales department with an email address that starts with 'a' sorted in email address order use: $filter=(PartitionKey eq 'email_Sales') and (RowKey ge 'a') and (RowKey lt 'b')</span></span>  

<span data-ttu-id="5f918-507">Houd er rekening mee dat Hallo filtersyntaxis gebruikt in de bovenstaande voorbeelden van Hallo uit Hallo tabelservice REST API, Zie voor meer informatie [Query entiteiten](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-507">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-508">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-508">Issues and considerations</span></span>
<span data-ttu-id="5f918-509">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-509">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-510">Kunt u uw dubbele entiteiten uiteindelijk consistent is met elkaar via Hallo [uiteindelijk consistent transacties patroon](#eventually-consistent-transactions-pattern) toomaintain Hallo primaire en secundaire index entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-510">You can keep your duplicate entities eventually consistent with each other by using hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain hello primary and secondary index entities.</span></span>  
* <span data-ttu-id="5f918-511">Table storage is relatief goedkope toouse Hallo kosten overhead voor het opslaan van dubbele gegevens mag geen groot belang.</span><span class="sxs-lookup"><span data-stu-id="5f918-511">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="5f918-512">U moet echter altijd geëvalueerd Hallo kosten van het ontwerp op basis van de vereisten van uw verwachting benodigde opslag en alleen toevoegen dubbele entiteiten toosupport Hallo query's die de clienttoepassing wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-512">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="5f918-513">waarde die wordt gebruikt voor Hallo Hallo **RowKey** moet uniek zijn voor elke entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-513">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="5f918-514">Overweeg het gebruik van de samengestelde sleutel komt.</span><span class="sxs-lookup"><span data-stu-id="5f918-514">Consider using compound key values.</span></span>  
* <span data-ttu-id="5f918-515">Numerieke waarden Hallo opvulling **RowKey** (bijvoorbeeld Hallo werknemer-id 000223), kunt sorteren en filteren op basis van hoofdletters en de ondergrenzen corrigeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-515">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="5f918-516">Hoeft u niet per se tooduplicate alle Hallo-eigenschappen van uw entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-516">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="5f918-517">Bijvoorbeeld, als hello query's die e-lookup Hallo entiteiten met Hallo adres uit Hallo **RowKey** nooit moet de leeftijd van de werknemer hello, deze entiteiten kunnen Hallo structuur te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-517">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>
  
  ![][11]
* <span data-ttu-id="5f918-518">Is het doorgaans beter toostore dubbele gegevens en ervoor te zorgen dat u alle Hallo-gegevens die u nodig hebt met één query dan een entiteit met behulp van toouse één query toolocate Hallo secundaire index kunt ophalen en een andere toolookup vereiste gegevens in de primaire index Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-518">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query than toouse one query toolocate an entity using hello secondary index and another toolookup hello required data in hello primary index.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-519">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-519">When toouse this pattern</span></span>
<span data-ttu-id="5f918-520">Dit patroon gebruiken wanneer u de clienttoepassing moet tooretrieve entiteiten met een aantal verschillende sleutels wanneer de client tooretrieve entiteiten in verschillende sorteervolgorde moet en waar u elke entiteit met een aantal unieke waarden kunt identificeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-520">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="5f918-521">Dit patroon gebruiken als u wilt dat tooavoid Hallo partitie schaalbaarheidslimieten van meer dan wanneer u de entiteit zoekacties met behulp van verschillende Hallo uitvoert **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-521">Use this pattern when you want tooavoid exceeding hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-522">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-522">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-523">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-523">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-524">Uiteindelijk consistent transacties patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-524">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="5f918-525">Intra-partitie secundaire index patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-525">Intra-partition secondary index pattern</span></span>](#intra-partition-secondary-index-pattern)  
* [<span data-ttu-id="5f918-526">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-526">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="5f918-527">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-527">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="5f918-528">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-528">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="eventually-consistent-transactions-pattern"></a><span data-ttu-id="5f918-529">Uiteindelijk consistent transacties patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-529">Eventually consistent transactions pattern</span></span>
<span data-ttu-id="5f918-530">Uiteindelijk consistent gedrag over grenzen van partities of opslag system grenzen inschakelen met behulp van Azure wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="5f918-530">Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-531">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-531">Context and problem</span></span>
<span data-ttu-id="5f918-532">EGTs inschakelen atomische transacties tussen meerdere entiteiten die Hallo delen dezelfde partitiesleutel.</span><span class="sxs-lookup"><span data-stu-id="5f918-532">EGTs enable atomic transactions across multiple entities that share hello same partition key.</span></span> <span data-ttu-id="5f918-533">Voor betere prestaties en schaalbaarheid u besluiten toostore entiteiten met vereisten voor consistentie in afzonderlijke partities of in een afzonderlijke opslagsysteem: in een dergelijk scenario u EGTs toomaintain consistentie niet gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-533">For performance and scalability reasons, you might decide toostore entities that have consistency requirements in separate partitions or in a separate storage system: in such a scenario, you cannot use EGTs toomaintain consistency.</span></span> <span data-ttu-id="5f918-534">Stel, hebt u een vereiste toomaintain uiteindelijke consistentie tussen:</span><span class="sxs-lookup"><span data-stu-id="5f918-534">For example, you might have a requirement toomaintain eventual consistency between:</span></span>  

* <span data-ttu-id="5f918-535">Entiteiten die zijn opgeslagen in twee verschillende partities in dezelfde tabel in verschillende tabellen in verschillende opslagaccounts Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-535">Entities stored in two different partitions in hello same table, in different tables, in in different storage accounts.</span></span>  
* <span data-ttu-id="5f918-536">Een entiteit die zijn opgeslagen in Hallo tabel-service en een blob in Hallo opgeslagen Blob-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-536">An entity stored in hello Table service and a blob stored in hello Blob service.</span></span>  
* <span data-ttu-id="5f918-537">Een entiteit in de tabelservice hello en een bestand opgeslagen in een bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="5f918-537">An entity stored in hello Table service and a file in a file system.</span></span>  
* <span data-ttu-id="5f918-538">Een entiteit opslaan in Hallo tabelservice nog geïndexeerd met hello Azure Search-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-538">An entity store in hello Table service yet indexed using hello Azure Search service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-539">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-539">Solution</span></span>
<span data-ttu-id="5f918-540">U kunt een oplossing die zorgt voor uiteindelijke consistentie tussen twee of meer partities of opslagsystemen implementeren met behulp van Azure wachtrijen.</span><span class="sxs-lookup"><span data-stu-id="5f918-540">By using Azure queues, you can implement a solution that delivers eventual consistency across two or more partitions or storage systems.</span></span>
<span data-ttu-id="5f918-541">tooillustrate dit benadert, wordt ervan uitgegaan dat u hebt een vereiste toobe kunnen tooarchive oude werknemer entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-541">tooillustrate this approach, assume you have a requirement toobe able tooarchive old employee entities.</span></span> <span data-ttu-id="5f918-542">Oude werknemer entiteiten zelden worden opgevraagd en van alle activiteiten die betrekking op de huidige werknemers hebben moeten worden uitgesloten.</span><span class="sxs-lookup"><span data-stu-id="5f918-542">Old employee entities are rarely queried and should be excluded from any activities that deal with current employees.</span></span> <span data-ttu-id="5f918-543">tooimplement deze vereiste voor het opslaan van de actieve werknemers in Hallo **huidige** tabel en oude werknemers in Hallo **archief** tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-543">tooimplement this requirement you store active employees in hello **Current** table and old employees in hello **Archive** table.</span></span> <span data-ttu-id="5f918-544">Een werknemer wilt archiveren, moet u toodelete Hallo entiteit van de Hallo **huidige** tabel en voeg Hallo entiteit toohello **archief** tabel, maar niet gebruiken een tooperform EGT deze twee bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-544">Archiving an employee requires you toodelete hello entity from hello **Current** table and add hello entity toohello **Archive** table, but you cannot use an EGT tooperform these two operations.</span></span> <span data-ttu-id="5f918-545">tooavoid hello risico dat een fout zorgt ervoor een entiteit tooappear in beide of geen van beide tabellen dat, Hallo archiveringsbewerking moet uiteindelijk consistent zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-545">tooavoid hello risk that a failure causes an entity tooappear in both or neither tables, hello archive operation must be eventually consistent.</span></span> <span data-ttu-id="5f918-546">Hallo volgende reeksdiagram geeft een overzicht van Hallo stappen in deze bewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-546">hello following sequence diagram outlines hello steps in this operation.</span></span> <span data-ttu-id="5f918-547">Meer details is opgegeven voor de uitzondering paden in Hallo tekst na.</span><span class="sxs-lookup"><span data-stu-id="5f918-547">More detail is provided for exception paths in hello text following.</span></span>  

![][12]

<span data-ttu-id="5f918-548">Een client initieert Hallo archiveringsbewerking door het plaatsen van een bericht op een Azure-wachtrij in dit voorbeeld tooarchive werknemer #456.</span><span class="sxs-lookup"><span data-stu-id="5f918-548">A client initiates hello archive operation by placing a message on an Azure queue, in this example tooarchive employee #456.</span></span> <span data-ttu-id="5f918-549">Een werkrol worden opgevraagd Hallo wachtrij voor nieuwe berichten; Wanneer er een is gevonden, wordt het Hallo-bericht gelezen en wordt een verborgen kopie op Hallo wachtrij.</span><span class="sxs-lookup"><span data-stu-id="5f918-549">A worker role polls hello queue for new messages; when it finds one, it reads hello message and leaves a hidden copy on hello queue.</span></span> <span data-ttu-id="5f918-550">een kopie van de entiteit Hallo Hallo werkrol vervolgens haalt uit Hallo **huidige** tabel, voegt u een kopie in Hallo **archief** tabel en verwijderingen Hallo oorspronkelijke van Hallo **huidige**tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-550">hello worker role next fetches a copy of hello entity from hello **Current** table, inserts a copy in hello **Archive** table, and then deletes hello original from hello **Current** table.</span></span> <span data-ttu-id="5f918-551">Ten slotte, als er geen fouten uit de vorige stappen Hallo zijn, verwijdert Hallo werkrol verborgen het Hallo-bericht uit Hallo wachtrij.</span><span class="sxs-lookup"><span data-stu-id="5f918-551">Finally, if there were no errors from hello previous steps, hello worker role deletes hello hidden message from hello queue.</span></span>  

<span data-ttu-id="5f918-552">Stap 4 wordt in dit voorbeeld Hallo werknemer ingevoegd in Hallo **archief** tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-552">In this example, step 4 inserts hello employee into hello **Archive** table.</span></span> <span data-ttu-id="5f918-553">Het kan Hallo werknemer tooa blob in Hallo Blob-service of een bestand toevoegen in een bestandssysteem.</span><span class="sxs-lookup"><span data-stu-id="5f918-553">It could add hello employee tooa blob in hello Blob service or a file in a file system.</span></span>  

#### <a name="recovering-from-failures"></a><span data-ttu-id="5f918-554">Herstellen van fouten</span><span class="sxs-lookup"><span data-stu-id="5f918-554">Recovering from failures</span></span>
<span data-ttu-id="5f918-555">Het is belangrijk dat bewerkingen in stappen Hallo **4** en **5** moet *idempotent* voor het geval de werkrol hello toorestart Hallo archiveringsbewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-555">It is important that hello operations in steps **4** and **5** must be *idempotent* in case hello worker role needs toorestart hello archive operation.</span></span> <span data-ttu-id="5f918-556">Als u de tabelservice Hallo voor stap **4** moet u een bewerking "invoegen of vervangen"; voor de stap **5** moet u een ' verwijderen als bestaat ' bewerking in Hallo-clientbibliotheek die u gebruikt.</span><span class="sxs-lookup"><span data-stu-id="5f918-556">If you are using hello Table service, for step **4** you should use an "insert or replace" operation; for step **5** you should use a "delete if exists" operation in hello client library you are using.</span></span> <span data-ttu-id="5f918-557">Als u een andere opslagsysteem gebruikt, moet u een geschikte idempotent-bewerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-557">If you are using another storage system, you must use an appropriate idempotent operation.</span></span>  

<span data-ttu-id="5f918-558">Als de werkrol Hallo nooit stap voltooit **6**, vervolgens nadat er een time-out voor het Hallo-bericht opnieuw wordt weergegeven in de wachtrij Hallo klaar te maken voor Hallo worker-rol tootry tooreprocess deze.</span><span class="sxs-lookup"><span data-stu-id="5f918-558">If hello worker role never completes step **6**, then after a timeout hello message reappears on hello queue ready for hello worker role tootry tooreprocess it.</span></span> <span data-ttu-id="5f918-559">Hallo-werkrol kunt controleren hoe vaak een bericht op Hallo wachtrij is gelezen en, indien nodig, is een 'poison'-bericht voor onderzoek door ze tooa vlag wachtrij scheiden.</span><span class="sxs-lookup"><span data-stu-id="5f918-559">hello worker role can check how many times a message on hello queue has been read and, if necessary, flag it is a "poison" message for investigation by sending it tooa separate queue.</span></span> <span data-ttu-id="5f918-560">Voor meer informatie over het lezen van berichten in wachtrij plaatsen en het controleren van Hallo in wachtrij count, Zie [berichten ophalen](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-560">For more information about reading queue messages and checking hello dequeue count, see [Get Messages](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span></span>  

<span data-ttu-id="5f918-561">Er zijn fouten van Hallo Table en Queue-services zijn tijdelijke fouten en uw clienttoepassing geschikte opnieuw logica toohandle bevatten ze.</span><span class="sxs-lookup"><span data-stu-id="5f918-561">Some errors from hello Table and Queue services are transient errors, and your client application should include suitable retry logic toohandle them.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-562">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-562">Issues and considerations</span></span>
<span data-ttu-id="5f918-563">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-563">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-564">Deze oplossing biedt geen voor het isoleren van de transactie.</span><span class="sxs-lookup"><span data-stu-id="5f918-564">This solution does not provide for transaction isolation.</span></span> <span data-ttu-id="5f918-565">Een client kan bijvoorbeeld de Hallo lezen **huidige** en **archief** tabellen wanneer de werkrol Hallo werd tussen stappen **4** en **5**, en zien een inconsistente weergave van Hallo-gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-565">For example, a client could read hello **Current** and **Archive** tables when hello worker role was between steps **4** and **5**, and see an inconsistent view of hello data.</span></span> <span data-ttu-id="5f918-566">Houd er rekening mee dat Hallo gegevens zal consistent uiteindelijk.</span><span class="sxs-lookup"><span data-stu-id="5f918-566">Note that hello data will be consistent eventually.</span></span>  
* <span data-ttu-id="5f918-567">U moet ervoor dat de stappen 4 en 5 idempotent in volgorde tooensure uiteindelijke consistentie.</span><span class="sxs-lookup"><span data-stu-id="5f918-567">You must be sure that steps 4 and 5 are idempotent in order tooensure eventual consistency.</span></span>  
* <span data-ttu-id="5f918-568">Hallo-oplossing kunt u met behulp van meerdere wachtrijen en rolinstanties worker schalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-568">You can scale hello solution by using multiple queues and worker role instances.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-569">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-569">When toouse this pattern</span></span>
<span data-ttu-id="5f918-570">Gebruik dit patroon als u wilt tooguarantee uiteindelijke consistentie tussen entiteiten die aanwezig zijn in verschillende partities of tabellen.</span><span class="sxs-lookup"><span data-stu-id="5f918-570">Use this pattern when you want tooguarantee eventual consistency between entities that exist in different partitions or tables.</span></span> <span data-ttu-id="5f918-571">U kunt dit patroon tooensure uiteindelijke consistentie voor bewerkingen Hallo tabelservice als Hallo Blob-service en andere Azure Storage-gegevensbronnen zoals database of Hallo bestandssysteem uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="5f918-571">You can extend this pattern tooensure eventual consistency for operations across hello Table service and hello Blob service and other non-Azure Storage data sources such as database or hello file system.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-572">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-572">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-573">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-573">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-574">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-574">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="5f918-575">Samenvoegen of vervangen</span><span class="sxs-lookup"><span data-stu-id="5f918-575">Merge or replace</span></span>](#merge-or-replace)  

> [!NOTE]
> <span data-ttu-id="5f918-576">Als de isolatie van de transactie belangrijk tooyour oplossing is, moet u opnieuw ontwerpen van uw tooenable tabellen u toouse EGTs.</span><span class="sxs-lookup"><span data-stu-id="5f918-576">If transaction isolation is important tooyour solution, you should consider redesigning your tables tooenable you toouse EGTs.</span></span>  
> 
> 

### <a name="index-entities-pattern"></a><span data-ttu-id="5f918-577">Index entiteiten patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-577">Index Entities Pattern</span></span>
<span data-ttu-id="5f918-578">Onderhouden entiteiten tooenable efficiënt zoekacties in de index die lijsten van entiteiten retourneren.</span><span class="sxs-lookup"><span data-stu-id="5f918-578">Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-579">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-579">Context and problem</span></span>
<span data-ttu-id="5f918-580">Hallo tabelservice indexeert automatisch entiteiten met Hallo **PartitionKey** en **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-580">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-581">Hierdoor kan een client toepassing tooretrieve een entiteit efficiënt gebruik maakt van een punt-query.</span><span class="sxs-lookup"><span data-stu-id="5f918-581">This enables a client application tooretrieve an entity efficiently using a point query.</span></span> <span data-ttu-id="5f918-582">Bijvoorbeeld met behulp van Hallo tabelstructuur hieronder wordt weergegeven, een clienttoepassing kunt efficiënt een afzonderlijke werknemer entiteit ophalen met behulp van de naam van de afdeling Hallo en Hallo werknemer-id (Hallo **PartitionKey** en **RowKey** ).</span><span class="sxs-lookup"><span data-stu-id="5f918-582">For example, using hello table structure shown below, a client application can efficiently retrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey**).</span></span>  

![][13]

<span data-ttu-id="5f918-583">Als u wilt ook toobe kunnen tooretrieve een lijst met entiteiten van de werknemer op basis van Hallo-waarde van een ander niet-unieke eigenschap, zoals hun achternaam, moet u een minder efficiënte partitie toofind komt overeen met scan in plaats van met behulp van een index toolook ze rechtstreeks omhoog.</span><span class="sxs-lookup"><span data-stu-id="5f918-583">If you also want toobe able tooretrieve a list of employee entities based on hello value of another non-unique property, such as their last name, you must use a less efficient partition scan toofind matches rather than using an index toolook them up directly.</span></span> <span data-ttu-id="5f918-584">Dit is omdat Hallo tabel-service geen secundaire indexen biedt.</span><span class="sxs-lookup"><span data-stu-id="5f918-584">This is because hello table service does not provide secondary indexes.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-585">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-585">Solution</span></span>
<span data-ttu-id="5f918-586">tooenable lookup op achternaam met de structuur van de entiteit Hallo hierboven, moet u een lijst met werknemer-id's onderhouden.</span><span class="sxs-lookup"><span data-stu-id="5f918-586">tooenable lookup by last name with hello entity structure shown above, you must maintain lists of employee ids.</span></span> <span data-ttu-id="5f918-587">Als u wilt dat tooretrieve Hallo werknemer entiteiten met een bepaalde achternaam, zoals Peeters, moet u eerst Hallo lijst met werknemer-id vinden voor werknemers met Jones als hun achternaam en vervolgens deze werknemer entiteiten worden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="5f918-587">If you want tooretrieve hello employee entities with a particular last name, such as Jones, you must first locate hello list of employee ids for employees with Jones as their last name, and then retrieve those employee entities.</span></span> <span data-ttu-id="5f918-588">Er zijn drie manieren voor het opslaan van Hallo lijsten met werknemer-id's:</span><span class="sxs-lookup"><span data-stu-id="5f918-588">There are three main options for storing hello lists of employee ids:</span></span>  

* <span data-ttu-id="5f918-589">Blob storage gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-589">Use blob storage.</span></span>  
* <span data-ttu-id="5f918-590">Maak index entiteiten in dezelfde partitie als Hallo werknemer entiteiten Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-590">Create index entities in hello same partition as hello employee entities.</span></span>  
* <span data-ttu-id="5f918-591">Maak index entiteiten in een afzonderlijke partitie of de tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-591">Create index entities in a separate partition or table.</span></span>  

<span data-ttu-id="5f918-592"><u>Optie #1: Gebruik blob storage</u></span><span class="sxs-lookup"><span data-stu-id="5f918-592"><u>Option #1: Use blob storage</u></span></span>  

<span data-ttu-id="5f918-593">Voor de eerste optie hello, u een blob voor elke unieke achternaam en in elke blob-store een lijst maken van Hallo **PartitionKey** (afdeling) en **RowKey** waarden voor werknemers die in dat laatste hebben (werknemer-id) de naam.</span><span class="sxs-lookup"><span data-stu-id="5f918-593">For hello first option, you create a blob for every unique last name, and in each blob store a list of hello **PartitionKey** (department) and **RowKey** (employee id) values for employees that have that last name.</span></span> <span data-ttu-id="5f918-594">Bij het toevoegen of verwijderen van een werknemer moet u ervoor zorgen dat Hallo-inhoud van de relevante Hallo-blob uiteindelijk consistent is met de Hallo werknemer entiteiten is.</span><span class="sxs-lookup"><span data-stu-id="5f918-594">When you add or delete an employee you should ensure that hello content of hello relevant blob is eventually consistent with hello employee entities.</span></span>  

<span data-ttu-id="5f918-595"><u>Optie #2:</u> Create index entiteiten in dezelfde partitie Hallo</span><span class="sxs-lookup"><span data-stu-id="5f918-595"><u>Option #2:</u> Create index entities in hello same partition</span></span>  

<span data-ttu-id="5f918-596">Gebruik voor Hallo tweede optie, index-entiteiten die Hallo volgt gegevens opslaan:</span><span class="sxs-lookup"><span data-stu-id="5f918-596">For hello second option, use index entities that store hello following data:</span></span>  

![][14]

<span data-ttu-id="5f918-597">Hallo **EmployeeIDs** eigenschap bevat een lijst van de werknemer-id's voor werknemers met Hallo achternaam opgeslagen in Hallo **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-597">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="5f918-598">Hallo volgende stappen wordt uitgelegd u volgen moet wanneer u een nieuwe werknemer toevoegen wilt als u van de tweede optie Hallo gebruikmaakt Hallo-proces.</span><span class="sxs-lookup"><span data-stu-id="5f918-598">hello following steps outline hello process you should follow when you are adding a new employee if you are using hello second option.</span></span> <span data-ttu-id="5f918-599">In dit voorbeeld toevoegen we een werknemer met Id 000152 en een achternaam Jones in de afdeling verkoop Hallo:</span><span class="sxs-lookup"><span data-stu-id="5f918-599">In this example, we are adding an employee with Id 000152 and a last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="5f918-600">Ophalen van Hallo index entiteit met een **PartitionKey** waarde 'Verkoop' en Hallo **RowKey** waarde "Jones."</span><span class="sxs-lookup"><span data-stu-id="5f918-600">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span> <span data-ttu-id="5f918-601">Hallo ETag van deze entiteit toouse opslaan in stap 2.</span><span class="sxs-lookup"><span data-stu-id="5f918-601">Save hello ETag of this entity toouse in step 2.</span></span>  
2. <span data-ttu-id="5f918-602">Maken van een entiteit groep transactie (dat wil zeggen, een batchbewerking) dat wordt ingevoegd Hallo nieuwe werknemer entiteit (**PartitionKey** waarde 'Verkoop' en **RowKey** waarde '000152'), en updates Hallo index entiteit ( **PartitionKey** waarde 'Verkoop' en **RowKey** waarde 'Jones') door toe te voegen Hallo id toohello lijst met nieuwe werknemers in Hallo EmployeeIDs veld.</span><span class="sxs-lookup"><span data-stu-id="5f918-602">Create an entity group transaction (that is, a batch operation) that inserts hello new employee entity (**PartitionKey** value "Sales" and **RowKey** value "000152"), and updates hello index entity (**PartitionKey** value "Sales" and **RowKey** value "Jones") by adding hello new employee id toohello list in hello EmployeeIDs field.</span></span> <span data-ttu-id="5f918-603">Zie voor meer informatie over entiteit groepstransacties [entiteit groepstransacties](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="5f918-603">For more information about entity group transactions, see [Entity Group Transactions](#entity-group-transactions).</span></span>  
3. <span data-ttu-id="5f918-604">Als Hallo entiteit groep transactie mislukt vanwege een optimistische gelijktijdigheid-fout (iemand anders is zojuist gewijzigd Hallo index entiteit), moet u toostart via bij stap 1 opnieuw.</span><span class="sxs-lookup"><span data-stu-id="5f918-604">If hello entity group transaction fails because of an optimistic concurrency error (someone else has just modified hello index entity), then you need toostart over at step 1 again.</span></span>  

<span data-ttu-id="5f918-605">U kunt een soortgelijke benadering toodeleting een werknemer gebruiken als u van de tweede optie Hallo gebruikmaakt.</span><span class="sxs-lookup"><span data-stu-id="5f918-605">You can use a similar approach toodeleting an employee if you are using hello second option.</span></span> <span data-ttu-id="5f918-606">Wijzigen van de achternaam van een werknemer is iets ingewikkelder omdat moet u een entiteit groep transactie die updates drie entiteiten tooexecute: werknemer entiteit en Hallo index entiteit voor de oude achternaam Hallo Hallo index entiteit voor de nieuwe achternaam Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-606">Changing an employee's last name is slightly more complex because you will need tooexecute an entity group transaction that updates three entities: hello employee entity, hello index entity for hello old last name, and hello index entity for hello new last name.</span></span> <span data-ttu-id="5f918-607">Voordat u wijzigingen aanbrengt in volgorde tooretrieve Hallo ETag waarden die u gebruikt optimistische gelijktijdigheid van tooperform Hallo updates vervolgens kunt gebruiken, moet u elke entiteit ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-607">You must retrieve each entity before making any changes in order tooretrieve hello ETag values that you can then use tooperform hello updates using optimistic concurrency.</span></span>  

<span data-ttu-id="5f918-608">Hallo volgende stappen wordt uitgelegd u volgen moet wanneer u toolook van alle Hallo werknemers met een bepaalde achternaam in een afdeling nodig als u van de tweede optie Hallo gebruikmaakt Hallo-proces.</span><span class="sxs-lookup"><span data-stu-id="5f918-608">hello following steps outline hello process you should follow when you need toolook up all hello employees with a given last name in a department if you are using hello second option.</span></span> <span data-ttu-id="5f918-609">In dit voorbeeld zijn er alle Hallo werknemers met achternaam Jones in de afdeling verkoop Hallo opzoeken:</span><span class="sxs-lookup"><span data-stu-id="5f918-609">In this example, we are looking up all hello employees with last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="5f918-610">Ophalen van Hallo index entiteit met een **PartitionKey** waarde 'Verkoop' en Hallo **RowKey** waarde "Jones."</span><span class="sxs-lookup"><span data-stu-id="5f918-610">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span>  
2. <span data-ttu-id="5f918-611">Hallo-lijst van de werknemer-id's in Hallo EmployeeIDs veld parseren.</span><span class="sxs-lookup"><span data-stu-id="5f918-611">Parse hello list of employee Ids in hello EmployeeIDs field.</span></span>  
3. <span data-ttu-id="5f918-612">Als u meer informatie over elk van deze werknemers (zoals hun e-mailadressen), ophalen elk Hallo werknemer entiteiten met **PartitionKey** waarde 'Verkoop' en **RowKey** waarden van Hallo-lijst van werknemers die u hebt verkregen in stap 2.</span><span class="sxs-lookup"><span data-stu-id="5f918-612">If you need additional information about each of these employees (such as their email addresses), retrieve each of hello employee entities using **PartitionKey** value "Sales" and **RowKey** values from hello list of employees you obtained in step 2.</span></span>  

<span data-ttu-id="5f918-613"><u>Optie #3:</u> index entiteiten in een afzonderlijke partitie of een tabel maken</span><span class="sxs-lookup"><span data-stu-id="5f918-613"><u>Option #3:</u> Create index entities in a separate partition or table</span></span>  

<span data-ttu-id="5f918-614">Gebruik voor Hallo derde optie, index-entiteiten die Hallo volgt gegevens opslaan:</span><span class="sxs-lookup"><span data-stu-id="5f918-614">For hello third option, use index entities that store hello following data:</span></span>  

![][15]

<span data-ttu-id="5f918-615">Hallo **EmployeeIDs** eigenschap bevat een lijst van de werknemer-id's voor werknemers met Hallo achternaam opgeslagen in Hallo **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="5f918-615">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="5f918-616">Hallo derde optie, u EGTs toomaintain consistentie niet gebruiken omdat Hallo index entiteiten in een afzonderlijke partitie van Hallo werknemer entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-616">With hello third option, you cannot use EGTs toomaintain consistency because hello index entities are in a separate partition from hello employee entities.</span></span> <span data-ttu-id="5f918-617">U moet ervoor zorgen dat Hallo index entiteiten uiteindelijk consistent is met de Hallo werknemer entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-617">You should ensure that hello index entities are eventually consistent with hello employee entities.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-618">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-618">Issues and considerations</span></span>
<span data-ttu-id="5f918-619">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-619">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-620">Deze oplossing vereist ten minste twee query's tooretrieve overeenkomende entiteiten: één tooquery Hallo index entiteiten tooobtain Hallo lijst met **RowKey** waarden en vervolgens een query tooretrieve elke entiteit in de lijst Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-620">This solution requires at least two queries tooretrieve matching entities: one tooquery hello index entities tooobtain hello list of **RowKey** values, and then queries tooretrieve each entity in hello list.</span></span>  
* <span data-ttu-id="5f918-621">Gezien het feit dat een afzonderlijke entiteit heeft een maximale grootte van 1 MB, optie #2 en de optie #3 in Hallo oplossing wordt ervan uitgegaan dat Hallo lijst met werknemer-id's voor een bepaalde achternaam is nooit groter dan 1 MB.</span><span class="sxs-lookup"><span data-stu-id="5f918-621">Given that an individual entity has a maximum size of 1 MB, option #2 and option #3 in hello solution assume that hello list of employee ids for any given last name is never greater than 1 MB.</span></span> <span data-ttu-id="5f918-622">Als Hallo-lijst van de werknemer-id's waarschijnlijk toobe groter is dan 1 MB groot is, gebruik van optie #1 en Hallo indexgegevens opslaan in blob-opslag.</span><span class="sxs-lookup"><span data-stu-id="5f918-622">If hello list of employee ids is likely toobe greater than 1 MB in size, use option #1 and store hello index data in blob storage.</span></span>  
* <span data-ttu-id="5f918-623">Als u de optie #2 gebruikt moet (met behulp van EGTs toohandle toevoegen en verwijderen van werknemers en het wijzigen van de achternaam van een werknemer) u nagaan of Hallo volume van transacties Hallo limieten voor schaalbaarheid in een bepaalde partitie wordt benaderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-623">If you use option #2 (using EGTs toohandle adding and deleting employees, and changing an employee's last name) you must evaluate if hello volume of transactions will approach hello scalability limits in a given partition.</span></span> <span data-ttu-id="5f918-624">Als dit Hallo geval is, moet u rekening houden met een uiteindelijk consistent oplossing (optie &#1; of optie #3) die gebruikmaakt van wachtrijen toohandle Hallo update aanvraagt en kunt u toostore uw index entiteiten in een afzonderlijke partitie van Hallo werknemer entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-624">If this is hello case, you should consider an eventually consistent solution (option #1 or option #3) that uses queues toohandle hello update requests and enables you toostore your index entities in a separate partition from hello employee entities.</span></span>  
* <span data-ttu-id="5f918-625">Optie #2 in deze oplossing wordt ervan uitgegaan dat u toolook binnen een afdeling op achternaam wilt: u kunt bijvoorbeeld tooretrieve een lijst met werknemers met een achternaam Jones in de afdeling verkoop Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-625">Option #2 in this solution assumes that you want toolook up by last name within a department: for example, you want tooretrieve a list of employees with a last name Jones in hello Sales department.</span></span> <span data-ttu-id="5f918-626">Als u kunnen toolook toobe van alle Hallo werknemers met een achternaam Jones binnen de hele organisatie hello wilt, optie #1 of optie #3 gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-626">If you want toobe able toolook up all hello employees with a last name Jones across hello whole organization, use either option #1 or option #3.</span></span>
* <span data-ttu-id="5f918-627">U kunt een oplossing op basis van wachtrijen die zorgt voor uiteindelijke consistentie implementeren (Zie Hallo [uiteindelijk consistent transacties patroon](#eventually-consistent-transactions-pattern) voor meer informatie).</span><span class="sxs-lookup"><span data-stu-id="5f918-627">You can implement a queue-based solution that delivers eventual consistency (see hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) for more details).</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-628">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-628">When toouse this pattern</span></span>
<span data-ttu-id="5f918-629">Gebruik dit patroon als u wilt dat een aantal entiteiten dat alle een gemeenschappelijke eigenschapswaarde, zoals alle werknemers met Hallo achternaam Jones delen toolookup.</span><span class="sxs-lookup"><span data-stu-id="5f918-629">Use this pattern when you want toolookup a set of entities that all share a common property value, such as all employees with hello last name Jones.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-630">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-630">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-631">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-631">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-632">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-632">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="5f918-633">Uiteindelijk consistent transacties patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-633">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="5f918-634">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-634">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="5f918-635">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-635">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="denormalization-pattern"></a><span data-ttu-id="5f918-636">Denormalization patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-636">Denormalization pattern</span></span>
<span data-ttu-id="5f918-637">Gerelateerde gegevens samen in een enkele entiteit tooenable combineren tooretrieve u alle gegevens die u met een query één punt moet Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-637">Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-638">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-638">Context and problem</span></span>
<span data-ttu-id="5f918-639">In een relationele database, moet u doorgaans tooremove gegevensontdubbeling, wat resulteert in query's die gegevens uit meerdere tabellen ophalen normaliseren.</span><span class="sxs-lookup"><span data-stu-id="5f918-639">In a relational database, you typically normalize data tooremove duplication resulting in queries that retrieve data from multiple tables.</span></span> <span data-ttu-id="5f918-640">Als u uw gegevens in Azure-tabellen normaliseren, moet u meerdere retouren van Hallo client toohello server tooretrieve uw gerelateerde gegevens maken.</span><span class="sxs-lookup"><span data-stu-id="5f918-640">If you normalize your data in Azure tables, you must make multiple round trips from hello client toohello server tooretrieve your related data.</span></span> <span data-ttu-id="5f918-641">Bijvoorbeeld, met de structuur van de tabel Hallo hieronder u moet twee afronden reizen tooretrieve Hallo details voor een afdeling: één toofetch Hallo afdeling entiteit die van de manager van het Hallo-id en vervolgens een andere aanvraag toofetch Hallo van manager details in een werknemer bevat de entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-641">For example, with hello table structure shown below you need two round trips tooretrieve hello details for a department: one toofetch hello department entity that includes hello manager's id, and then another request toofetch hello manager's details in an employee entity.</span></span>  

![][16]

#### <a name="solution"></a><span data-ttu-id="5f918-642">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-642">Solution</span></span>
<span data-ttu-id="5f918-643">In plaats van het Hallo-gegevens worden opgeslagen in twee afzonderlijke entiteiten, denormalize Hallo gegevens en bewaar een kopie van de details van Hallo manager op Hallo afdeling entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-643">Instead of storing hello data in two separate entities, denormalize hello data and keep a copy of hello manager's details in hello department entity.</span></span> <span data-ttu-id="5f918-644">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="5f918-644">For example:</span></span>  

![][17]

<span data-ttu-id="5f918-645">Met de afdeling entiteiten met deze eigenschappen worden opgeslagen, kunt u nu alle Hallo details, moet u over een afdeling in een query punt ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-645">With department entities stored with these properties, you can now retrieve all hello details you need about a department using a point query.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-646">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-646">Issues and considerations</span></span>
<span data-ttu-id="5f918-647">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-647">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-648">Er is enige kosten overhead die is gekoppeld aan twee keer sommige gegevens op te slaan.</span><span class="sxs-lookup"><span data-stu-id="5f918-648">There is some cost overhead associated with storing some data twice.</span></span> <span data-ttu-id="5f918-649">Hallo prestatievoordelen (die voortvloeien uit minder aanvragen toohello storage-service) doorgaans belangrijker is dan Hallo marginale toename opslagkosten (en deze kosten is gedeeltelijk gecompenseerd door een vermindering van het aantal transacties Hallo u toofetch Hallo informatie is vereist van een afdeling).</span><span class="sxs-lookup"><span data-stu-id="5f918-649">hello performance benefit (resulting from fewer requests toohello storage service) typically outweighs hello marginal increase in storage costs (and this cost is partially offset by a reduction in hello number of transactions you require toofetch hello details of a department).</span></span>  
* <span data-ttu-id="5f918-650">Hallo consistentie van Hallo twee entiteiten die informatie over managers opslaat, moet u onderhouden.</span><span class="sxs-lookup"><span data-stu-id="5f918-650">You must maintain hello consistency of hello two entities that store information about managers.</span></span> <span data-ttu-id="5f918-651">U kunt verwerkt Hallo consistentie probleem met behulp van EGTs tooupdate meerdere entiteiten in één transactie atomic: in dit geval Hallo afdeling entiteits- en Hallo werknemer entiteit voor Hallo afdelingsmanager worden opgeslagen in Hallo dezelfde partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-651">You can handle hello consistency issue by using EGTs tooupdate multiple entities in a single atomic transaction: in this case, hello department entity, and hello employee entity for hello department manager are stored in hello same partition.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-652">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-652">When toouse this pattern</span></span>
<span data-ttu-id="5f918-653">U kunt dit patroon vaak toolook gerelateerde informatie.</span><span class="sxs-lookup"><span data-stu-id="5f918-653">Use this pattern when you frequently need toolook up related information.</span></span> <span data-ttu-id="5f918-654">Dit patroon vermindert Hallo aantal query's voor die de client moet aanbrengen tooretrieve Hallo gegevens vereist.</span><span class="sxs-lookup"><span data-stu-id="5f918-654">This pattern reduces hello number of queries your client must make tooretrieve hello data it requires.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-655">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-655">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-656">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-656">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-657">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-657">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="5f918-658">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-658">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="5f918-659">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-659">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="compound-key-pattern"></a><span data-ttu-id="5f918-660">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-660">Compound key pattern</span></span>
<span data-ttu-id="5f918-661">Gebruik samengestelde **RowKey** waarden tooenable een client toolookup gerelateerde gegevens met een query één punt.</span><span class="sxs-lookup"><span data-stu-id="5f918-661">Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-662">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-662">Context and problem</span></span>
<span data-ttu-id="5f918-663">In een relationele database, is het erg natuurlijke toouse joins in query's tooreturn soorten gegevens toohello client in één query gerelateerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-663">In a relational database, it is quite natural toouse joins in queries tooreturn related pieces of data toohello client in a single query.</span></span> <span data-ttu-id="5f918-664">U kunt bijvoorbeeld Hallo werknemer-id toolook van een lijst van gerelateerde entiteiten die prestaties bevatten en gegevens voor die werknemer bekijken.</span><span class="sxs-lookup"><span data-stu-id="5f918-664">For example, you might use hello employee id toolook up a list of related entities that contain performance and review data for that employee.</span></span>  

<span data-ttu-id="5f918-665">Stel dat u bij het opslaan van entiteiten van de werknemer in service Hallo-tabel met Hallo structuur te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-665">Assume you are storing employee entities in hello Table service using hello following structure:</span></span>  

![][18]

<span data-ttu-id="5f918-666">Moet u ook toostore historische gegevens over tooreviews en prestaties voor elk jaar Hallo werknemer heeft gewerkt voor uw organisatie en u toobe kunnen tooaccess moet deze informatie per jaar.</span><span class="sxs-lookup"><span data-stu-id="5f918-666">You also need toostore historical data relating tooreviews and performance for each year hello employee has worked for your organization and you need toobe able tooaccess this information by year.</span></span> <span data-ttu-id="5f918-667">Een optie toocreate is een andere tabel waarmee entiteiten worden opgeslagen met Hallo structuur te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-667">One option is toocreate another table that stores entities with hello following structure:</span></span>  

![][19]

<span data-ttu-id="5f918-668">Merk op dat met deze benadering u besluiten tooduplicate sommige gegevens (zoals de voornaam en achternaam) in de nieuwe entiteit tooenable hello tooretrieve u uw gegevens met één aanvraag.</span><span class="sxs-lookup"><span data-stu-id="5f918-668">Notice that with this approach you may decide tooduplicate some information (such as first name and last name) in hello new entity tooenable you tooretrieve your data with a single request.</span></span> <span data-ttu-id="5f918-669">U kan niet echter sterke consistentie onderhouden omdat u een EGT tooupdate Hallo twee entiteiten moment niet kan gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-669">However, you cannot maintain strong consistency because you cannot use an EGT tooupdate hello two entities atomically.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-670">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-670">Solution</span></span>
<span data-ttu-id="5f918-671">Een nieuwe entiteitstype opslaan in de oorspronkelijke tabel met behulp van de entiteiten met Hallo structuur te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-671">Store a new entity type in your original table using entities with hello following structure:</span></span>  

![][20]

<span data-ttu-id="5f918-672">U ziet hoe Hallo **RowKey** nu een samengestelde sleutel bestaat uit Hallo werknemer-id en het Hallo jaar van Hallo revisie gegevens waarmee u tooretrieve Hallo van werknemer prestaties en het controleren van gegevens met één aanvraag voor één entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-672">Notice how hello **RowKey** is now a compound key made up of hello employee id and hello year of hello review data that enables you tooretrieve hello employee's performance and review data with a single request for a single entity.</span></span>  

<span data-ttu-id="5f918-673">Hallo volgende voorbeeld bevat een overzicht van hoe u alle Hallo revisie gegevens kunt ophalen voor een bepaalde werknemer (zoals werknemer 000123 in de afdeling verkoop Hallo):</span><span class="sxs-lookup"><span data-stu-id="5f918-673">hello following example outlines how you can retrieve all hello review data for a particular employee (such as employee 000123 in hello Sales department):</span></span>  

<span data-ttu-id="5f918-674">$filter = (PartitionKey eq 'Sales') en (RowKey ge 'empid_000123') en (RowKey lt 'empid_000124') & $select = RowKey, beoordeling door Manager, beoordeling van de Peer, opmerkingen</span><span class="sxs-lookup"><span data-stu-id="5f918-674">$filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000123') and (RowKey lt 'empid_000124')&$select=RowKey,Manager Rating,Peer Rating,Comments</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-675">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-675">Issues and considerations</span></span>
<span data-ttu-id="5f918-676">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-676">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-677">Moet u een geschikte scheidingsteken dat het eenvoudig tooparse hello maakt **RowKey** waarde: bijvoorbeeld **000123_2012**.</span><span class="sxs-lookup"><span data-stu-id="5f918-677">You should use a suitable separator character that makes it easy tooparse hello **RowKey** value: for example, **000123_2012**.</span></span>  
* <span data-ttu-id="5f918-678">U ook deze entiteit opslaat in dezelfde partitie als andere entiteiten met verwante gegevens voor Hallo Hallo dezelfde werknemer, wat betekent dat u sterke consistentie voor EGTs toomaintain kunt gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-678">You are also storing this entity in hello same partition as other entities that contain related data for hello same employee, which means you can use EGTs toomaintain strong consistency.</span></span>
* <span data-ttu-id="5f918-679">U moet overwegen hoe vaak u een query uit op Hallo gegevens toodetermine of dit patroon geschikt is.</span><span class="sxs-lookup"><span data-stu-id="5f918-679">You should consider how frequently you will query hello data toodetermine whether this pattern is appropriate.</span></span>  <span data-ttu-id="5f918-680">Bijvoorbeeld als u toegang tot gegevens controleren zelden Hallo en Hallo belangrijkste werknemersgegevens vaak die u ze als afzonderlijke entiteiten houden moet.</span><span class="sxs-lookup"><span data-stu-id="5f918-680">For example, if you will access hello review data infrequently and hello main employee data often you should keep them as separate entities.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-681">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-681">When toouse this pattern</span></span>
<span data-ttu-id="5f918-682">Gebruik dit patroon wanneer u toostore een moet of meer entiteiten die query u vaak gerelateerde.</span><span class="sxs-lookup"><span data-stu-id="5f918-682">Use this pattern when you need toostore one or more related entities that you query frequently.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-683">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-683">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-684">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-684">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-685">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-685">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="5f918-686">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-686">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  
* [<span data-ttu-id="5f918-687">Uiteindelijk consistent transacties patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-687">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  

### <a name="log-tail-pattern"></a><span data-ttu-id="5f918-688">Patroon voor logboekbestand staart</span><span class="sxs-lookup"><span data-stu-id="5f918-688">Log tail pattern</span></span>
<span data-ttu-id="5f918-689">Hallo ophalen  *n*  tooa partitie entiteiten meest recent toegevoegd met behulp van een **RowKey** waarde die in omgekeerde datum en tijd volgorde worden gesorteerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-689">Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-690">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-690">Context and problem</span></span>
<span data-ttu-id="5f918-691">Een algemene vereiste is niet kunnen tooretrieve Hallo meest recent gemaakte entiteiten, bijvoorbeeld Hallo tien meest recente onkosten claims ingediend door een werknemer zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-691">A common requirement is be able tooretrieve hello most recently created entities, for example hello ten most recent expense claims submitted by an employee.</span></span> <span data-ttu-id="5f918-692">Tabel ondersteuning vraagt een **$top** bewerking tooreturn Hallo eerst query  *n*  entiteiten uit een set: Er is geen equivalent query bewerking tooreturn Hallo laatste n entiteiten in een set.</span><span class="sxs-lookup"><span data-stu-id="5f918-692">Table queries support a **$top** query operation tooreturn hello first *n* entities from a set: there is no equivalent query operation tooreturn hello last n entities in a set.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-693">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-693">Solution</span></span>
<span data-ttu-id="5f918-694">Store Hallo entiteiten met een **RowKey** dat natuurlijk sorteren in omgekeerde volgorde datum/tijd volgorde door gebruik te maken zodat de meest recente item Hallo altijd Hallo eerste certificaat in het Hallo-tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-694">Store hello entities using a **RowKey** that naturally sorts in reverse date/time order by using so hello most recent entry is always hello first one in hello table.</span></span>  

<span data-ttu-id="5f918-695">Bijvoorbeeld: toobe kunnen tooretrieve Hallo tien meest recente onkosten claims die zijn ingediend door een werknemer, kunt u de waarde van een omgekeerde maatstreepjes afgeleid van Hallo huidige datum en tijd.</span><span class="sxs-lookup"><span data-stu-id="5f918-695">For example, toobe able tooretrieve hello ten most recent expense claims submitted by an employee, you can use a reverse tick value derived from hello current date/time.</span></span> <span data-ttu-id="5f918-696">Hallo volgende C# codevoorbeeld ziet eenrichtingssessie toocreate een geschikte waarde 'omgekeerde ticks' voor een **RowKey** die sorteren van de meest recente toohello Hallo oudste:</span><span class="sxs-lookup"><span data-stu-id="5f918-696">hello following C# code sample shows one way toocreate a suitable "inverted ticks" value for a **RowKey** that sorts from hello most recent toohello oldest:</span></span>  

`string invertedTicks = string.Format("{0:D19}", DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks);`  

<span data-ttu-id="5f918-697">U kunt terug met behulp van de volgende code Hallo datum-tijdwaarde voor toohello krijgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-697">You can get back toohello date time value using hello following code:</span></span>  

`DateTime dt = new DateTime(DateTime.MaxValue.Ticks - Int64.Parse(invertedTicks));`  

<span data-ttu-id="5f918-698">Hallo tabelquery ziet er als volgt:</span><span class="sxs-lookup"><span data-stu-id="5f918-698">hello table query looks like this:</span></span>  

`https://myaccount.table.core.windows.net/EmployeeExpense(PartitionKey='empid')?$top=10`  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-699">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-699">Issues and considerations</span></span>
<span data-ttu-id="5f918-700">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-700">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-701">U krijgt een Hallo omgekeerde maatstreepjes waarde met nullen toonaangevende tooensure Hallo tekenreekswaarde sorteert zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="5f918-701">You must pad hello reverse tick value with leading zeroes tooensure hello string value sorts as expected.</span></span>  
* <span data-ttu-id="5f918-702">U moet rekening houden met de schaalbaarheidsdoelen Hallo op Hallo niveau van een partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-702">You must be aware of hello scalability targets at hello level of a partition.</span></span> <span data-ttu-id="5f918-703">Wees voorzichtig hotspot partities niet maken.</span><span class="sxs-lookup"><span data-stu-id="5f918-703">Be careful not create hot spot partitions.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-704">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-704">When toouse this pattern</span></span>
<span data-ttu-id="5f918-705">Gebruik dit patroon wanneer moet u tooaccess entiteiten in volgorde van de omgekeerde datum/tijd of wanneer u tooaccess Hallo meest recent moet toegevoegd entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-705">Use this pattern when you need tooaccess entities in reverse date/time order or when you need tooaccess hello most recently added entities.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-706">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-706">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-707">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-707">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-708">Toevoegen / antivirusprogramma patroon toevoegen</span><span class="sxs-lookup"><span data-stu-id="5f918-708">Prepend / append anti-pattern</span></span>](#prepend-append-anti-pattern)  
* [<span data-ttu-id="5f918-709">Entiteiten ophalen</span><span class="sxs-lookup"><span data-stu-id="5f918-709">Retrieving entities</span></span>](#retrieving-entities)  

### <a name="high-volume-delete-pattern"></a><span data-ttu-id="5f918-710">Patroon voor grote volumes verwijderen</span><span class="sxs-lookup"><span data-stu-id="5f918-710">High volume delete pattern</span></span>
<span data-ttu-id="5f918-711">Hallo verwijderen van een groot aantal entiteiten inschakelen door het opslaan van alle Hallo-entiteiten voor gelijktijdige verwijdering in hun eigen afzonderlijke tabel. u verwijderen Hallo entiteiten door Hallo tabel te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-711">Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-712">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-712">Context and problem</span></span>
<span data-ttu-id="5f918-713">Veel toepassingen Verwijder oude gegevens die niet langer de toepassing van de client beschikbare tooa toobe moet of die toepassing hello tooanother opslagmedium is gearchiveerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-713">Many applications delete old data which no longer needs toobe available tooa client application, or that hello application has archived tooanother storage medium.</span></span> <span data-ttu-id="5f918-714">U doorgaans dergelijke gegevens identificeren met een datum: er bijvoorbeeld voor een vereiste toodelete-records van alle aanmeldingsaanvragen voor die meer dan 60 dagen oud.</span><span class="sxs-lookup"><span data-stu-id="5f918-714">You typically identify such data by a date: for example, you have a requirement toodelete records of all login requests that are more than 60 days old.</span></span>  

<span data-ttu-id="5f918-715">Een mogelijke ontwerp is toouse Hallo datum en tijd van Hallo aanmeldingsaanvraag in Hallo **RowKey**:</span><span class="sxs-lookup"><span data-stu-id="5f918-715">One possible design is toouse hello date and time of hello login request in hello **RowKey**:</span></span>  

![][21]

<span data-ttu-id="5f918-716">Deze aanpak voorkomt partitie hotspots omdat de toepassing hello kan invoegen en verwijderen van aanmelding entiteiten voor elke gebruiker in een afzonderlijke partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-716">This approach avoids partition hotspots because hello application can insert and delete login entities for each user in a separate partition.</span></span> <span data-ttu-id="5f918-717">Echter mogelijk is deze benadering kostbare tijd in beslag nemen als u een groot aantal entiteiten hebt omdat u eerst tooperform moet een tabel scannen in volgorde tooidentify alle Hallo entiteiten toodelete en vervolgens moet u elke oude entiteit verwijderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-717">However, this approach may be costly and time consuming if you have a large number of entities because first you need tooperform a table scan in order tooidentify all hello entities toodelete, and then you must delete each old entity.</span></span> <span data-ttu-id="5f918-718">Houd er rekening mee dat u het aantal retouren toohello server vereist toodelete Hallo oude entiteiten Hallo verkleinen kunt door meerdere delete-aanvragen in EGTs batchverwerking.</span><span class="sxs-lookup"><span data-stu-id="5f918-718">Note that you can reduce hello number of round trips toohello server required toodelete hello old entities by batching multiple delete requests into EGTs.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-719">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-719">Solution</span></span>
<span data-ttu-id="5f918-720">Een afzonderlijke tabel gebruiken voor elke dag van aanmeldingspogingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-720">Use a separate table for each day of login attempts.</span></span> <span data-ttu-id="5f918-721">U kunt Hallo entiteit ontwerp hierboven tooavoid hotspots entiteiten invoegen en verwijderen van oude entiteiten is nu gewoon een vraag van het verwijderen van één tabel elke dag (een enkele opslagbewerking) in plaats van zoeken en verwijderen van honderden of duizenden afzonderlijke aanmelding entiteiten elke dag.</span><span class="sxs-lookup"><span data-stu-id="5f918-721">You can use hello entity design above tooavoid hotspots when you are inserting entities, and deleting old entities is now simply a question of deleting one table every day (a single storage operation) instead of finding and deleting hundreds and thousands of individual login entities every day.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-722">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-722">Issues and considerations</span></span>
<span data-ttu-id="5f918-723">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-723">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-724">Uw ontwerp biedt ondersteuning voor andere manieren Hallo gegevens zoals het opzoeken van specifieke entiteiten, koppelen aan andere gegevens of genereren verzamelde gegevens zullen worden gebruikt door uw toepassing?</span><span class="sxs-lookup"><span data-stu-id="5f918-724">Does your design support other ways your application will use hello data such as looking up specific entities, linking with other data, or generating aggregate information?</span></span>  
* <span data-ttu-id="5f918-725">Uw ontwerp hotspots voorkomen tijdens het invoegen van nieuwe entiteiten</span><span class="sxs-lookup"><span data-stu-id="5f918-725">Does your design avoid hot spots when you are inserting new entities?</span></span>  
* <span data-ttu-id="5f918-726">Verwacht een vertraging optreden als u wilt dat tooreuse Hallo dezelfde tabelnaam na het verwijderen.</span><span class="sxs-lookup"><span data-stu-id="5f918-726">Expect a delay if you want tooreuse hello same table name after deleting it.</span></span> <span data-ttu-id="5f918-727">Het is beter tooalways unieke Tabelnamen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-727">It's better tooalways use unique table names.</span></span>  
* <span data-ttu-id="5f918-728">Verwachten dat sommige beperking wanneer u eerst een nieuwe tabel terwijl Hallo tabelservice hello toegangspatronen leert en Hallo partities over knooppunten verdeelt.</span><span class="sxs-lookup"><span data-stu-id="5f918-728">Expect some throttling when you first use a new table while hello Table service learns hello access patterns and distributes hello partitions across nodes.</span></span> <span data-ttu-id="5f918-729">U moet bepalen hoe vaak toocreate nieuwe tabellen.</span><span class="sxs-lookup"><span data-stu-id="5f918-729">You should consider how frequently you need toocreate new tables.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-730">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-730">When toouse this pattern</span></span>
<span data-ttu-id="5f918-731">Dit patroon gebruiken wanneer u een groot aantal entiteiten die u op Hallo verwijderen moet hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="5f918-731">Use this pattern when you have a high volume of entities that you must delete at hello same time.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-732">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-732">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-733">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-733">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-734">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-734">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="5f918-735">Entiteiten wijzigen</span><span class="sxs-lookup"><span data-stu-id="5f918-735">Modifying entities</span></span>](#modifying-entities)  

### <a name="data-series-pattern"></a><span data-ttu-id="5f918-736">Patroon van de reeks gegevens</span><span class="sxs-lookup"><span data-stu-id="5f918-736">Data series pattern</span></span>
<span data-ttu-id="5f918-737">Store voltooid gegevensreeksen in een enkele entiteit toominimize Hallo aantal aanvragen die u aanbrengt.</span><span class="sxs-lookup"><span data-stu-id="5f918-737">Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-738">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-738">Context and problem</span></span>
<span data-ttu-id="5f918-739">Een gebruikelijk scenario is voor een toepassing toostore een reeks vereiste gegevens dat doorgaans tooretrieve in één keer.</span><span class="sxs-lookup"><span data-stu-id="5f918-739">A common scenario is for an application toostore a series of data that it typically needs tooretrieve all at once.</span></span> <span data-ttu-id="5f918-740">Uw toepassing kan bijvoorbeeld hoeveel elke werknemer elk uur IM-berichten vastleggen en gebruik vervolgens deze informatie tooplot hoeveel berichten elke gebruiker worden verzonden via Hallo voorgaande 24 uur.</span><span class="sxs-lookup"><span data-stu-id="5f918-740">For example, your application might record how many IM messages each employee sends every hour, and then use this information tooplot how many messages each user sent over hello preceding 24 hours.</span></span> <span data-ttu-id="5f918-741">Een ontwerp mogelijk toostore 24 entiteiten voor elke werknemer:</span><span class="sxs-lookup"><span data-stu-id="5f918-741">One design might be toostore 24 entities for each employee:</span></span>  

![][22]

<span data-ttu-id="5f918-742">Bij dit ontwerp kunt u eenvoudig vinden en Hallo entiteit tooupdate voor elke werknemer bijwerken als de toepassing hello aantalwaarde voor tooupdate Hallo-bericht moet.</span><span class="sxs-lookup"><span data-stu-id="5f918-742">With this design, you can easily locate and update hello entity tooupdate for each employee whenever hello application needs tooupdate hello message count value.</span></span> <span data-ttu-id="5f918-743">Echter tooretrieve Hallo informatie tooplot een grafiek van de activiteit Hallo voor Hallo voorafgaande 24 uur, moet u 24 entiteiten ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-743">However, tooretrieve hello information tooplot a chart of hello activity for hello preceding 24 hours, you must retrieve 24 entities.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-744">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-744">Solution</span></span>
<span data-ttu-id="5f918-745">Ontwerp met een aantal afzonderlijke eigenschap toostore Hallo-berichten te volgen voor elk uur hello gebruiken:</span><span class="sxs-lookup"><span data-stu-id="5f918-745">Use hello following design with a separate property toostore hello message count for each hour:</span></span>  

![][23]

<span data-ttu-id="5f918-746">Bij dit ontwerp kunt u een aantal samenvoegen bewerking tooupdate Hallo berichten voor een werknemer voor een specifiek uur.</span><span class="sxs-lookup"><span data-stu-id="5f918-746">With this design, you can use a merge operation tooupdate hello message count for an employee for a specific hour.</span></span> <span data-ttu-id="5f918-747">U kunt nu alle benodigde tooplot Hallo grafiek met behulp van een aanvraag voor een enkele entiteit Hallo-gegevens ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-747">Now, you can retrieve all hello information you need tooplot hello chart using a request for a single entity.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-748">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-748">Issues and considerations</span></span>
<span data-ttu-id="5f918-749">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-749">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-750">Als de volledige reeks past niet in één entiteit (een entiteit kan hebben eigenschappen too252), gebruikt u een alternatieve gegevensarchief, zoals een blob.</span><span class="sxs-lookup"><span data-stu-id="5f918-750">If your complete data series does not fit into a single entity (an entity can have up too252 properties), use an alternative data store such as a blob.</span></span>  
* <span data-ttu-id="5f918-751">Als u meerdere clients tegelijkertijd bijwerken van een entiteit hebt, moet u toouse hello **ETag** tooimplement optimistische gelijktijdigheid.</span><span class="sxs-lookup"><span data-stu-id="5f918-751">If you have multiple clients updating an entity simultaneously, you will need toouse hello **ETag** tooimplement optimistic concurrency.</span></span> <span data-ttu-id="5f918-752">Als u veel clients hebt, kunt u hoge conflicten ondervinden.</span><span class="sxs-lookup"><span data-stu-id="5f918-752">If you have many clients, you may experience high contention.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-753">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-753">When toouse this pattern</span></span>
<span data-ttu-id="5f918-754">Gebruik dit patroon wanneer u tooupdate nodig hebt en een gegevensreeks die zijn gekoppeld aan een afzonderlijke entiteit ophalen.</span><span class="sxs-lookup"><span data-stu-id="5f918-754">Use this pattern when you need tooupdate and retrieve a data series associated with an individual entity.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-755">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-755">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-756">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-756">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-757">Grote entiteiten patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-757">Large entities pattern</span></span>](#large-entities-pattern)  
* [<span data-ttu-id="5f918-758">Samenvoegen of vervangen</span><span class="sxs-lookup"><span data-stu-id="5f918-758">Merge or replace</span></span>](#merge-or-replace)  
* <span data-ttu-id="5f918-759">[Uiteindelijk consistent transacties patroon](#eventually-consistent-transactions-pattern) (als u Hallo gegevensreeks in een blob opslaat)</span><span class="sxs-lookup"><span data-stu-id="5f918-759">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) (if you are storing hello data series in a blob)</span></span>  

### <a name="wide-entities-pattern"></a><span data-ttu-id="5f918-760">Wide entiteiten patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-760">Wide entities pattern</span></span>
<span data-ttu-id="5f918-761">Gebruik van meerdere fysieke entiteiten toostore logische entiteiten met meer dan 252 eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="5f918-761">Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-762">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-762">Context and problem</span></span>
<span data-ttu-id="5f918-763">Een afzonderlijke entiteit kan maximaal 252 eigenschappen (met uitzondering van de verplichte Systeemeigenschappen Hallo) en kan niet meer dan 1 MB aan gegevens opslaan in totaal.</span><span class="sxs-lookup"><span data-stu-id="5f918-763">An individual entity can have no more than 252 properties (excluding hello mandatory system properties) and cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="5f918-764">In een relationele database, doorgaans krijgt u ronde beperkingen met betrekking tot Hallo grootte van een rij bij het toevoegen van een nieuwe tabel en een 1-op-1-relatie tussen deze twee afdwingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-764">In a relational database, you would typically get round any limits on hello size of a row by adding a new table and enforcing a 1-to-1 relationship between them.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-765">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-765">Solution</span></span>
<span data-ttu-id="5f918-766">Hallo tabel-service gebruikt, kunt u meerdere entiteiten toorepresent een object één grote bedrijven met meer dan 252 eigenschappen opslaan.</span><span class="sxs-lookup"><span data-stu-id="5f918-766">Using hello Table service, you can store multiple entities toorepresent a single large business object with more than 252 properties.</span></span> <span data-ttu-id="5f918-767">Bijvoorbeeld, als u wilt dat een aantal Hallo IM berichten die worden verzonden door elke werknemer voor Hallo afgelopen 365 dagen toostore, kunt u gebruiken Hallo ontwerp die gebruikmaakt van twee entiteiten met verschillende schema's te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-767">For example, if you want toostore a count of hello number of IM messages sent by each employee for hello last 365 days, you could use hello following design that uses two entities with different schemas:</span></span>  

![][24]

<span data-ttu-id="5f918-768">U kunt een EGT gebruiken als u een wijziging die moet worden bijgewerkt beide entiteiten tookeep ze met elkaar gesynchroniseerd toomake nodig.</span><span class="sxs-lookup"><span data-stu-id="5f918-768">If you need toomake a change that requires updating both entities tookeep them synchronized with each other you can use an EGT.</span></span> <span data-ttu-id="5f918-769">Anders kunt u een aantal van één samenvoegen bewerking tooupdate Hallo berichten voor een specifieke dag.</span><span class="sxs-lookup"><span data-stu-id="5f918-769">Otherwise, you can use a single merge operation tooupdate hello message count for a specific day.</span></span> <span data-ttu-id="5f918-770">alle gegevens voor een afzonderlijke werknemer moet u beide entiteiten, kunt u doen met twee efficiënte aanvragen die gebruikmaken van beide ophalen Hallo tooretrieve een **PartitionKey** en een **RowKey** waarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-770">tooretrieve all hello data for an individual employee you must retrieve both entities, which you can do with two efficient requests that use both a **PartitionKey** and a **RowKey** value.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-771">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-771">Issues and considerations</span></span>
<span data-ttu-id="5f918-772">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-772">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-773">Bij het ophalen van een volledige logische entiteit ten minste twee opslagtransacties omvat: één tooretrieve fysieke entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-773">Retrieving a complete logical entity involves at least two storage transactions: one tooretrieve each physical entity.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-774">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-774">When toouse this pattern</span></span>
<span data-ttu-id="5f918-775">Gebruik dit patroon wanneer nodig toostore entiteiten waarvan de grootte van of het aantal eigenschappen overschrijdt de Hallo limieten voor een afzonderlijke entiteit in Hallo Tabelservice.</span><span class="sxs-lookup"><span data-stu-id="5f918-775">Use this pattern when  need toostore entities whose size or number of properties exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-776">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-776">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-777">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-777">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-778">Entiteit groep transacties</span><span class="sxs-lookup"><span data-stu-id="5f918-778">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="5f918-779">Samenvoegen of vervangen</span><span class="sxs-lookup"><span data-stu-id="5f918-779">Merge or replace</span></span>](#merge-or-replace)

### <a name="large-entities-pattern"></a><span data-ttu-id="5f918-780">Grote entiteiten patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-780">Large entities pattern</span></span>
<span data-ttu-id="5f918-781">Gebruik blob storage toostore grote eigenschapswaarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-781">Use blob storage toostore large property values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-782">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-782">Context and problem</span></span>
<span data-ttu-id="5f918-783">Een afzonderlijke entiteit kan niet meer dan 1 MB aan gegevens opslaan in totaal.</span><span class="sxs-lookup"><span data-stu-id="5f918-783">An individual entity cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="5f918-784">Als een of meer van de eigenschappen van uw waarden zijn waardoor de totale grootte van uw entiteit tooexceed Hallo deze waarde opslaat, kunt u niet geheel Hallo opslaan in Hallo tabel-service.</span><span class="sxs-lookup"><span data-stu-id="5f918-784">If one or several of your properties store values that cause hello total size of your entity tooexceed this value, you cannot store hello entire entity in hello Table service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="5f918-785">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-785">Solution</span></span>
<span data-ttu-id="5f918-786">Als uw entiteit 1 MB groot overschrijdt omdat een of meer eigenschappen een grote hoeveelheid gegevens bevatten, kunt u gegevens opslaan op Hallo Blob-service en Hallo-adres van de blob Hallo op te slaan in een eigenschap in Hallo entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-786">If your entity exceeds 1 MB in size because one or more properties contain a large amount of data, you can store data in hello Blob service and then store hello address of hello blob in a property in hello entity.</span></span> <span data-ttu-id="5f918-787">Bijvoorbeeld Hallo foto van een werknemer opslaan in blob-opslag en een koppeling toohello foto opslaan in Hallo **Photo** eigenschap van de werknemer entiteit:</span><span class="sxs-lookup"><span data-stu-id="5f918-787">For example, you can store hello photo of an employee in blob storage and store a link toohello photo in hello **Photo** property of your employee entity:</span></span>  

![][25]

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-788">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-788">Issues and considerations</span></span>
<span data-ttu-id="5f918-789">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-789">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-790">toomaintain uiteindelijke consistentie tussen Hallo entiteit in Hallo tabelservice en Hallo-gegevens in Hallo Blob-service gebruiken Hallo [uiteindelijk consistent transacties patroon](#eventually-consistent-transactions-pattern) toomaintain uw entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-790">toomaintain eventual consistency between hello entity in hello Table service and hello data in hello Blob service, use hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain your entities.</span></span>
* <span data-ttu-id="5f918-791">Bij het ophalen van een volledige entiteit ten minste twee opslagtransacties omvat: één tooretrieve Hallo entiteit en één tooretrieve Hallo blob-gegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-791">Retrieving a complete entity involves at least two storage transactions: one tooretrieve hello entity and one tooretrieve hello blob data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-792">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-792">When toouse this pattern</span></span>
<span data-ttu-id="5f918-793">Dit patroon gebruikt als u toostore entiteiten waarvan de grootte overschrijdt de Hallo limieten voor een afzonderlijke entiteit in de tabelservice Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-793">Use this pattern when you need toostore entities whose size exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-794">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-794">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-795">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-795">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-796">Uiteindelijk consistent transacties patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-796">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="5f918-797">Wide entiteiten patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-797">Wide entities pattern</span></span>](#wide-entities-pattern)

<a name="prepend-append-anti-pattern"></a>

### <a name="prependappend-anti-pattern"></a><span data-ttu-id="5f918-798">Antivirusprogramma patroon toevoegen/toevoegen</span><span class="sxs-lookup"><span data-stu-id="5f918-798">Prepend/append anti-pattern</span></span>
<span data-ttu-id="5f918-799">Schaalbaarheid vergroten wanneer u een groot aantal invoegingen hebt met het Hallo voegt verspreid over meerdere partities.</span><span class="sxs-lookup"><span data-stu-id="5f918-799">Increase scalability when you have a high volume of inserts by spreading hello inserts across multiple partitions.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-800">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-800">Context and problem</span></span>
<span data-ttu-id="5f918-801">Voorafgaand of entiteiten tooyour opgeslagen entiteiten doorgaans voegen resulteert in het Hallo-toepassing eerst toe te voegen nieuwe entiteiten toohello of laatste partitie van een reeks van partities.</span><span class="sxs-lookup"><span data-stu-id="5f918-801">Prepending or appending entities tooyour stored entities typically results in hello application adding new entities toohello first or last partition of a sequence of partitions.</span></span> <span data-ttu-id="5f918-802">In dit geval worden alle Hallo ingevoegd op elk moment plaatsvinden in dezelfde partitie, het maken van een hotspot dat verhindert dat de tabelservice Hallo taakverdeling wordt ingevoegd op meerdere knooppunten Hallo en mogelijk veroorzaakt door uw toepassing toohit Hallo schaalbaarheid doelen voor de partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-802">In this case, all of hello inserts at any given time are taking place in hello same partition, creating a hotspot that prevents hello table service from load balancing inserts across multiple nodes, and possibly causing your application toohit hello scalability targets for partition.</span></span> <span data-ttu-id="5f918-803">Bijvoorbeeld, als u een toepassing hebt die Logboeken netwerk- en resource door werknemers openen, en vervolgens de structuur van een entiteit zoals hieronder wordt weergegeven, tot leiden kan Hallo huidige uur partitie steeds een hotspot als Hallo volume van transacties Hallo schaalbaarheid doel voor bereikt een afzonderlijke partitie:</span><span class="sxs-lookup"><span data-stu-id="5f918-803">For example, if you have an application that logs network and resource access by employees, then an entity structure as shown below could result in hello current hour's partition becoming a hotspot if hello volume of transactions reaches hello scalability target for an individual partition:</span></span>  

![][26]

#### <a name="solution"></a><span data-ttu-id="5f918-804">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-804">Solution</span></span>
<span data-ttu-id="5f918-805">Hallo voorkomt volgende alternatieve entiteit structuur een hotspot op een bepaalde partitie als Hallo toepassing Logboeken gebeurtenissen:</span><span class="sxs-lookup"><span data-stu-id="5f918-805">hello following alternative entity structure avoids a hotspot on any particular partition as hello application logs events:</span></span>  

![][27]

<span data-ttu-id="5f918-806">Met dit voorbeeld ziet hoe beide Hallo **PartitionKey** en **RowKey** samengestelde sleutels.</span><span class="sxs-lookup"><span data-stu-id="5f918-806">Notice with this example how both hello **PartitionKey** and **RowKey** are compound keys.</span></span> <span data-ttu-id="5f918-807">Hallo **PartitionKey** gebruikt zowel Hallo afdeling en werknemer-id toodistribute Hallo logboekregistratie op meerdere partities.</span><span class="sxs-lookup"><span data-stu-id="5f918-807">hello **PartitionKey** uses both hello department and employee id toodistribute hello logging across multiple partitions.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-808">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-808">Issues and considerations</span></span>
<span data-ttu-id="5f918-809">Overweeg de volgende punten wanneer u beslist Hallo hoe tooimplement dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-809">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="5f918-810">Biedt Hallo alternatieve sleutelstructuur die voorkomt hot partities maken voor de ondersteuning Hallo-query's op voegt efficiënt maakt voor uw clienttoepassing?</span><span class="sxs-lookup"><span data-stu-id="5f918-810">Does hello alternative key structure that avoids creating hot partitions on inserts efficiently support hello queries your client application makes?</span></span>  
* <span data-ttu-id="5f918-811">Betekent het verwachte aantal transacties dat u waarschijnlijk tooreach hello schaalbaarheidsdoelen voor een afzonderlijke partitie en worden beperkt door Hallo storage-service?</span><span class="sxs-lookup"><span data-stu-id="5f918-811">Does your anticipated volume of transactions mean that you are likely tooreach hello scalability targets for an individual partition and be throttled by hello storage service?</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="5f918-812">Wanneer toouse dit patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-812">When toouse this pattern</span></span>
<span data-ttu-id="5f918-813">Vermijd antivirusprogramma patroon Hallo toevoegen/toevoegen als het volume van transacties waarschijnlijk tooresult is in beperkingen door Hallo storage-service wanneer u een hot partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-813">Avoid hello prepend/append anti-pattern when your volume of transactions is likely tooresult in throttling by hello storage service when you access a hot partition.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="5f918-814">Verwante patronen en richtlijnen</span><span class="sxs-lookup"><span data-stu-id="5f918-814">Related patterns and guidance</span></span>
<span data-ttu-id="5f918-815">Hallo volgende patronen en richtlijnen mogelijk ook relevante bij het implementeren van dit patroon:</span><span class="sxs-lookup"><span data-stu-id="5f918-815">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="5f918-816">Samengestelde sleutel patroon</span><span class="sxs-lookup"><span data-stu-id="5f918-816">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="5f918-817">Patroon voor logboekbestand staart</span><span class="sxs-lookup"><span data-stu-id="5f918-817">Log tail pattern</span></span>](#log-tail-pattern)  
* [<span data-ttu-id="5f918-818">Entiteiten wijzigen</span><span class="sxs-lookup"><span data-stu-id="5f918-818">Modifying entities</span></span>](#modifying-entities)  

### <a name="log-data-anti-pattern"></a><span data-ttu-id="5f918-819">Antivirusprogramma patroon voor logboekbestand gegevens</span><span class="sxs-lookup"><span data-stu-id="5f918-819">Log data anti-pattern</span></span>
<span data-ttu-id="5f918-820">Normaal gesproken moet u Hallo Blob-service in plaats van Hallo tabel service toostore logboekgegevens.</span><span class="sxs-lookup"><span data-stu-id="5f918-820">Typically, you should use hello Blob service instead of hello Table service toostore log data.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="5f918-821">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="5f918-821">Context and problem</span></span>
<span data-ttu-id="5f918-822">Als u een algemeen gebruiksvoorbeeld voor logboekgegevens tooretrieve een selectie van vermeldingen in het logboek voor een specifieke datum/tijd-bereik is: u kunt bijvoorbeeld toofind alle fout- en kritieke berichten die uw toepassing vastgelegd tussen 15:04 en 15:06 op een specifieke datum Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-822">A common use case for log data is tooretrieve a selection of log entries for a specific date/time range: for example, you want toofind all hello error and critical messages that your application logged between 15:04 and 15:06 on a specific date.</span></span> <span data-ttu-id="5f918-823">U niet wilt dat toouse Hallo datum en tijd van Hallo logboek bericht toodetermine Hallo partitie opslaan van entiteiten logboek: dat resulteert in een hot partitie omdat op elk gewenst alle Hallo logboek entiteiten delen Hallo dezelfde **PartitionKey** waarde (Zie de sectie Hallo [antivirusprogramma patroon Prepend/append](#prepend-append-anti-pattern)).</span><span class="sxs-lookup"><span data-stu-id="5f918-823">You do not want toouse hello date and time of hello log message toodetermine hello partition you save log entities to: that results in a hot partition because at any given time, all hello log entities will share hello same **PartitionKey** value (see hello section [Prepend/append anti-pattern](#prepend-append-anti-pattern)).</span></span> <span data-ttu-id="5f918-824">Hallo entiteit schema voor een logboekbericht na resulteert bijvoorbeeld in een hot partitie omdat Hallo-toepassing alle logboekberichten toohello partitie voor Hallo huidige datum en uur schrijft:</span><span class="sxs-lookup"><span data-stu-id="5f918-824">For example, hello following entity schema for a log message results in a hot partition because hello application writes all log messages toohello partition for hello current date and hour:</span></span>  

![][28]

<span data-ttu-id="5f918-825">In dit voorbeeld Hallo **RowKey** bevat Hallo datum en tijd van Hallo logboek bericht tooensure dat logboekberichten worden opgeslagen in datum/tijd-volgorde gesorteerd en bevat een bericht-id als meerdere logboekberichten delen Hallo dezelfde datum en tijd.</span><span class="sxs-lookup"><span data-stu-id="5f918-825">In this example, hello **RowKey** includes hello date and time of hello log message tooensure that log messages are stored sorted in date/time order, and includes a message id in case multiple log messages share hello same date and time.</span></span>  

<span data-ttu-id="5f918-826">Een andere benadering toouse is een **PartitionKey** die ervoor zorgt dat de toepassing hello berichten over een reeks partities schrijft.</span><span class="sxs-lookup"><span data-stu-id="5f918-826">Another approach is toouse a **PartitionKey** that ensures that hello application writes messages across a range of partitions.</span></span> <span data-ttu-id="5f918-827">Bijvoorbeeld, als Hallo bron van het logboek Hallo-bericht een manier toodistribute berichten over veel partities biedt, kan u Hallo entiteit schema te volgen:</span><span class="sxs-lookup"><span data-stu-id="5f918-827">For example, if hello source of hello log message provides a way toodistribute messages across many partitions, you could use hello following entity schema:</span></span>  

![][29]

<span data-ttu-id="5f918-828">Hallo probleem met dit schema is echter dat alle berichten in het logboek voor een bepaalde periode moet u zoeken Hallo tooretrieve elke partitie in de tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-828">However, hello problem with this schema is that tooretrieve all hello log messages for a specific time span you must search every partition in hello table.</span></span>

#### <a name="solution"></a><span data-ttu-id="5f918-829">Oplossing</span><span class="sxs-lookup"><span data-stu-id="5f918-829">Solution</span></span>
<span data-ttu-id="5f918-830">Hallo vorige sectie gemarkeerde Hallo probleem van toouse probeert tabel service toostore logboekvermeldingen Hallo en twee onvoldoende voorgesteld, ontwerpen.</span><span class="sxs-lookup"><span data-stu-id="5f918-830">hello previous section highlighted hello problem of trying toouse hello Table service toostore log entries and suggested two, unsatisfactory, designs.</span></span> <span data-ttu-id="5f918-831">Een oplossing geleid tooa hot partitie met Hallo risico slechte prestaties schrijven logboekberichten; Hallo andere oplossing heeft geresulteerd in slechte queryprestaties vanwege Hallo vereiste tooscan elke partitie in Hallo tabel tooretrieve berichten in het logboek voor een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="5f918-831">One solution led tooa hot partition with hello risk of poor performance writing log messages; hello other solution resulted in poor query performance because of hello requirement tooscan every partition in hello table tooretrieve log messages for a specific time span.</span></span> <span data-ttu-id="5f918-832">BLOB storage biedt een betere oplossing voor dit soort scenario en dit is hoe Azure Storage Analytics winkels Hallo logboekgegevens worden verzameld.</span><span class="sxs-lookup"><span data-stu-id="5f918-832">Blob storage offers a better solution for this type of scenario and this is how Azure Storage Analytics stores hello log data it collects.</span></span>  

<span data-ttu-id="5f918-833">Deze sectie geeft een overzicht van hoe opslag Analytics logboekgegevens opslaat in de blob-opslag ter illustratie van deze benadering toostoring gegevens die u doorgaans een query voor het bereik.</span><span class="sxs-lookup"><span data-stu-id="5f918-833">This section outlines how Storage Analytics stores log data in blob storage as an illustration of this approach toostoring data that you typically query by range.</span></span>  

<span data-ttu-id="5f918-834">Storage Analytics slaat logboekberichten in een indeling met scheidingstekens in meerdere blobs.</span><span class="sxs-lookup"><span data-stu-id="5f918-834">Storage Analytics stores log messages in a delimited format in multiple blobs.</span></span> <span data-ttu-id="5f918-835">Hallo gescheiden indeling kunt u gemakkelijk voor een client toepassingsgegevens tooparse Hallo in logboek het Hallo-bericht.</span><span class="sxs-lookup"><span data-stu-id="5f918-835">hello delimited format makes it easy for a client application tooparse hello data in hello log message.</span></span>  

<span data-ttu-id="5f918-836">Storage Analytics maakt gebruik van een naamgevingsconventie voor blobs waarmee u toolocate Hallo-blob (of BLOB's) die bevatten Hallo logboekberichten die u zoekt.</span><span class="sxs-lookup"><span data-stu-id="5f918-836">Storage Analytics uses a naming convention for blobs that enables you toolocate hello blob (or blobs) that contain hello log messages for which you are searching.</span></span> <span data-ttu-id="5f918-837">Een blob met de naam 'queue/2014/07/31/1800/000001.log' bevat bijvoorbeeld logboekberichten die betrekking hebben toohello queue-service voor Hallo uur om 18:00 uur op 31 juli 2014 wordt gestart.</span><span class="sxs-lookup"><span data-stu-id="5f918-837">For example, a blob named "queue/2014/07/31/1800/000001.log" contains log messages that relate toohello queue service for hello hour starting at 18:00 on 31 July 2014.</span></span> <span data-ttu-id="5f918-838">Hallo '000001' geeft aan dat dit de eerste logboekbestand Hallo voor deze periode.</span><span class="sxs-lookup"><span data-stu-id="5f918-838">hello "000001" indicates that this is hello first log file for this period.</span></span> <span data-ttu-id="5f918-839">Storage Analytics registreert ook eerst Hallo tijdstempels Hallo en meld u laatste berichten die in Hallo-bestand wordt opgeslagen als onderdeel van de metagegevens van het Hallo-blob.</span><span class="sxs-lookup"><span data-stu-id="5f918-839">Storage Analytics also records hello timestamps of hello first and last log messages stored in hello file as part of hello blob's metadata.</span></span> <span data-ttu-id="5f918-840">Hallo API voor blob-opslag kunt u blobs niet in een container op basis van een voorvoegsel vinden: toolocate alle Hallo blobs die wachtrij bevatten meld gegevens voor Hallo uur om 18:00 uur wordt gestart, kunt u Hallo voorvoegsel 'wachtrij/2014/07/31/1800."</span><span class="sxs-lookup"><span data-stu-id="5f918-840">hello API for blob storage enables you locate blobs in a container based on a name prefix: toolocate all hello blobs that contain queue log data for hello hour starting at 18:00, you can use hello prefix "queue/2014/07/31/1800."</span></span>  

<span data-ttu-id="5f918-841">Storage Analytics logboekberichten intern buffert en werkt de juiste blob Hallo periodiek of maakt een nieuw bestand met de meest recente batch Hallo van logboekvermeldingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-841">Storage Analytics buffers log messages internally and then periodically updates hello appropriate blob or creates a new one with hello latest batch of log entries.</span></span> <span data-ttu-id="5f918-842">Hierdoor Hallo aantal schrijfbewerkingen deze toohello blob-service moet uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="5f918-842">This reduces hello number of writes it must perform toohello blob service.</span></span>  

<span data-ttu-id="5f918-843">Als u een vergelijkbare oplossing in uw eigen toepassing implementeert, moet u overwegen hoe toomanage compromis tussen betrouwbaarheid (elke opslag voor toepassingslogboeken vermelding tooblob schrijven als dit gebeurt) en de kosten en schaalbaarheid Hallo (buffer updates in uw toepassing en schrijven van deze tooblob opslag in batches).</span><span class="sxs-lookup"><span data-stu-id="5f918-843">If you are implementing a similar solution in your own application, you must consider how toomanage hello trade-off between reliability (writing every log entry tooblob storage as it happens) and cost and scalability (buffering updates in your application and writing them tooblob storage in batches).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="5f918-844">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="5f918-844">Issues and considerations</span></span>
<span data-ttu-id="5f918-845">Overweeg de volgende punten bij het bepalen hoe de gegevens voor het vastleggen van toostore Hallo:</span><span class="sxs-lookup"><span data-stu-id="5f918-845">Consider hello following points when deciding how toostore log data:</span></span>  

* <span data-ttu-id="5f918-846">Als u een tabelontwerp dat potentiële hot partities voorkomt maakt, merkt u dat u geen toegang uw logboekgegevens efficiënt tot.</span><span class="sxs-lookup"><span data-stu-id="5f918-846">If you create a table design that avoids potential hot partitions, you may find that you cannot access your log data efficiently.</span></span>  
* <span data-ttu-id="5f918-847">tooprocess gegevens vastleggen, een client moet vaak tooload veel records.</span><span class="sxs-lookup"><span data-stu-id="5f918-847">tooprocess log data, a client often needs tooload many records.</span></span>  
* <span data-ttu-id="5f918-848">Hoewel logboekgegevens is vaak opgebouwd, kan de blob-opslag een betere oplossing zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-848">Although log data is often structured, blob storage may be a better solution.</span></span>  

### <a name="implementation-considerations"></a><span data-ttu-id="5f918-849">Overwegingen bij de implementatie</span><span class="sxs-lookup"><span data-stu-id="5f918-849">Implementation considerations</span></span>
<span data-ttu-id="5f918-850">Deze sectie worden enkele Hallo overwegingen toobear rekening besproken wanneer u Hallo patronen die zijn beschreven in de vorige secties Hallo implementeert.</span><span class="sxs-lookup"><span data-stu-id="5f918-850">This section discusses some of hello considerations toobear in mind when you implement hello patterns described in hello previous sections.</span></span> <span data-ttu-id="5f918-851">De meeste van deze sectie bevat voorbeelden geschreven in C# en die gebruikmaken van Hallo Storage-clientbibliotheek (versie 4.3.0 op Hallo moment van schrijven).</span><span class="sxs-lookup"><span data-stu-id="5f918-851">Most of this section uses examples written in C# that use hello Storage Client Library (version 4.3.0 at hello time of writing).</span></span>  

### <a name="retrieving-entities"></a><span data-ttu-id="5f918-852">Entiteiten ophalen</span><span class="sxs-lookup"><span data-stu-id="5f918-852">Retrieving entities</span></span>
<span data-ttu-id="5f918-853">Zoals beschreven in de sectie Hallo [ontwerp voor het uitvoeren van query's](#design-for-querying), Hallo meest efficiënt query is een punt-query.</span><span class="sxs-lookup"><span data-stu-id="5f918-853">As discussed in hello section [Design for querying](#design-for-querying), hello most efficient query is a point query.</span></span> <span data-ttu-id="5f918-854">Echter, in sommige gevallen moet u mogelijk tooretrieve meerdere entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-854">However, in some scenarios you may need tooretrieve multiple entities.</span></span> <span data-ttu-id="5f918-855">Deze sectie beschrijft een aantal algemene benaderingen tooretrieving entiteiten Hallo Storage-clientbibliotheek gebruiken.</span><span class="sxs-lookup"><span data-stu-id="5f918-855">This section describes some common approaches tooretrieving entities using hello Storage Client Library.</span></span>  

#### <a name="executing-a-point-query-using-hello-storage-client-library"></a><span data-ttu-id="5f918-856">Uitvoeren van een punt-query Hallo Storage-clientbibliotheek</span><span class="sxs-lookup"><span data-stu-id="5f918-856">Executing a point query using hello Storage Client Library</span></span>
<span data-ttu-id="5f918-857">Hallo gemakkelijkste manier tooexecute een punt-query is toouse hello **ophalen** bewerking tabel, zoals wordt weergegeven in de volgende C#-codefragment Hallo die ophaalt van een entity met een **PartitionKey** van de waarde 'verkoop' en een  **RowKey** van de waarde '212':</span><span class="sxs-lookup"><span data-stu-id="5f918-857">hello easiest way tooexecute a point query is toouse hello **Retrieve** table operation as shown in hello following C# code snippet that retrieves an entity with a **PartitionKey** of value "Sales" and a **RowKey** of value "212":</span></span>  

```csharp
TableOperation retrieveOperation = TableOperation.Retrieve<EmployeeEntity>("Sales", "212");
var retrieveResult = employeeTable.Execute(retrieveOperation);
if (retrieveResult.Result != null)
{
    EmployeeEntity employee = (EmployeeEntity)retrieveResult.Result;
    ...
}  
```

<span data-ttu-id="5f918-858">U ziet hoe in dit voorbeeld Hallo entiteit verwacht het ophalen van toobe van het type **EmployeeEntity**.</span><span class="sxs-lookup"><span data-stu-id="5f918-858">Notice how this example expects hello entity it retrieves toobe of type **EmployeeEntity**.</span></span>  

#### <a name="retrieving-multiple-entities-using-linq"></a><span data-ttu-id="5f918-859">Bij het ophalen van meerdere entiteiten met behulp van LINQ</span><span class="sxs-lookup"><span data-stu-id="5f918-859">Retrieving multiple entities using LINQ</span></span>
<span data-ttu-id="5f918-860">U kunt meerdere entiteiten ophalen met behulp van LINQ met Storage-clientbibliotheek en het opgeven van een query met een **waar** component.</span><span class="sxs-lookup"><span data-stu-id="5f918-860">You can retrieve multiple entities by using LINQ with Storage Client Library and specifying a query with a **where** clause.</span></span> <span data-ttu-id="5f918-861">een tabelscan tooavoid, moet u altijd Hallo opnemen **PartitionKey** waarde in Hallo waar component, en indien mogelijk Hallo **RowKey** tooavoid tabel en partitie scans waarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-861">tooavoid a table scan, you should always include hello **PartitionKey** value in hello where clause, and if possible hello **RowKey** value tooavoid table and partition scans.</span></span> <span data-ttu-id="5f918-862">Hallo tabelservice ondersteunt een beperkte set vergelijking operators (groter dan groter dan of gelijk is, minder dan, kleiner dan of gelijk zijn, gelijk en niet gelijk) toouse in Hallo waar component.</span><span class="sxs-lookup"><span data-stu-id="5f918-862">hello table service supports a limited set of comparison operators (greater than, greater than or equal, less than, less than or equal, equal, and not equal) toouse in hello where clause.</span></span> <span data-ttu-id="5f918-863">Hallo volgende C#-codefragment vindt alle Hallo werknemers waarvan de laatste naam begint met "B" (ervan uitgaande dat Hallo **RowKey** winkels Hallo achternaam) van de verkoopafdeling Hallo (ervan uitgaande dat Hallo **PartitionKey** slaat de naam van de afdeling Hallo):</span><span class="sxs-lookup"><span data-stu-id="5f918-863">hello following C# code snippet finds all hello employees whose last name starts with "B" (assuming that hello **RowKey** stores hello last name) in hello sales department (assuming hello **PartitionKey** stores hello department name):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = employeeTable.CreateQuery<EmployeeEntity>();
var query = (from employee in employeeQuery
            where employee.PartitionKey == "Sales" &&
            employee.RowKey.CompareTo("B") >= 0 &&
            employee.RowKey.CompareTo("C") < 0
            select employee).AsTableQuery();
var employees = query.Execute();  
```

<span data-ttu-id="5f918-864">U ziet hoe Hallo-query is zowel een **RowKey** en een **PartitionKey** tooensure betere prestaties.</span><span class="sxs-lookup"><span data-stu-id="5f918-864">Notice how hello query specifies both a **RowKey** and a **PartitionKey** tooensure better performance.</span></span>  

<span data-ttu-id="5f918-865">Hallo volgende codevoorbeeld toont dezelfde functionaliteit Hallo beheersen API gebruiken (Zie voor meer informatie over beheersen API's in het algemeen [aanbevolen procedures voor het ontwerpen van een beheersen API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span><span class="sxs-lookup"><span data-stu-id="5f918-865">hello following code sample shows equivalent functionality using hello fluent API (for more information about fluent APIs in general, see [Best Practices for Designing a Fluent API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = new TableQuery<EmployeeEntity>().Where(
    TableQuery.CombineFilters(
    TableQuery.CombineFilters(
        TableQuery.GenerateFilterCondition(
    "PartitionKey", QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.GenerateFilterCondition(
    "RowKey", QueryComparisons.GreaterThanOrEqual, "B")
),
TableOperators.And,
TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.LessThan, "C")
    )
);
var employees = employeeTable.ExecuteQuery(employeeQuery);  
```

> [!NOTE]
> <span data-ttu-id="5f918-866">Hallo voorbeeld worden genest meerdere **CombineFilters** methoden tooinclude Hallo drie filtervoorwaarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-866">hello sample nests multiple **CombineFilters** methods tooinclude hello three filter conditions.</span></span>  
> 
> 

#### <a name="retrieving-large-numbers-of-entities-from-a-query"></a><span data-ttu-id="5f918-867">Groot aantal entiteiten ophalen uit een query</span><span class="sxs-lookup"><span data-stu-id="5f918-867">Retrieving large numbers of entities from a query</span></span>
<span data-ttu-id="5f918-868">Een optimale query retourneert een afzonderlijke entiteit op basis van een **PartitionKey** waarde en een **RowKey** waarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-868">An optimal query returns an individual entity based on a **PartitionKey** value and a **RowKey** value.</span></span> <span data-ttu-id="5f918-869">Echter, in sommige scenario's wellicht hebt u een vereiste tooreturn veel entiteiten van Hallo dezelfde partitie of zelfs van veel partities.</span><span class="sxs-lookup"><span data-stu-id="5f918-869">However, in some scenarios you may have a requirement tooreturn many entities from hello same partition or even from many partitions.</span></span>  

<span data-ttu-id="5f918-870">In dergelijke gevallen moet u altijd volledig Hallo prestaties van uw toepassing testen.</span><span class="sxs-lookup"><span data-stu-id="5f918-870">You should always fully test hello performance of your application in such scenarios.</span></span>  

<span data-ttu-id="5f918-871">Een query op Hallo tabelservice kan maximaal 1000 entiteiten in één keer worden geretourneerd en wordt uitgevoerd voor een maximum van vijf seconden.</span><span class="sxs-lookup"><span data-stu-id="5f918-871">A query against hello table service may return a maximum of 1,000 entities at one time and may execute for a maximum of five seconds.</span></span> <span data-ttu-id="5f918-872">Als hello resultatenset bevat meer dan 1000 entiteiten, als Hallo-query is niet voltooid binnen vijf seconden, of als Hallo query grens van de partitie hello overschrijdt, Hallo tabel-service retourneert een voortzetting token tooenable toorequest Hallo van client-toepassing hello volgende set van entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-872">If hello result set contains more than 1,000 entities, if hello query did not complete within five seconds, or if hello query crosses hello partition boundary, hello Table service returns a continuation token tooenable hello client application toorequest hello next set of entities.</span></span> <span data-ttu-id="5f918-873">Zie voor meer informatie over hoe voortzetting werk tokens [querytime-out en paginering](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span><span class="sxs-lookup"><span data-stu-id="5f918-873">For more information about how continuation tokens work, see [Query Timeout and Pagination](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span></span>  

<span data-ttu-id="5f918-874">Als u Hallo Storage-clientbibliotheek gebruikt, kan automatisch verwerken voortzetting tokens voor u als deze entiteiten van Hallo tabel-service retourneert.</span><span class="sxs-lookup"><span data-stu-id="5f918-874">If you are using hello Storage Client Library, it can automatically handle continuation tokens for you as it returns entities from hello Table service.</span></span> <span data-ttu-id="5f918-875">Hallo verwerkt C# codevoorbeeld Hallo Storage-clientbibliotheek automatisch met voortzetting tokens als Hallo tabelservice ze in een antwoord geretourneerd:</span><span class="sxs-lookup"><span data-stu-id="5f918-875">hello following C# code sample using hello Storage Client Library automatically handles continuation tokens if hello table service returns them in a response:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

var employees = employeeTable.ExecuteQuery(employeeQuery);
foreach (var emp in employees)
{
        ...
}  
```

<span data-ttu-id="5f918-876">Hallo volgende C#-code voortzetting tokens expliciet worden verwerkt:</span><span class="sxs-lookup"><span data-stu-id="5f918-876">hello following C# code handles continuation tokens explicitly:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

TableContinuationToken continuationToken = null;

do
{
        var employees = employeeTable.ExecuteQuerySegmented(
        employeeQuery, continuationToken);
    foreach (var emp in employees)
    {
    ...
    }
    continuationToken = employees.ContinuationToken;
} while (continuationToken != null);  
```

<span data-ttu-id="5f918-877">Voortzetting tokens expliciet gebruikt, kunt u bepalen wanneer uw toepassing hello volgende segment van de gegevens opgehaald.</span><span class="sxs-lookup"><span data-stu-id="5f918-877">By using continuation tokens explicitly, you can control when your application retrieves hello next segment of data.</span></span> <span data-ttu-id="5f918-878">Bijvoorbeeld, als u de clienttoepassing kan gebruikers toopage via Hallo entiteiten die zijn opgeslagen in een tabel, kan een gebruiker besluiten niet toopage via alle Hallo entiteiten opgehaald door Hallo query zodat uw toepassing zou een voortzetting token tooretrieve Hallo alleen naast gebruiken segment wanneer Hallo gebruiker paging via alle Hallo entiteiten in het huidige segment Hallo was voltooid.</span><span class="sxs-lookup"><span data-stu-id="5f918-878">For example, if your client application enables users toopage through hello entities stored in a table, a user may decide not toopage through all hello entities retrieved by hello query so your application would only use a continuation token tooretrieve hello next segment when hello user had finished paging through all hello entities in hello current segment.</span></span> <span data-ttu-id="5f918-879">Deze methode biedt verschillende voordelen:</span><span class="sxs-lookup"><span data-stu-id="5f918-879">This approach has several benefits:</span></span>  

* <span data-ttu-id="5f918-880">Hiermee kunt u toolimit Hallo hoeveelheid gegevens tooretrieve van Hallo tabelservice en via Hallo netwerk te verplaatsen.</span><span class="sxs-lookup"><span data-stu-id="5f918-880">It enables you toolimit hello amount of data tooretrieve from hello Table service and that you move over hello network.</span></span>  
* <span data-ttu-id="5f918-881">Hiermee kunt u tooperform asynchrone i/o in .NET.</span><span class="sxs-lookup"><span data-stu-id="5f918-881">It enables you tooperform asynchronous IO in .NET.</span></span>  
* <span data-ttu-id="5f918-882">Hiermee kunt u tooserialize Hallo voortzetting token toopersistent opslag zodat u kunt doorgaan in Hallo-gebeurtenis van een toepassing is vastgelopen.</span><span class="sxs-lookup"><span data-stu-id="5f918-882">It enables you tooserialize hello continuation token toopersistent storage so you can continue in hello event of an application crash.</span></span>  

> [!NOTE]
> <span data-ttu-id="5f918-883">Een vervolgtoken retourneert doorgaans een segment met 1000 entiteiten, hoewel deze mogelijk minder.</span><span class="sxs-lookup"><span data-stu-id="5f918-883">A continuation token typically returns a segment containing 1,000 entities, although it may be fewer.</span></span> <span data-ttu-id="5f918-884">Dit is ook Hallo geval als u het aantal vermeldingen met behulp van een query retourneert Hallo beperken **nemen** tooreturn Hallo eerste n entiteiten die voldoen aan uw criteria lookup: Hallo tabel-service kan een segment met minder dan n entiteiten langs retourneren met een token tooenable voortzetting Hallo u tooretrieve resterende entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-884">This is also hello case if you limit hello number of entries a query returns by using **Take** tooreturn hello first n entities that match your lookup criteria: hello table service may return a segment containing fewer than n entities along with a continuation token tooenable you tooretrieve hello remaining entities.</span></span>  
> 
> 

<span data-ttu-id="5f918-885">Hallo ziet volgende C#-code u hoe toomodify Hallo aantal entiteiten dat is geretourneerd binnen een segment:</span><span class="sxs-lookup"><span data-stu-id="5f918-885">hello following C# code shows how toomodify hello number of entities returned inside a segment:</span></span>  

```csharp
employeeQuery.TakeCount = 50;  
```

#### <a name="server-side-projection"></a><span data-ttu-id="5f918-886">Projectie-serverzijde</span><span class="sxs-lookup"><span data-stu-id="5f918-886">Server-side projection</span></span>
<span data-ttu-id="5f918-887">Één entiteit kunt too255 eigenschappen en too1 MB groot zijn.</span><span class="sxs-lookup"><span data-stu-id="5f918-887">A single entity can have up too255 properties and be up too1 MB in size.</span></span> <span data-ttu-id="5f918-888">Wanneer u een query uitvoeren op tabel Hallo en entiteiten ophalen, u niet alle Hallo eigenschappen nodig en kunt voorkomen dat de gegevensoverdracht onnodig (toohelp verminderen en de kosten van latentie).</span><span class="sxs-lookup"><span data-stu-id="5f918-888">When you query hello table and retrieve entities, you may not need all hello properties and can avoid transferring data unnecessarily (toohelp reduce latency and cost).</span></span> <span data-ttu-id="5f918-889">U kunt serverzijde projectie tootransfer alleen Hallo-eigenschappen die u nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="5f918-889">You can use server-side projection tootransfer just hello properties you need.</span></span> <span data-ttu-id="5f918-890">Hallo volgende voorbeeld is er Hallo NET haalt **e** eigenschap (samen met **PartitionKey**, **RowKey**, **tijdstempel**, en  **ETag**) van Hallo entiteiten die zijn geselecteerd door Hallo-query.</span><span class="sxs-lookup"><span data-stu-id="5f918-890">hello following example is retrieves just hello **Email** property (along with **PartitionKey**, **RowKey**, **Timestamp**, and **ETag**) from hello entities selected by hello query.</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
List<string> columns = new List<string>() { "Email" };
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter).Select(columns);

var entities = employeeTable.ExecuteQuery(employeeQuery);
foreach (var e in entities)
{
        Console.WriteLine("RowKey: {0}, EmployeeEmail: {1}", e.RowKey, e.Email);
}  
```

<span data-ttu-id="5f918-891">U ziet hoe Hallo **RowKey** waarde is beschikbaar, zelfs als deze niet is opgenomen in de lijst van eigenschappen tooretrieve Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-891">Notice how hello **RowKey** value is available even though it was not included in hello list of properties tooretrieve.</span></span>  

### <a name="modifying-entities"></a><span data-ttu-id="5f918-892">Entiteiten wijzigen</span><span class="sxs-lookup"><span data-stu-id="5f918-892">Modifying entities</span></span>
<span data-ttu-id="5f918-893">Hallo Storage-clientbibliotheek kunt u toomodify uw entiteiten in de tabelservice Hallo door invoegen opgeslagen, verwijderen en bijwerken entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-893">hello Storage Client Library enables you toomodify your entities stored in hello table service by inserting, deleting, and updating entities.</span></span> <span data-ttu-id="5f918-894">U kunt EGTs toobatch meerdere insert, update en delete-bewerkingen samen tooreduce Hallo aantal retouren vereist en de prestaties van uw oplossing Hallo verbeteren.</span><span class="sxs-lookup"><span data-stu-id="5f918-894">You can use EGTs toobatch multiple insert, update, and delete operations together tooreduce hello number of round trips required and improve hello performance of your solution.</span></span>  

<span data-ttu-id="5f918-895">Rekening mee dat uitzonderingen wanneer Hallo Storage-clientbibliotheek wordt uitgevoerd een EGT doorgaans Hallo index van Hallo-entiteit die Hallo batch toofail veroorzaakt.</span><span class="sxs-lookup"><span data-stu-id="5f918-895">Note that exceptions thrown when hello Storage Client Library executes an EGT typically include hello index of hello entity that caused hello batch toofail.</span></span> <span data-ttu-id="5f918-896">Dit is handig wanneer u code die gebruikmaakt van EGTs foutopsporing.</span><span class="sxs-lookup"><span data-stu-id="5f918-896">This is helpful when you are debugging code that uses EGTs.</span></span>  

<span data-ttu-id="5f918-897">U moet ook overwegen hoe uw ontwerp is van invloed op hoe de clienttoepassing gelijktijdigheid van taken en updatebewerkingen verwerkt.</span><span class="sxs-lookup"><span data-stu-id="5f918-897">You should also consider how your design affects how your client application handles concurrency and update operations.</span></span>  

#### <a name="managing-concurrency"></a><span data-ttu-id="5f918-898">Gelijktijdigheid van taken beheren</span><span class="sxs-lookup"><span data-stu-id="5f918-898">Managing concurrency</span></span>
<span data-ttu-id="5f918-899">Standaard Hallo tabelservice implementeert optimistische gelijktijdigheid controleert op Hallo niveau van afzonderlijke entiteiten voor de **invoegen**, **samenvoegen**, en **verwijderen** -bewerkingen Hoewel het mogelijk voor een client tooforce Hallo tabel service toobypass deze controles.</span><span class="sxs-lookup"><span data-stu-id="5f918-899">By default, hello table service implements optimistic concurrency checks at hello level of individual entities for **Insert**, **Merge**, and **Delete** operations, although it is possible for a client tooforce hello table service toobypass these checks.</span></span> <span data-ttu-id="5f918-900">Zie voor meer informatie over hoe de tabelservice Hallo gelijktijdigheid beheert [gelijktijdigheid beheren in Microsoft Azure Storage](../storage/common/storage-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="5f918-900">For more information about how hello table service manages concurrency, see  [Managing Concurrency in Microsoft Azure Storage](../storage/common/storage-concurrency.md).</span></span>  

#### <a name="merge-or-replace"></a><span data-ttu-id="5f918-901">Samenvoegen of vervangen</span><span class="sxs-lookup"><span data-stu-id="5f918-901">Merge or replace</span></span>
<span data-ttu-id="5f918-902">Hallo **vervangen** methode Hallo **TableOperation** klasse altijd Hallo volledige entiteit in Hallo tabelservice vervangt.</span><span class="sxs-lookup"><span data-stu-id="5f918-902">hello **Replace** method of hello **TableOperation** class always replaces hello complete entity in hello Table service.</span></span> <span data-ttu-id="5f918-903">Als u geen een eigenschap in Hallo aanvraag wanneer deze eigenschap in Hallo opgeslagen entiteit bestaat, verwijdert Hallo aanvraag dat eigenschap uit Hallo entiteit opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="5f918-903">If you do not include a property in hello request when that property exists in hello stored entity, hello request removes that property from hello stored entity.</span></span> <span data-ttu-id="5f918-904">Tenzij u een eigenschap van een opgeslagen entiteit expliciet tooremove wilt, moet u elke eigenschap opnemen in Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="5f918-904">Unless you want tooremove a property explicitly from a stored entity, you must include every property in hello request.</span></span>  

<span data-ttu-id="5f918-905">U kunt Hallo **samenvoegen** methode Hallo **TableOperation** klasse tooreduce Hallo hoeveelheid gegevens die u toohello tabelservice verzendt als u wilt dat tooupdate een entiteit.</span><span class="sxs-lookup"><span data-stu-id="5f918-905">You can use hello **Merge** method of hello **TableOperation** class tooreduce hello amount of data that you send toohello Table service when you want tooupdate an entity.</span></span> <span data-ttu-id="5f918-906">Hallo **samenvoegen** methode vervangt alle eigenschappen in Hallo opgeslagen entiteit met eigenschapswaarden van Hallo entiteit in Hallo aanvraag opgenomen, maar blijft intact alle eigenschappen in Hallo opgeslagen entiteit die niet zijn opgenomen in het Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="5f918-906">hello **Merge** method replaces any properties in hello stored entity with property values from hello entity included in hello request, but leaves intact any properties in hello stored entity that are not included in hello request.</span></span> <span data-ttu-id="5f918-907">Dit is handig als u grote entiteiten en hoeft alleen tooupdate een klein aantal eigenschappen in een aanvraag.</span><span class="sxs-lookup"><span data-stu-id="5f918-907">This is useful if you have large entities and only need tooupdate a small number of properties in a request.</span></span>  

> [!NOTE]
> <span data-ttu-id="5f918-908">Hallo **vervangen** en **samenvoegen** twee methoden mislukken als Hallo entiteit niet bestaat.</span><span class="sxs-lookup"><span data-stu-id="5f918-908">hello **Replace** and **Merge** methods fail if hello entity does not exist.</span></span> <span data-ttu-id="5f918-909">Als alternatief kunt u Hallo **InsertOrReplace** en **InsertOrMerge** methoden die nieuwe entiteit maken als deze niet bestaat.</span><span class="sxs-lookup"><span data-stu-id="5f918-909">As an alternative, you can use hello **InsertOrReplace** and **InsertOrMerge** methods that create a new entity if it doesn't exist.</span></span>  
> 
> 

### <a name="working-with-heterogeneous-entity-types"></a><span data-ttu-id="5f918-910">Werken met heterogene Entiteitstypen</span><span class="sxs-lookup"><span data-stu-id="5f918-910">Working with heterogeneous entity types</span></span>
<span data-ttu-id="5f918-911">Hallo tabel-service is een *schema minder* tabel archief dat betekent dat één tabel entiteiten van meerdere typen bieden geweldige flexibiliteit in uw ontwerp kunt opslaan.</span><span class="sxs-lookup"><span data-stu-id="5f918-911">hello Table service is a *schema-less* table store that means that a single table can store entities of multiple types providing great flexibility in your design.</span></span> <span data-ttu-id="5f918-912">Hallo wordt volgende voorbeeld een tabel die het opslaan van zowel werknemer en entiteiten van de afdeling:</span><span class="sxs-lookup"><span data-stu-id="5f918-912">hello following example illustrates a table storing both employee and department entities:</span></span>  

<table>
<tr>
<th><span data-ttu-id="5f918-913">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="5f918-913">PartitionKey</span></span></th>
<th><span data-ttu-id="5f918-914">RowKey</span><span class="sxs-lookup"><span data-stu-id="5f918-914">RowKey</span></span></th>
<th><span data-ttu-id="5f918-915">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="5f918-915">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-916">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-916">FirstName</span></span></th>
<th><span data-ttu-id="5f918-917">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-917">LastName</span></span></th>
<th><span data-ttu-id="5f918-918">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-918">Age</span></span></th>
<th><span data-ttu-id="5f918-919">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-919">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-920">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-920">FirstName</span></span></th>
<th><span data-ttu-id="5f918-921">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-921">LastName</span></span></th>
<th><span data-ttu-id="5f918-922">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-922">Age</span></span></th>
<th><span data-ttu-id="5f918-923">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-923">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-924">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="5f918-924">DepartmentName</span></span></th>
<th><span data-ttu-id="5f918-925">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="5f918-925">EmployeeCount</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-926">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-926">FirstName</span></span></th>
<th><span data-ttu-id="5f918-927">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-927">LastName</span></span></th>
<th><span data-ttu-id="5f918-928">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-928">Age</span></span></th>
<th><span data-ttu-id="5f918-929">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-929">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="5f918-930">Denk eraan dat elke entiteit moet nog steeds **PartitionKey**, **RowKey**, en **tijdstempel** waarden, maar mogelijk elke gewenste set eigenschappen.</span><span class="sxs-lookup"><span data-stu-id="5f918-930">Note that each entity must still have **PartitionKey**, **RowKey**, and **Timestamp** values, but may have any set of properties.</span></span> <span data-ttu-id="5f918-931">Bovendien, er is niets tooindicate Hallo Typ van een entiteit, tenzij u toostore ergens die informatie.</span><span class="sxs-lookup"><span data-stu-id="5f918-931">Furthermore, there is nothing tooindicate hello type of an entity unless you choose toostore that information somewhere.</span></span> <span data-ttu-id="5f918-932">Er zijn twee opties voor het entiteitstype Hallo identificeren:</span><span class="sxs-lookup"><span data-stu-id="5f918-932">There are two options for identifying hello entity type:</span></span>  

* <span data-ttu-id="5f918-933">Toevoegen van Hallo entiteit type toohello **RowKey** (of mogelijk Hallo **PartitionKey**).</span><span class="sxs-lookup"><span data-stu-id="5f918-933">Prepend hello entity type toohello **RowKey** (or possibly hello **PartitionKey**).</span></span> <span data-ttu-id="5f918-934">Bijvoorbeeld: **EMPLOYEE_000123** of **DEPARTMENT_SALES** als **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-934">For example, **EMPLOYEE_000123** or **DEPARTMENT_SALES** as **RowKey** values.</span></span>  
* <span data-ttu-id="5f918-935">Gebruik een afzonderlijke eigenschap toorecord Hallo entiteitstype zoals weergegeven in onderstaande tabel voor Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-935">Use a separate property toorecord hello entity type as shown in hello table below.</span></span>  

<table>
<tr>
<th><span data-ttu-id="5f918-936">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="5f918-936">PartitionKey</span></span></th>
<th><span data-ttu-id="5f918-937">RowKey</span><span class="sxs-lookup"><span data-stu-id="5f918-937">RowKey</span></span></th>
<th><span data-ttu-id="5f918-938">tijdstempel</span><span class="sxs-lookup"><span data-stu-id="5f918-938">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-939">EntityType</span><span class="sxs-lookup"><span data-stu-id="5f918-939">EntityType</span></span></th>
<th><span data-ttu-id="5f918-940">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-940">FirstName</span></span></th>
<th><span data-ttu-id="5f918-941">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-941">LastName</span></span></th>
<th><span data-ttu-id="5f918-942">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-942">Age</span></span></th>
<th><span data-ttu-id="5f918-943">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-943">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-944">Werknemer</span><span class="sxs-lookup"><span data-stu-id="5f918-944">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-945">EntityType</span><span class="sxs-lookup"><span data-stu-id="5f918-945">EntityType</span></span></th>
<th><span data-ttu-id="5f918-946">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-946">FirstName</span></span></th>
<th><span data-ttu-id="5f918-947">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-947">LastName</span></span></th>
<th><span data-ttu-id="5f918-948">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-948">Age</span></span></th>
<th><span data-ttu-id="5f918-949">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-949">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-950">Werknemer</span><span class="sxs-lookup"><span data-stu-id="5f918-950">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-951">EntityType</span><span class="sxs-lookup"><span data-stu-id="5f918-951">EntityType</span></span></th>
<th><span data-ttu-id="5f918-952">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="5f918-952">DepartmentName</span></span></th>
<th><span data-ttu-id="5f918-953">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="5f918-953">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-954">Afdeling</span><span class="sxs-lookup"><span data-stu-id="5f918-954">Department</span></span></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="5f918-955">EntityType</span><span class="sxs-lookup"><span data-stu-id="5f918-955">EntityType</span></span></th>
<th><span data-ttu-id="5f918-956">Voornaam</span><span class="sxs-lookup"><span data-stu-id="5f918-956">FirstName</span></span></th>
<th><span data-ttu-id="5f918-957">Achternaam</span><span class="sxs-lookup"><span data-stu-id="5f918-957">LastName</span></span></th>
<th><span data-ttu-id="5f918-958">Leeftijd</span><span class="sxs-lookup"><span data-stu-id="5f918-958">Age</span></span></th>
<th><span data-ttu-id="5f918-959">E-mail</span><span class="sxs-lookup"><span data-stu-id="5f918-959">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="5f918-960">Werknemer</span><span class="sxs-lookup"><span data-stu-id="5f918-960">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="5f918-961">Hallo eerste optie voorafgaand Hallo entiteit type toohello **RowKey**, is handig als er twee entiteiten met verschillende typen wellicht Hallo mogelijkheid dezelfde sleutelwaarde.</span><span class="sxs-lookup"><span data-stu-id="5f918-961">hello first option, prepending hello entity type toohello **RowKey**, is useful if there is a possibility that two entities of different types might have hello same key value.</span></span> <span data-ttu-id="5f918-962">Deze groepen ook entiteiten van het Hallo dezelfde Typ samen in Hallo-partitie.</span><span class="sxs-lookup"><span data-stu-id="5f918-962">It also groups entities of hello same type together in hello partition.</span></span>  

<span data-ttu-id="5f918-963">Hallo technieken die worden besproken in deze sectie zijn vooral van belang toohello discussie [relaties voor overname](#inheritance-relationships) eerder in deze handleiding in de sectie Hallo [modellering relaties](#modelling-relationships).</span><span class="sxs-lookup"><span data-stu-id="5f918-963">hello techniques discussed in this section are especially relevant toohello discussion [Inheritance relationships](#inheritance-relationships) earlier in this guide in hello section [Modelling relationships](#modelling-relationships).</span></span>  

> [!NOTE]
> <span data-ttu-id="5f918-964">U moet overwegen een versienummer in Hallo entiteit waarde tooenable client toepassingen tooevolve POCO objecten van het type en werken met verschillende versies.</span><span class="sxs-lookup"><span data-stu-id="5f918-964">You should consider including a version number in hello entity type value tooenable client applications tooevolve POCO objects and work with different versions.</span></span>  
> 
> 

<span data-ttu-id="5f918-965">Hallo rest van deze sectie beschrijft een aantal van Hallo-functies in Hallo Storage-clientbibliotheek waarmee u eenvoudiger werken met meerdere Entiteitstypen in Hallo dezelfde tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-965">hello remainder of this section describes some of hello features in hello Storage Client Library that facilitate working with multiple entity types in hello same table.</span></span>  

#### <a name="retrieving-heterogeneous-entity-types"></a><span data-ttu-id="5f918-966">Heterogene Entiteitstypen ophalen</span><span class="sxs-lookup"><span data-stu-id="5f918-966">Retrieving heterogeneous entity types</span></span>
<span data-ttu-id="5f918-967">Als u van Hallo Storage-clientbibliotheek gebruikmaakt, hebt u drie opties voor het werken met meerdere Entiteitstypen.</span><span class="sxs-lookup"><span data-stu-id="5f918-967">If you are using hello Storage Client Library, you have three options for working with multiple entity types.</span></span>  

<span data-ttu-id="5f918-968">Als u Hallo type Hallo entiteit opgeslagen met een specifieke weet **RowKey** en **PartitionKey** waarden, daarna u het entiteitstype Hallo opgeven kunt wanneer u Hallo entiteit ophalen, zoals wordt weergegeven in de vorige twee Hallo voorbeelden waarmee entiteiten van het type opgehaald **EmployeeEntity**: [uitvoeren van een punt-query Hallo Storage-clientbibliotheek](#executing-a-point-query-using-the-storage-client-library) en [bij het ophalen van meerdere entiteiten met behulp van LINQ](#retrieving-multiple-entities-using-linq).</span><span class="sxs-lookup"><span data-stu-id="5f918-968">If you know hello type of hello entity stored with a specific **RowKey** and **PartitionKey** values, then you can specify hello entity type when you retrieve hello entity as shown in hello previous two examples that retrieve entities of type **EmployeeEntity**: [Executing a point query using hello Storage Client Library](#executing-a-point-query-using-the-storage-client-library) and [Retrieving multiple entities using LINQ](#retrieving-multiple-entities-using-linq).</span></span>  

<span data-ttu-id="5f918-969">de tweede optie Hallo is toouse hello **DynamicTableEntity** type (een eigenschappenverzameling) in plaats van een concreet type zijn POCO entiteit (deze optie kan ook de prestaties verbeteren omdat er geen noodzaak tooserialize en Hallo entiteit te deserialiseren. NET typen).</span><span class="sxs-lookup"><span data-stu-id="5f918-969">hello second option is toouse hello **DynamicTableEntity** type (a property bag) instead of a concrete POCO entity type (this option may also improve performance because there is no need tooserialize and deserialize hello entity too.NET types).</span></span> <span data-ttu-id="5f918-970">Hallo C#-code mogelijk na meerdere entiteiten met verschillende typen opgehaald uit de tabel hello, maar retourneert alle entiteiten als **DynamicTableEntity** exemplaren.</span><span class="sxs-lookup"><span data-stu-id="5f918-970">hello following C# code potentially retrieves multiple entities of different types from hello table, but returns all entities as **DynamicTableEntity** instances.</span></span> <span data-ttu-id="5f918-971">Vervolgens wordt Hallo **EntityType** toodetermine Hallo eigenschapstype van elke entiteit:</span><span class="sxs-lookup"><span data-stu-id="5f918-971">It then uses hello **EntityType** property toodetermine hello type of each entity:</span></span>  

```csharp
string filter = TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("PartitionKey",
    QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("RowKey",
                    QueryComparisons.GreaterThanOrEqual, "B"),
        TableOperators.And,
        TableQuery.GenerateFilterCondition("RowKey",
        QueryComparisons.LessThan, "F")
    )
);
TableQuery<DynamicTableEntity> entityQuery =
    new TableQuery<DynamicTableEntity>().Where(filter);
var employees = employeeTable.ExecuteQuery(entityQuery);

IEnumerable<DynamicTableEntity> entities = employeeTable.ExecuteQuery(entityQuery);
foreach (var e in entities)
{
EntityProperty entityTypeProperty;
if (e.Properties.TryGetValue("EntityType", out entityTypeProperty))
{
    if (entityTypeProperty.StringValue == "Employee")
    {
        // Use entityTypeProperty, RowKey, PartitionKey, Etag, and Timestamp
        }
    }
}  
```

<span data-ttu-id="5f918-972">Houd er rekening mee dat tooretrieve andere eigenschappen moet u Hallo **TryGetValue** methode op Hallo **eigenschappen** eigenschap Hallo **DynamicTableEntity** klasse.</span><span class="sxs-lookup"><span data-stu-id="5f918-972">Note that tooretrieve other properties you must use hello **TryGetValue** method on hello **Properties** property of hello **DynamicTableEntity** class.</span></span>  

<span data-ttu-id="5f918-973">Een derde optie is toocombine met Hallo **DynamicTableEntity** type en een **EntityResolver** exemplaar.</span><span class="sxs-lookup"><span data-stu-id="5f918-973">A third option is toocombine using hello **DynamicTableEntity** type and an **EntityResolver** instance.</span></span> <span data-ttu-id="5f918-974">Hiermee kunt u tooresolve toomultiple POCO typen in Hallo dezelfde query.</span><span class="sxs-lookup"><span data-stu-id="5f918-974">This enables you tooresolve toomultiple POCO types in hello same query.</span></span> <span data-ttu-id="5f918-975">In dit voorbeeld Hallo **EntityResolver** gemachtigde met behulp van Hallo **EntityType** eigenschap toodistinguish tussen Hallo twee soorten entiteit die Hallo query retourneert.</span><span class="sxs-lookup"><span data-stu-id="5f918-975">In this example, hello **EntityResolver** delegate is using hello **EntityType** property toodistinguish between hello two types of entity that hello query returns.</span></span> <span data-ttu-id="5f918-976">Hallo **los** methode maakt gebruik van Hallo **resolver** delegeren tooresolve **DynamicTableEntity** exemplaren te**TableEntity** exemplaren.</span><span class="sxs-lookup"><span data-stu-id="5f918-976">hello **Resolve** method uses hello **resolver** delegate tooresolve **DynamicTableEntity** instances too**TableEntity** instances.</span></span>  

```csharp
EntityResolver<TableEntity> resolver = (pk, rk, ts, props, etag) =>
{

        TableEntity resolvedEntity = null;
        if (props["EntityType"].StringValue == "Department")
        {
        resolvedEntity = new DepartmentEntity();
        }
        else if (props["EntityType"].StringValue == "Employee")
        {
        resolvedEntity = new EmployeeEntity();
        }
        else throw new ArgumentException("Unrecognized entity", "props");

        resolvedEntity.PartitionKey = pk;
        resolvedEntity.RowKey = rk;
        resolvedEntity.Timestamp = ts;
        resolvedEntity.ETag = etag;
        resolvedEntity.ReadEntity(props, null);
        return resolvedEntity;
};

string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<DynamicTableEntity> entityQuery =
        new TableQuery<DynamicTableEntity>().Where(filter);

var entities = employeeTable.ExecuteQuery(entityQuery, resolver);
foreach (var e in entities)
{
        if (e is DepartmentEntity)
        {
    ...
        }
        if (e is EmployeeEntity)
        {
    ...
        }
}  
```

#### <a name="modifying-heterogeneous-entity-types"></a><span data-ttu-id="5f918-977">Heterogene Entiteitstypen wijzigen</span><span class="sxs-lookup"><span data-stu-id="5f918-977">Modifying heterogeneous entity types</span></span>
<span data-ttu-id="5f918-978">U hoeft niet tooknow Hallo-type van een entiteit toodelete en u altijd weet Hallo-type van een entiteit wanneer u het invoegen.</span><span class="sxs-lookup"><span data-stu-id="5f918-978">You do not need tooknow hello type of an entity toodelete it, and you always know hello type of an entity when you insert it.</span></span> <span data-ttu-id="5f918-979">U kunt echter **DynamicTableEntity** typt u een entiteit tooupdate zonder te weten van het type en zonder gebruik van een POCO-entiteitsklasse.</span><span class="sxs-lookup"><span data-stu-id="5f918-979">However, you can use **DynamicTableEntity** type tooupdate an entity without knowing its type and without using a POCO entity class.</span></span> <span data-ttu-id="5f918-980">Hallo codevoorbeeld één entiteit worden opgehaald en wordt gecontroleerd Hallo **EmployeeCount** eigenschap bestaat voordat u het bijwerkt.</span><span class="sxs-lookup"><span data-stu-id="5f918-980">hello following code sample retrieves a single entity, and checks hello **EmployeeCount** property exists before updating it.</span></span>  

```csharp
TableResult result =
        employeeTable.Execute(TableOperation.Retrieve(partitionKey, rowKey));
DynamicTableEntity department = (DynamicTableEntity)result.Result;

EntityProperty countProperty;

if (!department.Properties.TryGetValue("EmployeeCount", out countProperty))
{
        throw new
        InvalidOperationException("Invalid entity, EmployeeCount property not found.");
}
countProperty.Int32Value += 1;
employeeTable.Execute(TableOperation.Merge(department));  
```

### <a name="controlling-access-with-shared-access-signatures"></a><span data-ttu-id="5f918-981">Beheren van toegang met handtekeningen voor gedeelde toegang</span><span class="sxs-lookup"><span data-stu-id="5f918-981">Controlling access with Shared Access Signatures</span></span>
<span data-ttu-id="5f918-982">U kunt gebruikt Shared Access Signature (SAS) tokens tooenable client toepassingen toomodify (en query's) tabelentiteiten rechtstreeks zonder Hallo nodig tooauthenticate rechtstreeks met de service Hallo-tabel.</span><span class="sxs-lookup"><span data-stu-id="5f918-982">You can use Shared Access Signature (SAS) tokens tooenable client applications toomodify (and query) table entities directly without hello need tooauthenticate directly with hello table service.</span></span> <span data-ttu-id="5f918-983">Er zijn in principe drie belangrijke voordelen toousing SAS in uw toepassing:</span><span class="sxs-lookup"><span data-stu-id="5f918-983">Typically, there are three main benefits toousing SAS in your application:</span></span>  

* <span data-ttu-id="5f918-984">U hoeft geen toodistribute uw opslag rekening sleutel tooan onbeveiligde platform (zoals een mobiel apparaat) in de volgorde tooallow die tooaccess apparaat en entiteiten in Hallo service tabel wijzigen.</span><span class="sxs-lookup"><span data-stu-id="5f918-984">You do not need toodistribute your storage account key tooan insecure platform (such as a mobile device) in order tooallow that device tooaccess and modify entities in hello Table service.</span></span>  
* <span data-ttu-id="5f918-985">U kunt offload Hallo werk dat web en werkrollen uitvoeren bij het beheren van uw apparaten entiteiten tooclient zoals eindgebruikers, computers en mobiele apparaten.</span><span class="sxs-lookup"><span data-stu-id="5f918-985">You can offload some of hello work that web and worker roles perform in managing your entities tooclient devices such as end-user computers and mobile devices.</span></span>  
* <span data-ttu-id="5f918-986">U kunt een beperkte toewijzen en tijd beperkt set machtigingen tooa client (zoals het toestaan van alleen-lezen toegang toospecific resources).</span><span class="sxs-lookup"><span data-stu-id="5f918-986">You can assign a constrained and time limited set of permissions tooa client (such as allowing read-only access toospecific resources).</span></span>  

<span data-ttu-id="5f918-987">Zie voor meer informatie over het gebruik van SAS-tokens met Hallo tabelservice [met behulp van Shared Access Signatures (SAS)](../storage/common/storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="5f918-987">For more information about using SAS tokens with hello Table service, see [Using Shared Access Signatures (SAS)](../storage/common/storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="5f918-988">Echter, moet u nog steeds Hallo SAS-tokens die een client toepassing toohello entiteiten in de tabelservice Hallo verlenen genereren: u moet dit doen in een omgeving die toegang tot de opslagaccountsleutels tooyour heeft beveiligde.</span><span class="sxs-lookup"><span data-stu-id="5f918-988">However, you must still generate hello SAS tokens that grant a client application toohello entities in hello table service: you should do this in an environment that has secure access tooyour storage account keys.</span></span> <span data-ttu-id="5f918-989">Meestal gebruikt u een web- of worker-rol toogenerate Hallo SAS-tokens en bieden ze toohello clienttoepassingen die toegang moeten hebben tot tooyour entiteiten.</span><span class="sxs-lookup"><span data-stu-id="5f918-989">Typically, you use a web or worker role toogenerate hello SAS tokens and deliver them toohello client applications that need access tooyour entities.</span></span> <span data-ttu-id="5f918-990">Omdat er nog steeds een overhead voor het genereren en SAS-tokens tooclients leveren, moet u het beste tooreduce deze overhead, met name in grootschalige scenario's.</span><span class="sxs-lookup"><span data-stu-id="5f918-990">Because there is still an overhead involved in generating and delivering SAS tokens tooclients, you should consider how best tooreduce this overhead, especially in high-volume scenarios.</span></span>  

<span data-ttu-id="5f918-991">Het is mogelijk toogenerate een SAS-token dat verleent toegang tooa subset van Hallo entiteiten in een tabel tot.</span><span class="sxs-lookup"><span data-stu-id="5f918-991">It is possible toogenerate a SAS token that grants access tooa subset of hello entities in a table.</span></span> <span data-ttu-id="5f918-992">U maakt standaard een SAS-token voor een hele tabel, maar het is ook mogelijk toospecify die Hallo SAS-token verlenen toegang tooeither een reeks **PartitionKey** waarden of een bereik van **PartitionKey** en  **RowKey** waarden.</span><span class="sxs-lookup"><span data-stu-id="5f918-992">By default, you create a SAS token for an entire table, but it is also possible toospecify that hello SAS token grant access tooeither a range of **PartitionKey** values, or a range of **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="5f918-993">U kunt ervoor kiezen toogenerate SAS-tokens voor afzonderlijke gebruikers van uw systeem dat elke gebruiker SAS-token kan ze alleen toegang tootheir eigen entiteiten in Hallo tabelservice.</span><span class="sxs-lookup"><span data-stu-id="5f918-993">You might choose toogenerate SAS tokens for individual users of your system such that each user's SAS token only allows them access tootheir own entities in hello table service.</span></span>  

### <a name="asynchronous-and-parallel-operations"></a><span data-ttu-id="5f918-994">Asynchrone en parallelle bewerkingen</span><span class="sxs-lookup"><span data-stu-id="5f918-994">Asynchronous and parallel operations</span></span>
<span data-ttu-id="5f918-995">Mits u kunt uw verzoeken om te worden verspreid over meerdere partities, kunt u de doorvoer en client reactiesnelheid verbeteren met behulp van asynchrone of parallelle query's.</span><span class="sxs-lookup"><span data-stu-id="5f918-995">Provided you are spreading your requests across multiple partitions, you can improve throughput and client responsiveness by using asynchronous or parallel queries.</span></span>
<span data-ttu-id="5f918-996">U wellicht bijvoorbeeld twee of meer werkprocessen rolinstanties toegang krijgen tot uw tabellen parallel.</span><span class="sxs-lookup"><span data-stu-id="5f918-996">For example, you might have two or more worker role instances accessing your tables in parallel.</span></span> <span data-ttu-id="5f918-997">U kunt afzonderlijke werkrollen die verantwoordelijk zijn voor bepaalde sets van partities hebben of hoeven er meerdere exemplaren van worker-rol, elke kunnen tooaccess alle partities in een tabel Hallo.</span><span class="sxs-lookup"><span data-stu-id="5f918-997">You could have individual worker roles responsible for particular sets of partitions, or simply have multiple worker role instances, each able tooaccess all hello partitions in a table.</span></span>  

<span data-ttu-id="5f918-998">U kunt binnen een clientexemplaar doorvoer verbeteren door opslagbewerkingen asynchroon uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="5f918-998">Within a client instance, you can improve throughput by executing storage operations asynchronously.</span></span> <span data-ttu-id="5f918-999">Hallo Storage-clientbibliotheek kunt u eenvoudig toowrite asynchrone query's en wijzigingen.</span><span class="sxs-lookup"><span data-stu-id="5f918-999">hello Storage Client Library makes it easy toowrite asynchronous queries and modifications.</span></span> <span data-ttu-id="5f918-1000">U kunt bijvoorbeeld beginnen met Hallo de synchrone methode die alle Hallo entiteiten in een partitie ophalen, zoals wordt weergegeven in de volgende C#-code Hallo:</span><span class="sxs-lookup"><span data-stu-id="5f918-1000">For example, you might start with hello synchronous method that retrieves all hello entities in a partition as shown in hello following C# code:</span></span>  

```csharp
private static void ManyEntitiesQuery(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

        TableContinuationToken continuationToken = null;

        do
        {
        var employees = employeeTable.ExecuteQuerySegmented(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
    {
        ...
    }
        continuationToken = employees.ContinuationToken;
        } while (continuationToken != null);
}  
```

<span data-ttu-id="5f918-1001">U kunt deze code eenvoudig wijzigen zodat deze query hello wordt asynchroon als volgt uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="5f918-1001">You can easily modify this code so that hello query runs asynchronously as follows:</span></span>  

```csharp
private static async Task ManyEntitiesQueryAsync(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);
        TableContinuationToken continuationToken = null;

        do
        {
        var employees = await employeeTable.ExecuteQuerySegmentedAsync(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
        {
            ...
        }
        continuationToken = employees.ContinuationToken;
            } while (continuationToken != null);
}  
```

<span data-ttu-id="5f918-1002">In dit voorbeeld asynchrone ziet u Hallo volgende wijzigingen uit Hallo synchrone versie:</span><span class="sxs-lookup"><span data-stu-id="5f918-1002">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="5f918-1003">Hallo methodehandtekening bevat nu Hallo **asynchrone** aanpassingsfunctie en retourneert een **taak** exemplaar.</span><span class="sxs-lookup"><span data-stu-id="5f918-1003">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="5f918-1004">In plaats van aanroepen Hallo **ExecuteSegmented** methode tooretrieve resultaten, Hallo methode nu aanroepen Hallo **ExecuteSegmentedAsync** methode en maakt gebruik van Hallo **await** Wijzigingsfunctie tooretrieve asynchroon resulteert.</span><span class="sxs-lookup"><span data-stu-id="5f918-1004">Instead of calling hello **ExecuteSegmented** method tooretrieve results, hello method now calls hello **ExecuteSegmentedAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="5f918-1005">Hallo-clienttoepassing kan deze methode niet aanroepen meerdere keren (met verschillende waarden voor Hallo **afdeling** parameter), en elke query wordt uitgevoerd op een afzonderlijke thread.</span><span class="sxs-lookup"><span data-stu-id="5f918-1005">hello client application can call this method multiple times (with different values for hello **department** parameter), and each query will run on a separate thread.</span></span>  

<span data-ttu-id="5f918-1006">Houd er rekening mee dat er geen asynchrone versie Hallo is **Execute** methode in Hallo **TableQuery** klasse omdat Hallo **IEnumerable** interface ondersteunt geen asynchrone opsomming.</span><span class="sxs-lookup"><span data-stu-id="5f918-1006">Note that there is no asynchronous version of hello **Execute** method in hello **TableQuery** class because hello **IEnumerable** interface does not support asynchronous enumeration.</span></span>  

<span data-ttu-id="5f918-1007">U kunt invoegen, bijwerken en verwijderen van entiteiten asynchroon.</span><span class="sxs-lookup"><span data-stu-id="5f918-1007">You can also insert, update, and delete entities asynchronously.</span></span> <span data-ttu-id="5f918-1008">Hallo volgende C#-voorbeeld ziet u een eenvoudige, synchrone methode tooinsert of vervangen van een werknemer entiteit:</span><span class="sxs-lookup"><span data-stu-id="5f918-1008">hello following C# example shows a simple, synchronous method tooinsert or replace an employee entity:</span></span>  

```csharp
private static void SimpleEmployeeUpsert(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = employeeTable
        .Execute(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="5f918-1009">U kunt deze code eenvoudig wijzigen zodat Hallo update wordt asynchroon als volgt uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="5f918-1009">You can easily modify this code so that hello update runs asynchronously as follows:</span></span>  

```csharp
private static async Task SimpleEmployeeUpsertAsync(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = await employeeTable
        .ExecuteAsync(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="5f918-1010">In dit voorbeeld asynchrone ziet u Hallo volgende wijzigingen uit Hallo synchrone versie:</span><span class="sxs-lookup"><span data-stu-id="5f918-1010">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="5f918-1011">Hallo methodehandtekening bevat nu Hallo **asynchrone** aanpassingsfunctie en retourneert een **taak** exemplaar.</span><span class="sxs-lookup"><span data-stu-id="5f918-1011">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="5f918-1012">In plaats van aanroepen Hallo **Execute** methode tooupdate Hallo entiteit, Hallo methode nu aanroepen Hallo **ExecuteAsync** methode en maakt gebruik van Hallo **await** aanpassingsfunctie tooretrieve asynchroon resultaat.</span><span class="sxs-lookup"><span data-stu-id="5f918-1012">Instead of calling hello **Execute** method tooupdate hello entity, hello method now calls hello **ExecuteAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="5f918-1013">Hallo-clienttoepassing kan meerdere asynchrone methoden zoals deze aanroepen en elke methodeaanroep wordt uitgevoerd op een afzonderlijke thread.</span><span class="sxs-lookup"><span data-stu-id="5f918-1013">hello client application can call multiple asynchronous methods like this one, and each method invocation will run on a separate thread.</span></span>  

### <a name="credits"></a><span data-ttu-id="5f918-1014">Tegoed</span><span class="sxs-lookup"><span data-stu-id="5f918-1014">Credits</span></span>
<span data-ttu-id="5f918-1015">Willen we graag toothank Hallo volgende leden van het team van Azure voor hun bijdragen Hallo: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah en Serdar Ozler evenals Tom Hollander van Microsoft DX.</span><span class="sxs-lookup"><span data-stu-id="5f918-1015">We would like toothank hello following members of hello Azure team for their contributions: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah and Serdar Ozler as well as  Tom Hollander from Microsoft DX.</span></span> 

<span data-ttu-id="5f918-1016">Willen we graag ook toothank Hallo volgende Microsoft-MVP voor hun waardevolle feedback in revisie runs: Igor Papirov en Edward Bakker.</span><span class="sxs-lookup"><span data-stu-id="5f918-1016">We would also like toothank hello following Microsoft MVP's for their valuable feedback during review cycles: Igor Papirov and Edward Bakker.</span></span>

[1]: ./media/storage-table-design-guide/storage-table-design-IMAGE01.png
[2]: ./media/storage-table-design-guide/storage-table-design-IMAGE02.png
[3]: ./media/storage-table-design-guide/storage-table-design-IMAGE03.png
[4]: ./media/storage-table-design-guide/storage-table-design-IMAGE04.png
[5]: ./media/storage-table-design-guide/storage-table-design-IMAGE05.png
[6]: ./media/storage-table-design-guide/storage-table-design-IMAGE06.png
[7]: ./media/storage-table-design-guide/storage-table-design-IMAGE07.png
[8]: ./media/storage-table-design-guide/storage-table-design-IMAGE08.png
[9]: ./media/storage-table-design-guide/storage-table-design-IMAGE09.png
[10]: ./media/storage-table-design-guide/storage-table-design-IMAGE10.png
[11]: ./media/storage-table-design-guide/storage-table-design-IMAGE11.png
[12]: ./media/storage-table-design-guide/storage-table-design-IMAGE12.png
[13]: ./media/storage-table-design-guide/storage-table-design-IMAGE13.png
[14]: ./media/storage-table-design-guide/storage-table-design-IMAGE14.png
[15]: ./media/storage-table-design-guide/storage-table-design-IMAGE15.png
[16]: ./media/storage-table-design-guide/storage-table-design-IMAGE16.png
[17]: ./media/storage-table-design-guide/storage-table-design-IMAGE17.png
[18]: ./media/storage-table-design-guide/storage-table-design-IMAGE18.png
[19]: ./media/storage-table-design-guide/storage-table-design-IMAGE19.png
[20]: ./media/storage-table-design-guide/storage-table-design-IMAGE20.png
[21]: ./media/storage-table-design-guide/storage-table-design-IMAGE21.png
[22]: ./media/storage-table-design-guide/storage-table-design-IMAGE22.png
[23]: ./media/storage-table-design-guide/storage-table-design-IMAGE23.png
[24]: ./media/storage-table-design-guide/storage-table-design-IMAGE24.png
[25]: ./media/storage-table-design-guide/storage-table-design-IMAGE25.png
[26]: ./media/storage-table-design-guide/storage-table-design-IMAGE26.png
[27]: ./media/storage-table-design-guide/storage-table-design-IMAGE27.png
[28]: ./media/storage-table-design-guide/storage-table-design-IMAGE28.png
[29]: ./media/storage-table-design-guide/storage-table-design-IMAGE29.png

