---
title: aaaOnline back-up en herstel met Azure Cosmos DB | Microsoft Docs
description: Meer informatie over hoe tooperform automatische back-up en herstellen op een Azure DB die Cosmos-database.
keywords: Backup and restore online back-up
services: cosmos-db
documentationcenter: 
author: RahulPrasad16
manager: jhubbard
editor: monicar
ms.assetid: 98eade4a-7ef4-4667-b167-6603ecd80b79
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/11/2017
ms.author: raprasa
ms.openlocfilehash: a0b464c95681dfc7b5462b02bf04c2c43d6bc16f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-online-backup-and-restore-with-azure-cosmos-db"></a><span data-ttu-id="82f95-104">Automatische online back-up en herstel met Azure Cosmos-DB</span><span class="sxs-lookup"><span data-stu-id="82f95-104">Automatic online backup and restore with Azure Cosmos DB</span></span>
<span data-ttu-id="82f95-105">Azure Cosmos-database wordt automatisch back-ups van al uw gegevens met regelmatige tussenpozen.</span><span class="sxs-lookup"><span data-stu-id="82f95-105">Azure Cosmos DB automatically takes backups of all your data at regular intervals.</span></span> <span data-ttu-id="82f95-106">Hallo automatische back-ups worden gemaakt zonder Hallo prestaties of beschikbaarheid van uw databasebewerkingen.</span><span class="sxs-lookup"><span data-stu-id="82f95-106">hello automatic backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="82f95-107">Uw back-ups apart zijn opgeslagen in een andere storage-service en deze back-ups globaal voor tolerantie tegen regionale noodsituaties worden gerepliceerd.</span><span class="sxs-lookup"><span data-stu-id="82f95-107">All your backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span></span> <span data-ttu-id="82f95-108">Hallo automatische back-ups zijn bedoeld voor scenario's wanneer u uw Comos DB-container per ongeluk verwijdert en later nodig hebt voor herstel van gegevens of een noodherstel.</span><span class="sxs-lookup"><span data-stu-id="82f95-108">hello automatic backups are intended for scenarios when you accidentally delete your Comos DB container and later require data recovery or a disaster recovery solution.</span></span>  

<span data-ttu-id="82f95-109">Dit artikel begint met een snelle samenvatting van Hallo gegevensredundantie en beschikbaarheid in een Cosmos-database en vervolgens back-ups besproken.</span><span class="sxs-lookup"><span data-stu-id="82f95-109">This article starts with a quick recap of hello data redundancy and availability in Cosmos DB, and then discusses backups.</span></span> 

## <a name="high-availability-with-cosmos-db---a-recap"></a><span data-ttu-id="82f95-110">Hoge beschikbaarheid met Cosmos-DB - een samenvatting</span><span class="sxs-lookup"><span data-stu-id="82f95-110">High availability with Cosmos DB - a recap</span></span>
<span data-ttu-id="82f95-111">Cosmos DB is ontworpen toobe [globaal gedistribueerde](distribute-data-globally.md) – Hiermee kunt u tooscale doorvoer over meerdere Azure-regio's samen met aangestuurd transparante multihoming API's en failover-beleid.</span><span class="sxs-lookup"><span data-stu-id="82f95-111">Cosmos DB is designed toobe [globally distributed](distribute-data-globally.md) – it allows you tooscale throughput across multiple Azure regions along with policy driven failover and transparent multi-homing APIs.</span></span> <span data-ttu-id="82f95-112">Als een database system aanbieding [99,99% beschikbaarheid serviceovereenkomsten](https://azure.microsoft.com/support/legal/sla/cosmos-db), alle Hallo schrijfbewerkingen in Cosmos DB blijvend doorgevoerd toolocal schijven door een quorum van replica's binnen een lokaal datacenter zijn voordat de client toohello zijn bevestigd.</span><span class="sxs-lookup"><span data-stu-id="82f95-112">As a database system offering [99.99% availability SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db), all hello writes in Cosmos DB are durably committed toolocal disks by a quorum of replicas within a local data center before acknowledging toohello client.</span></span> <span data-ttu-id="82f95-113">Houd er rekening mee dat Hallo hoge beschikbaarheid van Cosmos-database is afhankelijk van de lokale opslag en is niet afhankelijk van een externe opslagtechnologieën.</span><span class="sxs-lookup"><span data-stu-id="82f95-113">Note that hello high availability of Cosmos DB relies on local storage and does not depend on any external storage technologies.</span></span> <span data-ttu-id="82f95-114">Als de databaseaccount gekoppeld aan meer dan één Azure-regio is, worden uw schrijfbewerkingen bovendien gerepliceerd in andere regio's ook.</span><span class="sxs-lookup"><span data-stu-id="82f95-114">Additionally, if your database account is associated with more than one Azure region, your writes are replicated across other regions as well.</span></span> <span data-ttu-id="82f95-115">tooscale uw doorvoer en toegang tot gegevens op lage latenties, u kunt hebben als veel gebieden die zijn gekoppeld aan uw databaseaccount als u wilt lezen.</span><span class="sxs-lookup"><span data-stu-id="82f95-115">tooscale your throughput and access data at low latencies, you can have as many read regions associated with your database account as you like.</span></span> <span data-ttu-id="82f95-116">In elke regio lezen, is de Hallo (gerepliceerd) gegevens blijvend persistent via een replicaset.</span><span class="sxs-lookup"><span data-stu-id="82f95-116">In each read region, hello (replicated) data is durably persisted across a replica set.</span></span>  

<span data-ttu-id="82f95-117">Zoals geïllustreerd in het volgende diagram hello, een enkele Cosmos-DB-container is [horizontaal gepartitioneerde](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="82f95-117">As illustrated in hello following diagram, a single Cosmos DB container is [horizontally partitioned](partition-data.md).</span></span> <span data-ttu-id="82f95-118">Een 'partitie' wordt aangeduid met een cirkel in het volgende diagram Hallo en elke partitie is maximaal beschikbaar is via een replicaset is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="82f95-118">A “partition” is denoted by a circle in hello following diagram, and each partition is made highly available via a replica set.</span></span> <span data-ttu-id="82f95-119">Dit is de lokale distributiepunten Hallo binnen (aangeduid met Hallo X-as) één Azure-regio.</span><span class="sxs-lookup"><span data-stu-id="82f95-119">This is hello local distribution within a single Azure region (denoted by hello X axis).</span></span> <span data-ttu-id="82f95-120">Elke partitie (met de bijbehorende replica is ingesteld) wordt verder dan globaal gedistribueerd over meerdere regio's die zijn gekoppeld aan uw databaseaccount (bijvoorbeeld in deze afbeelding Hallo drie gebieden: VS-Oost, VS-West en centrale India).</span><span class="sxs-lookup"><span data-stu-id="82f95-120">Further, each partition (with its corresponding replica set) is then globally distributed across multiple regions associated with your database account (for example, in this illustration hello three regions – East US, West US and Central India).</span></span> <span data-ttu-id="82f95-121">Hallo 'partitie instellen' is een wereldwijd gedistribueerde entiteit die bestaat uit meerdere exemplaren van uw gegevens in elke regio (aangeduid door Hallo Y-as).</span><span class="sxs-lookup"><span data-stu-id="82f95-121">hello “partition set” is a globally distributed entity comprising of multiple copies of your data in each region (denoted by hello Y axis).</span></span> <span data-ttu-id="82f95-122">U kunt prioriteit toewijzen toohello regio's die zijn gekoppeld aan uw databaseaccount en Cosmos DB wordt transparant failover toohello volgende gebied in geval van noodsituaties.</span><span class="sxs-lookup"><span data-stu-id="82f95-122">You can assign priority toohello regions associated with your database account and Cosmos DB will transparently failover toohello next region in case of disaster.</span></span> <span data-ttu-id="82f95-123">U kunt ook handmatig failover tootest Hallo end-to-end beschikbaarheid van uw toepassing simuleren.</span><span class="sxs-lookup"><span data-stu-id="82f95-123">You can also manually simulate failover tootest hello end-to-end availability of your application.</span></span>  

<span data-ttu-id="82f95-124">Hallo volgende afbeelding ziet u Hallo hoge mate van redundantie met Cosmos-DB.</span><span class="sxs-lookup"><span data-stu-id="82f95-124">hello following image illustrates hello high degree of redundancy with Cosmos DB.</span></span>

![Hoge mate van redundantie met Cosmos-DB](./media/online-backup-and-restore/redundancy.png)

![Hoge mate van redundantie met Cosmos-DB](./media/online-backup-and-restore/global-distribution.png)

## <a name="full-automatic-online-backups"></a><span data-ttu-id="82f95-127">Volledige, automatische, online back-ups</span><span class="sxs-lookup"><span data-stu-id="82f95-127">Full, automatic, online backups</span></span>
<span data-ttu-id="82f95-128">Oeps, verwijderd ik mijn container of de database.</span><span class="sxs-lookup"><span data-stu-id="82f95-128">Oops, I deleted my container or database!</span></span> <span data-ttu-id="82f95-129">Met Cosmos DB, niet alleen uw gegevens, maar Hallo back-ups van uw gegevens worden ook gemaakt maximaal redundante en robuuste tooregional noodsituaties.</span><span class="sxs-lookup"><span data-stu-id="82f95-129">With Cosmos DB, not only your data, but hello backups of your data are also made highly redundant and resilient tooregional disasters.</span></span> <span data-ttu-id="82f95-130">Deze automatische back-ups worden momenteel ongeveer elke vier uur genomen en meest recente 2 back-ups te allen tijde worden opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="82f95-130">These automated backups are currently taken approximately every four hours and latest 2 backups are stored at all times.</span></span> <span data-ttu-id="82f95-131">Als Hallo gegevens per ongeluk is verwijderd of beschadigd, neem [Neem contact op met de ondersteuning van Azure](https://azure.microsoft.com/support/options/) binnen de 8 uur.</span><span class="sxs-lookup"><span data-stu-id="82f95-131">If hello data is accidently dropped or corrupted, please [contact Azure support](https://azure.microsoft.com/support/options/) within 8 hours.</span></span> 

<span data-ttu-id="82f95-132">Hallo back-ups worden gemaakt zonder Hallo prestaties of beschikbaarheid van uw databasebewerkingen.</span><span class="sxs-lookup"><span data-stu-id="82f95-132">hello backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="82f95-133">Cosmos DB duurt Hallo back-up op de achtergrond Hallo zonder uw ingerichte RUs verbruikt of die betrekking hebben op prestaties Hallo en zonder Hallo beschikbaarheid van uw database.</span><span class="sxs-lookup"><span data-stu-id="82f95-133">Cosmos DB takes hello backup in hello background without consuming your provisioned RUs or affecting hello performance and without affecting hello availability of your database.</span></span> 

<span data-ttu-id="82f95-134">In tegenstelling tot de gegevens die zijn opgeslagen in Cosmos DB, Hallo automatische back-ups opgeslagen in Azure Blob Storage-service.</span><span class="sxs-lookup"><span data-stu-id="82f95-134">Unlike your data that is stored inside Cosmos DB, hello automatic backups are stored in Azure Blob Storage service.</span></span> <span data-ttu-id="82f95-135">lage latentie/efficiënt uploaden tooguarantee hello, Hallo momentopname van de back-up is geüploade tooan exemplaar van Azure Blob storage in dezelfde regio bevinden als de huidige schrijven regio van uw databaseaccount Cosmos DB Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="82f95-135">tooguarantee hello low latency/efficient upload, hello snapshot of your backup is uploaded tooan instance of Azure Blob storage in hello same region as hello current write region of your Cosmos DB database account.</span></span> <span data-ttu-id="82f95-136">Voor tolerantie tegen regionale na noodgevallen, elke momentopname van de back-upgegevens in Azure Blob-opslag opnieuw gerepliceerd via geografisch redundante opslag (GRS) tooanother regio.</span><span class="sxs-lookup"><span data-stu-id="82f95-136">For resiliency against regional disaster, each snapshot of your backup data in Azure Blob Storage is again replicated via geo-redundant storage (GRS) tooanother region.</span></span> <span data-ttu-id="82f95-137">Hallo volgende diagram ziet u dat Hallo volledige Cosmos-DB-container (met alle drie primaire partities in VS-West, in dit voorbeeld) is een back-up in een externe Azure Blob Storage-account in VS-West en vervolgens GRS tooEast gerepliceerd ons.</span><span class="sxs-lookup"><span data-stu-id="82f95-137">hello following diagram shows that hello entire Cosmos DB container (with all three primary partitions in West US, in this example) is backed up in a remote Azure Blob Storage account in West US and then GRS replicated tooEast US.</span></span> 

<span data-ttu-id="82f95-138">Hallo volgende afbeelding ziet u periodieke volledige back-ups van alle Cosmos DB entiteiten in GRS Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="82f95-138">hello following image illustrates periodic full backups of all Cosmos DB entities in GRS Azure Storage.</span></span>

![Periodieke volledige back-ups van alle Cosmos DB entiteiten in GRS Azure Storage](./media/online-backup-and-restore/automatic-backup.png)

## <a name="backup-retention-period"></a><span data-ttu-id="82f95-140">Back-up bewaarperiode</span><span class="sxs-lookup"><span data-stu-id="82f95-140">Backup retention period</span></span>
<span data-ttu-id="82f95-141">Zoals hierboven wordt beschreven, wordt Azure Cosmos DB duurt momentopnamen van uw gegevens om de vier uur en behoudt de laatste twee momentopnamen Hallo van elke partitie gedurende 30 dagen.</span><span class="sxs-lookup"><span data-stu-id="82f95-141">As described above, Azure Cosmos DB takes snapshots of your data every four hours and retains hello last two snapshots of every partition for 30 days.</span></span> <span data-ttu-id="82f95-142">Per onze nalevingsreglementen worden momentopnamen na 90 dagen permanent verwijderd.</span><span class="sxs-lookup"><span data-stu-id="82f95-142">Per our compliance regulations, snapshots are purged after 90 days.</span></span>

<span data-ttu-id="82f95-143">Als u uw eigen momentopnamen toomaintain wilt, kunt u de exportoptie tooJSON Hallo in hello Azure Cosmos DB [hulpprogramma voor gegevensmigratie](import-data.md#export-to-json-file) tooschedule aanvullende back-ups.</span><span class="sxs-lookup"><span data-stu-id="82f95-143">If you want toomaintain your own snapshots, you can use hello export tooJSON option in hello Azure Cosmos DB [Data Migration tool](import-data.md#export-to-json-file) tooschedule additional backups.</span></span> 

## <a name="restoring-a-database-from-an-online-backup"></a><span data-ttu-id="82f95-144">Een database terugzetten vanuit een online back-up</span><span class="sxs-lookup"><span data-stu-id="82f95-144">Restoring a database from an online backup</span></span>
<span data-ttu-id="82f95-145">Als u de database of een verzameling per ongeluk verwijdert, kunt u [bestand een ondersteuningsticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) of [contact op met ondersteuning voor Azure](https://azure.microsoft.com/support/options/) toorestore Hallo gegevens van Hallo laatste automatische back-up.</span><span class="sxs-lookup"><span data-stu-id="82f95-145">If you accidentally delete your database or collection, you can [file a support ticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) or [call Azure support](https://azure.microsoft.com/support/options/) toorestore hello data from hello last automatic backup.</span></span> <span data-ttu-id="82f95-146">Als u uw database toorestore vanwege beschadigingsprobleem gegevens moet, Zie [afhandeling van gegevensbeschadiging](#handling-data-corruption) behoefte aanvullende tootake tooprevent Hallo beschadigd gegevens stappen vanuit penetrerende Hallo back-ups.</span><span class="sxs-lookup"><span data-stu-id="82f95-146">If you need toorestore your database because of data corruption issue, see [Handling data corruption](#handling-data-corruption) as you need tootake additional steps tooprevent hello corrupted data from penetrating hello backups.</span></span> <span data-ttu-id="82f95-147">Voor een specifieke momentopname van uw back-toobe hersteld vereist Cosmos DB Hallo gegevens is beschikbaar voor de duur van back-cyclus voor het die momentopname Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="82f95-147">For a specific snapshot of your backup toobe restored, Cosmos DB requires that hello data was available for hello duration of hello backup cycle for that snapshot.</span></span>

## <a name="handling-data-corruption"></a><span data-ttu-id="82f95-148">Beschadigde gegevens verwerken</span><span class="sxs-lookup"><span data-stu-id="82f95-148">Handling data corruption</span></span>
<span data-ttu-id="82f95-149">Azure Cosmos DB behoudt Hallo laatste twee back-ups van elke partitie in Hallo-systeem.</span><span class="sxs-lookup"><span data-stu-id="82f95-149">Azure Cosmos DB retains hello last two backups of every partition in hello system.</span></span> <span data-ttu-id="82f95-150">Dit model werkt uitstekend wanneer een container (verzameling van documenten, grafiek, tabel) of een database per ongeluk worden verwijderd omdat een van de laatste versies Hallo kan worden hersteld.</span><span class="sxs-lookup"><span data-stu-id="82f95-150">This model works very well when a container (collection of documents, graph, table) or a database is accidentally deleted since one of hello last versions can be restored.</span></span> <span data-ttu-id="82f95-151">Echter in Hallo kan geval wanneer gebruikers leiden een probleem met de beschadiging van gegevens tot kunnen, Azure Cosmos DB mogelijk niet bewust van Hallo gegevensbeschadiging als het is mogelijk dat Hallo beschadiging hebben gepenetreerd Hallo back-ups.</span><span class="sxs-lookup"><span data-stu-id="82f95-151">However, in hello case when when users may introduce a data corruption issue, Azure Cosmos DB may be unaware of hello data corruption, and it is possible that hello corruption may have penetrated hello backups.</span></span> <span data-ttu-id="82f95-152">Zo snel is beschadigd, moet u Hallo beschadigd container (graph-verzameling/tabelnaam) verwijderen zodat back-ups worden beveiligd met beschadigde gegevens wordt overschreven.</span><span class="sxs-lookup"><span data-stu-id="82f95-152">As soon as corruption is detected, you should delete hello corrupted container (collection/graph/table) so that backups are protected from being overwritten with corrupted data.</span></span> <span data-ttu-id="82f95-153">Omdat de laatste back-up Hallo kan vier uur oud is, Hallo-gebruiker kunt gebruikmaken van [wijzigen van de feed](change-feed.md) toocapture en store Hallo afgelopen vier uur waard van gegevens voordat u de container Hallo verwijdert.</span><span class="sxs-lookup"><span data-stu-id="82f95-153">Since hello last backup could be four hours old, hello user can employ [change feed](change-feed.md) toocapture and store hello last four hours worth of data before deleting hello container.</span></span>

## <a name="next-steps"></a><span data-ttu-id="82f95-154">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="82f95-154">Next steps</span></span>

<span data-ttu-id="82f95-155">tooreplicate uw database in meerdere datacenters, Zie [distribueren van uw gegevens globaal met Cosmos DB](distribute-data-globally.md).</span><span class="sxs-lookup"><span data-stu-id="82f95-155">tooreplicate your database in multiple data centers, see [distribute your data globally with Cosmos DB](distribute-data-globally.md).</span></span> 

<span data-ttu-id="82f95-156">toofile Neem contact op met ondersteuning van Azure [bestand een ticket van hello Azure-portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span><span class="sxs-lookup"><span data-stu-id="82f95-156">toofile contact Azure Support, [file a ticket from hello Azure portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span></span>

