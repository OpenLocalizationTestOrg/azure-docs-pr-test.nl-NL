---
title: aaaSQL query metrische gegevens voor de API van Azure Cosmos DB DocumentDB | Microsoft Docs
description: Meer informatie over hoe tooinstrument en foutopsporing Hallo prestaties van de SQL-query's van Azure DB die Cosmos-aanvragen.
keywords: SQL-syntaxis, sql-query, sql-query's, json-querytaal, database-concepten en sql-query's, statistische functies
services: cosmos-db
documentationcenter: 
author: arramac
manager: jhubbard
editor: monicar
ms.assetid: b2fa8e8f-7291-45a3-9bd1-7284ed9077f8
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/15/2017
ms.author: arramac
ms.openlocfilehash: 2fee3786b7d48d254162699471943e316764b003
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-query-performance-with-azure-cosmos-db"></a><span data-ttu-id="a4e28-104">Prestaties van query's met Azure Cosmos DB afstemmen</span><span class="sxs-lookup"><span data-stu-id="a4e28-104">Tuning query performance with Azure Cosmos DB</span></span>
<span data-ttu-id="a4e28-105">Azure Cosmos DB biedt een [SQL-API voor het opvragen van gegevens](documentdb-sql-query.md), zonder schema of secundaire indexen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-105">Azure Cosmos DB provides a [SQL API for querying data](documentdb-sql-query.md), without requiring schema or secondary indexes.</span></span> <span data-ttu-id="a4e28-106">Dit artikel wordt de volgende informatie voor ontwikkelaars Hallo:</span><span class="sxs-lookup"><span data-stu-id="a4e28-106">This article provides hello following information for developers:</span></span>

* <span data-ttu-id="a4e28-107">Details op hoog niveau over de werking van Azure Cosmos DB SQL-query-uitvoering</span><span class="sxs-lookup"><span data-stu-id="a4e28-107">High-level details on how Azure Cosmos DB's SQL query execution works</span></span>
* <span data-ttu-id="a4e28-108">Meer informatie over de aanvraag- en reactieheaders query en opties voor client-SDK</span><span class="sxs-lookup"><span data-stu-id="a4e28-108">Details on query request and response headers, and client SDK options</span></span>
* <span data-ttu-id="a4e28-109">Tips en aanbevolen procedures voor prestaties van query 's</span><span class="sxs-lookup"><span data-stu-id="a4e28-109">Tips and best practices for query performance</span></span>
* <span data-ttu-id="a4e28-110">Voorbeelden van hoe tooutilize SQL uitvoering statistieken toodebug query uitvoeren op prestaties</span><span class="sxs-lookup"><span data-stu-id="a4e28-110">Examples of how tooutilize SQL execution statistics toodebug query performance</span></span>

## <a name="about-sql-query-execution"></a><span data-ttu-id="a4e28-111">Over het uitvoeren van de SQL-query</span><span class="sxs-lookup"><span data-stu-id="a4e28-111">About SQL query execution</span></span>

<span data-ttu-id="a4e28-112">In Azure Cosmos DB, slaat u de gegevens in de containers die kunnen worden uitgebreid tooany [grootte of aanvraag opslagdoorvoer](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-112">In Azure Cosmos DB, you store data in containers, which can grow tooany [storage size or request throughput](partition-data.md).</span></span> <span data-ttu-id="a4e28-113">Azure Cosmos DB schaalt naadloos gegevens meerdere fysieke partities onder Hallo dekt toohandle Gegevensgroei of stijging van ingerichte doorvoer.</span><span class="sxs-lookup"><span data-stu-id="a4e28-113">Azure Cosmos DB seamlessly scales data across physical partitions under hello covers toohandle data growth or increase in provisioned throughput.</span></span> <span data-ttu-id="a4e28-114">U kunt SQL-query's tooany container Hallo REST-API of een van de Hallo ondersteund met de opdracht [DocumentDB SDK's](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-114">You can issue SQL queries tooany container using hello REST API or one of hello supported [DocumentDB SDKs](documentdb-sdk-dotnet.md).</span></span>

<span data-ttu-id="a4e28-115">Een kort overzicht van het partitioneren: definieert u een partitiesleutel zoals 'plaats', waarmee wordt bepaald hoe gegevens zijn verdeeld over fysieke partities.</span><span class="sxs-lookup"><span data-stu-id="a4e28-115">A brief overview of partitioning: you define a partition key like "city", which determines how data is split across physical partitions.</span></span> <span data-ttu-id="a4e28-116">Gegevens die behoren tooa één partitiesleutel (bijvoorbeeld 'city' == "Seattle") zijn opgeslagen in een fysieke partitie maar één fysieke partitie heeft doorgaans meerdere partitiesleutels.</span><span class="sxs-lookup"><span data-stu-id="a4e28-116">Data belonging tooa single partition key (for example, "city" == "Seattle") is stored within a physical partition, but typically a single physical partition has multiple partition keys.</span></span> <span data-ttu-id="a4e28-117">Wanneer een partitie zijn opslaggrootte bereikt, Hallo service naadloos Hallo partitie worden gesplitst in twee nieuwe partities en Hallo partitiesleutel gelijkmatig wordt verdeeld over deze partities.</span><span class="sxs-lookup"><span data-stu-id="a4e28-117">When a partition reaches its storage size, hello service seamlessly splits hello partition into two new partitions, and divides hello partition key evenly across these partitions.</span></span> <span data-ttu-id="a4e28-118">Aangezien partities tijdelijke zijn, hello API's gebruiken een abstractie van een 'partitiesleutelbereik', waarmee de Hallo bereiken van de belangrijkste hashes partitie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-118">Since partitions are transient, hello APIs use an abstraction of a "partition key range", which denotes hello ranges of partition key hashes.</span></span> 

<span data-ttu-id="a4e28-119">Wanneer u een query tooAzure Cosmos DB verzendt, voert Hallo SDK deze logische stappen uit:</span><span class="sxs-lookup"><span data-stu-id="a4e28-119">When you issue a query tooAzure Cosmos DB, hello SDK performs these logical steps:</span></span>

* <span data-ttu-id="a4e28-120">Hallo SQL query toodetermine Hallo uitvoering queryplan parseren.</span><span class="sxs-lookup"><span data-stu-id="a4e28-120">Parse hello SQL query toodetermine hello query execution plan.</span></span> 
* <span data-ttu-id="a4e28-121">Als het Hallo-query bevat een filter voor de partitiesleutel hello, zoals `SELECT * FROM c WHERE c.city = "Seattle"`, gerouteerde tooa is één partitie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-121">If hello query includes a filter against hello partition key, like `SELECT * FROM c WHERE c.city = "Seattle"`, it is routed tooa single partition.</span></span> <span data-ttu-id="a4e28-122">Als het Hallo-query heeft geen een filter voor de partitiesleutel en vervolgens deze wordt uitgevoerd in alle partities en de resultaten worden samengevoegd clientzijde.</span><span class="sxs-lookup"><span data-stu-id="a4e28-122">If hello query does not have a filter on partition key, then it is executed in all partitions, and results are merged client side.</span></span>
* <span data-ttu-id="a4e28-123">Hallo-query is uitgevoerd binnen elke partitie in de reeks of parallel, op basis van de clientconfiguratie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-123">hello query is executed within each partition in series or parallel, based on client configuration.</span></span> <span data-ttu-id="a4e28-124">Binnen elke partitie Hallo query mogelijk maken een of meer retouren, afhankelijk van de complexiteit van de query hello, geconfigureerd paginaformaat en ingerichte doorvoer van Hallo-verzameling.</span><span class="sxs-lookup"><span data-stu-id="a4e28-124">Within each partition, hello query might make one or more round trips depending on hello query complexity, configured page size, and provisioned throughput of hello collection.</span></span> <span data-ttu-id="a4e28-125">Elke uitvoering retourneert Hallo aantal [aanvraageenheden](request-units.md) verbruikt door uitvoering van de query, en desgewenst Uitvoeringsstatistieken query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-125">Each execution returns hello number of [request units](request-units.md) consumed by query execution, and optionally, query execution statistics.</span></span> 
* <span data-ttu-id="a4e28-126">Hallo SDK voert een samenvatting van de queryresultaten Hallo meerdere partities.</span><span class="sxs-lookup"><span data-stu-id="a4e28-126">hello SDK performs a summarization of hello query results across partitions.</span></span> <span data-ttu-id="a4e28-127">Bijvoorbeeld, als Hallo query een ORDER BY meerdere partities omvat, zijn vervolgens resultaten uit afzonderlijke partities tooreturn samenvoegen gesorteerd resultaten globaal sorteren.</span><span class="sxs-lookup"><span data-stu-id="a4e28-127">For example, if hello query involves an ORDER BY across partitions, then results from individual partitions are merge-sorted tooreturn results in globally sorted order.</span></span> <span data-ttu-id="a4e28-128">Als het Hallo-query is een aggregatie zoals `COUNT`, Hallo tellingen van afzonderlijke partities worden de opgetelde tooproduce Hallo totale aantal.</span><span class="sxs-lookup"><span data-stu-id="a4e28-128">If hello query is an aggregation like `COUNT`, hello counts from individual partitions are summed tooproduce hello overall count.</span></span>

<span data-ttu-id="a4e28-129">Hallo-SDK's bieden verschillende opties voor het uitvoeren van de query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-129">hello SDKs provide various options for query execution.</span></span> <span data-ttu-id="a4e28-130">Bijvoorbeeld in .NET deze opties zijn beschikbaar in Hallo `FeedOptions` klasse.</span><span class="sxs-lookup"><span data-stu-id="a4e28-130">For example, in .NET these options are available in hello `FeedOptions` class.</span></span> <span data-ttu-id="a4e28-131">Hallo volgende tabel beschrijft deze opties en hoe ze invloed hebben op uitvoeringstijd van de query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-131">hello following table describes these options and how they impact query execution time.</span></span> 

| <span data-ttu-id="a4e28-132">Optie</span><span class="sxs-lookup"><span data-stu-id="a4e28-132">Option</span></span> | <span data-ttu-id="a4e28-133">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="a4e28-133">Description</span></span> |
| ------ | ----------- |
| `EnableCrossPartitionQuery` | <span data-ttu-id="a4e28-134">U moet instellen tootrue voor elke query die toobe uitgevoerd op meer dan één partitie vereist.</span><span class="sxs-lookup"><span data-stu-id="a4e28-134">Must be set tootrue for any query that requires toobe executed across more than one partition.</span></span> <span data-ttu-id="a4e28-135">Dit is een expliciete vlag tooenable u toomake weloverwogen prestatie-en nadelen tijdens de ontwikkeling.</span><span class="sxs-lookup"><span data-stu-id="a4e28-135">This is an explicit flag tooenable you toomake conscious performance tradeoffs during development time.</span></span> |
| `EnableScanInQuery` | <span data-ttu-id="a4e28-136">Moet worden tootrue ingesteld als u ervoor hebt gekozen buiten het indexeren, maar toch wilt dat toorun Hallo query via een scan.</span><span class="sxs-lookup"><span data-stu-id="a4e28-136">Must be set tootrue if you have opted out of indexing, but want toorun hello query via a scan anyway.</span></span> <span data-ttu-id="a4e28-137">Alleen van toepassing als indexering voor Hallo aangevraagd filterpad is uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="a4e28-137">Only applicable if indexing for hello requested filter path is disabled.</span></span> | 
| `MaxItemCount` | <span data-ttu-id="a4e28-138">Hallo maximum aantal items tooreturn per round trip toohello server.</span><span class="sxs-lookup"><span data-stu-id="a4e28-138">hello maximum number of items tooreturn per round trip toohello server.</span></span> <span data-ttu-id="a4e28-139">Door in te stellen te-1, kunt u Hallo server Hallo aantal items beheren.</span><span class="sxs-lookup"><span data-stu-id="a4e28-139">By setting too-1, you can let hello server manage hello number of items.</span></span> <span data-ttu-id="a4e28-140">Of u kunt deze waarde tooretrieve slechts een klein aantal items per round trip verlagen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-140">Or, you can lower this value tooretrieve only a small number of items per round trip.</span></span> 
| `MaxBufferedItemCount` | <span data-ttu-id="a4e28-141">Dit is een optie voor de clientzijde en toolimit Hallo geheugenverbruik gebruikt bij het uitvoeren van cross-partitie ORDER BY.</span><span class="sxs-lookup"><span data-stu-id="a4e28-141">This is a client-side option, and used toolimit hello memory consumption when performing cross-partition ORDER BY.</span></span> <span data-ttu-id="a4e28-142">Een hogere waarde vermindert Hallo latentie voor het sorteren van cross-partitie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-142">A higher value helps reduce hello latency of cross-partition sorting.</span></span> |
| `MaxDegreeOfParallelism` | <span data-ttu-id="a4e28-143">Opgehaald of ingesteld Hallo aantal gelijktijdige bewerkingen clientzijde tijdens parallelle queryuitvoering in hello Azure DocumentDB-database-service wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="a4e28-143">Gets or sets hello number of concurrent operations run client side during parallel query execution in hello Azure DocumentDB database service.</span></span> <span data-ttu-id="a4e28-144">Een positief eigenschapswaarde beperkt Hallo aantal gelijktijdige bewerkingen toohello ingestelde waarde.</span><span class="sxs-lookup"><span data-stu-id="a4e28-144">A positive property value limits hello number of concurrent operations toohello set value.</span></span> <span data-ttu-id="a4e28-145">Als deze tooless dan 0 is ingesteld, besluit Hallo systeem automatisch het aantal gelijktijdige bewerkingen toorun Hallo.</span><span class="sxs-lookup"><span data-stu-id="a4e28-145">If it is set tooless than 0, hello system automatically decides hello number of concurrent operations toorun.</span></span> |
| `PopulateQueryMetrics` | <span data-ttu-id="a4e28-146">Hiermee gedetailleerde logboekregistratie van statistieken voor de tijd die is doorgebracht in verschillende fasen van de uitvoering van de query zoals compileertijd en index Lustijd document laden tijd.</span><span class="sxs-lookup"><span data-stu-id="a4e28-146">Enables detailed logging of statistics of time spent in various phases of query execution like compilation time, index loop time, and document load time.</span></span> <span data-ttu-id="a4e28-147">Met de ondersteuning van Azure toodiagnose query prestatieproblemen kunt u de uitvoer van de query statistieken delen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-147">You can share output from query statistics with Azure Support toodiagnose query performance issues.</span></span> |
| `RequestContinuation` | <span data-ttu-id="a4e28-148">U kunt de queryuitvoering hervatten door door te geven in een ondoorzichtige vervolgtoken Hallo geretourneerd door een query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-148">You can resume query execution by passing in hello opaque continuation token returned by any query.</span></span> <span data-ttu-id="a4e28-149">Hallo vervolgtoken ingekapseld alle staat is vereist voor uitvoering van de query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-149">hello continuation token encapsulates all state required for query execution.</span></span> |
| `ResponseContinuationTokenLimitInKb` | <span data-ttu-id="a4e28-150">U kunt Hallo maximale grootte van Hallo vervolgtoken geretourneerd door de server Hallo beperken.</span><span class="sxs-lookup"><span data-stu-id="a4e28-150">You can limit hello maximum size of hello continuation token returned by hello server.</span></span> <span data-ttu-id="a4e28-151">Mogelijk moet u tooset dit als uw toepassingshost limieten op antwoord header-grootte.</span><span class="sxs-lookup"><span data-stu-id="a4e28-151">You might need tooset this if your application host has limits on response header size.</span></span> <span data-ttu-id="a4e28-152">Wanneer dit wordt mogelijk uitgebreid Hallo totale duur en RUs verbruikt voor het Hallo-query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-152">Setting this may increase hello overall duration and RUs consumed for hello query.</span></span>  |

<span data-ttu-id="a4e28-153">Bijvoorbeeld, u gaat nu een voorbeeldquery op partitiesleutel is aangevraagd op een verzameling met `/city` als Hallo partitie sleutel en ingericht met 100.000 RU/s doorvoer.</span><span class="sxs-lookup"><span data-stu-id="a4e28-153">For example, let's take an example query on partition key requested on a collection with `/city` as hello partition key and provisioned with 100,000 RU/s of throughput.</span></span> <span data-ttu-id="a4e28-154">U deze query met aanvragen `CreateDocumentQuery<T>` in .NET Hallo volgende:</span><span class="sxs-lookup"><span data-stu-id="a4e28-154">You request this query using `CreateDocumentQuery<T>` in .NET like hello following:</span></span>

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        PopulateQueryMetrics = true, 
        MaxItemCount = -1, 
        MaxDegreeOfParallelism = -1, 
        EnableCrossPartitionQuery = true 
    }).AsDocumentQuery();

FeedResponse<dynamic> result = await query.ExecuteNextAsync();
```

<span data-ttu-id="a4e28-155">Hallo SDK codefragment hierboven weergegeven, overeenkomt met toohello REST-API-aanvraag te volgen:</span><span class="sxs-lookup"><span data-stu-id="a4e28-155">hello SDK snippet shown above, corresponds toohello following REST API request:</span></span>

```
POST https://arramacquerymetrics-westus.documents.azure.com/dbs/db/colls/sample/docs HTTP/1.1
x-ms-continuation: 
x-ms-documentdb-isquery: True
x-ms-max-item-count: -1
x-ms-documentdb-query-enablecrosspartition: True
x-ms-documentdb-query-parallelizecrosspartitionquery: True
x-ms-documentdb-query-iscontinuationexpected: True
x-ms-documentdb-populatequerymetrics: True
x-ms-date: Tue, 27 Jun 2017 21:52:18 GMT
authorization: type%3dmaster%26ver%3d1.0%26sig%3drp1Hi83Y8aVV5V6LzZ6xhtQVXRAMz0WNMnUuvriUv%2b4%3d
x-ms-session-token: 7:8,6:2008,5:8,4:2008,3:8,2:2008,1:8,0:8,9:8,8:4008
Cache-Control: no-cache
x-ms-consistency-level: Session
User-Agent: documentdb-dotnet-sdk/1.14.1 Host/32-bit MicrosoftWindowsNT/6.2.9200.0
x-ms-version: 2017-02-22
Accept: application/json
Content-Type: application/query+json
Host: arramacquerymetrics-westus.documents.azure.com
Content-Length: 52
Expect: 100-continue

{"query":"SELECT * FROM c WHERE c.city = 'Seattle'"}
```

<span data-ttu-id="a4e28-156">Elke pagina van de uitvoering van query overeenkomt met de REST-API tooa `POST` Hello `Accept: application/query+json` kop- en SQL-query in de hoofdtekst van het Hallo Hallo.</span><span class="sxs-lookup"><span data-stu-id="a4e28-156">Each query execution page corresponds tooa REST API `POST` with hello `Accept: application/query+json` header, and hello SQL query in hello body.</span></span> <span data-ttu-id="a4e28-157">Elke query kunnen een of meer reizen toohello server Hello afronden `x-ms-continuation` token teruggestuurd tussen het Hallo-client en server tooresume uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="a4e28-157">Each query makes one or more round trips toohello server with hello `x-ms-continuation` token echoed between hello client and server tooresume execution.</span></span> <span data-ttu-id="a4e28-158">Hallo configuratieopties in FeedOptions worden toohello server in de vorm Hallo van aanvraagheaders doorgegeven.</span><span class="sxs-lookup"><span data-stu-id="a4e28-158">hello configuration options in FeedOptions are passed toohello server in hello form of request headers.</span></span> <span data-ttu-id="a4e28-159">Bijvoorbeeld: `MaxItemCount` komt overeen te`x-ms-max-item-count`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-159">For example, `MaxItemCount` corresponds too`x-ms-max-item-count`.</span></span> 

<span data-ttu-id="a4e28-160">Hallo aanvraag retourneert Hallo volgende (afgekapt voor leesbaarheid) antwoord:</span><span class="sxs-lookup"><span data-stu-id="a4e28-160">hello request returns hello following (truncated for readability) response:</span></span>

```
HTTP/1.1 200 Ok
Cache-Control: no-store, no-cache
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: application/json
Server: Microsoft-HTTPAPI/2.0
Strict-Transport-Security: max-age=31536000
x-ms-last-state-change-utc: Tue, 27 Jun 2017 21:01:57.561 GMT
x-ms-resource-quota: documentSize=10240;documentsSize=10485760;documentsCount=-1;collectionSize=10485760;
x-ms-resource-usage: documentSize=1;documentsSize=884;documentsCount=2000;collectionSize=1408;
x-ms-item-count: 2000
x-ms-schemaversion: 1.3
x-ms-alt-content-path: dbs/db/colls/sample
x-ms-content-path: +9kEANVq0wA=
x-ms-xp-role: 1
x-ms-documentdb-query-metrics: totalExecutionTimeInMs=33.67;queryCompileTimeInMs=0.06;queryLogicalPlanBuildTimeInMs=0.02;queryPhysicalPlanBuildTimeInMs=0.10;queryOptimizationTimeInMs=0.00;VMExecutionTimeInMs=32.56;indexLookupTimeInMs=0.36;documentLoadTimeInMs=9.58;systemFunctionExecuteTimeInMs=0.00;userFunctionExecuteTimeInMs=0.00;retrievedDocumentCount=2000;retrievedDocumentSize=1125600;outputDocumentCount=2000;writeOutputTimeInMs=18.10;indexUtilizationRatio=1.00
x-ms-request-charge: 604.42
x-ms-serviceversion: version=1.14.34.4
x-ms-activity-id: 0df8b5f6-83b9-4493-abda-cce6d0f91486
x-ms-session-token: 2:2008
x-ms-gatewayversion: version=1.14.33.2
Date: Tue, 27 Jun 2017 21:59:49 GMT
```

<span data-ttu-id="a4e28-161">Hallo sleutel antwoordheaders geretourneerde Hallo query zijn Hallo volgende:</span><span class="sxs-lookup"><span data-stu-id="a4e28-161">hello key response headers returned from hello query include hello following:</span></span>

| <span data-ttu-id="a4e28-162">Optie</span><span class="sxs-lookup"><span data-stu-id="a4e28-162">Option</span></span> | <span data-ttu-id="a4e28-163">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="a4e28-163">Description</span></span> |
| ------ | ----------- |
| `x-ms-item-count` | <span data-ttu-id="a4e28-164">Hallo aantal items in Hallo antwoord geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="a4e28-164">hello number of items returned in hello response.</span></span> <span data-ttu-id="a4e28-165">Dit is afhankelijk van de opgegeven Hallo `x-ms-max-item-count`, Hallo aantal items dat binnen de maximale reactiegrootte nettolading Hallo Hallo ingerichte doorvoer en uitvoeringstijd van de query past.</span><span class="sxs-lookup"><span data-stu-id="a4e28-165">This is dependent on hello supplied `x-ms-max-item-count`, hello number of items that can be fit within hello maximum response payload size, hello provisioned throughput, and query execution time.</span></span> |  
| `x-ms-continuation:` | <span data-ttu-id="a4e28-166">Hallo voortzetting token tooresume uitvoering van Hallo query, als er extra resultaten beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="a4e28-166">hello continuation token tooresume execution of hello query, if additional results are available.</span></span> | 
| `x-ms-documentdb-query-metrics` | <span data-ttu-id="a4e28-167">Hallo query statistieken voor Hallo uitvoering.</span><span class="sxs-lookup"><span data-stu-id="a4e28-167">hello query statistics for hello execution.</span></span> <span data-ttu-id="a4e28-168">Dit is een tekenreeks met scheidingstekens met statistieken van de tijd besteed aan Hallo verschillende fasen van de uitvoering van de query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-168">This is a delimited string containing statistics of time spent in hello various phases of query execution.</span></span> <span data-ttu-id="a4e28-169">Geretourneerde als `x-ms-documentdb-populatequerymetrics` te is ingesteld`True`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-169">Returned if `x-ms-documentdb-populatequerymetrics` is set too`True`.</span></span> | 
| `x-ms-request-charge` | <span data-ttu-id="a4e28-170">aantal Hallo [aanvraageenheden](request-units.md) verbruikt door Hallo-query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-170">hello number of [request units](request-units.md) consumed by hello query.</span></span> | 

<span data-ttu-id="a4e28-171">Zie voor meer informatie over Hallo REST-API-aanvraagheaders en opties [opvragen van resources met behulp van Hallo DocumentDB REST-API](https://docs.microsoft.com/rest/api/documentdb/querying-documentdb-resources-using-the-rest-api).</span><span class="sxs-lookup"><span data-stu-id="a4e28-171">For details on hello REST API request headers and options, see [Querying resources using hello DocumentDB REST API](https://docs.microsoft.com/rest/api/documentdb/querying-documentdb-resources-using-the-rest-api).</span></span>

## <a name="best-practices-for-query-performance"></a><span data-ttu-id="a4e28-172">Aanbevolen procedures voor prestaties van query 's</span><span class="sxs-lookup"><span data-stu-id="a4e28-172">Best practices for query performance</span></span>
<span data-ttu-id="a4e28-173">Hallo volgen Hallo meest voorkomende factoren die van invloed op prestaties van Azure DB die Cosmos-query's.</span><span class="sxs-lookup"><span data-stu-id="a4e28-173">hello following are hello most common factors that impact Azure Cosmos DB query performance.</span></span> <span data-ttu-id="a4e28-174">We verdiepen in elk van deze onderwerpen in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="a4e28-174">We dig deeper into each of these topics in this article.</span></span>

| <span data-ttu-id="a4e28-175">Factor</span><span class="sxs-lookup"><span data-stu-id="a4e28-175">Factor</span></span> | <span data-ttu-id="a4e28-176">Tip</span><span class="sxs-lookup"><span data-stu-id="a4e28-176">Tip</span></span> | 
| ------ | -----| 
| <span data-ttu-id="a4e28-177">Ingerichte doorvoer</span><span class="sxs-lookup"><span data-stu-id="a4e28-177">Provisioned throughput</span></span> | <span data-ttu-id="a4e28-178">Meet RU per query en zorg ervoor dat er Hallo vereist ingerichte doorvoer voor uw query's.</span><span class="sxs-lookup"><span data-stu-id="a4e28-178">Measure RU per query, and ensure that you have hello required provisioned throughput for your queries.</span></span> | 
| <span data-ttu-id="a4e28-179">Partitionering en partitiesleutels</span><span class="sxs-lookup"><span data-stu-id="a4e28-179">Partitioning and partition keys</span></span> | <span data-ttu-id="a4e28-180">Voorkeur voor query's met Hallo partitie sleutelwaarde in filtercomponent Hallo voor lage latentie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-180">Favor queries with hello partition key value in hello filter clause for low latency.</span></span> |
| <span data-ttu-id="a4e28-181">SDK en query-opties</span><span class="sxs-lookup"><span data-stu-id="a4e28-181">SDK and query options</span></span> | <span data-ttu-id="a4e28-182">Volg de aanbevolen procedures van de SDK zoals directe verbinding en clientzijde uitvoering queryopties afstemmen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-182">Follow SDK best practices like direct connectivity, and tune client-side query execution options.</span></span> |
| <span data-ttu-id="a4e28-183">Netwerklatentie</span><span class="sxs-lookup"><span data-stu-id="a4e28-183">Network latency</span></span> | <span data-ttu-id="a4e28-184">Account voor netwerk overhead in meting en gebruik multihoming API's tooread van Hallo dichtstbijzijnde regio.</span><span class="sxs-lookup"><span data-stu-id="a4e28-184">Account for network overhead in measurement, and use multi-homing APIs tooread from hello nearest region.</span></span> |
| <span data-ttu-id="a4e28-185">Indexeringsbeleid</span><span class="sxs-lookup"><span data-stu-id="a4e28-185">Indexing Policy</span></span> | <span data-ttu-id="a4e28-186">Zorg ervoor dat u Hallo vereist paden/indexeringsbeleid voor Hallo-query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-186">Ensure that you have hello required indexing paths/policy for hello query.</span></span> |
| <span data-ttu-id="a4e28-187">Query-uitvoering metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="a4e28-187">Query execution metrics</span></span> | <span data-ttu-id="a4e28-188">Analyseer Hallo query uitvoering metrische gegevens tooidentify potentiële regeneraties van query's en vormen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-188">Analyze hello query execution metrics tooidentify potential rewrites of query and data shapes.</span></span>  |

### <a name="provisioned-throughput"></a><span data-ttu-id="a4e28-189">Ingerichte doorvoer</span><span class="sxs-lookup"><span data-stu-id="a4e28-189">Provisioned throughput</span></span>
<span data-ttu-id="a4e28-190">In de Cosmos-DB maakt u containers voor gegevens, elk met gereserveerde doorvoer, uitgedrukt in de aanvraag-eenheden (RU) per de seconde.</span><span class="sxs-lookup"><span data-stu-id="a4e28-190">In Cosmos DB, you create containers of data, each with reserved throughput expressed in request units (RU) per-second.</span></span> <span data-ttu-id="a4e28-191">Het lezen van een document van 1 KB is 1 RU en elke bewerking (met inbegrip van query's) is genormaliseerde tooa vast aantal RUs op basis van de complexiteit.</span><span class="sxs-lookup"><span data-stu-id="a4e28-191">A read of a 1-KB document is 1 RU, and every operation (including queries) is normalized tooa fixed number of RUs based on its complexity.</span></span> <span data-ttu-id="a4e28-192">Bijvoorbeeld, als er 1000 RU/s ingericht voor de container en u hebt een query zoals `SELECT * FROM c WHERE c.city = 'Seattle'` die 5 RUs verbruikt en vervolgens kunt u uitvoeren (1000 RU/s) / (5 RU/query) = 200 query/s dergelijke query's per seconde.</span><span class="sxs-lookup"><span data-stu-id="a4e28-192">For example, if you have 1000 RU/s provisioned for your container, and you have a query like `SELECT * FROM c WHERE c.city = 'Seattle'` that consumes 5 RUs, then you can perform (1000 RU/s) / (5 RU/query) = 200 query/s such queries per second.</span></span> 

<span data-ttu-id="a4e28-193">Als u meer dan 200 query's per seconde indient, begint Hallo service binnenkomende aanvragen frequentiebeperkende hierboven 200/s.</span><span class="sxs-lookup"><span data-stu-id="a4e28-193">If you submit more than 200 queries/sec, hello service starts rate-limiting incoming requests above 200/s.</span></span> <span data-ttu-id="a4e28-194">in dit geval Hallo SDK's automatisch verwerken door het uitvoeren van een backoff/nieuwe poging en daarom ziet u mogelijk een hogere latentie voor deze query's.</span><span class="sxs-lookup"><span data-stu-id="a4e28-194">hello SDKs automatically handle this case by performing a backoff/retry, therefore you might notice a higher latency for these queries.</span></span> <span data-ttu-id="a4e28-195">Hallo ingerichte doorvoer toohello verhogen vereist waarde verbetert uw Querylatentie en de doorvoer.</span><span class="sxs-lookup"><span data-stu-id="a4e28-195">Increasing hello provisioned throughput toohello required value improves your query latency and throughput.</span></span> 

<span data-ttu-id="a4e28-196">toolearn meer informatie over aanvraageenheden, Zie [Aanvraageenheden](request-units.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-196">toolearn more about request units, see [Request units](request-units.md).</span></span>

### <a name="partitioning-and-partition-keys"></a><span data-ttu-id="a4e28-197">Partitionering en partitiesleutels</span><span class="sxs-lookup"><span data-stu-id="a4e28-197">Partitioning and partition keys</span></span>
<span data-ttu-id="a4e28-198">Met Azure Cosmos DB doorgaans uitvoeren query's in volgorde van de snelste/meest efficiënte tooslower/minder efficiënt Hallo.</span><span class="sxs-lookup"><span data-stu-id="a4e28-198">With Azure Cosmos DB, typically queries perform in hello following order from fastest/most efficient tooslower/less efficient.</span></span> 

* <span data-ttu-id="a4e28-199">Op een enkele partitie en item sleutel ophalen</span><span class="sxs-lookup"><span data-stu-id="a4e28-199">GET on a single partition key and item key</span></span>
* <span data-ttu-id="a4e28-200">Query's uitvoeren met een filter-component op een enkele partitiesleutel</span><span class="sxs-lookup"><span data-stu-id="a4e28-200">Query with a filter clause on a single partition key</span></span>
* <span data-ttu-id="a4e28-201">Query uitvoeren zonder dat een gelijkheid of bereik filter-component op een eigenschap</span><span class="sxs-lookup"><span data-stu-id="a4e28-201">Query without an equality or range filter clause on any property</span></span>
* <span data-ttu-id="a4e28-202">Een query uitvoeren zonder filters</span><span class="sxs-lookup"><span data-stu-id="a4e28-202">Query without filters</span></span>

<span data-ttu-id="a4e28-203">Zoekt die tooconsult moeten alle partities nodig hogere latentie en hogere RUs kan gebruiken.</span><span class="sxs-lookup"><span data-stu-id="a4e28-203">Queries that need tooconsult all partitions need higher latency, and can consume higher RUs.</span></span> <span data-ttu-id="a4e28-204">Aangezien elke partitie automatisch indexeren tegen alle eigenschappen heeft, kan Hallo query worden geleverd efficiënt uit Hallo index in dit geval.</span><span class="sxs-lookup"><span data-stu-id="a4e28-204">Since each partition has automatic indexing against all properties, hello query can be served efficiently from hello index in this case.</span></span> <span data-ttu-id="a4e28-205">U kunt query's die sneller partities met behulp van Hallo parallelle uitvoering opties omvatten.</span><span class="sxs-lookup"><span data-stu-id="a4e28-205">You can make queries that span partitions faster by using hello parallelism options.</span></span>

<span data-ttu-id="a4e28-206">toolearn meer informatie over partitioneren en partitiesleutels, Zie [partitioneren in Azure Cosmos DB](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-206">toolearn more about partitioning and partition keys, see [Partitioning in Azure Cosmos DB](partition-data.md).</span></span>

### <a name="sdk-and-query-options"></a><span data-ttu-id="a4e28-207">SDK en query-opties</span><span class="sxs-lookup"><span data-stu-id="a4e28-207">SDK and query options</span></span>
<span data-ttu-id="a4e28-208">Zie [Tips voor betere prestaties](performance-tips.md) en [prestatietests](performance-testing.md) voor hoe tooget Hallo beste clientzijde prestaties van de Azure Cosmos-database.</span><span class="sxs-lookup"><span data-stu-id="a4e28-208">See [Performance Tips](performance-tips.md) and [Performance testing](performance-testing.md) for how tooget hello best client-side performance from Azure Cosmos DB.</span></span> <span data-ttu-id="a4e28-209">Dit omvat het gebruik Hallo nieuwste SDK's, platform-specifieke netwerkconfiguraties als standaardaantal verbindingen, frequentie van garbagecollection, configureren en gebruiken van lightweight connectiviteitsopties zoals Direct/TCP.</span><span class="sxs-lookup"><span data-stu-id="a4e28-209">This includes using hello latest SDKs, configuring platform-specific configurations like default number of connections, frequency of garbage collection, and using lightweight connectivity options like Direct/TCP.</span></span> 


#### <a name="max-item-count"></a><span data-ttu-id="a4e28-210">Aantal items max</span><span class="sxs-lookup"><span data-stu-id="a4e28-210">Max Item Count</span></span>
<span data-ttu-id="a4e28-211">Hallo voor query's, waarde van `MaxItemCount` kan een aanzienlijke invloed hebben op het moment dat de end-to-end-query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-211">For queries, hello value of `MaxItemCount` can have a significant impact on end-to-end query time.</span></span> <span data-ttu-id="a4e28-212">Elke retournetwerklatentie toohello server retourneren niet meer dan het aantal items in Hallo `MaxItemCount` (standaard van 100 objecten).</span><span class="sxs-lookup"><span data-stu-id="a4e28-212">Each round trip toohello server will return no more than hello number of items in `MaxItemCount` (Default of 100 items).</span></span> <span data-ttu-id="a4e28-213">Als u deze tooa hogere waarde (-1 is maximum- en aanbevolen) worden uw totale duur van de query verbeteren door het aantal retouren tussen server en client, met name voor query's met grote resultatensets hello te beperken.</span><span class="sxs-lookup"><span data-stu-id="a4e28-213">Setting this tooa higher value (-1 is maximum, and recommended) will improve your query duration overall by limiting hello number of round trips between server and client, especially for queries with large result sets.</span></span>

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        MaxItemCount = -1, 
    }).AsDocumentQuery();
```

#### <a name="max-degree-of-parallelism"></a><span data-ttu-id="a4e28-214">Maximale mate van parallelle uitvoering</span><span class="sxs-lookup"><span data-stu-id="a4e28-214">Max Degree of Parallelism</span></span>
<span data-ttu-id="a4e28-215">Voor query's optimaliseren Hallo `MaxDegreeOfParallelism` tooidentify Hallo aanbevolen configuraties voor uw toepassing, met name als u bij het uitvoeren van query's de cross-partitie (zonder een filter op Hallo partitiesleutel waarde).</span><span class="sxs-lookup"><span data-stu-id="a4e28-215">For queries, tune hello `MaxDegreeOfParallelism` tooidentify hello best configurations for your application, especially if you perform cross-partition queries (without a filter on hello partition-key value).</span></span> <span data-ttu-id="a4e28-216">`MaxDegreeOfParallelism`Hiermee bepaalt u Hallo maximum aantal parallelle taken, dat wil zeggen, Hallo maximumaantal partities toobe parallel bezocht.</span><span class="sxs-lookup"><span data-stu-id="a4e28-216">`MaxDegreeOfParallelism`  controls hello maximum number of parallel tasks, i.e., hello maximum of partitions toobe visited in parallel.</span></span> 

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        MaxDegreeOfParallelism = -1, 
        EnableCrossPartitionQuery = true 
    }).AsDocumentQuery();
```

<span data-ttu-id="a4e28-217">Stel dat</span><span class="sxs-lookup"><span data-stu-id="a4e28-217">Let’s assume that</span></span>
* <span data-ttu-id="a4e28-218">D = standaard maximale aantal parallelle taken (totaal aantal processor in client-computer Hallo =)</span><span class="sxs-lookup"><span data-stu-id="a4e28-218">D = Default Maximum number of parallel tasks (= total number of processor in hello client machine)</span></span>
* <span data-ttu-id="a4e28-219">P = gebruiker opgegeven maximale aantal parallelle taken</span><span class="sxs-lookup"><span data-stu-id="a4e28-219">P = User-specified maximum number of parallel tasks</span></span>
* <span data-ttu-id="a4e28-220">N = aantal partities die u moet een toobe bezocht voor het beantwoorden van een query</span><span class="sxs-lookup"><span data-stu-id="a4e28-220">N = Number of partitions that needs  toobe visited for answering a query</span></span>

<span data-ttu-id="a4e28-221">Hieronder vindt u implicaties van hoe de zich Hallo parallelle query's voor verschillende waarden van P. gedragen zou</span><span class="sxs-lookup"><span data-stu-id="a4e28-221">Following are implications of how hello parallel queries would behave for different values of P.</span></span>
* <span data-ttu-id="a4e28-222">(P == 0) = > seriële modus</span><span class="sxs-lookup"><span data-stu-id="a4e28-222">(P == 0) => Serial Mode</span></span>
* <span data-ttu-id="a4e28-223">(P == 1) = > maximaal één taak</span><span class="sxs-lookup"><span data-stu-id="a4e28-223">(P == 1) => Maximum of one task</span></span>
* <span data-ttu-id="a4e28-224">(P > 1) = > parallelle taken Min (P, N)</span><span class="sxs-lookup"><span data-stu-id="a4e28-224">(P > 1) => Min (P, N) parallel tasks</span></span> 
* <span data-ttu-id="a4e28-225">(P < 1) = > parallelle taken Min (N, D)</span><span class="sxs-lookup"><span data-stu-id="a4e28-225">(P < 1) => Min (N, D) parallel tasks</span></span>

<span data-ttu-id="a4e28-226">Voor SDK-releaseopmerkingen en Zie voor meer informatie over geïmplementeerde klassen en methoden [DocumentDB SDK's](documentdb-sdk-dotnet.md)</span><span class="sxs-lookup"><span data-stu-id="a4e28-226">For SDK release notes, and details on implemented classes and methods see [DocumentDB SDKs](documentdb-sdk-dotnet.md)</span></span>

### <a name="network-latency"></a><span data-ttu-id="a4e28-227">Netwerklatentie</span><span class="sxs-lookup"><span data-stu-id="a4e28-227">Network latency</span></span>
<span data-ttu-id="a4e28-228">Zie [Azure Cosmos DB globale distributie](tutorial-global-distribution-documentdb.md) tooset-up maken van globale distributie en verbinding maken met de dichtstbijzijnde regio toohello.</span><span class="sxs-lookup"><span data-stu-id="a4e28-228">See [Azure Cosmos DB global distribution](tutorial-global-distribution-documentdb.md) for how tooset up global distribution, and connect toohello closest region.</span></span> <span data-ttu-id="a4e28-229">Netwerklatentie heeft een aanzienlijke invloed op prestaties van query's als u een grote resultatenset Hallo query ophalen of toomake meerdere retouren nodig.</span><span class="sxs-lookup"><span data-stu-id="a4e28-229">Network latency has a significant impact on query performance when you need toomake multiple round-trips or retrieve a large result set from hello query.</span></span> 

<span data-ttu-id="a4e28-230">Hallo sectie op metrische gegevens query-uitvoering wordt uitgelegd hoe tooretrieve Hallo server uitvoeringstijd van query's ( `totalExecutionTimeInMs`), zodat u tijd besteed aan het uitvoeren van de query en -tijd besteed aan het netwerk onderweg kunt onderscheiden.</span><span class="sxs-lookup"><span data-stu-id="a4e28-230">hello section on query execution metrics explains how tooretrieve hello server execution time of queries ( `totalExecutionTimeInMs`), so that you can differentiate between time spent in query execution and time spent in network transit.</span></span>

### <a name="indexing-policy"></a><span data-ttu-id="a4e28-231">Indexeringsbeleid</span><span class="sxs-lookup"><span data-stu-id="a4e28-231">Indexing policy</span></span>
<span data-ttu-id="a4e28-232">Zie [indexeringsbeleid configureren](indexing-policies.md) voor indexeren paden, soorten, en modi en invloed op uitvoering van de query.</span><span class="sxs-lookup"><span data-stu-id="a4e28-232">See [Configuring indexing policy](indexing-policies.md) for indexing paths, kinds, and modes, and how they impact query execution.</span></span> <span data-ttu-id="a4e28-233">Hallo indexeren beleid gebruikt standaard hash-indexering voor tekenreeksen, die geldt voor gelijkheid query's, maar niet voor query's bereik/order by-query's.</span><span class="sxs-lookup"><span data-stu-id="a4e28-233">By default, hello indexing policy uses Hash indexing for strings, which is effective for equality queries, but not for range queries/order by queries.</span></span> <span data-ttu-id="a4e28-234">Als u een bereik query's nodig voor tekenreeksen, wordt u aangeraden Hallo bereik indextype voor alle tekenreeksen geven.</span><span class="sxs-lookup"><span data-stu-id="a4e28-234">If you need range queries for strings, we recommend specifying hello Range index type for all strings.</span></span> 

## <a name="query-execution-metrics"></a><span data-ttu-id="a4e28-235">Query-uitvoering metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="a4e28-235">Query execution metrics</span></span>
<span data-ttu-id="a4e28-236">U kunt gedetailleerde metrische gegevens op de uitvoering van de query verkrijgen door door te geven in Hallo optionele `x-ms-documentdb-populatequerymetrics` header (`FeedOptions.PopulateQueryMetrics` in Hallo .NET SDK).</span><span class="sxs-lookup"><span data-stu-id="a4e28-236">You can obtain detailed metrics on query execution by passing in hello optional `x-ms-documentdb-populatequerymetrics` header (`FeedOptions.PopulateQueryMetrics` in hello .NET SDK).</span></span> <span data-ttu-id="a4e28-237">waarde geretourneerd in Hallo `x-ms-documentdb-query-metrics` heeft Hallo sleutel / waarde-paren die zijn bedoeld voor geavanceerde probleemoplossing van de uitvoering van de query te volgen.</span><span class="sxs-lookup"><span data-stu-id="a4e28-237">hello value returned in `x-ms-documentdb-query-metrics` has hello following key-value pairs meant for advanced troubleshooting of query execution.</span></span> 

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        PopulateQueryMetrics = true, 
    }).AsDocumentQuery();

FeedResponse<dynamic> result = await query.ExecuteNextAsync();

// Returns metrics by partition key range Id
IReadOnlyDictionary<string, QueryMetrics> metrics = result.QueryMetrics;

```

| <span data-ttu-id="a4e28-238">Gegevens</span><span class="sxs-lookup"><span data-stu-id="a4e28-238">Metric</span></span> | <span data-ttu-id="a4e28-239">Eenheid</span><span class="sxs-lookup"><span data-stu-id="a4e28-239">Unit</span></span> | <span data-ttu-id="a4e28-240">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="a4e28-240">Description</span></span> | 
| ------ | -----| ----------- |
| `totalExecutionTimeInMs` | <span data-ttu-id="a4e28-241">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-241">milliseconds</span></span> | <span data-ttu-id="a4e28-242">Uitvoeringstijd van de query</span><span class="sxs-lookup"><span data-stu-id="a4e28-242">Query execution time</span></span> | 
| `queryCompileTimeInMs` | <span data-ttu-id="a4e28-243">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-243">milliseconds</span></span> | <span data-ttu-id="a4e28-244">Query-compilatie</span><span class="sxs-lookup"><span data-stu-id="a4e28-244">Query compile time</span></span>  | 
| `queryLogicalPlanBuildTimeInMs` | <span data-ttu-id="a4e28-245">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-245">milliseconds</span></span> | <span data-ttu-id="a4e28-246">Tijd toobuild logische queryplan</span><span class="sxs-lookup"><span data-stu-id="a4e28-246">Time toobuild logical query plan</span></span> | 
| `queryPhysicalPlanBuildTimeInMs` | <span data-ttu-id="a4e28-247">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-247">milliseconds</span></span> | <span data-ttu-id="a4e28-248">Tijd toobuild fysieke queryplan</span><span class="sxs-lookup"><span data-stu-id="a4e28-248">Time toobuild physical query plan</span></span> | 
| `queryOptimizationTimeInMs` | <span data-ttu-id="a4e28-249">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-249">milliseconds</span></span> | <span data-ttu-id="a4e28-250">Tijd besteed aan de query te optimaliseren</span><span class="sxs-lookup"><span data-stu-id="a4e28-250">Time spent in optimizing query</span></span> | 
| `VMExecutionTimeInMs` | <span data-ttu-id="a4e28-251">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-251">milliseconds</span></span> | <span data-ttu-id="a4e28-252">Tijd besteed aan de query-runtime</span><span class="sxs-lookup"><span data-stu-id="a4e28-252">Time spent in query runtime</span></span> | 
| `indexLookupTimeInMs` | <span data-ttu-id="a4e28-253">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-253">milliseconds</span></span> | <span data-ttu-id="a4e28-254">Tijd besteed aan fysieke index laag</span><span class="sxs-lookup"><span data-stu-id="a4e28-254">Time spent in physical index layer</span></span> | 
| `documentLoadTimeInMs` | <span data-ttu-id="a4e28-255">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-255">milliseconds</span></span> | <span data-ttu-id="a4e28-256">Tijd besteed aan het laden van documenten</span><span class="sxs-lookup"><span data-stu-id="a4e28-256">Time spent in loading documents</span></span>  | 
| `systemFunctionExecuteTimeInMs` | <span data-ttu-id="a4e28-257">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-257">milliseconds</span></span> | <span data-ttu-id="a4e28-258">Totale tijd besteed aan het uitvoerende system (ingebouwde) functies in milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-258">Total time spent executing system (built-in) functions in milliseconds</span></span>  | 
| `userFunctionExecuteTimeInMs` | <span data-ttu-id="a4e28-259">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-259">milliseconds</span></span> | <span data-ttu-id="a4e28-260">Totale tijd besteed worden uitgevoerd door de gebruiker gedefinieerde functies in milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-260">Total time spent executing user-defined functions in milliseconds</span></span> | 
| `retrievedDocumentCount` | <span data-ttu-id="a4e28-261">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-261">milliseconds</span></span> | <span data-ttu-id="a4e28-262">Totaal aantal opgehaalde documenten</span><span class="sxs-lookup"><span data-stu-id="a4e28-262">Total number of retrieved documents</span></span>  | 
| `retrievedDocumentSize` | <span data-ttu-id="a4e28-263">Bytes</span><span class="sxs-lookup"><span data-stu-id="a4e28-263">bytes</span></span> | <span data-ttu-id="a4e28-264">Totale grootte van de opgehaalde documenten in bytes</span><span class="sxs-lookup"><span data-stu-id="a4e28-264">Total size of retrieved documents in bytes</span></span>  | 
| `outputDocumentCount` | <span data-ttu-id="a4e28-265">Aantal</span><span class="sxs-lookup"><span data-stu-id="a4e28-265">count</span></span> | <span data-ttu-id="a4e28-266">Het aantal uitvoerdocumenten</span><span class="sxs-lookup"><span data-stu-id="a4e28-266">Number of output documents</span></span> | 
| `writeOutputTimeInMs` | <span data-ttu-id="a4e28-267">milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-267">milliseconds</span></span> | <span data-ttu-id="a4e28-268">Uitvoeringstijd van de query in milliseconden</span><span class="sxs-lookup"><span data-stu-id="a4e28-268">Query execution time in milliseconds</span></span> | 
| `indexUtilizationRatio` | <span data-ttu-id="a4e28-269">verhouding (< = 1)</span><span class="sxs-lookup"><span data-stu-id="a4e28-269">ratio (<=1)</span></span> | <span data-ttu-id="a4e28-270">Verhouding tussen aantal documenten dat overeenkomt met de Hallo filter toohello aantal documenten die worden geladen</span><span class="sxs-lookup"><span data-stu-id="a4e28-270">Ratio of number of documents matched by hello filter toohello number of documents loaded</span></span>  | 

<span data-ttu-id="a4e28-271">Hallo client SDK's kunnen intern query maken die meerdere query operations tooserve Hallo binnen elke partitie.</span><span class="sxs-lookup"><span data-stu-id="a4e28-271">hello client SDKs may internally make multiple query operations tooserve hello query within each partition.</span></span> <span data-ttu-id="a4e28-272">Hallo client meer dan één aanroep per partitie als het totaal aantal resultaten Hallo overschrijdt maakt `x-ms-max-item-count`, als Hallo query Hallo ingerichte doorvoer voor Hallo-partitie overschrijdt, of als hello query nettolading Hallo maximale grootte per pagina bereikt of als hello query Hallo bereikt systeem toegewezen time-outlimiet.</span><span class="sxs-lookup"><span data-stu-id="a4e28-272">hello client makes more than one call per-partition if hello total results exceed `x-ms-max-item-count`, if hello query exceeds hello provisioned throughput for hello partition, or if hello query payload reaches hello maximum size per page, or if hello query reaches hello system allocated timeout limit.</span></span> <span data-ttu-id="a4e28-273">Elke gedeeltelijke queryuitvoering retourneert een `x-ms-documentdb-query-metrics` voor die pagina.</span><span class="sxs-lookup"><span data-stu-id="a4e28-273">Each partial query execution returns a `x-ms-documentdb-query-metrics` for that page.</span></span> 

<span data-ttu-id="a4e28-274">Hier volgen enkele voorbeeldquery's en hoe toointerpret sommige Hallo metrische gegevens van de uitvoering van de query geretourneerd:</span><span class="sxs-lookup"><span data-stu-id="a4e28-274">Here are some sample queries, and how toointerpret some of hello metrics returned from query execution:</span></span> 

| <span data-ttu-id="a4e28-275">Query’s uitvoeren</span><span class="sxs-lookup"><span data-stu-id="a4e28-275">Query</span></span> | <span data-ttu-id="a4e28-276">Voorbeeld metrische gegevens</span><span class="sxs-lookup"><span data-stu-id="a4e28-276">Sample Metric</span></span> | <span data-ttu-id="a4e28-277">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="a4e28-277">Description</span></span> | 
| ------ | -----| ----------- |
| `SELECT TOP 100 * FROM c` | `"RetrievedDocumentCount": 101` | <span data-ttu-id="a4e28-278">Hallo aantal documenten opgehaald is is 100 + 1 toomatch Hallo de TOP-component.</span><span class="sxs-lookup"><span data-stu-id="a4e28-278">hello number of documents retrieved is 100+1 toomatch hello TOP clause.</span></span> <span data-ttu-id="a4e28-279">Querytijd voornamelijk die is doorgebracht in `WriteOutputTime` en `DocumentLoadTime` omdat het een scan.</span><span class="sxs-lookup"><span data-stu-id="a4e28-279">Query time is mostly spent in `WriteOutputTime` and `DocumentLoadTime` since it is a scan.</span></span> | 
| `SELECT TOP 500 * FROM c` | `"RetrievedDocumentCount": 501` | <span data-ttu-id="a4e28-280">RetrievedDocumentCount is nu hogere (500 + 1 toomatch Hallo component TOP).</span><span class="sxs-lookup"><span data-stu-id="a4e28-280">RetrievedDocumentCount is now higher (500+1 toomatch hello TOP clause).</span></span> | 
| `SELECT * FROM c WHERE c.N = 55` | `"IndexLookupTime": "00:00:00.0009500"` | <span data-ttu-id="a4e28-281">Ongeveer 0,9 ms is besteed aan IndexLookupTime voor een sleutel-lookup, omdat deze het opzoeken van een index op `/N/?`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-281">About 0.9 ms is spent in IndexLookupTime for a key lookup, because it's an index lookup on `/N/?`.</span></span> | 
| `SELECT * FROM c WHERE c.N > 55` | `"IndexLookupTime": "00:00:00.0017700"` | <span data-ttu-id="a4e28-282">Iets meer tijd (1,7 ms) die is doorgebracht in IndexLookupTime via een scan bereik omdat dit het opzoeken van een index op `/N/?`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-282">Slightly more time (1.7 ms) spent in IndexLookupTime over a range scan, because it's an index lookup on `/N/?`.</span></span> | 
| `SELECT TOP 500 c.N FROM c` | `"IndexLookupTime": "00:00:00.0017700"` | <span data-ttu-id="a4e28-283">Dezelfde tijd besteed aan `DocumentLoadTime` als de voorgaande query's, maar lagere `WriteOutputTime` omdat we bij het projecteren van slechts één eigenschap.</span><span class="sxs-lookup"><span data-stu-id="a4e28-283">Same time spent on `DocumentLoadTime` as previous queries, but lower `WriteOutputTime` because we're projecting only one property.</span></span> | 
| `SELECT TOP 500 udf.toPercent(c.N) FROM c` | `"UserDefinedFunctionExecutionTime": "00:00:00.2136500"` | <span data-ttu-id="a4e28-284">Punt 213 ms is die is doorgebracht in `UserDefinedFunctionExecutionTime` uitvoeren UDF Hallo van elke waarde van `c.N`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-284">About 213 ms is spent in `UserDefinedFunctionExecutionTime` executing hello UDF on each value of `c.N`.</span></span> |
| `SELECT TOP 500 c.Name FROM c WHERE STARTSWITH(c.Name, 'Den')` | `"IndexLookupTime": "00:00:00.0006400", "SystemFunctionExecutionTime": "00:00:00.0074100"` | <span data-ttu-id="a4e28-285">Er is ongeveer 0,6 ms gespendeerd aan het `IndexLookupTime` op `/Name/?`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-285">About 0.6 ms is spent in `IndexLookupTime` on `/Name/?`.</span></span> <span data-ttu-id="a4e28-286">De meeste Hallo uitvoeringstijd (ms ~ 7)-query in `SystemFunctionExecutionTime`.</span><span class="sxs-lookup"><span data-stu-id="a4e28-286">Most of hello query execution time (~7 ms) in `SystemFunctionExecutionTime`.</span></span> |
| `SELECT TOP 500 c.Name FROM c WHERE STARTSWITH(LOWER(c.Name), 'den')` | `"IndexLookupTime": "00:00:00", "RetrievedDocumentCount": 2491,  "OutputDocumentCount": 500` | <span data-ttu-id="a4e28-287">Query als een scan wordt uitgevoerd, omdat deze gebruikmaakt van `LOWER`, en 500 buiten 2491 opgehaalde documenten worden geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="a4e28-287">Query is performed as a scan because it uses `LOWER`, and 500 out of 2491 retrieved documents are returned.</span></span> |


## <a name="next-steps"></a><span data-ttu-id="a4e28-288">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="a4e28-288">Next steps</span></span>
* <span data-ttu-id="a4e28-289">toolearn over Hallo ondersteund SQL-query's en trefwoorden, Zie [SQL-query](documentdb-sql-query.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-289">toolearn about hello supported SQL query operators and keywords, see [SQL query](documentdb-sql-query.md).</span></span> 
* <span data-ttu-id="a4e28-290">toolearn over aanvraageenheden, Zie [aanvraageenheden](request-units.md).</span><span class="sxs-lookup"><span data-stu-id="a4e28-290">toolearn about request units, see [request units](request-units.md).</span></span>
* <span data-ttu-id="a4e28-291">toolearn over indexeringsbeleid, Zie [indexeren van beleid](indexing-policies.md)</span><span class="sxs-lookup"><span data-stu-id="a4e28-291">toolearn about indexing policy, see [indexing policy](indexing-policies.md)</span></span> 


