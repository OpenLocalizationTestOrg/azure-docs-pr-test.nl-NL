---
title: Application Insights voor Azure Cloud Services | Microsoft Docs
description: Controleer uw web- en werkrollen op een effectieve manier met Application Insights
services: application-insights
documentationcenter: 
keywords: WAD2AI, Azure Diagnostics
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: c12b225aa351d0c272243469550791a6840091e0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="2eb72-104">Application Insights voor Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="2eb72-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="2eb72-105">[Microsoft Azure Cloud-service-apps](https://azure.microsoft.com/services/cloud-services/) kunnen met [Application Insights][start] worden gecontroleerd op beschikbaarheid, prestaties, fouten en gebruik door gegevens uit de Application Insights-SDK's te combineren met [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics)-gegevens uit uw cloudservices.</span><span class="sxs-lookup"><span data-stu-id="2eb72-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="2eb72-106">Op basis van de feedback die u krijgt over de prestaties en de effectiviteit van uw app tijdens het gebruik, kunt u weldoordachte beslissingen nemen over de richting van het ontwerp in elke fase van de ontwikkelingslevenscyclus.</span><span class="sxs-lookup"><span data-stu-id="2eb72-106">With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.</span></span>

![Voorbeeld](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="2eb72-108">Voordat u begint</span><span class="sxs-lookup"><span data-stu-id="2eb72-108">Before you start</span></span>
<span data-ttu-id="2eb72-109">U hebt het volgende nodig:</span><span class="sxs-lookup"><span data-stu-id="2eb72-109">You'll need:</span></span>

* <span data-ttu-id="2eb72-110">Een abonnement op [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="2eb72-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="2eb72-111">Meld u aan met een Microsoft-account, dat u mogelijk al hebt voor Windows, XBox Live of andere Microsoft-cloudservices.</span><span class="sxs-lookup"><span data-stu-id="2eb72-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="2eb72-112">Hulpprogramma’s van Microsoft Azure 2.9 of hoger</span><span class="sxs-lookup"><span data-stu-id="2eb72-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="2eb72-113">Developer Analytics Tools 7.10 of hoger</span><span class="sxs-lookup"><span data-stu-id="2eb72-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="2eb72-114">Snel starten</span><span class="sxs-lookup"><span data-stu-id="2eb72-114">Quick start</span></span>
<span data-ttu-id="2eb72-115">Als u uw cloudservice wilt controleren met Application Insights, kunt u dat het snelst en gemakkelijkst doen door die optie te kiezen wanneer u uw service naar Azure publiceert.</span><span class="sxs-lookup"><span data-stu-id="2eb72-115">The quickest and easiest way to monitor your cloud service with Application Insights is to choose that option when you publish your service to Azure.</span></span>

![Voorbeeld](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="2eb72-117">Als u deze optie kiest, wordt uw app tijdens runtime geïnstrumenteerd, zodat u beschikt over alle telemetrie die u nodig hebt voor het controleren van aanvragen, uitzonderingen en afhankelijkheden in uw webrol en ook van de prestatiemeteritems van uw werkrollen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-117">This option instruments your app at run time, giving you all the telemetry you need to monitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="2eb72-118">Ook diagnostische traceringen die worden gegenereerd door uw app, worden naar Application Insights verzonden.</span><span class="sxs-lookup"><span data-stu-id="2eb72-118">Any diagnostic traces generated by your app are also sent to Application Insights.</span></span>

<span data-ttu-id="2eb72-119">Als dat alles is wat u nodig hebt, bent u klaar.</span><span class="sxs-lookup"><span data-stu-id="2eb72-119">If that's all you need, you're done!</span></span> <span data-ttu-id="2eb72-120">De volgende stappen die u kunt nemen, zijn de [metrische gegevens van uw app bekijken](app-insights-metrics-explorer.md), [query’s uitvoeren op uw gegevens met Analytics](app-insights-analytics.md) en mogelijk een [dashboard](app-insights-dashboards.md) instellen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="2eb72-121">U kunt [beschikbaarheidstests](app-insights-monitor-web-app-availability.md) instellen en [code toevoegen aan uw webpagina’s](app-insights-javascript.md) om hun prestaties in de browser te controleren.</span><span class="sxs-lookup"><span data-stu-id="2eb72-121">You might want to set up [availability tests](app-insights-monitor-web-app-availability.md) and [add code to your web pages](app-insights-javascript.md) to monitor performance in the browser.</span></span>

<span data-ttu-id="2eb72-122">Maar u kunt desgewenst kiezen voor meer opties:</span><span class="sxs-lookup"><span data-stu-id="2eb72-122">But you can also get more options:</span></span>

* <span data-ttu-id="2eb72-123">U kunt gegevens verzenden vanuit verschillende onderdelen en buildconfiguraties om resources te scheiden.</span><span class="sxs-lookup"><span data-stu-id="2eb72-123">Send data from different components and build configurations to separate resources.</span></span>
* <span data-ttu-id="2eb72-124">U kunt aangepaste telemetrie uit uw app toevoegen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="2eb72-125">Bent u geïnteresseerd in deze opties, leest dan verder.</span><span class="sxs-lookup"><span data-stu-id="2eb72-125">If those options are of interest to you, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="2eb72-126">Voorbeeldtoepassing die is geïnstrumenteerd met Application Insights</span><span class="sxs-lookup"><span data-stu-id="2eb72-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="2eb72-127">Kijk naar deze [voorbeeldtoepassing](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) waarin Application Insights is toegevoegd aan een cloudservice met twee werkrollen die worden gehost in Azure.</span><span class="sxs-lookup"><span data-stu-id="2eb72-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added to a cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="2eb72-128">Hierna wordt beschreven hoe u uw eigen cloudserviceproject op dezelfde manier kunt aanpassen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-128">What follows tells you how to adapt your own cloud service project in the same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="2eb72-129">Resources en resourcegroepen plannen</span><span class="sxs-lookup"><span data-stu-id="2eb72-129">Plan resources and resource groups</span></span>
<span data-ttu-id="2eb72-130">De telemetrie van uw app wordt opgeslagen, geanalyseerd en weergegeven in een Azure-resource van het Application Insights-type.</span><span class="sxs-lookup"><span data-stu-id="2eb72-130">The telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="2eb72-131">Elke resource behoort tot een resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="2eb72-131">Each resource belongs to a resource group.</span></span> <span data-ttu-id="2eb72-132">Resourcegroepen worden gebruikt om de kosten te beheersen, teamleden toegang te geven en updates te implementeren in één gecoördineerde transactie.</span><span class="sxs-lookup"><span data-stu-id="2eb72-132">Resource groups are used for managing costs, for granting access to team members, and to deploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="2eb72-133">U kunt bijvoorbeeld in [een script schrijven voor het implementeren](../azure-resource-manager/resource-group-template-deploy.md) van zowel een Azure Cloud-service als de bijbehorende Application Insights-controleresources.</span><span class="sxs-lookup"><span data-stu-id="2eb72-133">For example, you could [write a script to deploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="2eb72-134">Resources voor onderdelen</span><span class="sxs-lookup"><span data-stu-id="2eb72-134">Resources for components</span></span>
<span data-ttu-id="2eb72-135">Het wordt aangeraden om een afzonderlijke resource te maken voor elk onderdeel van uw toepassing - dat wil zeggen voor elke webrol en werkrol.</span><span class="sxs-lookup"><span data-stu-id="2eb72-135">The recommended scheme is to create a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="2eb72-136">U kunt dan elk onderdeel afzonderlijk analyseren, maar een [dashboard](app-insights-dashboards.md) maken waarop u de belangrijkste grafieken van elk onderdeel samenbrengt, zodat u ze kunt vergelijken en ze in een oogopslag kunt controleren.</span><span class="sxs-lookup"><span data-stu-id="2eb72-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together the key charts from all the components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="2eb72-137">Een alternatief is om de telemetrie van meerdere rollen naar dezelfde resource te verzenden, maar [een dimensie-eigenschap toe te voegen aan elk telemetrie-item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) die de oorspronkelijke rol aangeeft.</span><span class="sxs-lookup"><span data-stu-id="2eb72-137">An alternative scheme is to send the telemetry from more than one role to the same resource, but [add a dimension property to each telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="2eb72-138">Bij deze alternatieve werkwijze worden grafieken met metrische gegevens over bijvoorbeeld uitzonderingen weergegeven waarin de aantallen van de verschillende rollen zijn samengevoegd. U kunt deze grafiek echter segmenteren op basis van de rol-id, als dat nodig is.</span><span class="sxs-lookup"><span data-stu-id="2eb72-138">In this scheme, metric charts such as exceptions normally show an aggregation of the counts from the different roles, but you can segment the chart by the role identifier when required.</span></span> <span data-ttu-id="2eb72-139">Resultaten van zoekacties kunnen ook worden gefilterd met behulp van dezelfde dimensie.</span><span class="sxs-lookup"><span data-stu-id="2eb72-139">Searches can also be filtered by the same dimension.</span></span> <span data-ttu-id="2eb72-140">Deze alternatieve werkwijze maakt het wat gemakkelijker om alles op hetzelfde moment weer te geven, maar kan ook leiden tot enige verwarring tussen de rollen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-140">This alternative makes it a bit easier to view everything at the same time, but could also lead to some confusion between the roles.</span></span>

<span data-ttu-id="2eb72-141">Telemetrie van de browser wordt gewoonlijk opgenomen in dezelfde resource als de gegevens van de webrol op de server.</span><span class="sxs-lookup"><span data-stu-id="2eb72-141">Browser telemetry is usually included in the same resource as its server-side web role.</span></span>

<span data-ttu-id="2eb72-142">Plaats de Application Insights-resources voor de verschillende onderdelen in één resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="2eb72-142">Put the Application Insights resources for the different components in one resource group.</span></span> <span data-ttu-id="2eb72-143">Zo kunt u ze gemakkelijk gezamenlijk beheren.</span><span class="sxs-lookup"><span data-stu-id="2eb72-143">This makes it easy to manage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="2eb72-144">Ontwikkelings-, test- en productiegegevens scheiden</span><span class="sxs-lookup"><span data-stu-id="2eb72-144">Separating development, test, and production</span></span>
<span data-ttu-id="2eb72-145">Als u aangepaste gebeurtenissen ontwikkelt voor uw volgende functie terwijl de vorige versie live is, kunt u de via telemetrie verzamelde ontwikkelingsgegevens het beste verzenden naar een afzonderlijke Application Insights-resource.</span><span class="sxs-lookup"><span data-stu-id="2eb72-145">If you are developing custom events for your next feature while the previous version is live, you want to send the development telemetry to a separate Application Insights resource.</span></span> <span data-ttu-id="2eb72-146">Als u dat niet doet, is het lastig om de telemetrie van uw test terug te vinden in alle verkeer van de live site.</span><span class="sxs-lookup"><span data-stu-id="2eb72-146">Otherwise it will be hard to find your test telemetry among all the traffic from the live site.</span></span>

<span data-ttu-id="2eb72-147">Om deze situatie te voorkomen, maakt u afzonderlijke resources voor elke buildconfiguratie of 'stempel' (ontwikkeling, test, productie,...) van uw systeem.</span><span class="sxs-lookup"><span data-stu-id="2eb72-147">To avoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="2eb72-148">Plaats de resources voor elke buildconfiguratie in een afzonderlijke resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="2eb72-148">Put the resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="2eb72-149">U kunt de telemetrie naar de juiste resources verzenden door de Application Insights-SDK zo in te stellen dat deze afhankelijk van de buildconfiguratie steeds een andere instrumentatiesleutel oppikt.</span><span class="sxs-lookup"><span data-stu-id="2eb72-149">To send the telemetry to the appropriate resources, you can set up the Application Insights SDK so that it picks up a different instrumentation key depending on the build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="2eb72-150">Een Application Insights-resource maken voor elke rol</span><span class="sxs-lookup"><span data-stu-id="2eb72-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="2eb72-151">Als u hebt besloten om een afzonderlijke resource voor elke rol te maken - en misschien een afzonderlijke set voor elke buildconfiguratie - kunt u dat het gemakkelijkst doen door al deze resources in de Application Insights-portal te maken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-151">If you've decided to create a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest to create them all in the Application Insights portal.</span></span> <span data-ttu-id="2eb72-152">(Als u vaak resources maakt, kunt u [het proces automatiseren](app-insights-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="2eb72-152">(If you create resources a lot, you can [automate the process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="2eb72-153">Maak in de [Azure Portal][portal] een nieuwe Application Insights-resource.</span><span class="sxs-lookup"><span data-stu-id="2eb72-153">In the [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="2eb72-154">Kies ASP.NET-app als het toepassingstype.</span><span class="sxs-lookup"><span data-stu-id="2eb72-154">For application type, choose ASP.NET app.</span></span> 

    ![Klik op Nieuw > Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="2eb72-156">U ziet dat elke resource een instrumentatiesleutel krijgt.</span><span class="sxs-lookup"><span data-stu-id="2eb72-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="2eb72-157">Mogelijk hebt u deze sleutels later nodig als u de configuratie van de SDK handmatig wilt configureren of verifiëren.</span><span class="sxs-lookup"><span data-stu-id="2eb72-157">You might need this later if you want to manually configure or verify the configuration of the SDK.</span></span>

    ![Op Eigenschappen klikken, de sleutel selecteren en op Ctrl + C drukken](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="2eb72-159">Azure Diagnostics instellen voor elke rol</span><span class="sxs-lookup"><span data-stu-id="2eb72-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="2eb72-160">Stel deze optie in om uw app te controleren met Application Insights.</span><span class="sxs-lookup"><span data-stu-id="2eb72-160">Set this option to monitor your app with Application Insights.</span></span> <span data-ttu-id="2eb72-161">Voor webrollen zorgt u hiermee voor prestatiebewaking, waarschuwingen en diagnostische gegevens en een gebruiksanalyse.</span><span class="sxs-lookup"><span data-stu-id="2eb72-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="2eb72-162">Voor andere rollen kunt u diagnostische gegevens van Azure doorzoeken en controleren, zoals gegevens over het opnieuw opstarten, gegevens van prestatiemeteritems en aanroepen van System.Diagnostics.Trace.</span><span class="sxs-lookup"><span data-stu-id="2eb72-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls to System.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="2eb72-163">Open in Visual Studio Solution Explorer onder &lt;UwCloudservice&gt;, Rollen de eigenschappen van elke rol.</span><span class="sxs-lookup"><span data-stu-id="2eb72-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open the properties of each role.</span></span>
2. <span data-ttu-id="2eb72-164">Schakel in **Configuratie** de optie **Diagnostische gegevens naar Application Insights verzenden** in en selecteer de juiste Application Insights-resource die u eerder hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="2eb72-164">In **Configuration**, set **Send diagnostics data to Application Insights** and select the appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="2eb72-165">Als u hebt besloten om een afzonderlijke Application Insights-resource voor elke buildconfiguratie te gebruiken, selecteert u eerst de configuratie.</span><span class="sxs-lookup"><span data-stu-id="2eb72-165">If you have decided to use a separate Application Insights resource for each build configuration, select the configuration first.</span></span>

![Configureer Application Insights in de eigenschappen van elke Azure-rol.](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="2eb72-167">Hiermee voegt u uw Application Insights-instrumentatiesleutels in de bestanden met de naam `ServiceConfiguration.*.cscfg` in.</span><span class="sxs-lookup"><span data-stu-id="2eb72-167">This has the effect of inserting your Application Insights instrumentation keys into the files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="2eb72-168">([Voorbeeldcode](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="2eb72-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="2eb72-169">Als u het niveau van diagnostische gegevens die naar Application Insights worden verzonden, wilt variëren, kunt u dat doen [door de `.cscfg`-bestanden rechtstreeks](app-insights-azure-diagnostics.md) te bewerken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-169">If you want to vary the level of diagnostic information sent to Application Insights, you can do so [by editing the `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="2eb72-170"><a name="sdk"></a>De SDK installeren in elk project</span><span class="sxs-lookup"><span data-stu-id="2eb72-170"><a name="sdk"></a>Install the SDK in each project</span></span>
<span data-ttu-id="2eb72-171">Deze optie voegt de mogelijkheid toe om aangepaste zakelijke telemetrie toe te voegen aan elke gewenste rol, voor een nadere analyse van de manier waarop uw toepassing werkt en wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="2eb72-171">This option adds the ability to add custom business telemetry to any role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="2eb72-172">Gebruik Visual Studio om de Application Insights-SDK voor elk cloudtoepassingsproject te configureren.</span><span class="sxs-lookup"><span data-stu-id="2eb72-172">In Visual Studio, configure the Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="2eb72-173">**Webrollen**: Klik met de rechtermuisknop op het project en kies **Application Insights configureren** of **Toevoegen > Application Insights Telemetry**.</span><span class="sxs-lookup"><span data-stu-id="2eb72-173">**Web roles**: Right-click the project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="2eb72-174">**Werkrollen**:</span><span class="sxs-lookup"><span data-stu-id="2eb72-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="2eb72-175">Klik met de rechtermuisknop op het project en selecteer **NuGet-pakketten beheren**.</span><span class="sxs-lookup"><span data-stu-id="2eb72-175">Right-click the project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="2eb72-176">Voeg [Application Insights voor Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/) toe.</span><span class="sxs-lookup"><span data-stu-id="2eb72-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Naar Application Insights zoeken](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="2eb72-178">Configureer de SDK om gegevens te verzenden naar de Application Insights-resource.</span><span class="sxs-lookup"><span data-stu-id="2eb72-178">Configure the SDK to send data to the Application Insights resource.</span></span>

    <span data-ttu-id="2eb72-179">Stel in een geschikte opstartfunctie de instrumentatiesleutel in vanuit de configuratie-instelling in het CSCFG-bestand:</span><span class="sxs-lookup"><span data-stu-id="2eb72-179">In a suitable startup function, set the instrumentation key from the configuration setting in the .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="2eb72-180">Doe dit voor elke rol in uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="2eb72-180">Do this for each role in your application.</span></span> <span data-ttu-id="2eb72-181">Zie de voorbeelden:</span><span class="sxs-lookup"><span data-stu-id="2eb72-181">See the examples:</span></span>
   
   * [<span data-ttu-id="2eb72-182">Webrol</span><span class="sxs-lookup"><span data-stu-id="2eb72-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="2eb72-183">Werkrol</span><span class="sxs-lookup"><span data-stu-id="2eb72-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="2eb72-184">Voor webpagina’s</span><span class="sxs-lookup"><span data-stu-id="2eb72-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="2eb72-185">Stel het bestand ApplicationInsights.config zo in dat het altijd naar de uitvoermap wordt gekopieerd.</span><span class="sxs-lookup"><span data-stu-id="2eb72-185">Set the ApplicationInsights.config file to be copied always to the output directory.</span></span> 
   
    <span data-ttu-id="2eb72-186">(In het CONFIG-bestand ziet u berichten waarin u wordt gevraagd de instrumentatiesleutel in dat bestand te plaatsen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-186">(In the .config file, you'll see messages asking you to place the instrumentation key there.</span></span> <span data-ttu-id="2eb72-187">Voor cloudtoepassingen is het echter beter om de sleutel in te stellen vanuit het CSCFG-bestand.</span><span class="sxs-lookup"><span data-stu-id="2eb72-187">However, for cloud applications it's better to set it from the .cscfg file.</span></span> <span data-ttu-id="2eb72-188">Dit zorgt ervoor dat de rol correct wordt geïdentificeerd in de portal.)</span><span class="sxs-lookup"><span data-stu-id="2eb72-188">This ensures that the role is correctly identified in the portal.)</span></span>

#### <a name="run-and-publish-the-app"></a><span data-ttu-id="2eb72-189">De app uitvoeren en publiceren</span><span class="sxs-lookup"><span data-stu-id="2eb72-189">Run and publish the app</span></span>
<span data-ttu-id="2eb72-190">Voer uw app uit en meld u aan bij Azure.</span><span class="sxs-lookup"><span data-stu-id="2eb72-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="2eb72-191">Open de Application Insights-resources die u hebt gemaakt. U ziet dat in [Search](app-insights-diagnostic-search.md) de afzonderlijke gegevenspunten worden weergegeven en in [Metric Explorer](app-insights-metrics-explorer.md) de cumulatieve gegevens.</span><span class="sxs-lookup"><span data-stu-id="2eb72-191">Open the Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="2eb72-192">Voeg meer telemetrie toe - zie de secties hieronder - en publiceer uw app vervolgens om live diagnostische gegevens en gebruiksfeedback te krijgen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-192">Add more telemetry - see the sections below - and then publish your app to get live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="2eb72-193">Zijn er geen gegevens?</span><span class="sxs-lookup"><span data-stu-id="2eb72-193">No data?</span></span>
* <span data-ttu-id="2eb72-194">Open de [Search][diagnostic]-tegel om afzonderlijke gebeurtenissen te bekijken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-194">Open the [Search][diagnostic] tile, to see individual events.</span></span>
* <span data-ttu-id="2eb72-195">Gebruik de toepassing om verschillende pagina's te openen, zodat er telemetrie wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="2eb72-195">Use the application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="2eb72-196">Wacht een paar seconden en klik op Vernieuwen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="2eb72-197">Zie [Probleemoplossing][qna].</span><span class="sxs-lookup"><span data-stu-id="2eb72-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="2eb72-198">Gebeurtenissen van Azure Diagnostics weergeven</span><span class="sxs-lookup"><span data-stu-id="2eb72-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="2eb72-199">Waar vind ik informatie van [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) in Application Insights:</span><span class="sxs-lookup"><span data-stu-id="2eb72-199">Where to find the [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="2eb72-200">Prestatiemeteritems worden weergegeven als aangepaste functies voor het verzamelen van metrische gegevens.</span><span class="sxs-lookup"><span data-stu-id="2eb72-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="2eb72-201">Windows-gebeurtenislogboeken worden als traceringen en aangepaste gebeurtenissen weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2eb72-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="2eb72-202">Toepassinglogboeken, ETW-logboeken en logboeken met diagnostische gegevens over de infrastructuur worden weergegeven als traceringen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="2eb72-203">Als u prestatiemeteritems en aantallen gebeurtenissen wilt zien, opent u [Metrics Explorer](app-insights-metrics-explorer.md) en voegt u een nieuwe grafiek toe:</span><span class="sxs-lookup"><span data-stu-id="2eb72-203">To see performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Gegevens van Azure Diagnostics](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="2eb72-205">Gebruik [Search](app-insights-diagnostic-search.md) of een [Analytics-query](app-insights-analytics-tour.md) om te zoeken in de verschillende traceerlogboeken die door Azure Diagnostics zijn verzonden.</span><span class="sxs-lookup"><span data-stu-id="2eb72-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) to search across the various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="2eb72-206">Stel bijvoorbeeld dat u te maken krijgt met een onverwerkte uitzondering waardoor een rol is gecrasht en gerecycled.</span><span class="sxs-lookup"><span data-stu-id="2eb72-206">For example, suppose you have an unhandled exception which caused a Role to crash and recycle.</span></span> <span data-ttu-id="2eb72-207">Deze informatie zou worden weergegeven in het toepassingskanaal van het Windows-gebeurtenislogboek.</span><span class="sxs-lookup"><span data-stu-id="2eb72-207">That information would show up in the Application channel of Windows Event Log.</span></span> <span data-ttu-id="2eb72-208">U kunt Search gebruiken om naar de fout in het Windows-gebeurtenislogboek te kijken en om de volledige stack-trace voor de uitzondering op te halen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-208">You can use Search to look at the Windows Event Log error and get the full stack trace for the exception.</span></span> <span data-ttu-id="2eb72-209">Dit helpt u bij het vinden van de hoofdoorzaak van het probleem.</span><span class="sxs-lookup"><span data-stu-id="2eb72-209">That will help you find the root cause of the issue.</span></span>

![Zoeken in Azure Diagnostics](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="2eb72-211">Meer telemetrie</span><span class="sxs-lookup"><span data-stu-id="2eb72-211">More telemetry</span></span>
<span data-ttu-id="2eb72-212">In de onderstaande secties ziet u hoe u aanvullende telemetrie voor verschillende aspecten van uw toepassing kunt ophalen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-212">The sections below show how to get additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="2eb72-213">Aanvragen van werkrollen bijhouden</span><span class="sxs-lookup"><span data-stu-id="2eb72-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="2eb72-214">In webrollen worden door de aanvraagmodule automatisch gegevens over HTTP-aanvragen verzameld.</span><span class="sxs-lookup"><span data-stu-id="2eb72-214">In web roles, the requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="2eb72-215">Zie de [voorbeeld-MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) voor manieren waarop u het standaardverzamelgedrag kunt overschrijven.</span><span class="sxs-lookup"><span data-stu-id="2eb72-215">See the [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override the default collection behavior.</span></span> 

<span data-ttu-id="2eb72-216">U kunt de prestaties van aanroepen voor werkrollen vastleggen door ze op dezelfde manier bij te houden als HTTP-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-216">You can capture the performance of calls to worker roles by tracking them in the same way as HTTP requests.</span></span> <span data-ttu-id="2eb72-217">In Application Insights wordt met het telemetrietype Request een werkeenheid op een benoemde server gemeten die kan worden getimed en als onafhankelijk item kan slagen of mislukken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-217">In Application Insights, the Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="2eb72-218">Hoewel HTTP-aanvragen automatisch worden vastgelegd door de SDK, kunt u uw eigen code invoegen voor het bijhouden van aanvragen voor werkrollen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-218">While HTTP requests are captured automatically by the SDK, you can insert your own code to track requests to worker roles.</span></span>

<span data-ttu-id="2eb72-219">Zie de twee voorbeeldwerkrollen die zijn geïnstrumenteerd voor het rapporteren van aanvragen: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) en [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="2eb72-219">See the two sample worker roles instrumented to report requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="2eb72-220">Uitzonderingen</span><span class="sxs-lookup"><span data-stu-id="2eb72-220">Exceptions</span></span>
<span data-ttu-id="2eb72-221">Zie [Uitzonderingen controleren in Application Insights](app-insights-asp-net-exceptions.md) als u wilt weten hoe u onverwerkte uitzonderingen kunt verzamelen van verschillende typen webtoepassingen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="2eb72-222">De voorbeeldwebrol heeft MVC5- en Web API 2-controllers.</span><span class="sxs-lookup"><span data-stu-id="2eb72-222">The sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="2eb72-223">De onverwerkte uitzonderingen van de twee werkrollen worden vastgelegd met de volgende handlers:</span><span class="sxs-lookup"><span data-stu-id="2eb72-223">The unhandled exceptions from the two are captured with the following handlers:</span></span>

* <span data-ttu-id="2eb72-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) [hier](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) instellen voor MVC5-controllers</span><span class="sxs-lookup"><span data-stu-id="2eb72-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="2eb72-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) [hier](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) instellen voor Web API 2-controllers</span><span class="sxs-lookup"><span data-stu-id="2eb72-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="2eb72-226">Voor werkrollen zijn er twee manieren om uitzonderingen bij te houden:</span><span class="sxs-lookup"><span data-stu-id="2eb72-226">For worker roles, there are two ways to track exceptions:</span></span>

* <span data-ttu-id="2eb72-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="2eb72-227">TrackException(ex)</span></span>
* <span data-ttu-id="2eb72-228">Als u het NuGet-pakket met traceringslisteners van Application Insights hebt toegevoegd, kunt u **System.Diagnostics.Trace** gebruiken om uitzonderingen in het logboek vast te leggen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-228">If you have added the Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** to log exceptions.</span></span> [<span data-ttu-id="2eb72-229">Codevoorbeeld</span><span class="sxs-lookup"><span data-stu-id="2eb72-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="2eb72-230">Prestatiemeteritems</span><span class="sxs-lookup"><span data-stu-id="2eb72-230">Performance Counters</span></span>
<span data-ttu-id="2eb72-231">Voor de volgende prestatiemeteritems worden gegevens verzameld:</span><span class="sxs-lookup"><span data-stu-id="2eb72-231">The following counters are collected by default:</span></span>

    * <span data-ttu-id="2eb72-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="2eb72-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="2eb72-233">\Memory\Available Bytes</span><span class="sxs-lookup"><span data-stu-id="2eb72-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="2eb72-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span><span class="sxs-lookup"><span data-stu-id="2eb72-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="2eb72-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="2eb72-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="2eb72-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="2eb72-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="2eb72-237">\Processor(_Total)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="2eb72-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="2eb72-238">Voor webrollen worden ook gegevens verzameld voor de volgende prestatiemeteritems:</span><span class="sxs-lookup"><span data-stu-id="2eb72-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="2eb72-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="2eb72-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="2eb72-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span><span class="sxs-lookup"><span data-stu-id="2eb72-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="2eb72-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span><span class="sxs-lookup"><span data-stu-id="2eb72-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="2eb72-242">U kunt extra aangepaste prestatiemeteritems of andere Windows-prestatiemeteritems opgeven door ApplicationInsights.config te bewerken, [zoals in dit voorbeeld](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="2eb72-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Prestatiemeteritems](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="2eb72-244">Gecorreleerde telemetrie voor werkrollen</span><span class="sxs-lookup"><span data-stu-id="2eb72-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="2eb72-245">Het is uiterst nuttig om bij het vaststellen van problemen precies te kunnen zien wat heeft geleid tot een mislukte aanvraag of een lange wachttijd na een aanvraag.</span><span class="sxs-lookup"><span data-stu-id="2eb72-245">It is a rich diagnostic experience, when you can see what led to a failed or high latency request.</span></span> <span data-ttu-id="2eb72-246">Voor webrollen wordt door de SDK automatisch een correlatie ingesteld tussen verwante telemetrie.</span><span class="sxs-lookup"><span data-stu-id="2eb72-246">With web roles, the SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="2eb72-247">Voor werkrollen kunt u om dit te bereiken een aangepaste telemetrie-initializer gebruiken voor het instellen van een gemeenschappelijk Operation.Id-contextkenmerk voor alle telemetrie.</span><span class="sxs-lookup"><span data-stu-id="2eb72-247">For worker roles, you can use a custom telemetry initializer to set a common Operation.Id context attribute for all the telemetry to achieve this.</span></span> <span data-ttu-id="2eb72-248">Zo kunt u in een oogopslag zien of het probleem (de latentie of fout) is veroorzaakt door een afhankelijkheid of door uw code!</span><span class="sxs-lookup"><span data-stu-id="2eb72-248">This allows you to see whether the latency/failure issue was caused due to a dependency or your code, at a glance!</span></span> 

<span data-ttu-id="2eb72-249">Dit doet u al volgt:</span><span class="sxs-lookup"><span data-stu-id="2eb72-249">Here's how:</span></span>

* <span data-ttu-id="2eb72-250">Stel de correlatie-id in een CallContext in, zoals [hier](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36) wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="2eb72-250">Set the correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="2eb72-251">In dit geval wordt de aanvraag-id gebruikt als de correlatie-id.</span><span class="sxs-lookup"><span data-stu-id="2eb72-251">In this case, we are using the Request ID as the correlation id</span></span>
* <span data-ttu-id="2eb72-252">Voeg een aangepaste TelemetryInitializer-implementatie toe om de Operation.Id in te stellen op de correlatie-id die u hiervoor hebt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="2eb72-252">Add a custom TelemetryInitializer implementation, to set the Operation.Id to the correlationId set above.</span></span> <span data-ttu-id="2eb72-253">Hier vindt u een voorbeeld: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="2eb72-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="2eb72-254">Voeg de aangepaste telemetrie-initializer toe.</span><span class="sxs-lookup"><span data-stu-id="2eb72-254">Add the custom telemetry initializer.</span></span> <span data-ttu-id="2eb72-255">U kunt dat doen in het bestand ApplicationInsights.config of in de code, zoals [hier](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233) wordt weergegeven</span><span class="sxs-lookup"><span data-stu-id="2eb72-255">You could do that in the ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="2eb72-256">Dat is alles.</span><span class="sxs-lookup"><span data-stu-id="2eb72-256">That's it!</span></span> <span data-ttu-id="2eb72-257">De portal is zo ingericht dat u alle bijbehorende telemetrie in een oogopslag kunt zien:</span><span class="sxs-lookup"><span data-stu-id="2eb72-257">The portal experience is already wired up to help you see all associated telemetry at a glance:</span></span>

![Gecorreleerde telemetrie](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="2eb72-259">Telemetrie op de client</span><span class="sxs-lookup"><span data-stu-id="2eb72-259">Client telemetry</span></span>
<span data-ttu-id="2eb72-260">[Voeg de JavaScript-SDK toe aan uw webpagina’s][client] om telemetrie van de browser op te halen, zoals het aantal paginaweergaven, paginalaadtijden en scriptuitzonderingen, en om de mogelijkheid te krijgen om aangepaste telemetrie te schrijven in uw paginascripts.</span><span class="sxs-lookup"><span data-stu-id="2eb72-260">[Add the JavaScript SDK to your web pages][client] to get browser-based telemetry such as page view counts, page load times, script exceptions, and to let you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="2eb72-261">Beschikbaarheidstests</span><span class="sxs-lookup"><span data-stu-id="2eb72-261">Availability tests</span></span>
<span data-ttu-id="2eb72-262">[Stel webtests in][availability] om te controleren of de toepassing live en responsief blijft.</span><span class="sxs-lookup"><span data-stu-id="2eb72-262">[Set up web tests][availability] to make sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="2eb72-263">Een totaaloverzicht weergeven</span><span class="sxs-lookup"><span data-stu-id="2eb72-263">Display everything together</span></span>
<span data-ttu-id="2eb72-264">Als u een totaalbeeld van uw systeem wilt krijgen, kunt u de belangrijkste controlegrafieken samenbrengen op één [dashboard](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="2eb72-264">To get an overall picture of your system, you can bring the key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="2eb72-265">U kunt bijvoorbeeld het aantal aanvragen en het aantal fouten voor elke rol aan het dashboard vastmaken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-265">For example, you could pin the request and failure counts of each role.</span></span> 

<span data-ttu-id="2eb72-266">Als u in uw systeem andere Azure-services gebruikt, zoals Stream Analytics, kunt u ook de controlegrafieken daarvan weergeven.</span><span class="sxs-lookup"><span data-stu-id="2eb72-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="2eb72-267">Als u een mobiele app voor clients hebt, voegt u code in om aangepaste gebeurtenissen te verzenden bij belangrijke gebruikersbewerkingen en maakt u een [HockeyApp Bridge](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="2eb72-267">If you have a client mobile app, insert some code to send custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="2eb72-268">Maak query’s in [Analytics](app-insights-analytics.md) om de aantallen gebeurtenissen weer te geven en aan het dashboard vast te maken.</span><span class="sxs-lookup"><span data-stu-id="2eb72-268">Create queries in [Analytics](app-insights-analytics.md) to display the event counts, and pin them to the dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="2eb72-269">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="2eb72-269">Example</span></span>
<span data-ttu-id="2eb72-270">In [het voorbeeld](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) wordt een service gecontroleerd die een webrol en twee werkrollen heeft.</span><span class="sxs-lookup"><span data-stu-id="2eb72-270">[The example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="2eb72-271">Uitzondering Methode niet gevonden bij het uitvoeren van uw app in Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="2eb72-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="2eb72-272">Hebt u uw app ontwikkeld voor .NET 4.6?</span><span class="sxs-lookup"><span data-stu-id="2eb72-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="2eb72-273">4.6 wordt niet automatisch ondersteund in Azure Cloud Services-rollen.</span><span class="sxs-lookup"><span data-stu-id="2eb72-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="2eb72-274">[Installeer 4.6 voor elke rol](../cloud-services/cloud-services-dotnet-install-dotnet.md) voordat u uw app uitvoert.</span><span class="sxs-lookup"><span data-stu-id="2eb72-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="2eb72-275">Video</span><span class="sxs-lookup"><span data-stu-id="2eb72-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="2eb72-276">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="2eb72-276">Next steps</span></span>
* [<span data-ttu-id="2eb72-277">Het verzenden van gegevens van Azure Diagnostics naar Application Insights configureren</span><span class="sxs-lookup"><span data-stu-id="2eb72-277">Configure sending Azure Diagnostics to Application Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="2eb72-278">Het maken van Application Insights-resources automatiseren</span><span class="sxs-lookup"><span data-stu-id="2eb72-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="2eb72-279">Azure Diagnostics automatiseren</span><span class="sxs-lookup"><span data-stu-id="2eb72-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="2eb72-280">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="2eb72-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
