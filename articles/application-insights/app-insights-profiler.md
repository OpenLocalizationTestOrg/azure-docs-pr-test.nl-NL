---
title: Profileren van live web-apps in Azure met Application Insights | Microsoft Docs
description: Identificeer de hot pad in uw web server-code met een lage footprint profiler.
services: application-insights
documentationcenter: 
author: CFreemanwa
manager: carmonm
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 05/04/2017
ms.author: bwren
ms.openlocfilehash: ff39f9a84b86c14859aaee50ee368643fb2848ea
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="profiling-live-azure-web-apps-with-application-insights"></a><span data-ttu-id="595e7-103">Profileren van live Azure-web-apps met Application Insights</span><span class="sxs-lookup"><span data-stu-id="595e7-103">Profiling live Azure web apps with Application Insights</span></span>

<span data-ttu-id="595e7-104">*Deze functie van Application Insights is NH voor App-Services en in preview voor Compute.*</span><span class="sxs-lookup"><span data-stu-id="595e7-104">*This feature of Application Insights is GA for App Services and in preview for Compute.*</span></span>

<span data-ttu-id="595e7-105">Na hoeveel tijd is besteed aan elke methode in uw live-webtoepassing met het hulpprogramma profilering van weten [Azure Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="595e7-105">Find out how much time is spent in each method in your live web application by using the profiling tool of [Azure Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="595e7-106">Deze leest u gedetailleerde profielen van live-aanvragen die door uw app zijn behandeld en markeert de 'hot pad' die met behulp van de meeste tijd.</span><span class="sxs-lookup"><span data-stu-id="595e7-106">It shows you detailed profiles of live requests that were served by your app, and highlights the 'hot path' that is using the most time.</span></span> <span data-ttu-id="595e7-107">Deze voorbeelden die u verschillende responstijden hebt automatisch geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="595e7-107">It automatically selects examples that have different response times.</span></span> <span data-ttu-id="595e7-108">De profiler maakt gebruik van verschillende technieken overhead te minimaliseren.</span><span class="sxs-lookup"><span data-stu-id="595e7-108">The profiler uses various techniques to minimize overhead.</span></span>

<span data-ttu-id="595e7-109">De profiler werkt momenteel voor ASP.NET-web-apps uitgevoerd op Azure App Services in ten minste het Basic prijscategorie.</span><span class="sxs-lookup"><span data-stu-id="595e7-109">The profiler currently works for ASP.NET web apps running on Azure App Services, in at least the Basic pricing tier.</span></span> 

<a id="installation"></a>
## <a name="enable-the-profiler"></a><span data-ttu-id="595e7-110">De profiler inschakelen</span><span class="sxs-lookup"><span data-stu-id="595e7-110">Enable the profiler</span></span>

<span data-ttu-id="595e7-111">[Installeer Application Insights-](app-insights-asp-net.md) in uw code.</span><span class="sxs-lookup"><span data-stu-id="595e7-111">[Install Application Insights](app-insights-asp-net.md) in your code.</span></span> <span data-ttu-id="595e7-112">Als deze al geïnstalleerd, zorg er dan voor dat u de meest recente versie hebt.</span><span class="sxs-lookup"><span data-stu-id="595e7-112">If it's already installed, make sure you have the latest version.</span></span> <span data-ttu-id="595e7-113">(U doet dit door met de rechtermuisknop op het project in Solution Explorer en kies beheren NuGet-pakketten.</span><span class="sxs-lookup"><span data-stu-id="595e7-113">(To do this, right-click your project in Solution Explorer, and choose Manage NuGet packages.</span></span> <span data-ttu-id="595e7-114">Selecteer Updates en alle updatepakketten.) Uw app opnieuw implementeren.</span><span class="sxs-lookup"><span data-stu-id="595e7-114">Select Updates and update all packages.) Re-deploy your app.</span></span>

<span data-ttu-id="595e7-115">*Met behulp van ASP.NET Core? [Schakel dit selectievakje](#aspnetcore).*</span><span class="sxs-lookup"><span data-stu-id="595e7-115">*Using ASP.NET Core? [Check here](#aspnetcore).*</span></span>

<span data-ttu-id="595e7-116">In [https://portal.azure.com](https://portal.azure.com), opent u de Application Insights-resource voor uw web-app.</span><span class="sxs-lookup"><span data-stu-id="595e7-116">In [https://portal.azure.com](https://portal.azure.com), open the Application Insights resource for your web app.</span></span> <span data-ttu-id="595e7-117">Open **prestaties** en klik op **Profiler voor Application Insights inschakelen...** .</span><span class="sxs-lookup"><span data-stu-id="595e7-117">Open **Performance** and click **Enable Application Insights Profiler...**.</span></span>

![Klik op de banner van de profiler inschakelen][enable-profiler-banner]

<span data-ttu-id="595e7-119">U kunt ook u kunt altijd op **configureren** als status wilt weergeven, inschakelen of uitschakelen van de Profiler.</span><span class="sxs-lookup"><span data-stu-id="595e7-119">Alternatively, you can always click **Configure** to view status, enable, or disable the Profiler.</span></span>

![Klik op configureren in de blade Performance][performance-blade]

<span data-ttu-id="595e7-121">Web-apps die zijn geconfigureerd met Application Insights worden vermeld op de blade configureren.</span><span class="sxs-lookup"><span data-stu-id="595e7-121">Web apps that are configured with Application Insights are listed on Configure blade.</span></span> <span data-ttu-id="595e7-122">Volg de instructies voor het installeren van de agent Profiler indien nodig.</span><span class="sxs-lookup"><span data-stu-id="595e7-122">Follow instructions to install the Profiler agent if needed.</span></span> <span data-ttu-id="595e7-123">Als er geen web-app is geconfigureerd met Application Insights nog, klikt u op *gekoppelde Apps toevoegen*.</span><span class="sxs-lookup"><span data-stu-id="595e7-123">If no web app is configured with Application Insights yet, click *Add Linked Apps*.</span></span>

<span data-ttu-id="595e7-124">Gebruik de *Profiler inschakelen* of *Profiler uitschakelen* knoppen in de blade configureren om te bepalen van de Profiler op alle gekoppelde Webapps.</span><span class="sxs-lookup"><span data-stu-id="595e7-124">Use the *Enable Profiler* or *Disable Profiler* buttons in the Configure blade to control the Profiler on all your linked web apps.</span></span>



![Blade configureren][linked app services]

<span data-ttu-id="595e7-126">Als u wilt stoppen of opnieuw starten van de profiler voor een afzonderlijke App Service-exemplaar, kijkt u **in de bron-App Service**in **webtaken**.</span><span class="sxs-lookup"><span data-stu-id="595e7-126">To stop or restart the profiler for an individual App Service instance, you'll find it **in the App Service resource**, in **Web Jobs**.</span></span> <span data-ttu-id="595e7-127">Zoek wilt verwijderen, onder **extensies**.</span><span class="sxs-lookup"><span data-stu-id="595e7-127">To delete it, look under **Extensions**.</span></span>

![Profiler voor een webtaken uitschakelen][disable-profiler-webjob]

<span data-ttu-id="595e7-129">We raden u aan de Profiler die is ingeschakeld op alle web-apps voor het detecteren van eventuele prestatieproblemen zo snel mogelijk.</span><span class="sxs-lookup"><span data-stu-id="595e7-129">We recommend that you have the Profiler enabled on all your web apps to discover any performance issues as soon as possible.</span></span>

<span data-ttu-id="595e7-130">Als u Web Deploy te implementeren wijzigingen aan uw webtoepassing hebt gebruikt, zorg ervoor dat u deze uitsluiten van de **App_Data** map worden verwijderd tijdens de implementatie.</span><span class="sxs-lookup"><span data-stu-id="595e7-130">If you use WebDeploy to deploy changes to your web application, ensure that you exclude the **App_Data** folder from being deleted during deployment.</span></span> <span data-ttu-id="595e7-131">Anders wordt worden de profiler extensiebestanden verwijderd wanneer u naast de webtoepassing naar Azure implementeert.</span><span class="sxs-lookup"><span data-stu-id="595e7-131">Otherwise, the profiler extension's files will be deleted when you next deploy the web application to Azure.</span></span>

### <a name="using-profiler-with-azure-vms-and-compute-resources-preview"></a><span data-ttu-id="595e7-132">Profiler gebruiken met Azure VM's en rekenresources (preview)</span><span class="sxs-lookup"><span data-stu-id="595e7-132">Using profiler with Azure VMs and Compute resources (preview)</span></span>

<span data-ttu-id="595e7-133">Wanneer u [Application Insights inschakelen voor Azure app services tijdens runtime](app-insights-azure-web-apps.md#run-time-instrumentation-with-application-insights), Profiler is automatisch beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="595e7-133">When you [enable Application Insights for Azure app services at run time](app-insights-azure-web-apps.md#run-time-instrumentation-with-application-insights), Profiler is automatically available.</span></span> <span data-ttu-id="595e7-134">(Als u al Application Insights voor de resource hebt ingeschakeld, moet u mogelijk om bij te werken naar de laatste versie door de **configureren** wizard.)</span><span class="sxs-lookup"><span data-stu-id="595e7-134">(If you already enabled Application Insights for the resource, you might need to update to the lates version through the **Configure** wizard.)</span></span>

<span data-ttu-id="595e7-135">Er is een [preview-versie van de Profiler voor Azure Compute-bronnen](https://go.microsoft.com/fwlink/?linkid=848155).</span><span class="sxs-lookup"><span data-stu-id="595e7-135">There is a [preview version of the Profiler for Azure Compute resources](https://go.microsoft.com/fwlink/?linkid=848155).</span></span>


## <a name="limits"></a><span data-ttu-id="595e7-136">Limieten</span><span class="sxs-lookup"><span data-stu-id="595e7-136">Limits</span></span>

<span data-ttu-id="595e7-137">De bewaartermijn van de gegevens standaard is 5 dagen.</span><span class="sxs-lookup"><span data-stu-id="595e7-137">The default data retention is 5 days.</span></span> <span data-ttu-id="595e7-138">Maximaal 10 GB per dag wordt ingenomen.</span><span class="sxs-lookup"><span data-stu-id="595e7-138">Maximum 10 GB ingested per day.</span></span>

<span data-ttu-id="595e7-139">Er zijn geen kosten voor de profiler-service.</span><span class="sxs-lookup"><span data-stu-id="595e7-139">There is no charge for the profiler service.</span></span> <span data-ttu-id="595e7-140">Uw web-app moet worden gehost in ten minste de basisstaffel van App-Services.</span><span class="sxs-lookup"><span data-stu-id="595e7-140">Your web app must be hosted in at least the Basic tier of App Services.</span></span>

## <a name="viewing-profiler-data"></a><span data-ttu-id="595e7-141">Profiler gegevens bekijken</span><span class="sxs-lookup"><span data-stu-id="595e7-141">Viewing profiler data</span></span>

<span data-ttu-id="595e7-142">Open de blade Performance en blader naar de Bewerkingslijst.</span><span class="sxs-lookup"><span data-stu-id="595e7-142">Open the Performance blade and scroll down to the operation list.</span></span>




![Application Insights-prestaties blade voorbeelden kolom][performance-blade-examples]

<span data-ttu-id="595e7-144">De kolommen in de tabel zijn:</span><span class="sxs-lookup"><span data-stu-id="595e7-144">The columns in the table are:</span></span>

* <span data-ttu-id="595e7-145">**Aantal** -het aantal van deze aanvragen in het tijdsbereik van de blade.</span><span class="sxs-lookup"><span data-stu-id="595e7-145">**Count** - The number of these requests in the time range of the blade.</span></span>
* <span data-ttu-id="595e7-146">**Mediaan** - typische duurt voordat uw app om te reageren op een aanvraag.</span><span class="sxs-lookup"><span data-stu-id="595e7-146">**Median** - The typical time your app takes to respond to a request.</span></span> <span data-ttu-id="595e7-147">De helft van alle antwoorden zijn sneller dan dit.</span><span class="sxs-lookup"><span data-stu-id="595e7-147">Half of all responses were faster than this.</span></span>
* <span data-ttu-id="595e7-148">**95e percentiel** 95% van de antwoorden sneller dan dit zijn.</span><span class="sxs-lookup"><span data-stu-id="595e7-148">**95th percentile** 95% of responses were faster than this.</span></span> <span data-ttu-id="595e7-149">Als deze afbeelding heel verschillend van de mediaan is, is er mogelijk een onregelmatig probleem met uw app.</span><span class="sxs-lookup"><span data-stu-id="595e7-149">If this figure is very different from the median, there might be an intermittent problem with your app.</span></span> <span data-ttu-id="595e7-150">(Of het kan worden verklaard door een ontwerpfunctie zoals opslaan in cache).</span><span class="sxs-lookup"><span data-stu-id="595e7-150">(Or it might be explained by a design feature such as caching.)</span></span>
* <span data-ttu-id="595e7-151">**Voorbeelden** -een pictogram geeft aan dat de profiler stack-traces voor deze bewerking is vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="595e7-151">**Examples** - an icon indicates that the profiler has captured stack traces for this operation.</span></span>

<span data-ttu-id="595e7-152">Klik op het pictogram voorbeelden om de tracering explorer te openen.</span><span class="sxs-lookup"><span data-stu-id="595e7-152">Click the Examples icon to open the trace explorer.</span></span> <span data-ttu-id="595e7-153">De explorer enkele voorbeelden ziet u dat de profiler is vastgelegd, geclassificeerd door reactietijd.</span><span class="sxs-lookup"><span data-stu-id="595e7-153">The explorer shows several samples that the profiler has captured, classified by response time.</span></span>

<span data-ttu-id="595e7-154">Selecteer een voorbeeld om weer te geven van een code-niveau verdeling van tijd besteed aan de aanvraag wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="595e7-154">Select a sample to show a code-level breakdown of time spent executing the request.</span></span>

![Application Insights Trace Explorer][trace-explorer]

<span data-ttu-id="595e7-156">**Hot pad weergeven** wordt geopend de grootste blad knooppunt of ten minste iets sluit.</span><span class="sxs-lookup"><span data-stu-id="595e7-156">**Show hot path** opens the biggest leaf node, or at least something close.</span></span> <span data-ttu-id="595e7-157">In de meeste gevallen wordt dit knooppunt worden naast het prestatieknelpunt.</span><span class="sxs-lookup"><span data-stu-id="595e7-157">In most cases this node will be adjacent to a performance bottleneck.</span></span>



* <span data-ttu-id="595e7-158">**Label**: de naam van de functie of de gebeurtenis.</span><span class="sxs-lookup"><span data-stu-id="595e7-158">**Label**: The name of the function or event.</span></span> <span data-ttu-id="595e7-159">De structuur bevat een mengeling van code en gebeurtenissen die hebben plaatsgevonden (zoals SQL- en HTTP-gebeurtenissen).</span><span class="sxs-lookup"><span data-stu-id="595e7-159">The tree shows a mix of code and events that occurred (such as SQL and http events).</span></span> <span data-ttu-id="595e7-160">De eerste gebeurtenis vertegenwoordigt de totale duur van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="595e7-160">The top event represents the overall request duration.</span></span>
* <span data-ttu-id="595e7-161">**Verstreken**: het tijdsinterval tussen het begin van de bewerking en het einde.</span><span class="sxs-lookup"><span data-stu-id="595e7-161">**Elapsed**: The time interval between the start of the operation and the end.</span></span>
* <span data-ttu-id="595e7-162">**Wanneer**: bevat waarop de functie/gebeurtenis werd uitgevoerd in de relatie aan andere functies.</span><span class="sxs-lookup"><span data-stu-id="595e7-162">**When**: Shows when the function/event was running in relation to other functions.</span></span>

## <a name="how-to-read-performance-data"></a><span data-ttu-id="595e7-163">Het lezen van prestatiegegevens</span><span class="sxs-lookup"><span data-stu-id="595e7-163">How to read performance data</span></span>

<span data-ttu-id="595e7-164">Profiler voor Microsoft-service gebruikt een combinatie van methode en instrumentatie voor het analyseren van de prestaties van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="595e7-164">Microsoft service profiler uses a combination of sampling method and instrumentation to analyze the performance of your application.</span></span>
<span data-ttu-id="595e7-165">Wanneer uitgebreide verzameling uitgevoerd wordt, voorbeelden serviceprofiler de instructie aanwijzer van elk van de machine CPU in elke milliseconde.</span><span class="sxs-lookup"><span data-stu-id="595e7-165">When detailed collection is in progress, service profiler samples the instruction pointer of each of the machine's CPU in every millisecond.</span></span>
<span data-ttu-id="595e7-166">Elk voorbeeld wordt de volledige aanroepstack van de thread die momenteel wordt uitgevoerd, waarin gedetailleerde en nuttige informatie over wat u dat thread werd uitgevoerd op beide hoge en lage niveaus van abstractie vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="595e7-166">Each sample captures the complete call stack of the thread currently executing, giving detailed and useful information about what that thread was doing at both high and low levels of abstraction.</span></span> <span data-ttu-id="595e7-167">Profiler service verzamelt ook andere gebeurtenissen zoals context switch gebeurtenissen, TPL gebeurtenissen en threadgroep correlatie van activiteit en oorzakelijk verband bijhouden.</span><span class="sxs-lookup"><span data-stu-id="595e7-167">Service profiler also collects other events such as context switching events, TPL events, and thread-pool events to track activity correlation and causality.</span></span>

<span data-ttu-id="595e7-168">De aanroepstack wordt weergegeven in de tijdlijnweergave is het resultaat van de bovenstaande steekproeven en instrumentation.</span><span class="sxs-lookup"><span data-stu-id="595e7-168">The call stack shown in the timeline view is the result of the above sampling and instrumentation.</span></span> <span data-ttu-id="595e7-169">Omdat elk voorbeeld de volledige aanroepstack van de thread bevat, bevat de code van .NET framework, evenals andere frameworks die u verwijst.</span><span class="sxs-lookup"><span data-stu-id="595e7-169">Because each sample captures the complete call stack of the thread, it includes code from the .NET framework, as well as other frameworks you reference.</span></span>

### <span data-ttu-id="595e7-170"><a id="jitnewobj"></a>Object-toewijzing (`clr!JIT\_New or clr!JIT\_Newarr1`)</span><span class="sxs-lookup"><span data-stu-id="595e7-170"><a id="jitnewobj"></a>Object Allocation (`clr!JIT\_New or clr!JIT\_Newarr1`)</span></span>
<span data-ttu-id="595e7-171">`clr!JIT\_New and clr!JIT\_Newarr1`Help-functies in .NET framework die wijst geheugen toe vanuit beheerde heap zijn.</span><span class="sxs-lookup"><span data-stu-id="595e7-171">`clr!JIT\_New and clr!JIT\_Newarr1` are helper functions inside .NET framework that allocates memory from managed heap.</span></span> <span data-ttu-id="595e7-172">`clr!JIT\_New`wordt aangeroepen wanneer een object is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="595e7-172">`clr!JIT\_New` is invoked when an object is allocated.</span></span> <span data-ttu-id="595e7-173">`clr!JIT\_Newarr1`wordt aangeroepen wanneer een objectmatrix is toegewezen.</span><span class="sxs-lookup"><span data-stu-id="595e7-173">`clr!JIT\_Newarr1` is invoked when an object array is allocated.</span></span> <span data-ttu-id="595e7-174">Deze twee functies zijn meestal zeer snel en relatief klein hoeveelheid tijd moeten uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="595e7-174">These two functions are typically very fast and should take relatively small amount of time.</span></span> <span data-ttu-id="595e7-175">Als u ziet `clr!JIT\_New` of `clr!JIT\_Newarr1` een aanzienlijke hoeveelheid tijd kosten in de tijdlijn, is het een indicatie dat de code kan worden veel objecten toewijzen en aanzienlijke hoeveelheid geheugen.</span><span class="sxs-lookup"><span data-stu-id="595e7-175">If you see `clr!JIT\_New` or `clr!JIT\_Newarr1` take a substantial amount of time in your timeline, it's an indication that the code may be allocating many objects and consuming significant amount of memory.</span></span>

### <span data-ttu-id="595e7-176"><a id="theprestub"></a>Bij het laden van Code (`clr!ThePreStub`)</span><span class="sxs-lookup"><span data-stu-id="595e7-176"><a id="theprestub"></a>Loading Code (`clr!ThePreStub`)</span></span>
<span data-ttu-id="595e7-177">`clr!ThePreStub`is een Help-functie in .NET framework die de code uit te voeren voor de eerste keer wordt voorbereid.</span><span class="sxs-lookup"><span data-stu-id="595e7-177">`clr!ThePreStub` is a helper function inside .NET framework that prepares the code to execute for the first time.</span></span> <span data-ttu-id="595e7-178">Dit doorgaans omvat, maar niet beperkt tot, (alleen In Time) JIT-compilatie.</span><span class="sxs-lookup"><span data-stu-id="595e7-178">This typically includes, but not limited to, JIT (Just In Time) compilation.</span></span> <span data-ttu-id="595e7-179">Voor elke methode C# `clr!ThePreStub` mag maximaal één keer tijdens de levensduur van een proces worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="595e7-179">For each C# method, `clr!ThePreStub` should be invoked at most once during the lifetime of a process.</span></span>

<span data-ttu-id="595e7-180">Als u ziet `clr!ThePreStub` neemt veel tijd voor een aanvraag, dit geeft aan dat aanvraag is de eerste die wordt uitgevoerd die methode en de tijd voor .NET framework runtime laden van deze methode aanzienlijk is.</span><span class="sxs-lookup"><span data-stu-id="595e7-180">If you see `clr!ThePreStub` takes significant amount of time for a request, it indicates that request is the first one that executes that method, and the time for .NET framework runtime to load that method is significant.</span></span> <span data-ttu-id="595e7-181">U kunt overwegen een opgewarmd-proces dat wordt uitgevoerd dat deel van de code voordat uw gebruikers toegang dit tot of overweeg NGen uitgevoerd op uw assembly's.</span><span class="sxs-lookup"><span data-stu-id="595e7-181">You can consider a warm-up process that executes that portion of the code before your users access it, or consider running NGen on your assemblies.</span></span>

### <span data-ttu-id="595e7-182"><a id="lockcontention"></a>Aantal conflicten vergrendelen (`clr!JITutil\_MonContention` of `clr!JITutil\_MonEnterWorker`)</span><span class="sxs-lookup"><span data-stu-id="595e7-182"><a id="lockcontention"></a>Lock Contention (`clr!JITutil\_MonContention` or `clr!JITutil\_MonEnterWorker`)</span></span>
<span data-ttu-id="595e7-183">`clr!JITutil\_MonContention`of `clr!JITutil\_MonEnterWorker` geven aan de huidige thread wacht op een vergrendeling worden vrijgegeven.</span><span class="sxs-lookup"><span data-stu-id="595e7-183">`clr!JITutil\_MonContention` or `clr!JITutil\_MonEnterWorker` indicate the current thread is waiting for a lock to be released.</span></span> <span data-ttu-id="595e7-184">Dit doorgaans weergegeven bij het uitvoeren van een C# lock-instructie Monitor.Enter methode wordt aangeroepen of een methode met het kenmerk MethodImplOptions.Synchronized wordt aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="595e7-184">This typically shows up when executing a C# lock statement, invoking Monitor.Enter method, or invoking a method with MethodImplOptions.Synchronized attribute.</span></span> <span data-ttu-id="595e7-185">Vergrendelingsconflicten gebeurt meestal wanneer de thread A verkrijgt een vergrendeling en thread B probeert de vergrendeling te verkrijgen dezelfde voordat een thread is vrijgegeven.</span><span class="sxs-lookup"><span data-stu-id="595e7-185">Lock contention typically happens when thread A acquires a lock, and thread B tries to acquire the same lock before thread A releases it.</span></span>

### <span data-ttu-id="595e7-186"><a id="ngencold"></a>Bij het laden van code (`[COLD]`)</span><span class="sxs-lookup"><span data-stu-id="595e7-186"><a id="ngencold"></a>Loading code (`[COLD]`)</span></span>
<span data-ttu-id="595e7-187">Als de naam van de methode bevat `[COLD]`, zoals `mscorlib.ni![COLD]System.Reflection.CustomAttribute.IsDefined`, betekent dit dat de .NET framework runtime is worden gebruikt voor het uitvoeren van code dat niet is geoptimaliseerd door <a href="https://msdn.microsoft.com/library/e7k32f4k.aspx">optimalisatie profiel begeleide</a> voor de eerste keer.</span><span class="sxs-lookup"><span data-stu-id="595e7-187">If the method name contains `[COLD]`, such as `mscorlib.ni![COLD]System.Reflection.CustomAttribute.IsDefined`, it means that the .NET framework runtime is executing code that is not optimized by <a href="https://msdn.microsoft.com/library/e7k32f4k.aspx">profile-guided optimization</a> for the first time.</span></span> <span data-ttu-id="595e7-188">Voor elke methode moet worden weergegeven van maximaal één keer tijdens de levensduur van het proces.</span><span class="sxs-lookup"><span data-stu-id="595e7-188">For each method, it should show up at most once during the lifetime of the process.</span></span>

<span data-ttu-id="595e7-189">Als bij het laden van code aanzienlijke hoeveelheid tijd voor een aanvraag duurt, geeft u aan deze aanvraag is de eerste uit te voeren van het niet geoptimaliseerde gedeelte van de methode.</span><span class="sxs-lookup"><span data-stu-id="595e7-189">If loading code takes significant amount of time for a request, it indicates that request is the first one to execute the unoptimized portion of the method.</span></span> <span data-ttu-id="595e7-190">U kunt een warme up proces dat wordt uitgevoerd dat deel van de code voordat uw gebruikers toegang krijgen het tot overwegen.</span><span class="sxs-lookup"><span data-stu-id="595e7-190">You can consider a warm up process that executes that portion of the code before your users access it.</span></span>

### <span data-ttu-id="595e7-191"><a id="httpclientsend"></a>HTTP-aanvraag verzenden</span><span class="sxs-lookup"><span data-stu-id="595e7-191"><a id="httpclientsend"></a>Send HTTP Request</span></span>
<span data-ttu-id="595e7-192">Methoden zoals `HttpClient.Send` geven de code wacht op een HTTP-verzoek om te voltooien.</span><span class="sxs-lookup"><span data-stu-id="595e7-192">Methods such as `HttpClient.Send` indicate the code is waiting for a HTTP request to complete.</span></span>

### <span data-ttu-id="595e7-193"><a id="sqlcommand"></a>Databasebewerking</span><span class="sxs-lookup"><span data-stu-id="595e7-193"><a id="sqlcommand"></a>Database Operation</span></span>
<span data-ttu-id="595e7-194">Methode zoals SqlCommand.Execute geeft dat de code wacht tot een databasebewerking te voltooien.</span><span class="sxs-lookup"><span data-stu-id="595e7-194">Method such as SqlCommand.Execute indicates the code is waiting for a database operation to complete.</span></span>

### <span data-ttu-id="595e7-195"><a id="await"></a>Wachten op (`AWAIT\_TIME`)</span><span class="sxs-lookup"><span data-stu-id="595e7-195"><a id="await"></a>Waiting (`AWAIT\_TIME`)</span></span>
<span data-ttu-id="595e7-196">`AWAIT\_TIME`Hiermee geeft u dat de code wordt gewacht op een andere taak is voltooid.</span><span class="sxs-lookup"><span data-stu-id="595e7-196">`AWAIT\_TIME` indicates the code is waiting for another task to complete.</span></span> <span data-ttu-id="595e7-197">Dit gebeurt gewoonlijk met C# 'await' instructie.</span><span class="sxs-lookup"><span data-stu-id="595e7-197">This typically happens with C# 'await' statement.</span></span> <span data-ttu-id="595e7-198">Wanneer de code een C# 'await', de thread wordt afgewikkeld en wordt de besturing aan de threadgroep en er is geen thread die wachten op de 'await' om te voltooien is geblokkeerd.</span><span class="sxs-lookup"><span data-stu-id="595e7-198">When the code does a C# 'await', the thread unwinds and returns control to the thread-pool, and there is no thread that is blocked waiting for the 'await' to finish.</span></span> <span data-ttu-id="595e7-199">Logisch wordt de thread die de wizard de await heeft echter 'geblokkeerd' wachten totdat de bewerking te voltooien.</span><span class="sxs-lookup"><span data-stu-id="595e7-199">However, logically the thread that did the await is 'blocked' waiting for the operation to complete.</span></span> <span data-ttu-id="595e7-200">De `AWAIT\_TIME` geeft de tijd die het geblokkeerde wachten op de taak is voltooid.</span><span class="sxs-lookup"><span data-stu-id="595e7-200">The `AWAIT\_TIME` indicates the blocked time waiting for the task to complete.</span></span>

### <span data-ttu-id="595e7-201"><a id="block"></a>Geblokkeerde tijd</span><span class="sxs-lookup"><span data-stu-id="595e7-201"><a id="block"></a>Blocked Time</span></span>
<span data-ttu-id="595e7-202">`BLOCKED_TIME`Hiermee geeft u dat de code wordt gewacht op een andere bron beschikbaar, zoals het wachten op een synchronisatieobject wachten op een thread beschikbaar of wachten op een aanvraag te voltooien.</span><span class="sxs-lookup"><span data-stu-id="595e7-202">`BLOCKED_TIME` indicates the code is waiting for another resource to be available, such as waiting for a synchronization object, waiting for a thread to be available, or waiting for a request to finish.</span></span>

### <span data-ttu-id="595e7-203"><a id="cpu"></a>CPU-tijd</span><span class="sxs-lookup"><span data-stu-id="595e7-203"><a id="cpu"></a>CPU Time</span></span>
<span data-ttu-id="595e7-204">De CPU is bezig met uitvoeren van de instructies.</span><span class="sxs-lookup"><span data-stu-id="595e7-204">The CPU is busy executing the instructions.</span></span>

### <span data-ttu-id="595e7-205"><a id="disk"></a>Schijftijd</span><span class="sxs-lookup"><span data-stu-id="595e7-205"><a id="disk"></a>Disk Time</span></span>
<span data-ttu-id="595e7-206">De toepassing uitvoert schijfbewerkingen.</span><span class="sxs-lookup"><span data-stu-id="595e7-206">The application is performing disk operations.</span></span>

### <span data-ttu-id="595e7-207"><a id="network"></a>Network Time</span><span class="sxs-lookup"><span data-stu-id="595e7-207"><a id="network"></a>Network Time</span></span>
<span data-ttu-id="595e7-208">De toepassing met het uitvoeren van bewerkingen in het netwerk.</span><span class="sxs-lookup"><span data-stu-id="595e7-208">The application is performing network operations.</span></span>

### <span data-ttu-id="595e7-209"><a id="when"></a>Wanneer kolom</span><span class="sxs-lookup"><span data-stu-id="595e7-209"><a id="when"></a>When column</span></span>
<span data-ttu-id="595e7-210">Dit is een visualisatie van hoe de inclusief voorbeelden die worden verzameld voor een knooppunt gedurende een bepaalde periode variëren.</span><span class="sxs-lookup"><span data-stu-id="595e7-210">This is a visualization of how the INCLUSIVE samples collected for a node vary over time.</span></span> <span data-ttu-id="595e7-211">Het totale bereik van de aanvraag is onderverdeeld in 32 tijd buckets en inclusief voorbeelden voor dat knooppunt in deze buckets 32 wordt geteld.</span><span class="sxs-lookup"><span data-stu-id="595e7-211">The total range of the request is divided into 32 time buckets and the inclusive samples for that node are accumulated into those 32 buckets.</span></span> <span data-ttu-id="595e7-212">Elke bucket wordt vervolgens weergegeven als een balk waarvan u de hoogte een uitgebreid waarde vertegenwoordigt.</span><span class="sxs-lookup"><span data-stu-id="595e7-212">Each bucket is then represented as a bar whose height represents a scaled value.</span></span> <span data-ttu-id="595e7-213">Voor knooppunten gemarkeerd `CPU_TIME` of `BLOCKED_TIME`, of wanneer er een duidelijke relatie van de consumptie van een resource (cpu, schijf, een thread), de balk staat voor een van deze resources voor de periode van die bucket verbruikt.</span><span class="sxs-lookup"><span data-stu-id="595e7-213">For nodes marked `CPU_TIME` or `BLOCKED_TIME`, or where there is an obvious relationship of consuming a resource (cpu, disk, thread), the bar represents consuming one of those resources for the period of time of that bucket.</span></span> <span data-ttu-id="595e7-214">Voor deze metrische gegevens krijgt u meer dan 100% door meerdere resources verbruikt.</span><span class="sxs-lookup"><span data-stu-id="595e7-214">For these metrics you can get greater than 100% by consuming multiple resources.</span></span> <span data-ttu-id="595e7-215">Bijvoorbeeld, als Gemiddeld u twee CPU's tijdens een interval van gebruiken krijgt vervolgens u 200%.</span><span class="sxs-lookup"><span data-stu-id="595e7-215">For example, if on average you use two CPUs over an interval then you get 200%.</span></span>


## <span data-ttu-id="595e7-216"><a id="troubleshooting"></a>Problemen oplossen</span><span class="sxs-lookup"><span data-stu-id="595e7-216"><a id="troubleshooting"></a>Troubleshooting</span></span>

### <a name="how-can-i-know-whether-application-insights-profiler-is-running"></a><span data-ttu-id="595e7-217">Hoe weet ik of Application Insights profiler wordt uitgevoerd?</span><span class="sxs-lookup"><span data-stu-id="595e7-217">How can I know whether Application Insights profiler is running?</span></span>

<span data-ttu-id="595e7-218">De profiler wordt uitgevoerd als een taak continu web in Web-App.</span><span class="sxs-lookup"><span data-stu-id="595e7-218">The profiler runs as a continuous web job in Web App.</span></span> <span data-ttu-id="595e7-219">U kunt de Web-App-resource openen in https://portal.azure.com en controleer de status 'ApplicationInsightsProfiler' in de blade WebJobs.</span><span class="sxs-lookup"><span data-stu-id="595e7-219">You can open the Web App resource in https://portal.azure.com and check "ApplicationInsightsProfiler" status in the WebJobs blade.</span></span> <span data-ttu-id="595e7-220">Als deze niet wordt uitgevoerd, opent u **logboeken** voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="595e7-220">If it isn't running, open **Logs** to find out more.</span></span>

### <a name="why-cant-i-find-any-stack-examples-even-though-the-profiler-is-running"></a><span data-ttu-id="595e7-221">Waarom kan ik geen voorbeelden stack vinden ook al de profiler wordt uitgevoerd?</span><span class="sxs-lookup"><span data-stu-id="595e7-221">Why can't I find any stack examples even though the profiler is running?</span></span>

<span data-ttu-id="595e7-222">Hier volgen enkele dingen die u kunt controleren.</span><span class="sxs-lookup"><span data-stu-id="595e7-222">Here are a few things you can check.</span></span>

1. <span data-ttu-id="595e7-223">Zorg ervoor dat uw Web-App Service-Plan basisstaffel en hoger.</span><span class="sxs-lookup"><span data-stu-id="595e7-223">Make sure your Web App Service Plan is Basic tier and above.</span></span>
2. <span data-ttu-id="595e7-224">Zorg ervoor dat uw Web-App heeft Application Insights SDK 2.2 Beta en hierboven ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="595e7-224">Make sure your Web App has Application Insights SDK 2.2 Beta and above enabled.</span></span>
3. <span data-ttu-id="595e7-225">Zorg ervoor dat uw Web-App is ingesteld op APPINSIGHTS_INSTRUMENTATIONKEY met dezelfde instrumentatiesleutel die wordt gebruikt door de Application Insights-SDK.</span><span class="sxs-lookup"><span data-stu-id="595e7-225">Make sure your Web App has the APPINSIGHTS_INSTRUMENTATIONKEY setting with the same instrumentation key used by Application Insights SDK.</span></span>
4. <span data-ttu-id="595e7-226">Zorg ervoor dat uw Web-App wordt uitgevoerd op .net Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="595e7-226">Make sure your Web App is running on .Net Framework 4.6.</span></span>
5. <span data-ttu-id="595e7-227">Als het een toepassing ASP.NET Core, Controleer ook of [de vereiste afhankelijkheden](#aspnetcore).</span><span class="sxs-lookup"><span data-stu-id="595e7-227">If it's an ASP.NET Core application, please also check [the required dependencies](#aspnetcore).</span></span>

<span data-ttu-id="595e7-228">Nadat de profiler is gestart, is er een korte opgewarmd periode wanneer de profiler actief traceringen worden verzameld verschillende prestaties.</span><span class="sxs-lookup"><span data-stu-id="595e7-228">After the profiler is started, there is a short warm-up period when the profiler actively collects several performance traces.</span></span> <span data-ttu-id="595e7-229">Hierna is de profiler traceringen worden verzameld prestaties twee minuten in elk uur.</span><span class="sxs-lookup"><span data-stu-id="595e7-229">After that, the profiler collects performance traces for two minutes in every hour.</span></span>  

### <a name="i-was-using-azure-service-profiler-what-happened-to-it"></a><span data-ttu-id="595e7-230">Ik werd Azure Service Profiler gebruikt.</span><span class="sxs-lookup"><span data-stu-id="595e7-230">I was using Azure Service Profiler.</span></span> <span data-ttu-id="595e7-231">Wat is er gebeurd met het?</span><span class="sxs-lookup"><span data-stu-id="595e7-231">What happened to it?</span></span>  

<span data-ttu-id="595e7-232">Wanneer u Application Insights Profiler inschakelt, is Azure Service Profiler agent uitgeschakeld.</span><span class="sxs-lookup"><span data-stu-id="595e7-232">When you enable Application Insights Profiler, Azure Service Profiler agent is disabled.</span></span>

### <span data-ttu-id="595e7-233"><a id="double-counting"></a>Dubbele parallelle threads tellen</span><span class="sxs-lookup"><span data-stu-id="595e7-233"><a id="double-counting"></a>Double counting in parallel threads</span></span>

<span data-ttu-id="595e7-234">In sommige gevallen is de totale tijd metrische gegevens in de stack-viewer hoger dan de werkelijke duur van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="595e7-234">In some cases the total time metric in the stack viewer is more than the actual duration of the request.</span></span>

<span data-ttu-id="595e7-235">Dit kan gebeuren wanneer er twee of meer threads die zijn gekoppeld aan een aanvraag, parallel uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="595e7-235">This can happen when there are two or more threads associated with a request, operating in parallel.</span></span> <span data-ttu-id="595e7-236">De tijd van de totale thread is meer dan de verstreken tijd.</span><span class="sxs-lookup"><span data-stu-id="595e7-236">The total thread time is then more than the elapsed time.</span></span> <span data-ttu-id="595e7-237">In veel gevallen kan één thread worden wacht op de andere te voltooien.</span><span class="sxs-lookup"><span data-stu-id="595e7-237">In many cases one thread may be waiting on the other to complete.</span></span> <span data-ttu-id="595e7-238">De viewer wil dit detecteren en laat de niet-interessante wachten, maar errs aan de kant van te veel in plaats van als weggelaten welke essentiële informatie kunnen worden weergegeven.</span><span class="sxs-lookup"><span data-stu-id="595e7-238">The viewer tries to detect this and omit the uninteresting wait, but errs on the side of showing too much rather than omitting what may be critical information.</span></span>  

<span data-ttu-id="595e7-239">Wanneer u parallelle threads in uw traceringen zien, moet u bepalen welke threads wachten zodat u het kritieke pad voor de aanvraag kunt zien.</span><span class="sxs-lookup"><span data-stu-id="595e7-239">When you see parallel threads in your traces, you need to determine which threads are waiting so you can determine the critical path for the request.</span></span> <span data-ttu-id="595e7-240">In de meeste gevallen is gewoon de thread die probeert het snel de status van een wait wacht op de andere threads.</span><span class="sxs-lookup"><span data-stu-id="595e7-240">In most cases, the thread that quickly goes into a wait state is simply waiting on the other threads.</span></span> <span data-ttu-id="595e7-241">Richten op de andere en de tijd in de wachtende threads wordt genegeerd.</span><span class="sxs-lookup"><span data-stu-id="595e7-241">Concentrate on the others and ignore the time in the waiting threads.</span></span>

### <span data-ttu-id="595e7-242"><a id="issue-loading-trace-in-viewer"></a>Er is geen profileringsgegevens</span><span class="sxs-lookup"><span data-stu-id="595e7-242"><a id="issue-loading-trace-in-viewer"></a>No profiling data</span></span>

1. <span data-ttu-id="595e7-243">Als de gegevens die u probeert weer te geven ouder dan een paar weken is, kunt u uw tijdfilter beperken en probeer het opnieuw.</span><span class="sxs-lookup"><span data-stu-id="595e7-243">If the data you are trying to view is older than a couple of weeks, try limiting your time filter and try again.</span></span>

2. <span data-ttu-id="595e7-244">Controleer dat proxy of firewall hebben geen toegang tot geblokkeerd https://gateway.azureserviceprofiler.net.</span><span class="sxs-lookup"><span data-stu-id="595e7-244">Check that proxies or a firewall have not blocked access to https://gateway.azureserviceprofiler.net.</span></span>

3. <span data-ttu-id="595e7-245">Controleer of de Application Insights-instrumentatiesleutel die u in uw app werkt hetzelfde als de Application Insights-resource die u hebt ingeschakeld met profilering.</span><span class="sxs-lookup"><span data-stu-id="595e7-245">Check that the Application Insights instrumentation key you are using in your app is the same as the Application Insights resource you've enabled profiling with.</span></span> <span data-ttu-id="595e7-246">De sleutel bevindt zich doorgaans in ApplicationInsights.config, maar u kunt ook vinden in web.config of app.config.</span><span class="sxs-lookup"><span data-stu-id="595e7-246">The key is usually in ApplicationInsights.config but can also be found in web.config or app.config.</span></span>

### <a name="error-report-in-the-profiling-viewer"></a><span data-ttu-id="595e7-247">Foutrapport in de viewer voor profielservices gegeven</span><span class="sxs-lookup"><span data-stu-id="595e7-247">Error report in the profiling viewer</span></span>

<span data-ttu-id="595e7-248">Het bestand is een ondersteuningsticket vanuit de portal.</span><span class="sxs-lookup"><span data-stu-id="595e7-248">File a support ticket from the portal.</span></span> <span data-ttu-id="595e7-249">Neem de correlatie-ID van het foutbericht.</span><span class="sxs-lookup"><span data-stu-id="595e7-249">Please include the correlation ID from the error message.</span></span>

## <a name="manual-installation"></a><span data-ttu-id="595e7-250">Handmatige installatie</span><span class="sxs-lookup"><span data-stu-id="595e7-250">Manual installation</span></span>

<span data-ttu-id="595e7-251">Wanneer u de profiler configureert, worden de volgende updates zijn aangebracht aan de Web-App-instellingen.</span><span class="sxs-lookup"><span data-stu-id="595e7-251">When you configure the profiler, the following updates are made to the Web App's settings.</span></span> <span data-ttu-id="595e7-252">U kunt ze zelf doen handmatig als uw omgeving, bijvoorbeeld, vereist als uw toepassing wordt uitgevoerd in Azure App Service omgeving (as-omgeving):</span><span class="sxs-lookup"><span data-stu-id="595e7-252">You can do them yourself manually if your environment requires, for example, if your application runs in Azure App Service Environment (ASE):</span></span>

1. <span data-ttu-id="595e7-253">Open de instellingen in de blade web-app-beheer.</span><span class="sxs-lookup"><span data-stu-id="595e7-253">In the web app control blade, open Settings.</span></span>
2. <span data-ttu-id="595e7-254">Stel '.Net Framework-versie ' naar 4.6.</span><span class="sxs-lookup"><span data-stu-id="595e7-254">Set ".Net Framework version" to v4.6.</span></span>
3. <span data-ttu-id="595e7-255">Ingesteld 'Altijd aan' op.</span><span class="sxs-lookup"><span data-stu-id="595e7-255">Set "Always On" to On.</span></span>
4. <span data-ttu-id="595e7-256">App-instelling toevoegen '__APPINSIGHTS_INSTRUMENTATIONKEY__' en de waarde ingesteld op de dezelfde instrumentatiesleutel die wordt gebruikt door de SDK.</span><span class="sxs-lookup"><span data-stu-id="595e7-256">Add app setting "__APPINSIGHTS_INSTRUMENTATIONKEY__" and set the value to the same instrumentation key used by the SDK.</span></span>
5. <span data-ttu-id="595e7-257">Open geavanceerde hulpprogramma's.</span><span class="sxs-lookup"><span data-stu-id="595e7-257">Open Advanced Tools.</span></span>
6. <span data-ttu-id="595e7-258">Klik op "Ga' naar de Kudu-website openen.</span><span class="sxs-lookup"><span data-stu-id="595e7-258">Click "Go" to open the Kudu website.</span></span>
7. <span data-ttu-id="595e7-259">Selecteer in de website Kudu 'Site-uitbreidingen'.</span><span class="sxs-lookup"><span data-stu-id="595e7-259">In the Kudu website, select "Site extensions".</span></span>
8. <span data-ttu-id="595e7-260">Installeer '__Application Insights__' uit de galerie.</span><span class="sxs-lookup"><span data-stu-id="595e7-260">Install "__Application Insights__" from Gallery.</span></span>
9. <span data-ttu-id="595e7-261">Start opnieuw op de web-app.</span><span class="sxs-lookup"><span data-stu-id="595e7-261">Restart the web app.</span></span>

## <span data-ttu-id="595e7-262"><a id="aspnetcore"></a>ASP.NET Core-ondersteuning</span><span class="sxs-lookup"><span data-stu-id="595e7-262"><a id="aspnetcore"></a>ASP.NET Core Support</span></span>

<span data-ttu-id="595e7-263">ASP.NET Core toepassing moet installeren Microsoft.ApplicationInsights.AspNetCore Nuget-pakket 2.1.0-beta6 of hoger werken met de Profiler.</span><span class="sxs-lookup"><span data-stu-id="595e7-263">ASP.NET Core application needs to install Microsoft.ApplicationInsights.AspNetCore Nuget package 2.1.0-beta6 or higher to work with the Profiler.</span></span> <span data-ttu-id="595e7-264">We bieden geen ondersteuning voor de lagere versies na 27-6/2017.</span><span class="sxs-lookup"><span data-stu-id="595e7-264">We no longer support the lower versions after 6/27/2017.</span></span>

## <a name="next-steps"></a><span data-ttu-id="595e7-265">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="595e7-265">Next steps</span></span>

* [<span data-ttu-id="595e7-266">Met Application Insights werken in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="595e7-266">Working with Application Insights in Visual Studio</span></span>](https://docs.microsoft.com/azure/application-insights/app-insights-visual-studio)

[performance-blade]: ./media/app-insights-profiler/performance-blade.png
[performance-blade-examples]: ./media/app-insights-profiler/performance-blade-examples.png
[trace-explorer]: ./media/app-insights-profiler/trace-explorer.png
[trace-explorer-toolbar]: ./media/app-insights-profiler/trace-explorer-toolbar.png
[trace-explorer-hint-tip]: ./media/app-insights-profiler/trace-explorer-hint-tip.png
[trace-explorer-hot-path]: ./media/app-insights-profiler/trace-explorer-hot-path.png
[enable-profiler-banner]: ./media/app-insights-profiler/enable-profiler-banner.png
[disable-profiler-webjob]: ./media/app-insights-profiler/disable-profiler-webjob.png
[linked app services]: ./media/app-insights-profiler/linked-app-services.png
