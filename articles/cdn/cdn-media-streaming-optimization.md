---
title: Optimalisatie via het Azure Content Delivery Network streaming media
description: Optimaliseren voor de levering van smooth streaming media-bestanden
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: v-semcev
ms.openlocfilehash: 1221f4f50b8b9c4b9f9f88be4d04a65375c36062
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="media-streaming-optimization-via-the-azure-content-delivery-network"></a><span data-ttu-id="37a93-103">Optimalisatie via het Azure Content Delivery Network streaming media</span><span class="sxs-lookup"><span data-stu-id="37a93-103">Media streaming optimization via the Azure Content Delivery Network</span></span> 
 
<span data-ttu-id="37a93-104">Gebruik van hoogwaardige video neemt op het Internet, wat voor efficiënte levering van grote bestanden moeilijkheden.</span><span class="sxs-lookup"><span data-stu-id="37a93-104">Use of high-definition video is increasing on the Internet, which creates difficulties for efficient delivery of large files.</span></span> <span data-ttu-id="37a93-105">Klanten verwachten smooth afspelen van video op aanvraag of live video activa op tal van netwerken en clients over de hele wereld.</span><span class="sxs-lookup"><span data-stu-id="37a93-105">Customers expect smooth playback of video on demand or live video assets on a variety of networks and clients all over the world.</span></span> <span data-ttu-id="37a93-106">Een snelle en efficiënte bezorgingsmechanisme voor media streaming-bestanden is essentieel voor een consumer smooth en uitmuntende ervaring.</span><span class="sxs-lookup"><span data-stu-id="37a93-106">A fast and efficient delivery mechanism for media streaming files is critical to ensure a smooth and enjoyable consumer experience.</span></span>  

<span data-ttu-id="37a93-107">Live streaming media is uiterst moeilijk te leveren vanwege de grote grootte en het aantal gelijktijdige gebruikers.</span><span class="sxs-lookup"><span data-stu-id="37a93-107">Live streaming media is especially difficult to deliver because of the large sizes and number of concurrent viewers.</span></span> <span data-ttu-id="37a93-108">Lange vertragingen veroorzaken voor gebruikers te verlaten.</span><span class="sxs-lookup"><span data-stu-id="37a93-108">Long delays cause users to leave.</span></span> <span data-ttu-id="37a93-109">Omdat live gegevensstromen tevoren kunnen niet worden opgeslagen en grote latenties niet aanvaardbaar is voor gebruikers, moeten video fragmenten tijdig worden geleverd.</span><span class="sxs-lookup"><span data-stu-id="37a93-109">Because live streams can't be cached ahead of time and large latencies aren't acceptable to viewers, video fragments must be delivered in a timely manner.</span></span> 

<span data-ttu-id="37a93-110">De aanvraag patronen van streaming bieden ook enkele nieuwe uitdagingen.</span><span class="sxs-lookup"><span data-stu-id="37a93-110">The request patterns of streaming also provide some new challenges.</span></span> <span data-ttu-id="37a93-111">Wanneer een populaire live stream of een nieuwe reeks voor video op aanvraag wordt uitgebracht, kunnen duizenden naar miljoenen viewers verzoeken om de stroom op hetzelfde moment.</span><span class="sxs-lookup"><span data-stu-id="37a93-111">When a popular live stream or a new series is released for video on demand, thousands to millions of viewers might request the stream at the same time.</span></span> <span data-ttu-id="37a93-112">Smart aanvraag consolidatie is in dit geval de oorsprong-servers niet overbelast wanneer de activa zijn niet opgeslagen in de cache nog essentieel.</span><span class="sxs-lookup"><span data-stu-id="37a93-112">In this case, smart request consolidation is vital to not overwhelm the origin servers when the assets aren't cached yet.</span></span>
 
<span data-ttu-id="37a93-113">Het Azure Content Delivery Network van Akamai biedt nu een functie die zorgt voor streaming media activa efficiënt aan gebruikers overal ter wereld op grote schaal.</span><span class="sxs-lookup"><span data-stu-id="37a93-113">The Azure Content Delivery Network from Akamai now offers a feature that delivers streaming media assets efficiently to users across the globe at scale.</span></span> <span data-ttu-id="37a93-114">De functie vermindert latenties omdat dit de belasting van de oorsprong-servers verlaagt.</span><span class="sxs-lookup"><span data-stu-id="37a93-114">The feature reduces latencies because it reduces the load on the origin servers.</span></span> <span data-ttu-id="37a93-115">Deze functie is beschikbaar met de standaard Akamai prijscategorie.</span><span class="sxs-lookup"><span data-stu-id="37a93-115">This feature is available with the Standard Akamai pricing tier.</span></span> 

<span data-ttu-id="37a93-116">Azure Content Delivery Network van Verizon biedt mediagegevensstromen rechtstreeks in het type Algemeen web levering optimalisatie.</span><span class="sxs-lookup"><span data-stu-id="37a93-116">The Azure Content Delivery Network from Verizon delivers streaming media directly in the general web delivery optimization type.</span></span>
 
## <a name="configure-an-endpoint-to-optimize-media-streaming-in-the-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="37a93-117">Een eindpunt voor het optimaliseren van mediastreaming in Azure Content Delivery Network van Akamai configureren</span><span class="sxs-lookup"><span data-stu-id="37a93-117">Configure an endpoint to optimize media streaming in the Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="37a93-118">U kunt uw eindpunt content delivery network (CDN) voor het optimaliseren van leveringsmethode voor grote bestanden via de Azure-portal configureren.</span><span class="sxs-lookup"><span data-stu-id="37a93-118">You can configure your content delivery network (CDN) endpoint to optimize delivery for large files via the Azure portal.</span></span> <span data-ttu-id="37a93-119">U kunt ook onze REST-API's of een van de client-SDK's gebruiken om dit te doen.</span><span class="sxs-lookup"><span data-stu-id="37a93-119">You can also use our REST APIs or any of the client SDKs to do this.</span></span> <span data-ttu-id="37a93-120">De volgende stappen ziet het proces via de Azure-portal:</span><span class="sxs-lookup"><span data-stu-id="37a93-120">The following steps show the process via the Azure portal:</span></span>

1. <span data-ttu-id="37a93-121">Een nieuw eindpunt toevoegen aan de **CDN-profiel** pagina **eindpunt**.</span><span class="sxs-lookup"><span data-stu-id="37a93-121">To add a new endpoint, on the **CDN profile** page, select **Endpoint**.</span></span>
  
    ![Nieuwe endpoint](./media/cdn-media-streaming-optimization/01_Adding.png)

2. <span data-ttu-id="37a93-123">In de **geoptimaliseerd voor** vervolgkeuzelijst, selecteer **Video op aanvraag mediastreaming** voor video-on-demand activa.</span><span class="sxs-lookup"><span data-stu-id="37a93-123">In the **Optimized for** drop-down list, select **Video on demand media streaming** for video-on-demand assets.</span></span> <span data-ttu-id="37a93-124">Als u een combinatie van live en video-on-demand streaming doen, selecteert u **algemene mediastreaming**.</span><span class="sxs-lookup"><span data-stu-id="37a93-124">If you do a combination of live and video-on-demand streaming, select **General media streaming**.</span></span>

    ![Streaming geselecteerd](./media/cdn-media-streaming-optimization/02_Creating.png) 
 
<span data-ttu-id="37a93-126">Nadat u het eindpunt hebt gemaakt, wordt het toegepast de optimalisatie voor alle bestanden die aan bepaalde criteria voldoen.</span><span class="sxs-lookup"><span data-stu-id="37a93-126">After you create the endpoint, it applies the optimization for all files that match certain criteria.</span></span> <span data-ttu-id="37a93-127">De volgende sectie wordt beschreven in dit proces.</span><span class="sxs-lookup"><span data-stu-id="37a93-127">The following section describes this process.</span></span> 
 
## <a name="media-streaming-optimizations-for-the-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="37a93-128">Optimalisaties voor het Azure Content Delivery Network van Akamai streaming media</span><span class="sxs-lookup"><span data-stu-id="37a93-128">Media streaming optimizations for the Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="37a93-129">Streaming optimalisatie van Akamai geschikt voor live is-Media of video-on-demand mediagegevensstromen die gebruikmaakt van afzonderlijke media fragmenten voor de levering van.</span><span class="sxs-lookup"><span data-stu-id="37a93-129">Media streaming optimization from Akamai is effective for live or video-on-demand streaming media that uses individual media fragments for delivery.</span></span> <span data-ttu-id="37a93-130">Dit proces wijkt af van een enkel grote actief worden overgedragen via progressief downloaden of met behulp van de byte-bereikaanvragen.</span><span class="sxs-lookup"><span data-stu-id="37a93-130">This process is different from a single large asset transferred via progressive download or by using byte-range requests.</span></span> <span data-ttu-id="37a93-131">Zie voor informatie over deze stijl media leveringsmethode, [groot bestand optimalisatie](cdn-large-file-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="37a93-131">For information on that style of media delivery, see [Large file optimization](cdn-large-file-optimization.md).</span></span>


<span data-ttu-id="37a93-132">De algemene levering of video-on-demand media levering optimalisatie mediatypen voor het gebruik van een CDN met back-end-optimalisaties sneller media-elementen.</span><span class="sxs-lookup"><span data-stu-id="37a93-132">The general media delivery or video-on-demand media delivery optimization types use a CDN with back-end optimizations to deliver media assets faster.</span></span> <span data-ttu-id="37a93-133">Ze ook configuraties gebruiken voor media activa op basis van aanbevolen procedures geleerd gedurende een bepaalde periode.</span><span class="sxs-lookup"><span data-stu-id="37a93-133">They also use configurations for media assets based on best practices learned over time.</span></span>

### <a name="caching"></a><span data-ttu-id="37a93-134">Caching</span><span class="sxs-lookup"><span data-stu-id="37a93-134">Caching</span></span>

<span data-ttu-id="37a93-135">Als Azure Content Delivery Network van Akamai detecteert dat de asset een streaming-manifest of fragment is, wordt gebruikt op verschillende tijdstippen in de cache verloopt uit algemene webtoepassingen levering.</span><span class="sxs-lookup"><span data-stu-id="37a93-135">If the Azure Content Delivery Network from Akamai detects that the asset is a streaming manifest or fragment, it uses different caching expiration times from general web delivery.</span></span> <span data-ttu-id="37a93-136">(Zie de volledige lijst in de volgende tabel.) Zoals altijd worden cache-control of Expires-koppen verzonden vanuit de oorsprong gehonoreerd.</span><span class="sxs-lookup"><span data-stu-id="37a93-136">(See the full list in the following table.) As always, cache-control or Expires headers sent from the origin are honored.</span></span> <span data-ttu-id="37a93-137">Als de asset niet een activum media, slaat het met behulp van de vervaldatum tijden voor de levering van algemene webtoepassingen.</span><span class="sxs-lookup"><span data-stu-id="37a93-137">If the asset is not a media asset, it caches by using the expiration times for general web delivery.</span></span>

<span data-ttu-id="37a93-138">De korte tijd van de negatieve cache is nuttig voor de oorsprong offload wanneer veel gebruikers vragen een fragment dat nog niet bestaat.</span><span class="sxs-lookup"><span data-stu-id="37a93-138">The short negative caching time is useful for origin offload when many users request a fragment that doesn’t exist yet.</span></span> <span data-ttu-id="37a93-139">Een voorbeeld is een live stream waar de pakketten zijn niet beschikbaar vanuit de oorsprong die seconde.</span><span class="sxs-lookup"><span data-stu-id="37a93-139">An example is a live stream where the packets aren't available from the origin that second.</span></span> <span data-ttu-id="37a93-140">Het meer cachebewerkingen interval helpt ook bij het aanvragen van de oorsprong offload omdat video-inhoud doorgaans niet is gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="37a93-140">The longer caching interval also helps offload requests from the origin because video content isn't typically modified.</span></span>
 

|    | <span data-ttu-id="37a93-141">Algemeen</span><span class="sxs-lookup"><span data-stu-id="37a93-141">General</span></span><br> <span data-ttu-id="37a93-142">Web</span><span class="sxs-lookup"><span data-stu-id="37a93-142">web</span></span><br><span data-ttu-id="37a93-143">levering</span><span class="sxs-lookup"><span data-stu-id="37a93-143">delivery</span></span> | <span data-ttu-id="37a93-144">Algemeen</span><span class="sxs-lookup"><span data-stu-id="37a93-144">General</span></span><br> <span data-ttu-id="37a93-145">media</span><span class="sxs-lookup"><span data-stu-id="37a93-145">media</span></span><br> <span data-ttu-id="37a93-146">streaming</span><span class="sxs-lookup"><span data-stu-id="37a93-146">streaming</span></span> | <span data-ttu-id="37a93-147">Video-on-demand</span><span class="sxs-lookup"><span data-stu-id="37a93-147">Video-on-demand</span></span> <br><span data-ttu-id="37a93-148">media</span><span class="sxs-lookup"><span data-stu-id="37a93-148">media</span></span><br> <span data-ttu-id="37a93-149">streaming</span><span class="sxs-lookup"><span data-stu-id="37a93-149">streaming</span></span>  
--- | --- | --- | ---
<span data-ttu-id="37a93-150">Opslaan in cache: positief</span><span class="sxs-lookup"><span data-stu-id="37a93-150">Caching: Positive</span></span> <br> <span data-ttu-id="37a93-151">HTTP 200, 203, 300,</span><span class="sxs-lookup"><span data-stu-id="37a93-151">HTTP 200, 203, 300,</span></span> <br> <span data-ttu-id="37a93-152">301, 302 en 410</span><span class="sxs-lookup"><span data-stu-id="37a93-152">301, 302, and 410</span></span> | <span data-ttu-id="37a93-153">7 dagen</span><span class="sxs-lookup"><span data-stu-id="37a93-153">7 days</span></span> |<span data-ttu-id="37a93-154">365 dagen</span><span class="sxs-lookup"><span data-stu-id="37a93-154">365 days</span></span> | <span data-ttu-id="37a93-155">365 dagen</span><span class="sxs-lookup"><span data-stu-id="37a93-155">365 days</span></span>   
<span data-ttu-id="37a93-156">Opslaan in cache: negatieve</span><span class="sxs-lookup"><span data-stu-id="37a93-156">Caching: Negative</span></span> <br> <span data-ttu-id="37a93-157">HTTP 204 305 404,</span><span class="sxs-lookup"><span data-stu-id="37a93-157">HTTP 204, 305, 404,</span></span> <br> <span data-ttu-id="37a93-158">en 405</span><span class="sxs-lookup"><span data-stu-id="37a93-158">and 405</span></span> | <span data-ttu-id="37a93-159">Geen</span><span class="sxs-lookup"><span data-stu-id="37a93-159">None</span></span> | <span data-ttu-id="37a93-160">1 seconde</span><span class="sxs-lookup"><span data-stu-id="37a93-160">1 second</span></span> | <span data-ttu-id="37a93-161">1 seconde</span><span class="sxs-lookup"><span data-stu-id="37a93-161">1 second</span></span>
 
### <a name="deal-with-origin-failure"></a><span data-ttu-id="37a93-162">Omgaan met fouten in de oorsprong</span><span class="sxs-lookup"><span data-stu-id="37a93-162">Deal with origin failure</span></span>  

<span data-ttu-id="37a93-163">Algemene media leveren en video-on-demand media leveren ook hebben oorsprong time-out en het logboek opnieuw op basis van best practices voor typische aanvraag patronen.</span><span class="sxs-lookup"><span data-stu-id="37a93-163">General media delivery and video-on-demand media delivery also have origin time-out and a retry log based on best practices for typical request patterns.</span></span> <span data-ttu-id="37a93-164">Bijvoorbeeld, omdat algemene media leveren voor live en video-on-demand media leveren, een kortere verbindingstime-out vanwege de aard van tijdgebonden van wordt live streamen.</span><span class="sxs-lookup"><span data-stu-id="37a93-164">For example, because general media delivery is for live and video-on-demand media delivery, it uses a shorter connection time-out due to the time-sensitive nature of live streaming.</span></span>

<span data-ttu-id="37a93-165">Wanneer een verbinding een optreedt time-out, probeert de CDN opnieuw een aantal keren voordat het een fout '504 - Gateway timeout gegenereerd' naar de client verzendt.</span><span class="sxs-lookup"><span data-stu-id="37a93-165">When a connection times out, the CDN retries a number of times before it sends a "504 - Gateway Timeout" error to the client.</span></span> 

<span data-ttu-id="37a93-166">Wanneer een bestand overeenkomt met de lijst met bestanden en de tekengrootte voorwaarden, de CDN maakt gebruik van het gedrag voor het streamen van media.</span><span class="sxs-lookup"><span data-stu-id="37a93-166">When a file matches the file type and size conditions list, the CDN uses the behavior for media streaming.</span></span> <span data-ttu-id="37a93-167">Anders gebruikt het algemene webtoepassingen levering.</span><span class="sxs-lookup"><span data-stu-id="37a93-167">Otherwise, it uses general web delivery.</span></span>
   
### <a name="conditions-for-media-streaming-optimization"></a><span data-ttu-id="37a93-168">Voorwaarden voor de optimalisatie van mediastreaming</span><span class="sxs-lookup"><span data-stu-id="37a93-168">Conditions for media streaming optimization</span></span> 

<span data-ttu-id="37a93-169">De volgende tabel bevat de set criteria te zijn voor de optimalisatie van mediastreaming voldaan:</span><span class="sxs-lookup"><span data-stu-id="37a93-169">The following table lists the set of criteria to be satisfied for media streaming optimization:</span></span> 
 
<span data-ttu-id="37a93-170">Ondersteunde typen streaming</span><span class="sxs-lookup"><span data-stu-id="37a93-170">Supported streaming types</span></span> | <span data-ttu-id="37a93-171">Bestandsextensies</span><span class="sxs-lookup"><span data-stu-id="37a93-171">File extensions</span></span>  
--- | ---  
<span data-ttu-id="37a93-172">Apple HLS</span><span class="sxs-lookup"><span data-stu-id="37a93-172">Apple HLS</span></span> | <span data-ttu-id="37a93-173">m3u8, m3u, m3ub, key, ts, aac</span><span class="sxs-lookup"><span data-stu-id="37a93-173">m3u8, m3u, m3ub, key, ts, aac</span></span>
<span data-ttu-id="37a93-174">Adobe harde schijven</span><span class="sxs-lookup"><span data-stu-id="37a93-174">Adobe HDS</span></span> | <span data-ttu-id="37a93-175">f4m, f4x, drmmeta, bootstrap, f4f,</span><span class="sxs-lookup"><span data-stu-id="37a93-175">f4m, f4x, drmmeta, bootstrap, f4f,</span></span><br><span data-ttu-id="37a93-176">URL totaal aantal segmenten-structuur</span><span class="sxs-lookup"><span data-stu-id="37a93-176">Seg-Frag URL structure</span></span> <br> <span data-ttu-id="37a93-177">(die overeenkomen met de reguliere expressie: ^(/.*)Seq(\d+)-Frag(\d+)</span><span class="sxs-lookup"><span data-stu-id="37a93-177">(matching regex: ^(/.*)Seq(\d+)-Frag(\d+)</span></span>
<span data-ttu-id="37a93-178">STREEPJE</span><span class="sxs-lookup"><span data-stu-id="37a93-178">DASH</span></span> | <span data-ttu-id="37a93-179">MPD, streepjes, divx, ismv, m4s, m4v, mp4, mp4v,</span><span class="sxs-lookup"><span data-stu-id="37a93-179">mpd, dash, divx, ismv, m4s, m4v, mp4, mp4v,</span></span> <br> <span data-ttu-id="37a93-180">sidx, webm, mp4a, m4a, isma</span><span class="sxs-lookup"><span data-stu-id="37a93-180">sidx, webm, mp4a, m4a, isma</span></span>
<span data-ttu-id="37a93-181">Smooth streaming</span><span class="sxs-lookup"><span data-stu-id="37a93-181">Smooth streaming</span></span> | <span data-ttu-id="37a93-182">/ manifest /, QualityLevels/fragmenten /</span><span class="sxs-lookup"><span data-stu-id="37a93-182">/manifest/,/QualityLevels/Fragments/</span></span>
  

 
## <a name="media-streaming-optimizations-for-the-azure-content-delivery-network-from-verizon"></a><span data-ttu-id="37a93-183">Optimalisaties voor het Azure Content Delivery Network van Verizon streaming media</span><span class="sxs-lookup"><span data-stu-id="37a93-183">Media streaming optimizations for the Azure Content Delivery Network from Verizon</span></span>

<span data-ttu-id="37a93-184">Het Azure Content Delivery Network van Verizon biedt streaming media activa rechtstreeks met behulp van het type Algemeen web levering optimalisatie.</span><span class="sxs-lookup"><span data-stu-id="37a93-184">The Azure Content Delivery Network from Verizon delivers streaming media assets directly by using the general web delivery optimization type.</span></span> <span data-ttu-id="37a93-185">Enkele onderdelen op de CDN dat rechtstreeks helpt bij het leveren van media-elementen standaard.</span><span class="sxs-lookup"><span data-stu-id="37a93-185">A few features on the CDN directly assist in delivering media assets by default.</span></span>

### <a name="partial-cache-sharing"></a><span data-ttu-id="37a93-186">Gedeeltelijke cache delen</span><span class="sxs-lookup"><span data-stu-id="37a93-186">Partial cache sharing</span></span>

<span data-ttu-id="37a93-187">Gedeeltelijke cache delen, kunt de CDN deels in cache opgeslagen inhoud naar nieuwe aanvragen bedienen.</span><span class="sxs-lookup"><span data-stu-id="37a93-187">Partial cache sharing allows the CDN to serve partially cached content to new requests.</span></span> <span data-ttu-id="37a93-188">Bijvoorbeeld, als het eerste verzoek bij de CDN in een cache ontbreekt resulteert, wordt de aanvraag verzonden naar de oorsprong.</span><span class="sxs-lookup"><span data-stu-id="37a93-188">For example, if the first request to the CDN results in a cache miss, the request is sent to the origin.</span></span> <span data-ttu-id="37a93-189">Hoewel deze onvolledige inhoud in de cache CDN is geladen, kunnen andere aanvragen naar de CDN beginnen met deze gegevens ophalen.</span><span class="sxs-lookup"><span data-stu-id="37a93-189">Although this incomplete content is loaded into the CDN cache, other requests to the CDN can start getting this data.</span></span> 

### <a name="cache-fill-wait-time"></a><span data-ttu-id="37a93-190">Cache opvulling wachttijd</span><span class="sxs-lookup"><span data-stu-id="37a93-190">Cache fill wait time</span></span>

 <span data-ttu-id="37a93-191">De cachefunctie opvulling wacht tijd zorgt ervoor dat de edge-server voor het opslaan van alle volgende aanvragen voor dezelfde resource pas HTTP-antwoordheaders op de bronserver binnenkomen.</span><span class="sxs-lookup"><span data-stu-id="37a93-191">The cache fill wait time feature forces the edge server to hold any subsequent requests for the same resource until HTTP response headers arrive from the origin server.</span></span> <span data-ttu-id="37a93-192">Als HTTP-antwoordheaders vanuit de oorsprong plaatsvinden voordat de timer verloopt, worden alle aanvragen die in de wachtstand plaatsen zijn buiten de groeiende cache geleverd.</span><span class="sxs-lookup"><span data-stu-id="37a93-192">If HTTP response headers from the origin  arrive before the timer expires, all requests that were put on hold are served out of the growing cache.</span></span> <span data-ttu-id="37a93-193">Op hetzelfde moment wordt de cache gevuld door de gegevens van de oorsprong.</span><span class="sxs-lookup"><span data-stu-id="37a93-193">At the same time, the cache is filled by data from the origin.</span></span> <span data-ttu-id="37a93-194">De wachttijd van cache opvulling is standaard ingesteld op 3000 milliseconden.</span><span class="sxs-lookup"><span data-stu-id="37a93-194">By default, the cache fill wait time is set to 3,000 milliseconds.</span></span> 

