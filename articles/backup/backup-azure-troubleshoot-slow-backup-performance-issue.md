---
title: Problemen met trage back-up van bestanden en mappen in Azure Backup | Microsoft Docs
description: Biedt richtlijnen voor probleemoplossing waarmee u de oorzaak van de Azure Backup prestatieproblemen analyseren
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 1688846957df3fbf0df747a6cd2a94b481d851b4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="fb3ca-103">Problemen met langzame back-ups van bestanden en mappen in Azure Backup</span><span class="sxs-lookup"><span data-stu-id="fb3ca-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="fb3ca-104">Dit artikel bevat richtlijnen voor probleemoplossing voor het vaststellen van de oorzaak van trage prestaties van back-up voor bestanden en mappen wanneer u Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-104">This article provides troubleshooting guidance to help you diagnose the cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="fb3ca-105">Wanneer u de Azure Backup agent back-up van bestanden gebruikt, is het back-upproces duurt langer dan verwacht.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-105">When you use the Azure Backup agent to back up files, the backup process might take longer than expected.</span></span> <span data-ttu-id="fb3ca-106">Deze vertraging kan worden veroorzaakt door een of meer van de volgende opties:</span><span class="sxs-lookup"><span data-stu-id="fb3ca-106">This delay might be caused by one or more of the following:</span></span>

* [<span data-ttu-id="fb3ca-107">Er zijn knelpunten op de computer die wordt back-up.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-107">There are performance bottlenecks on the computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="fb3ca-108">Een ander proces of anti-virussoftware is interactie aangaan met het Azure Backup-proces.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-108">Another process or antivirus software is interfering with the Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="fb3ca-109">De backup-agent wordt uitgevoerd op Azure een virtuele machine (VM).</span><span class="sxs-lookup"><span data-stu-id="fb3ca-109">The Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="fb3ca-110">U een back-up van een groot aantal (miljoenen) bestanden.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="fb3ca-111">Voordat u begint met het oplossen van problemen, het is raadzaam dat u downloadt en installeert de [meest recente Azure backup-agent](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="fb3ca-111">Before you start troubleshooting issues, we recommend that you download and install the [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="fb3ca-112">We aanbrengen regelmatig updates in de backup-agent op verschillende problemen oplossen en de prestaties verbeteren onderdelen toevoegen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-112">We make frequent updates to the Backup agent to fix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="fb3ca-113">Ook wordt aangeraden u wordt aangeraden de [Veelgestelde vragen over Azure Backup-service](backup-azure-backup-faq.md) om ervoor te zorgen dat u een van de algemene configuratiekwesties niet ondervindt.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-113">We also strongly recommend that you review the [Azure Backup service FAQ](backup-azure-backup-faq.md) to make sure you're not experiencing any of the common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-the-computer"></a><span data-ttu-id="fb3ca-114">Oorzaak: Prestatieknelpunten op de computer</span><span class="sxs-lookup"><span data-stu-id="fb3ca-114">Cause: Performance bottlenecks on the computer</span></span>
<span data-ttu-id="fb3ca-115">Knelpunten op de computer die wordt back-up kunnen leiden tot vertragingen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-115">Bottlenecks on the computer that's being backed up can cause delays.</span></span> <span data-ttu-id="fb3ca-116">De computer de mogelijkheid om te lezen of schrijven naar schijf of de beschikbare bandbreedte om gegevens te verzenden via het netwerk, kan bijvoorbeeld knelpunten veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-116">For example, the computer's ability to read or write to disk, or available bandwidth to send data over the network, can cause bottlenecks.</span></span>

<span data-ttu-id="fb3ca-117">Windows biedt een ingebouwde functie die wordt aangeroepen [Prestatiemeter](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) voor het detecteren van deze knelpunten.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) to detect these bottlenecks.</span></span>

<span data-ttu-id="fb3ca-118">Hier volgen enkele prestatiemeteritems en de bereiken die handig zijn bij het oplossen van knelpunten voor optimale back-ups zijn.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="fb3ca-119">Prestatiemeteritems</span><span class="sxs-lookup"><span data-stu-id="fb3ca-119">Counter</span></span> | <span data-ttu-id="fb3ca-120">Status</span><span class="sxs-lookup"><span data-stu-id="fb3ca-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="fb3ca-121">Logische schijf (fysieke schijf)--% inactief</span><span class="sxs-lookup"><span data-stu-id="fb3ca-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="fb3ca-122">• 100% inactief op 50% inactief goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-122">• 100% idle to 50% idle = Healthy</span></span></br><span data-ttu-id="fb3ca-123">• 49% 20% inactief inactief = Monitor of waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-123">• 49% idle to 20% idle = Warning or Monitor</span></span></br><span data-ttu-id="fb3ca-124">• 19% inactief op 0% inactief essentiële of buiten Spec =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-124">• 19% idle to 0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="fb3ca-125">Logische schijf (fysieke schijf)--% gem.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-125">Logical Disk(Physical Disk)--%Avg.</span></span> <span data-ttu-id="fb3ca-126">Schijf per seconde lezen of schrijven</span><span class="sxs-lookup"><span data-stu-id="fb3ca-126">Disk Sec Read or Write</span></span> |<span data-ttu-id="fb3ca-127">• 0,001 ms 0.015 MS goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-127">• 0.001 ms to 0.015 ms  = Healthy</span></span></br><span data-ttu-id="fb3ca-128">• 0.015 ms 0.025 MS = Monitor of waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-128">• 0.015 ms to 0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="fb3ca-129">• 0.026 ms of meer = essentiële of buiten Spec</span><span class="sxs-lookup"><span data-stu-id="fb3ca-129">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="fb3ca-130">Logische schijf (fysieke schijf)--huidige wachtrijlengte voor schijf (voor alle exemplaren)</span><span class="sxs-lookup"><span data-stu-id="fb3ca-130">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="fb3ca-131">80 aanvragen voor meer dan 6 minuten</span><span class="sxs-lookup"><span data-stu-id="fb3ca-131">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="fb3ca-132">Geheugen--niet wisselbaar geheugen: Bytes</span><span class="sxs-lookup"><span data-stu-id="fb3ca-132">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="fb3ca-133">• Minder dan 60% van de groep verbruikt goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-133">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="fb3ca-134">• 61% tot 80% van de groep verbruikt = Monitor of waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-134">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="fb3ca-135">• Groter zijn dan 80% groep verbruikt essentiële of buiten Spec =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-135">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="fb3ca-136">Geheugen - wisselbaar geheugen: Bytes</span><span class="sxs-lookup"><span data-stu-id="fb3ca-136">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="fb3ca-137">• Minder dan 60% van de groep verbruikt goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-137">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="fb3ca-138">• 61% tot 80% van de groep verbruikt = Monitor of waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-138">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="fb3ca-139">• Groter zijn dan 80% groep verbruikt essentiële of buiten Spec =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-139">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="fb3ca-140">Geheugen: beschikbare Megabytes</span><span class="sxs-lookup"><span data-stu-id="fb3ca-140">Memory--Available Megabytes</span></span> |<span data-ttu-id="fb3ca-141">• 50% van het beschikbare geheugen beschikbaar of meer goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-141">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="fb3ca-142">• 25% van het beschikbare geheugen beschikbaar = Monitor</span><span class="sxs-lookup"><span data-stu-id="fb3ca-142">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="fb3ca-143">• 10% van het beschikbare geheugen beschikbaar = waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-143">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="fb3ca-144">• Minder dan 100 MB of 5% van het beschikbare geheugen beschikbaar essentiële of buiten Spec =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-144">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="fb3ca-145">Processor--\%processortijd (alle exemplaren)</span><span class="sxs-lookup"><span data-stu-id="fb3ca-145">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="fb3ca-146">• Minder dan 60% verbruikt goed =</span><span class="sxs-lookup"><span data-stu-id="fb3ca-146">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="fb3ca-147">• 61% tot 90% verbruikt = Monitor of waarschuwing</span><span class="sxs-lookup"><span data-stu-id="fb3ca-147">• 61% to 90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="fb3ca-148">• 91 tot 100% verbruikt = kritiek</span><span class="sxs-lookup"><span data-stu-id="fb3ca-148">• 91% to 100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="fb3ca-149">Als u vaststelt dat de infrastructuur de stackpad is, wordt u aangeraden de schijven voor betere prestaties regelmatig te defragmenteren.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-149">If you determine that the infrastructure is the culprit, we recommend that you defragment the disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="fb3ca-150">Oorzaak: Een ander proces of antivirussoftware interactie aangaan met Azure Backup</span><span class="sxs-lookup"><span data-stu-id="fb3ca-150">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="fb3ca-151">We hebt enkele exemplaren waar andere processen in het Windows-systeem een negatieve invloed is op prestaties van het proces van Azure Backup agent gezien.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-151">We've seen several instances where other processes in the Windows system have negatively affected performance of the Azure Backup agent process.</span></span> <span data-ttu-id="fb3ca-152">Als u de Azure Backup agent en een ander programma back-up kunt gebruiken, of als antivirussoftware wordt uitgevoerd en bestanden naar een back-up heeft vergrendeld, het veelvoud wordt vergrendeld op kunnen bestanden conflicten veroorzaken.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-152">For example, if you use both the Azure Backup agent and another program to back up data, or if antivirus software is running and has a lock on files to be backed up, the multiple locks on files might cause contention.</span></span> <span data-ttu-id="fb3ca-153">In dit geval is, mislukken de back-up of de taak duurt langer dan verwacht.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-153">In this situation, the backup might fail, or the job might take longer than expected.</span></span>

<span data-ttu-id="fb3ca-154">De aanbeveling in dit scenario is het back-upprogramma om te zien of de back-uptijd voor de Azure Backup agent verandert uitschakelen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-154">The best recommendation in this scenario is to turn off the other backup program to see whether the backup time for the Azure Backup agent changes.</span></span> <span data-ttu-id="fb3ca-155">Om ervoor te zorgen dat meerdere back-uptaken niet worden uitgevoerd op hetzelfde moment is meestal voldoende om te voorkomen dat ze elkaar beïnvloeden.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-155">Usually, making sure that multiple backup jobs are not running at the same time is sufficient to prevent them from affecting each other.</span></span>

<span data-ttu-id="fb3ca-156">Antivirusprogramma's, wordt u aangeraden dat u de volgende bestanden en locaties uitsluiten:</span><span class="sxs-lookup"><span data-stu-id="fb3ca-156">For antivirus programs, we recommend that you exclude the following files and locations:</span></span>

* <span data-ttu-id="fb3ca-157">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe als een proces</span><span class="sxs-lookup"><span data-stu-id="fb3ca-157">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="fb3ca-158">C:\Program Files\Microsoft Azure Recovery Services Agent\ mappen</span><span class="sxs-lookup"><span data-stu-id="fb3ca-158">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="fb3ca-159">Locatie scratchruimte (als u niet de standaard locatie)</span><span class="sxs-lookup"><span data-stu-id="fb3ca-159">Scratch location (if you're not using the standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="fb3ca-160">Oorzaak: Back-up-agent wordt uitgevoerd op een virtuele machine van Azure</span><span class="sxs-lookup"><span data-stu-id="fb3ca-160">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="fb3ca-161">Als u de backup-agent op een virtuele machine uitvoert, worden prestaties langzamer dan wanneer u deze op een fysieke computer uitvoert.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-161">If you're running the Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="fb3ca-162">Dit is normaal door beperkingen van de IOPS.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-162">This is expected due to IOPS limitations.</span></span>  <span data-ttu-id="fb3ca-163">U kunt echter de prestaties optimaliseren door het overschakelen van de schijven die zijn wordt een back-up naar Azure Premium-opslag.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-163">However, you can optimize the performance by switching the data drives that are being backed up to Azure Premium Storage.</span></span> <span data-ttu-id="fb3ca-164">We proberen op het oplossen van dit probleem en de oplossing is beschikbaar in een toekomstige release.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-164">We're working on fixing this issue, and the fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="fb3ca-165">Oorzaak: Back-ups van een groot aantal (miljoenen) bestanden</span><span class="sxs-lookup"><span data-stu-id="fb3ca-165">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="fb3ca-166">Het verplaatsen van een grote hoeveelheid gegevens duurt langer dan het verplaatsen van een kleinere hoeveelheid gegevens.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-166">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="fb3ca-167">In sommige gevallen is back-up gerelateerd aan niet alleen de grootte van de gegevens, maar het aantal bestanden of mappen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-167">In some cases, backup time is related to not only the size of the data, but also the number of files or folders.</span></span> <span data-ttu-id="fb3ca-168">Dit geldt vooral als miljoenen kleine bestanden (enkele bytes aan enkele kilobytes) wordt een back-up.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-168">This is especially true when millions of small files (a few bytes to a few kilobytes) are being backed up.</span></span>

<span data-ttu-id="fb3ca-169">Dit probleem treedt op omdat terwijl u een back-up van de gegevens en verplaatsen naar Azure, Azure uw bestanden tegelijkertijd is gecatalogiseerd.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-169">This behavior occurs because while you're backing up the data and moving it to Azure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="fb3ca-170">In sommige zeldzame gevallen kan de catalogusbewerking duurt mogelijk langer dan verwacht.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-170">In some rare scenarios, the catalog operation might take longer than expected.</span></span>

<span data-ttu-id="fb3ca-171">Aan de hand van de volgende indicatoren kunnen u het knelpunt begrijpen en dienovereenkomstig werken op de volgende stappen:</span><span class="sxs-lookup"><span data-stu-id="fb3ca-171">The following indicators can help you understand the bottleneck and accordingly work on the next steps:</span></span>

* <span data-ttu-id="fb3ca-172">**Gebruikersinterface voortgang wordt weergegeven voor de gegevensoverdracht**.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-172">**UI is showing progress for the data transfer**.</span></span> <span data-ttu-id="fb3ca-173">De gegevens wordt nog steeds overgedragen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-173">The data is still being transferred.</span></span> <span data-ttu-id="fb3ca-174">De netwerkbandbreedte of de grootte van gegevens kan worden veroorzaakt door vertragingen.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-174">The network bandwidth or the size of data might be causing delays.</span></span>
* <span data-ttu-id="fb3ca-175">**Gebruikersinterface niet voortgang wordt weergegeven voor de gegevensoverdracht**.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-175">**UI is not showing progress for the data transfer**.</span></span> <span data-ttu-id="fb3ca-176">Open de logboeken die zich bevindt op C:\Microsoft Azure Recovery Services Agent\Temp en controleer of de vermelding FileProvider::EndData in de logboeken.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-176">Open the logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for the FileProvider::EndData entry in the logs.</span></span> <span data-ttu-id="fb3ca-177">Deze vermelding geeft aan dat de gegevensoverdracht voltooid en de catalogusbewerking er gebeurt.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-177">This entry signifies that the data transfer finished and the catalog operation is happening.</span></span> <span data-ttu-id="fb3ca-178">De back-uptaken niet worden geannuleerd.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-178">Don't cancel the backup jobs.</span></span> <span data-ttu-id="fb3ca-179">In plaats daarvan wachten nog even voor de catalogusbewerking te voltooien.</span><span class="sxs-lookup"><span data-stu-id="fb3ca-179">Instead, wait a little longer for the catalog operation to finish.</span></span> <span data-ttu-id="fb3ca-180">Als het probleem zich blijft voordoen, neem dan contact op met [ondersteuning van Azure](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="fb3ca-180">If the problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
