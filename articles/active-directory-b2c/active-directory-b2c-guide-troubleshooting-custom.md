---
title: 'Azure Active Directory B2C: Aangepaste beleidsproblemen oplossen | Microsoft Docs'
description: Meer informatie over benaderingen toosolving fouten bij het werken met aangepaste beleidsregels in Azure Active Directory.
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/07/2017
ms.author: joroja
ms.openlocfilehash: b9e1b46df1ddb29cdb90953e4a0d6f1dd085441f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-azure-ad-b2c-custom-policies-and-identity-experience-framework"></a><span data-ttu-id="ed7f1-103">Problemen oplossen met Azure AD B2C aangepaste beleidsregels en identiteit ervaring Framework</span><span class="sxs-lookup"><span data-stu-id="ed7f1-103">Troubleshoot Azure AD B2C custom policies and Identity Experience Framework</span></span>

<span data-ttu-id="ed7f1-104">Als u gebruikmaakt van Azure Active Directory B2C (Azure AD B2C) aangepast beleid, kunt u uitdagingen Hallo identiteit ondervinden Framework in het XML-indeling van de beleid-taal instellen tegenkomen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-104">If you use Azure Active Directory B2C (Azure AD B2C) custom policies, you might experience challenges setting up hello Identity Experience Framework in its policy language XML format.</span></span>  <span data-ttu-id="ed7f1-105">Learning toowrite aangepaste beleidsregels kunnen worden zoals leren werken met een andere taal.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-105">Learning toowrite custom policies can be like learning a new language.</span></span> <span data-ttu-id="ed7f1-106">In dit artikel beschreven tools en tips waarmee u kunnen snel opsporen en oplossen van problemen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-106">In this article, we describe tools and tips that can help you quickly discover and resolve issues.</span></span> 

> [!NOTE]
> <span data-ttu-id="ed7f1-107">Dit artikel is gericht op de configuratie van uw Azure AD B2C aangepast beleid voor het oplossen van problemen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-107">This article focuses on troubleshooting your Azure AD B2C custom policy configuration.</span></span> <span data-ttu-id="ed7f1-108">Het adres Hallo relying party-toepassing of een identity-bibliotheek niet.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-108">It doesn't address hello relying party application or its identity library.</span></span>

## <a name="xml-editing"></a><span data-ttu-id="ed7f1-109">XML-bewerken</span><span class="sxs-lookup"><span data-stu-id="ed7f1-109">XML editing</span></span>

<span data-ttu-id="ed7f1-110">Hallo meest voorkomende fout bij het instellen van een aangepast beleid is niet goed opgemaakt XML.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-110">hello most common error in setting up custom policies is improperly formatted XML.</span></span> <span data-ttu-id="ed7f1-111">Er is een goede XML-editor bijna essentieel.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-111">A good XML editor is nearly essential.</span></span> <span data-ttu-id="ed7f1-112">Een goede XML-editor XML systeemeigen wordt weergegeven, gekleurd inhoud prefills algemene voorwaarden, houdt XML-elementen die zijn geïndexeerd en kunt valideren met schema.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-112">A good XML editor displays XML natively, color-codes content, prefills common terms, keeps XML elements indexed, and can validate with schema.</span></span> <span data-ttu-id="ed7f1-113">Hier vindt u twee van onze favoriete XML-editors:</span><span class="sxs-lookup"><span data-stu-id="ed7f1-113">Here are two of our favorite XML editors:</span></span>

* [<span data-ttu-id="ed7f1-114">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="ed7f1-114">Visual Studio Code</span></span>](https://code.visualstudio.com/)
* [<span data-ttu-id="ed7f1-115">Kladblok ++</span><span class="sxs-lookup"><span data-stu-id="ed7f1-115">Notepad++</span></span>](https://notepad-plus-plus.org/)

<span data-ttu-id="ed7f1-116">XML-schemavalidatie identificeert fouten voordat u uw XML-bestand uploaden.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-116">XML schema validation identifies errors before you upload your XML file.</span></span> <span data-ttu-id="ed7f1-117">In de hoofdmap van Hallo starter pack Hallo Hallo XML-schemadefinitie TrustFrameworkPolicy_0.3.0.0.xsd worden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-117">In hello root folder of hello starter pack, get hello XML schema definition TrustFrameworkPolicy_0.3.0.0.xsd.</span></span> <span data-ttu-id="ed7f1-118">Voor meer informatie in de documentatie van uw XML-editor Hallo zoekt *XML-hulpprogramma's* en *XML-validatie*.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-118">For more information, in hello documentation of your XML editor, look for *XML tools* and *XML validation*.</span></span>

<span data-ttu-id="ed7f1-119">Mogelijk vindt u een overzicht van XML-regels handig zijn.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-119">You might find a review of XML rules helpful.</span></span> <span data-ttu-id="ed7f1-120">Azure AD B2C wordt geweigerd eventuele XML opmaakfouten die worden gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-120">Azure AD B2C rejects any XML formatting errors that it detects.</span></span> <span data-ttu-id="ed7f1-121">In sommige gevallen kan een onjuiste indeling XML mogelijk foutberichten die misleidend zijn.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-121">Occasionally, incorrectly formatted XML might cause error messages that are misleading.</span></span>

## <a name="upload-policies-and-policy-validation"></a><span data-ttu-id="ed7f1-122">Beleid en de validatie van het uploaden</span><span class="sxs-lookup"><span data-stu-id="ed7f1-122">Upload policies and policy validation</span></span>

 <span data-ttu-id="ed7f1-123">XML-bestand uploaden validatie is automatisch.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-123">XML file upload validation is automatic.</span></span> <span data-ttu-id="ed7f1-124">De meeste fouten veroorzaken Hallo uploaden toofail.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-124">Most errors cause hello upload toofail.</span></span> <span data-ttu-id="ed7f1-125">Validatie omvat Hallo beleidsbestand dat u uploadt.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-125">Validation includes hello policy file that you are uploading.</span></span> <span data-ttu-id="ed7f1-126">Dit omvat ook Hallo keten van bestanden Hallo uploadbestand te verwijst (Hallo relying party beleidsbestand, Hallo uitbreidingen en base Hallo-bestand).</span><span class="sxs-lookup"><span data-stu-id="ed7f1-126">It also includes hello chain of files hello upload file refers too(hello relying party policy file, hello extensions file, and hello base file).</span></span> 
 
 <span data-ttu-id="ed7f1-127">Algemene validatiefouten bevatten Hallo volgende.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-127">Common validation errors include hello following.</span></span>

<span data-ttu-id="ed7f1-128">Fout-fragment:`... makes a reference tooClaimType with id "displaName" but neither hello policy nor any of its base policies contain such an element`</span><span class="sxs-lookup"><span data-stu-id="ed7f1-128">Error snippet: `... makes a reference tooClaimType with id "displaName" but neither hello policy nor any of its base policies contain such an element`</span></span>
* <span data-ttu-id="ed7f1-129">Hallo ClaimType waarde kan worden getypt of bestaat niet in het Hallo-schema.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-129">hello ClaimType value might be misspelled, or does not exist in hello schema.</span></span>
* <span data-ttu-id="ed7f1-130">ClaimType waarden moeten ten minste één Hallo-bestanden in het Hallo-beleid worden gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-130">ClaimType values must be defined in at least one of hello files in hello policy.</span></span> 
    <span data-ttu-id="ed7f1-131">Bijvoorbeeld: ` <ClaimType Id="socialIdpUserId">`</span><span class="sxs-lookup"><span data-stu-id="ed7f1-131">For example: ` <ClaimType Id="socialIdpUserId">`</span></span>
* <span data-ttu-id="ed7f1-132">Als ClaimType in Hallo extensiebestand is gedefinieerd, maar kan ook worden gebruikt in een waarde TechnicalProfile in base Hallo-bestand, base Hallo-bestand uploadt in een fout resulteert.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-132">If ClaimType is defined in hello extensions file, but it's also used in a TechnicalProfile value in hello base file, uploading hello base file results in an error.</span></span>

<span data-ttu-id="ed7f1-133">Fout-fragment:`...makes a reference tooa ClaimsTransformation with id...`</span><span class="sxs-lookup"><span data-stu-id="ed7f1-133">Error snippet: `...makes a reference tooa ClaimsTransformation with id...`</span></span>
* <span data-ttu-id="ed7f1-134">Hallo oorzaken voor Hallo fout mogelijk worden Hallo dezelfde als voor Hallo ClaimType fout.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-134">hello causes for hello error might be hello same as for hello ClaimType error.</span></span>

<span data-ttu-id="ed7f1-135">Fout-fragment:`Reason: User is currently logged as a user of 'yourtenant.onmicrosoft.com' tenant. In order toomanage 'yourtenant.onmicrosoft.com', please login as a user of 'yourtenant.onmicrosoft.com' tenant`</span><span class="sxs-lookup"><span data-stu-id="ed7f1-135">Error snippet: `Reason: User is currently logged as a user of 'yourtenant.onmicrosoft.com' tenant. In order toomanage 'yourtenant.onmicrosoft.com', please login as a user of 'yourtenant.onmicrosoft.com' tenant`</span></span>
* <span data-ttu-id="ed7f1-136">Controleer dat Hallo TenantId waarde in Hallo  **\<TrustFrameworkPolicy\>**  en  **\<BasePolicy\>**  elementen overeen met het doel-Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-136">Check that hello TenantId value in hello **\<TrustFrameworkPolicy\>** and **\<BasePolicy\>** elements match your target Azure AD B2C tenant.</span></span>  

## <a name="troubleshoot-hello-runtime"></a><span data-ttu-id="ed7f1-137">Hallo runtime oplossen</span><span class="sxs-lookup"><span data-stu-id="ed7f1-137">Troubleshoot hello runtime</span></span>

* <span data-ttu-id="ed7f1-138">Gebruik `Run Now` en `https://jwt.io` tootest uw beleid onafhankelijk van uw web- of mobiele toepassing.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-138">Use `Run Now` and `https://jwt.io` tootest your policies independently of your web or mobile application.</span></span> <span data-ttu-id="ed7f1-139">Deze website fungeert als een relying party-toepassing.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-139">This website acts like a relying party application.</span></span> <span data-ttu-id="ed7f1-140">Hallo inhoud Hallo JSON Web Token (JWT) die wordt gegenereerd door het beleid van uw Azure AD B2C wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-140">It displays hello contents of hello JSON Web Token (JWT) that is generated by your Azure AD B2C policy.</span></span> <span data-ttu-id="ed7f1-141">toocreate een testtoepassing in identiteit ervaring Framework, gebruik Hallo volgende waarden:</span><span class="sxs-lookup"><span data-stu-id="ed7f1-141">toocreate a test application in Identity Experience Framework, use hello following values:</span></span>
    * <span data-ttu-id="ed7f1-142">Naam: TestApp</span><span class="sxs-lookup"><span data-stu-id="ed7f1-142">Name: TestApp</span></span>
    * <span data-ttu-id="ed7f1-143">Web-App of Web-API: Nee</span><span class="sxs-lookup"><span data-stu-id="ed7f1-143">Web App/Web API: No</span></span>
    * <span data-ttu-id="ed7f1-144">Native client: Nee</span><span class="sxs-lookup"><span data-stu-id="ed7f1-144">Native client: No</span></span>

* <span data-ttu-id="ed7f1-145">tootrace hello uitwisseling van berichten tussen de clientbrowser en de Azure AD B2C, gebruik [Fiddler](http://www.telerik.com/fiddler).</span><span class="sxs-lookup"><span data-stu-id="ed7f1-145">tootrace hello exchange of messages between your client browser and Azure AD B2C, use [Fiddler](http://www.telerik.com/fiddler).</span></span> <span data-ttu-id="ed7f1-146">Dit kunt u een indicatie van waar de gebruiker reis in stappen van de orchestration kan niet ophalen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-146">It can help you get an indication of where your user journey is failing in your orchestration steps.</span></span>

* <span data-ttu-id="ed7f1-147">In **Ontwikkelingsmodus**, gebruik **Application Insights** tootrace Hallo activiteit van uw identiteit ervaring Framework gebruiker reis.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-147">In **Development mode**, use **Application Insights** tootrace hello activity of your Identity Experience Framework user journey.</span></span> <span data-ttu-id="ed7f1-148">In **Ontwikkelingsmodus**, ziet u Hallo uitwisseling van claims tussen Hallo identiteit ervaring Framework en hello verschillende claims providers die zijn gedefinieerd door technische profielen, zoals id-providers, op basis van een API-services Hello Azure AD B2C-gebruikerslijst en andere services, zoals Azure meerdere-multi-factor-verificatie.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-148">In **Development mode**, you can observe hello exchange of claims between hello Identity Experience Framework and hello various claims providers that are defined by technical profiles, such as identity providers, API-based services, hello Azure AD B2C user directory, and other services, like Azure Multi-Factor-Authentication.</span></span>  

## <a name="recommended-practices"></a><span data-ttu-id="ed7f1-149">Aanbevolen procedures</span><span class="sxs-lookup"><span data-stu-id="ed7f1-149">Recommended practices</span></span>

<span data-ttu-id="ed7f1-150">**Houd meerdere versies van uw scenario's. Ze te groeperen in een project met uw toepassing.**</span><span class="sxs-lookup"><span data-stu-id="ed7f1-150">**Keep multiple versions of your scenarios. Group them in a project with your application.**</span></span> <span data-ttu-id="ed7f1-151">Hallo base, uitbreidingen en relying party-bestanden zijn rechtstreeks van elkaar afhankelijk.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-151">hello base, extensions, and relying party files are directly dependent on each other.</span></span> <span data-ttu-id="ed7f1-152">Opslaan als een groep.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-152">Save them as a group.</span></span> <span data-ttu-id="ed7f1-153">Als nieuwe functies worden tooyour beleid toegevoegd, kunt u afzonderlijke werkende versies bewaren.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-153">As new features are added tooyour policies, keep separate working versions.</span></span> <span data-ttu-id="ed7f1-154">Fase werkende versies in uw eigen bestandssysteem met ze met communiceren de Hallo toepassingscode.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-154">Stage working versions in your own file system with hello application code they interact with.</span></span>  <span data-ttu-id="ed7f1-155">Uw toepassingen mogelijk veel verschillende relying party beleidsregels in een tenant worden aangeroepen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-155">Your applications might invoke many different relying party policies in a tenant.</span></span> <span data-ttu-id="ed7f1-156">Deze is mogelijk afhankelijk van het Hallo-claims die ze van uw Azure AD B2C-beleid verwachten.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-156">They might become dependent on hello claims that they expect from your Azure AD B2C policies.</span></span>

<span data-ttu-id="ed7f1-157">**Ontwikkelen en testen van technische profielen met bekende gebruikers reizen.**</span><span class="sxs-lookup"><span data-stu-id="ed7f1-157">**Develop and test technical profiles with known user journeys.**</span></span> <span data-ttu-id="ed7f1-158">Geteste starter pack beleid tooset van uw technische profielen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-158">Use tested starter pack policies tooset up your technical profiles.</span></span> <span data-ttu-id="ed7f1-159">Ze afzonderlijk testen voordat u ze in uw eigen trajecten gebruiker opnemen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-159">Test them separately before you incorporate them into your own user journeys.</span></span>

<span data-ttu-id="ed7f1-160">**Ontwikkelen en testen van de gebruiker trajecten met geteste technische profielen.**</span><span class="sxs-lookup"><span data-stu-id="ed7f1-160">**Develop and test user journeys with tested technical profiles.**</span></span> <span data-ttu-id="ed7f1-161">Hallo indelingsstappen van een gebruiker reis incrementeel wijzigen.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-161">Change hello orchestration steps of a user journey incrementally.</span></span> <span data-ttu-id="ed7f1-162">Geleidelijk bouw uw beoogde scenario's.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-162">Progressively build your intended scenarios.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ed7f1-163">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ed7f1-163">Next steps</span></span>

* <span data-ttu-id="ed7f1-164">Download Hallo [active-directory-b2c-custom-policy-starterpack] (https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) ZIP-bestand in GitHub.</span><span class="sxs-lookup"><span data-stu-id="ed7f1-164">In GitHub, download hello [active-directory-b2c-custom-policy-starterpack] (https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) .zip file.</span></span>
