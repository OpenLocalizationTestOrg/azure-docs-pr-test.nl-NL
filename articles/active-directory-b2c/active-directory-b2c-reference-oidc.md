---
title: Web-aanmelden met OpenID Connect - Azure AD B2C | Microsoft Docs
description: Maken van webtoepassingen met behulp van de Azure Active Directory-implementatie van het OpenID Connect-verificatieprotocol
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="001a5-103">Azure Active Directory B2C: Web aanmelden met OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="001a5-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="001a5-104">OpenID Connect is een protocol voor verificatie, gebouwd op OAuth 2.0, die kunnen worden gebruikt voor het veilig Meld u aan gebruikers met webtoepassingen.</span><span class="sxs-lookup"><span data-stu-id="001a5-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="001a5-105">Met behulp van de Azure Active Directory B2C (Azure AD B2C)-implementatie van OpenID Connect, u kunt uitbesteden registreren, aanmelden en andere identiteitsbeheer in uw webtoepassingen met Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="001a5-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="001a5-106">Deze handleiding wordt beschreven hoe u dit doet op een manier taalonafhankelijke.</span><span class="sxs-lookup"><span data-stu-id="001a5-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="001a5-107">Wordt beschreven hoe u berichten verzenden en ontvangen HTTP zonder gebruik van een van onze open source-bibliotheken.</span><span class="sxs-lookup"><span data-stu-id="001a5-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="001a5-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) breidt het OAuth 2.0 *autorisatie* protocol voor gebruik als een *verificatie* protocol.</span><span class="sxs-lookup"><span data-stu-id="001a5-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="001a5-109">Hiermee kunt u eenmalige aanmelding met behulp van OAuth uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="001a5-110">Dit introduceert het concept van een *token ID*, dit is een beveiligingstoken waarmee de client de identiteit van de gebruiker en basisprofiel informatie verkrijgen over de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="001a5-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="001a5-111">Omdat het OAuth 2.0 uitbreidt, kunt u eveneens apps veilig verkrijgen *toegang tot tokens*.</span><span class="sxs-lookup"><span data-stu-id="001a5-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="001a5-112">U kunt access_tokens voor toegang tot bronnen die zijn beveiligd met een [autorisatie server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="001a5-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="001a5-113">Het is raadzaam OpenID Connect als u een webtoepassing die wordt gehost op een server en is toegankelijk via een browser maakt.</span><span class="sxs-lookup"><span data-stu-id="001a5-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="001a5-114">Als u Identiteitsbeheer toevoegen aan uw mobiele of bureaubladtoepassingen toepassingen wilt met behulp van Azure AD B2C, moet u [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) in plaats van het OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="001a5-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="001a5-115">Azure AD B2C breidt het OpenID Connect-standaardprotocol hiervoor meer dan een eenvoudige verificatie en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="001a5-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="001a5-116">Het geeft de [Beleidsparameter](active-directory-b2c-reference-policies.md), waardoor u OpenID Connect gebruiken om toe te voegen gebruikerservaringen--zoals aanmelden, aanmelden en Profielbeheer--aan uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="001a5-117">Hier wordt beschreven hoe u OpenID Connect en beleidsregels gebruiken om elk van deze ervaringen te implementeren in uw webtoepassingen.</span><span class="sxs-lookup"><span data-stu-id="001a5-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="001a5-118">Ook ziet u hoe toegangstokens ophalen voor toegang tot web-API's.</span><span class="sxs-lookup"><span data-stu-id="001a5-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="001a5-119">De voorbeeld-HTTP-aanvragen in de volgende sectie Gebruik onze voorbeeld B2C-directory, fabrikamb2c.onmicrosoft.com, evenals onze voorbeeldtoepassing https://aadb2cplayground.azurewebsites.net en beleidsregels.</span><span class="sxs-lookup"><span data-stu-id="001a5-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="001a5-120">U kunt gratis uitproberen de aanvragen zelf met behulp van deze waarden, of kunt u deze vervangen door uw eigen.</span><span class="sxs-lookup"><span data-stu-id="001a5-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="001a5-121">Meer informatie over hoe [ophalen van uw eigen B2C-tenant-, toepassings- en beleid](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="001a5-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="001a5-122">Verificatieaanvragen verzenden</span><span class="sxs-lookup"><span data-stu-id="001a5-122">Send authentication requests</span></span>
<span data-ttu-id="001a5-123">Wanneer uw web-app moet de gebruiker verifiëren en uitvoeren van een beleid, de gebruiker kan worden doorgestuurd de `/authorize` eindpunt.</span><span class="sxs-lookup"><span data-stu-id="001a5-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="001a5-124">Dit is het interactieve gedeelte van de stroom waarin de gebruiker wordt optreden, afhankelijk van het beleid.</span><span class="sxs-lookup"><span data-stu-id="001a5-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="001a5-125">In deze aanvraag, de client geeft aan de machtigingen die nodig zijn voor het verkrijgen van de gebruiker in de `scope` parameter en het beleid uit te voeren de `p` parameter.</span><span class="sxs-lookup"><span data-stu-id="001a5-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="001a5-126">Drie voorbeelden vindt u in de volgende secties (met regeleinden voor leesbaarheid), elk met een ander beleid.</span><span class="sxs-lookup"><span data-stu-id="001a5-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="001a5-127">Voor een idee krijgen hoe elke aanvraag werkt, probeer de aanvraag in een browser te plakken en het uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="001a5-128">Een beleid voor aanmelden gebruiken</span><span class="sxs-lookup"><span data-stu-id="001a5-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="001a5-129">Een registratiebeleid gebruiken</span><span class="sxs-lookup"><span data-stu-id="001a5-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="001a5-130">Gebruik van een beleid voor het profiel bewerken</span><span class="sxs-lookup"><span data-stu-id="001a5-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="001a5-131">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-131">Parameter</span></span> | <span data-ttu-id="001a5-132">Vereist?</span><span class="sxs-lookup"><span data-stu-id="001a5-132">Required?</span></span> | <span data-ttu-id="001a5-133">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="001a5-134">client_id</span><span class="sxs-lookup"><span data-stu-id="001a5-134">client_id</span></span> |<span data-ttu-id="001a5-135">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-135">Required</span></span> |<span data-ttu-id="001a5-136">De aanvraag-ID die de [Azure-portal](https://portal.azure.com/) toegewezen aan uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="001a5-137">response_type</span><span class="sxs-lookup"><span data-stu-id="001a5-137">response_type</span></span> |<span data-ttu-id="001a5-138">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-138">Required</span></span> |<span data-ttu-id="001a5-139">Het antwoordtype die een token ID voor het OpenID Connect moet bevatten.</span><span class="sxs-lookup"><span data-stu-id="001a5-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="001a5-140">Als uw web-app ook tokens moet voor het aanroepen van een web-API, kunt u `code+id_token`, zoals we hier hebt gedaan.</span><span class="sxs-lookup"><span data-stu-id="001a5-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="001a5-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="001a5-141">redirect_uri</span></span> |<span data-ttu-id="001a5-142">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-142">Recommended</span></span> |<span data-ttu-id="001a5-143">De `redirect_uri` parameter van uw app, waarbij verificatie reacties kunnen worden verzonden en ontvangen door uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="001a5-144">Deze moet exact overeenkomen met een van de `redirect_uri` parameters die u in de portal hebt geregistreerd, behalve dat het moet een URL zijn gecodeerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="001a5-145">Bereik</span><span class="sxs-lookup"><span data-stu-id="001a5-145">scope</span></span> |<span data-ttu-id="001a5-146">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-146">Required</span></span> |<span data-ttu-id="001a5-147">Een door spaties gescheiden lijst met bereiken.</span><span class="sxs-lookup"><span data-stu-id="001a5-147">A space-separated list of scopes.</span></span> <span data-ttu-id="001a5-148">Een waarde op één scope geeft u aan Azure AD beide machtigingen die worden aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="001a5-149">De `openid` bereik geeft aan dat een machtiging voor het aanmelden van de gebruiker en gegevens over de gebruiker in de vorm van een ID-tokens (later meer op deze later in dit artikel) ophalen.</span><span class="sxs-lookup"><span data-stu-id="001a5-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="001a5-150">De `offline_access` bereik is optioneel voor web-apps.</span><span class="sxs-lookup"><span data-stu-id="001a5-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="001a5-151">Hiermee wordt aangegeven dat uw app moet een *vernieuwingstoken* voor lange levensduur hebben toegang tot bronnen.</span><span class="sxs-lookup"><span data-stu-id="001a5-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="001a5-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="001a5-152">response_mode</span></span> |<span data-ttu-id="001a5-153">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-153">Recommended</span></span> |<span data-ttu-id="001a5-154">De methode die moet worden gebruikt voor het verzenden van de resulterende autorisatiecode terug naar uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="001a5-155">Het kan zijn `query`, `form_post`, of `fragment`.</span><span class="sxs-lookup"><span data-stu-id="001a5-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="001a5-156">De `form_post` antwoord-modus wordt aanbevolen voor de beste beveiliging.</span><span class="sxs-lookup"><span data-stu-id="001a5-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="001a5-157">state</span><span class="sxs-lookup"><span data-stu-id="001a5-157">state</span></span> |<span data-ttu-id="001a5-158">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-158">Recommended</span></span> |<span data-ttu-id="001a5-159">Een waarde die is opgenomen in de aanvraag die ook in het token antwoord wordt geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="001a5-160">Een tekenreeks van inhoud die u wilt dat kan zijn.</span><span class="sxs-lookup"><span data-stu-id="001a5-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="001a5-161">Een willekeurig gegenereerde unieke waarde wordt doorgaans gebruikt voor het voorkomen van aanvraagvervalsing op meerdere sites aanvallen.</span><span class="sxs-lookup"><span data-stu-id="001a5-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="001a5-162">De status wordt ook gebruikt voor het coderen van informatie over de status van de gebruiker in de app voordat het verificatieverzoek opgetreden, zoals de pagina die ze op waren.</span><span class="sxs-lookup"><span data-stu-id="001a5-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="001a5-163">nonce</span><span class="sxs-lookup"><span data-stu-id="001a5-163">nonce</span></span> |<span data-ttu-id="001a5-164">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-164">Required</span></span> |<span data-ttu-id="001a5-165">Een waarde die is opgenomen in de aanvraag (gegenereerd door de app) die wordt opgenomen in het resulterende token ID als een claim.</span><span class="sxs-lookup"><span data-stu-id="001a5-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="001a5-166">De app kunt vervolgens controleren of deze waarde om te beperken token replay-aanvallen.</span><span class="sxs-lookup"><span data-stu-id="001a5-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="001a5-167">De waarde is doorgaans een willekeurige unieke tekenreeks die kan worden gebruikt voor het identificeren van de oorsprong van de aanvraag.</span><span class="sxs-lookup"><span data-stu-id="001a5-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="001a5-168">P</span><span class="sxs-lookup"><span data-stu-id="001a5-168">p</span></span> |<span data-ttu-id="001a5-169">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-169">Required</span></span> |<span data-ttu-id="001a5-170">Het beleid dat wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-170">The policy that will be executed.</span></span> <span data-ttu-id="001a5-171">Dit is de naam van een beleid dat is gemaakt in uw B2C-tenant.</span><span class="sxs-lookup"><span data-stu-id="001a5-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="001a5-172">De waarde van de beleid-naam moet beginnen met `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="001a5-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="001a5-173">Meer informatie over het beleid en de [uitbreidbaar beleidsframework](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="001a5-174">prompt</span><span class="sxs-lookup"><span data-stu-id="001a5-174">prompt</span></span> |<span data-ttu-id="001a5-175">Optioneel</span><span class="sxs-lookup"><span data-stu-id="001a5-175">Optional</span></span> |<span data-ttu-id="001a5-176">Het type van de interactie van de gebruiker die is vereist.</span><span class="sxs-lookup"><span data-stu-id="001a5-176">The type of user interaction that is required.</span></span> <span data-ttu-id="001a5-177">De enige geldige waarde op dit moment is `login`, waardoor gebruikers hun referenties invoeren voor deze aanvraag.</span><span class="sxs-lookup"><span data-stu-id="001a5-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="001a5-178">Eenmalige aanmelding wordt pas van kracht.</span><span class="sxs-lookup"><span data-stu-id="001a5-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="001a5-179">Op dit moment wordt de gebruiker gevraagd om de werkstroom van het beleid te voltooien.</span><span class="sxs-lookup"><span data-stu-id="001a5-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="001a5-180">Dit kan hebben betrekking op de gebruiker invoeren van hun gebruikersnaam en wachtwoord, aanmelden met een sociale identiteit aanmelden voor de map of een andere aantal stappen, afhankelijk van hoe het beleid wordt gedefinieerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="001a5-181">Nadat de gebruiker het beleid voltooit, Azure AD retourneert een antwoord aan uw app op de aangegeven `redirect_uri` parameter met de methode die is opgegeven in de `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="001a5-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="001a5-182">Het antwoord is hetzelfde voor elk van de bovenstaande gevallen, onafhankelijk van het beleid dat wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="001a5-183">Een geslaagde reactie met `response_mode=fragment` eruit als:</span><span class="sxs-lookup"><span data-stu-id="001a5-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="001a5-184">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-184">Parameter</span></span> | <span data-ttu-id="001a5-185">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-186">id_token</span><span class="sxs-lookup"><span data-stu-id="001a5-186">id_token</span></span> |<span data-ttu-id="001a5-187">Het token ID die de app wordt aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-187">The ID token that the app requested.</span></span> <span data-ttu-id="001a5-188">U kunt het token ID gebruiken om te controleren van de identiteit van de gebruiker en beginnen met een sessie met de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="001a5-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="001a5-189">Meer informatie over het ID-tokens en de inhoud ervan zijn opgenomen in de [Azure AD B2C tokenverwijzing](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="001a5-190">code</span><span class="sxs-lookup"><span data-stu-id="001a5-190">code</span></span> |<span data-ttu-id="001a5-191">De autorisatiecode dat de app is aangevraagd, als u hebt gebruikt `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="001a5-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="001a5-192">De app kunt u de autorisatiecode gebruiken om aan te vragen van een toegangstoken voor een doelbron.</span><span class="sxs-lookup"><span data-stu-id="001a5-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="001a5-193">Autorisatiecodes zijn zeer tijdelijke.</span><span class="sxs-lookup"><span data-stu-id="001a5-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="001a5-194">Normaal gesproken verlopen ze na ongeveer 10 minuten.</span><span class="sxs-lookup"><span data-stu-id="001a5-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="001a5-195">state</span><span class="sxs-lookup"><span data-stu-id="001a5-195">state</span></span> |<span data-ttu-id="001a5-196">Als een `state` parameter is opgenomen in de aanvraag dezelfde waarde moet worden weergegeven in het antwoord.</span><span class="sxs-lookup"><span data-stu-id="001a5-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="001a5-197">De app moet controleren of de `state` waarden in de aanvraag en antwoord identiek zijn.</span><span class="sxs-lookup"><span data-stu-id="001a5-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="001a5-198">Foutberichten kunnen ook worden verzonden naar de `redirect_uri` parameter zodat de app ze op de juiste wijze kan verwerken:</span><span class="sxs-lookup"><span data-stu-id="001a5-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="001a5-199">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-199">Parameter</span></span> | <span data-ttu-id="001a5-200">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-201">error</span><span class="sxs-lookup"><span data-stu-id="001a5-201">error</span></span> |<span data-ttu-id="001a5-202">Een tekenreeks foutcode die kan worden gebruikt voor het classificeren van typen fouten die optreden en die kunnen worden gebruikt om te reageren op fouten.</span><span class="sxs-lookup"><span data-stu-id="001a5-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="001a5-203">error_description</span><span class="sxs-lookup"><span data-stu-id="001a5-203">error_description</span></span> |<span data-ttu-id="001a5-204">Een specifieke foutbericht dat een ontwikkelaar kan helpen de hoofdoorzaak van een verificatiefout identificeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="001a5-205">state</span><span class="sxs-lookup"><span data-stu-id="001a5-205">state</span></span> |<span data-ttu-id="001a5-206">Zie de volledige beschrijving van de eerste tabel in deze sectie.</span><span class="sxs-lookup"><span data-stu-id="001a5-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="001a5-207">Als een `state` parameter is opgenomen in de aanvraag dezelfde waarde moet worden weergegeven in het antwoord.</span><span class="sxs-lookup"><span data-stu-id="001a5-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="001a5-208">De app moet controleren of de `state` waarden in de aanvraag en antwoord identiek zijn.</span><span class="sxs-lookup"><span data-stu-id="001a5-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="001a5-209">Het token ID valideren</span><span class="sxs-lookup"><span data-stu-id="001a5-209">Validate the ID token</span></span>
<span data-ttu-id="001a5-210">Zojuist hebt ontvangen van een token ID is niet voldoende om de gebruiker te verifiëren.</span><span class="sxs-lookup"><span data-stu-id="001a5-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="001a5-211">U moet de handtekening van het token ID valideren en controleer of de claims in het token per vereisten van uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="001a5-212">Maakt gebruik van Azure AD B2C [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) en cryptografie met openbare sleutels voor het ondertekenen van tokens en controleren of ze geldig zijn.</span><span class="sxs-lookup"><span data-stu-id="001a5-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="001a5-213">Er zijn veel open source-bibliotheken die beschikbaar zijn voor het valideren van JWTs, afhankelijk van de taal van voorkeur.</span><span class="sxs-lookup"><span data-stu-id="001a5-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="001a5-214">U wordt aangeraden deze opties verkennen in plaats van uw eigen validatielogica implementeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="001a5-215">De informatie hier erg nuttig zijn in hoe de die bibliotheken niet normaal kunnen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="001a5-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="001a5-216">Azure AD B2C heeft een eindpunt OpenID Connect metagegevens waarmee een app voor het ophalen van informatie over Azure AD B2C tijdens runtime.</span><span class="sxs-lookup"><span data-stu-id="001a5-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="001a5-217">Deze informatie omvat eindpunten, inhoud van tokens en token-ondertekening sleutels.</span><span class="sxs-lookup"><span data-stu-id="001a5-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="001a5-218">Er is een JSON-metagegevens-document voor elk beleid in uw B2C-tenant.</span><span class="sxs-lookup"><span data-stu-id="001a5-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="001a5-219">Het metagegevensdocument voor de `b2c_1_sign_in` beleid in `fabrikamb2c.onmicrosoft.com` bevindt zich op:</span><span class="sxs-lookup"><span data-stu-id="001a5-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="001a5-220">Een van de eigenschappen van dit document configuratie is `jwks_uri`, waarvan de waarde voor hetzelfde beleid zou worden:</span><span class="sxs-lookup"><span data-stu-id="001a5-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="001a5-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="001a5-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="001a5-222">Om te bepalen welk beleid is gebruikt in een ID voor ondertekening van token (en waar de metagegevens ophalen), hebt u twee opties.</span><span class="sxs-lookup"><span data-stu-id="001a5-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="001a5-223">Eerst de naam van het beleid is opgenomen in de `acr` claim in het token ID.</span><span class="sxs-lookup"><span data-stu-id="001a5-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="001a5-224">Zie voor informatie over het parseren van de claims van een token ID, de [Azure AD B2C tokenverwijzing](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="001a5-225">De andere optie is voor het coderen van het beleid in de waarde van de `state` parameter wanneer u de aanvraag en vervolgens worden ontsleuteld om te bepalen welk beleid wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="001a5-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="001a5-226">Beide methoden is geldig.</span><span class="sxs-lookup"><span data-stu-id="001a5-226">Either method is valid.</span></span>

<span data-ttu-id="001a5-227">Nadat u het metagegevensdocument van het eindpunt van de metagegevens OpenID Connect hebt aangeschaft, kunt u de openbare RSA-256-sleutels (die zich op dit eindpunt) gebruiken om de handtekening van het token ID te valideren.</span><span class="sxs-lookup"><span data-stu-id="001a5-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="001a5-228">Er is mogelijk meerdere sleutels die aan dit eindpunt op elk gewenst moment worden vermeld in de tijd die u kunt herkennen door een `kid` claim.</span><span class="sxs-lookup"><span data-stu-id="001a5-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="001a5-229">De koptekst van het token ID bevat ook een `kid` claim, waarmee wordt aangegeven welke van deze sleutels is gebruikt voor het ondertekenen van het token ID.</span><span class="sxs-lookup"><span data-stu-id="001a5-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="001a5-230">Zie voor meer informatie de [Azure AD B2C tokenverwijzing](active-directory-b2c-reference-tokens.md) (het gedeelte [valideren van tokens](active-directory-b2c-reference-tokens.md#token-validation), met name).</span><span class="sxs-lookup"><span data-stu-id="001a5-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="001a5-231">Nadat u hebt geverifieerd dat de handtekening van het token ID, zijn er verschillende claims die u nodig hebt om te controleren.</span><span class="sxs-lookup"><span data-stu-id="001a5-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="001a5-232">Bijvoorbeeld:</span><span class="sxs-lookup"><span data-stu-id="001a5-232">For instance:</span></span>

* <span data-ttu-id="001a5-233">U moet controleren of de `nonce` claim om token replayaanvallen te voorkomen.</span><span class="sxs-lookup"><span data-stu-id="001a5-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="001a5-234">De waarde moet zijn opgegeven in de aanvraag aanmelden.</span><span class="sxs-lookup"><span data-stu-id="001a5-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="001a5-235">U moet controleren of de `aud` claim om ervoor te zorgen dat het ID-token is uitgegeven voor uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="001a5-236">De waarde moet de toepassings-ID van uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="001a5-237">U moet controleren of de `iat` en `exp` claims om ervoor te zorgen dat het token ID niet is verlopen.</span><span class="sxs-lookup"><span data-stu-id="001a5-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="001a5-238">Er zijn ook enkele meer validaties die moeten worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="001a5-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="001a5-239">Deze worden beschreven in de [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  U kunt ook aanvullende verklaren, afhankelijk van uw scenario.</span><span class="sxs-lookup"><span data-stu-id="001a5-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="001a5-240">Sommige algemene validaties zijn onder andere:</span><span class="sxs-lookup"><span data-stu-id="001a5-240">Some common validations include:</span></span>

* <span data-ttu-id="001a5-241">Ervoor zorgen dat/organisatie van de gebruiker heeft aangemeld voor de app.</span><span class="sxs-lookup"><span data-stu-id="001a5-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="001a5-242">Ervoor te zorgen dat de gebruiker de juiste autorisatie/bevoegdheden heeft.</span><span class="sxs-lookup"><span data-stu-id="001a5-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="001a5-243">Ervoor zorgen dat een bepaalde sterkte van verificatie heeft plaatsgevonden, zoals Azure multi-factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="001a5-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="001a5-244">Zie voor meer informatie over de claims in een token ID, de [Azure AD B2C tokenverwijzing](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="001a5-245">Nadat u hebt het token ID gevalideerd, kunt u beginnen met een sessie met de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="001a5-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="001a5-246">U kunt de claims in het token ID gebruiken om informatie te verkrijgen over de gebruiker in uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="001a5-247">Gebruikt voor deze gegevens omvatten weergeven, records en autorisatie.</span><span class="sxs-lookup"><span data-stu-id="001a5-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="001a5-248">Een token ophalen</span><span class="sxs-lookup"><span data-stu-id="001a5-248">Get a token</span></span>
<span data-ttu-id="001a5-249">Als u uw web-app beleidsregels alleen worden uitgevoerd moet, kunt u de volgende secties overslaan.</span><span class="sxs-lookup"><span data-stu-id="001a5-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="001a5-250">Deze secties zijn alleen van toepassing op web-apps die u wilt maken, geverifieerde aanroepen naar een web-API en zijn ook beveiligd door Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="001a5-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="001a5-251">U kunt gebruikmaken van de autorisatiecode die u hebt verkregen (met behulp van `response_type=code+id_token`) voor een token op de gewenste resource door te sturen een `POST` aanvraag voor de `/token` eindpunt.</span><span class="sxs-lookup"><span data-stu-id="001a5-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="001a5-252">De enige bron die u kunt een token voor aanvragen is op dit moment uw web-API van de back-end in de app.</span><span class="sxs-lookup"><span data-stu-id="001a5-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="001a5-253">De overeenkomst voor het aanvragen van een token aan uzelf is het gebruik van uw app client-ID als het bereik:</span><span class="sxs-lookup"><span data-stu-id="001a5-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="001a5-254">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-254">Parameter</span></span> | <span data-ttu-id="001a5-255">Vereist?</span><span class="sxs-lookup"><span data-stu-id="001a5-255">Required?</span></span> | <span data-ttu-id="001a5-256">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="001a5-257">P</span><span class="sxs-lookup"><span data-stu-id="001a5-257">p</span></span> |<span data-ttu-id="001a5-258">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-258">Required</span></span> |<span data-ttu-id="001a5-259">Het beleid dat is gebruikt voor het ophalen van de autorisatiecode.</span><span class="sxs-lookup"><span data-stu-id="001a5-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="001a5-260">U kunt een ander beleid niet gebruiken in deze aanvraag.</span><span class="sxs-lookup"><span data-stu-id="001a5-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="001a5-261">Opmerking dat u deze parameter toevoegen aan de query-tekenreeks niet op de `POST` hoofdtekst.</span><span class="sxs-lookup"><span data-stu-id="001a5-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="001a5-262">client_id</span><span class="sxs-lookup"><span data-stu-id="001a5-262">client_id</span></span> |<span data-ttu-id="001a5-263">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-263">Required</span></span> |<span data-ttu-id="001a5-264">De aanvraag-ID die de [Azure-portal](https://portal.azure.com/) toegewezen aan uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="001a5-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="001a5-265">grant_type</span></span> |<span data-ttu-id="001a5-266">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-266">Required</span></span> |<span data-ttu-id="001a5-267">Het type grant moet `authorization_code` voor de autorisatiecodestroom.</span><span class="sxs-lookup"><span data-stu-id="001a5-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="001a5-268">Bereik</span><span class="sxs-lookup"><span data-stu-id="001a5-268">scope</span></span> |<span data-ttu-id="001a5-269">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-269">Recommended</span></span> |<span data-ttu-id="001a5-270">Een door spaties gescheiden lijst met bereiken.</span><span class="sxs-lookup"><span data-stu-id="001a5-270">A space-separated list of scopes.</span></span> <span data-ttu-id="001a5-271">Een waarde op één scope geeft u aan Azure AD beide machtigingen die worden aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="001a5-272">De `openid` bereik geeft aan dat een machtiging voor het aanmelden van de gebruiker en gegevens over de gebruiker in de vorm van id_token parameters ophalen.</span><span class="sxs-lookup"><span data-stu-id="001a5-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="001a5-273">Het kan worden gebruikt om op te halen van tokens, voor uw app eigen back-end web-API, die wordt vertegenwoordigd door dezelfde toepassings-ID als de client.</span><span class="sxs-lookup"><span data-stu-id="001a5-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="001a5-274">De `offline_access` bereik geeft aan dat uw app een vernieuwingstoken voor lange levensduur hebben toegang tot bronnen nodig.</span><span class="sxs-lookup"><span data-stu-id="001a5-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="001a5-275">code</span><span class="sxs-lookup"><span data-stu-id="001a5-275">code</span></span> |<span data-ttu-id="001a5-276">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-276">Required</span></span> |<span data-ttu-id="001a5-277">De autorisatiecode die u hebt verkregen in de eerste zijde van de stroom.</span><span class="sxs-lookup"><span data-stu-id="001a5-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="001a5-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="001a5-278">redirect_uri</span></span> |<span data-ttu-id="001a5-279">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-279">Required</span></span> |<span data-ttu-id="001a5-280">De `redirect_uri` parameter van de toepassing waarin u de autorisatiecode ontvangen.</span><span class="sxs-lookup"><span data-stu-id="001a5-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="001a5-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="001a5-281">client_secret</span></span> |<span data-ttu-id="001a5-282">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-282">Required</span></span> |<span data-ttu-id="001a5-283">De toepassingsgeheim dat u hebt gegenereerd in de [Azure-portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="001a5-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="001a5-284">Deze toepassing geheime sleutel is een belangrijke beveiligingsupdate artefact.</span><span class="sxs-lookup"><span data-stu-id="001a5-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="001a5-285">U moet het veilig opslaan op uw server.</span><span class="sxs-lookup"><span data-stu-id="001a5-285">You should store it securely on your server.</span></span> <span data-ttu-id="001a5-286">U moet ook deze clientgeheim periodiek draaien.</span><span class="sxs-lookup"><span data-stu-id="001a5-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="001a5-287">Een geslaagde reactie token ziet eruit als:</span><span class="sxs-lookup"><span data-stu-id="001a5-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="001a5-288">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-288">Parameter</span></span> | <span data-ttu-id="001a5-289">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-290">not_before</span><span class="sxs-lookup"><span data-stu-id="001a5-290">not_before</span></span> |<span data-ttu-id="001a5-291">De tijd waarop het token wordt beschouwd als geldige epoche tijdstip.</span><span class="sxs-lookup"><span data-stu-id="001a5-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="001a5-292">token_type</span><span class="sxs-lookup"><span data-stu-id="001a5-292">token_type</span></span> |<span data-ttu-id="001a5-293">De waarde van het type token.</span><span class="sxs-lookup"><span data-stu-id="001a5-293">The token type value.</span></span> <span data-ttu-id="001a5-294">Het enige type dat ondersteunt Azure AD is `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="001a5-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="001a5-295">access_token</span><span class="sxs-lookup"><span data-stu-id="001a5-295">access_token</span></span> |<span data-ttu-id="001a5-296">De ondertekende JWT-token dat u hebt aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="001a5-297">Bereik</span><span class="sxs-lookup"><span data-stu-id="001a5-297">scope</span></span> |<span data-ttu-id="001a5-298">De scopes waarvoor het token geldig is.</span><span class="sxs-lookup"><span data-stu-id="001a5-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="001a5-299">Deze kunnen worden gebruikt voor het opslaan van tokens voor later gebruik.</span><span class="sxs-lookup"><span data-stu-id="001a5-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="001a5-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="001a5-300">expires_in</span></span> |<span data-ttu-id="001a5-301">De lengte van de tijd die het toegangstoken ongeldig (in seconden is).</span><span class="sxs-lookup"><span data-stu-id="001a5-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="001a5-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="001a5-302">refresh_token</span></span> |<span data-ttu-id="001a5-303">Een OAuth 2.0-vernieuwingstoken.</span><span class="sxs-lookup"><span data-stu-id="001a5-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="001a5-304">De app kunt dit token gebruiken om aanvullende tokens verkrijgen nadat het huidige token is verlopen.</span><span class="sxs-lookup"><span data-stu-id="001a5-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="001a5-305">Vernieuwen van tokens worden lange levensduur hebben en kunnen worden gebruikt voor toegang tot bronnen voor langere tijd te behouden.</span><span class="sxs-lookup"><span data-stu-id="001a5-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="001a5-306">Raadpleeg voor meer informatie de [B2C tokenverwijzing](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="001a5-307">U moet hebben gebruikt het bereik `offline_access` voor de verificatie- en aanvragen voor beveiligingstokens kunnen een vernieuwingstoken dat is ontvangen.</span><span class="sxs-lookup"><span data-stu-id="001a5-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="001a5-308">Foutberichten ziet er als:</span><span class="sxs-lookup"><span data-stu-id="001a5-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="001a5-309">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-309">Parameter</span></span> | <span data-ttu-id="001a5-310">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-311">error</span><span class="sxs-lookup"><span data-stu-id="001a5-311">error</span></span> |<span data-ttu-id="001a5-312">Een tekenreeks foutcode die kan worden gebruikt voor het classificeren van typen fouten die optreden en die kunnen worden gebruikt om te reageren op fouten.</span><span class="sxs-lookup"><span data-stu-id="001a5-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="001a5-313">error_description</span><span class="sxs-lookup"><span data-stu-id="001a5-313">error_description</span></span> |<span data-ttu-id="001a5-314">Een specifieke foutbericht dat een ontwikkelaar kan helpen de hoofdoorzaak van een verificatiefout identificeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="001a5-315">Gebruik het token</span><span class="sxs-lookup"><span data-stu-id="001a5-315">Use the token</span></span>
<span data-ttu-id="001a5-316">Nu dat u hebt een toegangstoken is verkregen, kunt u het token in aanvragen naar uw back-end web-API's door te nemen in de `Authorization` header:</span><span class="sxs-lookup"><span data-stu-id="001a5-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="001a5-317">Het token vernieuwen</span><span class="sxs-lookup"><span data-stu-id="001a5-317">Refresh the token</span></span>
<span data-ttu-id="001a5-318">ID-tokens zijn tijdelijke.</span><span class="sxs-lookup"><span data-stu-id="001a5-318">ID tokens are short-lived.</span></span> <span data-ttu-id="001a5-319">U moet ze vernieuwen nadat ze zijn verlopen om door te gaan wordt toegang tot bronnen.</span><span class="sxs-lookup"><span data-stu-id="001a5-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="001a5-320">U kunt dit doen door het indienen van een andere `POST` aanvraag voor de `/token` eindpunt.</span><span class="sxs-lookup"><span data-stu-id="001a5-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="001a5-321">Deze tijd bieden de `refresh_token` parameter in plaats van de `code` parameter:</span><span class="sxs-lookup"><span data-stu-id="001a5-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="001a5-322">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-322">Parameter</span></span> | <span data-ttu-id="001a5-323">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-323">Required</span></span> | <span data-ttu-id="001a5-324">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="001a5-325">P</span><span class="sxs-lookup"><span data-stu-id="001a5-325">p</span></span> |<span data-ttu-id="001a5-326">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-326">Required</span></span> |<span data-ttu-id="001a5-327">Het beleid dat is gebruikt voor het verkrijgen van het oorspronkelijke vernieuwingstoken.</span><span class="sxs-lookup"><span data-stu-id="001a5-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="001a5-328">U kunt een ander beleid niet gebruiken in deze aanvraag.</span><span class="sxs-lookup"><span data-stu-id="001a5-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="001a5-329">Houd er rekening mee dat u deze parameter aan de queryreeks, niet aan de POST-instantie toevoegt.</span><span class="sxs-lookup"><span data-stu-id="001a5-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="001a5-330">client_id</span><span class="sxs-lookup"><span data-stu-id="001a5-330">client_id</span></span> |<span data-ttu-id="001a5-331">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-331">Required</span></span> |<span data-ttu-id="001a5-332">De aanvraag-ID die de [Azure-portal](https://portal.azure.com/) toegewezen aan uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="001a5-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="001a5-333">grant_type</span></span> |<span data-ttu-id="001a5-334">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-334">Required</span></span> |<span data-ttu-id="001a5-335">Het type toekennen, die een vernieuwingstoken voor deze fase van de autorisatiecodestroom moet zijn.</span><span class="sxs-lookup"><span data-stu-id="001a5-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="001a5-336">Bereik</span><span class="sxs-lookup"><span data-stu-id="001a5-336">scope</span></span> |<span data-ttu-id="001a5-337">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-337">Recommended</span></span> |<span data-ttu-id="001a5-338">Een door spaties gescheiden lijst met bereiken.</span><span class="sxs-lookup"><span data-stu-id="001a5-338">A space-separated list of scopes.</span></span> <span data-ttu-id="001a5-339">Een waarde op één scope geeft u aan Azure AD beide machtigingen die worden aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="001a5-340">De `openid` bereik geeft aan dat een machtiging voor het aanmelden van de gebruiker en gegevens over de gebruiker in de vorm van een ID-tokens verkrijgen.</span><span class="sxs-lookup"><span data-stu-id="001a5-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="001a5-341">Het kan worden gebruikt om op te halen van tokens, voor uw app eigen back-end web-API, die wordt vertegenwoordigd door dezelfde toepassings-ID als de client.</span><span class="sxs-lookup"><span data-stu-id="001a5-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="001a5-342">De `offline_access` bereik geeft aan dat uw app een vernieuwingstoken voor lange levensduur hebben toegang tot bronnen nodig.</span><span class="sxs-lookup"><span data-stu-id="001a5-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="001a5-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="001a5-343">redirect_uri</span></span> |<span data-ttu-id="001a5-344">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-344">Recommended</span></span> |<span data-ttu-id="001a5-345">De `redirect_uri` parameter van de toepassing waarin u de autorisatiecode ontvangen.</span><span class="sxs-lookup"><span data-stu-id="001a5-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="001a5-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="001a5-346">refresh_token</span></span> |<span data-ttu-id="001a5-347">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-347">Required</span></span> |<span data-ttu-id="001a5-348">Het oorspronkelijke vernieuwingstoken die u hebt verkregen in de tweede fase van de stroom.</span><span class="sxs-lookup"><span data-stu-id="001a5-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="001a5-349">U moet hebben gebruikt het bereik `offline_access` voor de verificatie- en aanvragen voor beveiligingstokens kunnen een vernieuwingstoken dat is ontvangen.</span><span class="sxs-lookup"><span data-stu-id="001a5-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="001a5-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="001a5-350">client_secret</span></span> |<span data-ttu-id="001a5-351">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-351">Required</span></span> |<span data-ttu-id="001a5-352">De toepassingsgeheim dat u hebt gegenereerd in de [Azure-portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="001a5-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="001a5-353">Deze toepassing geheime sleutel is een belangrijke beveiligingsupdate artefact.</span><span class="sxs-lookup"><span data-stu-id="001a5-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="001a5-354">U moet het veilig opslaan op uw server.</span><span class="sxs-lookup"><span data-stu-id="001a5-354">You should store it securely on your server.</span></span> <span data-ttu-id="001a5-355">U moet ook deze clientgeheim periodiek draaien.</span><span class="sxs-lookup"><span data-stu-id="001a5-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="001a5-356">Een geslaagde reactie token ziet eruit als:</span><span class="sxs-lookup"><span data-stu-id="001a5-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="001a5-357">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-357">Parameter</span></span> | <span data-ttu-id="001a5-358">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-359">not_before</span><span class="sxs-lookup"><span data-stu-id="001a5-359">not_before</span></span> |<span data-ttu-id="001a5-360">De tijd waarop het token wordt beschouwd als geldige epoche tijdstip.</span><span class="sxs-lookup"><span data-stu-id="001a5-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="001a5-361">token_type</span><span class="sxs-lookup"><span data-stu-id="001a5-361">token_type</span></span> |<span data-ttu-id="001a5-362">De waarde van het type token.</span><span class="sxs-lookup"><span data-stu-id="001a5-362">The token type value.</span></span> <span data-ttu-id="001a5-363">Het enige type dat ondersteunt Azure AD is `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="001a5-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="001a5-364">access_token</span><span class="sxs-lookup"><span data-stu-id="001a5-364">access_token</span></span> |<span data-ttu-id="001a5-365">De ondertekende JWT-token dat u hebt aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="001a5-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="001a5-366">Bereik</span><span class="sxs-lookup"><span data-stu-id="001a5-366">scope</span></span> |<span data-ttu-id="001a5-367">Het bereik dat het token geldig is voor, die kan worden gebruikt voor het opslaan van tokens voor later gebruik.</span><span class="sxs-lookup"><span data-stu-id="001a5-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="001a5-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="001a5-368">expires_in</span></span> |<span data-ttu-id="001a5-369">De lengte van de tijd die het toegangstoken ongeldig (in seconden is).</span><span class="sxs-lookup"><span data-stu-id="001a5-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="001a5-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="001a5-370">refresh_token</span></span> |<span data-ttu-id="001a5-371">Een OAuth 2.0-vernieuwingstoken.</span><span class="sxs-lookup"><span data-stu-id="001a5-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="001a5-372">De app kunt dit token gebruiken om aanvullende tokens verkrijgen nadat het huidige token is verlopen.</span><span class="sxs-lookup"><span data-stu-id="001a5-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="001a5-373">Vernieuwen van tokens worden lange levensduur hebben en kunnen worden gebruikt voor toegang tot bronnen voor langere tijd te behouden.</span><span class="sxs-lookup"><span data-stu-id="001a5-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="001a5-374">Raadpleeg voor meer details over de [B2C tokenverwijzing](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="001a5-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="001a5-375">Foutberichten ziet er als:</span><span class="sxs-lookup"><span data-stu-id="001a5-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="001a5-376">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-376">Parameter</span></span> | <span data-ttu-id="001a5-377">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="001a5-378">error</span><span class="sxs-lookup"><span data-stu-id="001a5-378">error</span></span> |<span data-ttu-id="001a5-379">Een tekenreeks foutcode die kan worden gebruikt voor het classificeren van typen fouten die optreden en die kunnen worden gebruikt om te reageren op fouten.</span><span class="sxs-lookup"><span data-stu-id="001a5-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="001a5-380">error_description</span><span class="sxs-lookup"><span data-stu-id="001a5-380">error_description</span></span> |<span data-ttu-id="001a5-381">Een specifieke foutbericht dat een ontwikkelaar kan helpen de hoofdoorzaak van een verificatiefout identificeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="001a5-382">Afmelden aanvraag verzenden</span><span class="sxs-lookup"><span data-stu-id="001a5-382">Send a sign-out request</span></span>
<span data-ttu-id="001a5-383">Als u wilt dat de gebruiker buiten de app te melden, is het niet genoeg is voor het wissen van cookies of anderszins einde van uw app de sessie met de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="001a5-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="001a5-384">U moet de gebruiker ook omleiden naar Azure AD om af te melden. Als u dit niet doet, kan de gebruiker mogelijk om andere referenties voor uw app zonder hun referenties opnieuw invoeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="001a5-385">Dit komt doordat er een geldige eenmalige aanmelding sessie met Azure AD.</span><span class="sxs-lookup"><span data-stu-id="001a5-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="001a5-386">U kunt gewoon omleiden door de gebruiker de `end_session` eindpunt dat wordt weergegeven in het metagegevensdocument OpenID Connect eerder in de 'valideren van het token ID' sectie beschreven:</span><span class="sxs-lookup"><span data-stu-id="001a5-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="001a5-387">Parameter</span><span class="sxs-lookup"><span data-stu-id="001a5-387">Parameter</span></span> | <span data-ttu-id="001a5-388">Vereist?</span><span class="sxs-lookup"><span data-stu-id="001a5-388">Required?</span></span> | <span data-ttu-id="001a5-389">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="001a5-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="001a5-390">P</span><span class="sxs-lookup"><span data-stu-id="001a5-390">p</span></span> |<span data-ttu-id="001a5-391">Vereist</span><span class="sxs-lookup"><span data-stu-id="001a5-391">Required</span></span> |<span data-ttu-id="001a5-392">Het beleid dat u gebruiken wilt voor het ondertekenen van de gebruiker buiten uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="001a5-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="001a5-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="001a5-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="001a5-394">Aanbevolen</span><span class="sxs-lookup"><span data-stu-id="001a5-394">Recommended</span></span> |<span data-ttu-id="001a5-395">De URL die de gebruiker wordt omgeleid naar na geslaagde afmelding plaatsvindt. Als deze niet opgenomen is, Azure AD B2C ziet de gebruiker een algemeen foutbericht.</span><span class="sxs-lookup"><span data-stu-id="001a5-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="001a5-396">Hoewel het routeren van de gebruiker de `end_session` eindpunt enkele van de status van de gebruiker één aanmelding met Azure AD B2C wordt gewist, wordt de gebruiker buiten hun sessie sociale identity-provider (IDP) niet ondertekent.</span><span class="sxs-lookup"><span data-stu-id="001a5-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="001a5-397">Als de gebruiker de dezelfde IDP tijdens een volgende aanmelden selecteert, zal ze worden geverifieerd, zonder dat hun referenties invoeren.</span><span class="sxs-lookup"><span data-stu-id="001a5-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="001a5-398">Als een gebruiker wil te melden bij uw B2C-toepassing, betekent het niet noodzakelijkerwijs dat ze wilt afmelden bij hun account Facebook.</span><span class="sxs-lookup"><span data-stu-id="001a5-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="001a5-399">Echter, in het geval van lokale accounts de gebruikerssessie wordt beëindigd goed.</span><span class="sxs-lookup"><span data-stu-id="001a5-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="001a5-400">Gebruik uw eigen B2C-tenant</span><span class="sxs-lookup"><span data-stu-id="001a5-400">Use your own B2C tenant</span></span>
<span data-ttu-id="001a5-401">Als u proberen deze aanvragen voor uzelf wilt, moet u eerst deze drie stappen uitvoert en vervang de voorbeeldwaarden die hierboven worden beschreven, door uw eigen:</span><span class="sxs-lookup"><span data-stu-id="001a5-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="001a5-402">[Maken van een B2C-tenant](active-directory-b2c-get-started.md), en de naam van uw tenant te gebruiken in de aanvragen.</span><span class="sxs-lookup"><span data-stu-id="001a5-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="001a5-403">[Maken van een toepassing](active-directory-b2c-app-registration.md) verkrijgen van een toepassings-ID.</span><span class="sxs-lookup"><span data-stu-id="001a5-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="001a5-404">Een web-app of web-API opnemen in uw app.</span><span class="sxs-lookup"><span data-stu-id="001a5-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="001a5-405">Maak eventueel een toepassingsgeheim.</span><span class="sxs-lookup"><span data-stu-id="001a5-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="001a5-406">[Maken van uw beleid](active-directory-b2c-reference-policies.md) om op te halen van de beleidsnamen van uw.</span><span class="sxs-lookup"><span data-stu-id="001a5-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

