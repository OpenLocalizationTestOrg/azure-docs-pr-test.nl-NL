---
title: Netwerkbeveiligingsgroepen in Azure | Microsoft Docs
description: Leer hoe u de verkeersstroom binnen uw virtuele netwerken kunt isoleren en beheren met de gedistribueerde firewall in Azure met behulp van netwerkbeveiligingsgroepen.
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: fac6ee69b5f0377e0515ac9abeb28788cbef9b79
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/18/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="3884d-103">Netwerkverkeer filteren met netwerkbeveiligingsgroepen</span><span class="sxs-lookup"><span data-stu-id="3884d-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="3884d-104">Een netwerkbeveiligingsgroep (Network Security Group, NSG) bevat een lijst met beveiligingsregels waarmee netwerkverkeer naar resources die zijn verbonden met virtuele Azure-netwerken (VNet) wordt toegestaan of geweigerd.</span><span class="sxs-lookup"><span data-stu-id="3884d-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic to resources connected to Azure Virtual Networks (VNet).</span></span> <span data-ttu-id="3884d-105">NSG's kunnen worden gekoppeld aan subnetten, afzonderlijke virtuele machines (klassiek) of afzonderlijke netwerkinterfaces (NIC) die zijn gekoppeld aan VM’s (Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="3884d-105">NSGs can be associated to subnets, individual VMs (classic), or individual network interfaces (NIC) attached to VMs (Resource Manager).</span></span> <span data-ttu-id="3884d-106">Wanneer een NSG is gekoppeld aan een subnet, zijn de regels van toepassing op alle resources die zijn verbonden met het subnet.</span><span class="sxs-lookup"><span data-stu-id="3884d-106">When an NSG is associated to a subnet, the rules apply to all resources connected to the subnet.</span></span> <span data-ttu-id="3884d-107">Verkeer kan verder worden beperkt door ook een NSG te koppelen aan een VM of NIC.</span><span class="sxs-lookup"><span data-stu-id="3884d-107">Traffic can further be restricted by also associating an NSG to a VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="3884d-108">Azure heeft twee verschillende implementatiemodellen voor het maken van en werken met resources: [Resource Manager en het klassieke model](../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="3884d-109">In dit artikel komen beide modellen aan de orde, maar u wordt aangeraden voor de meeste nieuwe implementaties het Resource Manager-model te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3884d-109">This article covers using both models, but Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="3884d-110">NSG-resource</span><span class="sxs-lookup"><span data-stu-id="3884d-110">NSG resource</span></span>
<span data-ttu-id="3884d-111">NSG's bevatten de volgende eigenschappen:</span><span class="sxs-lookup"><span data-stu-id="3884d-111">NSGs contain the following properties:</span></span>

| <span data-ttu-id="3884d-112">Eigenschap</span><span class="sxs-lookup"><span data-stu-id="3884d-112">Property</span></span> | <span data-ttu-id="3884d-113">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="3884d-113">Description</span></span> | <span data-ttu-id="3884d-114">Beperkingen</span><span class="sxs-lookup"><span data-stu-id="3884d-114">Constraints</span></span> | <span data-ttu-id="3884d-115">Overwegingen</span><span class="sxs-lookup"><span data-stu-id="3884d-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="3884d-116">Naam</span><span class="sxs-lookup"><span data-stu-id="3884d-116">Name</span></span> |<span data-ttu-id="3884d-117">Naam voor de NSG</span><span class="sxs-lookup"><span data-stu-id="3884d-117">Name for the NSG</span></span> |<span data-ttu-id="3884d-118">Moet uniek zijn binnen de regio.</span><span class="sxs-lookup"><span data-stu-id="3884d-118">Must be unique within the region.</span></span><br/><span data-ttu-id="3884d-119">Kan letters, cijfers, onderstrepingstekens, punten en afbreekstreepjes bevatten.</span><span class="sxs-lookup"><span data-stu-id="3884d-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="3884d-120">Moet beginnen met een letter of cijfer.</span><span class="sxs-lookup"><span data-stu-id="3884d-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="3884d-121">Moet eindigen op een letter, cijfer of onderstrepingsteken.</span><span class="sxs-lookup"><span data-stu-id="3884d-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="3884d-122">Mag niet meer dan 80 tekens bevatten.</span><span class="sxs-lookup"><span data-stu-id="3884d-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="3884d-123">Omdat u mogelijk meerdere NSG's moet maken, is het raadzaam namen te gebruiken die aangeven wat het doel van de NSG is.</span><span class="sxs-lookup"><span data-stu-id="3884d-123">Since you may need to create several NSGs, make sure you have a naming convention that makes it easy to identify the function of your NSGs.</span></span> |
| <span data-ttu-id="3884d-124">Regio</span><span class="sxs-lookup"><span data-stu-id="3884d-124">Region</span></span> |<span data-ttu-id="3884d-125">Azure-[regio](https://azure.microsoft.com/regions) waar de NSG wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="3884d-125">Azure [region](https://azure.microsoft.com/regions) where the NSG is created.</span></span> |<span data-ttu-id="3884d-126">NSG's kunnen alleen worden gekoppeld aan resources binnen dezelfde regio als de NSG.</span><span class="sxs-lookup"><span data-stu-id="3884d-126">NSGs can only be associated to resources within the same region as the NSG.</span></span> |<span data-ttu-id="3884d-127">Voor meer informatie over hoeveel NSG's u per regio kunt hebben, leest u het artikel over [Azure-limieten](../azure-subscription-service-limits.md#virtual-networking-limits-classic).</span><span class="sxs-lookup"><span data-stu-id="3884d-127">To learn about how many NSGs you can have per region, read the [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="3884d-128">Resourcegroep</span><span class="sxs-lookup"><span data-stu-id="3884d-128">Resource group</span></span> |<span data-ttu-id="3884d-129">De [resourcegroep](../azure-resource-manager/resource-group-overview.md#resource-groups) waarin de NSG bestaat.</span><span class="sxs-lookup"><span data-stu-id="3884d-129">The [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) the NSG exists in.</span></span> |<span data-ttu-id="3884d-130">Hoewel een NSG bestaat in een resourcegroep, kan deze worden gekoppeld aan resources in elke willekeurige resourcegroep, mits de resource tot dezelfde Azure-regio als de NSG behoort.</span><span class="sxs-lookup"><span data-stu-id="3884d-130">Although an NSG exists in a resource group, it can be associated to resources in any resource group, as long as the resource is part of the same Azure region as the NSG.</span></span> |<span data-ttu-id="3884d-131">Resourcegroepen worden gebruikt voor het beheren van meerdere resources tegelijk, als een implementatie-eenheid.</span><span class="sxs-lookup"><span data-stu-id="3884d-131">Resource groups are used to manage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="3884d-132">U kunt de NSG desgewenst groeperen met resources waaraan deze is gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="3884d-132">You may consider grouping the NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="3884d-133">Regels</span><span class="sxs-lookup"><span data-stu-id="3884d-133">Rules</span></span> |<span data-ttu-id="3884d-134">Regels voor binnenkomend of uitgaand verkeer die bepalen welk verkeer wordt toegestaan of geweigerd.</span><span class="sxs-lookup"><span data-stu-id="3884d-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="3884d-135">Zie de sectie [NSG-regels](#Nsg-rules) in dit artikel.</span><span class="sxs-lookup"><span data-stu-id="3884d-135">See the [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="3884d-136">ACL's voor eindpunten en netwerkbeveiligingsgroepen worden niet ondersteund op een en hetzelfde VM-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="3884d-136">Endpoint-based ACLs and network security groups are not supported on the same VM instance.</span></span> <span data-ttu-id="3884d-137">Als u een NSG wilt gebruiken en er al een ACL voor eindpunten is geïmplementeerd, moet u eerst de ACL voor eindpunten verwijderen.</span><span class="sxs-lookup"><span data-stu-id="3884d-137">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="3884d-138">Voor informatie over het verwijderen van een ACL leest u het artikel [Toegangsbeheerlijsten (ACL's) voor eindpunten beheren met PowerShell](virtual-networks-acl-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-138">To learn how to remove an ACL, read the [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="3884d-139">NSG-regels</span><span class="sxs-lookup"><span data-stu-id="3884d-139">NSG rules</span></span>
<span data-ttu-id="3884d-140">NSG-regels bevatten de volgende eigenschappen:</span><span class="sxs-lookup"><span data-stu-id="3884d-140">NSG rules contain the following properties:</span></span>

| <span data-ttu-id="3884d-141">Eigenschap</span><span class="sxs-lookup"><span data-stu-id="3884d-141">Property</span></span> | <span data-ttu-id="3884d-142">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="3884d-142">Description</span></span> | <span data-ttu-id="3884d-143">Beperkingen</span><span class="sxs-lookup"><span data-stu-id="3884d-143">Constraints</span></span> | <span data-ttu-id="3884d-144">Overwegingen</span><span class="sxs-lookup"><span data-stu-id="3884d-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="3884d-145">**Naam**</span><span class="sxs-lookup"><span data-stu-id="3884d-145">**Name**</span></span> |<span data-ttu-id="3884d-146">Naam voor de regel.</span><span class="sxs-lookup"><span data-stu-id="3884d-146">Name for the rule.</span></span> |<span data-ttu-id="3884d-147">Moet uniek zijn binnen de regio.</span><span class="sxs-lookup"><span data-stu-id="3884d-147">Must be unique within the region.</span></span><br/><span data-ttu-id="3884d-148">Kan letters, cijfers, onderstrepingstekens, punten en afbreekstreepjes bevatten.</span><span class="sxs-lookup"><span data-stu-id="3884d-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="3884d-149">Moet beginnen met een letter of cijfer.</span><span class="sxs-lookup"><span data-stu-id="3884d-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="3884d-150">Moet eindigen op een letter, cijfer of onderstrepingsteken.</span><span class="sxs-lookup"><span data-stu-id="3884d-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="3884d-151">Mag niet meer dan 80 tekens bevatten.</span><span class="sxs-lookup"><span data-stu-id="3884d-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="3884d-152">U kunt meerdere regels binnen een NSG hebben, dus zorg ervoor dat u duidelijk herkenbare namen gebruikt die het doel van de regel aangeven.</span><span class="sxs-lookup"><span data-stu-id="3884d-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you to identify the function of your rule.</span></span> |
| <span data-ttu-id="3884d-153">**Protocol**</span><span class="sxs-lookup"><span data-stu-id="3884d-153">**Protocol**</span></span> |<span data-ttu-id="3884d-154">Protocol waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-154">Protocol to match for the rule.</span></span> |<span data-ttu-id="3884d-155">TCP, UDP of *</span><span class="sxs-lookup"><span data-stu-id="3884d-155">TCP, UDP, or *</span></span> |<span data-ttu-id="3884d-156">Als u * als protocol gebruikt, omvat dit zowel ICMP (alleen oost-west-verkeer), als UDP en TCP en hebt u wellicht minder regels nodig.</span><span class="sxs-lookup"><span data-stu-id="3884d-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce the number of rules you need.</span></span><br/><span data-ttu-id="3884d-157">Tegelijkertijd is het gebruik van * mogelijk niet specifiek genoeg, zodat het wordt aanbevolen * alleen te gebruiken als dit echt nodig is.</span><span class="sxs-lookup"><span data-stu-id="3884d-157">At the same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="3884d-158">**Bronpoortbereik**</span><span class="sxs-lookup"><span data-stu-id="3884d-158">**Source port range**</span></span> |<span data-ttu-id="3884d-159">Bronpoortbereik waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-159">Source port range to match for the rule.</span></span> |<span data-ttu-id="3884d-160">Eén poortnummer tussen 1 en 65535, een poortbereik (bijvoorbeeld 1-65535) of * (voor alle poorten).</span><span class="sxs-lookup"><span data-stu-id="3884d-160">Single port number from 1 to 65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="3884d-161">Bronpoorten kunnen kortstondig zijn.</span><span class="sxs-lookup"><span data-stu-id="3884d-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="3884d-162">Tenzij in uw clientprogramma een specifieke poort wordt gebruikt, gebruikt u in de meeste gevallen *.</span><span class="sxs-lookup"><span data-stu-id="3884d-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="3884d-163">Gebruik zo veel mogelijk poortbereiken om te voorkomen dat u meerdere regels nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="3884d-163">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="3884d-164">Meerdere poorten of poortbereiken kunnen niet worden gegroepeerd met komma's.</span><span class="sxs-lookup"><span data-stu-id="3884d-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="3884d-165">**Doelpoortbereik**</span><span class="sxs-lookup"><span data-stu-id="3884d-165">**Destination port range**</span></span> |<span data-ttu-id="3884d-166">Doelpoortbereik waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-166">Destination port range to match for the rule.</span></span> |<span data-ttu-id="3884d-167">Eén poortnummer tussen 1 en 65535, een poortbereik (bijvoorbeeld 1-65535) of \* (voor alle poorten).</span><span class="sxs-lookup"><span data-stu-id="3884d-167">Single port number from 1 to 65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="3884d-168">Gebruik zo veel mogelijk poortbereiken om te voorkomen dat u meerdere regels nodig hebt.</span><span class="sxs-lookup"><span data-stu-id="3884d-168">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="3884d-169">Meerdere poorten of poortbereiken kunnen niet worden gegroepeerd met komma's.</span><span class="sxs-lookup"><span data-stu-id="3884d-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="3884d-170">**Bronadresvoorvoegsel**</span><span class="sxs-lookup"><span data-stu-id="3884d-170">**Source address prefix**</span></span> |<span data-ttu-id="3884d-171">Bronadresvoorvoegsel of tag waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-171">Source address prefix or tag to match for the rule.</span></span> |<span data-ttu-id="3884d-172">Eén IP-adres (bijvoorbeeld 10.10.10.10), een IP-subnet (bijvoorbeeld 192.168.1.0/24), een [standaardtag](#default-tags) of * (voor alle adressen).</span><span class="sxs-lookup"><span data-stu-id="3884d-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="3884d-173">Overweeg het gebruik van bereiken, standaardtags en * om het aantal regels te verminderen.</span><span class="sxs-lookup"><span data-stu-id="3884d-173">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="3884d-174">**Doeladresvoorvoegsel**</span><span class="sxs-lookup"><span data-stu-id="3884d-174">**Destination address prefix**</span></span> |<span data-ttu-id="3884d-175">Doeladresvoorvoegsel of tag waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-175">Destination address prefix or tag to match for the rule.</span></span> | <span data-ttu-id="3884d-176">Eén IP-adres (bijvoorbeeld 10.10.10.10), een IP-subnet (bijvoorbeeld 192.168.1.0/24), een [standaardtag](#default-tags) of * (voor alle adressen).</span><span class="sxs-lookup"><span data-stu-id="3884d-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="3884d-177">Overweeg het gebruik van bereiken, standaardtags en * om het aantal regels te verminderen.</span><span class="sxs-lookup"><span data-stu-id="3884d-177">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="3884d-178">**Richting**</span><span class="sxs-lookup"><span data-stu-id="3884d-178">**Direction**</span></span> |<span data-ttu-id="3884d-179">Richting van het verkeer waarop de regel van toepassing is.</span><span class="sxs-lookup"><span data-stu-id="3884d-179">Direction of traffic to match for the rule.</span></span> |<span data-ttu-id="3884d-180">Binnenkomend of uitgaand.</span><span class="sxs-lookup"><span data-stu-id="3884d-180">Inbound or outbound.</span></span> |<span data-ttu-id="3884d-181">Regels voor binnenkomend en uitgaand verkeer worden afzonderlijk verwerkt op basis van de richting.</span><span class="sxs-lookup"><span data-stu-id="3884d-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="3884d-182">**Prioriteit**</span><span class="sxs-lookup"><span data-stu-id="3884d-182">**Priority**</span></span> |<span data-ttu-id="3884d-183">Regels worden in volgorde van prioriteit gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="3884d-183">Rules are checked in the order of priority.</span></span> <span data-ttu-id="3884d-184">Zodra een regel van toepassing is, worden geen andere regels meer getest.</span><span class="sxs-lookup"><span data-stu-id="3884d-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="3884d-185">Getal tussen 100 en 4096.</span><span class="sxs-lookup"><span data-stu-id="3884d-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="3884d-186">Overweeg prioriteitsnummers voor regels te laten verspringen met 100 om ruimte over te laten voor nieuwe regels die u mogelijk in de toekomst wilt maken.</span><span class="sxs-lookup"><span data-stu-id="3884d-186">Consider creating rules jumping priorities by 100 for each rule to leave space for new rules you might create in the future.</span></span> |
| <span data-ttu-id="3884d-187">**Toegang**</span><span class="sxs-lookup"><span data-stu-id="3884d-187">**Access**</span></span> |<span data-ttu-id="3884d-188">Type toegang dat moet worden toegepast als de regel overeenkomt.</span><span class="sxs-lookup"><span data-stu-id="3884d-188">Type of access to apply if the rule matches.</span></span> | <span data-ttu-id="3884d-189">Toestaan of weigeren.</span><span class="sxs-lookup"><span data-stu-id="3884d-189">Allow or deny.</span></span> | <span data-ttu-id="3884d-190">Onthoud dat het pakket wordt verwijderd als er geen regel wordt gevonden die het pakket toestaat.</span><span class="sxs-lookup"><span data-stu-id="3884d-190">Keep in mind that if an allow rule is not found for a packet, the packet is dropped.</span></span> |

<span data-ttu-id="3884d-191">NSG's bevatten twee sets met regels: een voor binnenkomend verkeer en een voor uitgaand verkeer.</span><span class="sxs-lookup"><span data-stu-id="3884d-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="3884d-192">De prioriteit voor een regel moet uniek zijn binnen elke set.</span><span class="sxs-lookup"><span data-stu-id="3884d-192">The priority for a rule must be unique within each set.</span></span> 

![Verwerking van NSG-regels](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="3884d-194">In de vorige afbeelding ziet u hoe NSG-regels worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="3884d-194">The previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="3884d-195">Standaardtags</span><span class="sxs-lookup"><span data-stu-id="3884d-195">Default Tags</span></span>
<span data-ttu-id="3884d-196">Standaardtags zijn systeem-id's voor een bepaalde categorie IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="3884d-196">Default tags are system-provided identifiers to address a category of IP addresses.</span></span> <span data-ttu-id="3884d-197">U kunt standaardtags gebruiken in de eigenschappen voor het **voorvoegsel voor het bronadres** en het **voorvoegsel voor het doeladres** van een regel.</span><span class="sxs-lookup"><span data-stu-id="3884d-197">You can use default tags in the **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="3884d-198">Er zijn drie standaardtags die u kunt gebruiken:</span><span class="sxs-lookup"><span data-stu-id="3884d-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="3884d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** voor klassiek): deze tag omvat de adresruimte van het virtuele netwerk (CIDR-bereiken die in Azure zijn gedefinieerd) en alle verbonden on-premises adresruimten en verbonden Azure VNet's (lokale netwerken).</span><span class="sxs-lookup"><span data-stu-id="3884d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes the virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="3884d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** voor klassiek): met deze tag wordt de load balancer voor de infrastructuur van Azure aangeduid.</span><span class="sxs-lookup"><span data-stu-id="3884d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="3884d-201">De tag wordt omgezet in het IP-adres van een Azure-datacenter van waaruit statuscontroles van Azure worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="3884d-201">The tag translates to an Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="3884d-202">**Internet** (Resource Manager) (**INTERNET** voor klassiek): met deze tag wordt de IP-adresruimte aangeduid die zich buiten het virtuele netwerk bevindt en bereikbaar is via internet.</span><span class="sxs-lookup"><span data-stu-id="3884d-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes the IP address space that is outside the virtual network and reachable by public Internet.</span></span> <span data-ttu-id="3884d-203">Dit bereik omvat ook de [openbare IP-adresruimte van Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="3884d-203">The range includes the [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="3884d-204">Standaardregels</span><span class="sxs-lookup"><span data-stu-id="3884d-204">Default rules</span></span>
<span data-ttu-id="3884d-205">Alle NSG's bevatten een set met standaardregels.</span><span class="sxs-lookup"><span data-stu-id="3884d-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="3884d-206">De standaardregels kunnen niet worden verwijderd, maar omdat ze de laagste prioriteit hebben, kunnen ze worden overschreven door de regels die u maakt.</span><span class="sxs-lookup"><span data-stu-id="3884d-206">The default rules cannot be deleted, but because they are assigned the lowest priority, they can be overridden by the rules that you create.</span></span> 

<span data-ttu-id="3884d-207">De standaardregels kunnen verkeer als volgt toestaan en weigeren:</span><span class="sxs-lookup"><span data-stu-id="3884d-207">The default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="3884d-208">**Virtueel netwerk:** Verkeer dat afkomstig is van en eindigt in een virtueel netwerk wordt toegestaan in zowel binnenkomende als uitgaande richting.</span><span class="sxs-lookup"><span data-stu-id="3884d-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="3884d-209">**Internet:** Uitgaand verkeer is toegestaan, maar binnenkomend verkeer wordt geblokkeerd.</span><span class="sxs-lookup"><span data-stu-id="3884d-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="3884d-210">**Load balancer:** Toestaan dat de load balancer van Azure de status van uw VM's en rolexemplaren controleert.</span><span class="sxs-lookup"><span data-stu-id="3884d-210">**Load balancer:** Allow Azure’s load balancer to probe the health of your VMs and role instances.</span></span> <span data-ttu-id="3884d-211">Als u geen set met taakverdeling gebruikt, kunt u deze regel onderdrukken.</span><span class="sxs-lookup"><span data-stu-id="3884d-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="3884d-212">**Standaardregels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-212">**Inbound default rules**</span></span>

| <span data-ttu-id="3884d-213">Name</span><span class="sxs-lookup"><span data-stu-id="3884d-213">Name</span></span> | <span data-ttu-id="3884d-214">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-214">Priority</span></span> | <span data-ttu-id="3884d-215">Bron-IP</span><span class="sxs-lookup"><span data-stu-id="3884d-215">Source IP</span></span> | <span data-ttu-id="3884d-216">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-216">Source Port</span></span> | <span data-ttu-id="3884d-217">Doel-IP</span><span class="sxs-lookup"><span data-stu-id="3884d-217">Destination IP</span></span> | <span data-ttu-id="3884d-218">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-218">Destination Port</span></span> | <span data-ttu-id="3884d-219">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-219">Protocol</span></span> | <span data-ttu-id="3884d-220">Access</span><span class="sxs-lookup"><span data-stu-id="3884d-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="3884d-221">AllowVNetInBound</span></span> |<span data-ttu-id="3884d-222">65000</span><span class="sxs-lookup"><span data-stu-id="3884d-222">65000</span></span> | <span data-ttu-id="3884d-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="3884d-223">VirtualNetwork</span></span> | * | <span data-ttu-id="3884d-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="3884d-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="3884d-225">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-225">Allow</span></span> |
| <span data-ttu-id="3884d-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="3884d-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="3884d-227">65001</span><span class="sxs-lookup"><span data-stu-id="3884d-227">65001</span></span> | <span data-ttu-id="3884d-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="3884d-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="3884d-229">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-229">Allow</span></span> |
| <span data-ttu-id="3884d-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="3884d-230">DenyAllInBound</span></span> |<span data-ttu-id="3884d-231">65500</span><span class="sxs-lookup"><span data-stu-id="3884d-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="3884d-232">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-232">Deny</span></span> |

<span data-ttu-id="3884d-233">**Standaardregels voor uitgaand verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-233">**Outbound default rules**</span></span>

| <span data-ttu-id="3884d-234">Naam</span><span class="sxs-lookup"><span data-stu-id="3884d-234">Name</span></span> | <span data-ttu-id="3884d-235">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-235">Priority</span></span> | <span data-ttu-id="3884d-236">Bron-IP</span><span class="sxs-lookup"><span data-stu-id="3884d-236">Source IP</span></span> | <span data-ttu-id="3884d-237">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-237">Source Port</span></span> | <span data-ttu-id="3884d-238">Doel-IP</span><span class="sxs-lookup"><span data-stu-id="3884d-238">Destination IP</span></span> | <span data-ttu-id="3884d-239">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-239">Destination Port</span></span> | <span data-ttu-id="3884d-240">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-240">Protocol</span></span> | <span data-ttu-id="3884d-241">Access</span><span class="sxs-lookup"><span data-stu-id="3884d-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="3884d-242">AllowVnetOutBound</span></span> | <span data-ttu-id="3884d-243">65000</span><span class="sxs-lookup"><span data-stu-id="3884d-243">65000</span></span> | <span data-ttu-id="3884d-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="3884d-244">VirtualNetwork</span></span> | * | <span data-ttu-id="3884d-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="3884d-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="3884d-246">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-246">Allow</span></span> |
| <span data-ttu-id="3884d-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="3884d-247">AllowInternetOutBound</span></span> | <span data-ttu-id="3884d-248">65001</span><span class="sxs-lookup"><span data-stu-id="3884d-248">65001</span></span> | * | * | <span data-ttu-id="3884d-249">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-249">Internet</span></span> | * | * | <span data-ttu-id="3884d-250">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-250">Allow</span></span> |
| <span data-ttu-id="3884d-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="3884d-251">DenyAllOutBound</span></span> | <span data-ttu-id="3884d-252">65500</span><span class="sxs-lookup"><span data-stu-id="3884d-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="3884d-253">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="3884d-254">NSG's koppelen</span><span class="sxs-lookup"><span data-stu-id="3884d-254">Associating NSGs</span></span>
<span data-ttu-id="3884d-255">U kunt als volgt een NSG koppelen aan VM's, NIC's en subnetten, afhankelijk van het implementatiemodel dat u gebruikt:</span><span class="sxs-lookup"><span data-stu-id="3884d-255">You can associate an NSG to VMs, NICs, and subnets, depending on the deployment model you are using, as follows:</span></span>

* <span data-ttu-id="3884d-256">**VM (alleen klassiek):** beveiligingsregels worden toegepast op al het verkeer naar/van de virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="3884d-256">**VM (classic only):** Security rules are applied to all traffic to/from the VM.</span></span> 
* <span data-ttu-id="3884d-257">**NIC (alleen Resource Manager):** beveiligingsregels worden toegepast op al het verkeer naar/van de NIC waaraan de NSG is gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="3884d-257">**NIC (Resource Manager only):** Security rules are applied to all traffic to/from the NIC the NSG is associated to.</span></span> <span data-ttu-id="3884d-258">In een VM met meerdere NIC's kunt u verschillende NSG’s (of dezelfde NSG) toepassen op elke NIC afzonderlijk.</span><span class="sxs-lookup"><span data-stu-id="3884d-258">In a multi-NIC VM, you can apply different (or the same) NSG to each NIC individually.</span></span> 
* <span data-ttu-id="3884d-259">**Subnet (Resource Manager en klassiek):** beveiligingsregels worden toegepast op al het verkeer naar/van resources die zijn verbonden met het VNet.</span><span class="sxs-lookup"><span data-stu-id="3884d-259">**Subnet (Resource Manager and classic):** Security rules are applied to any traffic to/from any resources connected to the VNet.</span></span>

<span data-ttu-id="3884d-260">U kunt verschillende NSG's koppelen aan een VM (of NIC, afhankelijk van het implementatiemodel) en het subnet waarmee een NIC of VM is verbonden.</span><span class="sxs-lookup"><span data-stu-id="3884d-260">You can associate different NSGs to a VM (or NIC, depending on the deployment model) and the subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="3884d-261">Beveiligingsregels worden toegepast op het verkeer op basis van prioriteit in elke NSG, in deze volgorde:</span><span class="sxs-lookup"><span data-stu-id="3884d-261">Security rules are applied to the traffic, by priority, in each NSG, in the following order:</span></span>

- <span data-ttu-id="3884d-262">**Binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="3884d-263">**NSG die is toegepast op het subnet:** als er een overeenkomende regel is voor de subnet-NSG die verkeer weigert, wordt het pakket verwijderd.</span><span class="sxs-lookup"><span data-stu-id="3884d-263">**NSG applied to subnet:** If a subnet NSG has a matching rule to deny traffic, the packet is dropped.</span></span>

  2. <span data-ttu-id="3884d-264">**NSG die is toegepast op de NIC** (Resource Manager) of VM (klassiek): als een VM\NIC-NSG een overeenkomende regel heeft die verkeer weigert, worden pakketten verwijderd bij de VM\NIC, zelfs als een subnet-NSG een overeenkomende regel heeft die verkeer toestaat.</span><span class="sxs-lookup"><span data-stu-id="3884d-264">**NSG applied to NIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at the VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="3884d-265">**Uitgaand verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="3884d-266">**NSG die is toegepast op de NIC** (Resource Manager) of VM (klassiek): als een VM\NIC-NSG een overeenkomende regel heeft die verkeer weigert, worden pakketten verwijderd.</span><span class="sxs-lookup"><span data-stu-id="3884d-266">**NSG applied to NIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="3884d-267">**NSG die is toegepast op het subnet**: als een subnet-NSG een overeenkomende regel heeft die verkeer weigert, worden pakketten verwijderd, zelfs als een VM/NIC-NSG een overeenkomende regel heeft die verkeer toestaat.</span><span class="sxs-lookup"><span data-stu-id="3884d-267">**NSG applied to subnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="3884d-268">U kunt slechts één NSG aan een subnet, VM of NIC koppelen, maar u kunt wel dezelfde NSG aan zo veel resources koppelen als u wilt.</span><span class="sxs-lookup"><span data-stu-id="3884d-268">Although you can only associate a single NSG to a subnet, VM, or NIC; you can associate the same NSG to as many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="3884d-269">Implementatie</span><span class="sxs-lookup"><span data-stu-id="3884d-269">Implementation</span></span>
<span data-ttu-id="3884d-270">U kunt NSG's implementeren in het klassieke implementatiemodel of het implementatiemodel van Resource Manager met behulp van de volgende hulpprogramma's:</span><span class="sxs-lookup"><span data-stu-id="3884d-270">You can implement NSGs in the Resource Manager or classic deployment models using the following tools:</span></span>

| <span data-ttu-id="3884d-271">Implementatieprogramma</span><span class="sxs-lookup"><span data-stu-id="3884d-271">Deployment tool</span></span> | <span data-ttu-id="3884d-272">Klassiek</span><span class="sxs-lookup"><span data-stu-id="3884d-272">Classic</span></span> | <span data-ttu-id="3884d-273">Resource Manager</span><span class="sxs-lookup"><span data-stu-id="3884d-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3884d-274">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="3884d-274">Azure portal</span></span>   | <span data-ttu-id="3884d-275">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-275">Yes</span></span> | [<span data-ttu-id="3884d-276">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="3884d-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3884d-277">PowerShell</span></span>     | [<span data-ttu-id="3884d-278">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="3884d-279">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="3884d-280">Azure CLI **V1**</span><span class="sxs-lookup"><span data-stu-id="3884d-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="3884d-281">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="3884d-282">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="3884d-283">Azure CLI **V2**</span><span class="sxs-lookup"><span data-stu-id="3884d-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="3884d-284">Nee</span><span class="sxs-lookup"><span data-stu-id="3884d-284">No</span></span> | [<span data-ttu-id="3884d-285">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="3884d-286">Azure Resource Manager-sjabloon</span><span class="sxs-lookup"><span data-stu-id="3884d-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="3884d-287">Nee</span><span class="sxs-lookup"><span data-stu-id="3884d-287">No</span></span>  | [<span data-ttu-id="3884d-288">Ja</span><span class="sxs-lookup"><span data-stu-id="3884d-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="3884d-289">Planning</span><span class="sxs-lookup"><span data-stu-id="3884d-289">Planning</span></span>
<span data-ttu-id="3884d-290">Voordat u NSG's implementeert, moet u de volgende vragen beantwoorden:</span><span class="sxs-lookup"><span data-stu-id="3884d-290">Before implementing NSGs, you need to answer the following questions:</span></span>

1. <span data-ttu-id="3884d-291">Voor welke soorten resources wilt binnenkomend of uitgaand verkeer filteren?</span><span class="sxs-lookup"><span data-stu-id="3884d-291">What types of resources do you want to filter traffic to or from?</span></span> <span data-ttu-id="3884d-292">U kunt resources zoals NIC's (Resource Manager), VM’s (klassiek), Cloud Services, omgevingen met toepassingsservices en VM- schaalsets verbinden.</span><span class="sxs-lookup"><span data-stu-id="3884d-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="3884d-293">Zijn de resources waarvan u het binnenkomende/uitgaande verkeer wilt filteren verbonden met subnetten in bestaande VNet's?</span><span class="sxs-lookup"><span data-stu-id="3884d-293">Are the resources you want to filter traffic to/from connected to subnets in existing VNets?</span></span>

<span data-ttu-id="3884d-294">Lees het artikel [Cloud Services en netwerkbeveiliging](../best-practices-network-security.md) voor meer informatie over het plannen van netwerkbeveiliging in Azure.</span><span class="sxs-lookup"><span data-stu-id="3884d-294">For more information on planning for network security in Azure, read the [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="3884d-295">Overwegingen bij het ontwerpen</span><span class="sxs-lookup"><span data-stu-id="3884d-295">Design considerations</span></span>
<span data-ttu-id="3884d-296">Als u de antwoorden op de vragen in de sectie [Planning](#Planning) weet, leest u de volgende secties aandachtig door voordat u uw NSG's definieert:</span><span class="sxs-lookup"><span data-stu-id="3884d-296">Once you know the answers to the questions in the [Planning](#Planning) section, review the following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="3884d-297">Limieten</span><span class="sxs-lookup"><span data-stu-id="3884d-297">Limits</span></span>
<span data-ttu-id="3884d-298">Er gelden limieten voor het aantal NSG's dat u kunt hebben in een abonnement en het aantal regels per NSG.</span><span class="sxs-lookup"><span data-stu-id="3884d-298">There are limits to the number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="3884d-299">Lees voor meer informatie over de limieten het artikel [Azure-limieten](../azure-subscription-service-limits.md#networking-limits).</span><span class="sxs-lookup"><span data-stu-id="3884d-299">To learn more about the limits, read the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="3884d-300">VNET's en subnetten ontwerpen</span><span class="sxs-lookup"><span data-stu-id="3884d-300">VNet and subnet design</span></span>
<span data-ttu-id="3884d-301">Omdat NSG's kunnen worden toegepast op subnetten, kunt u het aantal NSG's minimaliseren door uw resources te  groeperen per subnet, en NSG's op subnetten toe te passen.</span><span class="sxs-lookup"><span data-stu-id="3884d-301">Since NSGs can be applied to subnets, you can minimize the number of NSGs by grouping your resources by subnet, and applying NSGs to subnets.</span></span>  <span data-ttu-id="3884d-302">Als u besluit om NSG's op subnetten toe te passen, merkt u mogelijk dat bij het definiëren van bestaande VNET's en subnetten niet altijd rekening is gehouden met NSG's.</span><span class="sxs-lookup"><span data-stu-id="3884d-302">If you decide to apply NSGs to subnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="3884d-303">U moet mogelijk nieuwe VNet's en subnetten definiëren ter ondersteuning van uw NSG-ontwerp en uw nieuwe resources implementeren met uw nieuwe subnetten.</span><span class="sxs-lookup"><span data-stu-id="3884d-303">You may need to define new VNets and subnets to support your NSG design and deploy your new resources to your new subnets.</span></span> <span data-ttu-id="3884d-304">U kunt dan een migratiestrategie definiëren om bestaande resources te verplaatsen naar de nieuwe subnetten.</span><span class="sxs-lookup"><span data-stu-id="3884d-304">You could then define a migration strategy to move existing resources to the new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="3884d-305">Speciale regels</span><span class="sxs-lookup"><span data-stu-id="3884d-305">Special rules</span></span>
<span data-ttu-id="3884d-306">Als u verkeer blokkeert dat is toegestaan door de volgende regels, kan uw infrastructuur niet communiceren met essentiële Azure-services:</span><span class="sxs-lookup"><span data-stu-id="3884d-306">If you block traffic allowed by the following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="3884d-307">**Virtueel IP-adres van het hostknooppunt:** basisinfrastructuurservices zoals DHCP, DNS en statuscontrole worden geleverd via het gevirtualiseerde host-IP-adres 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="3884d-307">**Virtual IP of the host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through the virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="3884d-308">Dit openbare IP-adres is van Microsoft en is het enige gevirtualiseerde IP-adres dat in alle regio's wordt gebruikt voor dit doel.</span><span class="sxs-lookup"><span data-stu-id="3884d-308">This public IP address belongs to Microsoft and is the only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="3884d-309">Dit IP-adres wordt toegewezen aan het fysieke IP-adres van de servercomputer (hostknooppunt) die fungeert als host voor de VM.</span><span class="sxs-lookup"><span data-stu-id="3884d-309">This IP address maps to the physical IP address of the server machine (host node) hosting the VM.</span></span> <span data-ttu-id="3884d-310">Het hostknooppunt fungeert als de DHCP-relay, de recursieve DNS-omzetter en de bron voor de statuscontrole van de load balancer en de machine.</span><span class="sxs-lookup"><span data-stu-id="3884d-310">The host node acts as the DHCP relay, the DNS recursive resolver, and the probe source for the load balancer health probe and the machine health probe.</span></span> <span data-ttu-id="3884d-311">Communicatie met dit IP-adres is geen aanval.</span><span class="sxs-lookup"><span data-stu-id="3884d-311">Communication to this IP address is not an attack.</span></span>
* <span data-ttu-id="3884d-312">**Licentieverlening (Key Management Service):** voor alle Windows installatiekopieën die op de VM’s machines worden uitgevoerd, is een licentie vereist.</span><span class="sxs-lookup"><span data-stu-id="3884d-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="3884d-313">Hiervoor wordt een licentieaanvraag verstuurd naar de Key Management Service-hostservers waarop dergelijke query's worden afgehandeld.</span><span class="sxs-lookup"><span data-stu-id="3884d-313">To ensure licensing, a request is sent to the Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="3884d-314">De uitgaande aanvraag wordt gedaan via poort. 1688.</span><span class="sxs-lookup"><span data-stu-id="3884d-314">The request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="3884d-315">ICMP-verkeer</span><span class="sxs-lookup"><span data-stu-id="3884d-315">ICMP traffic</span></span>
<span data-ttu-id="3884d-316">In de huidige NSG-regels worden alleen de protocollen *TCP* en *UDP* ondersteund.</span><span class="sxs-lookup"><span data-stu-id="3884d-316">The current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="3884d-317">Er is geen specifieke tag voor *ICMP*.</span><span class="sxs-lookup"><span data-stu-id="3884d-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="3884d-318">ICMP-verkeer is echter toegestaan binnen een VNet door de standaardregel AllowVNetInBound waarmee verkeer van en naar een poort en protocol binnen de VNet wordt toegestaan.</span><span class="sxs-lookup"><span data-stu-id="3884d-318">However, ICMP traffic is allowed within a VNet by the AllowVNetInBound default rule, that allows traffic to and from any port and protocol within the VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="3884d-319">Subnetten</span><span class="sxs-lookup"><span data-stu-id="3884d-319">Subnets</span></span>
* <span data-ttu-id="3884d-320">Houd rekening met het aantal benodigde lagen voor uw workload.</span><span class="sxs-lookup"><span data-stu-id="3884d-320">Consider the number of tiers your workload requires.</span></span> <span data-ttu-id="3884d-321">Elke laag kan worden geïsoleerd met behulp van een subnet, waarbij een NSG wordt toegepast op het subnet.</span><span class="sxs-lookup"><span data-stu-id="3884d-321">Each tier can be isolated by using a subnet, with an NSG applied to the subnet.</span></span> 
* <span data-ttu-id="3884d-322">Als u een subnet voor een VPN-gateway of ExpressRoute-circuit moet implementeren, mag u **geen** NSG op dat subnet toepassen.</span><span class="sxs-lookup"><span data-stu-id="3884d-322">If you need to implement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG to that subnet.</span></span> <span data-ttu-id="3884d-323">Als u dit wel doet, mislukken verbindingen tussen VNets of tussen lokale netwerkonderdelen onderling.</span><span class="sxs-lookup"><span data-stu-id="3884d-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="3884d-324">Als u een virtueel netwerkapparaat (Network Virtual Appliance, NVA) moet implementeren, verbindt u de NVA met een eigen subnet en maakt u door de gebruiker gedefinieerde routes (User-Defined Routes, UDR) naar en van de NVA.</span><span class="sxs-lookup"><span data-stu-id="3884d-324">If you need to implement a network virtual appliance (NVA), connect the NVA to its own subnet and create user-defined routes (UDR) to and from the NVA.</span></span> <span data-ttu-id="3884d-325">U kunt een NSG op subnetniveau implementeren om binnenkomend en uitgaand verkeer in dit subnet te filteren.</span><span class="sxs-lookup"><span data-stu-id="3884d-325">You can implement a subnet level NSG to filter traffic in and out of this subnet.</span></span> <span data-ttu-id="3884d-326">Lees het artikel [User-defined routes](virtual-networks-udr-overview.md) (Door de gebruiker gedefinieerde routes) voor meer informatie over UDR’s.</span><span class="sxs-lookup"><span data-stu-id="3884d-326">To learn more about UDRs, read the [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="3884d-327">Load balancers</span><span class="sxs-lookup"><span data-stu-id="3884d-327">Load balancers</span></span>
* <span data-ttu-id="3884d-328">Overweeg regels voor taakverdeling en netwerkadresomzetting (Network Address Translation, NAT) voor elke load balancer die wordt gebruikt door elk van uw workloads.</span><span class="sxs-lookup"><span data-stu-id="3884d-328">Consider the load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="3884d-329">NAT-regels zijn gebonden aan een back-end-groep die NIC's (Resource Manager) of VM's/Cloud Services-rolexemplaren (klassiek) bevat.</span><span class="sxs-lookup"><span data-stu-id="3884d-329">NAT rules are bound to a back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="3884d-330">Overweeg een NSG te maken voor elke back-end-groep, zodat alleen verkeer wordt toegestaan dat is gedefinieerd in de regels die zijn geïmplementeerd in de load balancers.</span><span class="sxs-lookup"><span data-stu-id="3884d-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through the rules implemented in the load balancers.</span></span> <span data-ttu-id="3884d-331">Als u een NSG maakt voor elke back-end-groep, zorgt u ervoor dat verkeer dat rechtstreeks naar de back-end-groep gaat, in plaats van via de load balancer, ook wordt gefilterd.</span><span class="sxs-lookup"><span data-stu-id="3884d-331">Creating an NSG for each back-end pool guarantees that traffic coming to the back-end pool directly (rather than through the load balancer), is also filtered.</span></span>
* <span data-ttu-id="3884d-332">In klassieke implementaties maakt u eindpunten waarop poorten van een load balancer worden afgestemd met poorten van uw VM's of rolexemplaren.</span><span class="sxs-lookup"><span data-stu-id="3884d-332">In classic deployments, you create endpoints that map ports on a load balancer to ports on your VMs or role instances.</span></span> <span data-ttu-id="3884d-333">U kunt ook uw eigen individuele openbare load balancer maken via Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3884d-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="3884d-334">De doelpoort voor binnenkomend verkeer is de daadwerkelijke poort in de VM of het rolexemplaar, niet de poort die wordt weergegeven door een load balancer.</span><span class="sxs-lookup"><span data-stu-id="3884d-334">The destination port for incoming traffic is the actual port in the VM or role instance, not the port exposed by a load balancer.</span></span> <span data-ttu-id="3884d-335">De bronpoort en het bronadres voor de verbinding met de VM zijn een poort en adres op de externe computer op internet, en niet de poort en het adres die beschikbaar zijn gemaakt door de load balancer.</span><span class="sxs-lookup"><span data-stu-id="3884d-335">The source port and address for the connection to the VM is a port and address on the remote computer in the Internet, not the port and address exposed by the load balancer.</span></span>
* <span data-ttu-id="3884d-336">Wanneer u NSG's maakt om verkeer te filteren dat afkomstig is van een interne load balancer (ILB), worden de bronpoort en het bronadresbereik toegepast van de computer waarvan de oproep afkomstig is en niet die van de load balancer.</span><span class="sxs-lookup"><span data-stu-id="3884d-336">When you create NSGs to filter traffic coming through an internal load balancer (ILB), the source port and address range applied are  from the originating computer, not the load balancer.</span></span> <span data-ttu-id="3884d-337">De doelpoort en het doeladresbereik zijn die van de doelcomputer, niet van de load balancer.</span><span class="sxs-lookup"><span data-stu-id="3884d-337">The destination port and address range are those of the destination computer, not the load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="3884d-338">Overige</span><span class="sxs-lookup"><span data-stu-id="3884d-338">Other</span></span>
* <span data-ttu-id="3884d-339">ACL's voor eindpunten en NSG's worden niet ondersteund op een en hetzelfde VM-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="3884d-339">Endpoint-based access control lists (ACL) and NSGs are not supported on the same VM instance.</span></span> <span data-ttu-id="3884d-340">Als u een NSG wilt gebruiken en er al een ACL voor eindpunten is geïmplementeerd, moet u eerst de ACL voor eindpunten verwijderen.</span><span class="sxs-lookup"><span data-stu-id="3884d-340">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="3884d-341">Voor meer informatie over het verwijderen van een eindpunt-ACT leest u het artikel [Eindpunt-ACL's beheren](virtual-networks-acl-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-341">For information about how to remove an endpoint ACL, see the [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="3884d-342">In Resource Manager kunt u een NSG die aan een NIC is gekoppeld gebruiken voor VM's met meerdere NIC's om zo beheer (externe toegang) per NIC mogelijk te maken.</span><span class="sxs-lookup"><span data-stu-id="3884d-342">In Resource Manager, you can use an NSG associated to a NIC for VMs with multiple NICs to enable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="3884d-343">Door unieke NSG's te koppelen aan elke NIC kunt u soorten verkeer over NIC's scheiden.</span><span class="sxs-lookup"><span data-stu-id="3884d-343">Associating unique NSGs to each NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="3884d-344">Net als bij het gebruik van load balancers geldt dat u bij het filteren van verkeer van andere VNET's, het adresbereik van de bron van de externe computer moet gebruiken, en niet dat van de gateway waarmee de VNET's onderling worden verbonden.</span><span class="sxs-lookup"><span data-stu-id="3884d-344">Similar to the use of load balancers, when filtering traffic from other VNets, you must use the source address range of the remote computer, not the gateway connecting the VNets.</span></span>
* <span data-ttu-id="3884d-345">Veel Azure-services kunnen niet worden verbonden met VNet's.</span><span class="sxs-lookup"><span data-stu-id="3884d-345">Many Azure services cannot be connected to VNets.</span></span> <span data-ttu-id="3884d-346">Als een Azure-resource niet met een VNet is verbonden, kunt u geen NSG gebruiken om verkeer naar de resource te filteren.</span><span class="sxs-lookup"><span data-stu-id="3884d-346">If an Azure resource is not connected to a VNet, you cannot use an NSG to filter traffic to the resource.</span></span>  <span data-ttu-id="3884d-347">Raadpleeg de documentatie bij de services die u gebruikt om te bepalen of de service kan worden gebruikt in combinatie met een VNet.</span><span class="sxs-lookup"><span data-stu-id="3884d-347">Read the documentation for the services you use to determine whether the service can be connected to a VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="3884d-348">Voorbeeldimplementatie</span><span class="sxs-lookup"><span data-stu-id="3884d-348">Sample deployment</span></span>
<span data-ttu-id="3884d-349">Bekijk ter illustratie van de toepassing van de informatie in dit artikel een gangbaar scenario van een toepassing met twee lagen zoals in de volgende afbeelding:</span><span class="sxs-lookup"><span data-stu-id="3884d-349">To illustrate the application of the information in this article, consider a common scenario of a two tier application shown in the following picture:</span></span>

![NSG's](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="3884d-351">Zoals u ziet in het diagram, zijn de VM's *Web1* en *Web2* verbonden met het subnet *FrontEnd* en zijn de VM's *DB1* en *DB2* verbonden met het subnet *BackEnd*.</span><span class="sxs-lookup"><span data-stu-id="3884d-351">As shown in the diagram, the *Web1* and *Web2* VMs are connected to the *FrontEnd* subnet, and the *DB1* and *DB2* VMs are connected to the *BackEnd* subnet.</span></span>  <span data-ttu-id="3884d-352">Beide subnetten behoren tot het VNET *TestVNET*.</span><span class="sxs-lookup"><span data-stu-id="3884d-352">Both subnets are part of the *TestVNet* VNet.</span></span> <span data-ttu-id="3884d-353">De toepassingsonderdelen worden elk uitgevoerd binnen een Azure-VM die is verbonden met een VNet.</span><span class="sxs-lookup"><span data-stu-id="3884d-353">The application components each run within an Azure VM connected to a VNet.</span></span> <span data-ttu-id="3884d-354">Voor het scenario gelden de volgende vereisten:</span><span class="sxs-lookup"><span data-stu-id="3884d-354">The scenario has the following requirements:</span></span>

1. <span data-ttu-id="3884d-355">Scheiding van verkeer tussen de WEB- en DB-servers.</span><span class="sxs-lookup"><span data-stu-id="3884d-355">Separation of traffic between the WEB and DB servers.</span></span>
2. <span data-ttu-id="3884d-356">Taakverdelingsregels waarmee verkeer van de load balancer wordt doorgestuurd naar alle webservers op poort 80.</span><span class="sxs-lookup"><span data-stu-id="3884d-356">Load balancing rules forward traffic from the load balancer to all web servers on port 80.</span></span>
3. <span data-ttu-id="3884d-357">NAT-regels voor de load balancer waarmee verkeer dat via poort 50001 in de load balancer binnenkomt, wordt doorgestuurd naar poort 3389 op de VM WEB1.</span><span class="sxs-lookup"><span data-stu-id="3884d-357">Load balancer NAT rules forward traffic coming into the load balancer on port 50001 to port 3389 on the WEB1 VM.</span></span>
4. <span data-ttu-id="3884d-358">Geen toegang tot de front-end- en back-end-VM's via internet, behalve vereisten 2 en 3.</span><span class="sxs-lookup"><span data-stu-id="3884d-358">No access to the front-end or back-end VMs from the Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="3884d-359">Geen uitgaande internettoegang vanaf de WEB- of DB-servers.</span><span class="sxs-lookup"><span data-stu-id="3884d-359">No outbound Internet access from the WEB or DB servers.</span></span>
6. <span data-ttu-id="3884d-360">Toegang vanaf het subnet FrontEnd naar poort 3389 van een webserver is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="3884d-360">Access from the FrontEnd subnet is allowed to port 3389 of any web server.</span></span>
7. <span data-ttu-id="3884d-361">Toegang vanaf het subnet FrontEnd naar poort 3389 van een DB-server is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="3884d-361">Access from the FrontEnd subnet is allowed to port 3389 of any DB server.</span></span>
8. <span data-ttu-id="3884d-362">Toegang vanaf het subnet FrontEnd naar poort 1433 van alle DB-servers is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="3884d-362">Access from the FrontEnd subnet is allowed to port 1433 of all DB servers.</span></span>
9. <span data-ttu-id="3884d-363">Scheiding van beheerverkeer (poort 3389) en databaseverkeer (poort 1433) op verschillende NIC's in DB-servers.</span><span class="sxs-lookup"><span data-stu-id="3884d-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="3884d-364">Vereisten 1-6 (behalve vereisten 3 en 4) zijn alle beperkt tot de subnetruimten.</span><span class="sxs-lookup"><span data-stu-id="3884d-364">Requirements 1-6 (except requirements 3 and 4) are all confined to subnet spaces.</span></span> <span data-ttu-id="3884d-365">De volgende NSG's voldoen aan de voorgaande vereisten, terwijl het aantal vereiste NSG’s tot het minimum is beperkt:</span><span class="sxs-lookup"><span data-stu-id="3884d-365">The following NSGs meet the previous requirements, while minimizing the number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="3884d-366">FrontEnd</span><span class="sxs-lookup"><span data-stu-id="3884d-366">FrontEnd</span></span>
<span data-ttu-id="3884d-367">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-367">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-368">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-368">Rule</span></span> | <span data-ttu-id="3884d-369">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-369">Access</span></span> | <span data-ttu-id="3884d-370">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-370">Priority</span></span> | <span data-ttu-id="3884d-371">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-371">Source address range</span></span> | <span data-ttu-id="3884d-372">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-372">Source port</span></span> | <span data-ttu-id="3884d-373">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-373">Destination address range</span></span> | <span data-ttu-id="3884d-374">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-374">Destination port</span></span> | <span data-ttu-id="3884d-375">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-376">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="3884d-377">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-377">Allow</span></span> | <span data-ttu-id="3884d-378">100</span><span class="sxs-lookup"><span data-stu-id="3884d-378">100</span></span> | <span data-ttu-id="3884d-379">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-379">Internet</span></span> | * | * | <span data-ttu-id="3884d-380">80</span><span class="sxs-lookup"><span data-stu-id="3884d-380">80</span></span> | <span data-ttu-id="3884d-381">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-381">TCP</span></span> |
| <span data-ttu-id="3884d-382">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="3884d-383">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-383">Allow</span></span> | <span data-ttu-id="3884d-384">200</span><span class="sxs-lookup"><span data-stu-id="3884d-384">200</span></span> | <span data-ttu-id="3884d-385">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-385">Internet</span></span> | * | * | <span data-ttu-id="3884d-386">3389</span><span class="sxs-lookup"><span data-stu-id="3884d-386">3389</span></span> | <span data-ttu-id="3884d-387">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-387">TCP</span></span> |
| <span data-ttu-id="3884d-388">Deny-Inbound-All</span><span class="sxs-lookup"><span data-stu-id="3884d-388">Deny-Inbound-All</span></span> | <span data-ttu-id="3884d-389">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-389">Deny</span></span> | <span data-ttu-id="3884d-390">300</span><span class="sxs-lookup"><span data-stu-id="3884d-390">300</span></span> | <span data-ttu-id="3884d-391">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-391">Internet</span></span> | * | * | * | <span data-ttu-id="3884d-392">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-392">TCP</span></span> |

<span data-ttu-id="3884d-393">**Regels voor uitgaand verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-393">**Outbound rules**</span></span>

| <span data-ttu-id="3884d-394">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-394">Rule</span></span> | <span data-ttu-id="3884d-395">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-395">Access</span></span> | <span data-ttu-id="3884d-396">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-396">Priority</span></span> | <span data-ttu-id="3884d-397">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-397">Source address range</span></span> | <span data-ttu-id="3884d-398">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-398">Source port</span></span> | <span data-ttu-id="3884d-399">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-399">Destination address range</span></span> | <span data-ttu-id="3884d-400">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-400">Destination port</span></span> | <span data-ttu-id="3884d-401">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-402">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="3884d-402">Deny-Internet-All</span></span> |<span data-ttu-id="3884d-403">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-403">Deny</span></span> |<span data-ttu-id="3884d-404">100</span><span class="sxs-lookup"><span data-stu-id="3884d-404">100</span></span> | * | * | <span data-ttu-id="3884d-405">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="3884d-406">BackEnd</span><span class="sxs-lookup"><span data-stu-id="3884d-406">BackEnd</span></span>
<span data-ttu-id="3884d-407">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-407">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-408">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-408">Rule</span></span> | <span data-ttu-id="3884d-409">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-409">Access</span></span> | <span data-ttu-id="3884d-410">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-410">Priority</span></span> | <span data-ttu-id="3884d-411">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-411">Source address range</span></span> | <span data-ttu-id="3884d-412">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-412">Source port</span></span> | <span data-ttu-id="3884d-413">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-413">Destination address range</span></span> | <span data-ttu-id="3884d-414">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-414">Destination port</span></span> | <span data-ttu-id="3884d-415">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-416">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="3884d-416">Deny-Internet-All</span></span> | <span data-ttu-id="3884d-417">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-417">Deny</span></span> | <span data-ttu-id="3884d-418">100</span><span class="sxs-lookup"><span data-stu-id="3884d-418">100</span></span> | <span data-ttu-id="3884d-419">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="3884d-420">**Regels voor uitgaand verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-420">**Outbound rules**</span></span>

| <span data-ttu-id="3884d-421">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-421">Rule</span></span> | <span data-ttu-id="3884d-422">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-422">Access</span></span> | <span data-ttu-id="3884d-423">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-423">Priority</span></span> | <span data-ttu-id="3884d-424">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-424">Source address range</span></span> | <span data-ttu-id="3884d-425">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-425">Source port</span></span> | <span data-ttu-id="3884d-426">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-426">Destination address range</span></span> | <span data-ttu-id="3884d-427">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-427">Destination port</span></span> | <span data-ttu-id="3884d-428">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-429">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="3884d-429">Deny-Internet-All</span></span> | <span data-ttu-id="3884d-430">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-430">Deny</span></span> | <span data-ttu-id="3884d-431">100</span><span class="sxs-lookup"><span data-stu-id="3884d-431">100</span></span> | * | * | <span data-ttu-id="3884d-432">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-432">Internet</span></span> | * | * |

<span data-ttu-id="3884d-433">De volgende NSG's worden gemaakt en gekoppeld aan NIC's in de volgende VM’s:</span><span class="sxs-lookup"><span data-stu-id="3884d-433">The following NSGs are created and associated to NICs in the following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="3884d-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="3884d-434">WEB1</span></span>
<span data-ttu-id="3884d-435">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-435">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-436">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-436">Rule</span></span> | <span data-ttu-id="3884d-437">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-437">Access</span></span> | <span data-ttu-id="3884d-438">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-438">Priority</span></span> | <span data-ttu-id="3884d-439">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-439">Source address range</span></span> | <span data-ttu-id="3884d-440">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-440">Source port</span></span> | <span data-ttu-id="3884d-441">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-441">Destination address range</span></span> | <span data-ttu-id="3884d-442">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-442">Destination port</span></span> | <span data-ttu-id="3884d-443">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-444">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="3884d-445">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-445">Allow</span></span> | <span data-ttu-id="3884d-446">100</span><span class="sxs-lookup"><span data-stu-id="3884d-446">100</span></span> | <span data-ttu-id="3884d-447">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-447">Internet</span></span> | * | * | <span data-ttu-id="3884d-448">3389</span><span class="sxs-lookup"><span data-stu-id="3884d-448">3389</span></span> | <span data-ttu-id="3884d-449">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-449">TCP</span></span> |
| <span data-ttu-id="3884d-450">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="3884d-451">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-451">Allow</span></span> | <span data-ttu-id="3884d-452">200</span><span class="sxs-lookup"><span data-stu-id="3884d-452">200</span></span> | <span data-ttu-id="3884d-453">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-453">Internet</span></span> | * | * | <span data-ttu-id="3884d-454">80</span><span class="sxs-lookup"><span data-stu-id="3884d-454">80</span></span> | <span data-ttu-id="3884d-455">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="3884d-456">Het bronadresbereik voor de vorige regels is **Internet**, niet het virtuele IP-adres van de load balancer.</span><span class="sxs-lookup"><span data-stu-id="3884d-456">The source address range for the previous rules is **Internet**, not the virtual IP address of for the load balancer.</span></span> <span data-ttu-id="3884d-457">De bronpoort is *, niet 500001.</span><span class="sxs-lookup"><span data-stu-id="3884d-457">The source port is *, not 500001.</span></span> <span data-ttu-id="3884d-458">NAT-regels voor load balancers zijn niet hetzelfde als NSG-beveiligingsregels.</span><span class="sxs-lookup"><span data-stu-id="3884d-458">NAT rules for load balancers are not the same as NSG security rules.</span></span> <span data-ttu-id="3884d-459">NSG-beveiligingsregels hebben altijd betrekking op de bron van herkomst en de bestemming van het verkeer, **niet** op de load balancer ertussen.</span><span class="sxs-lookup"><span data-stu-id="3884d-459">NSG security rules are always related to the original source and final destination of traffic, **not** the load balancer between the two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="3884d-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="3884d-460">WEB2</span></span>
<span data-ttu-id="3884d-461">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-461">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-462">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-462">Rule</span></span> | <span data-ttu-id="3884d-463">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-463">Access</span></span> | <span data-ttu-id="3884d-464">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-464">Priority</span></span> | <span data-ttu-id="3884d-465">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-465">Source address range</span></span> | <span data-ttu-id="3884d-466">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-466">Source port</span></span> | <span data-ttu-id="3884d-467">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-467">Destination address range</span></span> | <span data-ttu-id="3884d-468">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-468">Destination port</span></span> | <span data-ttu-id="3884d-469">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-470">Deny-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="3884d-471">Weigeren</span><span class="sxs-lookup"><span data-stu-id="3884d-471">Deny</span></span> | <span data-ttu-id="3884d-472">100</span><span class="sxs-lookup"><span data-stu-id="3884d-472">100</span></span> | <span data-ttu-id="3884d-473">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-473">Internet</span></span> | * | * | <span data-ttu-id="3884d-474">3389</span><span class="sxs-lookup"><span data-stu-id="3884d-474">3389</span></span> | <span data-ttu-id="3884d-475">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-475">TCP</span></span> |
| <span data-ttu-id="3884d-476">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="3884d-477">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-477">Allow</span></span> | <span data-ttu-id="3884d-478">200</span><span class="sxs-lookup"><span data-stu-id="3884d-478">200</span></span> | <span data-ttu-id="3884d-479">Internet</span><span class="sxs-lookup"><span data-stu-id="3884d-479">Internet</span></span> | * | * | <span data-ttu-id="3884d-480">80</span><span class="sxs-lookup"><span data-stu-id="3884d-480">80</span></span> | <span data-ttu-id="3884d-481">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="3884d-482">DB-servers (beheer-NIC)</span><span class="sxs-lookup"><span data-stu-id="3884d-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="3884d-483">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-483">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-484">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-484">Rule</span></span> | <span data-ttu-id="3884d-485">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-485">Access</span></span> | <span data-ttu-id="3884d-486">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-486">Priority</span></span> | <span data-ttu-id="3884d-487">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-487">Source address range</span></span> | <span data-ttu-id="3884d-488">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-488">Source port</span></span> | <span data-ttu-id="3884d-489">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-489">Destination address range</span></span> | <span data-ttu-id="3884d-490">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-490">Destination port</span></span> | <span data-ttu-id="3884d-491">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-492">Allow-Inbound-RDP-Front-end</span><span class="sxs-lookup"><span data-stu-id="3884d-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="3884d-493">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-493">Allow</span></span> | <span data-ttu-id="3884d-494">100</span><span class="sxs-lookup"><span data-stu-id="3884d-494">100</span></span> | <span data-ttu-id="3884d-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="3884d-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="3884d-496">3389</span><span class="sxs-lookup"><span data-stu-id="3884d-496">3389</span></span> | <span data-ttu-id="3884d-497">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="3884d-498">DB-servers (NIC voor databaseverkeer)</span><span class="sxs-lookup"><span data-stu-id="3884d-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="3884d-499">**Regels voor binnenkomend verkeer**</span><span class="sxs-lookup"><span data-stu-id="3884d-499">**Inbound rules**</span></span>

| <span data-ttu-id="3884d-500">Regel</span><span class="sxs-lookup"><span data-stu-id="3884d-500">Rule</span></span> | <span data-ttu-id="3884d-501">Toegang</span><span class="sxs-lookup"><span data-stu-id="3884d-501">Access</span></span> | <span data-ttu-id="3884d-502">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="3884d-502">Priority</span></span> | <span data-ttu-id="3884d-503">Bronadresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-503">Source address range</span></span> | <span data-ttu-id="3884d-504">Bronpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-504">Source port</span></span> | <span data-ttu-id="3884d-505">Doeladresbereik</span><span class="sxs-lookup"><span data-stu-id="3884d-505">Destination address range</span></span> | <span data-ttu-id="3884d-506">Doelpoort</span><span class="sxs-lookup"><span data-stu-id="3884d-506">Destination port</span></span> | <span data-ttu-id="3884d-507">Protocol</span><span class="sxs-lookup"><span data-stu-id="3884d-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3884d-508">Allow-Inbound-SQL-Front-end</span><span class="sxs-lookup"><span data-stu-id="3884d-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="3884d-509">Toestaan</span><span class="sxs-lookup"><span data-stu-id="3884d-509">Allow</span></span> | <span data-ttu-id="3884d-510">100</span><span class="sxs-lookup"><span data-stu-id="3884d-510">100</span></span> | <span data-ttu-id="3884d-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="3884d-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="3884d-512">1433</span><span class="sxs-lookup"><span data-stu-id="3884d-512">1433</span></span> | <span data-ttu-id="3884d-513">TCP</span><span class="sxs-lookup"><span data-stu-id="3884d-513">TCP</span></span> |

<span data-ttu-id="3884d-514">Aangezien sommige NSG's zijn gekoppeld aan afzonderlijke NIC's, gelden de regels voor resources die zijn geïmplementeerd via Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3884d-514">Since some of the NSGs are associated to individual NICs, the rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="3884d-515">Regels worden gecombineerd voor subnet en NIC, afhankelijk van hoe ze zijn gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="3884d-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="3884d-516">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="3884d-516">Next steps</span></span>
* <span data-ttu-id="3884d-517">[NSG's implementeren (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="3884d-518">[NSG's implementeren (klassiek)](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="3884d-519">[NSG-logboeken beheren](virtual-network-nsg-manage-log.md).</span><span class="sxs-lookup"><span data-stu-id="3884d-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="3884d-520">[Problemen met NSG’s oplossen] (virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="3884d-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>
