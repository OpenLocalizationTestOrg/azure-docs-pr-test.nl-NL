---
title: aaaMultiple VIP's voor Azure Load Balancer | Microsoft Docs
description: Overzicht van meerdere VIP's op Azure Load Balancer
services: load-balancer
documentationcenter: na
author: chkuhtz
manager: narayan
editor: 
ms.assetid: 748e50cd-3087-4c2e-a9e1-ac0ecce4f869
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/11/2016
ms.author: chkuhtz
ms.openlocfilehash: e186e1248e7d187e7efd0668dc3244465ce3e156
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="multiple-vips-for-azure-load-balancer"></a><span data-ttu-id="9801c-103">Meerdere VIP's voor Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="9801c-103">Multiple VIPs for Azure Load Balancer</span></span>

<span data-ttu-id="9801c-104">Azure Load Balancer kunt u tooload saldo services op meerdere poorten of meerdere IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="9801c-104">Azure Load Balancer allows you tooload balance services on multiple ports, multiple IP addresses, or both.</span></span> <span data-ttu-id="9801c-105">Over een set van virtuele machines kunt u openbare en interne load balancer definities tooload saldo stromen.</span><span class="sxs-lookup"><span data-stu-id="9801c-105">You can use public and internal load balancer definitions tooload balance flows across a set of VMs.</span></span>

<span data-ttu-id="9801c-106">Dit artikel wordt beschreven Hallo grondbeginselen van deze mogelijkheid, belangrijke concepten en beperkingen.</span><span class="sxs-lookup"><span data-stu-id="9801c-106">This article describes hello fundamentals of this ability, important concepts, and constraints.</span></span> <span data-ttu-id="9801c-107">Als u alleen tooexpose services op één IP-adres wilt, kunt u vinden vereenvoudigde instructies voor het [openbare](load-balancer-get-started-internet-portal.md) of [interne](load-balancer-get-started-ilb-arm-portal.md) load balancer-configuraties.</span><span class="sxs-lookup"><span data-stu-id="9801c-107">If you only intend tooexpose services on one IP address, you can find simplified instructions for [public](load-balancer-get-started-internet-portal.md) or [internal](load-balancer-get-started-ilb-arm-portal.md) load balancer configurations.</span></span> <span data-ttu-id="9801c-108">Meerdere VIP's toe te voegen, is incrementele tooa configuratie voor één VIP.</span><span class="sxs-lookup"><span data-stu-id="9801c-108">Adding Multiple VIPs is incremental tooa single VIP configuration.</span></span> <span data-ttu-id="9801c-109">Hallo-concepten in dit artikel gebruikt, kunt u een vereenvoudigde configuratie op elk gewenst moment uitbreiden.</span><span class="sxs-lookup"><span data-stu-id="9801c-109">Using hello concepts in this article, you can expand a simplified configuration at any time.</span></span>

<span data-ttu-id="9801c-110">Wanneer u een Azure Load Balancer definieert, worden een front-end- en een back-endconfiguratie zijn verbonden met regels.</span><span class="sxs-lookup"><span data-stu-id="9801c-110">When you define an Azure Load Balancer, a frontend and a backend configuration are connected with rules.</span></span> <span data-ttu-id="9801c-111">Hallo health test waarnaar wordt verwezen door het Hallo-regel is gebruikte toodetermine hoe nieuwe stromen tooa knooppunt in de back-endpool Hallo worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="9801c-111">hello health probe referenced by hello rule is used toodetermine how new flows are sent tooa node in hello backend pool.</span></span> <span data-ttu-id="9801c-112">Hallo-frontend is gedefinieerd door een virtuele IP-adres (VIP), dit een 3-tuple bestaat uit een IP-adres (openbare of interne), een transportprotocol (UDP of TCP) en een poortnummer is.</span><span class="sxs-lookup"><span data-stu-id="9801c-112">hello frontend is defined by a Virtual IP (VIP), which is a 3-tuple comprised of an IP address (public or internal), a transport protocol (UDP or TCP), and a port number.</span></span> <span data-ttu-id="9801c-113">Een DIP is dat een IP-adres op een Azure virtuele NIC tooa VM in de back-endpool Hallo gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="9801c-113">A DIP is an IP address on an Azure virtual NIC attached tooa VM in hello backend pool.</span></span>

<span data-ttu-id="9801c-114">Hallo volgende tabel bevat enkele voorbeeld-frontend-configuraties:</span><span class="sxs-lookup"><span data-stu-id="9801c-114">hello following table contains some example frontend configurations:</span></span>

| <span data-ttu-id="9801c-115">VIP</span><span class="sxs-lookup"><span data-stu-id="9801c-115">VIP</span></span> | <span data-ttu-id="9801c-116">IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-116">IP address</span></span> | <span data-ttu-id="9801c-117">Protocol</span><span class="sxs-lookup"><span data-stu-id="9801c-117">protocol</span></span> | <span data-ttu-id="9801c-118">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-118">port</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9801c-119">1</span><span class="sxs-lookup"><span data-stu-id="9801c-119">1</span></span> |<span data-ttu-id="9801c-120">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-120">65.52.0.1</span></span> |<span data-ttu-id="9801c-121">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-121">TCP</span></span> |<span data-ttu-id="9801c-122">80</span><span class="sxs-lookup"><span data-stu-id="9801c-122">80</span></span> |
| <span data-ttu-id="9801c-123">2</span><span class="sxs-lookup"><span data-stu-id="9801c-123">2</span></span> |<span data-ttu-id="9801c-124">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-124">65.52.0.1</span></span> |<span data-ttu-id="9801c-125">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-125">TCP</span></span> |<span data-ttu-id="9801c-126">*8080*</span><span class="sxs-lookup"><span data-stu-id="9801c-126">*8080*</span></span> |
| <span data-ttu-id="9801c-127">3</span><span class="sxs-lookup"><span data-stu-id="9801c-127">3</span></span> |<span data-ttu-id="9801c-128">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-128">65.52.0.1</span></span> |<span data-ttu-id="9801c-129">*UDP*</span><span class="sxs-lookup"><span data-stu-id="9801c-129">*UDP*</span></span> |<span data-ttu-id="9801c-130">80</span><span class="sxs-lookup"><span data-stu-id="9801c-130">80</span></span> |
| <span data-ttu-id="9801c-131">4</span><span class="sxs-lookup"><span data-stu-id="9801c-131">4</span></span> |<span data-ttu-id="9801c-132">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="9801c-132">*65.52.0.2*</span></span> |<span data-ttu-id="9801c-133">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-133">TCP</span></span> |<span data-ttu-id="9801c-134">80</span><span class="sxs-lookup"><span data-stu-id="9801c-134">80</span></span> |

<span data-ttu-id="9801c-135">Hallo tabel ziet u vier verschillende frontends.</span><span class="sxs-lookup"><span data-stu-id="9801c-135">hello table shows four different frontends.</span></span> <span data-ttu-id="9801c-136">Frontends #1, #2 en &#3; zijn een enkele VIP met meerdere regels.</span><span class="sxs-lookup"><span data-stu-id="9801c-136">Frontends #1, #2 and #3 are a single VIP with multiple rules.</span></span> <span data-ttu-id="9801c-137">Hallo hetzelfde IP-adres wordt gebruikt, maar Hallo-poort of -protocol is verschillend voor elke frontend.</span><span class="sxs-lookup"><span data-stu-id="9801c-137">hello same IP address is used but hello port or protocol is different for each frontend.</span></span> <span data-ttu-id="9801c-138">Frontends #1 en #4 zijn een voorbeeld van meerdere VIP's waar hello dezelfde frontend-protocol en poort opnieuw worden gebruikt tussen meerdere VIP's.</span><span class="sxs-lookup"><span data-stu-id="9801c-138">Frontends #1 and #4 are an example of Multiple VIPs, where hello same frontend protocol and port are reused across multiple VIPs.</span></span>

<span data-ttu-id="9801c-139">Azure Load Balancer biedt flexibiliteit voor het definiëren van regels voor taakverdeling Hallo.</span><span class="sxs-lookup"><span data-stu-id="9801c-139">Azure Load Balancer provides flexibility in defining hello load balancing rules.</span></span> <span data-ttu-id="9801c-140">Een regel verklaart hoe een adres en poort op Hallo frontend toegewezen toohello doeladres en poort op Hallo back-end.</span><span class="sxs-lookup"><span data-stu-id="9801c-140">A rule declares how an address and port on hello frontend is mapped toohello destination address and port on hello backend.</span></span> <span data-ttu-id="9801c-141">Of back-end-poorten zijn opnieuw gebruikt verschillende regels, is afhankelijk van Hallo type Hallo regel.</span><span class="sxs-lookup"><span data-stu-id="9801c-141">Whether or not backend ports are reused across rules depends on hello type of hello rule.</span></span> <span data-ttu-id="9801c-142">Elk type regel heeft bepaalde vereisten die invloed kunnen zijn op de host-configuratie en test ontwerp.</span><span class="sxs-lookup"><span data-stu-id="9801c-142">Each type of rule has specific requirements that can affect host configuration and probe design.</span></span> <span data-ttu-id="9801c-143">Er zijn twee typen regels:</span><span class="sxs-lookup"><span data-stu-id="9801c-143">There are two types of rules:</span></span>

1. <span data-ttu-id="9801c-144">de standaardregel Hallo met geen back endpoort opnieuw gebruiken</span><span class="sxs-lookup"><span data-stu-id="9801c-144">hello default rule with no backend port reuse</span></span>
2. <span data-ttu-id="9801c-145">Hallo zwevend IP regel waar back-end-poorten worden hergebruikt</span><span class="sxs-lookup"><span data-stu-id="9801c-145">hello Floating IP rule where backend ports are reused</span></span>

<span data-ttu-id="9801c-146">Azure Load Balancer kunt u toomix beide typen-regel op Hallo van dezelfde load balancer-configuratie.</span><span class="sxs-lookup"><span data-stu-id="9801c-146">Azure Load Balancer allows you toomix both rule types on hello same load balancer configuration.</span></span> <span data-ttu-id="9801c-147">Hallo load balancer kunt gebruiken ze tegelijkertijd voor een bepaalde virtuele machine of een combinatie hiervan, zolang u Hallo beperkingen van de regel Hallo naleeft.</span><span class="sxs-lookup"><span data-stu-id="9801c-147">hello load balancer can use them simultaneously for a given VM, or any combination, as long as you abide by hello constraints of hello rule.</span></span> <span data-ttu-id="9801c-148">Welke regeltype dat u kiest, is afhankelijk van Hallo vereisten van uw toepassing en Hallo complexiteit ondersteunen dat de configuratie.</span><span class="sxs-lookup"><span data-stu-id="9801c-148">Which rule type you choose depends on hello requirements of your application and hello complexity of supporting that configuration.</span></span> <span data-ttu-id="9801c-149">U moet evalueren welke regeltypen zijn het meest geschikt is voor uw scenario.</span><span class="sxs-lookup"><span data-stu-id="9801c-149">You should evaluate which rule types are best for your scenario.</span></span>

<span data-ttu-id="9801c-150">We verkennen deze scenario's verder door te beginnen met het standaardgedrag Hallo.</span><span class="sxs-lookup"><span data-stu-id="9801c-150">We explore these scenarios further by starting with hello default behavior.</span></span>

## <a name="rule-type-1-no-backend-port-reuse"></a><span data-ttu-id="9801c-151">Regeltype #1: Er is geen back-end-poort opnieuw gebruiken</span><span class="sxs-lookup"><span data-stu-id="9801c-151">Rule type #1: No backend port reuse</span></span>

![MultiVIP-afbeelding](./media/load-balancer-multivip-overview/load-balancer-multivip.png)

<span data-ttu-id="9801c-153">In dit scenario worden Hallo frontend VIP's als volgt geconfigureerd:</span><span class="sxs-lookup"><span data-stu-id="9801c-153">In this scenario, hello frontend VIPs are configured as follows:</span></span>

| <span data-ttu-id="9801c-154">VIP</span><span class="sxs-lookup"><span data-stu-id="9801c-154">VIP</span></span> | <span data-ttu-id="9801c-155">IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-155">IP address</span></span> | <span data-ttu-id="9801c-156">Protocol</span><span class="sxs-lookup"><span data-stu-id="9801c-156">protocol</span></span> | <span data-ttu-id="9801c-157">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-157">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-159">1</span><span class="sxs-lookup"><span data-stu-id="9801c-159">1</span></span> |<span data-ttu-id="9801c-160">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-160">65.52.0.1</span></span> |<span data-ttu-id="9801c-161">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-161">TCP</span></span> |<span data-ttu-id="9801c-162">80</span><span class="sxs-lookup"><span data-stu-id="9801c-162">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-164">2</span><span class="sxs-lookup"><span data-stu-id="9801c-164">2</span></span> |<span data-ttu-id="9801c-165">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="9801c-165">*65.52.0.2*</span></span> |<span data-ttu-id="9801c-166">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-166">TCP</span></span> |<span data-ttu-id="9801c-167">80</span><span class="sxs-lookup"><span data-stu-id="9801c-167">80</span></span> |

<span data-ttu-id="9801c-168">Hallo DIP is de bestemming Hallo Hallo binnenkomende stroom.</span><span class="sxs-lookup"><span data-stu-id="9801c-168">hello DIP is hello destination of hello inbound flow.</span></span> <span data-ttu-id="9801c-169">In de back-endpool hello wordt elke VM Hallo desired-service op een unieke poort op een DIP.</span><span class="sxs-lookup"><span data-stu-id="9801c-169">In hello backend pool, each VM exposes hello desired service on a unique port on a DIP.</span></span> <span data-ttu-id="9801c-170">Deze service is gekoppeld aan Hallo frontend via de regeldefinitie van een.</span><span class="sxs-lookup"><span data-stu-id="9801c-170">This service is associated with hello frontend through a rule definition.</span></span>

<span data-ttu-id="9801c-171">We definiëren twee regels:</span><span class="sxs-lookup"><span data-stu-id="9801c-171">We define two rules:</span></span>

| <span data-ttu-id="9801c-172">Regel</span><span class="sxs-lookup"><span data-stu-id="9801c-172">Rule</span></span> | <span data-ttu-id="9801c-173">Frontend toewijzen</span><span class="sxs-lookup"><span data-stu-id="9801c-173">Map frontend</span></span> | <span data-ttu-id="9801c-174">toobackend van toepassingen</span><span class="sxs-lookup"><span data-stu-id="9801c-174">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9801c-175">1</span><span class="sxs-lookup"><span data-stu-id="9801c-175">1</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-177">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="9801c-177">VIP1:80</span></span> |![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-179">DIP1:80,</span><span class="sxs-lookup"><span data-stu-id="9801c-179">DIP1:80,</span></span> ![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-181">DIP2:80</span><span class="sxs-lookup"><span data-stu-id="9801c-181">DIP2:80</span></span> |
| <span data-ttu-id="9801c-182">2</span><span class="sxs-lookup"><span data-stu-id="9801c-182">2</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-184">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="9801c-184">VIP2:80</span></span> |![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-186">DIP1:81,</span><span class="sxs-lookup"><span data-stu-id="9801c-186">DIP1:81,</span></span> ![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-188">DIP2:81</span><span class="sxs-lookup"><span data-stu-id="9801c-188">DIP2:81</span></span> |

<span data-ttu-id="9801c-189">Hallo voltooid toewijzen in Azure Load Balancer is nu als volgt:</span><span class="sxs-lookup"><span data-stu-id="9801c-189">hello complete mapping in Azure Load Balancer is now as follows:</span></span>

| <span data-ttu-id="9801c-190">Regel</span><span class="sxs-lookup"><span data-stu-id="9801c-190">Rule</span></span> | <span data-ttu-id="9801c-191">VIP-IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-191">VIP IP address</span></span> | <span data-ttu-id="9801c-192">Protocol</span><span class="sxs-lookup"><span data-stu-id="9801c-192">protocol</span></span> | <span data-ttu-id="9801c-193">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-193">port</span></span> | <span data-ttu-id="9801c-194">Doel</span><span class="sxs-lookup"><span data-stu-id="9801c-194">Destination</span></span> | <span data-ttu-id="9801c-195">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-195">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![Regel](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-197">1</span><span class="sxs-lookup"><span data-stu-id="9801c-197">1</span></span> |<span data-ttu-id="9801c-198">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-198">65.52.0.1</span></span> |<span data-ttu-id="9801c-199">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-199">TCP</span></span> |<span data-ttu-id="9801c-200">80</span><span class="sxs-lookup"><span data-stu-id="9801c-200">80</span></span> |<span data-ttu-id="9801c-201">DIP IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-201">DIP IP Address</span></span> |<span data-ttu-id="9801c-202">80</span><span class="sxs-lookup"><span data-stu-id="9801c-202">80</span></span> |
| ![Regel](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-204">2</span><span class="sxs-lookup"><span data-stu-id="9801c-204">2</span></span> |<span data-ttu-id="9801c-205">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="9801c-205">65.52.0.2</span></span> |<span data-ttu-id="9801c-206">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-206">TCP</span></span> |<span data-ttu-id="9801c-207">80</span><span class="sxs-lookup"><span data-stu-id="9801c-207">80</span></span> |<span data-ttu-id="9801c-208">DIP IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-208">DIP IP Address</span></span> |<span data-ttu-id="9801c-209">81</span><span class="sxs-lookup"><span data-stu-id="9801c-209">81</span></span> |

<span data-ttu-id="9801c-210">Elke regel moet een stroom met een unieke combinatie van IP-adres en de doelpoort opleveren.</span><span class="sxs-lookup"><span data-stu-id="9801c-210">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="9801c-211">Door verschillende Hallo doelpoort van Hallo stroom kunnen meerdere regels leveren stromen toohello dezelfde DIP op verschillende poorten.</span><span class="sxs-lookup"><span data-stu-id="9801c-211">By varying hello destination port of hello flow, multiple rules can deliver flows toohello same DIP on different ports.</span></span>

<span data-ttu-id="9801c-212">Statuscontroles zijn altijd gerichte toohello DIP van een virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="9801c-212">Health probes are always directed toohello DIP of a VM.</span></span> <span data-ttu-id="9801c-213">U moet u zorgen dat uw test Hallo health Hallo VM weergeeft.</span><span class="sxs-lookup"><span data-stu-id="9801c-213">You must ensure you that your probe reflects hello health of hello VM.</span></span>

## <a name="rule-type-2-backend-port-reuse-by-using-floating-ip"></a><span data-ttu-id="9801c-214">Regeltype #2: back-end-poort opnieuw gebruiken met behulp van zwevend IP</span><span class="sxs-lookup"><span data-stu-id="9801c-214">Rule type #2: backend port reuse by using Floating IP</span></span>

<span data-ttu-id="9801c-215">Azure Load Balancer flexibel Hallo tooreuse Hallo front-endpoort over meerdere VIP's ongeacht Hallo regeltype dat u gebruikt.</span><span class="sxs-lookup"><span data-stu-id="9801c-215">Azure Load Balancer provides hello flexibility tooreuse hello frontend port across multiple VIPs regardless of hello rule type used.</span></span> <span data-ttu-id="9801c-216">Bovendien sommige toepassingsscenario's liever of Hallo dezelfde die wordt gebruikt door meerdere exemplaren van een toepassing op een enkele virtuele machine in de back-endpool hello toobe poort vereisen.</span><span class="sxs-lookup"><span data-stu-id="9801c-216">Additionally, some application scenarios prefer or require hello same port toobe used by multiple application instances on a single VM in hello backend pool.</span></span> <span data-ttu-id="9801c-217">Algemene voorbeelden poort hergebruik van omvatten clustering voor hoge beschikbaarheid, virtuele apparaten en het blootstellen van meerdere TLS eindpunten zonder opnieuw versleutelen.</span><span class="sxs-lookup"><span data-stu-id="9801c-217">Common examples of port reuse include clustering for high availability, network virtual appliances, and exposing multiple TLS endpoints without re-encryption.</span></span>

<span data-ttu-id="9801c-218">Als u tooreuse hello backendpoort over meerdere regels wilt, moet u zwevend IP inschakelen in de regeldefinitie Hallo.</span><span class="sxs-lookup"><span data-stu-id="9801c-218">If you want tooreuse hello backend port across multiple rules, you must enable Floating IP in hello rule definition.</span></span>

<span data-ttu-id="9801c-219">Zwevend IP is een deel van wat staat bekend als Direct Server retourneren (DSR).</span><span class="sxs-lookup"><span data-stu-id="9801c-219">Floating IP is a portion of what is known as Direct Server Return (DSR).</span></span> <span data-ttu-id="9801c-220">DSR bestaat uit twee delen: een stroom-topologie en een IP-schema.</span><span class="sxs-lookup"><span data-stu-id="9801c-220">DSR consists of two parts: a flow topology and an IP address mapping scheme.</span></span> <span data-ttu-id="9801c-221">Op een niveau platform werkt Azure Load Balancer altijd in een topologie van de stroom DSR ongeacht of zwevend IP is ingeschakeld of niet.</span><span class="sxs-lookup"><span data-stu-id="9801c-221">At a platform level, Azure Load Balancer always operates in a DSR flow topology regardless of whether Floating IP is enabled or not.</span></span> <span data-ttu-id="9801c-222">Dit betekent dat Hallo uitgaande deel uitmaakt van een stroom is altijd goed herschreven tooflow rechtstreeks back toohello oorsprong.</span><span class="sxs-lookup"><span data-stu-id="9801c-222">This means that hello outbound part of a flow is always correctly rewritten tooflow directly back toohello origin.</span></span>

<span data-ttu-id="9801c-223">Met regeltype Hallo standaard wordt Azure een traditionele load balancing-toewijzingsschema voor IP-adres voor eenvoudig te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="9801c-223">With hello default rule type, Azure exposes a traditional load balancing IP address mapping scheme for ease of use.</span></span> <span data-ttu-id="9801c-224">Inschakelen zwevend IP wijzigingen Hallo IP-adrestoewijzing schema tooallow voor extra flexibiliteit uitgelegd hieronder.</span><span class="sxs-lookup"><span data-stu-id="9801c-224">Enabling Floating IP changes hello IP address mapping scheme tooallow for additional flexibility as explained below.</span></span>

<span data-ttu-id="9801c-225">Hallo volgende diagram ziet u deze configuratie:</span><span class="sxs-lookup"><span data-stu-id="9801c-225">hello following diagram illustrates this configuration:</span></span>

![MultiVIP-afbeelding](./media/load-balancer-multivip-overview/load-balancer-multivip-dsr.png)

<span data-ttu-id="9801c-227">In dit scenario heeft elke virtuele machine in de back-endpool Hallo drie netwerkinterfaces:</span><span class="sxs-lookup"><span data-stu-id="9801c-227">For this scenario, every VM in hello backend pool has three network interfaces:</span></span>

* <span data-ttu-id="9801c-228">DIP: een virtuele NIC die is gekoppeld aan Hallo VM (IP-configuratie van Azure NIC resource)</span><span class="sxs-lookup"><span data-stu-id="9801c-228">DIP: a Virtual NIC associated with hello VM (IP configuration of Azure's NIC resource)</span></span>
* <span data-ttu-id="9801c-229">VIP1: een loopback-interface in het gastbesturingssysteem dat is geconfigureerd met IP-adres van VIP1</span><span class="sxs-lookup"><span data-stu-id="9801c-229">VIP1: a loopback interface within guest OS that is configured with IP address of VIP1</span></span>
* <span data-ttu-id="9801c-230">VIP2: een loopback-interface in het gastbesturingssysteem dat is geconfigureerd met IP-adres van VIP2</span><span class="sxs-lookup"><span data-stu-id="9801c-230">VIP2: a loopback interface within guest OS that is configured with IP address of VIP2</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9801c-231">Hallo-configuratie van de logische interfaces hello wordt uitgevoerd binnen Hallo gastbesturingssysteem.</span><span class="sxs-lookup"><span data-stu-id="9801c-231">hello configuration of hello logical interfaces is performed within hello guest OS.</span></span> <span data-ttu-id="9801c-232">Deze configuratie is niet uitgevoerd of worden beheerd door Azure.</span><span class="sxs-lookup"><span data-stu-id="9801c-232">This configuration is not performed or managed by Azure.</span></span> <span data-ttu-id="9801c-233">Zonder deze configuratie werken Hallo regels niet.</span><span class="sxs-lookup"><span data-stu-id="9801c-233">Without this configuration, hello rules will not function.</span></span> <span data-ttu-id="9801c-234">Health test definities Hallo DIP Hallo VM gebruiken in plaats van Hallo logische VIP.</span><span class="sxs-lookup"><span data-stu-id="9801c-234">Health probe definitions use hello DIP of hello VM rather than hello logical VIP.</span></span> <span data-ttu-id="9801c-235">Daarom moet uw service test antwoorden opgeven op een DIP-poort die Hallo-status van Hallo-service wordt aangeboden op Hallo logische VIP te weerspiegelen.</span><span class="sxs-lookup"><span data-stu-id="9801c-235">Therefore, your service must provide probe responses on a DIP port that reflect hello status of hello service offered on hello logical VIP.</span></span>

<span data-ttu-id="9801c-236">Stel Hallo dezelfde frontend-configuratie zoals in het voorgaande scenario Hallo:</span><span class="sxs-lookup"><span data-stu-id="9801c-236">Let's assume hello same frontend configuration as in hello previous scenario:</span></span>

| <span data-ttu-id="9801c-237">VIP</span><span class="sxs-lookup"><span data-stu-id="9801c-237">VIP</span></span> | <span data-ttu-id="9801c-238">IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-238">IP address</span></span> | <span data-ttu-id="9801c-239">Protocol</span><span class="sxs-lookup"><span data-stu-id="9801c-239">protocol</span></span> | <span data-ttu-id="9801c-240">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-240">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-242">1</span><span class="sxs-lookup"><span data-stu-id="9801c-242">1</span></span> |<span data-ttu-id="9801c-243">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-243">65.52.0.1</span></span> |<span data-ttu-id="9801c-244">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-244">TCP</span></span> |<span data-ttu-id="9801c-245">80</span><span class="sxs-lookup"><span data-stu-id="9801c-245">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-247">2</span><span class="sxs-lookup"><span data-stu-id="9801c-247">2</span></span> |<span data-ttu-id="9801c-248">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="9801c-248">*65.52.0.2*</span></span> |<span data-ttu-id="9801c-249">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-249">TCP</span></span> |<span data-ttu-id="9801c-250">80</span><span class="sxs-lookup"><span data-stu-id="9801c-250">80</span></span> |

<span data-ttu-id="9801c-251">We definiëren twee regels:</span><span class="sxs-lookup"><span data-stu-id="9801c-251">We define two rules:</span></span>

| <span data-ttu-id="9801c-252">Regel</span><span class="sxs-lookup"><span data-stu-id="9801c-252">Rule</span></span> | <span data-ttu-id="9801c-253">Frontend toewijzen</span><span class="sxs-lookup"><span data-stu-id="9801c-253">Map frontend</span></span> | <span data-ttu-id="9801c-254">toobackend van toepassingen</span><span class="sxs-lookup"><span data-stu-id="9801c-254">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9801c-255">1</span><span class="sxs-lookup"><span data-stu-id="9801c-255">1</span></span> |![Regel](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-257">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="9801c-257">VIP1:80</span></span> |![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-259">VIP1:80 (in VM1 en VM2)</span><span class="sxs-lookup"><span data-stu-id="9801c-259">VIP1:80 (in VM1 and VM2)</span></span> |
| <span data-ttu-id="9801c-260">2</span><span class="sxs-lookup"><span data-stu-id="9801c-260">2</span></span> |![Regel](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-262">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="9801c-262">VIP2:80</span></span> |![back-end](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-264">VIP2:80 (in VM1 en VM2)</span><span class="sxs-lookup"><span data-stu-id="9801c-264">VIP2:80 (in VM1 and VM2)</span></span> |

<span data-ttu-id="9801c-265">Hallo volgende tabel ziet u Hallo volledige toewijzing in Hallo load balancer:</span><span class="sxs-lookup"><span data-stu-id="9801c-265">hello following table shows hello complete mapping in hello load balancer:</span></span>

| <span data-ttu-id="9801c-266">Regel</span><span class="sxs-lookup"><span data-stu-id="9801c-266">Rule</span></span> | <span data-ttu-id="9801c-267">VIP-IP-adres</span><span class="sxs-lookup"><span data-stu-id="9801c-267">VIP IP address</span></span> | <span data-ttu-id="9801c-268">Protocol</span><span class="sxs-lookup"><span data-stu-id="9801c-268">protocol</span></span> | <span data-ttu-id="9801c-269">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-269">port</span></span> | <span data-ttu-id="9801c-270">Doel</span><span class="sxs-lookup"><span data-stu-id="9801c-270">Destination</span></span> | <span data-ttu-id="9801c-271">poort</span><span class="sxs-lookup"><span data-stu-id="9801c-271">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="9801c-273">1</span><span class="sxs-lookup"><span data-stu-id="9801c-273">1</span></span> |<span data-ttu-id="9801c-274">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="9801c-274">65.52.0.1</span></span> |<span data-ttu-id="9801c-275">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-275">TCP</span></span> |<span data-ttu-id="9801c-276">80</span><span class="sxs-lookup"><span data-stu-id="9801c-276">80</span></span> |<span data-ttu-id="9801c-277">hetzelfde als het VIP (65.52.0.1)</span><span class="sxs-lookup"><span data-stu-id="9801c-277">same as VIP (65.52.0.1)</span></span> |<span data-ttu-id="9801c-278">hetzelfde als het VIP (80)</span><span class="sxs-lookup"><span data-stu-id="9801c-278">same as VIP (80)</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="9801c-280">2</span><span class="sxs-lookup"><span data-stu-id="9801c-280">2</span></span> |<span data-ttu-id="9801c-281">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="9801c-281">65.52.0.2</span></span> |<span data-ttu-id="9801c-282">TCP</span><span class="sxs-lookup"><span data-stu-id="9801c-282">TCP</span></span> |<span data-ttu-id="9801c-283">80</span><span class="sxs-lookup"><span data-stu-id="9801c-283">80</span></span> |<span data-ttu-id="9801c-284">hetzelfde als het VIP (65.52.0.2)</span><span class="sxs-lookup"><span data-stu-id="9801c-284">same as VIP (65.52.0.2)</span></span> |<span data-ttu-id="9801c-285">hetzelfde als het VIP (80)</span><span class="sxs-lookup"><span data-stu-id="9801c-285">same as VIP (80)</span></span> |

<span data-ttu-id="9801c-286">Hallo bestemming Hallo stroom voor inkomende hello VIP-adres op Hallo loopback-interface in Hallo VM is.</span><span class="sxs-lookup"><span data-stu-id="9801c-286">hello destination of hello inbound flow is hello VIP address on hello loopback interface in hello VM.</span></span> <span data-ttu-id="9801c-287">Elke regel moet een stroom met een unieke combinatie van IP-adres en de doelpoort opleveren.</span><span class="sxs-lookup"><span data-stu-id="9801c-287">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="9801c-288">Door verschillende Hallo IP-adres van de stroom hello, hergebruik van de poort is mogelijk op Hallo van dezelfde virtuele machine.</span><span class="sxs-lookup"><span data-stu-id="9801c-288">By varying hello destination IP address of hello flow, port reuse is possible on hello same VM.</span></span> <span data-ttu-id="9801c-289">Uw service is blootgestelde toohello load balancer door deze binding toohello VIP van IP-adres en poort van Hallo respectieve loopback-interface.</span><span class="sxs-lookup"><span data-stu-id="9801c-289">Your service is exposed toohello load balancer by binding it toohello VIP’s IP address and port of hello respective loopback interface.</span></span>

<span data-ttu-id="9801c-290">Merk op dat in dit voorbeeld Hallo doelpoort niet wijzigt.</span><span class="sxs-lookup"><span data-stu-id="9801c-290">Notice that this example does not change hello destination port.</span></span> <span data-ttu-id="9801c-291">Hoewel dit een zwevend IP-scenario is, Azure Load Balancer biedt ook ondersteuning voor het definiëren van een back-end doelpoort voor regel toorewrite hello en toomake anders dan de Hallo frontend doelpoort.</span><span class="sxs-lookup"><span data-stu-id="9801c-291">Even though this is a Floating IP scenario, Azure Load Balancer also supports defining a rule toorewrite hello backend destination port and toomake it different from hello frontend destination port.</span></span>

<span data-ttu-id="9801c-292">Hallo regeltype zwevend IP is Hallo basis van verschillende patronen van load balancer-configuratie.</span><span class="sxs-lookup"><span data-stu-id="9801c-292">hello Floating IP rule type is hello foundation of several load balancer configuration patterns.</span></span> <span data-ttu-id="9801c-293">Een voorbeeld dat beschikbaar is Hallo [SQL AlwaysOn met meerdere Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) configuratie.</span><span class="sxs-lookup"><span data-stu-id="9801c-293">One example that is currently available is hello [SQL AlwaysOn with Multiple Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) configuration.</span></span> <span data-ttu-id="9801c-294">Na verloop van tijd documenteren we meer van deze scenario's.</span><span class="sxs-lookup"><span data-stu-id="9801c-294">Over time, we will document more of these scenarios.</span></span>

## <a name="limitations"></a><span data-ttu-id="9801c-295">Beperkingen</span><span class="sxs-lookup"><span data-stu-id="9801c-295">Limitations</span></span>

* <span data-ttu-id="9801c-296">Configuraties met meerdere VIP worden alleen ondersteund met IaaS VM's.</span><span class="sxs-lookup"><span data-stu-id="9801c-296">Multiple VIP configurations are only supported with IaaS VMs.</span></span>
* <span data-ttu-id="9801c-297">Met Hallo zwevend IP regel, moet uw toepassing hello DIP gebruiken voor uitgaande stromen.</span><span class="sxs-lookup"><span data-stu-id="9801c-297">With hello Floating IP rule, your application must use hello DIP for outbound flows.</span></span> <span data-ttu-id="9801c-298">Uw toepassing wordt gebonden toohello VIP-adres op Hallo loopback-interface in Hallo Gast OS geconfigureerd, klikt u vervolgens snat omzetten is niet beschikbaar toorewrite Hallo uitgaande stroom als Hallo-stroom is mislukt.</span><span class="sxs-lookup"><span data-stu-id="9801c-298">If your application binds toohello VIP address configured on hello loopback interface in hello guest OS, then SNAT is not available toorewrite hello outbound flow and hello flow fails.</span></span>
* <span data-ttu-id="9801c-299">Openbare IP-adressen hebben een invloed op de facturering.</span><span class="sxs-lookup"><span data-stu-id="9801c-299">Public IP addresses have an effect on billing.</span></span> <span data-ttu-id="9801c-300">Zie voor meer informatie [prijzen van IP-adres](https://azure.microsoft.com/pricing/details/ip-addresses/)</span><span class="sxs-lookup"><span data-stu-id="9801c-300">For more information, see [IP Address pricing](https://azure.microsoft.com/pricing/details/ip-addresses/)</span></span>
* <span data-ttu-id="9801c-301">Abonnement-beperkingen gelden.</span><span class="sxs-lookup"><span data-stu-id="9801c-301">Subscription limits apply.</span></span> <span data-ttu-id="9801c-302">Zie voor meer informatie [Servicelimieten](../azure-subscription-service-limits.md#networking-limits) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="9801c-302">For more information, see [Service limits](../azure-subscription-service-limits.md#networking-limits) for details.</span></span>
