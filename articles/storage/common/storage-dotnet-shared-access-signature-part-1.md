---
title: aaaUsing shared access signatures (SAS) in Azure Storage | Microsoft Docs
description: Meer informatie over toouse shared access signatures (SAS) toodelegate toegang tooAzure opslagbronnen, zoals blobs, wachtrijen, tabellen en bestanden.
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 5b75a3c25bcfb9f1ceb81f31dc2d42376bd105cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="3f4c6-103">Met behulp van handtekeningen voor gedeelde toegang (SAS)</span><span class="sxs-lookup"><span data-stu-id="3f4c6-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="3f4c6-104">Een shared access signature (SAS) biedt een manier toogrant beperkte toegang tooobjects in uw opslagaccount tooother clients, zonder dat de sleutel van uw account.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="3f4c6-105">In dit artikel wordt een overzicht gegeven van SAS-model hello, SAS aanbevolen procedures en bekijk enkele voorbeelden.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="3f4c6-106">Zie voor aanvullende codevoorbeelden via SAS afgezien van wat die hier wordt gepresenteerd, [aan de slag met Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) en andere voorbeelden die beschikbaar zijn in Hallo [Azure codevoorbeelden](https://azure.microsoft.com/documentation/samples/?service=storage) bibliotheek.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="3f4c6-107">Hallo voorbeeldtoepassingen downloaden en uitvoeren, of blader Hallo-code op GitHub.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="3f4c6-108">Wat is er een shared access signature?</span><span class="sxs-lookup"><span data-stu-id="3f4c6-108">What is a shared access signature?</span></span>
<span data-ttu-id="3f4c6-109">Een shared access signature biedt tooresources gedelegeerde toegang in uw opslagaccount.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="3f4c6-110">U kunt met een SAS verlenen clients toegang krijgen tot tooresources in uw opslagaccount zonder het delen van de sleutels van uw account.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="3f4c6-111">Dit is de belangrijkste punt Hallo van het gebruik van handtekeningen voor gedeelde toegang in uw toepassingen--een SAS is een veilige manier tooshare uw opslagresources zonder uw sleutels account gevaar te brengen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="3f4c6-112">Een SAS biedt gedetailleerde controle over Hallo type toegang u tooclients die Hallo SAS verleent hebben, met inbegrip van:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="3f4c6-113">via welke Hallo SAS geldig is, met inbegrip van de begin- en verlooptijd Hallo Hallo Hello-interval.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="3f4c6-114">Hallo machtigingen verleend door Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="3f4c6-115">Een SAS voor een blob kan bijvoorbeeld verleent u lees en machtigingen toothat blob schrijven maar machtigingen niet verwijderen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="3f4c6-116">Een optionele IP-adres of een bereik met IP-adressen waarop Azure Storage accepteert Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="3f4c6-117">U kunt bijvoorbeeld een bereik met IP-adressen die behoren tooyour organisatie opgeven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="3f4c6-118">Hallo-protocol gedurende welke Azure Storage Hallo SAS accepteert.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="3f4c6-119">U kunt deze optionele parameter toorestrict toegang tooclients via HTTPS gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="3f4c6-120">Wanneer moet u een shared access signature gebruiken?</span><span class="sxs-lookup"><span data-stu-id="3f4c6-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="3f4c6-121">U kunt een SAS gebruiken als u wilt tooprovide toegang tooresources in uw storage-account tooany client niet toegangssleutels van uw storage-account beschikken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="3f4c6-122">Uw opslagaccount omvat zowel een primaire en secundaire toegangssleutel voor, die beide Verleen beheerderstoegang tooyour account en alle resources binnen het.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="3f4c6-123">De mogelijkheid om uw account toohello van schadelijke of Achteloos gebruik blootstellen van een van deze sleutels worden geopend.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="3f4c6-124">Handtekeningen voor gedeelde toegang bieden een veilige alternatief waarmee clients tooread-, schrijf- en verwijderen van gegevens in uw opslagaccount volgens toohello machtigingen die u expliciet hebt verleend, en zonder dat nodig is voor de accountsleutel van een.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="3f4c6-125">Een veelvoorkomend scenario waarin een SAS handig is, is een service waar gebruikers lezen en schrijven van hun eigen gegevens tooyour storage-account.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="3f4c6-126">In een scenario waar de gebruikersgegevens worden opgeslagen in een opslagaccount, zijn er twee typische ontwerppatronen:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="3f4c6-127">Clients uploaden en downloaden van gegevens via een front-proxyservice, die verificatie uitvoert.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="3f4c6-128">Deze front-proxyservice heeft Hallo voordeel van het toestaan van validatie van bedrijfsregels, maar voor grote hoeveelheden gegevens of transacties, hoog volume, maken van een service die kan worden geschaald toomatch vraag mogelijk dure of moeilijk.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![Scenario-diagram: front-proxy-service](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="3f4c6-130">Een lichtgewicht service verifieert Hallo-client zo nodig en genereert vervolgens een SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="3f4c6-131">Zodra het Hallo-client ontvangt Hallo SAS, toegang te krijgen tot resources voor storage-account rechtstreeks met de Hallo-machtigingen die zijn gedefinieerd door Hallo SAS en voor hello-interval is toegestaan door Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="3f4c6-132">Hallo SAS vermindert Hallo nodig voor het doorsturen van alle gegevens via Hallo front-proxy-service.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![Scenario-diagram: SAS provider-service](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="3f4c6-134">Veel echte services kunnen een hybride versie van deze twee methoden gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="3f4c6-135">Sommige gegevens kunnen bijvoorbeeld worden verwerkt en gevalideerd via Hallo front-proxy, terwijl andere gegevens wordt opgeslagen en/of rechtstreeks via SAS lezen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="3f4c6-136">Bovendien moet u toouse een SAS tooauthenticate Hallo bronobject in een kopieerbewerking in bepaalde scenario's:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="3f4c6-137">Wanneer u een blob tooanother blob die zich in een ander opslagaccount bevindt kopieert, moet u een blob SAS tooauthenticate Hallo bron.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="3f4c6-138">U kunt desgewenst een SAS tooauthenticate Hallo bestemmings-blob ook gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="3f4c6-139">Wanneer u een bestand tooanother die zich in een ander opslagaccount bevindt kopieert, moet u een SAS tooauthenticate Hallo-bronbestand.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="3f4c6-140">U kunt desgewenst een SAS tooauthenticate Hallo doelbestand ook gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="3f4c6-141">Wanneer u een blob tooa-bestand of een bestand tooa blob kopieert, moet u een SAS tooauthenticate Hallo bronobject, zelfs als Hallo bron- en doelserver objecten zich binnen Hallo hetzelfde bevinden opslagaccount.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="3f4c6-142">Typen handtekeningen voor gedeelde toegang</span><span class="sxs-lookup"><span data-stu-id="3f4c6-142">Types of shared access signatures</span></span>
<span data-ttu-id="3f4c6-143">U kunt twee soorten handtekeningen voor gedeelde toegang maken:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="3f4c6-144">**Service-SAS.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-144">**Service SAS.**</span></span> <span data-ttu-id="3f4c6-145">Hallo-service-SAS gemachtigden toegang tot tooa resource in slechts één van de opslagservices Hallo: Hallo Blob, Queue, Table of bestand service.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="3f4c6-146">Zie [samenstellen van een Service-SAS](https://msdn.microsoft.com/library/dn140255.aspx) en [voorbeelden van Service-SAS](https://msdn.microsoft.com/library/dn140256.aspx) voor gedetailleerde informatie over het maken van Hallo service-SAS-token.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="3f4c6-147">**Account-SAS.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-147">**Account SAS.**</span></span> <span data-ttu-id="3f4c6-148">Hallo-account-SAS gemachtigden toegang tot tooresources in een of meer van de opslagservices Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="3f4c6-149">Alle Hallo bewerkingen die beschikbaar zijn via een service-SAS zijn ook beschikbaar via een account-SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="3f4c6-150">Met account-SAS hello, kunt u bovendien toegang toooperations die van toepassing zijn tooa service, zoals gegeven delegeren **Get/Set-Service-eigenschappen** en **Service statistieken ophalen**. U kunt ook toegang tooread-, schrijf- en delete-bewerkingen op de blob-containers, tabellen, wachtrijen en bestandsshares die niet zijn toegestaan als een service-SAS delegeren.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="3f4c6-151">Zie [samenstellen van een Account-SAS](https://msdn.microsoft.com/library/mt584140.aspx) voor gedetailleerde informatie over het maken van Hallo account-SAS-token.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="3f4c6-152">De werking van een shared access signature</span><span class="sxs-lookup"><span data-stu-id="3f4c6-152">How a shared access signature works</span></span>
<span data-ttu-id="3f4c6-153">Een shared access signature is een ondertekende URI die wijst tooone of meer opslagbronnen en bevat een token dat een speciale reeks queryparameters bevat.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="3f4c6-154">Hallo token geeft aan hoe Hallo bronnen zijn toegankelijk door Hallo-client.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="3f4c6-155">Een van de queryparameters Hallo, Hallo handtekening, is gemaakt op basis van Hallo SAS-parameters en ondertekend door de sleutel van Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="3f4c6-156">Deze handtekening wordt gebruikt door Azure Storage tooauthenticate Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="3f4c6-157">Hier volgt een voorbeeld van een SAS-URI en weergeeft Hallo resource-URI Hallo SAS-token:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![Onderdelen van een SAS-URI](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="3f4c6-159">Hallo SAS-token is een tekenreeks die u op Hallo genereren *client* kant (Zie Hallo [SAS-voorbeelden](#sas-examples) sectie voor codevoorbeelden).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="3f4c6-160">Een SAS-token met Hallo storage-clientbibliotheek genereren bijvoorbeeld wordt niet bijgehouden door Azure Storage op elke manier.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="3f4c6-161">Aan de clientzijde Hallo kunt u een onbeperkt aantal SAS-tokens.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="3f4c6-162">Wanneer een client een SAS-URI tooAzure opslag als onderdeel van een aanvraag biedt, controleert Hallo service Hallo SAS-parameters en handtekening tooverify geldig voor het verifiëren van Hallo-aanvraag is.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="3f4c6-163">Hallo-aanvraag is geverifieerd als Hallo-service wordt gecontroleerd dat Hallo-handtekening is geldig.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="3f4c6-164">Anders is Hallo verzoek afgewezen met foutcode 403 (verboden).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="3f4c6-165">Parameters voor gedeelde toegang handtekening</span><span class="sxs-lookup"><span data-stu-id="3f4c6-165">Shared access signature parameters</span></span>
<span data-ttu-id="3f4c6-166">Hallo account-SAS en service-SAS-tokens bevatten enkele algemene parameters en ook rekening houden met een aantal parameters die anders zijn.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="3f4c6-167">Parameters algemene tooaccount SAS en service-SAS-tokens</span><span class="sxs-lookup"><span data-stu-id="3f4c6-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="3f4c6-168">**API-versie** een optionele parameter waarmee Hallo opslag versie toouse tooexecute Hallo serviceaanvraag.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="3f4c6-169">**Service-versie** een vereiste parameter waarmee Hallo opslag versie toouse tooauthenticate Hallo serviceaanvraag.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="3f4c6-170">**De begintijd.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-170">**Start time.**</span></span> <span data-ttu-id="3f4c6-171">Dit is Hallo tijd op welke Hallo SAS geldig wordt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="3f4c6-172">de begintijd Hallo voor een shared access signature is optioneel.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="3f4c6-173">Als een begintijd wordt weggelaten, wordt Hallo SAS onmiddellijk van kracht.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="3f4c6-174">Hallo begintijd moet worden uitgedrukt in UTC (Coordinated Universal Time), met een speciale UTC-aanduiding ('Z'), bijvoorbeeld `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="3f4c6-175">**Verlooptijd.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-175">**Expiry time.**</span></span> <span data-ttu-id="3f4c6-176">Dit is Hallo tijd waarna hello SAS niet meer geldig is.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="3f4c6-177">Aanbevolen dat u een verlooptijd voor een SAS opgeven, of deze aan een opgeslagen toegangsbeleid koppelen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="3f4c6-178">Hallo verlooptijdstip moet worden uitgedrukt in UTC (Coordinated Universal Time), met een speciale UTC-aanduiding ('Z'), bijvoorbeeld `1994-11-05T13:15:30Z` (Zie meer hieronder).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="3f4c6-179">**Machtigingen.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-179">**Permissions.**</span></span> <span data-ttu-id="3f4c6-180">Hallo-machtigingen die zijn opgegeven op Hallo SAS aangeven welke bewerkingen Hallo client tegen Hallo storage resource met behulp van Hallo SAS kunt uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="3f4c6-181">Beschikbare machtigingen verschillen voor een account-SAS en een service-SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="3f4c6-182">**IP-ADRES.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-182">**IP.**</span></span> <span data-ttu-id="3f4c6-183">Een optionele parameter waarmee een IP-adres of een bereik met IP-adressen buiten Azure (Zie de sectie Hallo [routering configuratie sessiestatus](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) voor Express Route) uit welke tooaccept-aanvragen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="3f4c6-184">**Protocol.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-184">**Protocol.**</span></span> <span data-ttu-id="3f4c6-185">Een optionele parameter waarmee Hallo protocol toegestaan voor een aanvraag.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="3f4c6-186">Mogelijke waarden zijn zowel HTTP als HTTPS (`https,http`), wordt de standaardwaarde Hallo- of HTTPS (`https`).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="3f4c6-187">Houd er rekening mee dat HTTP alleen geen toegestane waarde is.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="3f4c6-188">**Handtekening.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-188">**Signature.**</span></span> <span data-ttu-id="3f4c6-189">Hallo-handtekening is samengesteld uit Hallo andere parameters opgegeven als deel token, en vervolgens versleuteld.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="3f4c6-190">Deze tooauthenticate Hallo SAS gebruikt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="3f4c6-191">Parameters voor een service-SAS-token</span><span class="sxs-lookup"><span data-stu-id="3f4c6-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="3f4c6-192">**Storage-resource.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-192">**Storage resource.**</span></span> <span data-ttu-id="3f4c6-193">Storage-resources die u kunt toegang met een service te delegeren SAS zijn onder andere:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="3f4c6-194">Containers en blobs</span><span class="sxs-lookup"><span data-stu-id="3f4c6-194">Containers and blobs</span></span>
  * <span data-ttu-id="3f4c6-195">Bestandsshares en bestanden</span><span class="sxs-lookup"><span data-stu-id="3f4c6-195">File shares and files</span></span>
  * <span data-ttu-id="3f4c6-196">Wachtrijen</span><span class="sxs-lookup"><span data-stu-id="3f4c6-196">Queues</span></span>
  * <span data-ttu-id="3f4c6-197">Tabellen en -bereiken van de tabelentiteiten.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="3f4c6-198">Parameters voor een account-SAS-token</span><span class="sxs-lookup"><span data-stu-id="3f4c6-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="3f4c6-199">**De service of services.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-199">**Service or services.**</span></span> <span data-ttu-id="3f4c6-200">Een account-SAS delegeert toegang tooone of meer van de opslagservices Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="3f4c6-201">U kunt bijvoorbeeld een account-SAS of gemachtigden toegang toohello Blob en het bestand service tot maken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="3f4c6-202">Of u een SAS of gemachtigden toegang hebt tot vier services tooall (Blob, Queue, Table en -bestand) kunt maken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="3f4c6-203">**Opslag resourcetypen.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-203">**Storage resource types.**</span></span> <span data-ttu-id="3f4c6-204">Een account-SAS geldt tooone of meer klassen van opslagbronnen in plaats van een specifieke bron.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="3f4c6-205">U kunt een account SAS toodelegate toegang te maken:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="3f4c6-206">Serviceniveau-API's, die worden aangeroepen voor Hallo storage account resource.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="3f4c6-207">Voorbeelden zijn onder meer **Get/Set-Service-eigenschappen**, **ophalen Service statistieken**, en **lijst Containers/wachtrijen/tabellen, Shares**.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="3f4c6-208">Niveau van de container-API's, die tegen Hallo containerobjecten worden aangeroepen voor elke service: blob-containers, wachtrijen, tabellen en bestandsshares.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="3f4c6-209">Voorbeelden zijn **maken/verwijderen Container**, **wachtrij maken/verwijderen**, **maken/verwijderen tabel**, **Share maken/verwijderen**, en  **Blobs/bestanden en mappen weergeven**.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="3f4c6-210">Op objectniveau API's, die worden aangeroepen voor blobs, Wachtrijberichten, tabelentiteiten en bestanden.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="3f4c6-211">Bijvoorbeeld: **Blob plaatsen**, **Query entiteit**, **berichten ophalen**, en **bestand maken**.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="3f4c6-212">Voorbeelden van SAS-URI 's</span><span class="sxs-lookup"><span data-stu-id="3f4c6-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="3f4c6-213">Voorbeeld van de service-SAS-URI</span><span class="sxs-lookup"><span data-stu-id="3f4c6-213">Service SAS URI example</span></span>

<span data-ttu-id="3f4c6-214">Hier volgt een voorbeeld van een SAS-URI die biedt lezen en schrijven machtigingen tooa blob-service.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="3f4c6-215">Hallo tabel uitsplitsing van elk deel van Hallo URI toounderstand hoe het bijdraagt toohello SAS:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="3f4c6-216">Naam</span><span class="sxs-lookup"><span data-stu-id="3f4c6-216">Name</span></span> | <span data-ttu-id="3f4c6-217">SAS gedeelte</span><span class="sxs-lookup"><span data-stu-id="3f4c6-217">SAS portion</span></span> | <span data-ttu-id="3f4c6-218">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="3f4c6-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3f4c6-219">BLOB-URI</span><span class="sxs-lookup"><span data-stu-id="3f4c6-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="3f4c6-220">Hallo-adres van Hallo blob.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-220">hello address of hello blob.</span></span> <span data-ttu-id="3f4c6-221">Houd er rekening mee dat via HTTPS wordt sterk aanbevolen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="3f4c6-222">Storage services versie</span><span class="sxs-lookup"><span data-stu-id="3f4c6-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="3f4c6-223">Voor services versie 2012-02-12-opslag en later Hallo versie toouse door deze parameter wordt aangegeven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="3f4c6-224">Begintijd</span><span class="sxs-lookup"><span data-stu-id="3f4c6-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="3f4c6-225">Opgegeven in UTC-tijd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-225">Specified in UTC time.</span></span> <span data-ttu-id="3f4c6-226">Als u Hallo SAS toobe geldig onmiddellijk wilt, weglaten Hallo begintijd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="3f4c6-227">Verlooptijd</span><span class="sxs-lookup"><span data-stu-id="3f4c6-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="3f4c6-228">Opgegeven in UTC-tijd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="3f4c6-229">Resource</span><span class="sxs-lookup"><span data-stu-id="3f4c6-229">Resource</span></span> |`sr=b` |<span data-ttu-id="3f4c6-230">Hallo-bron is een blob.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="3f4c6-231">Machtigingen</span><span class="sxs-lookup"><span data-stu-id="3f4c6-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="3f4c6-232">Hallo machtigingen verleend door Hallo SAS Read (r) opnemen en (b) schrijven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="3f4c6-233">IP-bereik</span><span class="sxs-lookup"><span data-stu-id="3f4c6-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="3f4c6-234">Hallo bereik van IP-adressen waaruit een aanvraag wordt geaccepteerd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="3f4c6-235">Protocol</span><span class="sxs-lookup"><span data-stu-id="3f4c6-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="3f4c6-236">Alleen-aanvragen via HTTPS zijn toegestaan.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="3f4c6-237">Handtekening</span><span class="sxs-lookup"><span data-stu-id="3f4c6-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="3f4c6-238">Tooauthenticate toegang toohello blob wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="3f4c6-239">Hallo-handtekening is een HMAC berekend over een tekenreeks te ondertekenen en de sleutel met behulp van de algoritme SHA256 hello en vervolgens gecodeerd met Base64-codering.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="3f4c6-240">Voorbeeld van account-SAS-URI</span><span class="sxs-lookup"><span data-stu-id="3f4c6-240">Account SAS URI example</span></span>

<span data-ttu-id="3f4c6-241">Hier volgt een voorbeeld van een SAS-account dat wordt gebruikt dezelfde algemene parameters op Hallo token Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="3f4c6-242">Sinds deze parameters hierboven zijn beschreven, worden ze hier niet beschreven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="3f4c6-243">Alleen Hallo parameters die zijn specifieke tooaccount die SAS in Hallo onderstaande tabel worden beschreven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="3f4c6-244">Naam</span><span class="sxs-lookup"><span data-stu-id="3f4c6-244">Name</span></span> | <span data-ttu-id="3f4c6-245">SAS gedeelte</span><span class="sxs-lookup"><span data-stu-id="3f4c6-245">SAS portion</span></span> | <span data-ttu-id="3f4c6-246">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="3f4c6-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3f4c6-247">Resource-URI</span><span class="sxs-lookup"><span data-stu-id="3f4c6-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="3f4c6-248">Hallo eindpunt Blob-service, en de parameters voor service-eigenschappen (als deze wordt aangeroepen met GET) ophalen of instellen van eigenschappen (als deze wordt aangeroepen met SET) van de service.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="3f4c6-249">Services</span><span class="sxs-lookup"><span data-stu-id="3f4c6-249">Services</span></span> |`ss=bf` |<span data-ttu-id="3f4c6-250">Hallo SAS bestands- en toohello Blob is van toepassing</span><span class="sxs-lookup"><span data-stu-id="3f4c6-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="3f4c6-251">Brontypen</span><span class="sxs-lookup"><span data-stu-id="3f4c6-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="3f4c6-252">Hallo SAS geldt tooservice serviceniveaubewerkingen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="3f4c6-253">Machtigingen</span><span class="sxs-lookup"><span data-stu-id="3f4c6-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="3f4c6-254">Hallo machtigingen verlenen toegang tooread- en schrijfbewerkingen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="3f4c6-255">Gezien het feit dat machtigingen zijn beperkt toohello serviceniveau, toegankelijk bewerkingen met deze SAS zijn **Blob-Service-eigenschappen ophalen** (gelezen) en **Blob-Service-eigenschappen instellen** (schrijven).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="3f4c6-256">Met een andere resource URI hello dezelfde SAS-token kan echter ook wel toodelegate toegang te gebruikt**statistieken voor Blob-Service ophalen** (gelezen).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="3f4c6-257">Een SAS met een opgeslagen-beleid beheren</span><span class="sxs-lookup"><span data-stu-id="3f4c6-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="3f4c6-258">Een shared access signature kan duren voordat een van twee vormen:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="3f4c6-259">**Ad-hoc SAS:** wanneer u een ad-hoc SAS, begintijd hello, verlooptijd maken en machtigingen voor Hallo SAS zijn opgegeven in Hallo SAS-URI (of impliciet, in geval van Hallo waar de begintijd wordt weggelaten).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="3f4c6-260">Dit type SAS kan worden gemaakt als een account-SAS of een service-SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="3f4c6-261">**SAS met opgeslagen toegangsbeleid:** een opgeslagen-beleid is gedefinieerd in een resourcecontainer een blob-container, tabel, wachtrijen of bestandsshare-- en gebruikte toomanage beperkingen voor een of meer handtekeningen voor gedeelde toegang kan worden.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="3f4c6-262">Als u een SAS aan een opgeslagen toegangsbeleid koppelt, overgenomen Hallo SAS Hallo beperkingen--Hallo begintijd, verlooptijd en machtigingen--gedefinieerd voor toegangsbeleid Hallo opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="3f4c6-263">Op dit moment moet een SAS-account een ad-hoc SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="3f4c6-264">Opgeslagen-beleidsregels worden nog niet ondersteund voor account-SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="3f4c6-265">Hallo verschil tussen twee Hallo formulieren is belangrijk voor één key '-scenario: intrekken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="3f4c6-266">Omdat een SAS-URI een URL is, iedereen die Hallo verkrijgt SAS kunt gebruiken, ongeacht wie deze oorspronkelijk is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="3f4c6-267">Als een SAS openbaar wordt gepubliceerd, kan deze worden gebruikt door iedereen in Hallo wereld.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="3f4c6-268">Een SAS verleent toegang tooresources tooanyone beschikken deze totdat een van de vier dingen gebeurt:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="3f4c6-269">Hallo verlooptijd opgegeven op Hallo die SAS is bereikt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="3f4c6-270">Hallo verlooptijd opgegeven op Hallo opgeslagen toegangsbeleid waarnaar wordt verwezen door Hallo die SAS is bereikt (als een opgeslagen-beleid wordt verwezen, en als een verlooptijd is opgegeven).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="3f4c6-271">Dit kan optreden omdat hello-interval is verstreken of omdat u Hallo opgeslagen toegangsbeleid met een verlooptijd in Hallo vroeger, namelijk eenrichtingssessie toorevoke Hallo SAS hebt gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="3f4c6-272">Hallo toegangsbeleid waarnaar wordt verwezen door Hallo die SAS wordt verwijderd, die een andere manier toorevoke Hallo SAS is opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="3f4c6-273">Let op: als u het opnieuw maken Hallo opgeslagen toegangsbeleid met exact dezelfde naam, alle bestaande SAS Hallo tokens zal opnieuw worden geldig volgens toohello machtigingen die zijn gekoppeld aan deze opgeslagen toegangsbeleid (ervan uitgaande dat Hallo verlooptijd op Hallo SAS is niet verstreken).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="3f4c6-274">Als u toorevoke Hallo SAS zijn wilde, worden toouse ervoor dat een andere naam op als u het Hallo-beleid met een verlooptijd in toekomstige Hallo opnieuw maken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="3f4c6-275">Hallo accountsleutel die gebruikt toocreate Hallo SAS is wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="3f4c6-276">De accountsleutel van een opnieuw gegenereerd, wordt alle toepassingsonderdelen met die sleutel toofail tooauthenticate totdat ze zijn bijgewerkt toouse ofwel Hallo andere geldig accountsleutel of Hallo account zojuist opnieuw gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3f4c6-277">Een shared access signature-URI is gekoppeld aan Hallo account key gebruikte toocreate Hallo handtekening en Hallo opgeslagen toegangsbeleid dat is gekoppeld (indien aanwezig).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="3f4c6-278">Als er geen opgeslagen toegangsbeleid is opgegeven, is hello alleen manier toorevoke een shared access signature toochange hello accountsleutel.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="3f4c6-279">Verificatie van een clienttoepassing met een SAS</span><span class="sxs-lookup"><span data-stu-id="3f4c6-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="3f4c6-280">Een client die in bezit van een SAS kunt Hallo SAS tooauthenticate een aanvraag in voor een opslagaccount waarvoor ze geen Hallo toegangscodes bezitten.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="3f4c6-281">Een SAS worden opgenomen in een verbindingsreeks, of gebruik rechtstreeks vanuit de juiste Hallo-constructor of methode.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="3f4c6-282">Met behulp van een SAS in een verbindingsreeks</span><span class="sxs-lookup"><span data-stu-id="3f4c6-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="3f4c6-283">Met behulp van een SAS in een constructor of methode</span><span class="sxs-lookup"><span data-stu-id="3f4c6-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="3f4c6-284">Verschillende Azure Storage client bibliotheek constructors en methode overloads bieden een SAS-parameter, zodat u kunt een aanvraag toohello-service met een SAS verifiëren.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="3f4c6-285">Bijvoorbeeld, is hier een SAS-URI gebruikte toocreate een verwijzing tooa blok-blob.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="3f4c6-286">Hallo SAS biedt alleen Hallo-referenties die nodig zijn voor Hallo-aanvraag.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="3f4c6-287">Hallo blok-blobverwijzing wordt vervolgens gebruikt voor een schrijfbewerking:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="3f4c6-288">Aanbevolen procedures voor via SAS</span><span class="sxs-lookup"><span data-stu-id="3f4c6-288">Best practices when using SAS</span></span>
<span data-ttu-id="3f4c6-289">Wanneer u handtekeningen voor gedeelde toegang in uw toepassingen gebruikt, moet u toobe op de hoogte van de twee mogelijke risico's:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="3f4c6-290">Als een SAS is gelekt, kan deze worden gebruikt door iedereen die verkrijgt, die mogelijk uw storage-account kan vormen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="3f4c6-291">Als een SAS-clienttoepassing tooa vervalt en toepassing hello niet kan tooretrieve een nieuwe SAS van uw service hebt opgegeven, kan de functionaliteit van de toepassing hello worden gehinderd.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="3f4c6-292">Hallo kunnen volgende aanbevelingen voor het gebruik van handtekeningen voor gedeelde toegang helpen deze risico's verminderen:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="3f4c6-293">**Altijd gebruik van HTTPS** toocreate of een SAS te verdelen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="3f4c6-294">Als een SAS doorgegeven via HTTP en onderschept, een aanvaller uitvoeren van een man-in-the-middle-aanval kunnen tooread Hallo SAS en gebruiken zoals Hallo bedoeld gebruiker kan bijvoorbeeld mogelijk inbreuk op gevoelige gegevens of waardoor het beschadigde gegevens door Hallo kwaadwillende gebruiker.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="3f4c6-295">**Verwijzing opgeslagen toegangsbeleid waar mogelijk.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="3f4c6-296">Toegang beleidsregels geven u optie toorevoke machtigingen Hallo zonder tooregenerate hello opslagaccountsleutels opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="3f4c6-297">Instellen dat verlopen Hallo op deze zeer veel verdiept in het Hallo toekomstige (of oneindige) en zorg ervoor dat deze regelmatig bijgewerkt toomove heeft verder in toekomstige Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="3f4c6-298">**Korte termijn verlopen keren gebruiken op een ad-hoc SAS.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="3f4c6-299">Op deze manier, zelfs als een SAS is geknoeid, is dit alleen geldig voor een korte periode.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="3f4c6-300">Deze procedure is vooral belangrijk als u niet verwijzen naar een opgeslagen toegangsbeleid.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="3f4c6-301">Korte termijn verlopen keren Hallo hoeveelheid gegevens die worden tooa blob geschreven kunnen door te beperken Hallo tijd beschikbaar tooupload tooit ook worden beperkt.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="3f4c6-302">**Clients automatisch vernieuwen Hallo SAS indien nodig hebt.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="3f4c6-303">Clients moeten vernieuwen Hallo SAS goed voordat Hallo verlopen, in volgorde tooallow tijd voor nieuwe pogingen als Hallo-service met de Hallo SAS niet beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="3f4c6-304">Als uw SAS is gebruikt voor een klein aantal onmiddellijke toobe bedoeld, tijdelijke bewerkingen die zijn voltooid binnen de verloopperiode Hallo toobe verwacht, wordt dit mogelijk overbodig zoals Hallo die SAS niet is vernieuwd toobe verwacht.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="3f4c6-305">Echter, hebt u een client die regelmatig aanvragen via SAS maakt, vervolgens Hallo mogelijkheid van verlopen binnenkomt in play.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="3f4c6-306">Hallo belangrijkste overweging is toobalance Hallo nodig voor Hallo SAS toobe tijdelijke (zoals eerder vermeld) met Hallo nodig tooensure die Hallo van client vernieuwing vroeg vraagt voldoende (tooavoid wordt onderbroken vanwege toohello SAS verlopende voorafgaande toosuccessful vernieuwen).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="3f4c6-307">**Wees voorzichtig met SAS-begintijd.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="3f4c6-308">Als u Hallo starttijd voor een SAS te instellen**nu**, en vervolgens vanwege tooclock tijdverschil (verschillen in de huidige tijd op basis van toodifferent machines), fouten kunnen worden waargenomen afwisselend voor Hallo eerste enkele minuten.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="3f4c6-309">In het algemeen ingesteld Hallo start tijd toobe ten minste 15 minuten in de afgelopen Hallo.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="3f4c6-310">Of niet zijn ingesteld dat deze, waarmee u het geldige direct in alle gevallen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="3f4c6-311">Hallo geldt doorgaans ook--tooexpiry tijd Vergeet niet dat u waarnemen up too15 minuten klok scheeftrekken in beide richtingen op een aanvraag.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="3f4c6-312">Hallo maximale duur van een SAS die niet verwijst naar een opgeslagen toegangsbeleid is voor clients met behulp van een REST versie voorafgaande too2012-02-12, 1 uur en alle regels voor het opgeven van de lange termijn dan die zal mislukken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="3f4c6-313">**Specifieke met Hallo resource toobe toegankelijk zijn.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="3f4c6-314">Aanbevolen beveiligingsprocedure is een gebruiker met de minimale vereiste bevoegdheden Hallo tooprovide.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="3f4c6-315">Als een gebruiker alleen leestoegang tooa één entiteit moet, verleen hen leestoegang toothat één entiteit en niet lezen, schrijven, verwijderen toegang tooall entiteiten.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="3f4c6-316">Hierdoor kunnen ook verkleinen Hallo schade, als er een SAS is geknoeid omdat Hallo SAS minder stroom in handen Hallo van een aanvaller heeft.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="3f4c6-317">**Begrijpen dat uw account wordt gefactureerd voor gebruik, met inbegrip van die klaar met SAS.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="3f4c6-318">Als u schrijftoegang tooa blob opgeeft, een gebruiker kan kiezen tooupload een blob 200GB.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="3f4c6-319">Als u een ze ook leestoegang gegeven, kiezen zij toodownload 10 keer steeds 2 TB uitgaande kost voor u.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="3f4c6-320">Opnieuw, Geef beperkte machtigingen toohelp verhelpen Hallo mogelijke acties van kwaadwillende gebruikers.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="3f4c6-321">Tijdelijke SAS tooreduce gebruiken deze bedreiging (maar houd ook rekening met het tijdsverschil op Hallo eindtijd).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="3f4c6-322">**Gegevens die zijn geschreven met behulp van SAS valideren.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="3f4c6-323">Wanneer een client-toepassing gegevens tooyour storage-account schrijft, houd er rekening mee dat er problemen met deze gegevens kunnen worden.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="3f4c6-324">Als uw toepassing dat gegevens worden gevalideerd of is geautoriseerd vereist voordat het klaar toouse is, moet u deze validatie uitvoeren nadat het Hallo-gegevens worden geschreven en voordat deze wordt gebruikt door uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="3f4c6-325">Deze procedure biedt ook bescherming tegen beschadigd of schadelijke gegevens tooyour-account door een gebruiker die goed verkregen Hallo SAS of door een gebruiker die misbruik van een gelekte SAS wordt geschreven.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="3f4c6-326">**Altijd gebruik geen SAS.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-326">**Don't always use SAS.**</span></span> <span data-ttu-id="3f4c6-327">Soms is Hallo risico's die zijn gekoppeld aan een bepaalde bewerking op basis van uw opslagaccount opwegen tegen Hallo voordelen van SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="3f4c6-328">Voor dergelijke bewerkingen maken van een service voor middelste laag die tooyour storage-account schrijft na het uitvoeren van zakelijke regel validatie, verificatie en controle.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="3f4c6-329">Soms is ook eenvoudiger toomanage toegang op andere manieren.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="3f4c6-330">Bijvoorbeeld, als u toomake alle blobs in een container openbaar leesbaar wilt, kunt u Hallo container openbaar, in plaats van een SAS tooevery client geven om toegang te krijgen.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="3f4c6-331">**Storage Analytics toomonitor uw toepassing gebruiken.**</span><span class="sxs-lookup"><span data-stu-id="3f4c6-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="3f4c6-332">U kunt logboekregistratie en metrische gegevens tooobserve een in mislukte verificaties vanwege tooan stroomstoring in het SAS provider-service of toohello onbedoeld verwijderen van een opgeslagen-beleid pieken gebruiken.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="3f4c6-333">Zie Hallo [Blog van Azure Storage-Team](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="3f4c6-334">SAS-voorbeelden</span><span class="sxs-lookup"><span data-stu-id="3f4c6-334">SAS examples</span></span>
<span data-ttu-id="3f4c6-335">Hieronder volgen enkele voorbeelden van beide typen handtekeningen voor gedeelde toegang, account-SAS en service-SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="3f4c6-336">toorun deze C# voorbeelden, moet u tooreference hello NuGet-pakketten in uw project te volgen:</span><span class="sxs-lookup"><span data-stu-id="3f4c6-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="3f4c6-337">[Azure Storage-clientbibliotheek voor .NET](http://www.nuget.org/packages/WindowsAzure.Storage), versie 6.x of hoger (toouse account SAS).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="3f4c6-338">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="3f4c6-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="3f4c6-339">Voor meer voorbeelden die laten zien hoe toocreate en test een SAS zien [Azure codevoorbeelden voor opslag](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="3f4c6-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="3f4c6-340">Voorbeeld: Maken en gebruiken van een account-SAS</span><span class="sxs-lookup"><span data-stu-id="3f4c6-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="3f4c6-341">Hallo volgende codevoorbeeld maakt een account-SAS die geldig is voor bestands- en Hallo Blob en biedt Hallo clientmachtigingen voor lezen, schrijven en lijstmachtigingen tooaccess serviceniveau-API's.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="3f4c6-342">Hallo account-SAS beperkt Hallo protocol tooHTTPS, zodat het Hallo-aanvraag moet worden uitgevoerd met HTTPS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="3f4c6-343">toouse Hallo account SAS tooaccess serviceniveau API's voor Hallo Blob-service, een Blob-client-object met behulp van Hallo SAS maken en Hallo eindpunt voor Blob-opslag voor uw opslagaccount.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="3f4c6-344">Voorbeeld: Een opgeslagen-beleid maken</span><span class="sxs-lookup"><span data-stu-id="3f4c6-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="3f4c6-345">Hallo volgende code maakt een toegangsbeleid opgeslagen in een container.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="3f4c6-346">U kunt Hallo toegang beleidsbeperkingen toospecify gebruiken voor een service-SAS op Hallo-container of de blobs.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="3f4c6-347">Voorbeeld: Een SAS-service op een container maken</span><span class="sxs-lookup"><span data-stu-id="3f4c6-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="3f4c6-348">Hallo volgende code maakt een SAS in een container.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="3f4c6-349">Als Hallo-naam van een bestaande opgeslagen toegangsbeleid is opgegeven, is dat beleid gekoppeld aan Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="3f4c6-350">Als er geen opgeslagen toegangsbeleid is opgegeven, maakt Hallo code vervolgens een ad-hoc-SAS op Hallo-container.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="3f4c6-351">Voorbeeld: Een SAS-service op een blob maken</span><span class="sxs-lookup"><span data-stu-id="3f4c6-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="3f4c6-352">Hallo volgende code maakt een SAS op een blob.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="3f4c6-353">Als Hallo-naam van een bestaande opgeslagen toegangsbeleid is opgegeven, is dat beleid gekoppeld aan Hallo SAS.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="3f4c6-354">Als er geen opgeslagen toegangsbeleid is opgegeven, maakt Hallo code vervolgens een ad-hoc-SAS op Hallo blob.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="3f4c6-355">Conclusie</span><span class="sxs-lookup"><span data-stu-id="3f4c6-355">Conclusion</span></span>
<span data-ttu-id="3f4c6-356">Shared access signatures zijn nuttig voor het leveren van beperkte machtigingen tooyour storage account tooclients Hallo accountsleutel niet hebben.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="3f4c6-357">Ze zijn als zodanig een essentieel onderdeel van het beveiligingsmodel Hallo voor elke toepassing met behulp van Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="3f4c6-358">Als u Hallo aanbevolen procedures die hier worden vermeld volgt, kunt u SAS tooprovide meer flexibiliteit van tooresources toegang in uw opslagaccount in gevaar Hallo beveiliging van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="3f4c6-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3f4c6-359">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="3f4c6-359">Next Steps</span></span>
* [<span data-ttu-id="3f4c6-360">Anonieme leestoegang toocontainers en blobs beheren</span><span class="sxs-lookup"><span data-stu-id="3f4c6-360">Manage anonymous read access toocontainers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="3f4c6-361">Toegang delegeren met een Shared Access Signature</span><span class="sxs-lookup"><span data-stu-id="3f4c6-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="3f4c6-362">Inleiding tot Table en Queue SAS</span><span class="sxs-lookup"><span data-stu-id="3f4c6-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
