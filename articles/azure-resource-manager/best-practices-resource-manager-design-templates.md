---
title: aaaDesign Azure-sjablonen voor complexe oplossingen | Microsoft Docs
description: Bevat aanbevolen procedures voor het ontwerpen van Azure Resource Manager-sjablonen voor complexe scenario 's
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="32c6e-103">Ontwerppatronen voor Azure Resource Manager-sjablonen bij het implementeren van complexe oplossingen</span><span class="sxs-lookup"><span data-stu-id="32c6e-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="32c6e-104">Flexibele wijze op basis van Azure Resource Manager-sjablonen gebruikt, kunt u complexe topologieën implementeren snel en consistent.</span><span class="sxs-lookup"><span data-stu-id="32c6e-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="32c6e-105">U kunt deze implementaties eenvoudig als de offerings evolueren core of tooaccommodate varianten voor uitschieter scenario's of klanten aanpassen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="32c6e-106">In dit onderwerp maakt deel uit van een grotere technisch document.</span><span class="sxs-lookup"><span data-stu-id="32c6e-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="32c6e-107">tooread hello volledige papier downloaden [World klasse Azure Resource Manager-sjablonen overwegingen en procedures bewezen](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="32c6e-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="32c6e-108">Sjablonen combineren Hallo voordelen van hello Azure Resource Manager onderliggende met Hallo aanpassingsvermogen en de leesbaarheid van Notation JSON (JavaScript Object).</span><span class="sxs-lookup"><span data-stu-id="32c6e-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="32c6e-109">Met sjablonen, kunt u het volgende doen:</span><span class="sxs-lookup"><span data-stu-id="32c6e-109">Using templates, you can:</span></span>

* <span data-ttu-id="32c6e-110">Topologieën en hun werkbelasting consistent te implementeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="32c6e-111">Alle resources in een toepassing die samen met resourcegroepen beheren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="32c6e-112">Toepassen op rollen gebaseerde toegang toegangsbeheer (RBAC) toogrant juiste-toousers, groepen en services.</span><span class="sxs-lookup"><span data-stu-id="32c6e-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="32c6e-113">Labels koppelingen toostreamline taken zoals facturering samentellingen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="32c6e-114">In dit artikel biedt details over het verbruik scenario's, architectuur en implementatie-patronen die zijn geïdentificeerd tijdens onze ontwerp sessies en de werkelijke sjabloon implementaties van klanten Azure Customer Advisory Team (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="32c6e-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="32c6e-115">Verre academic, deze benaderingen procedures op de hoogte door Hallo ontwikkeling van sjablonen voor 12 van Hallo boven op basis van Linux OSS-technologieën, waaronder zijn beproefde: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise aangedreven door Apache Cassandra, Elasticsearch Jenkins, MongoDB, PostgreSQL, Redis en Nagios.</span><span class="sxs-lookup"><span data-stu-id="32c6e-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="32c6e-116">In dit artikel deelt deze bewezen toohelp u world klasse Azure Resource Manager-sjablonen ontwerpen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="32c6e-117">In onze werk met klanten hebben we verschillende Resource Manager-sjabloon verbruik ervaringen geïdentificeerd voor ondernemingen, systeem SI's (SI) s en CSV's.</span><span class="sxs-lookup"><span data-stu-id="32c6e-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="32c6e-118">Hallo volgende secties bevatten een overzicht van veelvoorkomende scenario's en patronen voor verschillende soorten klanten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="32c6e-119">Ondernemingen en systeemintegrators</span><span class="sxs-lookup"><span data-stu-id="32c6e-119">Enterprises and system integrators</span></span>
<span data-ttu-id="32c6e-120">In grote organisaties vaak ziet u twee consumenten van Resource Manager-sjablonen: ontwikkelteams interne software en zakelijke IT.</span><span class="sxs-lookup"><span data-stu-id="32c6e-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="32c6e-121">We hebben gevonden dat Hallo scenario's voor Hallo SIs toohello scenario's voor ondernemingen, toegewezen geval Hallo dezelfde overwegingen van toepassing.</span><span class="sxs-lookup"><span data-stu-id="32c6e-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="32c6e-122">Interne software ontwikkelteams</span><span class="sxs-lookup"><span data-stu-id="32c6e-122">Internal software development teams</span></span>
<span data-ttu-id="32c6e-123">Als uw team software toosupport uw bedrijf ontwikkelt, kunnen sjablonen gemakkelijk tooquickly technologieën voor gebruik in bedrijfsspecifieke oplossingen implementeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="32c6e-124">U kunt ook sjablonen toorapidly training omgevingen waarmee team leden toogain nodig vaardigheden maken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="32c6e-125">U kunt sjablonen als-is of uitbreiden of ze tooaccommodate opstellen uw behoeften.</span><span class="sxs-lookup"><span data-stu-id="32c6e-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="32c6e-126">Met labels binnen sjablonen, kunt u een facturering samenvatting met verschillende weergaven zoals team, project, afzonderlijke en education bieden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="32c6e-127">Bedrijven willen vaak software development teams toocreate een sjabloon voor consistente implementatie van een oplossing.</span><span class="sxs-lookup"><span data-stu-id="32c6e-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="32c6e-128">Hallo sjabloon vergemakkelijkt beperkingen zodat bepaalde items in deze omgeving vast blijven en kunnen niet worden overschreven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="32c6e-129">Bijvoorbeeld, een bank mogelijk een sjabloon tooinclude RBAC zodat programmeurs niet een oplossing voor bankieren herzien toosend gegevens tooa persoonlijke storage-account.</span><span class="sxs-lookup"><span data-stu-id="32c6e-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="32c6e-130">Zakelijke IT</span><span class="sxs-lookup"><span data-stu-id="32c6e-130">Corporate IT</span></span>
<span data-ttu-id="32c6e-131">Zakelijke IT-organisaties doorgaans sjablonen gebruiken voor het leveren van cloud-capaciteit en cloud-gebaseerde mogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="32c6e-132">Cloudcapaciteit</span><span class="sxs-lookup"><span data-stu-id="32c6e-132">Cloud capacity</span></span>
<span data-ttu-id="32c6e-133">Er is een veelgebruikte manier voor zakelijke IT groepen tooprovide cloudcapaciteit voor teams met 't-shirt grootten', die standaard aanbieding grootten zoals kleine, middelgrote en grote zijn.</span><span class="sxs-lookup"><span data-stu-id="32c6e-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="32c6e-134">Hallo t-shirt grootte aanbiedingen kunnen combineren verschillende brontypen en aantallen en tegelijkertijd een niveau van standaardisering die het mogelijk toouse sjablonen maakt.</span><span class="sxs-lookup"><span data-stu-id="32c6e-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="32c6e-135">Hallo sjablonen bieden capaciteit in een consistente manier die wordt afgedwongen bedrijfsbeleid en labels tooprovide terugstorting tooconsuming organisaties gebruikt.</span><span class="sxs-lookup"><span data-stu-id="32c6e-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="32c6e-136">Bijvoorbeeld, moet u mogelijk tooprovide ontwikkeling, testen of productieomgevingen binnen welke Hallo software ontwikkelteams hun oplossingen kunnen implementeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="32c6e-137">Hallo-omgeving heeft een vooraf gedefinieerde netwerktopologie en elementen die software ontwikkelteams Hallo niet wijzigen, zoals regels voor toegang toohello openbare internet en packet inspection.</span><span class="sxs-lookup"><span data-stu-id="32c6e-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="32c6e-138">Mogelijk hebt u ook de organisatie-specifieke rollen voor deze omgevingen met verschillende toegangsrechten voor Hallo-omgeving.</span><span class="sxs-lookup"><span data-stu-id="32c6e-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="32c6e-139">Cloud-gebaseerde mogelijkheden</span><span class="sxs-lookup"><span data-stu-id="32c6e-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="32c6e-140">U kunt sjablonen toosupport cloud-gebaseerde mogelijkheden, zoals afzonderlijke softwarepakketten of samengestelde aanbiedingen die worden aangeboden toointernal regels van bedrijven gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="32c6e-141">Een voorbeeld van een samengestelde aanbieding is analytics as a service-analyse, visualisatie en andere technologieën, geleverd in de configuratie van een geoptimaliseerde, met elkaar verbonden op een vooraf gedefinieerde netwerktopologie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="32c6e-142">Cloud-gebaseerde mogelijkheden worden beïnvloed door Hallo beveiligings- en rol overwegingen bij het tot stand gebracht door Hallo cloudcapaciteit aanbiedt op waarop ze worden gebouwd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="32c6e-143">Deze mogelijkheden worden aangeboden ongewijzigd of als een beheerde service.</span><span class="sxs-lookup"><span data-stu-id="32c6e-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="32c6e-144">Voor deze laatste hello, toegang tot beperkte rollen zijn vereist tooenable toegang naar Hallo-omgeving voor beheerdoeleinden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="32c6e-145">Leveranciers van cloud-service</span><span class="sxs-lookup"><span data-stu-id="32c6e-145">Cloud service vendors</span></span>
<span data-ttu-id="32c6e-146">Na het praten toomany CSV's, geïdentificeerd we meerdere manieren toodeploy services voor uw klanten en de bijbehorende vereisten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="32c6e-147">Aanbieding CSV gehost</span><span class="sxs-lookup"><span data-stu-id="32c6e-147">CSV-hosted offering</span></span>
<span data-ttu-id="32c6e-148">Als u uw aanbod in uw eigen Azure-abonnement host, twee hosting benaderingen gelden: een unieke implementatie implementeren voor elke klant of implementeren van schaaleenheden die onderbouwing van een gedeelde infrastructuur, die wordt gebruikt voor alle klanten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="32c6e-149">**Verschillende implementaties voor elke klant.**</span><span class="sxs-lookup"><span data-stu-id="32c6e-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="32c6e-150">Verschillende implementaties per klant vereisen vaste topologieën van verschillende bekende configuraties.</span><span class="sxs-lookup"><span data-stu-id="32c6e-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="32c6e-151">Deze implementaties mogelijk andere virtuele machine (VM) grootten, verschillend aantal knooppunten en andere hoeveelheden bijbehorende opslag.</span><span class="sxs-lookup"><span data-stu-id="32c6e-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="32c6e-152">Labels van implementaties wordt gebruikt voor totaliseren facturering van elke klant.</span><span class="sxs-lookup"><span data-stu-id="32c6e-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="32c6e-153">RBAC mogelijk ingeschakelde tooallow klanten toegang tooaspects van hun cloudomgeving.</span><span class="sxs-lookup"><span data-stu-id="32c6e-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="32c6e-154">**Schaaleenheden in een gedeelde omgeving met meerdere tenants.**</span><span class="sxs-lookup"><span data-stu-id="32c6e-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="32c6e-155">Een schaaleenheid voor omgevingen met meerdere tenants kan bestaan uit een sjabloon.</span><span class="sxs-lookup"><span data-stu-id="32c6e-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="32c6e-156">In dit geval Hallo dezelfde infrastructuur gebruikte toosupport alle klanten is.</span><span class="sxs-lookup"><span data-stu-id="32c6e-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="32c6e-157">Hallo implementaties vertegenwoordigen een groep resources die een niveau van de capaciteit voor Hallo gehost aanbieden, zoals het aantal gebruikers en het aantal transacties leveren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="32c6e-158">Deze schaaleenheden worden verhoogd of verlaagd omdat vraag vereist.</span><span class="sxs-lookup"><span data-stu-id="32c6e-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="32c6e-159">CSV-aanbieding is opgenomen in het klantabonnement</span><span class="sxs-lookup"><span data-stu-id="32c6e-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="32c6e-160">U kunt toodeploy uw software in abonnementen die eigendom zijn van end-klanten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="32c6e-161">U kunt sjablonen toodeploy verschillende implementaties in een klant Azure-account gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="32c6e-162">Deze implementaties gebruikmaken van RBAC zodat u kunt bijwerken en Hallo implementatie binnen Hallo klantaccount beheren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="32c6e-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="32c6e-163">Azure Marketplace</span></span>
<span data-ttu-id="32c6e-164">tooadvertise en de offerings via een marketplace, zoals Azure Marketplace verkopen, kunt u sjablonen toodeliver verschillende soorten implementaties die worden uitgevoerd in Azure-account van een klant ontwikkelen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="32c6e-165">Deze unieke implementaties kunnen doorgaans worden beschreven als een t-shirt grootte (klein, normaal, groot), product/doelgroep type (community, developer, enterprise) of onderdeeltype (basic, hoge beschikbaarheid).</span><span class="sxs-lookup"><span data-stu-id="32c6e-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="32c6e-166">In sommige gevallen kan deze typen kunnen u toospecify bepaalde kenmerken van het Hallo-implementatie, zoals VM-type of aantal schijven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="32c6e-167">OSS-projecten</span><span class="sxs-lookup"><span data-stu-id="32c6e-167">OSS projects</span></span>
<span data-ttu-id="32c6e-168">Resource Manager-sjablonen inschakelen een community-toodeploy een oplossing snel met bewezen in open-source-projecten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="32c6e-169">U kunt sjablonen opslaan in een GitHub-opslagplaats zodat Hallo community gedurende een bepaalde periode herzien kunt.</span><span class="sxs-lookup"><span data-stu-id="32c6e-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="32c6e-170">Gebruikers kunnen deze sjablonen in hun eigen Azure-abonnementen implementeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="32c6e-171">Hallo volgende secties beschrijven de Hallo dingen die u nodig hebt tooconsider voordat het ontwerpen van uw oplossing.</span><span class="sxs-lookup"><span data-stu-id="32c6e-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="32c6e-172">Wat is buiten en in een virtuele machine identificeren</span><span class="sxs-lookup"><span data-stu-id="32c6e-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="32c6e-173">Bij het ontwerpen van uw sjabloon is het handig toolook op Hallo-vereisten in termen van wat buiten en in Hallo virtuele machines (VM's is):</span><span class="sxs-lookup"><span data-stu-id="32c6e-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="32c6e-174">Buiten betekent Hallo VM's en andere resources van uw implementatie, zoals de netwerktopologie hello, tagging, verwijzingen toohello certificaten/geheimen en toegangsbeheer op basis van rollen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="32c6e-175">Al deze resources maken deel uit van uw sjabloon.</span><span class="sxs-lookup"><span data-stu-id="32c6e-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="32c6e-176">Inside betekent dat Hallo software is geïnstalleerd en de algemene desired state configuration.</span><span class="sxs-lookup"><span data-stu-id="32c6e-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="32c6e-177">Andere methoden, zoals VM-extensies of scripts worden gebruikt in een geheel of gedeeltelijk.</span><span class="sxs-lookup"><span data-stu-id="32c6e-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="32c6e-178">Deze mechanismen kunnen worden geïdentificeerd en uitgevoerd door het Hallo-sjabloon, maar niet in deze.</span><span class="sxs-lookup"><span data-stu-id="32c6e-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="32c6e-179">Algemene voorbeelden van activiteiten die u 'in box Hallo doen zou' zijn-</span><span class="sxs-lookup"><span data-stu-id="32c6e-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="32c6e-180">Installeren of verwijderen van serverfuncties en onderdelen</span><span class="sxs-lookup"><span data-stu-id="32c6e-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="32c6e-181">Software installeren en configureren op Hallo knooppunt- of -cluster</span><span class="sxs-lookup"><span data-stu-id="32c6e-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="32c6e-182">Websites op een webserver implementeren</span><span class="sxs-lookup"><span data-stu-id="32c6e-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="32c6e-183">Database-schema's implementeren</span><span class="sxs-lookup"><span data-stu-id="32c6e-183">Deploy database schemas</span></span>
* <span data-ttu-id="32c6e-184">Register of andere typen van configuratie-instellingen beheren</span><span class="sxs-lookup"><span data-stu-id="32c6e-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="32c6e-185">Bestanden en mappen beheren</span><span class="sxs-lookup"><span data-stu-id="32c6e-185">Manage files and directories</span></span>
* <span data-ttu-id="32c6e-186">Starten, stoppen en beheren van processen en services</span><span class="sxs-lookup"><span data-stu-id="32c6e-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="32c6e-187">Lokale groepen en gebruikersaccounts beheren</span><span class="sxs-lookup"><span data-stu-id="32c6e-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="32c6e-188">Installeren en beheren van pakketten (.msi, .exe, yum, enz.)</span><span class="sxs-lookup"><span data-stu-id="32c6e-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="32c6e-189">Omgevingsvariabelen beheren</span><span class="sxs-lookup"><span data-stu-id="32c6e-189">Manage environment variables</span></span>
* <span data-ttu-id="32c6e-190">Uitvoeren van systeemeigen scripts (Windows PowerShell, bash, enz.)</span><span class="sxs-lookup"><span data-stu-id="32c6e-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="32c6e-191">Configuratie van de gewenste status (DSC)</span><span class="sxs-lookup"><span data-stu-id="32c6e-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="32c6e-192">Nadenkt over Hallo interne status van uw VM's na de implementatie, wilt u ervoor dat deze implementatie niet 'nemen' uit Hallo-configuratie die u hebt gedefinieerd en ingeschakeld in broncodebeheer toomake.</span><span class="sxs-lookup"><span data-stu-id="32c6e-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="32c6e-193">Deze aanpak zorgt ervoor dat uw ontwikkelaars of beheerders ad-hoc wijzigingen tooan omgeving die niet goedgekeurd, getest, of vastgelegd in de verbinding met broncodebeheer niet maken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="32c6e-194">Dit besturingselement is belangrijk, omdat Hallo handmatige wijzigingen niet in verbinding met broncodebeheer zijn.</span><span class="sxs-lookup"><span data-stu-id="32c6e-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="32c6e-195">Ze zijn ook niet deel uit van de standaardimplementatie Hallo en toekomstige geautomatiseerde implementaties van software Hallo is van invloed op.</span><span class="sxs-lookup"><span data-stu-id="32c6e-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="32c6e-196">Configuratie van de gewenste status is ook belangrijk vanuit het beveiligingsoogpunt van buiten uw interne werknemers.</span><span class="sxs-lookup"><span data-stu-id="32c6e-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="32c6e-197">Hackers probeert regelmatig toocompromise en misbruik van softwaresystemen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="32c6e-198">Als het lukt algemene tooinstall bestanden is en anders Hallo-status van een geïnfecteerd systeem te wijzigen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="32c6e-199">Met behulp van de van de gewenste statusconfiguratie kunt u identificeren delta's tussen Hallo gewenst en de huidige status en herstellen van een bekende configuratie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="32c6e-200">Er zijn resource-uitbreidingen voor Hallo populairste mechanismen voor DSC - PowerShell DSC, Chef en Puppet.</span><span class="sxs-lookup"><span data-stu-id="32c6e-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="32c6e-201">Elk van deze uitbreidingen kunt Hallo initiële status van uw virtuele machine implementeren en ook gebruikte toomake ervoor Hallo gewenst status wordt bijgehouden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="32c6e-202">Algemene sjabloon scopes</span><span class="sxs-lookup"><span data-stu-id="32c6e-202">Common template scopes</span></span>
<span data-ttu-id="32c6e-203">In onze ervaring hebt we drie key-oplossing sjablonen scopes ontstaan gezien.</span><span class="sxs-lookup"><span data-stu-id="32c6e-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="32c6e-204">Deze drie scopes, capaciteit, functionaliteit en end-to-end-oplossing, worden beschreven in Hallo uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="32c6e-205">Capaciteit bereik</span><span class="sxs-lookup"><span data-stu-id="32c6e-205">Capacity scope</span></span>
<span data-ttu-id="32c6e-206">Een scope capaciteit biedt een aantal resources in een standard-topologie die vooraf geconfigureerde toobe in overeenstemming met de voorschriften en het beleid.</span><span class="sxs-lookup"><span data-stu-id="32c6e-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="32c6e-207">Hallo meest voorkomende voorbeeld is een standaard ontwikkelingsomgeving in een Enterprise-IT of SI-scenario implementeren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="32c6e-208">Mogelijkheid bereik</span><span class="sxs-lookup"><span data-stu-id="32c6e-208">Capability scope</span></span>
<span data-ttu-id="32c6e-209">Een scope mogelijkheid is gericht op het implementeren en configureren van een topologie voor een bepaalde technologie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="32c6e-210">Algemene scenario's met inbegrip van technologieën zoals SQL Server, Cassandra, Hadoop.</span><span class="sxs-lookup"><span data-stu-id="32c6e-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="32c6e-211">End-to-end oplossing bereik</span><span class="sxs-lookup"><span data-stu-id="32c6e-211">End-to-end solution scope</span></span>
<span data-ttu-id="32c6e-212">Een End-to-End oplossing bereik is gericht dan een enkele functie en in plaats daarvan zijn gericht op een end tooend oplossing bestaat uit meerdere mogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="32c6e-213">Een sjabloon gericht op de oplossing scope doet zich voor als een set van een of meer sjablonen voor gericht op de mogelijkheid met oplossings-specifieke bronnen, de logica en de gewenste status.</span><span class="sxs-lookup"><span data-stu-id="32c6e-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="32c6e-214">Een voorbeeld van een sjabloon gericht op de oplossing is een oplossingssjabloon end tooend data pipeline.</span><span class="sxs-lookup"><span data-stu-id="32c6e-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="32c6e-215">Hallo sjabloon mogelijk oplossings-specifieke topologie en status meng met meerdere gericht op de mogelijkheid oplossingssjablonen zoals Kafka, Storm en Hadoop.</span><span class="sxs-lookup"><span data-stu-id="32c6e-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="32c6e-216">Gratis formulier versus bekende configuraties te kiezen</span><span class="sxs-lookup"><span data-stu-id="32c6e-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="32c6e-217">U kunt een sjabloon moet bieden consumenten Hallo zoveel mogelijk flexibiliteit, maar een aantal zaken invloed op Hallo keuze van of u in eerste instantie overwegen toouse vrije vorm configuraties versus bekende configuraties.</span><span class="sxs-lookup"><span data-stu-id="32c6e-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="32c6e-218">Deze sectie geeft Hallo belangrijke klantvereisten en technische overwegingen die in de vorm van Hallo benadering gedeeld in dit document.</span><span class="sxs-lookup"><span data-stu-id="32c6e-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="32c6e-219">Vrije-configuraties</span><span class="sxs-lookup"><span data-stu-id="32c6e-219">Free-form configurations</span></span>
<span data-ttu-id="32c6e-220">Vrije vorm configuraties geluid op Hallo oppervlak, ideaal.</span><span class="sxs-lookup"><span data-stu-id="32c6e-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="32c6e-221">Ze kunt u een VM-type tooselect leveren en een willekeurig aantal knooppunten en de gekoppelde schijven voor knooppunten, en als parameters tooa sjabloon doen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="32c6e-222">Deze aanpak is echter niet ideaal voor een aantal scenario's.</span><span class="sxs-lookup"><span data-stu-id="32c6e-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="32c6e-223">In [grootten voor virtuele machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), Hallo verschillende VM typen en beschikbare grootten worden geïdentificeerd en elk Hallo duurzame aantal schijven (2, 4, 8, 16 of 32) die kan worden gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="32c6e-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="32c6e-224">Elke gekoppelde schijf biedt 500 IOPS en veelvouden van deze schijven kunnen worden gegroepeerd voor vermenigvuldigingsfactor dat aantal IOPS.</span><span class="sxs-lookup"><span data-stu-id="32c6e-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="32c6e-225">Bijvoorbeeld 16 schijven gegroepeerde tooprovide 8000 IOP's kan worden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="32c6e-226">Groeperen wordt met configuratie in het Hallo-besturingssysteem, met behulp van Microsoft Windows Storage Spaces of redundante matrix van goedkope schijven (RAID) in Linux uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="32c6e-227">Een vrije vorm configuratie maakt het mogelijk Hallo selectie meerdere exemplaren van de virtuele machine, VM verschillende typen en groottes voor deze verschillende schijven voor Hallo VM-type-exemplaren en een of meer scripts tooconfigure Hallo VM inhoud.</span><span class="sxs-lookup"><span data-stu-id="32c6e-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="32c6e-228">Het is gebruikelijk dat een implementatie mogelijk meerdere typen knooppunten, zoals de master- en gegevensknooppunten, zodat deze flexibiliteit vaak voor elk knooppunttype is opgegeven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="32c6e-229">Als u clusters toodeploy een significante begint, kunt u beginnen toowork met deze complexe scenario's.</span><span class="sxs-lookup"><span data-stu-id="32c6e-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="32c6e-230">Als u een Hadoop-cluster zijn implementeert, bijvoorbeeld zou met 8 hoofdknooppunten 200 gegevensknooppunten en gegroepeerde 4 gekoppelde schijven op elk knooppunt master en gegroepeerde 16 gekoppelde schijven per gegevensknooppunt, er 208 VM's en toomanage 3,232 schijven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="32c6e-231">Een opslagaccount wordt vertraging aanvragen bovenstaande die de geïdentificeerde 20.000 transacties per seconde beperken, zodat u moet partitioneren van de storage-account kijken en berekeningen toodetermine Hallo geschikt aantal storage accounts tooaccommodate deze topologie gebruiken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="32c6e-232">Hallo enorm combinaties die worden ondersteund door Hallo vrije vorm benadering, dynamische berekeningen gegeven zijn vereiste toodetermine Hallo juiste partitioneren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="32c6e-233">Hallo sjabloontaal van Azure Resource Manager biedt momenteel geen wiskundige functies zodat u moet deze berekeningen uitvoeren in code genereren van een unieke, vastgelegde sjabloon met de juiste informatie Hallo.</span><span class="sxs-lookup"><span data-stu-id="32c6e-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="32c6e-234">In de enterprise IT en SI-scenario's, moet iemand Hallo sjablonen onderhouden en ondersteuning voor topologieën Hallo geïmplementeerd voor een of meer organisaties.</span><span class="sxs-lookup"><span data-stu-id="32c6e-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="32c6e-235">Deze extra overhead: verschillende configuraties en sjablonen voor elke klant: sterk wenselijk.</span><span class="sxs-lookup"><span data-stu-id="32c6e-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="32c6e-236">U kunt deze sjablonen toodeploy omgevingen in Azure-abonnement van uw klant, maar zakelijke IT-teams en CSV's doorgaans deze implementeren in hun eigen abonnementen, met behulp van een functie terugstorting toobill hun klanten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="32c6e-237">In deze scenario's, Hallo doel toodeploy capaciteit voor meerdere klanten is in een pool van abonnementen en veel ingevuld in Hallo abonnementen toominimize abonnement kabels keep-implementaties, dat wil zeggen, meer abonnementen toomanage.</span><span class="sxs-lookup"><span data-stu-id="32c6e-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="32c6e-238">Met echt dynamische implementatiegrootte vereist bereiken van dit type dichtheid zorgvuldige planning en extra ontwikkeling voor steigers werk namens Hallo-organisatie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="32c6e-239">Bovendien geen abonnementen via een API-aanroep kunt maken maar handmatig moet doen via Hallo-portal.</span><span class="sxs-lookup"><span data-stu-id="32c6e-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="32c6e-240">Als het aantal abonnementen Hallo toeneemt, alle resulterende abonnement kabels menselijke tussenkomst vereist, kan niet worden geautomatiseerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="32c6e-241">Met zoveel variabiliteit in Hallo grootten van implementaties, hebt u toopre inrichten een aantal abonnementen handmatig tooensure abonnementen beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="32c6e-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="32c6e-242">Deze factoren in overweging moet aan een werkelijk vrije vorm-configuratie is minder dan ten eerste blush interessante.</span><span class="sxs-lookup"><span data-stu-id="32c6e-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="32c6e-243">Bekende configuraties: Hallo t-shirt sizing benadering</span><span class="sxs-lookup"><span data-stu-id="32c6e-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="32c6e-244">In plaats daarvan dan een sjabloon die voorziet in totaal flexibiliteit en talloze variaties bieden, in onze ervaring een algemene patroon is tooprovide Hallo mogelijkheid tooselect bekende configuraties — in feite standaard t-shirt groottes zoals sandbox, kleine, middelgrote en grote.</span><span class="sxs-lookup"><span data-stu-id="32c6e-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="32c6e-245">Andere voorbeelden van t-shirt grootten zijn de producten, zoals community edition of enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="32c6e-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="32c6e-246">In andere gevallen mogelijk werklastspecifiek configuraties van een technologie – zoals kaart verminderen of er zijn geen sql.</span><span class="sxs-lookup"><span data-stu-id="32c6e-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="32c6e-247">Veel bedrijven organisaties, OSS-leveranciers en SIs Maak de offerings beschikbaar zijn op deze manier in on-premises gevirtualiseerde omgevingen (ondernemingen) of als software as a service (SaaS)-aanbiedingen (CSV's en OSVs).</span><span class="sxs-lookup"><span data-stu-id="32c6e-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="32c6e-248">Deze aanpak geeft goede, bekende configuraties van verschillende grootten die vooraf zijn geconfigureerd voor klanten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="32c6e-249">Zonder bekende configuraties moeten end klanten vast formaat van het cluster zelf, rekening te houden in resourcebeperkingen platform en ga math tooidentify Hallo resulterende partitionering van storage-accounts en andere bronnen (vervaldatum toocluster grootte en de resource beperkingen).</span><span class="sxs-lookup"><span data-stu-id="32c6e-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="32c6e-250">Bekende configuraties inschakelen klanten tooeasily Selecteer Hallo juiste t-shirt grootte — dat wil zeggen, een bepaalde implementatie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="32c6e-251">Bovendien toomaking een betere ervaring voor de klant hello, een klein aantal bekende configuraties is eenvoudiger toosupport en kunt u een hoger niveau van de dichtheid leveren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="32c6e-252">Een benadering bekende configuratie is gericht op t-shirt grootten kan ook verschillend aantal knooppunten binnen een grootte hebben.</span><span class="sxs-lookup"><span data-stu-id="32c6e-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="32c6e-253">Bijvoorbeeld, een klein t-shirt mogelijk tussen 3 en 10 knooppunten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="32c6e-254">Hallo t-shirt grootte zou worden ontworpen tooaccommodate up too10 knooppunten en geef Hallo consumer Hallo mogelijkheid toomake vrije vorm selecties toohello maximale grootte geïdentificeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="32c6e-255">De grootte van een t-shirt op basis van het type werkbelasting, mogelijk meer vrije vorm van aard in termen van het aantal knooppunten dat kan worden geïmplementeerd, maar heeft verschillende knooppunt werkbelastingsgrootte en configuratie van Hallo software op Hallo knooppunt Hallo.</span><span class="sxs-lookup"><span data-stu-id="32c6e-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="32c6e-256">T-shirt grootten op basis van producten, zoals community of Enterprise, kan unieke resourcetypen en maximum aantal knooppunten dat kan worden geïmplementeerd, hebben doorgaans toolicensing prestaties of beschikbaarheid van functies gekoppeld via andere aanbiedingen Hallo.</span><span class="sxs-lookup"><span data-stu-id="32c6e-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="32c6e-257">U kunt ook geschikt voor klanten met unieke varianten Hallo op basis van een JSON-sjablonen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="32c6e-258">Uitschieters betreft, kunt u de juiste planning Hallo en overwegingen voor ontwikkeling, ondersteuning en de kosten kunt opnemen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="32c6e-259">Op basis van Hallo klant sjabloon verbruik scenario's en vereisten geïdentificeerd aan Hallo begin van dit document, wordt een patroon voor de sjabloon ontleding geïdentificeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="32c6e-260">Capaciteit en de mogelijkheid bereik oplossingssjablonen</span><span class="sxs-lookup"><span data-stu-id="32c6e-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="32c6e-261">Afbreken biedt een modulaire benadering tootemplate ontwikkeling die ondersteuning biedt voor hergebruik, uitbreidbaarheid, testen en tooling.</span><span class="sxs-lookup"><span data-stu-id="32c6e-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="32c6e-262">Deze sectie bevat details over hoe een benadering afbreken toegepaste tootemplates met een bereik van de capaciteit of mogelijkheden kan worden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="32c6e-263">Deze aanpak een belangrijkste sjabloon parameterwaarden ontvangt van een sjabloon consumer vervolgens tooseveral typen sjablonen en scripts downstream koppelingen zoals hieronder wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="32c6e-264">Parameters en variabelen met statische gegenereerde variabelen zijn waarden gebruikte tooprovide in en uit Hallo gekoppelde sjablonen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Sjabloonparameters](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="32c6e-266">**Parameters worden doorgegeven tooa belangrijkste sjabloon vervolgens toolinked sjablonen**</span><span class="sxs-lookup"><span data-stu-id="32c6e-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="32c6e-267">Hallo secties focus Hallo typen sjablonen en scripts die één sjabloon is onderverdeeld te volgen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="32c6e-268">Hallo secties vindt u strategieën voor het doorgeven van gegevens tussen Hallo sjablonen staat.</span><span class="sxs-lookup"><span data-stu-id="32c6e-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="32c6e-269">Elke sjabloon en Hallo scripttypen in de installatiekopie van het Hallo worden samen met voorbeelden beschreven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="32c6e-270">Zie voor een voorbeeld contextuele ' samen te stellen: een voorbeeldimplementatie ' verderop in dit document.</span><span class="sxs-lookup"><span data-stu-id="32c6e-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="32c6e-271">Metagegevens van de sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-271">Template metadata</span></span>
<span data-ttu-id="32c6e-272">Metagegevens van de sjabloon (Hallo metadata.json-bestand) bevat een sleutel-waardeparen die een sjabloon in de JSON die kan worden gelezen door mensen en softwaresystemen te beschrijven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metagegevens van de sjabloon](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="32c6e-274">**Metagegevens van de sjabloon wordt beschreven in Hallo metadata.json bestand**</span><span class="sxs-lookup"><span data-stu-id="32c6e-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="32c6e-275">Softwareagents Hallo metadata.json bestand ophalen en Hallo informatie en een koppeling toohello sjabloon publiceren in een webpagina of directory.</span><span class="sxs-lookup"><span data-stu-id="32c6e-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="32c6e-276">Elementen zijn *itemDisplayName*, *beschrijving*, *samenvatting*, *githubUsername*, en *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="32c6e-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="32c6e-277">Een voorbeeld van een bestand wordt hieronder weergegeven in zijn geheel.</span><span class="sxs-lookup"><span data-stu-id="32c6e-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="32c6e-278">Belangrijkste sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-278">Main template</span></span>
<span data-ttu-id="32c6e-279">Hallo belangrijkste sjabloon parameters van een gebruiker ontvangt, die informatie toopopulate complexe objectvariabelen worden gebruikt en Hallo gekoppelde sjablonen wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Belangrijkste sjabloon](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="32c6e-281">**Hallo belangrijkste sjabloon ontvangt parameters van een gebruiker**</span><span class="sxs-lookup"><span data-stu-id="32c6e-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="32c6e-282">Een parameter die is opgegeven is een bekende configuratietype ook wel bekend als Hallo t-shirt grootteparameter vanwege de gestandaardiseerde waarden zoals klein, normaal of groot.</span><span class="sxs-lookup"><span data-stu-id="32c6e-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="32c6e-283">In de praktijk, kunt u deze parameter op verschillende manieren.</span><span class="sxs-lookup"><span data-stu-id="32c6e-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="32c6e-284">Zie 'Bekende configuratie resources sjabloon' verderop in dit document voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="32c6e-285">Sommige resources worden ongeacht Hallo bekende configuratie wordt opgegeven door de parameter van een gebruiker geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="32c6e-286">Deze resources zijn ingericht met een sjabloon met één gedeelde resource en worden gedeeld door andere sjablonen zodat Hallo gedeelde bron sjabloon eerste wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="32c6e-287">Sommige resources zijn optioneel geïmplementeerd ongeacht Hallo opgegeven bekende configuratie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="32c6e-288">Gedeelde bronnen sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-288">Shared resources template</span></span>
<span data-ttu-id="32c6e-289">Deze sjabloon biedt resources die door alle bekende configuraties gedeeld worden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="32c6e-290">Het bevat Hallo virtueel netwerk, beschikbaarheidssets en andere bronnen die zijn vereist, ongeacht Hallo bekende configuratiesjabloon die is geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Sjabloonresources](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="32c6e-292">**Gedeelde bronnen sjabloon**</span><span class="sxs-lookup"><span data-stu-id="32c6e-292">**Shared resources template**</span></span>

<span data-ttu-id="32c6e-293">Resourcenamen, zoals Hallo virtuele-netwerknaam zijn gebaseerd op de belangrijkste Hallo-sjabloon.</span><span class="sxs-lookup"><span data-stu-id="32c6e-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="32c6e-294">U kunt ze als een variabele in die sjabloon opgeven of ze ontvangen als een parameter van de gebruiker hello, zoals vereist door uw organisatie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="32c6e-295">Optionele resources sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-295">Optional resources template</span></span>
<span data-ttu-id="32c6e-296">Hallo optionele resources sjabloon bevat resources die programmatisch zijn geïmplementeerd op basis van het Hallo-waarde van een parameter of variabele.</span><span class="sxs-lookup"><span data-stu-id="32c6e-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Optionele resources](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="32c6e-298">**Optionele resources sjabloon**</span><span class="sxs-lookup"><span data-stu-id="32c6e-298">**Optional resources template**</span></span>

<span data-ttu-id="32c6e-299">Bijvoorbeeld, u kunt een optionele resources sjabloon tooconfigure een jumpbox waarmee indirecte toegang tooa geïmplementeerd omgeving van Hallo openbare Internet.</span><span class="sxs-lookup"><span data-stu-id="32c6e-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="32c6e-300">U zou gebruiken als een parameter of variabele tooidentify hello jumpbox moet worden ingeschakeld en Hallo *concat* toobuild Hallo doelnaam voor Hallo-sjabloon, zoals werken *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="32c6e-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="32c6e-301">Sjabloon koppelen Hallo resulterende variabele tooinstall hello jumpbox gebruikt.</span><span class="sxs-lookup"><span data-stu-id="32c6e-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="32c6e-302">U kunt een koppeling Hallo optionele resources sjabloon vanaf meerdere locaties:</span><span class="sxs-lookup"><span data-stu-id="32c6e-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="32c6e-303">Wanneer de implementatie van toepassing tooevery, maak een koppeling basis van parameters van Hallo gedeelde bronnen sjabloon.</span><span class="sxs-lookup"><span data-stu-id="32c6e-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="32c6e-304">Wanneer van toepassing tooselect bekende configuraties — bijvoorbeeld alleen installeren op grote implementaties: Maak een koppeling aangestuurde parameter of variabele aangestuurde van Hallo bekende configuratiesjabloon.</span><span class="sxs-lookup"><span data-stu-id="32c6e-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="32c6e-305">Hiermee wordt aangegeven of een bepaalde bron is optioneel mag niet worden aangedreven door Hallo sjabloon consumer maar door Hallo sjabloonprovider.</span><span class="sxs-lookup"><span data-stu-id="32c6e-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="32c6e-306">Bijvoorbeeld, moet u mogelijk toosatisfy een bepaald Productvereiste of product-invoegtoepassing (algemeen voor CSV's) of beleidsregels tooenforce (common voor SIs- en enterprise IT groepen).</span><span class="sxs-lookup"><span data-stu-id="32c6e-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="32c6e-307">In dergelijke gevallen kunt u een variabele tooidentify of Hallo resource moet worden geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="32c6e-308">Configuratie voor bekende bronnen sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-308">Known configuration resources template</span></span>
<span data-ttu-id="32c6e-309">In de belangrijkste Hallo-sjabloon is een parameter blootgestelde tooallow Hallo sjabloon consumer toospecify een gewenste configuratie voor bekende toodeploy.</span><span class="sxs-lookup"><span data-stu-id="32c6e-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="32c6e-310">Deze bekende configuratie wordt vaak een benadering van de grootte t-shirt gebruikt met een set van configuratie van vaste grootte zoals sandbox, klein, normaal en groot.</span><span class="sxs-lookup"><span data-stu-id="32c6e-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Configuratie voor bekende bronnen](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="32c6e-312">**Configuratie voor bekende bronnen sjabloon**</span><span class="sxs-lookup"><span data-stu-id="32c6e-312">**Known configuration resources template**</span></span>

<span data-ttu-id="32c6e-313">Hallo t-shirt grootte benadering wordt meestal gebruikt, maar Hallo parameters kunnen bestaan uit een reeks bekende configuraties.</span><span class="sxs-lookup"><span data-stu-id="32c6e-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="32c6e-314">U kunt bijvoorbeeld een reeks omgevingen voor een zakelijke toepassing zoals ontwikkelen, testen en Product opgeven.</span><span class="sxs-lookup"><span data-stu-id="32c6e-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="32c6e-315">Of u kunt deze gebruiken voor een andere cloud service toorepresent eenheden, productversies of configuraties van het product zoals Community-, Developer- of Enterprise schalen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="32c6e-316">Net als bij Hallo gedeelde bron sjabloon, worden variabelen toohello bekende configuratiesjabloon doorgegeven vanuit:</span><span class="sxs-lookup"><span data-stu-id="32c6e-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="32c6e-317">Een eindgebruiker — dat wil zeggen, Hallo parameters toohello belangrijkste sjabloon verzonden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="32c6e-318">Een organisatie, dat wil zeggen, Hallo variables in de belangrijkste Hallo-sjabloon die staan voor interne vereisten of beleidsregels.</span><span class="sxs-lookup"><span data-stu-id="32c6e-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="32c6e-319">Lid resources sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-319">Member resources template</span></span>
<span data-ttu-id="32c6e-320">Een of meer knooppunt lidtypen zijn vaak opgenomen binnen een bekende configuratie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="32c6e-321">Bijvoorbeeld, met Hadoop hebt u hoofdknooppunten- en gegevensknooppunten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="32c6e-322">Als u MongoDB installeert, hebt u gegevensknooppunten en een instellingen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="32c6e-323">Als u DataStax implementeert, hebt u gegevensknooppunten en een virtuele machine met OpsCenter geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Leden resources](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="32c6e-325">**Lid resources sjabloon**</span><span class="sxs-lookup"><span data-stu-id="32c6e-325">**Member resources template**</span></span>

<span data-ttu-id="32c6e-326">Elk type knooppunten kunt hebben verschillende grootten van virtuele machines, het aantal gekoppelde schijven, scripts tooinstall en instellen Hallo knooppunten, poortconfiguraties voor virtuele machines hello, aantal exemplaren en andere details.</span><span class="sxs-lookup"><span data-stu-id="32c6e-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="32c6e-327">Zodat elk knooppunttype opgehaald eigen wordt lid resource sjabloon, die Hallo bevat gedetailleerde informatie over het implementeren en configureren van een infrastructuur, evenals het uitvoeren van scripts toodeploy en configureren van software binnen Hallo VM.</span><span class="sxs-lookup"><span data-stu-id="32c6e-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="32c6e-328">Voor virtuele machines zijn twee soorten scripts meestal gebruikt, algemeen herbruikbare en aangepaste scripts.</span><span class="sxs-lookup"><span data-stu-id="32c6e-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="32c6e-329">Algemeen herbruikbare scripts</span><span class="sxs-lookup"><span data-stu-id="32c6e-329">Widely reusable scripts</span></span>
<span data-ttu-id="32c6e-330">Algemeen herbruikbare scripts kunnen worden gebruikt over meerdere typen sjablonen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="32c6e-331">Een van Hallo betere voorbeelden van deze algemeen herbruikbare scripts stelt RAID op Linux toopool schijven en een groter aantal IOPS krijgen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="32c6e-332">Ongeacht Hallo software wordt geïnstalleerd in Hallo VM, biedt dit script hergebruik van bewezen voor algemene scenario's.</span><span class="sxs-lookup"><span data-stu-id="32c6e-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Herbruikbare scripts](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="32c6e-334">**Lid resources sjablonen kunnen algemeen herbruikbare scripts aanroepen**</span><span class="sxs-lookup"><span data-stu-id="32c6e-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="32c6e-335">Aangepaste scripts</span><span class="sxs-lookup"><span data-stu-id="32c6e-335">Custom scripts</span></span>
<span data-ttu-id="32c6e-336">Sjablonen roept vaak een of meer scripts die installeren en configureren van software binnen de virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="32c6e-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="32c6e-337">Een algemene patroon wordt weergegeven met grote topologieën waarin meerdere exemplaren van een of meer lidtypen zijn geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="32c6e-338">Een script voor installatie wordt gestart voor elke virtuele machine die kan worden uitgevoerd parallel, gevolgd door een setup-script dat wordt aangeroepen nadat alle virtuele machines (of alle virtuele machines van het type van een opgegeven lid) zijn geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Aangepaste scripts](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="32c6e-340">**Lid resources sjablonen kunnen scripts aanroepen voor een specifiek doel zoals VM-configuratie**</span><span class="sxs-lookup"><span data-stu-id="32c6e-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="32c6e-341">Gericht op de mogelijkheid oplossing sjabloon voorbeeld - Redis</span><span class="sxs-lookup"><span data-stu-id="32c6e-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="32c6e-342">tooshow hoe een implementatie kan werken, bekijk een voorbeeld van het bouwen van een sjabloon voor Hallo-implementatie en configuratie van Redis in standaard t-shirt formaten.</span><span class="sxs-lookup"><span data-stu-id="32c6e-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="32c6e-343">Er zijn een set gedeelde bronnen (virtueel netwerk, storage-account, beschikbaarheidssets) en een optionele bron (jumpbox) voor Hallo-implementatie.</span><span class="sxs-lookup"><span data-stu-id="32c6e-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="32c6e-344">Er zijn meerdere bekende configuraties die worden weergegeven als t-shirt grootten (klein, normaal, groot), maar met één knooppunt elk type.</span><span class="sxs-lookup"><span data-stu-id="32c6e-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="32c6e-345">Er zijn ook twee specifiek doel-scripts (installatie, configuratie).</span><span class="sxs-lookup"><span data-stu-id="32c6e-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="32c6e-346">Hallo maken sjabloonbestanden</span><span class="sxs-lookup"><span data-stu-id="32c6e-346">Creating hello template files</span></span>
<span data-ttu-id="32c6e-347">Maakt u een Main-sjabloon met de naam azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="32c6e-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="32c6e-348">Maken van gedeelde Resources sjabloon met de naam gedeeld resources.json</span><span class="sxs-lookup"><span data-stu-id="32c6e-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="32c6e-349">U maakt een optionele Resource Template tooenable Hallo implementatie van een jumpbox, met de naam jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="32c6e-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="32c6e-350">Redis maakt gebruik van slechts één knooppunt-type, zodat u één lid Resource sjabloon met de naam knooppunt resources.json maken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="32c6e-351">Redis, u wilt tooinstall elke afzonderlijke knooppunten en stel Hallo-cluster.</span><span class="sxs-lookup"><span data-stu-id="32c6e-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="32c6e-352">U hebt scripts tooaccommodate Hallo installatie en ingesteld, redis-cluster-install.sh en redis-cluster-setup.sh.</span><span class="sxs-lookup"><span data-stu-id="32c6e-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="32c6e-353">Hallo sjablonen koppelen</span><span class="sxs-lookup"><span data-stu-id="32c6e-353">Linking hello templates</span></span>
<span data-ttu-id="32c6e-354">Met behulp van sjabloon koppelen, Hallo belangrijkste sjabloon uit de sjabloon gedeelde bronnen toohello, waaruit blijkt dat het virtuele netwerk Hallo gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="32c6e-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="32c6e-355">Logica toegevoegd binnen Hallo belangrijkste sjabloon tooenable consumenten van Hallo sjabloon toospecify of een jumpbox moet worden geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="32c6e-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="32c6e-356">Een *ingeschakeld* waarde voor Hallo *EnableJumpbox* parameter geeft die klant Hallo wil toodeploy een jumpbox.</span><span class="sxs-lookup"><span data-stu-id="32c6e-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="32c6e-357">Wanneer deze waarde is opgegeven, Hallo sjabloon worden aaneengeschakeld *_enabled* als achtervoegsel tooa basissjabloon naam voor de Hallo jumpbox mogelijkheid.</span><span class="sxs-lookup"><span data-stu-id="32c6e-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="32c6e-358">Hallo belangrijkste sjabloon wordt toegepast Hallo *grote* parameter waarde als de naam van een achtervoegsel tooa basissjabloon voor t-shirt grootten en gebruikt vervolgens die waarde in de koppeling van een sjabloon uit te*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="32c6e-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="32c6e-359">Hallo-topologie zou lijken op deze afbeelding.</span><span class="sxs-lookup"><span data-stu-id="32c6e-359">hello topology would resemble this illustration.</span></span>

![Sjabloon redis](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="32c6e-361">**Structuur van de sjabloon voor een Redis-sjabloon**</span><span class="sxs-lookup"><span data-stu-id="32c6e-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="32c6e-362">Status configureren</span><span class="sxs-lookup"><span data-stu-id="32c6e-362">Configuring state</span></span>
<span data-ttu-id="32c6e-363">Hallo-knooppunten in cluster hello, er zijn twee stappen tooconfiguring Hallo status, allebei vertegenwoordigd door specifieke doel-Scripts.</span><span class="sxs-lookup"><span data-stu-id="32c6e-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="32c6e-364">Redis installeert 'redis-cluster-install.sh' en 'redis-cluster-setup.sh' hello cluster heeft ingesteld.</span><span class="sxs-lookup"><span data-stu-id="32c6e-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="32c6e-365">Ondersteuning van verschillende grootte implementaties</span><span class="sxs-lookup"><span data-stu-id="32c6e-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="32c6e-366">Binnen variabelen, Hallo t-shirt grootte sjabloon Hallo aantal knooppunten van elk type worden toodeploy voor Hallo opgegeven grootte (*grote*).</span><span class="sxs-lookup"><span data-stu-id="32c6e-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="32c6e-367">Het aantal VM-exemplaren die gebruikmaken van de resource lussen, unieke namen tooresources bieden door de naam van een knooppunt met een numerieke reeksnummer van toe te voegen implementeert *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="32c6e-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="32c6e-368">Wordt deze stappen voor beide hot en warme zone VM's, zoals gedefinieerd in Hallo t-shirt naam sjabloon</span><span class="sxs-lookup"><span data-stu-id="32c6e-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="32c6e-369">End-to-end-oplossing en afbreken binnen het bereik van sjablonen</span><span class="sxs-lookup"><span data-stu-id="32c6e-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="32c6e-370">Een oplossingssjabloon met een bereik van de end-to-end-oplossing is gericht op een end-to-end-oplossing levert.</span><span class="sxs-lookup"><span data-stu-id="32c6e-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="32c6e-371">Deze aanpak is meestal een samenstelling van meerdere gericht op de mogelijkheid sjablonen met aanvullende bronnen, logische en status.</span><span class="sxs-lookup"><span data-stu-id="32c6e-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="32c6e-372">Als gemarkeerd in de onderstaande afbeelding voor hello, wordt hello hetzelfde model gebruikt voor functionaliteit binnen het bereik van sjablonen uitgebreid voor sjablonen met een bereik van de oplossing voor End-to-End.</span><span class="sxs-lookup"><span data-stu-id="32c6e-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="32c6e-373">Een gedeelde Resources sjabloon en een optionele Resources sjablonen fungeren Hallo dezelfde functie als in het Hallo-capaciteit en de mogelijkheid om binnen het bereik van sjabloon benaderingen, maar zijn binnen het bereik van Hallo end tooend oplossing.</span><span class="sxs-lookup"><span data-stu-id="32c6e-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="32c6e-374">Zoals end tooend oplossing binnen het bereik van sjablonen kunnen doorgaans hebben t-shirt grootten, Hallo bekend configuratie Resources sjabloon komt overeen met wat vereist voor een bepaalde bekende configuratie van Hallo-oplossing.</span><span class="sxs-lookup"><span data-stu-id="32c6e-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="32c6e-375">Hallo bekend configuratie Resources sjabloon koppelingen tooone of meer mogelijkheden binnen het bereik oplossingssjablonen die zijn relevante toohello end tooend oplossing zoals Hallo lid Resource sjablonen die vereist voor Hallo end tooend oplossing zijn.</span><span class="sxs-lookup"><span data-stu-id="32c6e-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="32c6e-376">Hallo t-shirt grootte van Hallo oplossing misschien niet anders dan Hallo afzonderlijke gericht op de mogelijkheid sjabloon, zijn variabelen binnen Hallo bekend configuratie Resources sjabloon gebruikte tooprovide Hallo juiste waarden voor downstream mogelijkheid binnen het bereik van oplossing sjablonen toodeploy Hallo juiste t-shirt grootte.</span><span class="sxs-lookup"><span data-stu-id="32c6e-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![End-to-end](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="32c6e-378">**Hallo model wordt gebruikt voor capaciteit of oplossingssjablonen mogelijkheid binnen het bereik kunnen gemakkelijk worden uitgebreid voor end tooend oplossing sjabloon scopes**</span><span class="sxs-lookup"><span data-stu-id="32c6e-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="32c6e-379">Sjablonen voorbereiden voor Hallo Marketplace</span><span class="sxs-lookup"><span data-stu-id="32c6e-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="32c6e-380">Hallo aanpak gemakkelijk voorgaande is geschikt voor scenario's waarbij ondernemingen SIs en CSV's wilt tooeither Hallo-sjablonen zelf implementeren of hun klanten toodeploy op hun eigen inschakelen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="32c6e-381">Een andere gewenste scenario met het implementeren van een sjabloon via Hallo marketplace.</span><span class="sxs-lookup"><span data-stu-id="32c6e-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="32c6e-382">Deze aanpak afbreken werkt voor Hallo marketplace, evenals met enkele kleine wijzigingen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="32c6e-383">Zoals eerder vermeld, kunnen de sjablonen gebruikte toooffer distinct implementatietypen in Hallo marketplace koop zijn.</span><span class="sxs-lookup"><span data-stu-id="32c6e-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="32c6e-384">Afzonderlijke implementatietypen mogelijk t-shirt grootten (klein, normaal, groot), het product/doelgroep type (community, developer, enterprise) of onderdeeltype (basic, hoge beschikbaarheid).</span><span class="sxs-lookup"><span data-stu-id="32c6e-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="32c6e-385">Gebruikt toolist Hallo verschillende bekende configuraties in Hallo marketplace als onderstaande, Hallo end tooend bestaande oplossing of bereik sjablonen kunnen gemakkelijk worden-mogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="32c6e-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="32c6e-386">Hallo parameters toohello belangrijkste sjabloon worden eerst gewijzigd tooremove Hallo inkomende parameter met de naam tshirtSize.</span><span class="sxs-lookup"><span data-stu-id="32c6e-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="32c6e-387">Tijdens het Hallo verschillende implementatietypen toohello bekend configuratie Resources sjabloon worden toegewezen, moet ook Hallo gemeenschappelijke bronnen en configuratie gevonden in Hallo gedeelde Resources sjabloon en mogelijk die in optionele Resource sjablonen.</span><span class="sxs-lookup"><span data-stu-id="32c6e-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="32c6e-388">Als u uw sjabloon toohello marketplace toopublish wilt, kunt u een afzonderlijk exemplaar van uw sjabloon Main ter vervanging van Hallo eerder beschikbaar inkomende parameter van tshirtSize tooa variabele zijn ingesloten in Hallo-sjabloon maken.</span><span class="sxs-lookup"><span data-stu-id="32c6e-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="32c6e-390">**Aanpassing van een oplossing binnen het bereik van de sjabloon voor Hallo marketplace**</span><span class="sxs-lookup"><span data-stu-id="32c6e-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="32c6e-391">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="32c6e-391">Next steps</span></span>
* <span data-ttu-id="32c6e-392">toolearn over het delen van de status van en naar sjablonen, Zie [delen status in Azure Resource Manager-sjablonen](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="32c6e-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="32c6e-393">Abonnementen voor instructies over hoe ondernemingen tooeffectively Resource Manager kunt beheren, Zie [Azure enterprise scaffold - prescriptieve abonnement governance](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="32c6e-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

