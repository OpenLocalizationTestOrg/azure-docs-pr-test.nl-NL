---
title: Maak een aangepaste test - Azure Application Gateway - Azure-Portal | Microsoft Docs
description: Informatie over het maken van een aangepaste test voor Application Gateway met behulp van de portal
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 65e9bba4ce9ac41ae2a9a8c3fa7f661165fc1403
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/03/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-the-portal"></a><span data-ttu-id="e40f5-103">Een aangepaste test voor de toepassingsgateway maken met behulp van de portal</span><span class="sxs-lookup"><span data-stu-id="e40f5-103">Create a custom probe for Application Gateway by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="e40f5-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="e40f5-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="e40f5-105">Azure Resource Manager PowerShell</span><span class="sxs-lookup"><span data-stu-id="e40f5-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="e40f5-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="e40f5-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="e40f5-107">In dit artikel kunt u een aangepaste test toevoegen aan een bestaande toepassingsgateway via de Azure portal.</span><span class="sxs-lookup"><span data-stu-id="e40f5-107">In this article, you add a custom probe to an existing application gateway through the Azure portal.</span></span> <span data-ttu-id="e40f5-108">Aangepaste tests zijn handig voor toepassingen die de pagina controle van een specifieke status hebben, of voor toepassingen die een geslaagde reactie op de standaardwebtoepassing geen bieden.</span><span class="sxs-lookup"><span data-stu-id="e40f5-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on the default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="e40f5-109">Voordat u begint</span><span class="sxs-lookup"><span data-stu-id="e40f5-109">Before you begin</span></span>

<span data-ttu-id="e40f5-110">Als u nog geen een application gateway, gaat u naar [een toepassingsgateway maken](application-gateway-create-gateway-portal.md) voor het maken van een toepassingsgateway met werkt.</span><span class="sxs-lookup"><span data-stu-id="e40f5-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) to create an application gateway to work with.</span></span>

## <span data-ttu-id="e40f5-111"><a name="createprobe"></a>Maken van de test</span><span class="sxs-lookup"><span data-stu-id="e40f5-111"><a name="createprobe"></a>Create the probe</span></span>

<span data-ttu-id="e40f5-112">Tests worden geconfigureerd in een proces via de portal.</span><span class="sxs-lookup"><span data-stu-id="e40f5-112">Probes are configured in a two-step process through the portal.</span></span> <span data-ttu-id="e40f5-113">De eerste stap is het maken van de test.</span><span class="sxs-lookup"><span data-stu-id="e40f5-113">The first step is to create the probe.</span></span> <span data-ttu-id="e40f5-114">In de tweede stap voegt u de test op de back-end-http-instellingen van de toepassingsgateway.</span><span class="sxs-lookup"><span data-stu-id="e40f5-114">In the second step, you add the probe to the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="e40f5-115">Meld u aan bij [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="e40f5-115">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="e40f5-116">Als u nog een account hebt, kunt u zich aanmelden voor een [gratis proefversie van één maand](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="e40f5-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="e40f5-117">Klik op alle resources in het venster Azure Favorieten voor portal.</span><span class="sxs-lookup"><span data-stu-id="e40f5-117">In the Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="e40f5-118">Klik op de toepassingsgateway in de blade met alle bronnen.</span><span class="sxs-lookup"><span data-stu-id="e40f5-118">Click the application gateway in the All resources blade.</span></span> <span data-ttu-id="e40f5-119">Als het abonnement dat u hebt geselecteerd al verschillende bronnen heeft, kunt u partners.contoso.net invoeren in het Filter met de naam...</span><span class="sxs-lookup"><span data-stu-id="e40f5-119">If the subscription you selected already has several resources in it, you can enter partners.contoso.net in the Filter by name…</span></span> <span data-ttu-id="e40f5-120">voor eenvoudige toegang tot de toepassingsgateway.</span><span class="sxs-lookup"><span data-stu-id="e40f5-120">box to easily access the application gateway.</span></span>

1. <span data-ttu-id="e40f5-121">Klik op **Probes** en klik op de **toevoegen** om toe te voegen een test.</span><span class="sxs-lookup"><span data-stu-id="e40f5-121">Click **Probes** and click the **Add** button to add a probe.</span></span>

  ![Test-blade met informatie is ingevuld toevoegen][1]

1. <span data-ttu-id="e40f5-123">Op de **toevoegen health test** blade Vul de vereiste informatie voor de test en klikt u op wanneer u klaar **OK**.</span><span class="sxs-lookup"><span data-stu-id="e40f5-123">On the **Add health probe** blade, fill out the required information for the probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="e40f5-124">**Instelling**</span><span class="sxs-lookup"><span data-stu-id="e40f5-124">**Setting**</span></span> | <span data-ttu-id="e40f5-125">**Waarde**</span><span class="sxs-lookup"><span data-stu-id="e40f5-125">**Value**</span></span> | <span data-ttu-id="e40f5-126">**Details**</span><span class="sxs-lookup"><span data-stu-id="e40f5-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="e40f5-127">**Naam**</span><span class="sxs-lookup"><span data-stu-id="e40f5-127">**Name**</span></span>|<span data-ttu-id="e40f5-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="e40f5-128">customProbe</span></span>|<span data-ttu-id="e40f5-129">Deze waarde is een beschrijvende naam voor de test die toegankelijk is in de portal.</span><span class="sxs-lookup"><span data-stu-id="e40f5-129">This value is a friendly name to the probe that is accessible in the portal.</span></span>|
  |<span data-ttu-id="e40f5-130">**Protocol**</span><span class="sxs-lookup"><span data-stu-id="e40f5-130">**Protocol**</span></span>|<span data-ttu-id="e40f5-131">HTTP of HTTPS</span><span class="sxs-lookup"><span data-stu-id="e40f5-131">HTTP or HTTPS</span></span> | <span data-ttu-id="e40f5-132">Het protocol dat gebruikmaakt van de health-test.</span><span class="sxs-lookup"><span data-stu-id="e40f5-132">The protocol that the health probe uses.</span></span>|
  |<span data-ttu-id="e40f5-133">**Host**</span><span class="sxs-lookup"><span data-stu-id="e40f5-133">**Host**</span></span>|<span data-ttu-id="e40f5-134">Internet Explorer</span><span class="sxs-lookup"><span data-stu-id="e40f5-134">i.e</span></span> <span data-ttu-id="e40f5-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="e40f5-135">contoso.com</span></span>|<span data-ttu-id="e40f5-136">Deze waarde is de hostnaam die wordt gebruikt voor de test.</span><span class="sxs-lookup"><span data-stu-id="e40f5-136">This value is the host name that is used for the probe.</span></span> <span data-ttu-id="e40f5-137">Van toepassing alleen als er meerdere locaties is geconfigureerd op Application Gateway, of gebruik anders '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="e40f5-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="e40f5-138">Deze waarde verschilt van de naam van de VM-host.</span><span class="sxs-lookup"><span data-stu-id="e40f5-138">This value is different from the VM host name.</span></span>|
  |<span data-ttu-id="e40f5-139">**Pad**</span><span class="sxs-lookup"><span data-stu-id="e40f5-139">**Path**</span></span>|<span data-ttu-id="e40f5-140">/ of een ander pad</span><span class="sxs-lookup"><span data-stu-id="e40f5-140">/ or another path</span></span>|<span data-ttu-id="e40f5-141">De rest van de volledige url voor de aangepaste test.</span><span class="sxs-lookup"><span data-stu-id="e40f5-141">The remainder of the full url for the custom probe.</span></span> <span data-ttu-id="e40f5-142">Een geldig pad begint met '/'.</span><span class="sxs-lookup"><span data-stu-id="e40f5-142">A valid path starts with '/'.</span></span> <span data-ttu-id="e40f5-143">Gebruik voor het standaardpad van http://contoso.com alleen '/'</span><span class="sxs-lookup"><span data-stu-id="e40f5-143">For the default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="e40f5-144">**Interval (sec)**</span><span class="sxs-lookup"><span data-stu-id="e40f5-144">**Interval (secs)**</span></span>|<span data-ttu-id="e40f5-145">30</span><span class="sxs-lookup"><span data-stu-id="e40f5-145">30</span></span>|<span data-ttu-id="e40f5-146">Hoe vaak de test wordt uitgevoerd om te controleren of health.</span><span class="sxs-lookup"><span data-stu-id="e40f5-146">How often the probe is run to check for health.</span></span> <span data-ttu-id="e40f5-147">Het wordt niet aangeraden om in te stellen hoe lager dan 30 seconden.</span><span class="sxs-lookup"><span data-stu-id="e40f5-147">It is not recommended to set the lower than 30 seconds.</span></span>|
  |<span data-ttu-id="e40f5-148">**Time-out (sec)**</span><span class="sxs-lookup"><span data-stu-id="e40f5-148">**Timeout (secs)**</span></span>|<span data-ttu-id="e40f5-149">30</span><span class="sxs-lookup"><span data-stu-id="e40f5-149">30</span></span>|<span data-ttu-id="e40f5-150">De hoeveelheid tijd die de test wordt gewacht voordat een time-out optreedt.</span><span class="sxs-lookup"><span data-stu-id="e40f5-150">The amount of time the probe waits before timing out.</span></span> <span data-ttu-id="e40f5-151">De time-outinterval moet hoog genoeg dat een http-aanroep kan worden gemaakt om ervoor te zorgen dat de health-pagina back-end is beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="e40f5-151">The timeout interval needs to be high enough that an http call can be made to ensure the backend health page is available.</span></span>|
  |<span data-ttu-id="e40f5-152">**Drempelwaarde voor onjuiste status**</span><span class="sxs-lookup"><span data-stu-id="e40f5-152">**Unhealthy threshold**</span></span>|<span data-ttu-id="e40f5-153">3</span><span class="sxs-lookup"><span data-stu-id="e40f5-153">3</span></span>|<span data-ttu-id="e40f5-154">Het aantal mislukte pogingen om te worden niet in orde beschouwd.</span><span class="sxs-lookup"><span data-stu-id="e40f5-154">Number of failed attempts to be considered unhealthy.</span></span> <span data-ttu-id="e40f5-155">Een drempelwaarde 0 betekent dat als een controle de back-end mislukt bepaald beschadigd onmiddellijk.</span><span class="sxs-lookup"><span data-stu-id="e40f5-155">A threshold of 0 means that if a health check fails the back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="e40f5-156">De hostnaam is niet hetzelfde zijn als servernaam.</span><span class="sxs-lookup"><span data-stu-id="e40f5-156">The host name is not the same as server name.</span></span> <span data-ttu-id="e40f5-157">Deze waarde is de naam van de virtuele host op de toepassingsserver wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="e40f5-157">This value is the name of the virtual host running on the application server.</span></span> <span data-ttu-id="e40f5-158">De test wordt verzonden naar http://(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="e40f5-158">The probe is sent to http://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-to-the-gateway"></a><span data-ttu-id="e40f5-159">Test toevoegen aan de gateway</span><span class="sxs-lookup"><span data-stu-id="e40f5-159">Add probe to the gateway</span></span>

<span data-ttu-id="e40f5-160">Nu dat de test is gemaakt, is het tijd om toe te voegen aan de gateway.</span><span class="sxs-lookup"><span data-stu-id="e40f5-160">Now that the probe has been created, it is time to add it to the gateway.</span></span> <span data-ttu-id="e40f5-161">Test-instellingen zijn ingesteld op de back-end-HTTP-instellingen van de toepassingsgateway.</span><span class="sxs-lookup"><span data-stu-id="e40f5-161">Probe settings are set on the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="e40f5-162">Klik op **HTTP-instellingen** in de toepassingsgateway online zetten van het configuratie-blade klikt u op de huidige back-end HTTP-instellingen die worden vermeld in het venster.</span><span class="sxs-lookup"><span data-stu-id="e40f5-162">Click **HTTP settings** on the application gateway, to bring up the configuration blade click the current backend http settings listed in the window.</span></span>

  ![venster van de instellingen voor HTTPS][2]

1. <span data-ttu-id="e40f5-164">Op de **appGatewayBackEndHttpSettings** instellingenblade, Controleer de **gebruik aangepaste test** selectievakje in en kies de test gemaakt in de [maken van de test](#createprobe) sectie over de  **Aangepaste test** vervolgkeuzelijst...</span><span class="sxs-lookup"><span data-stu-id="e40f5-164">On the **appGatewayBackEndHttpSettings** settings blade, check the **Use custom probe** checkbox and choose the probe created in the [Create the probe](#createprobe) section on the **Custom probe** drop-down..</span></span>
<span data-ttu-id="e40f5-165">Wanneer voltooid, klikt u op **opslaan** en de instellingen worden toegepast.</span><span class="sxs-lookup"><span data-stu-id="e40f5-165">When complete, click **Save** and the settings are applied.</span></span>

<span data-ttu-id="e40f5-166">De standaard-test controleert de toegang tot de webtoepassing.</span><span class="sxs-lookup"><span data-stu-id="e40f5-166">The default probe checks the default access to the web application.</span></span> <span data-ttu-id="e40f5-167">Nu dat een aangepaste test is gemaakt, gebruikt de toepassingsgateway de aangepaste pad dat is gedefinieerd voor het controleren van de status voor de back-endservers.</span><span class="sxs-lookup"><span data-stu-id="e40f5-167">Now that a custom probe has been created, the application gateway uses the custom path defined to monitor health for the backend servers.</span></span> <span data-ttu-id="e40f5-168">De toepassingsgateway op basis van de criteria die is gedefinieerd, wordt het pad dat is opgegeven in de test gecontroleerd.</span><span class="sxs-lookup"><span data-stu-id="e40f5-168">Based on the criteria that was defined, the application gateway checks the path specified in the probe.</span></span> <span data-ttu-id="e40f5-169">Als de aanroep naar de hostnaam: poort / pad resulteert niet in een HTTP 200-399 statusantwoord, de server wordt uitgevoerd buiten de draaihoek nadat de drempelwaarde voor onjuiste status is bereikt.</span><span class="sxs-lookup"><span data-stu-id="e40f5-169">If the call to host:Port/path does not return an HTTP 200-399 status response, the server is taken out of rotation after the unhealthy threshold is reached.</span></span> <span data-ttu-id="e40f5-170">Probing blijft op het exemplaar niet in orde om te bepalen wanneer deze opnieuw in orde is.</span><span class="sxs-lookup"><span data-stu-id="e40f5-170">Probing continues on the unhealthy instance to determine when it becomes healthy again.</span></span> <span data-ttu-id="e40f5-171">Wanneer het exemplaar weer aan de orde servergroep is toegevoegd, verkeer begint stromende opnieuw aan en zoeken naar het exemplaar wordt voortgezet met de opgegeven interval van de gebruiker normaal.</span><span class="sxs-lookup"><span data-stu-id="e40f5-171">Once the instance is added back to healthy server pool, traffic begins flowing to it again and probing to the instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e40f5-172">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="e40f5-172">Next steps</span></span>

<span data-ttu-id="e40f5-173">Zie voor meer informatie over het configureren van SSL-Offloading met Azure Application Gateway, [SSL-Offload configureren](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="e40f5-173">To learn how to configure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

