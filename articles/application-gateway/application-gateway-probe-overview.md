---
title: overzicht van bewaking voor Azure Application Gateway aaaHealth | Microsoft Docs
description: Meer informatie over Hallo bewakingsmogelijkheden in Azure Application Gateway
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="dcf80-103">Overzicht van Application Gateway health monitoring</span><span class="sxs-lookup"><span data-stu-id="dcf80-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="dcf80-104">Azure Application Gateway standaard bewaakt Hallo status van alle resources in de back-end-pool en worden alle bronnen die niet in orde beschouwd uit Hallo groep automatisch verwijderd.</span><span class="sxs-lookup"><span data-stu-id="dcf80-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="dcf80-105">Toepassingsgateway blijft toomonitor Hallo slecht exemplaren en voegt deze toe back-toohello goede back-end-pool zodra deze beschikbaar komen en reageren toohealth-tests.</span><span class="sxs-lookup"><span data-stu-id="dcf80-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="dcf80-106">Toepassingsgateway verzendt Hallo statuscontroles Hello dezelfde poort die is gedefinieerd in Hallo back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="dcf80-107">Deze configuratie zorgt ervoor dat Hallo-test is het testen van Hallo dezelfde poort dat klanten tooconnect toohello back-end gebruikt.</span><span class="sxs-lookup"><span data-stu-id="dcf80-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![Voorbeeld van de test Application gateway][1]

<span data-ttu-id="dcf80-109">In de toevoeging toousing standaard health test bewaking, kunt u ook aanpassen Hallo health test toosuit vereisten van uw toepassing.</span><span class="sxs-lookup"><span data-stu-id="dcf80-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="dcf80-110">In dit artikel, zowel standaard en aangepaste statuscontroles vallen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="dcf80-111">Als er een NSG op Application Gateway-subnet, moeten poortbereiken 65503 65534 geopend zijn op Hallo Application Gateway-subnet voor binnenkomend verkeer.</span><span class="sxs-lookup"><span data-stu-id="dcf80-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="dcf80-112">Deze poorten zijn vereist voor Hallo back-end health API toowork.</span><span class="sxs-lookup"><span data-stu-id="dcf80-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="dcf80-113">Standaard health test</span><span class="sxs-lookup"><span data-stu-id="dcf80-113">Default health probe</span></span>

<span data-ttu-id="dcf80-114">Een application gateway wordt een standaard health test automatisch geconfigureerd wanneer u een aangepaste test-configuratie niet instellen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="dcf80-115">bewaking van gedrag Hallo werkt door maken die een HTTP-aanvraag toohello IP-adressen geconfigureerd voor back-end-pool Hallo.</span><span class="sxs-lookup"><span data-stu-id="dcf80-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="dcf80-116">Voor standaard tests als Hallo back-end-HTTP-instellingen zijn geconfigureerd voor HTTPS, Hallo test maakt gebruik van HTTPS als de status goed tootest van Hallo back-ends.</span><span class="sxs-lookup"><span data-stu-id="dcf80-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="dcf80-117">Bijvoorbeeld: U uw toepassing gateway toouse back-endservers A, B en C tooreceive HTTP-netwerkverkeer op poort 80 configureren.</span><span class="sxs-lookup"><span data-stu-id="dcf80-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="dcf80-118">Hallo standaard statuscontrole test Hallo drie servers elke 30 seconden voor een goede HTTP-antwoord.</span><span class="sxs-lookup"><span data-stu-id="dcf80-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="dcf80-119">Een gezonde HTTP-antwoord heeft een [statuscode](https://msdn.microsoft.com/library/aa287675.aspx) tussen 200 en 399.</span><span class="sxs-lookup"><span data-stu-id="dcf80-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="dcf80-120">Als Hallo standaard test controle voor server A mislukt, toepassingsgateway hello, wordt deze verwijderd uit de back-end-pool en netwerkverkeer stopt stromende toothis-server.</span><span class="sxs-lookup"><span data-stu-id="dcf80-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="dcf80-121">Hallo standaard test blijft toocheck voor server nog steeds een elke 30 seconden.</span><span class="sxs-lookup"><span data-stu-id="dcf80-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="dcf80-122">Wanneer een server met succes tooone aanvraag van een standaard health test reageert, wordt deze weer toegevoegd als in orde toohello back-end-pool en het verkeer wordt gestart toohello server opnieuw.</span><span class="sxs-lookup"><span data-stu-id="dcf80-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="dcf80-123">Standaardinstellingen health test</span><span class="sxs-lookup"><span data-stu-id="dcf80-123">Default health probe settings</span></span>

| <span data-ttu-id="dcf80-124">Test-eigenschap</span><span class="sxs-lookup"><span data-stu-id="dcf80-124">Probe property</span></span> | <span data-ttu-id="dcf80-125">Waarde</span><span class="sxs-lookup"><span data-stu-id="dcf80-125">Value</span></span> | <span data-ttu-id="dcf80-126">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="dcf80-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="dcf80-127">WebTest-URL</span><span class="sxs-lookup"><span data-stu-id="dcf80-127">Probe URL</span></span> |<span data-ttu-id="dcf80-128">http://127.0.0.1:\<poort\>/</span><span class="sxs-lookup"><span data-stu-id="dcf80-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="dcf80-129">URL-pad</span><span class="sxs-lookup"><span data-stu-id="dcf80-129">URL path</span></span> |
| <span data-ttu-id="dcf80-130">Interval</span><span class="sxs-lookup"><span data-stu-id="dcf80-130">Interval</span></span> |<span data-ttu-id="dcf80-131">30</span><span class="sxs-lookup"><span data-stu-id="dcf80-131">30</span></span> |<span data-ttu-id="dcf80-132">Testinterval in seconden</span><span class="sxs-lookup"><span data-stu-id="dcf80-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="dcf80-133">Time-out</span><span class="sxs-lookup"><span data-stu-id="dcf80-133">Time-out</span></span> |<span data-ttu-id="dcf80-134">30</span><span class="sxs-lookup"><span data-stu-id="dcf80-134">30</span></span> |<span data-ttu-id="dcf80-135">Test time-out in seconden</span><span class="sxs-lookup"><span data-stu-id="dcf80-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="dcf80-136">Drempelwaarde voor onjuiste status</span><span class="sxs-lookup"><span data-stu-id="dcf80-136">Unhealthy threshold</span></span> |<span data-ttu-id="dcf80-137">3</span><span class="sxs-lookup"><span data-stu-id="dcf80-137">3</span></span> |<span data-ttu-id="dcf80-138">Aantal nieuwe pogingen-test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-138">Probe retry count.</span></span> <span data-ttu-id="dcf80-139">Hallo back-end-server is gemarkeerd als niet actief nadat Hallo opeenvolgende test foutentelling Hallo slecht drempel bereikt.</span><span class="sxs-lookup"><span data-stu-id="dcf80-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="dcf80-140">Hallo poort is Hallo dezelfde poort als Hallo back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="dcf80-141">Hallo standaard test wordt bekeken alleen http://127.0.0.1:\<poort\> toodetermine gezondheidsstatus.</span><span class="sxs-lookup"><span data-stu-id="dcf80-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="dcf80-142">Als u tooconfigure Hallo health test toogo tooa aangepaste URL moet of andere instellingen te wijzigen, moet u aangepaste tests gebruiken zoals beschreven in Hallo stappen te volgen:</span><span class="sxs-lookup"><span data-stu-id="dcf80-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="dcf80-143">Aangepaste health test</span><span class="sxs-lookup"><span data-stu-id="dcf80-143">Custom health probe</span></span>

<span data-ttu-id="dcf80-144">Aangepaste tests kunnen u een gedetailleerdere controle over het Hallo-statuscontrole toohave.</span><span class="sxs-lookup"><span data-stu-id="dcf80-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="dcf80-145">Wanneer u aangepaste tests, kunt u het testinterval Hallo Hallo-URL en het pad tootest en hoeveel mislukte reacties tooaccept voordat Hallo back-end-pool exemplaar als beschadigd gemarkeerd.</span><span class="sxs-lookup"><span data-stu-id="dcf80-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="dcf80-146">Instellingen voor de test aangepaste status</span><span class="sxs-lookup"><span data-stu-id="dcf80-146">Custom health probe settings</span></span>

<span data-ttu-id="dcf80-147">Hallo bevat volgende tabel definities voor Hallo eigenschappen van een aangepaste health test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="dcf80-148">Test-eigenschap</span><span class="sxs-lookup"><span data-stu-id="dcf80-148">Probe property</span></span> | <span data-ttu-id="dcf80-149">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="dcf80-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="dcf80-150">Naam</span><span class="sxs-lookup"><span data-stu-id="dcf80-150">Name</span></span> |<span data-ttu-id="dcf80-151">Naam van het Hallo-test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-151">Name of hello probe.</span></span> <span data-ttu-id="dcf80-152">Deze naam wordt gebruikt toorefer toohello test in de back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="dcf80-153">Protocol</span><span class="sxs-lookup"><span data-stu-id="dcf80-153">Protocol</span></span> |<span data-ttu-id="dcf80-154">Protocol gebruikt toosend Hallo test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="dcf80-155">Hallo test gebruikt Hallo-protocol gedefinieerd in Hallo back-end-HTTP-instellingen</span><span class="sxs-lookup"><span data-stu-id="dcf80-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="dcf80-156">Host</span><span class="sxs-lookup"><span data-stu-id="dcf80-156">Host</span></span> |<span data-ttu-id="dcf80-157">Host naam toosend Hallo test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-157">Host name toosend hello probe.</span></span> <span data-ttu-id="dcf80-158">Van toepassing alleen als er meerdere locaties is geconfigureerd op Application Gateway, of gebruik anders '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="dcf80-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="dcf80-159">Deze waarde verschilt van de VM-hostnaam.</span><span class="sxs-lookup"><span data-stu-id="dcf80-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="dcf80-160">Pad</span><span class="sxs-lookup"><span data-stu-id="dcf80-160">Path</span></span> |<span data-ttu-id="dcf80-161">Relatieve pad van het Hallo-test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-161">Relative path of hello probe.</span></span> <span data-ttu-id="dcf80-162">Hallo geldig pad wordt gestart vanuit '/'.</span><span class="sxs-lookup"><span data-stu-id="dcf80-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="dcf80-163">Interval</span><span class="sxs-lookup"><span data-stu-id="dcf80-163">Interval</span></span> |<span data-ttu-id="dcf80-164">WebTest interval in seconden.</span><span class="sxs-lookup"><span data-stu-id="dcf80-164">Probe interval in seconds.</span></span> <span data-ttu-id="dcf80-165">Deze waarde is Hallo tijdsinterval tussen twee opeenvolgende tests.</span><span class="sxs-lookup"><span data-stu-id="dcf80-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="dcf80-166">Time-out</span><span class="sxs-lookup"><span data-stu-id="dcf80-166">Time-out</span></span> |<span data-ttu-id="dcf80-167">WebTest time-outwaarde in seconden.</span><span class="sxs-lookup"><span data-stu-id="dcf80-167">Probe time-out in seconds.</span></span> <span data-ttu-id="dcf80-168">Als een geldig antwoord niet binnen deze time-outperiode ontvangen is, wordt Hallo test als mislukt gemarkeerd.</span><span class="sxs-lookup"><span data-stu-id="dcf80-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="dcf80-169">Drempelwaarde voor onjuiste status</span><span class="sxs-lookup"><span data-stu-id="dcf80-169">Unhealthy threshold</span></span> |<span data-ttu-id="dcf80-170">Aantal nieuwe pogingen-test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-170">Probe retry count.</span></span> <span data-ttu-id="dcf80-171">Hallo back-end-server is gemarkeerd als niet actief nadat Hallo opeenvolgende test foutentelling Hallo slecht drempel bereikt.</span><span class="sxs-lookup"><span data-stu-id="dcf80-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="dcf80-172">Als Application Gateway is geconfigureerd voor een enkele site, door standaard Hallo Host moet naam worden opgegeven als '127.0.0.1', tenzij anders is geconfigureerd in aangepaste test.</span><span class="sxs-lookup"><span data-stu-id="dcf80-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="dcf80-173">Ter referentie een aangepaste test te verzonden\<protocol\>://\<host\>:\<poort\>\<pad\>.</span><span class="sxs-lookup"><span data-stu-id="dcf80-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="dcf80-174">Hallo-poort die gebruikt worden dezelfde poort Hallo zoals gedefinieerd in Hallo back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="dcf80-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dcf80-175">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="dcf80-175">Next steps</span></span>
<span data-ttu-id="dcf80-176">Nadat de informatie over Application Gateway statuscontrole, kunt u configureren een [aangepaste health test](application-gateway-create-probe-portal.md) in hello Azure-portal of een [aangepaste health test](application-gateway-create-probe-ps.md) met PowerShell en hello Azure Resource Manager implementatiemodel.</span><span class="sxs-lookup"><span data-stu-id="dcf80-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
