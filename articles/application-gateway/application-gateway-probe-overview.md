---
title: Overzicht van statusbewaking voor Azure Application Gateway | Microsoft Docs
description: Meer informatie over de bewakingsmogelijkheden in Azure Application Gateway
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 899115d213e626f17e58c2e5f01313f760f9e7f4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 07/11/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="97150-103">Overzicht van Application Gateway health monitoring</span><span class="sxs-lookup"><span data-stu-id="97150-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="97150-104">Azure Application Gateway standaard bewaakt de status van alle resources in de back-end-pool en worden alle bronnen die niet in orde beschouwd uit de groep automatisch verwijderd.</span><span class="sxs-lookup"><span data-stu-id="97150-104">Azure Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="97150-105">Toepassingsgateway blijft de slechte instanties bewaken en terug naar de goede back-end-pool toegevoegd zodra ze beschikbaar en op statuscontroles reageren.</span><span class="sxs-lookup"><span data-stu-id="97150-105">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span> <span data-ttu-id="97150-106">Toepassingsgateway verzendt dat de statuscontroles met dezelfde poort die is gedefinieerd in de back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="97150-106">Application gateway sends the health probes with the same port that is defined in the back-end HTTP settings.</span></span> <span data-ttu-id="97150-107">Deze configuratie zorgt ervoor dat de test is het testen van dezelfde poort die klanten gebruik maken van zouden verbinding maken met de back-end.</span><span class="sxs-lookup"><span data-stu-id="97150-107">This configuration ensures that the probe is testing the same port that customers would be using to connect to the backend.</span></span>

![Voorbeeld van de test Application gateway][1]

<span data-ttu-id="97150-109">Naast het gebruik van standaard health test controle, kunt u ook de health test aanpassen aan de vereisten van uw toepassing aanpassen.</span><span class="sxs-lookup"><span data-stu-id="97150-109">In addition to using default health probe monitoring, you can also customize the health probe to suit your application's requirements.</span></span> <span data-ttu-id="97150-110">In dit artikel, zowel standaard en aangepaste statuscontroles vallen.</span><span class="sxs-lookup"><span data-stu-id="97150-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="97150-111">Als er een NSG op Application Gateway-subnet, moeten poortbereiken 65503 65534 geopend zijn op het subnet voor Application Gateway voor binnenkomend verkeer.</span><span class="sxs-lookup"><span data-stu-id="97150-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on the Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="97150-112">Deze poorten zijn vereist voor de back-end-status API om te werken.</span><span class="sxs-lookup"><span data-stu-id="97150-112">These ports are required for the backend health API to work.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="97150-113">Standaard health test</span><span class="sxs-lookup"><span data-stu-id="97150-113">Default health probe</span></span>

<span data-ttu-id="97150-114">Een application gateway wordt een standaard health test automatisch geconfigureerd wanneer u een aangepaste test-configuratie niet instellen.</span><span class="sxs-lookup"><span data-stu-id="97150-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="97150-115">Het gedrag van de controle werkt door het maken van een HTTP-aanvraag naar de IP-adressen geconfigureerd voor de groep back-end.</span><span class="sxs-lookup"><span data-stu-id="97150-115">The monitoring behavior works by making an HTTP request to the IP addresses configured for the back-end pool.</span></span> <span data-ttu-id="97150-116">Voor standaard tests als de back-end-HTTP-instellingen zijn geconfigureerd voor HTTPS, de test maakt gebruik van HTTPS en status van de back-ends testen.</span><span class="sxs-lookup"><span data-stu-id="97150-116">For default probes if the backend http settings are configured for HTTPS, the probe uses HTTPS as well to test health of the backends.</span></span>

<span data-ttu-id="97150-117">Bijvoorbeeld: U configureert uw toepassingsgateway voor het gebruik van back-endservers A, B en C voor het ontvangen van HTTP-verkeer op poort 80.</span><span class="sxs-lookup"><span data-stu-id="97150-117">For example: You configure your application gateway to use back-end servers A, B, and C to receive HTTP network traffic on port 80.</span></span> <span data-ttu-id="97150-118">Statuscontrole standaard test de drie servers elke 30 seconden voor een goede HTTP-antwoord.</span><span class="sxs-lookup"><span data-stu-id="97150-118">The default health monitoring tests the three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="97150-119">Een gezonde HTTP-antwoord heeft een [statuscode](https://msdn.microsoft.com/library/aa287675.aspx) tussen 200 en 399.</span><span class="sxs-lookup"><span data-stu-id="97150-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="97150-120">Als de standaard WebTest controle voor server A mislukt, de toepassingsgateway wordt deze verwijderd uit de back-end-pool en netwerkverkeer wordt gestopt tot deze server.</span><span class="sxs-lookup"><span data-stu-id="97150-120">If the default probe check fails for server A, the application gateway removes it from its back-end pool, and network traffic stops flowing to this server.</span></span> <span data-ttu-id="97150-121">De standaard-test blijft nog steeds controleren voor de server een elke 30 seconden.</span><span class="sxs-lookup"><span data-stu-id="97150-121">The default probe still continues to check for server A every 30 seconds.</span></span> <span data-ttu-id="97150-122">Als server A is op een aanvraag van een standaard health test reageert, deze weer als goed is toegevoegd aan de groep back-end en weer verkeer naar de server opnieuw.</span><span class="sxs-lookup"><span data-stu-id="97150-122">When server A responds successfully to one request from a default health probe, it is added back as healthy to the back-end pool, and traffic starts flowing to the server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="97150-123">Standaardinstellingen health test</span><span class="sxs-lookup"><span data-stu-id="97150-123">Default health probe settings</span></span>

| <span data-ttu-id="97150-124">Test-eigenschap</span><span class="sxs-lookup"><span data-stu-id="97150-124">Probe property</span></span> | <span data-ttu-id="97150-125">Waarde</span><span class="sxs-lookup"><span data-stu-id="97150-125">Value</span></span> | <span data-ttu-id="97150-126">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="97150-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="97150-127">WebTest-URL</span><span class="sxs-lookup"><span data-stu-id="97150-127">Probe URL</span></span> |<span data-ttu-id="97150-128">http://127.0.0.1:\<poort\>/</span><span class="sxs-lookup"><span data-stu-id="97150-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="97150-129">URL-pad</span><span class="sxs-lookup"><span data-stu-id="97150-129">URL path</span></span> |
| <span data-ttu-id="97150-130">Interval</span><span class="sxs-lookup"><span data-stu-id="97150-130">Interval</span></span> |<span data-ttu-id="97150-131">30</span><span class="sxs-lookup"><span data-stu-id="97150-131">30</span></span> |<span data-ttu-id="97150-132">Testinterval in seconden</span><span class="sxs-lookup"><span data-stu-id="97150-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="97150-133">Time-out</span><span class="sxs-lookup"><span data-stu-id="97150-133">Time-out</span></span> |<span data-ttu-id="97150-134">30</span><span class="sxs-lookup"><span data-stu-id="97150-134">30</span></span> |<span data-ttu-id="97150-135">Test time-out in seconden</span><span class="sxs-lookup"><span data-stu-id="97150-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="97150-136">Drempelwaarde voor onjuiste status</span><span class="sxs-lookup"><span data-stu-id="97150-136">Unhealthy threshold</span></span> |<span data-ttu-id="97150-137">3</span><span class="sxs-lookup"><span data-stu-id="97150-137">3</span></span> |<span data-ttu-id="97150-138">Aantal nieuwe pogingen-test.</span><span class="sxs-lookup"><span data-stu-id="97150-138">Probe retry count.</span></span> <span data-ttu-id="97150-139">De back-endserver is gemarkeerd als niet actief nadat de foutentelling opeenvolgende test heeft de drempelwaarde voor onjuiste status bereikt.</span><span class="sxs-lookup"><span data-stu-id="97150-139">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="97150-140">De poort is dezelfde poort als de back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="97150-140">The port is the same port as the back-end HTTP settings.</span></span>

<span data-ttu-id="97150-141">De standaard-test wordt bekeken alleen http://127.0.0.1:\<poort\> health-status vast te stellen.</span><span class="sxs-lookup"><span data-stu-id="97150-141">The default probe looks only at http://127.0.0.1:\<port\> to determine health status.</span></span> <span data-ttu-id="97150-142">Als u nodig hebt voor het configureren van de health test om te gaan naar een aangepaste URL of andere instellingen te wijzigen, moet u aangepaste tests gebruiken, zoals beschreven in de volgende stappen uit:</span><span class="sxs-lookup"><span data-stu-id="97150-142">If you need to configure the health probe to go to a custom URL or modify any other settings, you must use custom probes as described in the following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="97150-143">Aangepaste health test</span><span class="sxs-lookup"><span data-stu-id="97150-143">Custom health probe</span></span>

<span data-ttu-id="97150-144">Aangepaste tests kunnen u een gedetailleerdere controle over de statuscontrole.</span><span class="sxs-lookup"><span data-stu-id="97150-144">Custom probes allow you to have a more granular control over the health monitoring.</span></span> <span data-ttu-id="97150-145">Wanneer u aangepaste tests, kunt u de testinterval, de URL en pad voor het testen en hoeveel mislukte reacties op accepteren voordat de back-endpool-instantie als beschadigd gemarkeerd.</span><span class="sxs-lookup"><span data-stu-id="97150-145">When using custom probes, you can configure the probe interval, the URL and path to test, and how many failed responses to accept before marking the back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="97150-146">Instellingen voor de test aangepaste status</span><span class="sxs-lookup"><span data-stu-id="97150-146">Custom health probe settings</span></span>

<span data-ttu-id="97150-147">De volgende tabel bevat de definities voor de eigenschappen van een aangepaste health test.</span><span class="sxs-lookup"><span data-stu-id="97150-147">The following table provides definitions for the properties of a custom health probe.</span></span>

| <span data-ttu-id="97150-148">Test-eigenschap</span><span class="sxs-lookup"><span data-stu-id="97150-148">Probe property</span></span> | <span data-ttu-id="97150-149">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="97150-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="97150-150">Naam</span><span class="sxs-lookup"><span data-stu-id="97150-150">Name</span></span> |<span data-ttu-id="97150-151">Naam van de test.</span><span class="sxs-lookup"><span data-stu-id="97150-151">Name of the probe.</span></span> <span data-ttu-id="97150-152">Deze naam wordt gebruikt om te verwijzen naar de instellingen voor back-end-HTTP-test.</span><span class="sxs-lookup"><span data-stu-id="97150-152">This name is used to refer to the probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="97150-153">Protocol</span><span class="sxs-lookup"><span data-stu-id="97150-153">Protocol</span></span> |<span data-ttu-id="97150-154">Het protocol dat wordt gebruikt voor het verzenden van de test.</span><span class="sxs-lookup"><span data-stu-id="97150-154">Protocol used to send the probe.</span></span> <span data-ttu-id="97150-155">De test wordt gebruikt voor het protocol dat is gedefinieerd in de back-end-HTTP-instellingen</span><span class="sxs-lookup"><span data-stu-id="97150-155">The probe uses the protocol defined in the back-end HTTP settings</span></span> |
| <span data-ttu-id="97150-156">Host</span><span class="sxs-lookup"><span data-stu-id="97150-156">Host</span></span> |<span data-ttu-id="97150-157">De hostnaam voor het verzenden van de test.</span><span class="sxs-lookup"><span data-stu-id="97150-157">Host name to send the probe.</span></span> <span data-ttu-id="97150-158">Van toepassing alleen als er meerdere locaties is geconfigureerd op Application Gateway, of gebruik anders '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="97150-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="97150-159">Deze waarde verschilt van de VM-hostnaam.</span><span class="sxs-lookup"><span data-stu-id="97150-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="97150-160">Pad</span><span class="sxs-lookup"><span data-stu-id="97150-160">Path</span></span> |<span data-ttu-id="97150-161">Relatieve pad van de test.</span><span class="sxs-lookup"><span data-stu-id="97150-161">Relative path of the probe.</span></span> <span data-ttu-id="97150-162">Het pad geldig wordt gestart vanuit '/'.</span><span class="sxs-lookup"><span data-stu-id="97150-162">The valid path starts from '/'.</span></span> |
| <span data-ttu-id="97150-163">Interval</span><span class="sxs-lookup"><span data-stu-id="97150-163">Interval</span></span> |<span data-ttu-id="97150-164">WebTest interval in seconden.</span><span class="sxs-lookup"><span data-stu-id="97150-164">Probe interval in seconds.</span></span> <span data-ttu-id="97150-165">Deze waarde is het interval tussen twee opeenvolgende tests.</span><span class="sxs-lookup"><span data-stu-id="97150-165">This value is the time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="97150-166">Time-out</span><span class="sxs-lookup"><span data-stu-id="97150-166">Time-out</span></span> |<span data-ttu-id="97150-167">WebTest time-outwaarde in seconden.</span><span class="sxs-lookup"><span data-stu-id="97150-167">Probe time-out in seconds.</span></span> <span data-ttu-id="97150-168">Als een geldig antwoord niet binnen deze time-outperiode ontvangen is, wordt de test als mislukt gemarkeerd.</span><span class="sxs-lookup"><span data-stu-id="97150-168">If a valid response is not received within this time-out period, the probe is marked as failed.</span></span>  |
| <span data-ttu-id="97150-169">Drempelwaarde voor onjuiste status</span><span class="sxs-lookup"><span data-stu-id="97150-169">Unhealthy threshold</span></span> |<span data-ttu-id="97150-170">Aantal nieuwe pogingen-test.</span><span class="sxs-lookup"><span data-stu-id="97150-170">Probe retry count.</span></span> <span data-ttu-id="97150-171">De back-endserver is gemarkeerd als niet actief nadat de foutentelling opeenvolgende test heeft de drempelwaarde voor onjuiste status bereikt.</span><span class="sxs-lookup"><span data-stu-id="97150-171">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="97150-172">Als Application Gateway is geconfigureerd voor een enkele site, standaard ingesteld op de Host moet naam worden opgegeven als '127.0.0.1', tenzij anders is geconfigureerd in aangepaste test.</span><span class="sxs-lookup"><span data-stu-id="97150-172">If Application Gateway is configured for a single site, by default the Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="97150-173">Ter referentie een aangepaste test wordt verzonden naar \<protocol\>://\<host\>:\<poort\>\<pad\>.</span><span class="sxs-lookup"><span data-stu-id="97150-173">For reference a custom probe is sent to \<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="97150-174">De poort die wordt gebruikt is dezelfde poort zoals gedefinieerd in de back-end-HTTP-instellingen.</span><span class="sxs-lookup"><span data-stu-id="97150-174">The port used will be the same port as defined in the back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="97150-175">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="97150-175">Next steps</span></span>
<span data-ttu-id="97150-176">Nadat de informatie over Application Gateway statuscontrole, kunt u configureren een [aangepaste health test](application-gateway-create-probe-portal.md) in de Azure portal of een [aangepaste health test](application-gateway-create-probe-ps.md) met PowerShell en de Azure Resource Manager-implementatiemodel.</span><span class="sxs-lookup"><span data-stu-id="97150-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in the Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and the Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
