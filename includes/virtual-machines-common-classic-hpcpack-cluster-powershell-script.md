



<span data-ttu-id="f1cb1-101">Afhankelijk van uw omgeving en opties, kunt het script alle de clusterinfrastructuur, met inbegrip van het virtuele netwerk van Azure storage-accounts, cloudservices, domeincontroller, lokale of externe SQL-databases, hoofdknooppunt en extra clusterknooppunten maken.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="f1cb1-102">U kunt ook het script vooraf bestaande Azure-infrastructuur gebruiken en alleen de knooppunten in de HPC-cluster maken.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="f1cb1-103">Zie voor achtergrondinformatie over het plannen van een cluster HPC Pack, de [productevaluatie en Planning](https://technet.microsoft.com/library/jj899596.aspx) en [aan de slag](https://technet.microsoft.com/library/jj899590.aspx) inhoud in de TechNet Library voor HPC Pack 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f1cb1-104">Vereisten</span><span class="sxs-lookup"><span data-stu-id="f1cb1-104">Prerequisites</span></span>
* <span data-ttu-id="f1cb1-105">**Azure-abonnement**: U kunt een abonnement in de globale Azure of Azure China service gebruiken.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="f1cb1-106">Uw abonnement limieten van invloed op het aantal en type van clusterknooppunten die u kunt implementeren.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="f1cb1-107">Zie voor informatie [Azure-abonnement en Servicelimieten, quota's en beperkingen](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="f1cb1-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="f1cb1-108">**Windows-clientcomputer met Azure PowerShell 0.8.10 of hoger geïnstalleerd en geconfigureerd**: Zie [aan de slag met Azure PowerShell](/powershell/azureps-cmdlets-docs) voor installatie-instructies en stappen verbinding maken met uw Azure-abonnement.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="f1cb1-109">**HPC Pack IaaS-implementatiescript**: downloaden en uitpakken van de meest recente versie van het script van de [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="f1cb1-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="f1cb1-110">Controleer de versie van het script dat door het uitvoeren van `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="f1cb1-111">In dit artikel is gebaseerd op versie 4.5.2 van het script.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="f1cb1-112">**Script-configuratiebestand**: Maak een XML-bestand dat het script gebruikt om de HPC-cluster te configureren.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="f1cb1-113">Zie voor informatie over en voorbeelden secties verderop in dit artikel en het bestand Manual.rtf die wordt meegestuurd met het script voor implementatie.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="f1cb1-114">Syntaxis</span><span class="sxs-lookup"><span data-stu-id="f1cb1-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="f1cb1-115">Voer het script als beheerder.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="f1cb1-116">Parameters</span><span class="sxs-lookup"><span data-stu-id="f1cb1-116">Parameters</span></span>
* <span data-ttu-id="f1cb1-117">**ConfigFile**: Hiermee geeft u het bestandspad van het configuratiebestand te beschrijven de HPC-cluster.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="f1cb1-118">Zie voor meer informatie over het configuratiebestand in dit onderwerp of in het bestand Manual.rtf in de map waarin het script.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="f1cb1-119">**AdminUserName**: Hiermee geeft u de gebruikersnaam.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="f1cb1-120">Als het domein-forest is gemaakt door het script, wordt dit de gebruikersnaam van de lokale beheerder voor alle virtuele machines en de domeinnaam van de beheerder.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="f1cb1-121">Als het domeinforest al bestaat, geeft u hiermee de domeingebruiker als de gebruikersnaam van de lokale beheerder HPC Pack te installeren.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="f1cb1-122">**AdminPassword**: Hiermee geeft u het administrator wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="f1cb1-123">Als op de opdrachtregel niet is opgegeven, wordt het script vraagt u het wachtwoord.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="f1cb1-124">**HPCImageName** (optioneel): Hiermee geeft u de naam van de HPC Pack VM-installatiekopie gebruikt voor het implementeren van de HPC-cluster.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="f1cb1-125">Het moet de installatiekopie van een opgegeven Microsoft HPC Pack vanuit Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="f1cb1-126">Als niet wordt opgegeven (meestal aanbevolen), het script kiest de meest recente gepubliceerde [HPC Pack 2012 R2-afbeelding](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span><span class="sxs-lookup"><span data-stu-id="f1cb1-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="f1cb1-127">De meest recente installatiekopie is gebaseerd op Windows Server 2012 R2 Datacenter met HPC Pack 2012 R2 Update 3 is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="f1cb1-128">Implementatie mislukt als u een geldige afbeelding zijn HPC Pack niet opgeeft.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="f1cb1-129">**LogFile** (optioneel): Hiermee geeft u het logboekbestandspad van de implementatie.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="f1cb1-130">Als u niet opgeeft, wordt het script een logboekbestand gemaakt in de map temp van de computer waarop het script wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="f1cb1-131">**Force** (optioneel): de bevestiging vragen onderdrukt.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="f1cb1-132">**NoCleanOnFailure** (optioneel): Hiermee geeft u de Azure VM's zijn niet geïmplementeerd worden niet verwijderd.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="f1cb1-133">Deze virtuele machines handmatig verwijderen voordat u het script om door te gaan met de implementatie of de implementatie mislukken.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="f1cb1-134">**PSSessionSkipCACheck** (optioneel): voor elke cloudservice met virtuele machines die door dit script wordt geïmplementeerd, wordt automatisch een zelfondertekend certificaat gegenereerd door Azure en alle virtuele machines in de cloudservice dit certificaat als externe Windows standaardwaarde gebruiken Certificate Management (WinRM).</span><span class="sxs-lookup"><span data-stu-id="f1cb1-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="f1cb1-135">Als u wilt implementeren HPC-functies in deze virtuele Azure-machines, het script standaard, wordt tijdelijk geïnstalleerd deze certificaten op de lokale Computer\\vertrouwde basiscertificeringsinstanties van de client de beveiligingsfout 'niet-vertrouwde Certificeringsinstantie' onderdrukken tijdens het uitvoeren van script.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="f1cb1-136">De certificaten worden verwijderd wanneer het script is voltooid.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="f1cb1-137">Als deze parameter wordt opgegeven, de certificaten zijn niet geïnstalleerd op de clientcomputer en de beveiligingswaarschuwing wordt onderdrukt.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="f1cb1-138">Deze parameter wordt niet aanbevolen voor productie-implementaties.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="f1cb1-139">Voorbeeld</span><span class="sxs-lookup"><span data-stu-id="f1cb1-139">Example</span></span>
<span data-ttu-id="f1cb1-140">Het volgende voorbeeld wordt een HPC Pack-cluster met behulp van het configuratiebestand *MyConfigFile.xml*, en Hiermee geeft u de beheerdersreferenties voor het installeren van het cluster.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="f1cb1-141">Aanvullende overwegingen</span><span class="sxs-lookup"><span data-stu-id="f1cb1-141">Additional considerations</span></span>
* <span data-ttu-id="f1cb1-142">Het script kunt taak indienen via de webportal HPC Pack of de REST-API van HPC Pack optioneel in staat.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="f1cb1-143">Het script kunt eventueel aangepaste scripts voor vóór en na configuratie uitvoeren op het hoofdknooppunt desgewenst extra software te installeren of andere instellingen te configureren.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="f1cb1-144">Configuratiebestand</span><span class="sxs-lookup"><span data-stu-id="f1cb1-144">Configuration file</span></span>
<span data-ttu-id="f1cb1-145">Het configuratiebestand voor het script voor implementatie is een XML-bestand.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="f1cb1-146">Het schemabestand HPCIaaSClusterConfig.xsd is in de map HPC Pack IaaS implementatie script.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="f1cb1-147">**IaaSClusterConfig** is het hoofdelement van het configuratiebestand dat de onderliggende elementen beschreven in het bestand Manual.rtf in de script-map van het implementatietype bevat.</span><span class="sxs-lookup"><span data-stu-id="f1cb1-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

