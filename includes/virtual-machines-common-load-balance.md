

<span data-ttu-id="0f1eb-101">Er zijn twee niveaus van taakverdeling beschikbaar voor Azure-infrastructuurservices:</span><span class="sxs-lookup"><span data-stu-id="0f1eb-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="0f1eb-102">**DNS-niveau**: taakverdeling voor verkeer naar een andere cloud-services zich in verschillende data centers naar verschillende Azure websites zich in verschillende datacenters, of op externe eindpunten.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-102">**DNS Level**:  Load balancing for traffic to different cloud services located in different data centers, to different Azure websites located in different data centers, or to external endpoints.</span></span> <span data-ttu-id="0f1eb-103">Dit wordt gedaan met Azure Traffic Manager en de Round-Robin load balancing-methode.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-103">This is done with Azure Traffic Manager and the Round Robin load balancing method.</span></span>
* <span data-ttu-id="0f1eb-104">**Netwerk-niveau**: Load balancing van binnenkomende internetverkeer naar verschillende virtuele machines van een cloudservice of taakverdeling van verkeer tussen virtuele machines in een cloudservice of het virtuele netwerk.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-104">**Network Level**:  Load balancing of incoming Internet traffic to different virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="0f1eb-105">Dit wordt gedaan met de Azure load balancer.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-105">This is done with the Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="0f1eb-106">Traffic Manager taakverdeling voor cloudservices en websites</span><span class="sxs-lookup"><span data-stu-id="0f1eb-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="0f1eb-107">Traffic Manager kunt u de distributie van gebruikersverkeer naar eindpunten, waaronder cloudservices, websites, externe sites en andere Traffic Manager-profielen te beheren.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-107">Traffic Manager allows you to control the distribution of user traffic to endpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="0f1eb-108">Traffic Manager werkt door het toepassen van een intelligente beleidsengine voor Domain Name System (DNS)-query's voor de domeinnamen van uw Internet-bronnen.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-108">Traffic Manager works by applying an intelligent policy engine to Domain Name System (DNS) queries for the domain names of your Internet resources.</span></span> <span data-ttu-id="0f1eb-109">Uw cloudservices of websites kunnen worden uitgevoerd in verschillende datacenters over de hele wereld.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-109">Your cloud services or websites can be running in different datacenters across the world.</span></span>

<span data-ttu-id="0f1eb-110">U moet een REST- of Windows PowerShell gebruiken voor het configureren van externe eindpunten of Traffic Manager-profielen als eindpunten.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-110">You must use either REST or Windows PowerShell to configure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="0f1eb-111">Traffic Manager maakt gebruik van drie methoden voor taakverdeling voor het distribueren van verkeer:</span><span class="sxs-lookup"><span data-stu-id="0f1eb-111">Traffic Manager uses three load-balancing methods to distribute traffic:</span></span>

* <span data-ttu-id="0f1eb-112">**Failover**: Gebruik deze methode als u wilt gebruiken van een primaire eindpunt voor al het verkeer, maar bieden back-ups als de primaire niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-112">**Failover**:  Use this method when you want to use a primary endpoint for all traffic, but provide backups in case the primary becomes unavailable.</span></span>
* <span data-ttu-id="0f1eb-113">**Prestaties**: Gebruik deze methode wanneer u eindpunten op verschillende geografische locaties en u wilt dat clients die aanvragen indienen het eindpunt 'dichtstbijzijnde' in termen van de laagste latentie te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients to use the "closest" endpoint in terms of the lowest latency.</span></span>
* <span data-ttu-id="0f1eb-114">**Round Robin:** Gebruik deze methode als u wilt verdelen over een set van cloud-services in hetzelfde datacenter of in de cloud-services of websites in verschillende datacenters.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-114">**Round Robin:**  Use this method when you want to distribute load across a set of cloud services in the same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="0f1eb-115">Zie voor meer informatie [over Traffic Manager Load Balancing methoden](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="0f1eb-116">Het volgende diagram toont een voorbeeld van de taakverdelingsmethode van Round Robin voor het distribueren van verkeer tussen verschillende cloud-services.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-116">The following diagram shows an example of the Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="0f1eb-118">Het basisproces is het volgende:</span><span class="sxs-lookup"><span data-stu-id="0f1eb-118">The basic process is the following:</span></span>

1. <span data-ttu-id="0f1eb-119">Een internetclient vraagt een domeinnaam die overeenkomt met een webservice.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-119">An Internet client queries a domain name corresponding to a web service.</span></span>
2. <span data-ttu-id="0f1eb-120">DNS stuurt de aanvraag van de query naam aan Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-120">DNS forwards the name query request to Traffic Manager.</span></span>
3. <span data-ttu-id="0f1eb-121">Traffic Manager de volgende cloudservice kiest in de lijst Round Robin en stuurt terug de DNS-naam.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-121">Traffic Manager chooses the next cloud service in the Round Robin list and sends back the DNS name.</span></span> <span data-ttu-id="0f1eb-122">De client Internet DNS-server wordt de naam omgezet in een IP-adres en verzendt het naar de client via Internet.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-122">The Internet client's DNS server resolves the name to an IP address and sends it to the Internet client.</span></span>
4. <span data-ttu-id="0f1eb-123">De client via Internet verbinding met de gekozen door Traffic Manager-cloudservice.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-123">The Internet client connects with the cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="0f1eb-124">Zie voor meer informatie [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="0f1eb-125">Azure load balancer voor virtuele machines</span><span class="sxs-lookup"><span data-stu-id="0f1eb-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="0f1eb-126">Virtuele machines in dezelfde cloudservice of virtuele netwerk kan communiceren met elkaar rechtstreeks met hun persoonlijke IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-126">Virtual machines in the same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="0f1eb-127">Computers en services buiten de service in de cloud of een virtueel netwerk kunnen communiceren alleen met virtuele machines in een service in de cloud of een virtueel netwerk met een geconfigureerde eindpunt.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-127">Computers and services outside the cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="0f1eb-128">Een eindpunt is een toewijzing van een openbaar IP-adres en poort op die priv√© IP-adres en poort van een virtuele machine of de Webrol in een Azure-cloud-service.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-128">An endpoint is a mapping of a public IP address and port to that private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="0f1eb-129">De Azure Load Balancer verdeelt willekeurig een specifiek type binnenkomend verkeer over meerdere virtuele machines of services in een configuratie met een set met gelijke taakverdeling genoemd.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-129">The Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="0f1eb-130">Bijvoorbeeld, kunt u het laden van de aanvraag webverkeer spreiden meerdere webservers of web-rollen.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-130">For example, you can spread the load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="0f1eb-131">Het volgende diagram toont een eindpunt met gelijke taakverdeling voor standaard (niet-versleutelde) internetverkeer die wordt gedeeld door drie virtuele machines voor de openbare en persoonlijke TCP-poort 80.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-131">The following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for the public and private TCP port of 80.</span></span> <span data-ttu-id="0f1eb-132">Deze drie virtuele machines zijn in een set met gelijke taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-132">These three virtual machines are in a load-balanced set.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="0f1eb-134">Zie voor meer informatie [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="0f1eb-135">Zie voor de stappen voor het maken van een set met gelijke taakverdeling [een set met gelijke taakverdeling configureren](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-135">For the steps to create a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="0f1eb-136">Taakverdeling binnen een cloudservice of een virtueel netwerk worden ook toegepast op Azure.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="0f1eb-137">Dit staat bekend als interne load balancing en kan worden gebruikt in de volgende manieren:</span><span class="sxs-lookup"><span data-stu-id="0f1eb-137">This is known as internal load balancing and can be used in the following ways:</span></span>

* <span data-ttu-id="0f1eb-138">Om taken te verdelen tussen servers in verschillende lagen van een toepassing met meerdere lagen (bijvoorbeeld tussen web- en databaselagen).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-138">To load balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="0f1eb-139">Laden verdelen over line-of-business (LOB) toepassingen die worden gehost in Azure zonder dat extra load balancer-hardware of software.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-139">To load balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="0f1eb-140">Voor het opnemen van lokale servers in de set van computers waarvan het verkeer is de belasting met taakverdeling.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-140">To include on-premises servers in the set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="0f1eb-141">Vergelijkbaar met Azure load balancing, interne load balancer proces wordt vergemakkelijkt door een interne set met gelijke taakverdeling configureren.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-141">Similar to Azure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="0f1eb-142">Het volgende diagram toont een voorbeeld van een intern eindpunt van de taakverdeling voor een line-of-business (LOB)-toepassing die wordt gedeeld door drie virtuele machines in een virtueel netwerk met cross-premises.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-142">The following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![loadbalancing](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="0f1eb-144">Load balancer-overwegingen</span><span class="sxs-lookup"><span data-stu-id="0f1eb-144">Load balancer considerations</span></span>
<span data-ttu-id="0f1eb-145">Een load balancer is standaard geconfigureerd voor time-out voor een niet-actieve sessie in vier minuten.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-145">A load balancer is configured by default to timeout an idle session in 4 minutes.</span></span> <span data-ttu-id="0f1eb-146">Als uw toepassing achter een load balancer een verbinding inactief voor meer dan vier minuten verlaat en geen een Keep-Alive configuratie heeft, is de verbinding wordt verbroken.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, the connection will be dropped.</span></span> <span data-ttu-id="0f1eb-147">Kunt u het gedrag van de load balancer om toe te staan een [langere time-outinstelling voor Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-147">You can change the load balancer behavior to allow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="0f1eb-148">Andere overweging is het type van de distributie-modus wordt ondersteund door Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-148">Other consideration is the type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="0f1eb-149">U kunt de bron-IP-affiniteit (bron-IP, doel-IP) of bron-IP-protocol (bron-IP, doel-IP en -protocol) configureren.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="0f1eb-150">Bekijk [Azure Load Balancer-distributie-modus (bron-IP-affiniteit)](../articles/load-balancer/load-balancer-distribution-mode.md) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="0f1eb-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0f1eb-151">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="0f1eb-151">Next steps</span></span>
<span data-ttu-id="0f1eb-152">Zie voor de stappen voor het maken van een set met gelijke taakverdeling [configureren van een interne set met gelijke taakverdeling](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-152">For the steps to create a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="0f1eb-153">Zie voor meer informatie over de load balancer [interne load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0f1eb-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>

