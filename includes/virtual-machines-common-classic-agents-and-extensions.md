

<span data-ttu-id="320c1-101">VM-extensies kunnen u helpen bij het volgende:</span><span class="sxs-lookup"><span data-stu-id="320c1-101">VM extensions can help you:</span></span>

* <span data-ttu-id="320c1-102">Het wijzigen van beveiligings- en identiteitsfuncties, zoals het opnieuw instellen van accountwaarden en het gebruik van antimalware</span><span class="sxs-lookup"><span data-stu-id="320c1-102">Modify security and identity features, such as resetting account values and using antimalware</span></span>
* <span data-ttu-id="320c1-103">Het starten, stoppen of configureren van bewaking en diagnostische functies</span><span class="sxs-lookup"><span data-stu-id="320c1-103">Start, stop, or configure monitoring and diagnostics</span></span>
* <span data-ttu-id="320c1-104">Het opnieuw instellen of installeren van connectiviteitsfuncties, zoals RDP en SSH</span><span class="sxs-lookup"><span data-stu-id="320c1-104">Reset or install connectivity features, such as RDP and SSH</span></span>
* <span data-ttu-id="320c1-105">Het diagnosticeren, bewaken en beheren van virtuele machines</span><span class="sxs-lookup"><span data-stu-id="320c1-105">Diagnose, monitor, and manage your VMs</span></span>

<span data-ttu-id="320c1-106">Daarnaast zijn er nog vele andere functies.</span><span class="sxs-lookup"><span data-stu-id="320c1-106">There are many other features as well.</span></span> <span data-ttu-id="320c1-107">Er worden regelmatig nieuwe functies voor VM-extensie vrijgegeven.</span><span class="sxs-lookup"><span data-stu-id="320c1-107">New VM Extension features are released regularly.</span></span> <span data-ttu-id="320c1-108">Dit artikel beschrijft de Azure VM-agents voor Windows en Linux, en hoe deze de functionaliteit van VM-extensies ondersteunen.</span><span class="sxs-lookup"><span data-stu-id="320c1-108">This article describes the Azure VM Agents for Windows and Linux, and how they support VM Extension functionality.</span></span> <span data-ttu-id="320c1-109">Zie voor een overzicht van VM-extensies op functie [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (VM-extensies en -functies in Azure).</span><span class="sxs-lookup"><span data-stu-id="320c1-109">For a listing of VM Extensions by feature category, see [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="azure-vm-agents-for-windows-and-linux"></a><span data-ttu-id="320c1-110">Azure VM-agents voor Windows en Linux</span><span class="sxs-lookup"><span data-stu-id="320c1-110">Azure VM Agents for Windows and Linux</span></span>
<span data-ttu-id="320c1-111">De Azure Virtual Machines Agent (VM-agent) is een veilig en eenvoudig proces voor het installeren, configureren en verwijderen van VM-extensies op exemplaren van virtuele Azure-machines.</span><span class="sxs-lookup"><span data-stu-id="320c1-111">The Azure Virtual Machines Agent (VM Agent) is a secured, light-weight process that installs, configures, and removes VM extensions on instances of Azure Virtual Machines.</span></span> <span data-ttu-id="320c1-112">De VM-agent fungeert als beveiligde lokale besturingsservice voor uw virtuele Azure-machine.</span><span class="sxs-lookup"><span data-stu-id="320c1-112">The VM Agent acts as the secure local control service for your Azure VM.</span></span> <span data-ttu-id="320c1-113">De extensies die door de agent worden geladen, bieden specifieke functies om uw productiviteit met het exemplaar te verhogen.</span><span class="sxs-lookup"><span data-stu-id="320c1-113">The extensions that the agent loads provide specific features to increase your productivity using the instance.</span></span>

<span data-ttu-id="320c1-114">Er bestaan twee Azure VM-agents: één voor virtuele Windows-machines en één voor virtuele Linux-machines.</span><span class="sxs-lookup"><span data-stu-id="320c1-114">Two Azure VM Agents exist, one for Windows VMs and one for Linux VMs.</span></span>

<span data-ttu-id="320c1-115">Als u wilt dat een VM-exemplaar een of meer VM-extensies gebruikt, moet op het exemplaar een VM-agent zijn geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="320c1-115">If you want a virtual machine instance to use one or more VM extensions, the instance must have an installed VM Agent.</span></span> <span data-ttu-id="320c1-116">VM-installatiekopieën die met Azure Portal zijn gemaakt en installatiekopieën uit **Marketplace** installeren tijdens het proces automatisch een VM-agent.</span><span class="sxs-lookup"><span data-stu-id="320c1-116">A virtual machine image created by using the Azure portal and an image from the **Marketplace** automatically installs a VM Agent in the creation process.</span></span> <span data-ttu-id="320c1-117">Als een VM-exemplaar geen VM-agent heeft, kunt u de VM-agent installeren nadat het VM-exemplaar is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="320c1-117">If a virtual machine instance lacks a VM Agent, you can install the VM Agent after the virtual machine instance is created.</span></span> <span data-ttu-id="320c1-118">U kunt de agent ook installeren in een aangepaste VM-installatiekopie, die u daarna uploadt.</span><span class="sxs-lookup"><span data-stu-id="320c1-118">Or, you can install the agent in a custom VM image that you then upload.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="320c1-119">Deze VM-agents zijn zeer eenvoudige services die veilig beheer van VM-exemplaren mogelijk maken.</span><span class="sxs-lookup"><span data-stu-id="320c1-119">These VM Agents are very light-weight, services that enable secured administration of virtual machine instances.</span></span> <span data-ttu-id="320c1-120">In bepaalde gevallen wilt u mogelijk niet met een VM-agent werken.</span><span class="sxs-lookup"><span data-stu-id="320c1-120">There might be cases in which you do not want the VM Agent.</span></span> <span data-ttu-id="320c1-121">Als dat zo is, maakt u met de Azure CLI of PowerShell virtuele machines waarop geen VM-agent is geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="320c1-121">If so, be sure to create VMs that do not have the VM Agent installed using the Azure CLI or PowerShell.</span></span> <span data-ttu-id="320c1-122">Hoewel de VM-agent fysiek kan worden verwijderd, is de werking van VM-extensies op het exemplaar onvoorspelbaar.</span><span class="sxs-lookup"><span data-stu-id="320c1-122">Although the VM Agent can be removed physically, the behavior of VM Extensions on the instance is undefined.</span></span> <span data-ttu-id="320c1-123">Daarom wordt het verwijderen van een geïnstalleerde VM-agent niet ondersteund.</span><span class="sxs-lookup"><span data-stu-id="320c1-123">As a result, removing an installed VM Agent is not supported.</span></span>
>

<span data-ttu-id="320c1-124">De VM-agent wordt in de volgende situaties ingeschakeld:</span><span class="sxs-lookup"><span data-stu-id="320c1-124">The VM Agent is enabled in the following situations:</span></span>

* <span data-ttu-id="320c1-125">Wanneer u een VM-exemplaar maakt met behulp van Azure Portal of een installatiekopie van **Marketplace** selecteert.</span><span class="sxs-lookup"><span data-stu-id="320c1-125">When you create an instance of a VM by using the Azure portal and selecting an image from the **Marketplace**,</span></span>
* <span data-ttu-id="320c1-126">Wanneer u een VM-exemplaar maakt met behulp van de cmdlet [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) of [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx).</span><span class="sxs-lookup"><span data-stu-id="320c1-126">When you create an instance of a VM by using the [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) or the [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) cmdlet.</span></span> <span data-ttu-id="320c1-127">Wanneer u een virtuele machine zonder VM-agent maakt door de parameter **–DisableGuestAgent** toe te voegen aan de cmdlet [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx).</span><span class="sxs-lookup"><span data-stu-id="320c1-127">You can create a VM without a VM Agent by adding the **–DisableGuestAgent** parameter to the [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) cmdlet,</span></span>

* <span data-ttu-id="320c1-128">Wanneer u de VM-agent handmatig downloadt en op een bestaand VM-exemplaar installeert, en de waarde **ProvisionGuestAgent** instelt op **waar**.</span><span class="sxs-lookup"><span data-stu-id="320c1-128">When you manually download and install the VM Agent on an existing VM instance, and set the **ProvisionGuestAgent** value to **true**.</span></span> <span data-ttu-id="320c1-129">U kunt deze methode voor Windows- en Linux-agents gebruiken door een PowerShell-opdracht of een REST-aanroep te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="320c1-129">You can use this technique for Windows and Linux agents, by using a PowerShell command or a REST call.</span></span> <span data-ttu-id="320c1-130">(Als u de waarde **ProvisionGuestAgent** niet instelt nadat u de VM-agent handmatig hebt geïnstalleerd, wordt het toevoegen van de VM-agent niet goed gedetecteerd.) In de volgende voorbeeldcode ziet u hoe u dit doet met PowerShell, waar de argumenten `$svc` en `$name` al zijn bepaald:</span><span class="sxs-lookup"><span data-stu-id="320c1-130">(If you do not set the **ProvisionGuestAgent** value after manually installing the VM Agent, the addition of the VM Agent is not detected properly.) The following code example shows how to do this using PowerShell where the `$svc` and `$name` arguments have already been determined:</span></span>

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* <span data-ttu-id="320c1-131">Wanneer u een VM-installatiekopie maakt die een geïnstalleerde VM-agent bevat.</span><span class="sxs-lookup"><span data-stu-id="320c1-131">When you create a VM image that includes an installed VM Agent.</span></span> <span data-ttu-id="320c1-132">Wanneer de installatiekopie met de VM-agent ils gemaakt, kunt u de installatiekopie naar Azure uploaden.</span><span class="sxs-lookup"><span data-stu-id="320c1-132">Once the image with the VM Agent exists, you can upload that image to Azure.</span></span> <span data-ttu-id="320c1-133">Voor een virtuele Windows-machine downloadt u het bestand [Windows VM Agent .msi](http://go.microsoft.com/fwlink/?LinkID=394789) en installeert u de VM-agent.</span><span class="sxs-lookup"><span data-stu-id="320c1-133">For a Windows VM, download the [Windows VM Agent .msi file](http://go.microsoft.com/fwlink/?LinkID=394789) and install the VM Agent.</span></span> <span data-ttu-id="320c1-134">Voor een virtuele Linux-machine installeert u de VM-agent vanuit de GitHub-opslagplaats op <https://github.com/Azure/WALinuxAgent>.</span><span class="sxs-lookup"><span data-stu-id="320c1-134">For a Linux VM, install the VM Agent from the GitHub repository located at <https://github.com/Azure/WALinuxAgent>.</span></span> <span data-ttu-id="320c1-135">Raadpleeg de [Gebruikershandleiding voor Azure VM-agents voor Linux](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) voor meer informatie over het installeren van de VM-agent op Linux.</span><span class="sxs-lookup"><span data-stu-id="320c1-135">For more information on how to install the VM Agent on Linux, see the [Azure Linux VM Agent User Guide](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="320c1-136">In PaaS wordt de VM-agent **WindowsAzureGuestAgent** genoemd. Deze is altijd beschikbaar op web- en werkrol-VM's.</span><span class="sxs-lookup"><span data-stu-id="320c1-136">In PaaS, the VM Agent is called **WindowsAzureGuestAgent**, and is always available on Web and Worker Role VMs.</span></span> <span data-ttu-id="320c1-137">(Zie [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) (Architectuur van Azure-rollen) voor meer informatie.) Met de VM-agent voor rol-VM's kunnen nu extensies aan de cloudservice-VM's worden toegevoegd op dezelfde manier als voor permanente virtuele machines.</span><span class="sxs-lookup"><span data-stu-id="320c1-137">(For more information, see [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) The VM Agent for Role VMs can now add extensions to the cloud service VMs in the same way that it does for persistent Virtual Machines.</span></span> <span data-ttu-id="320c1-138">Het grootste verschil tussen VM-extensies op rol-VM's en permanente VM's is het moment waarop de VM-extensies worden toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="320c1-138">The biggest difference between VM Extensions on role VMs and persistent VMs is when the VM extensions are added.</span></span> <span data-ttu-id="320c1-139">In het geval van rol-VM's worden de extensies eerst toegevoegd aan de cloudservice en vervolgens aan de implementaties binnen die cloudservice.</span><span class="sxs-lookup"><span data-stu-id="320c1-139">With role VMs, extensions are added first to the cloud service, then to the deployments within that cloud service.</span></span>
>
> <span data-ttu-id="320c1-140">Gebruik de cmdlet [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) om alle beschikbare rol-VM-extensies weer te geven.</span><span class="sxs-lookup"><span data-stu-id="320c1-140">Use the [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) cmdlet to list all available role VM extensions.</span></span>
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a><span data-ttu-id="320c1-141">VM-extensies zoeken, toevoegen, bijwerken en verwijderen</span><span class="sxs-lookup"><span data-stu-id="320c1-141">Find, Add, Update, and Remove VM Extensions</span></span>
<span data-ttu-id="320c1-142">Zie [Azure VM-extensies toevoegen, zoeken, bijwerken en verwijderen](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json) voor meer informatie over deze taken.</span><span class="sxs-lookup"><span data-stu-id="320c1-142">For details on these tasks, see [Add, Find, Update, and Remove Azure VM Extensions](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>
